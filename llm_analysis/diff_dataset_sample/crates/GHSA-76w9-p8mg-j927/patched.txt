# ====================================================================
# FILE: src/errno.rs
# Total hunks: 8
# ====================================================================
# --- HUNK 1: Lines 723-777 ---
   723|         EUCLEAN         = libc::EUCLEAN,
   724|         ENOTNAM         = libc::ENOTNAM,
   725|         ENAVAIL         = libc::ENAVAIL,
   726|         EISNAM          = libc::EISNAM,
   727|         EREMOTEIO       = libc::EREMOTEIO,
   728|         EDQUOT          = libc::EDQUOT,
   729|         ENOMEDIUM       = libc::ENOMEDIUM,
   730|         EMEDIUMTYPE     = libc::EMEDIUMTYPE,
   731|         ECANCELED       = libc::ECANCELED,
   732|         ENOKEY          = libc::ENOKEY,
   733|         EKEYEXPIRED     = libc::EKEYEXPIRED,
   734|         EKEYREVOKED     = libc::EKEYREVOKED,
   735|         EKEYREJECTED    = libc::EKEYREJECTED,
   736|         EOWNERDEAD      = libc::EOWNERDEAD,
   737|         ENOTRECOVERABLE = libc::ENOTRECOVERABLE,
   738|         #[cfg(not(any(target_os = "android", target_arch="mips")))]
   739|         ERFKILL         = libc::ERFKILL,
   740|         #[cfg(not(any(target_os = "android", target_arch="mips")))]
   741|         EHWPOISON       = libc::EHWPOISON,
   742|     }
   743|     #[deprecated(
   744|         since = "0.22.1",
   745|         note = "use nix::errno::Errno::EWOULDBLOCK instead"
   746|     )]
   747|     pub const EWOULDBLOCK: Errno = Errno::EAGAIN;
   748|     #[deprecated(
   749|         since = "0.22.1",
   750|         note = "use nix::errno::Errno::EDEADLOCK instead"
   751|     )]
   752|     pub const EDEADLOCK:   Errno = Errno::EDEADLK;
   753|     #[deprecated(
   754|         since = "0.22.1",
   755|         note = "use nix::errno::Errno::ENOTSUP instead"
   756|     )]
   757|     pub const ENOTSUP:  Errno = Errno::EOPNOTSUPP;
   758|     impl Errno {
   759|         pub const EWOULDBLOCK: Errno = Errno::EAGAIN;
   760|         pub const EDEADLOCK:   Errno = Errno::EDEADLK;
   761|         pub const ENOTSUP:     Errno = Errno::EOPNOTSUPP;
   762|     }
   763|     pub fn from_i32(e: i32) -> Errno {
   764|         use self::Errno::*;
   765|         match e {
   766|             libc::EPERM => EPERM,
   767|             libc::ENOENT => ENOENT,
   768|             libc::ESRCH => ESRCH,
   769|             libc::EINTR => EINTR,
   770|             libc::EIO => EIO,
   771|             libc::ENXIO => ENXIO,
   772|             libc::E2BIG => E2BIG,
   773|             libc::ENOEXEC => ENOEXEC,
   774|             libc::EBADF => EBADF,
   775|             libc::ECHILD => ECHILD,
   776|             libc::EAGAIN => EAGAIN,
   777|             libc::ENOMEM => ENOMEM,

# --- HUNK 2: Lines 996-1050 ---
   996|         EBADMACHO       = libc::EBADMACHO,
   997|         ECANCELED       = libc::ECANCELED,
   998|         EIDRM           = libc::EIDRM,
   999|         ENOMSG          = libc::ENOMSG,
  1000|         EILSEQ          = libc::EILSEQ,
  1001|         ENOATTR         = libc::ENOATTR,
  1002|         EBADMSG         = libc::EBADMSG,
  1003|         EMULTIHOP       = libc::EMULTIHOP,
  1004|         ENODATA         = libc::ENODATA,
  1005|         ENOLINK         = libc::ENOLINK,
  1006|         ENOSR           = libc::ENOSR,
  1007|         ENOSTR          = libc::ENOSTR,
  1008|         EPROTO          = libc::EPROTO,
  1009|         ETIME           = libc::ETIME,
  1010|         EOPNOTSUPP      = libc::EOPNOTSUPP,
  1011|         ENOPOLICY       = libc::ENOPOLICY,
  1012|         ENOTRECOVERABLE = libc::ENOTRECOVERABLE,
  1013|         EOWNERDEAD      = libc::EOWNERDEAD,
  1014|         EQFULL          = libc::EQFULL,
  1015|     }
  1016|     #[deprecated(
  1017|         since = "0.22.1",
  1018|         note = "use nix::errno::Errno::ELAST instead"
  1019|     )]
  1020|     pub const ELAST:  Errno = Errno::EQFULL;
  1021|     #[deprecated(
  1022|         since = "0.22.1",
  1023|         note = "use nix::errno::Errno::EWOULDBLOCK instead"
  1024|     )]
  1025|     pub const EWOULDBLOCK: Errno = Errno::EAGAIN;
  1026|     #[deprecated(
  1027|         since = "0.22.1",
  1028|         note = "use nix::errno::Errno::EDEADLOCK instead"
  1029|     )]
  1030|     pub const EDEADLOCK:   Errno = Errno::EDEADLK;
  1031|     impl Errno {
  1032|         pub const ELAST: Errno       = Errno::EQFULL;
  1033|         pub const EWOULDBLOCK: Errno = Errno::EAGAIN;
  1034|         pub const EDEADLOCK:   Errno = Errno::EDEADLK;
  1035|     }
  1036|     pub fn from_i32(e: i32) -> Errno {
  1037|         use self::Errno::*;
  1038|         match e {
  1039|             libc::EPERM => EPERM,
  1040|             libc::ENOENT => ENOENT,
  1041|             libc::ESRCH => ESRCH,
  1042|             libc::EINTR => EINTR,
  1043|             libc::EIO => EIO,
  1044|             libc::ENXIO => ENXIO,
  1045|             libc::E2BIG => E2BIG,
  1046|             libc::ENOEXEC => ENOEXEC,
  1047|             libc::EBADF => EBADF,
  1048|             libc::ECHILD => ECHILD,
  1049|             libc::EDEADLK => EDEADLK,
  1050|             libc::ENOMEM => ENOMEM,

# --- HUNK 3: Lines 1232-1291 ---
  1232|         ENOSYS          = libc::ENOSYS,
  1233|         EFTYPE          = libc::EFTYPE,
  1234|         EAUTH           = libc::EAUTH,
  1235|         ENEEDAUTH       = libc::ENEEDAUTH,
  1236|         EIDRM           = libc::EIDRM,
  1237|         ENOMSG          = libc::ENOMSG,
  1238|         EOVERFLOW       = libc::EOVERFLOW,
  1239|         ECANCELED       = libc::ECANCELED,
  1240|         EILSEQ          = libc::EILSEQ,
  1241|         ENOATTR         = libc::ENOATTR,
  1242|         EDOOFUS         = libc::EDOOFUS,
  1243|         EBADMSG         = libc::EBADMSG,
  1244|         EMULTIHOP       = libc::EMULTIHOP,
  1245|         ENOLINK         = libc::ENOLINK,
  1246|         EPROTO          = libc::EPROTO,
  1247|         ENOTCAPABLE     = libc::ENOTCAPABLE,
  1248|         ECAPMODE        = libc::ECAPMODE,
  1249|         ENOTRECOVERABLE = libc::ENOTRECOVERABLE,
  1250|         EOWNERDEAD      = libc::EOWNERDEAD,
  1251|     }
  1252|     #[deprecated(
  1253|         since = "0.22.1",
  1254|         note = "use nix::errno::Errno::ELAST instead"
  1255|     )]
  1256|     pub const ELAST: Errno       = Errno::EOWNERDEAD;
  1257|     #[deprecated(
  1258|         since = "0.22.1",
  1259|         note = "use nix::errno::Errno::EWOULDBLOCK instead"
  1260|     )]
  1261|     pub const EWOULDBLOCK: Errno = Errno::EAGAIN;
  1262|     #[deprecated(
  1263|         since = "0.22.1",
  1264|         note = "use nix::errno::Errno::EDEADLOCK instead"
  1265|     )]
  1266|     pub const EDEADLOCK:   Errno = Errno::EDEADLK;
  1267|     #[deprecated(
  1268|         since = "0.22.1",
  1269|         note = "use nix::errno::Errno::EOPNOTSUPP instead"
  1270|     )]
  1271|     pub const EOPNOTSUPP:  Errno = Errno::ENOTSUP;
  1272|     impl Errno {
  1273|         pub const ELAST: Errno       = Errno::EOWNERDEAD;
  1274|         pub const EWOULDBLOCK: Errno = Errno::EAGAIN;
  1275|         pub const EDEADLOCK:   Errno = Errno::EDEADLK;
  1276|         pub const EOPNOTSUPP:  Errno = Errno::ENOTSUP;
  1277|     }
  1278|     pub fn from_i32(e: i32) -> Errno {
  1279|         use self::Errno::*;
  1280|         match e {
  1281|             libc::EPERM => EPERM,
  1282|             libc::ENOENT => ENOENT,
  1283|             libc::ESRCH => ESRCH,
  1284|             libc::EINTR => EINTR,
  1285|             libc::EIO => EIO,
  1286|             libc::ENXIO => ENXIO,
  1287|             libc::E2BIG => E2BIG,
  1288|             libc::ENOEXEC => ENOEXEC,
  1289|             libc::EBADF => EBADF,
  1290|             libc::ECHILD => ECHILD,
  1291|             libc::EDEADLK => EDEADLK,

# --- HUNK 4: Lines 1462-1521 ---
  1462|         EPROCUNAVAIL    = libc::EPROCUNAVAIL,
  1463|         ENOLCK          = libc::ENOLCK,
  1464|         ENOSYS          = libc::ENOSYS,
  1465|         EFTYPE          = libc::EFTYPE,
  1466|         EAUTH           = libc::EAUTH,
  1467|         ENEEDAUTH       = libc::ENEEDAUTH,
  1468|         EIDRM           = libc::EIDRM,
  1469|         ENOMSG          = libc::ENOMSG,
  1470|         EOVERFLOW       = libc::EOVERFLOW,
  1471|         ECANCELED       = libc::ECANCELED,
  1472|         EILSEQ          = libc::EILSEQ,
  1473|         ENOATTR         = libc::ENOATTR,
  1474|         EDOOFUS         = libc::EDOOFUS,
  1475|         EBADMSG         = libc::EBADMSG,
  1476|         EMULTIHOP       = libc::EMULTIHOP,
  1477|         ENOLINK         = libc::ENOLINK,
  1478|         EPROTO          = libc::EPROTO,
  1479|         ENOMEDIUM       = libc::ENOMEDIUM,
  1480|         EASYNC          = libc::EASYNC,
  1481|     }
  1482|     #[deprecated(
  1483|         since = "0.22.1",
  1484|         note = "use nix::errno::Errno::ELAST instead"
  1485|     )]
  1486|     pub const ELAST: Errno       = Errno::EASYNC;
  1487|     #[deprecated(
  1488|         since = "0.22.1",
  1489|         note = "use nix::errno::Errno::EWOULDBLOCK instead"
  1490|     )]
  1491|     pub const EWOULDBLOCK: Errno = Errno::EAGAIN;
  1492|     #[deprecated(
  1493|         since = "0.22.1",
  1494|         note = "use nix::errno::Errno::EDEADLOCK instead"
  1495|     )]
  1496|     pub const EDEADLOCK:   Errno = Errno::EDEADLK;
  1497|     #[deprecated(
  1498|         since = "0.22.1",
  1499|         note = "use nix::errno::Errno::EOPNOTSUPP instead"
  1500|     )]
  1501|     pub const EOPNOTSUPP:  Errno = Errno::ENOTSUP;
  1502|     impl Errno {
  1503|         pub const ELAST: Errno       = Errno::EASYNC;
  1504|         pub const EWOULDBLOCK: Errno = Errno::EAGAIN;
  1505|         pub const EDEADLOCK:   Errno = Errno::EDEADLK;
  1506|         pub const EOPNOTSUPP:  Errno = Errno::ENOTSUP;
  1507|     }
  1508|     pub fn from_i32(e: i32) -> Errno {
  1509|         use self::Errno::*;
  1510|         match e {
  1511|             libc::EPERM => EPERM,
  1512|             libc::ENOENT => ENOENT,
  1513|             libc::ESRCH => ESRCH,
  1514|             libc::EINTR => EINTR,
  1515|             libc::EIO => EIO,
  1516|             libc::ENXIO => ENXIO,
  1517|             libc::E2BIG => E2BIG,
  1518|             libc::ENOEXEC => ENOEXEC,
  1519|             libc::EBADF => EBADF,
  1520|             libc::ECHILD => ECHILD,
  1521|             libc::EDEADLK => EDEADLK,

# --- HUNK 5: Lines 1691-1740 ---
  1691|         ENOLCK          = libc::ENOLCK,
  1692|         ENOSYS          = libc::ENOSYS,
  1693|         EFTYPE          = libc::EFTYPE,
  1694|         EAUTH           = libc::EAUTH,
  1695|         ENEEDAUTH       = libc::ENEEDAUTH,
  1696|         EIPSEC          = libc::EIPSEC,
  1697|         ENOATTR         = libc::ENOATTR,
  1698|         EILSEQ          = libc::EILSEQ,
  1699|         ENOMEDIUM       = libc::ENOMEDIUM,
  1700|         EMEDIUMTYPE     = libc::EMEDIUMTYPE,
  1701|         EOVERFLOW       = libc::EOVERFLOW,
  1702|         ECANCELED       = libc::ECANCELED,
  1703|         EIDRM           = libc::EIDRM,
  1704|         ENOMSG          = libc::ENOMSG,
  1705|         ENOTSUP         = libc::ENOTSUP,
  1706|         EBADMSG         = libc::EBADMSG,
  1707|         ENOTRECOVERABLE = libc::ENOTRECOVERABLE,
  1708|         EOWNERDEAD      = libc::EOWNERDEAD,
  1709|         EPROTO          = libc::EPROTO,
  1710|     }
  1711|     #[deprecated(
  1712|         since = "0.22.1",
  1713|         note = "use nix::errno::Errno::ELAST instead"
  1714|     )]
  1715|     pub const ELAST: Errno       = Errno::ENOTSUP;
  1716|     #[deprecated(
  1717|         since = "0.22.1",
  1718|         note = "use nix::errno::Errno::EWOULDBLOCK instead"
  1719|     )]
  1720|     pub const EWOULDBLOCK: Errno = Errno::EAGAIN;
  1721|     impl Errno {
  1722|         pub const ELAST: Errno       = Errno::ENOTSUP;
  1723|         pub const EWOULDBLOCK: Errno = Errno::EAGAIN;
  1724|     }
  1725|     pub fn from_i32(e: i32) -> Errno {
  1726|         use self::Errno::*;
  1727|         match e {
  1728|             libc::EPERM => EPERM,
  1729|             libc::ENOENT => ENOENT,
  1730|             libc::ESRCH => ESRCH,
  1731|             libc::EINTR => EINTR,
  1732|             libc::EIO => EIO,
  1733|             libc::ENXIO => ENXIO,
  1734|             libc::E2BIG => E2BIG,
  1735|             libc::ENOEXEC => ENOEXEC,
  1736|             libc::EBADF => EBADF,
  1737|             libc::ECHILD => ECHILD,
  1738|             libc::EDEADLK => EDEADLK,
  1739|             libc::ENOMEM => ENOMEM,
  1740|             libc::EACCES => EACCES,

# --- HUNK 6: Lines 1910-1959 ---
  1910|         ENOSYS          = libc::ENOSYS,
  1911|         EFTYPE          = libc::EFTYPE,
  1912|         EAUTH           = libc::EAUTH,
  1913|         ENEEDAUTH       = libc::ENEEDAUTH,
  1914|         EIDRM           = libc::EIDRM,
  1915|         ENOMSG          = libc::ENOMSG,
  1916|         EOVERFLOW       = libc::EOVERFLOW,
  1917|         EILSEQ          = libc::EILSEQ,
  1918|         ENOTSUP         = libc::ENOTSUP,
  1919|         ECANCELED       = libc::ECANCELED,
  1920|         EBADMSG         = libc::EBADMSG,
  1921|         ENODATA         = libc::ENODATA,
  1922|         ENOSR           = libc::ENOSR,
  1923|         ENOSTR          = libc::ENOSTR,
  1924|         ETIME           = libc::ETIME,
  1925|         ENOATTR         = libc::ENOATTR,
  1926|         EMULTIHOP       = libc::EMULTIHOP,
  1927|         ENOLINK         = libc::ENOLINK,
  1928|         EPROTO          = libc::EPROTO,
  1929|     }
  1930|     #[deprecated(
  1931|         since = "0.22.1",
  1932|         note = "use nix::errno::Errno::ELAST instead"
  1933|     )]
  1934|     pub const ELAST: Errno       = Errno::ENOTSUP;
  1935|     #[deprecated(
  1936|         since = "0.22.1",
  1937|         note = "use nix::errno::Errno::EWOULDBLOCK instead"
  1938|     )]
  1939|     pub const EWOULDBLOCK: Errno = Errno::EAGAIN;
  1940|     impl Errno {
  1941|         pub const ELAST: Errno       = Errno::ENOTSUP;
  1942|         pub const EWOULDBLOCK: Errno = Errno::EAGAIN;
  1943|     }
  1944|     pub fn from_i32(e: i32) -> Errno {
  1945|         use self::Errno::*;
  1946|         match e {
  1947|             libc::EPERM => EPERM,
  1948|             libc::ENOENT => ENOENT,
  1949|             libc::ESRCH => ESRCH,
  1950|             libc::EINTR => EINTR,
  1951|             libc::EIO => EIO,
  1952|             libc::ENXIO => ENXIO,
  1953|             libc::E2BIG => E2BIG,
  1954|             libc::ENOEXEC => ENOEXEC,
  1955|             libc::EBADF => EBADF,
  1956|             libc::ECHILD => ECHILD,
  1957|             libc::EDEADLK => EDEADLK,
  1958|             libc::ENOMEM => ENOMEM,
  1959|             libc::EACCES => EACCES,

# --- HUNK 7: Lines 2119-2163 ---
  2119|         EUSERS = libc::EUSERS,
  2120|         EDQUOT = libc::EDQUOT,
  2121|         ESTALE = libc::ESTALE,
  2122|         EREMOTE = libc::EREMOTE,
  2123|         ENOLCK = libc::ENOLCK,
  2124|         ENOSYS = libc::ENOSYS,
  2125|         EIDRM = libc::EIDRM,
  2126|         ENOMSG = libc::ENOMSG,
  2127|         EOVERFLOW = libc::EOVERFLOW,
  2128|         EILSEQ = libc::EILSEQ,
  2129|         ECANCELED = libc::ECANCELED,
  2130|         EBADMSG = libc::EBADMSG,
  2131|         ENODATA = libc::ENODATA,
  2132|         ENOSR = libc::ENOSR,
  2133|         ENOSTR = libc::ENOSTR,
  2134|         ETIME = libc::ETIME,
  2135|         EMULTIHOP = libc::EMULTIHOP,
  2136|         ENOLINK = libc::ENOLINK,
  2137|         EPROTO = libc::EPROTO,
  2138|     }
  2139|     #[deprecated(
  2140|         since = "0.22.1",
  2141|         note = "use nix::errno::Errno::EWOULDBLOCK instead"
  2142|     )]
  2143|     pub const EWOULDBLOCK: Errno = Errno::EAGAIN;
  2144|     impl Errno {
  2145|         pub const EWOULDBLOCK: Errno = Errno::EAGAIN;
  2146|     }
  2147|     pub fn from_i32(e: i32) -> Errno {
  2148|         use self::Errno::*;
  2149|         match e {
  2150|             libc::EPERM => EPERM,
  2151|             libc::ENOENT => ENOENT,
  2152|             libc::ESRCH => ESRCH,
  2153|             libc::EINTR => EINTR,
  2154|             libc::EIO => EIO,
  2155|             libc::ENXIO => ENXIO,
  2156|             libc::E2BIG => E2BIG,
  2157|             libc::ENOEXEC => ENOEXEC,
  2158|             libc::EBADF => EBADF,
  2159|             libc::ECHILD => ECHILD,
  2160|             libc::EDEADLK => EDEADLK,
  2161|             libc::ENOMEM => ENOMEM,
  2162|             libc::EACCES => EACCES,
  2163|             libc::EFAULT => EFAULT,

# --- HUNK 8: Lines 2347-2396 ---
  2347|         EADDRINUSE = libc::EADDRINUSE,
  2348|         EADDRNOTAVAIL = libc::EADDRNOTAVAIL,
  2349|         ENETDOWN = libc::ENETDOWN,
  2350|         ENETUNREACH = libc::ENETUNREACH,
  2351|         ENETRESET = libc::ENETRESET,
  2352|         ECONNABORTED = libc::ECONNABORTED,
  2353|         ECONNRESET = libc::ECONNRESET,
  2354|         ENOBUFS = libc::ENOBUFS,
  2355|         EISCONN = libc::EISCONN,
  2356|         ENOTCONN = libc::ENOTCONN,
  2357|         ESHUTDOWN = libc::ESHUTDOWN,
  2358|         ETOOMANYREFS = libc::ETOOMANYREFS,
  2359|         ETIMEDOUT = libc::ETIMEDOUT,
  2360|         ECONNREFUSED = libc::ECONNREFUSED,
  2361|         EHOSTDOWN = libc::EHOSTDOWN,
  2362|         EHOSTUNREACH = libc::EHOSTUNREACH,
  2363|         EALREADY = libc::EALREADY,
  2364|         EINPROGRESS = libc::EINPROGRESS,
  2365|         ESTALE = libc::ESTALE,
  2366|     }
  2367|     #[deprecated(
  2368|         since = "0.22.1",
  2369|         note = "use nix::errno::Errno::ELAST instead"
  2370|     )]
  2371|     pub const ELAST: Errno = Errno::ELAST;
  2372|     #[deprecated(
  2373|         since = "0.22.1",
  2374|         note = "use nix::errno::Errno::EWOULDBLOCK instead"
  2375|     )]
  2376|     pub const EWOULDBLOCK: Errno = Errno::EAGAIN;
  2377|     impl Errno {
  2378|         pub const ELAST: Errno       = Errno::ESTALE;
  2379|         pub const EWOULDBLOCK: Errno = Errno::EAGAIN;
  2380|     }
  2381|     pub fn from_i32(e: i32) -> Errno {
  2382|         use self::Errno::*;
  2383|         match e {
  2384|             libc::EPERM => EPERM,
  2385|             libc::ENOENT => ENOENT,
  2386|             libc::ESRCH => ESRCH,
  2387|             libc::EINTR => EINTR,
  2388|             libc::EIO => EIO,
  2389|             libc::ENXIO => ENXIO,
  2390|             libc::E2BIG => E2BIG,
  2391|             libc::ENOEXEC => ENOEXEC,
  2392|             libc::EBADF => EBADF,
  2393|             libc::ECHILD => ECHILD,
  2394|             libc::EAGAIN => EAGAIN,
  2395|             libc::ENOMEM => ENOMEM,
  2396|             libc::EACCES => EACCES,


# ====================================================================
# FILE: src/unistd.rs
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 722-772 ---
   722|             type setgroups_ngroups_t = c_int;
   723|         } else {
   724|             type setgroups_ngroups_t = size_t;
   725|         }
   726|     }
   727|     let res = unsafe {
   728|         libc::setgroups(groups.len() as setgroups_ngroups_t, groups.as_ptr() as *const gid_t)
   729|     };
   730|     Errno::result(res).map(drop)
   731| }
   732| #[cfg(not(any(target_os = "illumos",
   733|               target_os = "ios",
   734|               target_os = "macos",
   735|               target_os = "redox")))]
   736| pub fn getgrouplist(user: &CStr, group: Gid) -> Result<Vec<Gid>> {
   737|     let ngroups_max = match sysconf(SysconfVar::NGROUPS_MAX) {
   738|         Ok(Some(n)) => n as c_int,
   739|         Ok(None) | Err(_) => <c_int>::max_value(),
   740|     };
   741|     use std::cmp::min;
   742|     let mut groups = Vec::<Gid>::with_capacity(min(ngroups_max, 8) as usize);
   743|     cfg_if! {
   744|         if #[cfg(any(target_os = "ios", target_os = "macos"))] {
   745|             type getgrouplist_group_t = c_int;
   746|         } else {
   747|             type getgrouplist_group_t = gid_t;
   748|         }
   749|     }
   750|     let gid: gid_t = group.into();
   751|     loop {
   752|         let mut ngroups = groups.capacity() as i32;
   753|         let ret = unsafe {
   754|             libc::getgrouplist(user.as_ptr(),
   755|                                gid as getgrouplist_group_t,
   756|                                groups.as_mut_ptr() as *mut getgrouplist_group_t,
   757|                                &mut ngroups)
   758|         };
   759|         if ret >= 0 {
   760|             unsafe { groups.set_len(ngroups as usize) };
   761|             return Ok(groups);
   762|         } else if ret == -1 {
   763|             reserve_double_buffer_size(&mut groups, ngroups_max as usize)
   764|                 .map_err(|_| Error::from(Errno::EINVAL))?;
   765|         }
   766|     }
   767| }
   768| #[cfg(not(any(target_os = "ios", target_os = "macos", target_os = "redox")))]
   769| pub fn initgroups(user: &CStr, group: Gid) -> Result<()> {
   770|     cfg_if! {
   771|         if #[cfg(any(target_os = "ios", target_os = "macos"))] {
   772|             type initgroups_group_t = c_int;

