# ====================================================================
# FILE: components/registry/org.wso2.carbon.registry.resource.ui/src/main/java/org/wso2/carbon/registry/resource/ui/processors/GetResourceTreeProcessor.java
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 100-144 ---
   100|             if (childPaths != null && childPaths.length > 0) hasChildren = true;
   101|         }
   102|         if (resourcePath != null && !resourcePath.equals(RegistryConstants.ROOT_PATH)) {
   103|             String[] parts = resourcePath.split(RegistryConstants.PATH_SEPARATOR);
   104|             resourceName = parts[parts.length - 1];
   105|         } else {
   106|             resourceName = "/";
   107|         }
   108|         treeData.incrementTreeIndex();
   109|         treeData.appendToTree("<div class=\"father-object\">");
   110|         if (resourceEntry.getCollection()) {
   111|             treeData.appendToTree("<a onclick=\"showHideCommon('y_plus_" + treeData.getResourceTreeIndex() + "');showHideCommon('y_minus_" + treeData.getResourceTreeIndex() + "');showHideCommon('z_" + treeData.getResourceTreeIndex() + "');\">");
   112|             if (hasChildren) {
   113|                 treeData.appendToTree("<img src=\"../resources/images/icon-tree-plus.jpg\" id=\"y_plus_" + treeData.getResourceTreeIndex() + "\" style=\"display:none;margin-right:5px;\" />" +
   114|                         "<img src=\"../resources/images/icon-tree-minus.jpg\" id=\"y_minus_" + treeData.getResourceTreeIndex() + "\" style=\"margin-right:5px;\" />");
   115|             } else {
   116|                 treeData.appendToTree("<img src=\"../resources/images/spacer.gif\" style=\"width:18px;height:10px;\" />");
   117|             }
   118|             treeData.appendToTree("<a onclick=\"pickPath('" + resourcePath + "','" + textBoxId + "')\" title=\"" + resourcePath + "\">" +
   119|                     "<img src=\"../resources/images/" + getTreeFolderIcon(resourceEntry) + "\" style=\"margin-right:2px;\" />" +
   120|                     resourceName +
   121|                     "</a>");
   122|         } else {
   123|             treeData.appendToTree("<img src=\"../resources/images/spacer.gif\" style=\"width:18px;height:10px;\" />");
   124|             treeData.appendToTree("<a class=\"plane-resource\" onclick=\"pickPath('" + resourcePath + "','" + textBoxId + "')\" title=\"" + resourcePath + "\">" + "<img src=\"../resources/images/" + getTreeResourceIcon(resourceEntry) + "\" style=\"margin-right:2px;\" />" + resourceName + "</a>");
   125|         }
   126|         treeData.appendToTree("</div>" + "<div class=\"child-objects\" id=\"z_" + treeData.getResourceTreeIndex() + "\">");
   127|         if (!resourceEntry.getCollection()) {
   128|             treeData.appendToTree("</div>");
   129|             return;
   130|         } else {
   131|             if (!hasChildren) {
   132|                 treeData.appendToTree("</div>");
   133|                 return;
   134|             } else {
   135|                 for (int i = 0; childPaths.length > i; i++) {
   136|                     fillResourceTree(childPaths[i], treeData, client,textBoxId);
   137|                 }
   138|             }
   139|         }
   140|         treeData.appendToTree("</div>");
   141|     }
   142|     private static void fillSubResourceTree(
   143|             String resourcePath, ResourceTreeData treeData, ResourceServiceClient client,String textBoxId,
   144|             String parentId, boolean hideResources) throws RegistryException {

# --- HUNK 2: Lines 180-210 ---
   180|                 }
   181|                 boolean childHasChildren = false;
   182|                 if (childResouceEntry.getCollection()) {
   183|                     String []childChildPaths = childResouceEntry.getChildren();
   184|                     if (childChildPaths != null && childChildPaths.length > 0) childHasChildren = true;
   185|                 } else if (hideResources) {
   186|                     continue;
   187|                 }
   188|                 treeData.appendToTree("<div class=\"father-object\" id=\"" + Encode.forHtml(fatherId) + "\">");
   189|                 /* if this has children we let it expandable */
   190|                 if (childResouceEntry.getCollection()) {
   191|                     if (childHasChildren) {
   192|                         treeData.appendToTree("<a onclick=\"loadSubTree('" + childPaths[i] + "', '" + Encode.forJavaScript(parentId) + "_" + i + "', '" + Encode.forJavaScript(textBoxId) + "', '" + (hideResources? "true" : "false") + "')\">");
   193|                         treeData.appendToTree("<img src=\"../resources/images/icon-tree-plus.jpg\" id=\"plus_" + parentId + "_" + i + "\" style=\"margin-right:5px;\"  />" +
   194|                                 "<img src=\"../resources/images/icon-tree-minus.jpg\" id=\"minus_" + Encode.forHtml(parentId) + "_" + i + "\" style=\"display:none;margin-right:5px;\"/>");
   195|                     } else {
   196|                        treeData.appendToTree("<img src=\"../resources/images/spacer.gif\" style=\"width:18px;height:10px;\" />");
   197|                     }
   198|                     treeData.appendToTree("<a onclick=\"pickPath('" + childPaths[i] + "','" + Encode.forJavaScript(textBoxId) + "', '" + Encode.forJavaScript(parentId) + "_" + i + "');\" title=\"" + childPaths[i] + "\">" +
   199|                             "<img src=\"../resources/images/" + getTreeFolderIcon(childResouceEntry) + "\" style=\"margin-right:2px;\" />" +
   200|                             resourceName +
   201|                             "</a>");
   202|                     treeData.appendToTree("</div>" + "<div class=\"child-objects\" id=\"" + Encode.forHtml(childId) + "\"></div>");
   203|                 } else {
   204|                     treeData.appendToTree("<img src=\"../resources/images/spacer.gif\" style=\"width:18px;height:10px;\" />");
   205|                     treeData.appendToTree("<a class=\"plane-resource\" onclick=\"pickPath('" + childPaths[i] + "','" + Encode.forJavaScript(textBoxId) + "', '" + Encode.forJavaScript(parentId) + "_" + i + "');\" title=\"" + childPaths[i] + "\">" + "<img src=\"../resources/images/" + getTreeResourceIcon(childResouceEntry) + "\" style=\"margin-right:2px;\"/>" + resourceName + "</a></div>");
   206|                 }
   207|             }
   208|         }
   209|     }
   210| }

