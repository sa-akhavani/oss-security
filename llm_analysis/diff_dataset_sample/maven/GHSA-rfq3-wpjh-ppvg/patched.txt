# ====================================================================
# FILE: components/registry/org.wso2.carbon.registry.resource.ui/src/main/java/org/wso2/carbon/registry/resource/ui/processors/GetResourceTreeProcessor.java
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 100-147 ---
   100|             if (childPaths != null && childPaths.length > 0) hasChildren = true;
   101|         }
   102|         if (resourcePath != null && !resourcePath.equals(RegistryConstants.ROOT_PATH)) {
   103|             String[] parts = resourcePath.split(RegistryConstants.PATH_SEPARATOR);
   104|             resourceName = parts[parts.length - 1];
   105|         } else {
   106|             resourceName = "/";
   107|         }
   108|         treeData.incrementTreeIndex();
   109|         treeData.appendToTree("<div class=\"father-object\">");
   110|         if (resourceEntry.getCollection()) {
   111|             treeData.appendToTree("<a onclick=\"showHideCommon('y_plus_" + treeData.getResourceTreeIndex() + "');showHideCommon('y_minus_" + treeData.getResourceTreeIndex() + "');showHideCommon('z_" + treeData.getResourceTreeIndex() + "');\">");
   112|             if (hasChildren) {
   113|                 treeData.appendToTree("<img src=\"../resources/images/icon-tree-plus.jpg\" id=\"y_plus_" + treeData.getResourceTreeIndex() + "\" style=\"display:none;margin-right:5px;\" />" +
   114|                         "<img src=\"../resources/images/icon-tree-minus.jpg\" id=\"y_minus_" + treeData.getResourceTreeIndex() + "\" style=\"margin-right:5px;\" />");
   115|             } else {
   116|                 treeData.appendToTree("<img src=\"../resources/images/spacer.gif\" style=\"width:18px;height:10px;\" />");
   117|             }
   118|             treeData.appendToTree("<a onclick=\"pickPath('" + resourcePath + "','" + textBoxId + "')\" title=\"" + resourcePath + "\">" +
   119|                     "<img src=\"../resources/images/" + getTreeFolderIcon(resourceEntry) + "\" style=\"margin-right:2px;\" />" +
   120|                     Encode.forHtml(resourceName) +
   121|                     "</a>");
   122|         } else {
   123|             treeData.appendToTree("<img src=\"../resources/images/spacer.gif\" style=\"width:18px;height:10px;\" />");
   124|             treeData.appendToTree("<a class=\"plane-resource\" onclick=\"pickPath('" + resourcePath + "','" +
   125|                 textBoxId + "')\" title=\"" + resourcePath + "\">" + "<img src=\"../resources/images/" +
   126|                 getTreeResourceIcon(resourceEntry) + "\" style=\"margin-right:2px;\" />" +
   127|                 Encode.forHtml(resourceName) + "</a>");
   128|         }
   129|         treeData.appendToTree("</div>" + "<div class=\"child-objects\" id=\"z_" + treeData.getResourceTreeIndex() + "\">");
   130|         if (!resourceEntry.getCollection()) {
   131|             treeData.appendToTree("</div>");
   132|             return;
   133|         } else {
   134|             if (!hasChildren) {
   135|                 treeData.appendToTree("</div>");
   136|                 return;
   137|             } else {
   138|                 for (int i = 0; childPaths.length > i; i++) {
   139|                     fillResourceTree(childPaths[i], treeData, client,textBoxId);
   140|                 }
   141|             }
   142|         }
   143|         treeData.appendToTree("</div>");
   144|     }
   145|     private static void fillSubResourceTree(
   146|             String resourcePath, ResourceTreeData treeData, ResourceServiceClient client,String textBoxId,
   147|             String parentId, boolean hideResources) throws RegistryException {

# --- HUNK 2: Lines 183-217 ---
   183|                 }
   184|                 boolean childHasChildren = false;
   185|                 if (childResouceEntry.getCollection()) {
   186|                     String []childChildPaths = childResouceEntry.getChildren();
   187|                     if (childChildPaths != null && childChildPaths.length > 0) childHasChildren = true;
   188|                 } else if (hideResources) {
   189|                     continue;
   190|                 }
   191|                 treeData.appendToTree("<div class=\"father-object\" id=\"" + Encode.forHtml(fatherId) + "\">");
   192|                 /* if this has children we let it expandable */
   193|                 if (childResouceEntry.getCollection()) {
   194|                     if (childHasChildren) {
   195|                         treeData.appendToTree("<a onclick=\"loadSubTree('" + childPaths[i] + "', '" + Encode.forJavaScript(parentId) + "_" + i + "', '" + Encode.forJavaScript(textBoxId) + "', '" + (hideResources? "true" : "false") + "')\">");
   196|                         treeData.appendToTree("<img src=\"../resources/images/icon-tree-plus.jpg\" id=\"plus_" + parentId + "_" + i + "\" style=\"margin-right:5px;\"  />" +
   197|                                 "<img src=\"../resources/images/icon-tree-minus.jpg\" id=\"minus_" + Encode.forHtml(parentId) + "_" + i + "\" style=\"display:none;margin-right:5px;\"/>");
   198|                     } else {
   199|                        treeData.appendToTree("<img src=\"../resources/images/spacer.gif\" style=\"width:18px;height:10px;\" />");
   200|                     }
   201|                     treeData.appendToTree("<a onclick=\"pickPath('" + childPaths[i] + "','" + Encode.forJavaScript(textBoxId) + "', '" + Encode.forJavaScript(parentId) + "_" + i + "');\" title=\"" + childPaths[i] + "\">" +
   202|                             "<img src=\"../resources/images/" + getTreeFolderIcon(childResouceEntry) + "\" style=\"margin-right:2px;\" />" +
   203|                             Encode.forHtml(resourceName) +
   204|                             "</a>");
   205|                     treeData.appendToTree("</div>" + "<div class=\"child-objects\" id=\"" + Encode.forHtml(childId) + "\"></div>");
   206|                 } else {
   207|                     treeData.appendToTree("<img src=\"../resources/images/spacer.gif\" style=\"width:18px;height:10px;\" />");
   208|                     treeData.appendToTree("<a class=\"plane-resource\" onclick=\"pickPath('" + childPaths[i] + "','" +
   209|                         Encode.forJavaScript(textBoxId) + "', '" + Encode.forJavaScript(parentId) + "_" +
   210|                         i + "');\" title=\"" + childPaths[i] + "\">" + "<img src=\"../resources/images/" +
   211|                         getTreeResourceIcon(childResouceEntry) + "\" style=\"margin-right:2px;\"/>" +
   212|                         Encode.forHtml(resourceName) + "</a></div>");
   213|                 }
   214|             }
   215|         }
   216|     }
   217| }

