# ====================================================================
# FILE: strawberry/aiohttp/views.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 73-120 ---
    73| ):
    74|     _is_coroutine = asyncio.coroutines._is_coroutine  # type: ignore[attr-defined]
    75|     graphql_transport_ws_handler_class = GraphQLTransportWSHandler
    76|     graphql_ws_handler_class = GraphQLWSHandler
    77|     allow_queries_via_get = True
    78|     request_adapter_class = AioHTTPRequestAdapter
    79|     def __init__(
    80|         self,
    81|         schema: BaseSchema,
    82|         graphiql: Optional[bool] = None,
    83|         graphql_ide: Optional[GraphQL_IDE] = "graphiql",
    84|         allow_queries_via_get: bool = True,
    85|         keep_alive: bool = True,
    86|         keep_alive_interval: float = 1,
    87|         debug: bool = False,
    88|         subscription_protocols: Iterable[str] = (
    89|             GRAPHQL_TRANSPORT_WS_PROTOCOL,
    90|             GRAPHQL_WS_PROTOCOL,
    91|         ),
    92|         connection_init_wait_timeout: timedelta = timedelta(minutes=1),
    93|     ) -> None:
    94|         self.schema = schema
    95|         self.allow_queries_via_get = allow_queries_via_get
    96|         self.keep_alive = keep_alive
    97|         self.keep_alive_interval = keep_alive_interval
    98|         self.debug = debug
    99|         self.subscription_protocols = subscription_protocols
   100|         self.connection_init_wait_timeout = connection_init_wait_timeout
   101|         if graphiql is not None:
   102|             warnings.warn(
   103|                 "The `graphiql` argument is deprecated in favor of `graphql_ide`",
   104|                 DeprecationWarning,
   105|                 stacklevel=2,
   106|             )
   107|             self.graphql_ide = "graphiql" if graphiql else None
   108|         else:
   109|             self.graphql_ide = graphql_ide
   110|     async def render_graphql_ide(self, request: web.Request) -> web.Response:
   111|         return web.Response(text=self.graphql_ide_html, content_type="text/html")
   112|     async def get_sub_response(self, request: web.Request) -> web.Response:
   113|         return web.Response()
   114|     async def __call__(self, request: web.Request) -> web.StreamResponse:
   115|         ws = web.WebSocketResponse(protocols=self.subscription_protocols)
   116|         ws_test = ws.can_prepare(request)
   117|         if not ws_test.ok:
   118|             try:
   119|                 return await self.run(request=request)
   120|             except HTTPException as e:


# ====================================================================
# FILE: strawberry/asgi/__init__.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 72-119 ---
    72|     ]
    73| ):
    74|     graphql_transport_ws_handler_class = GraphQLTransportWSHandler
    75|     graphql_ws_handler_class = GraphQLWSHandler
    76|     allow_queries_via_get = True
    77|     request_adapter_class = ASGIRequestAdapter  # pyright: ignore
    78|     def __init__(
    79|         self,
    80|         schema: BaseSchema,
    81|         graphiql: Optional[bool] = None,
    82|         graphql_ide: Optional[GraphQL_IDE] = "graphiql",
    83|         allow_queries_via_get: bool = True,
    84|         keep_alive: bool = False,
    85|         keep_alive_interval: float = 1,
    86|         debug: bool = False,
    87|         subscription_protocols: Sequence[str] = (
    88|             GRAPHQL_TRANSPORT_WS_PROTOCOL,
    89|             GRAPHQL_WS_PROTOCOL,
    90|         ),
    91|         connection_init_wait_timeout: timedelta = timedelta(minutes=1),
    92|     ) -> None:
    93|         self.schema = schema
    94|         self.allow_queries_via_get = allow_queries_via_get
    95|         self.keep_alive = keep_alive
    96|         self.keep_alive_interval = keep_alive_interval
    97|         self.debug = debug
    98|         self.protocols = subscription_protocols
    99|         self.connection_init_wait_timeout = connection_init_wait_timeout
   100|         if graphiql is not None:
   101|             warnings.warn(
   102|                 "The `graphiql` argument is deprecated in favor of `graphql_ide`",
   103|                 DeprecationWarning,
   104|                 stacklevel=2,
   105|             )
   106|             self.graphql_ide = "graphiql" if graphiql else None
   107|         else:
   108|             self.graphql_ide = graphql_ide
   109|     async def __call__(self, scope: Scope, receive: Receive, send: Send) -> None:
   110|         if scope["type"] == "http":
   111|             return await self.handle_http(scope, receive, send)
   112|         elif scope["type"] == "websocket":
   113|             ws = WebSocket(scope, receive=receive, send=send)
   114|             preferred_protocol = self.pick_preferred_protocol(ws)
   115|             if preferred_protocol == GRAPHQL_TRANSPORT_WS_PROTOCOL:
   116|                 await self.graphql_transport_ws_handler_class(
   117|                     schema=self.schema,
   118|                     debug=self.debug,
   119|                     connection_init_wait_timeout=self.connection_init_wait_timeout,


# ====================================================================
# FILE: strawberry/channels/handlers/http_handler.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 112-157 ---
   112| class SyncChannelsRequestAdapter(BaseChannelsRequestAdapter, SyncHTTPRequestAdapter):
   113|     @property
   114|     def body(self) -> bytes:
   115|         return self.request.body
   116|     @property
   117|     def post_data(self) -> Mapping[str, Union[str, bytes]]:
   118|         return self.request.form_data["form"]
   119|     @property
   120|     def files(self) -> Mapping[str, Any]:
   121|         return self.request.form_data["files"]
   122| class BaseGraphQLHTTPConsumer(ChannelsConsumer, AsyncHttpConsumer):
   123|     graphql_ide_html: str
   124|     graphql_ide: Optional[GraphQL_IDE] = "graphiql"
   125|     def __init__(
   126|         self,
   127|         schema: BaseSchema,
   128|         graphiql: Optional[bool] = None,
   129|         graphql_ide: Optional[GraphQL_IDE] = "graphiql",
   130|         allow_queries_via_get: bool = True,
   131|         subscriptions_enabled: bool = True,
   132|         **kwargs: Any,
   133|     ) -> None:
   134|         self.schema = schema
   135|         self.allow_queries_via_get = allow_queries_via_get
   136|         self.subscriptions_enabled = subscriptions_enabled
   137|         self._ide_subscriptions_enabled = subscriptions_enabled
   138|         if graphiql is not None:
   139|             warnings.warn(
   140|                 "The `graphiql` argument is deprecated in favor of `graphql_ide`",
   141|                 DeprecationWarning,
   142|                 stacklevel=2,
   143|             )
   144|             self.graphql_ide = "graphiql" if graphiql else None
   145|         else:
   146|             self.graphql_ide = graphql_ide
   147|         super().__init__(**kwargs)
   148|     def create_response(
   149|         self, response_data: GraphQLHTTPResponse, sub_response: TemporalResponse
   150|     ) -> ChannelsResponse:
   151|         return ChannelsResponse(
   152|             content=json.dumps(response_data).encode(),
   153|             status=sub_response.status_code,
   154|             headers={k.encode(): v.encode() for k, v in sub_response.headers.items()},
   155|         )
   156|     async def handle(self, body: bytes) -> None:
   157|         request = ChannelsRequest(consumer=self, body=body)


# ====================================================================
# FILE: strawberry/django/views.py
# Total hunks: 4
# ====================================================================
# --- HUNK 1: Lines 9-50 ---
     9|     Dict,
    10|     Mapping,
    11|     Optional,
    12|     Union,
    13|     cast,
    14| )
    15| from asgiref.sync import markcoroutinefunction
    16| from django.core.serializers.json import DjangoJSONEncoder
    17| from django.http import (
    18|     HttpRequest,
    19|     HttpResponse,
    20|     HttpResponseNotAllowed,
    21|     JsonResponse,
    22|     StreamingHttpResponse,
    23| )
    24| from django.http.response import HttpResponseBase
    25| from django.template import RequestContext, Template
    26| from django.template.exceptions import TemplateDoesNotExist
    27| from django.template.loader import render_to_string
    28| from django.template.response import TemplateResponse
    29| from django.utils.decorators import classonlymethod, method_decorator
    30| from django.views.decorators.csrf import csrf_exempt
    31| from django.views.generic import View
    32| from strawberry.http.async_base_view import AsyncBaseHTTPView, AsyncHTTPRequestAdapter
    33| from strawberry.http.exceptions import HTTPException
    34| from strawberry.http.sync_base_view import SyncBaseHTTPView, SyncHTTPRequestAdapter
    35| from strawberry.http.types import FormData, HTTPMethod, QueryParams
    36| from strawberry.http.typevars import (
    37|     Context,
    38|     RootValue,
    39| )
    40| from .context import StrawberryDjangoContext
    41| if TYPE_CHECKING:
    42|     from strawberry.http import GraphQLHTTPResponse
    43|     from strawberry.http.ides import GraphQL_IDE
    44|     from ..schema import BaseSchema
    45| class TemporalHttpResponse(JsonResponse):
    46|     status_code: Optional[int] = None  # pyright: ignore
    47|     def __init__(self) -> None:
    48|         super().__init__({})
    49|     def __repr__(self) -> str:
    50|         """Adopted from Django to handle `status_code=None`."""

# --- HUNK 2: Lines 96-140 ---
    96|     @property
    97|     def content_type(self) -> Optional[str]:
    98|         return self.headers.get("Content-type")
    99|     async def get_body(self) -> str:
   100|         return self.request.body.decode()
   101|     async def get_form_data(self) -> FormData:
   102|         return FormData(
   103|             files=self.request.FILES,
   104|             form=self.request.POST,
   105|         )
   106| class BaseView:
   107|     _ide_replace_variables = False
   108|     graphql_ide_html: str
   109|     def __init__(
   110|         self,
   111|         schema: BaseSchema,
   112|         graphiql: Optional[str] = None,
   113|         graphql_ide: Optional[GraphQL_IDE] = "graphiql",
   114|         allow_queries_via_get: bool = True,
   115|         subscriptions_enabled: bool = False,
   116|         **kwargs: Any,
   117|     ) -> None:
   118|         self.schema = schema
   119|         self.allow_queries_via_get = allow_queries_via_get
   120|         self.subscriptions_enabled = subscriptions_enabled
   121|         if graphiql is not None:
   122|             warnings.warn(
   123|                 "The `graphiql` argument is deprecated in favor of `graphql_ide`",
   124|                 DeprecationWarning,
   125|                 stacklevel=2,
   126|             )
   127|             self.graphql_ide = "graphiql" if graphiql else None
   128|         else:
   129|             self.graphql_ide = graphql_ide
   130|         super().__init__(**kwargs)
   131|     def create_response(
   132|         self, response_data: GraphQLHTTPResponse, sub_response: HttpResponse
   133|     ) -> HttpResponseBase:
   134|         data = self.encode_json(response_data)
   135|         response = HttpResponse(
   136|             data,
   137|             content_type="application/json",
   138|         )
   139|         for name, value in sub_response.items():
   140|             response[name] = value

# --- HUNK 3: Lines 162-202 ---
   162|         return json.dumps(response_data, cls=DjangoJSONEncoder)
   163| class GraphQLView(
   164|     BaseView,
   165|     SyncBaseHTTPView[
   166|         HttpRequest, HttpResponseBase, TemporalHttpResponse, Context, RootValue
   167|     ],
   168|     View,
   169| ):
   170|     subscriptions_enabled = False
   171|     graphiql: Optional[bool] = None
   172|     graphql_ide: Optional[GraphQL_IDE] = "graphiql"
   173|     allow_queries_via_get = True
   174|     schema: BaseSchema = None  # type: ignore
   175|     request_adapter_class = DjangoHTTPRequestAdapter
   176|     def get_root_value(self, request: HttpRequest) -> Optional[RootValue]:
   177|         return None
   178|     def get_context(self, request: HttpRequest, response: HttpResponse) -> Any:
   179|         return StrawberryDjangoContext(request=request, response=response)
   180|     def get_sub_response(self, request: HttpRequest) -> TemporalHttpResponse:
   181|         return TemporalHttpResponse()
   182|     @method_decorator(csrf_exempt)
   183|     def dispatch(
   184|         self, request: HttpRequest, *args: Any, **kwargs: Any
   185|     ) -> Union[HttpResponseNotAllowed, TemplateResponse, HttpResponseBase]:
   186|         try:
   187|             return self.run(request=request)
   188|         except HTTPException as e:
   189|             return HttpResponse(
   190|                 content=e.reason,
   191|                 status=e.status_code,
   192|             )
   193|     def render_graphql_ide(self, request: HttpRequest) -> HttpResponse:
   194|         try:
   195|             template = Template(render_to_string("graphql/graphiql.html"))
   196|         except TemplateDoesNotExist:
   197|             template = Template(self.graphql_ide_html)
   198|         context = {"SUBSCRIPTION_ENABLED": json.dumps(self.subscriptions_enabled)}
   199|         response = TemplateResponse(request=request, template=None, context=context)
   200|         response.content = template.render(RequestContext(request, context))
   201|         return response
   202| class AsyncGraphQLView(

# --- HUNK 4: Lines 206-246 ---
   206|     ],
   207|     View,
   208| ):
   209|     subscriptions_enabled = False
   210|     graphiql: Optional[bool] = None
   211|     graphql_ide: Optional[GraphQL_IDE] = "graphiql"
   212|     allow_queries_via_get = True
   213|     schema: BaseSchema = None  # type: ignore
   214|     request_adapter_class = AsyncDjangoHTTPRequestAdapter
   215|     @classonlymethod  # pyright: ignore[reportIncompatibleMethodOverride]
   216|     def as_view(cls, **initkwargs: Any) -> Callable[..., HttpResponse]:
   217|         view = super().as_view(**initkwargs)
   218|         markcoroutinefunction(view)
   219|         return view
   220|     async def get_root_value(self, request: HttpRequest) -> Any:
   221|         return None
   222|     async def get_context(self, request: HttpRequest, response: HttpResponse) -> Any:
   223|         return StrawberryDjangoContext(request=request, response=response)
   224|     async def get_sub_response(self, request: HttpRequest) -> TemporalHttpResponse:
   225|         return TemporalHttpResponse()
   226|     @method_decorator(csrf_exempt)
   227|     async def dispatch(  # pyright: ignore
   228|         self, request: HttpRequest, *args: Any, **kwargs: Any
   229|     ) -> Union[HttpResponseNotAllowed, TemplateResponse, HttpResponseBase]:
   230|         try:
   231|             return await self.run(request=request)
   232|         except HTTPException as e:
   233|             return HttpResponse(
   234|                 content=e.reason,
   235|                 status=e.status_code,
   236|             )
   237|     async def render_graphql_ide(self, request: HttpRequest) -> HttpResponse:
   238|         try:
   239|             template = Template(render_to_string("graphql/graphiql.html"))
   240|         except TemplateDoesNotExist:
   241|             template = Template(self.graphql_ide_html)
   242|         context = {"SUBSCRIPTION_ENABLED": json.dumps(self.subscriptions_enabled)}
   243|         response = TemplateResponse(request=request, template=None, context=context)
   244|         response.content = template.render(RequestContext(request, context))
   245|         return response
   246| __all__ = ["GraphQLView", "AsyncGraphQLView"]


# ====================================================================
# FILE: strawberry/fastapi/router.py
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 121-193 ---
   121|         connection_init_wait_timeout: timedelta = timedelta(minutes=1),
   122|         prefix: str = "",
   123|         tags: Optional[List[Union[str, Enum]]] = None,
   124|         dependencies: Optional[Sequence[params.Depends]] = None,
   125|         default_response_class: Type[Response] = Default(JSONResponse),
   126|         responses: Optional[Dict[Union[int, str], Dict[str, Any]]] = None,
   127|         callbacks: Optional[List[BaseRoute]] = None,
   128|         routes: Optional[List[BaseRoute]] = None,
   129|         redirect_slashes: bool = True,
   130|         default: Optional[ASGIApp] = None,
   131|         dependency_overrides_provider: Optional[Any] = None,
   132|         route_class: Type[APIRoute] = APIRoute,
   133|         on_startup: Optional[Sequence[Callable[[], Any]]] = None,
   134|         on_shutdown: Optional[Sequence[Callable[[], Any]]] = None,
   135|         lifespan: Optional[Lifespan[Any]] = None,
   136|         deprecated: Optional[bool] = None,
   137|         include_in_schema: bool = True,
   138|         generate_unique_id_function: Callable[[APIRoute], str] = Default(
   139|             generate_unique_id
   140|         ),
   141|         **kwargs: Any,
   142|     ) -> None:
   143|         super().__init__(
   144|             prefix=prefix,
   145|             tags=tags,
   146|             dependencies=dependencies,
   147|             default_response_class=default_response_class,
   148|             responses=responses,
   149|             callbacks=callbacks,
   150|             routes=routes,
   151|             redirect_slashes=redirect_slashes,
   152|             default=default,
   153|             dependency_overrides_provider=dependency_overrides_provider,
   154|             route_class=route_class,
   155|             on_startup=on_startup,
   156|             on_shutdown=on_shutdown,
   157|             lifespan=lifespan,
   158|             deprecated=deprecated,
   159|             include_in_schema=include_in_schema,
   160|             generate_unique_id_function=generate_unique_id_function,
   161|             **kwargs,
   162|         )
   163|         self.schema = schema
   164|         self.allow_queries_via_get = allow_queries_via_get
   165|         self.keep_alive = keep_alive
   166|         self.keep_alive_interval = keep_alive_interval
   167|         self.debug = debug
   168|         self.root_value_getter = root_value_getter or self.__get_root_value
   169|         self.context_getter = self.__get_context_getter(
   170|             context_getter or (lambda: None)  # type: ignore
   171|         )
   172|         self.protocols = subscription_protocols
   173|         self.connection_init_wait_timeout = connection_init_wait_timeout
   174|         if graphiql is not None:
   175|             warnings.warn(
   176|                 "The `graphiql` argument is deprecated in favor of `graphql_ide`",
   177|                 DeprecationWarning,
   178|                 stacklevel=2,
   179|             )
   180|             self.graphql_ide = "graphiql" if graphiql else None
   181|         else:
   182|             self.graphql_ide = graphql_ide
   183|         @self.get(
   184|             path,
   185|             responses={
   186|                 200: {
   187|                     "description": "The GraphiQL integrated development environment.",
   188|                 },
   189|                 404: {
   190|                     "description": (
   191|                         "Not found if GraphiQL or query via GET are not enabled."
   192|                     )
   193|                 },


# ====================================================================
# FILE: strawberry/flask/views.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 39-82 ---
    39|     def headers(self) -> Mapping[str, str]:
    40|         return self.request.headers
    41|     @property
    42|     def post_data(self) -> Mapping[str, Union[str, bytes]]:
    43|         return self.request.form
    44|     @property
    45|     def files(self) -> Mapping[str, Any]:
    46|         return self.request.files
    47|     @property
    48|     def content_type(self) -> Optional[str]:
    49|         return self.request.content_type
    50| class BaseGraphQLView:
    51|     _ide_subscription_enabled = False
    52|     graphql_ide: Optional[GraphQL_IDE]
    53|     def __init__(
    54|         self,
    55|         schema: BaseSchema,
    56|         graphiql: Optional[bool] = None,
    57|         graphql_ide: Optional[GraphQL_IDE] = "graphiql",
    58|         allow_queries_via_get: bool = True,
    59|     ) -> None:
    60|         self.schema = schema
    61|         self.graphiql = graphiql
    62|         self.allow_queries_via_get = allow_queries_via_get
    63|         if graphiql is not None:
    64|             warnings.warn(
    65|                 "The `graphiql` argument is deprecated in favor of `graphql_ide`",
    66|                 DeprecationWarning,
    67|                 stacklevel=2,
    68|             )
    69|             self.graphql_ide = "graphiql" if graphiql else None
    70|         else:
    71|             self.graphql_ide = graphql_ide
    72|     def create_response(
    73|         self, response_data: GraphQLHTTPResponse, sub_response: Response
    74|     ) -> Response:
    75|         sub_response.set_data(self.encode_json(response_data))  # type: ignore
    76|         return sub_response
    77| class GraphQLView(
    78|     BaseGraphQLView,
    79|     SyncBaseHTTPView[Request, Response, Response, Context, RootValue],
    80|     View,
    81| ):
    82|     methods = ["GET", "POST"]


# ====================================================================
# FILE: strawberry/http/async_base_view.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 248-282 ---
   248|         return self._stream_with_heartbeat(stream)
   249|     async def parse_multipart_subscriptions(
   250|         self, request: AsyncHTTPRequestAdapter
   251|     ) -> Dict[str, str]:
   252|         if request.method == "GET":
   253|             return self.parse_query_params(request.query_params)
   254|         return self.parse_json(await request.get_body())
   255|     async def parse_http_body(
   256|         self, request: AsyncHTTPRequestAdapter
   257|     ) -> GraphQLRequestData:
   258|         headers = {key.lower(): value for key, value in request.headers.items()}
   259|         content_type, _ = parse_content_type(request.content_type or "")
   260|         accept = headers.get("accept", "")
   261|         protocol: Literal["http", "multipart-subscription"] = "http"
   262|         if self._is_multipart_subscriptions(*parse_content_type(accept)):
   263|             protocol = "multipart-subscription"
   264|         if request.method == "GET":
   265|             data = self.parse_query_params(request.query_params)
   266|         elif "application/json" in content_type:
   267|             data = self.parse_json(await request.get_body())
   268|         elif content_type == "multipart/form-data":
   269|             data = await self.parse_multipart(request)
   270|         else:
   271|             raise HTTPException(400, "Unsupported content type")
   272|         return GraphQLRequestData(
   273|             query=data.get("query"),
   274|             variables=data.get("variables"),
   275|             operation_name=data.get("operationName"),
   276|             protocol=protocol,
   277|         )
   278|     async def process_result(
   279|         self, request: Request, result: ExecutionResult
   280|     ) -> GraphQLHTTPResponse:
   281|         return process_result(result)
   282| __all__ = ["AsyncBaseHTTPView"]


# ====================================================================
# FILE: strawberry/http/base.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-37 ---
     1| import json
     2| from typing import Any, Dict, Generic, List, Mapping, Optional, Union
     3| from typing_extensions import Protocol
     4| from strawberry.http import GraphQLHTTPResponse
     5| from strawberry.http.ides import GraphQL_IDE, get_graphql_ide_html
     6| from strawberry.http.types import HTTPMethod, QueryParams
     7| from .exceptions import HTTPException
     8| from .typevars import Request
     9| class BaseRequestProtocol(Protocol):
    10|     @property
    11|     def query_params(self) -> Mapping[str, Optional[Union[str, List[str]]]]: ...
    12|     @property
    13|     def method(self) -> HTTPMethod: ...
    14|     @property
    15|     def headers(self) -> Mapping[str, str]: ...
    16| class BaseView(Generic[Request]):
    17|     graphql_ide: Optional[GraphQL_IDE]
    18|     _ide_replace_variables: bool = True
    19|     _ide_subscription_enabled: bool = True
    20|     def should_render_graphql_ide(self, request: BaseRequestProtocol) -> bool:
    21|         return (
    22|             request.method == "GET"
    23|             and request.query_params.get("query") is None
    24|             and any(
    25|                 supported_header in request.headers.get("accept", "")
    26|                 for supported_header in ("text/html", "*/*")
    27|             )
    28|         )
    29|     def is_request_allowed(self, request: BaseRequestProtocol) -> bool:
    30|         return request.method in ("GET", "POST")
    31|     def parse_json(self, data: Union[str, bytes]) -> Any:
    32|         try:
    33|             return json.loads(data)
    34|         except json.JSONDecodeError as e:
    35|             raise HTTPException(400, "Unable to parse request body as JSON") from e
    36|     def encode_json(self, response_data: GraphQLHTTPResponse) -> str:
    37|         return json.dumps(response_data)


# ====================================================================
# FILE: strawberry/http/sync_base_view.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 93-133 ---
    93|             request_data.query,
    94|             root_value=root_value,
    95|             variable_values=request_data.variables,
    96|             context_value=context,
    97|             operation_name=request_data.operation_name,
    98|             allowed_operation_types=allowed_operation_types,
    99|         )
   100|     def parse_multipart(self, request: SyncHTTPRequestAdapter) -> Dict[str, str]:
   101|         operations = self.parse_json(request.post_data.get("operations", "{}"))
   102|         files_map = self.parse_json(request.post_data.get("map", "{}"))
   103|         try:
   104|             return replace_placeholders_with_files(operations, files_map, request.files)
   105|         except KeyError as e:
   106|             raise HTTPException(400, "File(s) missing in form data") from e
   107|     def parse_http_body(self, request: SyncHTTPRequestAdapter) -> GraphQLRequestData:
   108|         content_type, params = parse_content_type(request.content_type or "")
   109|         if request.method == "GET":
   110|             data = self.parse_query_params(request.query_params)
   111|         elif "application/json" in content_type:
   112|             data = self.parse_json(request.body)
   113|         elif content_type == "multipart/form-data":
   114|             data = self.parse_multipart(request)
   115|         elif self._is_multipart_subscriptions(content_type, params):
   116|             raise HTTPException(
   117|                 400, "Multipart subcriptions are not supported in sync mode"
   118|             )
   119|         else:
   120|             raise HTTPException(400, "Unsupported content type")
   121|         return GraphQLRequestData(
   122|             query=data.get("query"),
   123|             variables=data.get("variables"),
   124|             operation_name=data.get("operationName"),
   125|         )
   126|     def _handle_errors(
   127|         self, errors: List[GraphQLError], response_data: GraphQLHTTPResponse
   128|     ) -> None:
   129|         """Hook to allow custom handling of errors, used by the Sentry Integration."""
   130|     def run(
   131|         self,
   132|         request: Request,
   133|         context: Optional[Context] = UNSET,


# ====================================================================
# FILE: strawberry/quart/views.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 30-72 ---
    30|     async def get_body(self) -> str:
    31|         return (await self.request.data).decode()
    32|     async def get_form_data(self) -> FormData:
    33|         files = await self.request.files
    34|         form = await self.request.form
    35|         return FormData(files=files, form=form)
    36| class GraphQLView(
    37|     AsyncBaseHTTPView[Request, Response, Response, Context, RootValue],
    38|     View,
    39| ):
    40|     _ide_subscription_enabled = False
    41|     methods = ["GET", "POST"]
    42|     allow_queries_via_get: bool = True
    43|     request_adapter_class = QuartHTTPRequestAdapter
    44|     def __init__(
    45|         self,
    46|         schema: "BaseSchema",
    47|         graphiql: Optional[bool] = None,
    48|         graphql_ide: Optional[GraphQL_IDE] = "graphiql",
    49|         allow_queries_via_get: bool = True,
    50|     ) -> None:
    51|         self.schema = schema
    52|         self.allow_queries_via_get = allow_queries_via_get
    53|         if graphiql is not None:
    54|             warnings.warn(
    55|                 "The `graphiql` argument is deprecated in favor of `graphql_ide`",
    56|                 DeprecationWarning,
    57|                 stacklevel=2,
    58|             )
    59|             self.graphql_ide = "graphiql" if graphiql else None
    60|         else:
    61|             self.graphql_ide = graphql_ide
    62|     async def render_graphql_ide(self, request: Request) -> Response:
    63|         return Response(self.graphql_ide_html)
    64|     def create_response(
    65|         self, response_data: "GraphQLHTTPResponse", sub_response: Response
    66|     ) -> Response:
    67|         sub_response.set_data(self.encode_json(response_data))
    68|         return sub_response
    69|     async def get_context(self, request: Request, response: Response) -> Context:
    70|         return {"request": request, "response": response}  # type: ignore
    71|     async def get_root_value(self, request: Request) -> Optional[RootValue]:
    72|         return None


# ====================================================================
# FILE: strawberry/sanic/views.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 60-104 ---
    60|         graphiql: bool, default is True
    61|         allow_queries_via_get: bool, default is True
    62|     Returns:
    63|         None
    64|     Example:
    65|         app.add_route(
    66|             GraphQLView.as_view(schema=schema, graphiql=True),
    67|             "/graphql"
    68|         )
    69|     """
    70|     allow_queries_via_get = True
    71|     request_adapter_class = SanicHTTPRequestAdapter
    72|     def __init__(
    73|         self,
    74|         schema: BaseSchema,
    75|         graphiql: Optional[bool] = None,
    76|         graphql_ide: Optional[GraphQL_IDE] = "graphiql",
    77|         allow_queries_via_get: bool = True,
    78|         json_encoder: Optional[Type[json.JSONEncoder]] = None,
    79|         json_dumps_params: Optional[Dict[str, Any]] = None,
    80|     ) -> None:
    81|         self.schema = schema
    82|         self.allow_queries_via_get = allow_queries_via_get
    83|         self.json_encoder = json_encoder
    84|         self.json_dumps_params = json_dumps_params
    85|         if self.json_encoder is not None:  # pragma: no cover
    86|             warnings.warn(
    87|                 "json_encoder is deprecated, override encode_json instead",
    88|                 DeprecationWarning,
    89|                 stacklevel=2,
    90|             )
    91|         if self.json_dumps_params is not None:  # pragma: no cover
    92|             warnings.warn(
    93|                 "json_dumps_params is deprecated, override encode_json instead",
    94|                 DeprecationWarning,
    95|                 stacklevel=2,
    96|             )
    97|             self.json_encoder = json.JSONEncoder
    98|         if graphiql is not None:
    99|             warnings.warn(
   100|                 "The `graphiql` argument is deprecated in favor of `graphql_ide`",
   101|                 DeprecationWarning,
   102|                 stacklevel=2,
   103|             )
   104|             self.graphql_ide = "graphiql" if graphiql else None

