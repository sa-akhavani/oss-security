# ====================================================================
# FILE: panpun.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| PANPUN = '1.3.1'


# ====================================================================
# FILE: setup.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-27 ---
     1| from distutils.core import setup
     2| from panpun import PANPUN
     3| setup(
     4|     name='TuiTse-TsuSin',
     5|     description='對齊資訊',
     6|     long_description='共兩句漢羅對--起-來，掠出字數落勾ê位a̍h-sī無合教典ê用字',
     7|     packages=['tuitse'],
     8|     version=PANPUN,
     9|     author='Tshuà Bûn-lī',
    10|     author_email='ithuan@ithuan.tw',
    11|     url='https://ithuan.tw/',
    12|     download_url='https://github.com/i3thuan5/TuiTse-TsuSin',
    13|     keywords=[
    14|         'Parser', 'Alignment', 'Taigi', 'Hanji', 'Lomaji', 
    15|     ],
    16|     classifiers=[
    17|         'Development Status :: 5 - Production/Stable',
    18|         'Operating System :: Unix',
    19|         'Programming Language :: Python :: 3.8',
    20|         'Programming Language :: Python :: 3.9',
    21|         'Topic :: Text Processing',
    22|         'Topic :: Text Processing :: Linguistic',
    23|     ],
    24|     install_requires=[
    25|         'kau3-tian2-iong7-ji7>=2.1.0',
    26|     ],
    27| )


# ====================================================================
# FILE: tuitse/boolean.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-6 ---
     1| def tuitse_boolean(kiamtsa_tinliat):
     2|     for tsua in kiamtsa_tinliat:
     3|         if not tsua[-1]:
     4|             return False
     5|     else:
     6|         return True


# ====================================================================
# FILE: tuitse/html.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-51 ---
     1| from django.utils.html import format_html
     2| from tuitse import THAU_JI, LIAN_JI, KHIN_SIANN_JI
     3| from kesi.butkian.kongiong import 敢是拼音字元
     4| def tuitse_html(kiamtsa_tinliat):
     5|     html = ''
     6|     htmlsu = ''
     7|     kam_ting_tsit_hing_si_lomaji = False
     8|     kam_ting_tsit_im_si_lomaji = False
     9|     for ji in kiamtsa_tinliat:
    10|         kam_hing_si_lomaji = 敢是拼音字元(ji[0][-1:])
    11|         if kam_hing_si_lomaji and kam_ting_tsit_hing_si_lomaji:
    12|             kam_hing_ai_lian = True
    13|         else:
    14|             kam_hing_ai_lian = False
    15|         kam_ting_tsit_hing_si_lomaji = kam_hing_si_lomaji
    16|         kam_im_si_lomaji = 敢是拼音字元(ji[1][-1:])
    17|         if kam_im_si_lomaji and kam_ting_tsit_im_si_lomaji:
    18|             kam_im_ai_lian = True
    19|         else:
    20|             kam_im_ai_lian = False
    21|         kam_ting_tsit_im_si_lomaji = kam_im_si_lomaji
    22|         if ji[2] == THAU_JI:
    23|             if htmlsu:
    24|                 html += "<ruby>{}</ruby>".format(htmlsu)
    25|             htmlsu = _sng_ji_html(ji)
    26|             continue
    27|         if ji[2] == LIAN_JI:
    28|             tiauhu = '-'
    29|         elif ji[2] == KHIN_SIANN_JI:
    30|             tiauhu = '--'
    31|         else:
    32|             raise RuntimeError('一定愛設定頭字、連字、a̍h-sī輕聲')
    33|         if kam_im_ai_lian:
    34|             htmlsu += "<rb>{}</rb>".format(tiauhu)
    35|         else:
    36|             htmlsu += "<rb>&nbsp;</rb>"
    37|         if kam_hing_ai_lian:
    38|             htmlsu += "<rt>{}</rt>".format(tiauhu)
    39|         else:
    40|             htmlsu += "<rt></rt>"
    41|         htmlsu += _sng_ji_html(ji)
    42|     html += "<ruby>{}</ruby>".format(htmlsu)
    43|     return format_html(html)
    44| def _sng_ji_html(ji):
    45|     if ji[3]:
    46|         return "<rb>{}</rb><rt>{}</rt>".format(ji[1], ji[0])
    47|     if ji[1]:
    48|         return "<rb class='fail'>{}</rb><rt class='fail'>{}</rt>".format(
    49|             ji[1], ji[0])
    50|     return "<rb class='fail'>&nbsp;&nbsp;</rb><rt class='fail'>{}</rt>".format(
    51|         ji[0])

