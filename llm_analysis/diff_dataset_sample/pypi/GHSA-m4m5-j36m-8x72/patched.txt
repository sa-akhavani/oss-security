# ====================================================================
# FILE: panpun.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| PANPUN = '1.3.2'


# ====================================================================
# FILE: setup.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-28 ---
     1| from distutils.core import setup
     2| from panpun import PANPUN
     3| setup(
     4|     name='TuiTse-TsuSin',
     5|     description='對齊資訊',
     6|     long_description='共兩句漢羅對--起-來，掠出字數落勾ê位a̍h-sī無合教典ê用字',
     7|     packages=['tuitse'],
     8|     version=PANPUN,
     9|     author='Tshuà Bûn-lī',
    10|     author_email='ithuan@ithuan.tw',
    11|     url='https://ithuan.tw/',
    12|     download_url='https://github.com/i3thuan5/TuiTse-TsuSin',
    13|     keywords=[
    14|         'Parser', 'Alignment', 'Taigi', 'Hanji', 'Lomaji',
    15|     ],
    16|     classifiers=[
    17|         'Development Status :: 5 - Production/Stable',
    18|         'Operating System :: Unix',
    19|         'Programming Language :: Python :: 3.8',
    20|         'Programming Language :: Python :: 3.9',
    21|         'Topic :: Text Processing',
    22|         'Topic :: Text Processing :: Linguistic',
    23|     ],
    24|     install_requires=[
    25|         'kau3-tian2-iong7-ji7>=2.1.0,<4.0.0',
    26|         'tai5-uan5_gian5-gi2_kang1-ku7>=1.1.0,<2.0.0',
    27|     ],
    28| )


# ====================================================================
# FILE: tuitse/boolean.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-5 ---
     1| def tuitse_boolean(kiamtsa_tinliat):
     2|     for tsua in kiamtsa_tinliat:
     3|         if not tsua[-1]:
     4|             return False
     5|     return True


# ====================================================================
# FILE: tuitse/html.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-61 ---
     1| from django.utils.html import format_html
     2| from tuitse import THAU_JI, LIAN_JI, KHIN_SIANN_JI
     3| from kesi.butkian.kongiong import 敢是拼音字元
     4| def tuitse_html(kiamtsa_tinliat):
     5|     html = ''
     6|     tshamsoo = []
     7|     su_html = ''
     8|     su_tshamsoo = []
     9|     ting_tsit_hanlo_kam_si_lomaji = False
    10|     ting_tsit_lomaji_kam_si_lomaji = False
    11|     for ji in kiamtsa_tinliat:
    12|         hanlo_kam_si_lomaji = 敢是拼音字元(ji[0][-1:])
    13|         if hanlo_kam_si_lomaji and ting_tsit_hanlo_kam_si_lomaji:
    14|             hanlo_kam_ai_lian = True
    15|         else:
    16|             hanlo_kam_ai_lian = False
    17|         ting_tsit_hanlo_kam_si_lomaji = hanlo_kam_si_lomaji
    18|         lomaji_kam_si_lomaji = 敢是拼音字元(ji[1][-1:])
    19|         if lomaji_kam_si_lomaji and ting_tsit_lomaji_kam_si_lomaji:
    20|             lomaji_kam_ai_lian = True
    21|         else:
    22|             lomaji_kam_ai_lian = False
    23|         ting_tsit_lomaji_kam_si_lomaji = lomaji_kam_si_lomaji
    24|         if ji[2] == THAU_JI:
    25|             if su_html:
    26|                 html += "<ruby>{}</ruby>".format(su_html)
    27|                 tshamsoo += su_tshamsoo
    28|             su_html, su_tshamsoo = _sng_ji_html(ji)
    29|             continue
    30|         if ji[2] == LIAN_JI:
    31|             tiauhu = '-'
    32|         elif ji[2] == KHIN_SIANN_JI:
    33|             tiauhu = '--'
    34|         else:
    35|             raise RuntimeError('一定愛設定頭字、連字、a̍h-sī輕聲')
    36|         if lomaji_kam_ai_lian:
    37|             su_html += "<rb>{}</rb>"
    38|             su_tshamsoo.append(tiauhu)
    39|         else:
    40|             su_html += "<rb>&nbsp;</rb>"
    41|         if hanlo_kam_ai_lian:
    42|             su_html += "<rt>{}</rt>"
    43|             su_tshamsoo.append(tiauhu)
    44|         else:
    45|             su_html += "<rt></rt>"
    46|         sng_html, sng_tshamsoo = _sng_ji_html(ji)
    47|         su_html += sng_html
    48|         su_tshamsoo += sng_tshamsoo
    49|     html += "<ruby>{}</ruby>".format(su_html)
    50|     tshamsoo += su_tshamsoo
    51|     return format_html(html, *tshamsoo)
    52| def _sng_ji_html(ji):
    53|     if ji[3]:
    54|         return "<rb>{}</rb><rt>{}</rt>", [ji[1], ji[0]]
    55|     if ji[1]:
    56|         return "<rb class='fail'>{}</rb><rt class='fail'>{}</rt>", [
    57|             ji[1], ji[0]
    58|         ]
    59|     return "<rb class='fail'>&nbsp;&nbsp;</rb><rt class='fail'>{}</rt>", [
    60|         ji[0]
    61|     ]

