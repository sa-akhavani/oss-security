# ====================================================================
# FILE: src/pretalx/__init__.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| __version__ = "2.3.1"


# ====================================================================
# FILE: src/pretalx/agenda/management/commands/export_schedule_html.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 66-116 ---
    66|     yield from schedule_version_urls(event)
    67|     yield event.urls.featured
    68|     yield event.urls.talks
    69|     yield from event_talk_urls(event)
    70|     yield event.urls.speakers
    71|     yield from event_speaker_urls(event)
    72|     yield from event_exporter_urls(event)
    73|     yield event.urls.changelog
    74|     yield event.urls.feed
    75| def get_path(url):
    76|     return urllib.parse.urlparse(url).path
    77| def get_content(response):
    78|     return (
    79|         b"".join(response.streaming_content) if response.streaming else response.content
    80|     )
    81| def dump_content(destination, path, getter):
    82|     logging.debug(path)
    83|     content = getter(path)
    84|     if path.endswith("/"):
    85|         path = path + "index.html"
    86|     path = Path(destination) / path.lstrip("/")
    87|     path.parent.mkdir(parents=True, exist_ok=True)
    88|     with open(path, "wb") as f:
    89|         f.write(content)
    90|     return content
    91| def get_mediastatic_content(url):
    92|     if url.startswith(settings.STATIC_URL):
    93|         local_path = settings.STATIC_ROOT / url[len(settings.STATIC_URL) :]
    94|     elif url.startswith(settings.MEDIA_URL):
    95|         local_path = settings.MEDIA_ROOT / url[len(settings.MEDIA_URL) :]
    96|     else:
    97|         raise FileNotFoundError()
    98|     with open(local_path, "rb") as f:
    99|         return f.read()
   100| def export_event(event, destination):
   101|     with override_settings(
   102|         COMPRESS_ENABLED=True, COMPRESS_OFFLINE=True
   103|     ), override_timezone(event.timezone):
   104|         with fake_admin(event) as get:
   105|             logging.info("Collecting URLs for export")
   106|             urls = [*event_urls(event)]
   107|             assets = set()
   108|             logging.info(f"Exporting {len(urls)} pages")
   109|             for url in map(get_path, urls):
   110|                 content = dump_content(destination, url, get)
   111|                 assets |= set(map(get_path, find_assets(content)))
   112|             css_assets = set()
   113|             logging.info(f"Exporting {len(assets)} static files from HTML links")
   114|             for url in assets:
   115|                 content = dump_content(destination, url, get)
   116|                 if url.endswith(".css"):

