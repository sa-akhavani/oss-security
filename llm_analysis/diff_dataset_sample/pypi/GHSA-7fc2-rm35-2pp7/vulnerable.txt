# ====================================================================
# FILE: IPython/core/release.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-25 ---
     1| """Release data for the IPython project."""
     2| name = 'ipython'
     3| _version_major = 3
     4| _version_minor = 2
     5| _version_patch = 2
     6| _version_extra = ''  # Uncomment this for full releases
     7| codename = ''
     8| _ver = [_version_major, _version_minor, _version_patch]
     9| __version__ = '.'.join(map(str, _ver))
    10| if _version_extra:
    11|     __version__ = __version__ + '-' + _version_extra
    12| version = __version__  # backwards compatibility name
    13| version_info = (_version_major, _version_minor, _version_patch, _version_extra)
    14| kernel_protocol_version_info = (5, 0)
    15| kernel_protocol_version = "%i.%i" % kernel_protocol_version_info
    16| description = "IPython: Productive Interactive Computing"
    17| long_description = \
    18| """
    19| IPython provides a rich toolkit to help you make the most out of using Python
    20| interactively.  Its main components are:
    21| * Powerful interactive Python shells (terminal- and Qt-based).
    22| * A web-based interactive notebook environment with all shell features plus
    23|   support for embedded figures, animations and rich media.
    24| * Support for interactive data visualization and use of GUI toolkits.
    25| * Flexible, embeddable interpreters to load into your own projects.


# ====================================================================
# FILE: IPython/html/static/base/js/namespace.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-7 ---
     1| var IPython = IPython || {};
     2| define([], function(){
     3|     "use strict";
     4|     IPython.version = "3.2.2";
     5|     IPython._target = '_blank';
     6|     return IPython;
     7| });


# ====================================================================
# FILE: IPython/utils/io.py
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-25 ---
     1| """
     2| IO related utilities.
     3| """
     4| from __future__ import print_function
     5| from __future__ import absolute_import
     6| import codecs
     7| from contextlib import contextmanager
     8| import io
     9| import os
    10| import shutil
    11| import stat
    12| import sys
    13| import tempfile
    14| from .capture import CapturedIO, capture_output
    15| from .py3compat import string_types, input, PY3
    16| class IOStream:
    17|     def __init__(self,stream, fallback=None):
    18|         if not hasattr(stream,'write') or not hasattr(stream,'flush'):
    19|             if fallback is not None:
    20|                 stream = fallback
    21|             else:
    22|                 raise ValueError("fallback required, but not specified")
    23|         self.stream = stream
    24|         self._swrite = stream.write
    25|         def clone(meth):

# --- HUNK 2: Lines 33-72 ---
    33|     def write(self,data):
    34|         try:
    35|             self._swrite(data)
    36|         except:
    37|             try:
    38|                 print(data, end='', file=self.stream)
    39|             except:
    40|                 print('ERROR - failed to write data to stream:', self.stream,
    41|                       file=sys.stderr)
    42|     def writelines(self, lines):
    43|         if isinstance(lines, string_types):
    44|             lines = [lines]
    45|         for line in lines:
    46|             self.write(line)
    47|     @property
    48|     def closed(self):
    49|         return self.stream.closed
    50|     def close(self):
    51|         pass
    52| devnull = open(os.devnull, 'w') 
    53| stdin = IOStream(sys.stdin, fallback=devnull)
    54| stdout = IOStream(sys.stdout, fallback=devnull)
    55| stderr = IOStream(sys.stderr, fallback=devnull)
    56| class IOTerm:
    57|     """ Term holds the file or file-like objects for handling I/O operations.
    58|     These are normally just sys.stdin, sys.stdout and sys.stderr but for
    59|     Windows they can can replaced to allow editing the strings before they are
    60|     displayed."""
    61|     def __init__(self, stdin=None, stdout=None, stderr=None):
    62|         mymodule = sys.modules[__name__]
    63|         self.stdin  = IOStream(stdin, mymodule.stdin)
    64|         self.stdout = IOStream(stdout, mymodule.stdout)
    65|         self.stderr = IOStream(stderr, mymodule.stderr)
    66| class Tee(object):
    67|     """A class to duplicate an output stream to stdout/err.
    68|     This works in a manner very similar to the Unix 'tee' command.
    69|     When the object is closed or deleted, it closes the original file given to
    70|     it for duplication.
    71|     """
    72|     def __init__(self, file_or_name, mode="w", channel='stdout'):


# ====================================================================
# FILE: IPython/utils/text.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 348-390 ---
   348|         v = eval(name, kwargs)
   349|         return v, name
   350| @skip_doctest_py3
   351| class FullEvalFormatter(Formatter):
   352|     """A String Formatter that allows evaluation of simple expressions.
   353|     Any time a format key is not found in the kwargs,
   354|     it will be tried as an expression in the kwargs namespace.
   355|     Note that this version allows slicing using [1:2], so you cannot specify
   356|     a format string. Use :class:`EvalFormatter` to permit format strings.
   357|     Examples
   358|     --------
   359|     ::
   360|         In [1]: f = FullEvalFormatter()
   361|         In [2]: f.format('{n//4}', n=8)
   362|         Out[2]: u'2'
   363|         In [3]: f.format('{list(range(5))[2:4]}')
   364|         Out[3]: u'[2, 3]'
   365|         In [4]: f.format('{3*2}')
   366|         Out[4]: u'6'
   367|     """
   368|     def _vformat(self, format_string, args, kwargs, used_args, recursion_depth):
   369|         if recursion_depth < 0:
   370|             raise ValueError('Max string recursion exceeded')
   371|         result = []
   372|         for literal_text, field_name, format_spec, conversion in \
   373|                 self.parse(format_string):
   374|             if literal_text:
   375|                 result.append(literal_text)
   376|             if field_name is not None:
   377|                 if format_spec:
   378|                     field_name = ':'.join([field_name, format_spec])
   379|                 obj = eval(field_name, kwargs)
   380|                 obj = self.convert_field(obj, conversion)
   381|                 result.append(self.format_field(obj, ''))
   382|         return u''.join(py3compat.cast_unicode(s) for s in result)
   383| @skip_doctest_py3
   384| class DollarFormatter(FullEvalFormatter):
   385|     """Formatter allowing Itpl style $foo replacement, for names and attribute
   386|     access only. Standard {foo} replacement also works, and allows full
   387|     evaluation of its arguments.
   388|     Examples
   389|     --------
   390|     ::


# ====================================================================
# FILE: docs/gh-pages.py
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-86 ---
     1| """Script to commit the doc build outputs into the github-pages repo.
     2| Use:
     3|   gh-pages.py [tag]
     4| If no tag is given, the current output of 'git describe' is used.  If given,
     5| that is how the resulting directory will be named.
     6| In practice, you should use either actual clean tags from a current build or
     7| something like 'current' as a stable URL for the most current version of the """
     8| from __future__ import print_function
     9| import os
    10| import shutil
    11| import sys
    12| from os import chdir as cd
    13| from os.path import join as pjoin
    14| from subprocess import Popen, PIPE, CalledProcessError, check_call
    15| pages_dir = 'gh-pages'
    16| html_dir = 'build/html'
    17| pdf_dir = 'build/latex'
    18| pages_repo = 'git@github.com:ipython/ipython-doc.git'
    19| def sh(cmd):
    20|     """Execute command in a subshell, return status code."""
    21|     return check_call(cmd, shell=True)
    22| def sh2(cmd):
    23|     """Execute command in a subshell, return stdout.
    24|     Stderr is unbuffered from the subshell.x"""
    25|     p = Popen(cmd, stdout=PIPE, shell=True)
    26|     out = p.communicate()[0]
    27|     retcode = p.returncode
    28|     if retcode:
    29|         raise CalledProcessError(retcode, cmd)
    30|     else:
    31|         return out.rstrip()
    32| def sh3(cmd):
    33|     """Execute command in a subshell, return stdout, stderr
    34|     If anything appears in stderr, print it out to sys.stderr"""
    35|     p = Popen(cmd, stdout=PIPE, stderr=PIPE, shell=True)
    36|     out, err = p.communicate()
    37|     retcode = p.returncode
    38|     if retcode:
    39|         raise CalledProcessError(retcode, cmd)
    40|     else:
    41|         return out.rstrip(), err.rstrip()
    42| def init_repo(path):
    43|     """clone the gh-pages repo if we haven't already."""
    44|     sh("git clone %s %s"%(pages_repo, path))
    45|     here = os.getcwdu()
    46|     cd(path)
    47|     sh('git checkout gh-pages')
    48|     cd(here)
    49| if __name__ == '__main__':
    50|     try:
    51|         tag = sys.argv[1]
    52|     except IndexError:
    53|         tag = "dev"
    54|     startdir = os.getcwdu()
    55|     if not os.path.exists(pages_dir):
    56|         init_repo(pages_dir)
    57|     else:
    58|         cd(pages_dir)
    59|         sh('git checkout gh-pages')
    60|         sh('git pull')
    61|         cd(startdir)
    62|     dest = pjoin(pages_dir, tag)
    63|     if tag != 'dev':
    64|         pass
    65|     shutil.rmtree(dest, ignore_errors=True)
    66|     shutil.copytree(html_dir, dest)
    67|     if tag != 'dev':
    68|         pass
    69|     try:
    70|         cd(pages_dir)
    71|         branch = sh2('git rev-parse --abbrev-ref HEAD').strip()
    72|         if branch != 'gh-pages':
    73|             e = 'On %r, git branch is %r, MUST be "gh-pages"' % (pages_dir,
    74|                                                                  branch)
    75|             raise RuntimeError(e)
    76|         sh('git add -A %s' % tag)
    77|         sh('git commit -m"Updated doc release: %s"' % tag)
    78|         print()
    79|         print('Most recent 3 commits:')
    80|         sys.stdout.flush()
    81|         sh('git --no-pager log --oneline HEAD~3..')
    82|     finally:
    83|         cd(startdir)
    84|     print()
    85|     print('Now verify the build in: %r' % dest)
    86|     print("If everything looks good, 'git push'")


# ====================================================================
# FILE: docs/source/conf.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 16-55 ---
    16|     'sphinx.ext.intersphinx',
    17|     'IPython.sphinxext.ipython_console_highlighting',
    18|     'IPython.sphinxext.ipython_directive',
    19|     'numpydoc',  # to preprocess docstrings
    20|     'github',  # for easy GitHub links
    21|     'magics',
    22| ]
    23| if ON_RTD:
    24|     extensions.remove('matplotlib.sphinxext.only_directives')
    25|     extensions.remove('matplotlib.sphinxext.mathmpl')
    26|     extensions.remove('matplotlib.sphinxext.plot_directive')
    27|     extensions.remove('IPython.sphinxext.ipython_directive')
    28|     extensions.remove('IPython.sphinxext.ipython_console_highlighting')
    29| templates_path = ['_templates']
    30| source_suffix = '.rst'
    31| if iprelease['_version_extra'] == 'dev':
    32|     rst_prolog = """
    33|     .. note::
    34|         This documentation is for a development version of IPython. There may be
    35|         significant differences from the latest stable release.
    36|     """
    37| master_doc = 'index'
    38| project = 'IPython'
    39| copyright = 'The IPython Development Team'
    40| github_project_url = "https://github.com/ipython/ipython"
    41| numpydoc_show_class_members = False # Otherwise Sphinx emits thousands of warnings
    42| numpydoc_class_members_toctree = False
    43| release = "%s" % iprelease['version']
    44| version = iprelease['version'].split('-', 1)[0]
    45| today_fmt = '%B %d, %Y'
    46| exclude_patterns = ['whatsnew/pr']
    47| pygments_style = 'sphinx'
    48| default_role = 'literal'
    49| html_style = 'default.css'
    50| html_static_path = ['_static']
    51| html_last_updated_fmt = '%b %d, %Y'
    52| html_additional_pages = {
    53|     'interactive/htmlnotebook': 'notebook_redirect.html',
    54|     'interactive/notebook': 'notebook_redirect.html',
    55|     'interactive/nbconvert': 'notebook_redirect.html',

