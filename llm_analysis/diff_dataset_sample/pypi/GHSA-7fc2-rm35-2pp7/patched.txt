# ====================================================================
# FILE: IPython/core/release.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-25 ---
     1| """Release data for the IPython project."""
     2| name = 'ipython'
     3| _version_major = 3
     4| _version_minor = 2
     5| _version_patch = 3
     6| _version_extra = ''  # Uncomment this for full releases
     7| codename = ''
     8| _ver = [_version_major, _version_minor, _version_patch]
     9| __version__ = '.'.join(map(str, _ver))
    10| if _version_extra:
    11|     __version__ = __version__ + '-' + _version_extra
    12| version = __version__  # backwards compatibility name
    13| version_info = (_version_major, _version_minor, _version_patch, _version_extra)
    14| kernel_protocol_version_info = (5, 0)
    15| kernel_protocol_version = "%i.%i" % kernel_protocol_version_info
    16| description = "IPython: Productive Interactive Computing"
    17| long_description = \
    18| """
    19| IPython provides a rich toolkit to help you make the most out of using Python
    20| interactively.  Its main components are:
    21| * Powerful interactive Python shells (terminal- and Qt-based).
    22| * A web-based interactive notebook environment with all shell features plus
    23|   support for embedded figures, animations and rich media.
    24| * Support for interactive data visualization and use of GUI toolkits.
    25| * Flexible, embeddable interpreters to load into your own projects.


# ====================================================================
# FILE: IPython/html/static/base/js/namespace.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-7 ---
     1| var IPython = IPython || {};
     2| define([], function(){
     3|     "use strict";
     4|     IPython.version = "3.2.3";
     5|     IPython._target = '_blank';
     6|     return IPython;
     7| });


# ====================================================================
# FILE: IPython/utils/io.py
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-26 ---
     1| """
     2| IO related utilities.
     3| """
     4| from __future__ import print_function
     5| from __future__ import absolute_import
     6| import atexit
     7| import codecs
     8| from contextlib import contextmanager
     9| import io
    10| import os
    11| import shutil
    12| import stat
    13| import sys
    14| import tempfile
    15| from .capture import CapturedIO, capture_output
    16| from .py3compat import string_types, input, PY3
    17| class IOStream:
    18|     def __init__(self,stream, fallback=None):
    19|         if not hasattr(stream,'write') or not hasattr(stream,'flush'):
    20|             if fallback is not None:
    21|                 stream = fallback
    22|             else:
    23|                 raise ValueError("fallback required, but not specified")
    24|         self.stream = stream
    25|         self._swrite = stream.write
    26|         def clone(meth):

# --- HUNK 2: Lines 34-74 ---
    34|     def write(self,data):
    35|         try:
    36|             self._swrite(data)
    37|         except:
    38|             try:
    39|                 print(data, end='', file=self.stream)
    40|             except:
    41|                 print('ERROR - failed to write data to stream:', self.stream,
    42|                       file=sys.stderr)
    43|     def writelines(self, lines):
    44|         if isinstance(lines, string_types):
    45|             lines = [lines]
    46|         for line in lines:
    47|             self.write(line)
    48|     @property
    49|     def closed(self):
    50|         return self.stream.closed
    51|     def close(self):
    52|         pass
    53| devnull = open(os.devnull, 'w') 
    54| atexit.register(devnull.close)
    55| stdin = IOStream(sys.stdin, fallback=devnull)
    56| stdout = IOStream(sys.stdout, fallback=devnull)
    57| stderr = IOStream(sys.stderr, fallback=devnull)
    58| class IOTerm:
    59|     """ Term holds the file or file-like objects for handling I/O operations.
    60|     These are normally just sys.stdin, sys.stdout and sys.stderr but for
    61|     Windows they can can replaced to allow editing the strings before they are
    62|     displayed."""
    63|     def __init__(self, stdin=None, stdout=None, stderr=None):
    64|         mymodule = sys.modules[__name__]
    65|         self.stdin  = IOStream(stdin, mymodule.stdin)
    66|         self.stdout = IOStream(stdout, mymodule.stdout)
    67|         self.stderr = IOStream(stderr, mymodule.stderr)
    68| class Tee(object):
    69|     """A class to duplicate an output stream to stdout/err.
    70|     This works in a manner very similar to the Unix 'tee' command.
    71|     When the object is closed or deleted, it closes the original file given to
    72|     it for duplication.
    73|     """
    74|     def __init__(self, file_or_name, mode="w", channel='stdout'):


# ====================================================================
# FILE: IPython/utils/text.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 348-388 ---
   348|         v = eval(name, kwargs)
   349|         return v, name
   350| @skip_doctest_py3
   351| class FullEvalFormatter(Formatter):
   352|     """A String Formatter that allows evaluation of simple expressions.
   353|     Any time a format key is not found in the kwargs,
   354|     it will be tried as an expression in the kwargs namespace.
   355|     Note that this version allows slicing using [1:2], so you cannot specify
   356|     a format string. Use :class:`EvalFormatter` to permit format strings.
   357|     Examples
   358|     --------
   359|     ::
   360|         In [1]: f = FullEvalFormatter()
   361|         In [2]: f.format('{n//4}', n=8)
   362|         Out[2]: u'2'
   363|         In [3]: f.format('{list(range(5))[2:4]}')
   364|         Out[3]: u'[2, 3]'
   365|         In [4]: f.format('{3*2}')
   366|         Out[4]: u'6'
   367|     """
   368|     def vformat(self, format_string, args, kwargs):
   369|         result = []
   370|         for literal_text, field_name, format_spec, conversion in \
   371|                 self.parse(format_string):
   372|             if literal_text:
   373|                 result.append(literal_text)
   374|             if field_name is not None:
   375|                 if format_spec:
   376|                     field_name = ':'.join([field_name, format_spec])
   377|                 obj = eval(field_name, kwargs)
   378|                 obj = self.convert_field(obj, conversion)
   379|                 result.append(self.format_field(obj, ''))
   380|         return u''.join(py3compat.cast_unicode(s) for s in result)
   381| @skip_doctest_py3
   382| class DollarFormatter(FullEvalFormatter):
   383|     """Formatter allowing Itpl style $foo replacement, for names and attribute
   384|     access only. Standard {foo} replacement also works, and allows full
   385|     evaluation of its arguments.
   386|     Examples
   387|     --------
   388|     ::


# ====================================================================
# FILE: docs/gh-pages.py
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-90 ---
     1| from __future__ import print_function
     2| """Script to commit the doc build outputs into the github-pages repo.
     3| Use:
     4|   gh-pages.py [tag]
     5| If no tag is given, the current output of 'git describe' is used.  If given,
     6| that is how the resulting directory will be named.
     7| In practice, you should use either actual clean tags from a current build or
     8| something like 'current' as a stable URL for the most current version of the """
     9| import os
    10| import shutil
    11| import sys
    12| from os import chdir as cd
    13| from os.path import join as pjoin
    14| from subprocess import Popen, PIPE, CalledProcessError, check_call
    15| pages_dir = 'gh-pages'
    16| html_dir = 'build/html'
    17| pdf_dir = 'build/latex'
    18| pages_repo = 'git@github.com:ipython/ipython-doc.git'
    19| if sys.version_info[0] <= 3: 
    20|     getcwd = os.getcwd
    21| else:
    22|     getcwd = os.getcwdu
    23| def sh(cmd):
    24|     """Execute command in a subshell, return status code."""
    25|     return check_call(cmd, shell=True)
    26| def sh2(cmd):
    27|     """Execute command in a subshell, return stdout.
    28|     Stderr is unbuffered from the subshell.x"""
    29|     p = Popen(cmd, stdout=PIPE, shell=True)
    30|     out = p.communicate()[0]
    31|     retcode = p.returncode
    32|     if retcode:
    33|         raise CalledProcessError(retcode, cmd)
    34|     else:
    35|         return out.rstrip()
    36| def sh3(cmd):
    37|     """Execute command in a subshell, return stdout, stderr
    38|     If anything appears in stderr, print it out to sys.stderr"""
    39|     p = Popen(cmd, stdout=PIPE, stderr=PIPE, shell=True)
    40|     out, err = p.communicate()
    41|     retcode = p.returncode
    42|     if retcode:
    43|         raise CalledProcessError(retcode, cmd)
    44|     else:
    45|         return out.rstrip(), err.rstrip()
    46| def init_repo(path):
    47|     """clone the gh-pages repo if we haven't already."""
    48|     sh("git clone %s %s"%(pages_repo, path))
    49|     here = getcwd()
    50|     cd(path)
    51|     sh('git checkout gh-pages')
    52|     cd(here)
    53| if __name__ == '__main__':
    54|     try:
    55|         tag = sys.argv[1]
    56|     except IndexError:
    57|         tag = "dev"
    58|     startdir = getcwd()
    59|     if not os.path.exists(pages_dir):
    60|         init_repo(pages_dir)
    61|     else:
    62|         cd(pages_dir)
    63|         sh('git checkout gh-pages')
    64|         sh('git pull')
    65|         cd(startdir)
    66|     dest = pjoin(pages_dir, tag)
    67|     if tag != 'dev':
    68|         pass
    69|     shutil.rmtree(dest, ignore_errors=True)
    70|     shutil.copytree(html_dir, dest)
    71|     if tag != 'dev':
    72|         pass
    73|     try:
    74|         cd(pages_dir)
    75|         branch = sh2('git rev-parse --abbrev-ref HEAD').strip()
    76|         if branch != b'gh-pages':
    77|             e = 'On %r, git branch is %r, MUST be "gh-pages"' % (pages_dir,
    78|                                                                  branch)
    79|             raise RuntimeError(e)
    80|         sh('git add -A %s' % tag)
    81|         sh('git commit -m"Updated doc release: %s"' % tag)
    82|         print()
    83|         print('Most recent 3 commits:')
    84|         sys.stdout.flush()
    85|         sh('git --no-pager log --oneline HEAD~3..')
    86|     finally:
    87|         cd(startdir)
    88|     print()
    89|     print('Now verify the build in: %r' % dest)
    90|     print("If everything looks good, 'git push'")


# ====================================================================
# FILE: docs/source/conf.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 16-61 ---
    16|     'sphinx.ext.intersphinx',
    17|     'IPython.sphinxext.ipython_console_highlighting',
    18|     'IPython.sphinxext.ipython_directive',
    19|     'numpydoc',  # to preprocess docstrings
    20|     'github',  # for easy GitHub links
    21|     'magics',
    22| ]
    23| if ON_RTD:
    24|     extensions.remove('matplotlib.sphinxext.only_directives')
    25|     extensions.remove('matplotlib.sphinxext.mathmpl')
    26|     extensions.remove('matplotlib.sphinxext.plot_directive')
    27|     extensions.remove('IPython.sphinxext.ipython_directive')
    28|     extensions.remove('IPython.sphinxext.ipython_console_highlighting')
    29| templates_path = ['_templates']
    30| source_suffix = '.rst'
    31| if iprelease['_version_extra'] == 'dev':
    32|     rst_prolog = """
    33|     .. note::
    34|         This documentation is for a development version of IPython. There may be
    35|         significant differences from the latest stable release.
    36|     """
    37| elif os.environ.get('ARCHIVE', None):
    38|     rst_prolog = """
    39|     .. warning::
    40|         This documentation is for an old version of IPython.
    41|         You can find docs for newer versions `here <http://ipython.readthedocs.org/en/stable/>`_.
    42|     """
    43| master_doc = 'index'
    44| project = 'IPython'
    45| copyright = 'The IPython Development Team'
    46| github_project_url = "https://github.com/ipython/ipython"
    47| numpydoc_show_class_members = False # Otherwise Sphinx emits thousands of warnings
    48| numpydoc_class_members_toctree = False
    49| release = "%s" % iprelease['version']
    50| version = iprelease['version'].split('-', 1)[0]
    51| today_fmt = '%B %d, %Y'
    52| exclude_patterns = ['whatsnew/pr']
    53| pygments_style = 'sphinx'
    54| default_role = 'literal'
    55| html_style = 'default.css'
    56| html_static_path = ['_static']
    57| html_last_updated_fmt = '%b %d, %Y'
    58| html_additional_pages = {
    59|     'interactive/htmlnotebook': 'notebook_redirect.html',
    60|     'interactive/notebook': 'notebook_redirect.html',
    61|     'interactive/nbconvert': 'notebook_redirect.html',

