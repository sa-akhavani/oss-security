# ====================================================================
# FILE: .buildkite/dagster-buildkite/dagster_buildkite/steps/dagster.py
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-34 ---
     1| import os
     2| from glob import glob
     3| from typing import List
     4| from dagster_buildkite.python_packages import PythonPackages
     5| from ..defines import GIT_REPO_ROOT
     6| from ..python_version import AvailablePythonVersion
     7| from ..step_builder import CommandStepBuilder
     8| from ..utils import (
     9|     BuildkiteStep,
    10|     CommandStep,
    11|     is_feature_branch,
    12|     is_release_branch,
    13|     safe_getenv,
    14|     skip_if_no_non_docs_markdown_changes,
    15|     skip_if_no_python_changes,
    16|     skip_if_no_yaml_changes,
    17| )
    18| from .helm import build_helm_steps
    19| from .integration import build_integration_steps
    20| from .packages import build_library_packages_steps
    21| from .test_project import build_test_project_steps
    22| branch_name = safe_getenv("BUILDKITE_BRANCH")
    23| def build_repo_wide_steps() -> List[BuildkiteStep]:
    24|     return [
    25|         *build_check_changelog_steps(),
    26|         *build_repo_wide_check_manifest_steps(),
    27|         *build_repo_wide_pyright_steps(),
    28|         *build_repo_wide_ruff_steps(),
    29|         *build_repo_wide_prettier_steps(),
    30|     ]
    31| def build_dagster_steps() -> List[BuildkiteStep]:
    32|     steps: List[BuildkiteStep] = []
    33|     steps += build_library_packages_steps()
    34|     steps += build_helm_steps()

# --- HUNK 2: Lines 43-83 ---
    43|     return [
    44|         CommandStepBuilder(":zap: ruff")
    45|         .run(
    46|             "pip install -e python_modules/dagster[ruff] -e python_modules/dagster-pipes",
    47|             "make check_ruff",
    48|         )
    49|         .on_test_image(AvailablePythonVersion.get_default())
    50|         .with_skip(skip_if_no_python_changes())
    51|         .build(),
    52|     ]
    53| def build_repo_wide_prettier_steps() -> List[CommandStep]:
    54|     return [
    55|         CommandStepBuilder(":prettier: prettier")
    56|         .run(
    57|             "pushd js_modules/dagster-ui/packages/eslint-config",
    58|             "yarn install",
    59|             "popd",
    60|             "make check_prettier",
    61|         )
    62|         .on_test_image(AvailablePythonVersion.get_default())
    63|         .with_skip(skip_if_no_yaml_changes() and skip_if_no_non_docs_markdown_changes())
    64|         .build(),
    65|     ]
    66| def build_check_changelog_steps() -> List[CommandStep]:
    67|     branch_name = safe_getenv("BUILDKITE_BRANCH")
    68|     if not is_release_branch(branch_name):
    69|         return []
    70|     release_number = branch_name.split("-", 1)[-1].replace("-", ".")
    71|     return [
    72|         CommandStepBuilder(":memo: changelog")
    73|         .on_test_image(AvailablePythonVersion.get_default())
    74|         .run(f"python scripts/check_changelog.py {release_number}")
    75|         .build()
    76|     ]
    77| def build_repo_wide_pyright_steps() -> List[CommandStep]:
    78|     return [
    79|         CommandStepBuilder(":pyright: pyright")
    80|         .run(
    81|             "curl https://sh.rustup.rs -sSf | sh -s -- --default-toolchain nightly -y",
    82|             "pip install -e python_modules/dagster[pyright] -e python_modules/dagster-pipes",
    83|             "make pyright",


# ====================================================================
# FILE: .buildkite/dagster-buildkite/dagster_buildkite/utils.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 115-160 ---
   115| def parse_package_version(version_str: str) -> packaging.version.Version:
   116|     parsed_version = packaging.version.parse(version_str)
   117|     assert isinstance(
   118|         parsed_version, packaging.version.Version
   119|     ), f"Found LegacyVersion: {version_str}"
   120|     return parsed_version
   121| def get_commit(rev):
   122|     return subprocess.check_output(["git", "rev-parse", "--short", rev]).decode("utf-8").strip()
   123| def skip_if_no_python_changes():
   124|     if not is_feature_branch():
   125|         return None
   126|     if any(path.suffix == ".py" for path in ChangedFiles.all):
   127|         return None
   128|     return "No python changes"
   129| def skip_if_no_yaml_changes():
   130|     if not is_feature_branch():
   131|         return None
   132|     if any(path.suffix in [".yml", ".yaml"] for path in ChangedFiles.all):
   133|         return None
   134|     return "No yaml changes"
   135| def skip_if_no_non_docs_markdown_changes():
   136|     if not is_feature_branch():
   137|         return None
   138|     if any(path.suffix == ".md" and Path("docs") not in path.parents for path in ChangedFiles.all):
   139|         return None
   140|     return "No markdown changes outside of docs"
   141| @functools.lru_cache(maxsize=None)
   142| def has_helm_changes():
   143|     return any(Path("helm") in path.parents for path in ChangedFiles.all)
   144| def skip_if_no_helm_changes():
   145|     if not is_feature_branch():
   146|         return None
   147|     if has_helm_changes():
   148|         logging.info("Run helm steps because files in the helm directory changed")
   149|         return None
   150|     return "No helm changes"
   151| def message_contains(substring: str) -> bool:
   152|     return any(
   153|         substring in message
   154|         for message in [os.getenv("BUILDKITE_MESSAGE", ""), get_commit_message("HEAD")]
   155|     )
   156| def skip_if_no_docs_changes():
   157|     if not is_feature_branch(os.getenv("BUILDKITE_BRANCH")):
   158|         return None
   159|     if any(Path("docs") in path.parents for path in ChangedFiles.all):
   160|         logging.info("Run docs steps because files in the docs directory changed")


# ====================================================================
# FILE: examples/docs_snippets/docs_snippets/concepts/partitions_schedules_sensors/partitioned_asset.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-12 ---
     1| import os
     2| import urllib.request
     3| dir_name = "nasa"
     4| if not os.path.exists(dir_name):
     5|     os.makedirs(dir_name)
     6| from dagster import AssetExecutionContext, DailyPartitionsDefinition, asset
     7| @asset(partitions_def=DailyPartitionsDefinition(start_date="2023-10-01"))
     8| def my_daily_partitioned_asset(context: AssetExecutionContext) -> None:
     9|     partition_date_str = context.asset_partition_key_for_output()
    10|     url = f"https://api.nasa.gov/planetary/apod?api_key=DEMO_KEY&date={partition_date_str}"
    11|     target_location = f"nasa/{partition_date_str}.csv"
    12|     urllib.request.urlretrieve(url, target_location)


# ====================================================================
# FILE: examples/docs_snippets/docs_snippets/integrations/dbt/dbt.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-36 ---
     1| MANIFEST_PATH = ""
     2| def scope_compile_dbt_manifest(manifest):
     3|     import os
     4|     from pathlib import Path
     5|     from dagster_dbt import DbtCliResource
     6|     dbt_project_dir = Path(__file__).joinpath("..", "..", "..").resolve()
     7|     dbt = DbtCliResource(project_dir=os.fspath(dbt_project_dir))
     8|     if os.getenv("DAGSTER_DBT_PARSE_PROJECT_ON_LOAD"):
     9|         dbt_manifest_path = (
    10|             dbt.cli(
    11|                 ["--quiet", "parse"],
    12|                 target_path=Path("target"),
    13|             )
    14|             .wait()
    15|             .target_path.joinpath("manifest.json")
    16|         )
    17|     else:
    18|         dbt_manifest_path = dbt_project_dir.joinpath("target", "manifest.json")
    19| def scope_schedule_assets_dbt_only(manifest):
    20|     from dagster_dbt import build_schedule_from_dbt_selection, dbt_assets
    21|     @dbt_assets(manifest=manifest)
    22|     def my_dbt_assets():
    23|         ...
    24|     daily_dbt_assets_schedule = build_schedule_from_dbt_selection(
    25|         [my_dbt_assets],
    26|         job_name="daily_dbt_models",
    27|         cron_schedule="@daily",
    28|         dbt_select="tag:daily",
    29|     )
    30| def scope_schedule_assets_dbt_and_downstream(manifest):
    31|     from dagster import define_asset_job, ScheduleDefinition
    32|     from dagster_dbt import build_dbt_asset_selection, dbt_assets
    33|     @dbt_assets(manifest=manifest)
    34|     def my_dbt_assets():
    35|         ...
    36|     daily_selection = build_dbt_asset_selection(


# ====================================================================
# FILE: examples/docs_snippets/docs_snippets/integrations/dbt/tutorial/downstream_assets/constants.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-16 ---
     1| import os
     2| from pathlib import Path
     3| from dagster_dbt import DbtCliResource
     4| dbt_project_dir = Path(__file__).joinpath("..", "..", "..").resolve()
     5| dbt = DbtCliResource(project_dir=os.fspath(dbt_project_dir))
     6| if os.getenv("DAGSTER_DBT_PARSE_PROJECT_ON_LOAD"):
     7|     dbt_manifest_path = (
     8|         dbt.cli(
     9|             ["--quiet", "parse"],
    10|             target_path=Path("target"),
    11|         )
    12|         .wait()
    13|         .target_path.joinpath("manifest.json")
    14|     )
    15| else:
    16|     dbt_manifest_path = dbt_project_dir.joinpath("target", "manifest.json")


# ====================================================================
# FILE: examples/docs_snippets/docs_snippets/integrations/dbt/tutorial/load_dbt_models/constants.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-16 ---
     1| import os
     2| from pathlib import Path
     3| from dagster_dbt import DbtCliResource
     4| dbt_project_dir = Path(__file__).joinpath("..", "..", "..").resolve()
     5| dbt = DbtCliResource(project_dir=os.fspath(dbt_project_dir))
     6| if os.getenv("DAGSTER_DBT_PARSE_PROJECT_ON_LOAD"):
     7|     dbt_manifest_path = (
     8|         dbt.cli(
     9|             ["--quiet", "parse"],
    10|             target_path=Path("target"),
    11|         )
    12|         .wait()
    13|         .target_path.joinpath("manifest.json")
    14|     )
    15| else:
    16|     dbt_manifest_path = dbt_project_dir.joinpath("target", "manifest.json")


# ====================================================================
# FILE: examples/docs_snippets/docs_snippets/integrations/dbt/tutorial/upstream_assets/constants.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-16 ---
     1| import os
     2| from pathlib import Path
     3| from dagster_dbt import DbtCliResource
     4| dbt_project_dir = Path(__file__).joinpath("..", "..", "..").resolve()
     5| dbt = DbtCliResource(project_dir=os.fspath(dbt_project_dir))
     6| if os.getenv("DAGSTER_DBT_PARSE_PROJECT_ON_LOAD"):
     7|     dbt_manifest_path = (
     8|         dbt.cli(
     9|             ["--quiet", "parse"],
    10|             target_path=Path("target"),
    11|         )
    12|         .wait()
    13|         .target_path.joinpath("manifest.json")
    14|     )
    15| else:
    16|     dbt_manifest_path = dbt_project_dir.joinpath("target", "manifest.json")


# ====================================================================
# FILE: js_modules/dagster-ui/packages/app-oss/src/NUX/CommunityNux.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-35 ---
     1| import {gql, useMutation, useQuery} from '@apollo/client';
     2| import {
     3|   Body,
     4|   Box,
     5|   Button,
     6|   Checkbox,
     7|   Dialog,
     8|   ExternalAnchorButton,
     9|   Heading,
    10|   Icon,
    11|   Spinner,
    12|   TextInput,
    13|   colorAccentRed,
    14|   colorTextLight,
    15|   colorTextRed,
    16| } from '@dagster-io/ui-components';
    17| import {useStateWithStorage} from '@dagster-io/ui-core/hooks/useStateWithStorage';
    18| import React from 'react';
    19| import isEmail from 'validator/lib/isEmail';
    20| export const CommunityNux = () => {
    21|   const [didDismissCommunityNux, dissmissInBrowser] = useStateWithStorage(
    22|     'communityNux',
    23|     (data) => data,
    24|   );
    25|   const {data, loading} = useQuery(GET_SHOULD_SHOW_NUX_QUERY);
    26|   const [dismissOnServer] = useMutation(SET_NUX_SEEN_MUTATION);
    27|   if (!isLocalhost()) {
    28|     return null;
    29|   }
    30|   if (didDismissCommunityNux || loading || (data && !data.shouldShowNux)) {
    31|     return null;
    32|   }
    33|   return (
    34|     <CommunityNuxImpl
    35|       dismiss={() => {

# --- HUNK 2: Lines 75-144 ---
    75|   submit: (email: string, newsletter: boolean) => void;
    76| }
    77| const Form = ({dismiss, submit}: FormProps) => {
    78|   const [email, setEmail] = React.useState('');
    79|   const [newsletter, setNewsLetter] = React.useState(false);
    80|   const validEmail = isEmail(email);
    81|   const [emailChanged, setEmailChanged] = React.useState(false);
    82|   const [blurred, setBlurred] = React.useState(false);
    83|   return (
    84|     <Box
    85|       flex={{direction: 'column', gap: 16}}
    86|       style={{padding: '36px', width: '680px', background: 'white'}}
    87|     >
    88|       <Box
    89|         flex={{direction: 'row', gap: 24, alignItems: 'center'}}
    90|         padding={{bottom: 24}}
    91|         border="bottom"
    92|       >
    93|         <Box flex={{direction: 'column', gap: 8, alignItems: 'start', justifyContent: 'start'}}>
    94|           <Heading>Join the Dagster community</Heading>
    95|           <Body style={{color: colorTextLight(), marginBottom: '4px'}}>
    96|             Connect with thousands of other data practitioners building with Dagster. Share
    97|             knowledge, get help, and contribute to the open-source project.
    98|           </Body>
    99|           <ExternalAnchorButton
   100|             icon={<Icon name="slack" />}
   101|             href="https://www.dagster.io/slack?utm_source=local-nux"
   102|           >
   103|             Join us on Slack
   104|           </ExternalAnchorButton>
   105|         </Box>
   106|         <video autoPlay muted loop playsInline width={120} height={120}>
   107|           <source src={`${process.env.PUBLIC_URL}/Dagster_world.mp4`} type="video/mp4" />
   108|         </video>
   109|       </Box>
   110|       <Box flex={{direction: 'column', justifyContent: 'stretch', gap: 12}}>
   111|         <div>Notify me about Dagster security updates</div>
   112|         <TextInput
   113|           value={email}
   114|           onChange={(e) => {
   115|             setEmail(e.target.value);
   116|             setEmailChanged(true);
   117|           }}
   118|           onBlur={() => setBlurred(true)}
   119|           placeholder="hello@dagster.io"
   120|           strokeColor={!emailChanged || validEmail ? undefined : colorAccentRed()}
   121|           style={{width: '100%'}}
   122|         />
   123|         {emailChanged && blurred && !validEmail ? (
   124|           <div style={{paddingBottom: '12px', color: colorTextRed(), fontSize: '12px'}}>
   125|             Add your email to get updates from Dagster.
   126|           </div>
   127|         ) : null}
   128|         <Box as="label" flex={{direction: 'row', gap: 8, alignItems: 'center'}}>
   129|           <Checkbox
   130|             checked={newsletter}
   131|             onChange={(e: React.ChangeEvent<HTMLInputElement>) => {
   132|               setNewsLetter(e.target.checked);
   133|             }}
   134|           />{' '}
   135|           <span>Sign up for the Dagster newsletter</span>
   136|         </Box>
   137|       </Box>
   138|       <Box flex={{direction: 'row', justifyContent: 'space-between', alignItems: 'center'}}>
   139|         <a href="https://dagster.io/privacy" target="_blank" rel="noreferrer">
   140|           Privacy Policy
   141|         </a>
   142|         <Box flex={{direction: 'row', gap: 8}}>
   143|           <Button
   144|             onClick={() => {


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/.storybook/main.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 7-34 ---
     7|   return dirname(require.resolve(join(value, 'package.json')));
     8| }
     9| const config = {
    10|   stories: ['../src/**/*.stories.mdx', '../src/**/*.stories.@(js|jsx|ts|tsx)'],
    11|   addons: [
    12|     getAbsolutePath('@storybook/addon-links'),
    13|     getAbsolutePath('@storybook/addon-essentials'),
    14|     getAbsolutePath('@storybook/addon-mdx-gfm'),
    15|   ],
    16|   framework: {
    17|     name: getAbsolutePath('@storybook/react-webpack5'),
    18|     options: {},
    19|   },
    20|   typescript: {
    21|     reactDocgen: 'react-docgen-typescript-plugin',
    22|   },
    23|   features: {
    24|     storyStoreV7: true,
    25|   },
    26|   docs: {
    27|     autodocs: false,
    28|   },
    29|   env: (config) => ({
    30|     ...config,
    31|     STORYBOOK: true,
    32|   }),
    33| };
    34| export default config;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/.storybook/preview.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-73 ---
     1| import {
     2|   FontFamily,
     3|   GlobalInter,
     4|   GlobalInconsolata,
     5|   GlobalDialogStyle,
     6|   GlobalPopoverStyle,
     7|   GlobalSuggestStyle,
     8|   GlobalToasterStyle,
     9|   GlobalTooltipStyle,
    10| } from '../src';
    11| import {MemoryRouter} from 'react-router-dom';
    12| import * as React from 'react';
    13| import {createGlobalStyle} from 'styled-components/macro';
    14| import './blueprint.css';
    15| import {
    16|   colorBackgroundDefault,
    17|   colorLinkDefault,
    18|   colorTextDefault,
    19|   colorTextLight,
    20| } from '../src/theme/color';
    21| const GlobalStyle = createGlobalStyle`
    22|   * {
    23|     box-sizing: border-box;
    24|   }
    25|   html, body {
    26|     background-color: ${colorBackgroundDefault()};
    27|     color: ${colorTextDefault()};
    28|     -webkit-font-smoothing: antialiased;
    29|     -moz-osx-font-smoothing: grayscale;
    30|   }
    31|   a,
    32|   a:hover,
    33|   a:active {
    34|     color: ${colorLinkDefault()};
    35|   }
    36|   body {
    37|     margin: 0;
    38|     padding: 0;
    39|   }
    40|   body, input, select, textarea {
    41|     background-color: ${colorBackgroundDefault()};
    42|     color: ${colorTextDefault()};
    43|     font-family: ${FontFamily.default};
    44|   }
    45|   button {
    46|     font-family: inherit;
    47|   }
    48|   code, pre {
    49|     font-family: ${FontFamily.monospace};
    50|     font-size: 16px;
    51|   }
    52|   input::placeholder {
    53|     color: ${colorTextLight()};
    54|   }
    55| `;
    56| export const decorators = [
    57|   (Story) => (
    58|     <MemoryRouter>
    59|       <GlobalStyle />
    60|       <GlobalInter />
    61|       <GlobalInconsolata />
    62|       <GlobalToasterStyle />
    63|       <GlobalTooltipStyle />
    64|       <GlobalPopoverStyle />
    65|       <GlobalDialogStyle />
    66|       <GlobalSuggestStyle />
    67|       <Story />
    68|     </MemoryRouter>
    69|   ),
    70| ];
    71| export const parameters = {
    72|   parameters: {
    73|     actions: {argTypesRegex: '^on[A-Z].*'},


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Alert.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-83 ---
     1| import * as React from 'react';
     2| import styled from 'styled-components';
     3| import {
     4|   colorAccentBlue,
     5|   colorAccentGreen,
     6|   colorAccentRed,
     7|   colorAccentYellow,
     8|   colorBackgroundBlue,
     9|   colorBackgroundGreen,
    10|   colorBackgroundRed,
    11|   colorBackgroundYellow,
    12|   colorTextBlue,
    13|   colorTextGreen,
    14|   colorTextRed,
    15|   colorTextYellow,
    16| } from '../theme/color';
    17| import {Box} from './Box';
    18| import {Group} from './Group';
    19| import {IconName, Icon} from './Icon';
    20| export type AlertIntent = 'info' | 'warning' | 'error' | 'success';
    21| interface Props {
    22|   intent: AlertIntent;
    23|   title: React.ReactNode;
    24|   description?: React.ReactNode;
    25|   icon?: React.ReactNode;
    26|   onClose?: () => void;
    27| }
    28| export const Alert = (props: Props) => {
    29|   const {intent, title, description, onClose} = props;
    30|   const {backgroundColor, borderColor, icon, iconColor, textColor} = React.useMemo(() => {
    31|     switch (intent) {
    32|       case 'warning':
    33|         return {
    34|           backgroundColor: colorBackgroundYellow(),
    35|           borderColor: colorAccentYellow(),
    36|           icon: 'warning',
    37|           iconColor: colorAccentYellow(),
    38|           textColor: colorTextYellow(),
    39|         };
    40|       case 'error':
    41|         return {
    42|           backgroundColor: colorBackgroundRed(),
    43|           borderColor: colorAccentRed(),
    44|           icon: 'error',
    45|           iconColor: colorAccentRed(),
    46|           textColor: colorTextRed(),
    47|         };
    48|       case 'success':
    49|         return {
    50|           backgroundColor: colorBackgroundGreen(),
    51|           borderColor: colorAccentGreen(),
    52|           icon: 'done',
    53|           iconColor: colorAccentGreen(),
    54|           textColor: colorTextGreen(),
    55|         };
    56|       case 'info':
    57|       default:
    58|         return {
    59|           backgroundColor: colorBackgroundBlue(),
    60|           borderColor: colorAccentBlue(),
    61|           icon: 'info',
    62|           iconColor: colorAccentBlue(),
    63|           textColor: colorTextBlue(),
    64|         };
    65|     }
    66|   }, [intent]);
    67|   return (
    68|     <AlertContainer
    69|       background={backgroundColor}
    70|       $borderColor={borderColor}
    71|       $textColor={textColor}
    72|       padding={{horizontal: 16, vertical: 12}}
    73|     >
    74|       <Box flex={{direction: 'row', justifyContent: 'space-between'}}>
    75|         <Group direction="row" spacing={12} alignItems="flex-start">
    76|           {props.icon || <Icon name={icon as IconName} color={iconColor} />}
    77|           <Group direction="column" spacing={8}>
    78|             <AlertTitle>{title}</AlertTitle>
    79|             {description ? <AlertDescription>{description}</AlertDescription> : null}
    80|           </Group>
    81|         </Group>
    82|         {!!onClose ? (
    83|           <ButtonWrapper onClick={onClose}>


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/BaseButton.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-58 ---
     1| import * as React from 'react';
     2| import {
     3|   colorAccentGray,
     4|   colorAccentReversed,
     5|   colorBackgroundDefault,
     6|   colorBackgroundDefaultHover,
     7|   colorTextDefault,
     8| } from '../theme/color';
     9| import {StyledButton, StyledButtonText} from './StyledButton';
    10| interface CommonButtonProps {
    11|   icon?: React.ReactNode;
    12|   label?: React.ReactNode;
    13|   loading?: boolean;
    14|   rightIcon?: React.ReactNode;
    15|   iconColor?: string;
    16|   fillColor?: string;
    17|   fillColorHover?: string;
    18|   strokeColor?: string;
    19|   strokeColorHover?: string;
    20|   textColor?: string;
    21| }
    22| interface BaseButtonProps extends CommonButtonProps, React.ComponentPropsWithRef<'button'> {}
    23| export const BaseButton = React.forwardRef(
    24|   (props: BaseButtonProps, ref: React.ForwardedRef<HTMLButtonElement>) => {
    25|     const {
    26|       fillColor = colorBackgroundDefault(),
    27|       fillColorHover = colorBackgroundDefaultHover(),
    28|       disabled,
    29|       icon,
    30|       label,
    31|       loading,
    32|       rightIcon,
    33|       iconColor = colorAccentReversed(),
    34|       textColor = colorTextDefault(),
    35|       strokeColor = colorAccentGray(),
    36|       strokeColorHover = colorAccentGray(),
    37|       ...rest
    38|     } = props;
    39|     return (
    40|       <StyledButton
    41|         {...rest}
    42|         as="button"
    43|         disabled={!!(disabled || loading)}
    44|         $iconColor={iconColor}
    45|         $fillColor={fillColor}
    46|         $fillColorHover={fillColorHover}
    47|         $strokeColor={strokeColor}
    48|         $strokeColorHover={strokeColorHover}
    49|         $textColor={textColor}
    50|         ref={ref}
    51|       >
    52|         {icon || null}
    53|         {label ? <StyledButtonText>{label}</StyledButtonText> : null}
    54|         {rightIcon || null}
    55|       </StyledButton>
    56|     );
    57|   },
    58| );


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/BaseTag.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-71 ---
     1| import * as React from 'react';
     2| import styled from 'styled-components';
     3| import {
     4|   colorBackgroundDefault,
     5|   colorTextDefault,
     6|   colorTooltipBackground,
     7|   colorTooltipText,
     8| } from '../theme/color';
     9| import {IconWrapper} from './Icon';
    10| import {SpinnerWrapper} from './Spinner';
    11| interface Props {
    12|   fillColor?: string;
    13|   textColor?: string;
    14|   icon?: React.ReactNode;
    15|   interactive?: boolean;
    16|   rightIcon?: React.ReactNode;
    17|   label?: React.ReactNode;
    18|   tooltipText?: string;
    19| }
    20| const BaseTagTooltipStyle: React.CSSProperties = {
    21|   fontSize: 12,
    22|   lineHeight: '16px',
    23|   alignItems: 'center',
    24|   padding: '4px 8px',
    25|   userSelect: 'text',
    26|   pointerEvents: 'none',
    27|   borderRadius: 8,
    28|   border: 'none',
    29|   top: -9,
    30|   left: -13,
    31| };
    32| export const BaseTag = (props: Props) => {
    33|   const {
    34|     fillColor = colorBackgroundDefault(),
    35|     textColor = colorTextDefault(),
    36|     icon,
    37|     interactive = false,
    38|     rightIcon,
    39|     label,
    40|     tooltipText,
    41|   } = props;
    42|   return (
    43|     <StyledTag $fillColor={fillColor} $interactive={interactive} $textColor={textColor}>
    44|       {icon || null}
    45|       {label !== undefined && label !== null ? (
    46|         <span
    47|           data-tooltip={typeof label === 'string' ? label : tooltipText}
    48|           data-tooltip-style={JSON.stringify({
    49|             ...BaseTagTooltipStyle,
    50|             backgroundColor: colorTooltipBackground(),
    51|             color: colorTooltipText(),
    52|           })}
    53|         >
    54|           {label}
    55|         </span>
    56|       ) : null}
    57|       {rightIcon || null}
    58|     </StyledTag>
    59|   );
    60| };
    61| interface StyledTagProps {
    62|   $fillColor: string;
    63|   $interactive: boolean;
    64|   $textColor: string;
    65| }
    66| export const StyledTag = styled.div<StyledTagProps>`
    67|   background-color: ${({$fillColor}) => $fillColor};
    68|   border-radius: 8px;
    69|   color: ${({$textColor}) => $textColor};
    70|   cursor: ${({$interactive}) => ($interactive ? 'pointer' : 'inherit')};
    71|   display: inline-flex;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Box.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-23 ---
     1| import styled, {css} from 'styled-components';
     2| import {colorKeylineDefault} from '../theme/color';
     3| import {assertUnreachable} from '../util/assertUnreachable';
     4| import {BorderSetting, BorderSide, DirectionalSpacing, FlexProperties} from './types';
     5| interface Props {
     6|   background?: string | null;
     7|   border?: BorderSide | BorderSetting | null;
     8|   flex?: FlexProperties | null;
     9|   margin?: DirectionalSpacing | null;
    10|   padding?: DirectionalSpacing | null;
    11| }
    12| const flexPropertiesToCSS = (flex: FlexProperties) => {
    13|   return css`
    14|     display: ${flex.display || 'flex'};
    15|     ${flex.alignItems ? `align-items: ${flex.alignItems};` : null}
    16|     ${flex.basis ? `flex-basis: ${flex.basis};` : null}
    17|     ${flex.direction ? `flex-direction: ${flex.direction};` : null}
    18|     ${flex.justifyContent ? `justify-content: ${flex.justifyContent};` : null}
    19|     ${flex.grow ? `flex-grow: ${flex.grow};` : null}
    20|     ${flex.wrap ? `flex-wrap: ${flex.wrap};` : null}
    21|     ${flex.gap ? `gap: ${flex.gap}px;` : null}
    22|     ${flex.shrink !== null && flex.shrink !== undefined ? `flex-shrink: ${flex.shrink};` : null}
    23|   `;

# --- HUNK 2: Lines 26-67 ---
    26|   return css`
    27|     background-color: ${background};
    28|   `;
    29| };
    30| const directionalSpacingToCSS = (property: string, spacing: DirectionalSpacing) => {
    31|   if (typeof spacing === 'number') {
    32|     return css`
    33|       ${property}: ${spacing}px;
    34|     `;
    35|   }
    36|   const top = spacing.vertical || spacing.top || 0;
    37|   const right = spacing.horizontal || spacing.right || 0;
    38|   const bottom = spacing.vertical || spacing.bottom || 0;
    39|   const left = spacing.horizontal || spacing.left || 0;
    40|   return css`
    41|     ${property}: ${top}px ${right}px ${bottom}px ${left}px;
    42|   `;
    43| };
    44| const borderSettingToCSS = (border: BorderSide | BorderSetting) => {
    45|   const borderValue =
    46|     typeof border === 'string' ? {side: border, width: 1, color: colorKeylineDefault()} : border;
    47|   const {side, width = 1, color = colorKeylineDefault()} = borderValue;
    48|   switch (side) {
    49|     case 'all':
    50|       return css`
    51|         box-shadow: inset 0 0 0 ${width}px ${color};
    52|       `;
    53|     case 'top-and-bottom':
    54|       return css`
    55|         box-shadow:
    56|           inset 0 ${width}px ${color},
    57|           inset 0 -${width}px ${color};
    58|       `;
    59|     case 'left-and-right':
    60|       return css`
    61|         box-shadow:
    62|           inset ${width}px 0 ${color},
    63|           inset -${width}px 0 ${color};
    64|       `;
    65|     case 'top':
    66|       return css`
    67|         box-shadow: inset 0 ${width}px ${color};


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Button.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-264 ---
     1| import {AnchorButton as BlueprintAnchorButton, Button as BlueprintButton} from '@blueprintjs/core';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| import {CoreColors} from '../palettes/Colors';
     5| import {
     6|   colorAccentGray,
     7|   colorAccentGreen,
     8|   colorAccentGreenHover,
     9|   colorAccentPrimary,
    10|   colorAccentPrimaryHover,
    11|   colorAccentRed,
    12|   colorAccentRedHover,
    13|   colorAccentReversed,
    14|   colorAccentYellow,
    15|   colorAccentYellowHover,
    16|   colorBackgroundGray,
    17|   colorBackgroundGreen,
    18|   colorBackgroundRed,
    19|   colorBackgroundYellow,
    20|   colorBorderDefault,
    21|   colorBorderHover,
    22|   colorBackgroundLightHover,
    23| } from '../theme/color';
    24| import {BaseButton} from './BaseButton';
    25| import {Spinner} from './Spinner';
    26| import {StyledButton, StyledButtonText} from './StyledButton';
    27| type BlueprintIntent = React.ComponentProps<typeof BlueprintButton>['intent'];
    28| type BlueprintOutlined = React.ComponentProps<typeof BlueprintButton>['outlined'];
    29| export const outlinedIntentToFillColor = () => {
    30|   return 'transparent';
    31| };
    32| export const outlinedIntentToFillColorHover = (intent: BlueprintIntent) => {
    33|   switch (intent) {
    34|     case 'danger':
    35|       return colorBackgroundRed();
    36|     case 'success':
    37|       return colorBackgroundGreen();
    38|     case 'warning':
    39|       return colorBackgroundYellow();
    40|     case 'primary':
    41|     case 'none':
    42|     default:
    43|       return colorBackgroundGray();
    44|   }
    45| };
    46| export const outlinedIntentToStrokeColor = (intent: BlueprintIntent) => {
    47|   switch (intent) {
    48|     case 'danger':
    49|       return colorAccentRed();
    50|     case 'success':
    51|       return colorAccentGreen();
    52|     case 'warning':
    53|       return colorAccentYellow();
    54|     case 'none':
    55|       return 'transparent';
    56|     case 'primary':
    57|     default:
    58|       return colorBorderDefault();
    59|   }
    60| };
    61| export const outlinedIntentToStrokeColorHover = (intent: BlueprintIntent) => {
    62|   switch (intent) {
    63|     case 'danger':
    64|       return colorAccentRedHover();
    65|     case 'success':
    66|       return colorAccentGreenHover();
    67|     case 'warning':
    68|       return colorAccentYellowHover();
    69|     case 'none':
    70|       return 'transparent';
    71|     case 'primary':
    72|     default:
    73|       return colorBorderHover();
    74|   }
    75| };
    76| export const outlinedIntentToTextColor = (intent: BlueprintIntent) => {
    77|   switch (intent) {
    78|     case 'danger':
    79|       return colorAccentRed();
    80|     case 'success':
    81|       return colorAccentGreen();
    82|     case 'warning':
    83|       return colorAccentYellow();
    84|     case 'primary':
    85|     case 'none':
    86|     default:
    87|       return colorAccentPrimary();
    88|   }
    89| };
    90| export const outlinedIntentToIconColor = (intent: BlueprintIntent) => {
    91|   switch (intent) {
    92|     case 'danger':
    93|       return colorAccentRed();
    94|     case 'success':
    95|       return colorAccentGreen();
    96|     case 'warning':
    97|       return colorAccentYellow();
    98|     case 'primary':
    99|     case 'none':
   100|     default:
   101|       return colorAccentPrimary();
   102|   }
   103| };
   104| export const outlinedIntentToSpinnerColor = (intent: BlueprintIntent) => {
   105|   switch (intent) {
   106|     case 'primary':
   107|       return colorBorderDefault();
   108|     case 'danger':
   109|       return colorAccentRed();
   110|     case 'success':
   111|       return colorAccentGreen();
   112|     case 'warning':
   113|       return colorAccentYellow();
   114|     case 'primary':
   115|     case 'none':
   116|     default:
   117|       return colorAccentGray();
   118|   }
   119| };
   120| export const intentToStrokeColor = (intent: BlueprintIntent) => {
   121|   if (intent === undefined) {
   122|     return colorBorderDefault();
   123|   }
   124|   return 'transparent';
   125| };
   126| export const intentToFillColor = (intent: BlueprintIntent) => {
   127|   switch (intent) {
   128|     case 'primary':
   129|       return colorAccentPrimary();
   130|     case 'danger':
   131|       return colorAccentRed();
   132|     case 'success':
   133|       return colorAccentGreen();
   134|     case 'warning':
   135|       return colorAccentYellow();
   136|     case 'none':
   137|     default:
   138|       return 'transparent';
   139|   }
   140| };
   141| export const intentToFillColorHover = (intent: BlueprintIntent) => {
   142|   switch (intent) {
   143|     case 'primary':
   144|       return colorAccentPrimaryHover();
   145|     case 'danger':
   146|       return colorAccentRedHover();
   147|     case 'success':
   148|       return colorAccentGreenHover();
   149|     case 'warning':
   150|       return colorAccentYellowHover();
   151|     case 'none':
   152|     default:
   153|       return colorBackgroundLightHover();
   154|   }
   155| };
   156| export const intentToTextAndIconColor = (intent: BlueprintIntent) => {
   157|   if (!intent || intent === 'none') {
   158|     return colorAccentPrimary();
   159|   }
   160|   if (intent === 'primary') {
   161|     return colorAccentReversed();
   162|   }
   163|   return CoreColors.White;
   164| };
   165| export const buildColorSet = (config: {intent?: BlueprintIntent; outlined: BlueprintOutlined}) => {
   166|   const {intent, outlined} = config;
   167|   const fillColor = outlined ? outlinedIntentToFillColor() : intentToFillColor(intent);
   168|   const fillColorHover = outlined
   169|     ? outlinedIntentToFillColorHover(intent)
   170|     : intentToFillColorHover(intent);
   171|   const textColor = outlined ? outlinedIntentToTextColor(intent) : intentToTextAndIconColor(intent);
   172|   const iconColor = outlined ? outlinedIntentToIconColor(intent) : intentToTextAndIconColor(intent);
   173|   const strokeColor = outlined ? outlinedIntentToStrokeColor(intent) : intentToStrokeColor(intent);
   174|   const strokeColorHover = outlined
   175|     ? outlinedIntentToStrokeColorHover(intent)
   176|     : intentToStrokeColor(intent);
   177|   return {
   178|     fillColor,
   179|     fillColorHover,
   180|     textColor,
   181|     iconColor,
   182|     strokeColor,
   183|     strokeColorHover,
   184|   };
   185| };
   186| export const Button = React.forwardRef(
   187|   (
   188|     props: React.ComponentProps<typeof BlueprintButton>,
   189|     ref: React.ForwardedRef<HTMLButtonElement>,
   190|   ) => {
   191|     const {children, icon, intent, loading, outlined, rightIcon, ...rest} = props;
   192|     let iconOrSpinner = icon;
   193|     if (loading) {
   194|       const spinnerColor = outlined
   195|         ? outlinedIntentToSpinnerColor(intent)
   196|         : intentToTextAndIconColor(intent);
   197|       iconOrSpinner = <Spinner purpose="body-text" fillColor={spinnerColor} />;
   198|     }
   199|     const {fillColor, fillColorHover, textColor, iconColor, strokeColor, strokeColorHover} =
   200|       React.useMemo(() => buildColorSet({intent, outlined}), [intent, outlined]);
   201|     return (
   202|       <BaseButton
   203|         {...rest}
   204|         icon={iconOrSpinner}
   205|         rightIcon={rightIcon}
   206|         loading={loading}
   207|         fillColor={fillColor}
   208|         fillColorHover={fillColorHover}
   209|         textColor={textColor}
   210|         iconColor={iconColor}
   211|         strokeColor={strokeColor}
   212|         strokeColorHover={strokeColorHover}
   213|         label={children}
   214|         ref={ref}
   215|       />
   216|     );
   217|   },
   218| );
   219| Button.displayName = 'Button';
   220| export const JoinedButtons = styled.div`
   221|   display: flex;
   222|   align-items: center;
   223|   ${StyledButton}:not(:last-child),
   224|   & > *:not(:last-child) ${StyledButton} {
   225|     border-top-right-radius: 0;
   226|     border-bottom-right-radius: 0;
   227|   }
   228|   ${StyledButton}:not(:first-child),
   229|   & > *:not(:first-child) ${StyledButton} {
   230|     margin-left: -1px;
   231|     border-top-left-radius: 0;
   232|     border-bottom-left-radius: 0;
   233|   }
   234| `;
   235| export const ExternalAnchorButton = React.forwardRef(
   236|   (
   237|     props: Omit<React.ComponentProps<typeof BlueprintAnchorButton>, 'loading'>,
   238|     ref: React.ForwardedRef<HTMLAnchorElement>,
   239|   ) => {
   240|     const {children, icon, intent, outlined, rightIcon, ...rest} = props;
   241|     const {fillColor, fillColorHover, textColor, iconColor, strokeColor, strokeColorHover} =
   242|       React.useMemo(() => buildColorSet({intent, outlined}), [intent, outlined]);
   243|     return (
   244|       <StyledButton
   245|         {...rest}
   246|         as="a"
   247|         target="_blank"
   248|         rel="noreferrer nofollow"
   249|         $fillColor={fillColor}
   250|         $fillColorHover={fillColorHover}
   251|         $strokeColor={strokeColor}
   252|         $strokeColorHover={strokeColorHover}
   253|         $textColor={textColor}
   254|         $iconColor={iconColor}
   255|         ref={ref}
   256|       >
   257|         {icon || null}
   258|         {children ? <StyledButtonText>{children}</StyledButtonText> : null}
   259|         {rightIcon || null}
   260|       </StyledButton>
   261|     );
   262|   },
   263| );
   264| ExternalAnchorButton.displayName = 'ExternalAnchorButton';


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/ButtonGroup.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-53 ---
     1| import * as React from 'react';
     2| import {colorBackgroundLighterHover, colorTextLight, colorTextDefault} from '../theme/color';
     3| import {BaseButton} from './BaseButton';
     4| import {JoinedButtons, buildColorSet} from './Button';
     5| import {IconName, Icon} from './Icon';
     6| import {Tooltip} from './Tooltip';
     7| export type ButtonGroupItem<T> = {
     8|   id: T;
     9|   label?: React.ReactNode;
    10|   icon?: IconName;
    11|   tooltip?: string;
    12| };
    13| interface Props<T> {
    14|   activeItems?: Set<T>;
    15|   buttons: ButtonGroupItem<T>[];
    16|   onClick: (id: T, e: React.MouseEvent<HTMLButtonElement>) => void;
    17| }
    18| export const ButtonGroup = <T extends string | number>(props: Props<T>) => {
    19|   const {activeItems, buttons, onClick} = props;
    20|   return (
    21|     <JoinedButtons>
    22|       {buttons.map((button) => {
    23|         const {id, icon, label, tooltip} = button;
    24|         const isActive = activeItems?.has(id);
    25|         const {fillColor, fillColorHover, iconColor, strokeColor, strokeColorHover} = buildColorSet(
    26|           {intent: undefined, outlined: false},
    27|         );
    28|         const buttonElement = (
    29|           <BaseButton
    30|             key={id}
    31|             fillColor={isActive ? colorBackgroundLighterHover() : fillColor}
    32|             fillColorHover={isActive ? colorBackgroundLighterHover() : fillColorHover}
    33|             textColor={isActive ? colorTextDefault() : colorTextLight()}
    34|             iconColor={iconColor}
    35|             strokeColor={isActive ? strokeColorHover : strokeColor}
    36|             strokeColorHover={strokeColorHover}
    37|             icon={icon ? <Icon name={icon} /> : null}
    38|             label={label}
    39|             onClick={(e) => onClick(id, e)}
    40|           />
    41|         );
    42|         if (tooltip) {
    43|           return (
    44|             <Tooltip content={tooltip} position="top" key={id}>
    45|               {buttonElement}
    46|             </Tooltip>
    47|           );
    48|         }
    49|         return buttonElement;
    50|       })}
    51|     </JoinedButtons>
    52|   );
    53| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/ButtonLink.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-24 ---
     1| import * as React from 'react';
     2| import styled, {css} from 'styled-components';
     3| import {colorLinkDefault} from '../theme/color';
     4| import {Box} from './Box';
     5| type Color =
     6|   | string
     7|   | {
     8|       link: string;
     9|       hover?: string;
    10|       active?: string;
    11|     };
    12| type Underline = 'never' | 'always' | 'hover';
    13| interface Props {
    14|   color: Color;
    15|   disabled?: boolean;
    16|   underline?: Underline;
    17| }
    18| const fontColor = (color: Color) => {
    19|   if (typeof color === 'string') {
    20|     return css`
    21|       color: ${color};
    22|     `;
    23|   }
    24|   const {link, hover, active} = color;

# --- HUNK 2: Lines 27-85 ---
    27|     ${hover ? `&:hover { color: ${hover}; }` : null}
    28|     ${active ? `&:active { color: ${active}; }` : null}
    29|   `;
    30| };
    31| const outlineColor = (color: Color) => {
    32|   if (typeof color === 'string') {
    33|     return color;
    34|   }
    35|   return color.link;
    36| };
    37| const textDecoration = (underline: Underline) => {
    38|   switch (underline) {
    39|     case 'always':
    40|       return css`
    41|         text-decoration: underline;
    42|       `;
    43|     case 'hover':
    44|       return css`
    45|         &:hover {
    46|           text-decoration: underline;
    47|           & > ${Box} {
    48|             text-decoration: underline;
    49|           }
    50|         }
    51|       `;
    52|     case 'never':
    53|     default:
    54|       return null;
    55|   }
    56| };
    57| export const ButtonLink = styled(({color, underline, ...rest}) => <button {...rest} />)<Props>`
    58|   background: transparent;
    59|   border: 0;
    60|   cursor: pointer;
    61|   font-size: inherit;
    62|   line-height: 1;
    63|   padding: 8px;
    64|   margin: -8px;
    65|   text-align: left;
    66|   &:active,
    67|   &:focus {
    68|     outline: none;
    69|   }
    70|   &:focus-visible {
    71|     outline: 1px auto ${({color}) => outlineColor(color)};
    72|     outline-offset: 2px;
    73|   }
    74|   &:disabled {
    75|     cursor: default;
    76|     opacity: 0.7;
    77|   }
    78|   transition: 30ms color linear;
    79|   ${({color}) => fontColor(color)}
    80|   ${({underline}) => textDecoration(underline)}
    81| `;
    82| ButtonLink.defaultProps = {
    83|   color: colorLinkDefault(),
    84|   underline: 'hover',
    85| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Checkbox.tsx
# Total hunks: 5
# ====================================================================
# --- HUNK 1: Lines 1-206 ---
     1| import * as React from 'react';
     2| import {useRef} from 'react';
     3| import styled, {css} from 'styled-components';
     4| import {
     5|   colorAccentBlue,
     6|   colorAccentGray,
     7|   colorAccentWhite,
     8|   colorAccentReversed,
     9|   colorBackgroundDefault,
    10|   colorBackgroundGray,
    11|   colorBorderDefault,
    12|   colorTextDefault,
    13|   colorTextDisabled,
    14|   colorTextLighter,
    15|   colorFocusRing,
    16| } from '../theme/color';
    17| type Format = 'check' | 'star' | 'switch';
    18| type Size = 'small' | 'large';
    19| type Props = Omit<
    20|   React.DetailedHTMLProps<React.InputHTMLAttributes<HTMLInputElement>, HTMLInputElement>,
    21|   'size'
    22| > & {
    23|   checked: boolean;
    24|   onClick?: (e: React.MouseEvent<HTMLLabelElement>) => void;
    25|   onChange?: (e: React.ChangeEvent<HTMLInputElement>) => void;
    26|   label?: React.ReactNode;
    27|   indeterminate?: boolean;
    28|   format?: Format;
    29|   fillColor?: string;
    30|   size?: Size;
    31| };
    32| interface IconProps {
    33|   checked: boolean;
    34|   disabled: boolean;
    35|   indeterminate: boolean;
    36|   fillColor: string;
    37| }
    38| const StarIcon = ({checked, indeterminate, fillColor, disabled}: IconProps) => (
    39|   <svg width="24px" height="24px" viewBox="-3 -3 24 24">
    40|     <path
    41|       className="interaction-focus-outline"
    42|       d="M8.99983 14.27L13.1498 16.78C13.9098 17.24 14.8398 16.56 14.6398 15.7L13.5398 10.98L17.2098 7.80001C17.8798 7.22001 17.5198 6.12001 16.6398 6.05001L11.8098 5.64001L9.91983 1.18001C9.57983 0.37001 8.41983 0.37001 8.07983 1.18001L6.18983 5.63001L1.35983 6.04001C0.479829 6.11001 0.119828 7.21001 0.789828 7.79001L4.45983 10.97L3.35983 15.69C3.15983 16.55 4.08983 17.23 4.84983 16.77L8.99983 14.27Z"
    43|       fill={disabled ? colorBackgroundGray() : colorBackgroundDefault()}
    44|     />
    45|     <path
    46|       d="M16.65 6.04L11.81 5.62L9.92 1.17C9.58 0.36 8.42 0.36 8.08 1.17L6.19 5.63L1.36 6.04C0.48 6.11 0.12 7.21 0.79 7.79L4.46 10.97L3.36 15.69C3.16 16.55 4.09 17.23 4.85 16.77L9 14.27L13.15 16.78C13.91 17.24 14.84 16.56 14.64 15.7L13.54 10.97L17.21 7.79C17.88 7.21 17.53 6.11 16.65 6.04ZM9 12.4L5.24 14.67L6.24 10.39L2.92 7.51L7.3 7.13L9 3.1L10.71 7.14L15.09 7.52L11.77 10.4L12.77 14.68L9 12.4Z"
    47|       className="interaction-darken"
    48|       fill={
    49|         disabled
    50|           ? checked && !indeterminate
    51|             ? 'transparent'
    52|             : colorTextDisabled()
    53|           : colorTextLighter()
    54|       }
    55|     />
    56|     {indeterminate && (
    57|       <path
    58|         d="M11.6490126,5.26286597 L11.8098,5.64001 L16.6398,6.05001 C17.5198,6.12001 17.8798,7.22001 17.2098,7.80001 L17.2098,7.80001 L13.5398,10.98 L14.6398,15.7 C14.8398,16.56 13.9098,17.24 13.1498,16.78 L13.1498,16.78 L8.99983,14.27 L4.84983,16.77 C4.49121528,16.9870563 4.09474951,16.9502879 3.79701262,16.7605538 L11.6490126,5.26286597 Z"
    59|         className="interaction-darken"
    60|         fill={disabled ? colorTextDisabled() : fillColor}
    61|       />
    62|     )}
    63|     <path
    64|       d="M8.99983 14.27L13.1498 16.78C13.9098 17.24 14.8398 16.56 14.6398 15.7L13.5398 10.98L17.2098 7.80001C17.8798 7.22001 17.5198 6.12001 16.6398 6.05001L11.8098 5.64001L9.91983 1.18001C9.57983 0.37001 8.41983 0.37001 8.07983 1.18001L6.18983 5.63001L1.35983 6.04001C0.479829 6.11001 0.119828 7.21001 0.789828 7.79001L4.45983 10.97L3.35983 15.69C3.15983 16.55 4.08983 17.23 4.84983 16.77L8.99983 14.27Z"
    65|       className="interaction-darken"
    66|       fill={disabled ? colorTextDisabled() : fillColor}
    67|       style={{
    68|         transformOrigin: '9px 9px',
    69|         transform: !indeterminate && checked ? 'scale(1,1)' : 'scale(0,0)',
    70|         transition: 'transform 80ms linear',
    71|       }}
    72|     />
    73|   </svg>
    74| );
    75| const SwitchIcon = ({checked, indeterminate, fillColor, disabled}: IconProps) => (
    76|   <svg width="36px" height="24px" viewBox="-3 -3 42 28">
    77|     <defs>
    78|       <linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="innerShadow">
    79|         <stop stopColor="#000" stopOpacity="0.2" offset="0%" />
    80|         <stop stopColor="#000" stopOpacity="0.12" offset="15%" />
    81|         <stop stopColor="#000" stopOpacity="0.06" offset="40%" />
    82|         <stop stopColor="#000" stopOpacity="0" offset="100%" />
    83|       </linearGradient>
    84|     </defs>
    85|     <rect
    86|       id="bg"
    87|       x="0"
    88|       y="0"
    89|       width="36"
    90|       height="22"
    91|       rx="11"
    92|       fill={
    93|         checked && !indeterminate
    94|           ? disabled
    95|             ? colorBorderDefault()
    96|             : fillColor
    97|           : disabled
    98|           ? colorBorderDefault()
    99|           : colorAccentGray()
   100|       }
   101|       style={{
   102|         transition: 'fill 100ms linear',
   103|         opacity: disabled ? 0.8 : 1,
   104|       }}
   105|       className="interaction-darken interaction-focus-outline"
   106|     />
   107|     {!disabled && <rect x="0" y="0" width="36" height="22" rx="11" fill="url(#innerShadow)" />}
   108|     <rect
   109|       id="handle"
   110|       style={{transition: 'x 100ms linear'}}
   111|       x={indeterminate ? '8' : checked ? '15' : '1'}
   112|       y="1"
   113|       width="20"
   114|       height="20"
   115|       rx="10"
   116|       fill={colorAccentWhite()}
   117|     />
   118|   </svg>
   119| );
   120| const CheckIcon = ({checked, indeterminate, fillColor, disabled}: IconProps) => (
   121|   <svg width="24px" height="24px" viewBox="-3 -3 24 24">
   122|     <path
   123|       d="M16,0 C17.1,0 18,0.9 18,2 L18,2 L18,16 C18,17.1 17.1,18 16,18 L16,18 L2,18 C0.9,18 0,17.1 0,16 L0,16 L0,2 C0,0.9 0.9,0 2,0 L2,0 Z"
   124|       id="Background"
   125|       className=" interaction-focus-outline"
   126|       style={{transition: 'fill 100ms linear'}}
   127|       fill={disabled ? colorBackgroundGray() : colorBackgroundDefault()}
   128|     />
   129|     <path
   130|       id="Border"
   131|       className="interaction-darken"
   132|       d="M15 16H3C2.45 16 2 15.55 2 15V3C2 2.45 2.45 2 3 2H15C15.55 2 16 2.45 16 3V15C16 15.55 15.55 16 15 16ZM16 0H2C0.9 0 0 0.9 0 2V16C0 17.1 0.9 18 2 18H16C17.1 18 18 17.1 18 16V2C18 0.9 17.1 0 16 0Z"
   133|       fill={checked || indeterminate ? 'transparent' : colorTextDisabled()}
   134|       style={{opacity: disabled ? 0.8 : 1}}
   135|     />
   136|     <path
   137|       d="M16,0 C17.1,0 18,0.9 18,2 L18,2 L18,16 C18,17.1 17.1,18 16,18 L16,18 L2,18 C0.9,18 0,17.1 0,16 L0,16 L0,2 C0,0.9 0.9,0 2,0 L2,0 Z"
   138|       id="Fill"
   139|       className="interaction-darken"
   140|       style={{transition: 'fill 100ms linear', opacity: disabled ? 0.8 : 1}}
   141|       fill={checked || indeterminate ? (disabled ? colorTextDisabled() : fillColor) : 'transparent'}
   142|     />
   143|     <polyline
   144|       id="Check"
   145|       fill="none"
   146|       stroke={colorAccentReversed()}
   147|       strokeWidth="2"
   148|       strokeLinecap="round"
   149|       strokeLinejoin="round"
   150|       strokeDasharray="16"
   151|       style={{
   152|         transition: 'stroke-dashoffset 100ms linear',
   153|         transitionDelay: !(checked && !indeterminate) ? '80ms' : '0',
   154|       }}
   155|       strokeDashoffset={checked && !indeterminate ? '0' : '16'}
   156|       points="3.5 9 7 12.5 14.5 5.0"
   157|     />
   158|     <line
   159|       id="Indeterminate"
   160|       x1="5"
   161|       y1="9"
   162|       x2="13"
   163|       y2="9"
   164|       style={{
   165|         transition: 'stroke-dashoffset 100ms linear',
   166|         transitionDelay: !indeterminate ? '80ms' : '0',
   167|       }}
   168|       stroke={colorAccentReversed()}
   169|       strokeWidth="2"
   170|       strokeDasharray="8"
   171|       strokeLinecap="round"
   172|       strokeDashoffset={indeterminate ? '0' : '8'}
   173|     />
   174|   </svg>
   175| );
   176| let counter = 0;
   177| const uniqueId = () => `checkbox-${counter++}`;
   178| const Base = ({
   179|   id,
   180|   checked,
   181|   label,
   182|   className,
   183|   format = 'check',
   184|   disabled = false,
   185|   indeterminate = false,
   186|   fillColor = colorAccentBlue(),
   187|   children, // not passed to input
   188|   size,
   189|   onClick,
   190|   ...rest
   191| }: Props) => {
   192|   const uid = useRef(id || uniqueId());
   193|   const Component = React.useMemo(() => {
   194|     switch (format) {
   195|       case 'star':
   196|         return StarIcon;
   197|       case 'check':
   198|         return CheckIcon;
   199|       case 'switch':
   200|         return SwitchIcon;
   201|     }
   202|   }, [format]);
   203|   return (
   204|     <label htmlFor={uid.current} className={className} onClick={onClick}>
   205|       <input
   206|         {...rest}

# --- HUNK 2: Lines 229-285 ---
   229|     return css`
   230|       margin: -3px;
   231|     `;
   232|   }
   233|   if (format === 'switch') {
   234|     return css`
   235|       margin: -3px -9px;
   236|       transform: scale(0.5);
   237|     `;
   238|   }
   239|   return css`
   240|     margin: -3px -6px;
   241|     transform: scale(0.75);
   242|   `;
   243| };
   244| export const Checkbox = styled(Base)`
   245|   display: inline-flex;
   246|   position: relative;
   247|   user-select: none;
   248|   align-items: flex-start;
   249|   color: ${({disabled}) => (disabled ? colorTextDisabled() : colorTextDefault())};
   250|   cursor: pointer;
   251|   gap: 8px;
   252|   svg {
   253|     flex-shrink: 0;
   254|     ${svgStyle}
   255|   }
   256|   input[type='checkbox'] {
   257|     position: absolute;
   258|     cursor: pointer;
   259|     opacity: 0;
   260|     height: 0;
   261|     width: 0;
   262|   }
   263|   input:focus + svg {
   264|     .interaction-focus-outline {
   265|       stroke: ${colorFocusRing()};
   266|       stroke-width: 6px;
   267|       paint-order: stroke fill;
   268|     }
   269|   }
   270|   /* Focus outline only when using keyboard, not when focusing via mouse,
   271|      if focus-visible is supported and this rule is understood. */
   272|   input:focus:not(input:focus-visible) + svg {
   273|     .interaction-focus-outline {
   274|       stroke-width: 0;
   275|     }
   276|   }
   277|   ${({disabled}) =>
   278|     !disabled &&
   279|     `
   280|     svg:hover {
   281|       filter: drop-shadow(0 0 5px rgba(0, 0, 0, 0.12));
   282|       &.interaction-darken,
   283|       .interaction-darken {
   284|         filter: brightness(0.8);
   285|       }


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/ConfigTypeSchema.tsx
# Total hunks: 5
# ====================================================================
# --- HUNK 1: Lines 1-86 ---
     1| import * as React from 'react';
     2| import styled from 'styled-components';
     3| import {
     4|   colorAccentBlue,
     5|   colorAccentPrimary,
     6|   colorAccentReversed,
     7|   colorAccentYellow,
     8|   colorBackgroundLight,
     9|   colorBackgroundLighter,
    10|   colorBorderDefault,
    11|   colorTextLighter,
    12|   colorTextRed,
    13|   colorTooltipBackground,
    14|   colorTooltipText,
    15| } from '../theme/color';
    16| import {Popover} from './Popover';
    17| import {ConfigSchema_allConfigTypes as TypeData} from './configeditor/types/ConfigSchema';
    18| import {FontFamily} from './styles';
    19| type ConfigTypeSchemaTheme = 'dark' | 'light';
    20| export type {TypeData};
    21| interface ConfigTypeSchemaProps {
    22|   type: TypeData;
    23|   typesInScope: TypeData[];
    24|   theme?: ConfigTypeSchemaTheme;
    25|   maxDepth?: number;
    26| }
    27| type renderTypeRecursiveType = ((
    28|   type: TypeData,
    29|   typeLookup: {[typeName: string]: TypeData},
    30|   depth: number,
    31|   props: ConfigTypeSchemaProps,
    32|   typeName?: string,
    33| ) => React.ReactElement<HTMLElement>) &
    34|   ((
    35|     type: TypeData | undefined,
    36|     typeLookup: {[typeName: string]: TypeData},
    37|     depth: number,
    38|     props: ConfigTypeSchemaProps,
    39|     typeName: string,
    40|   ) => React.ReactElement<HTMLElement>);
    41| const renderTypeRecursive: renderTypeRecursiveType = (type, typeLookup, depth, props, typeName) => {
    42|   if (!type) {
    43|     return (
    44|       <span style={{color: colorTextRed(), opacity: 0.8}}>
    45|         type &quot;{typeName}&quot; not found
    46|       </span>
    47|     );
    48|   }
    49|   if (type.__typename === 'CompositeConfigType' && props.maxDepth && depth === props.maxDepth) {
    50|     return <span>...</span>;
    51|   }
    52|   if (type.__typename === 'CompositeConfigType') {
    53|     const innerIndent = '  '.repeat(depth + 1);
    54|     return (
    55|       <>
    56|         {`{`}
    57|         {type.isSelector && (
    58|           <DictBlockComment indent={innerIndent} content="One of the following:" />
    59|         )}
    60|         {type.fields.map((fieldData) => {
    61|           const keyDisplay = (
    62|             <DictKey
    63|               theme={props.theme}
    64|               style={
    65|                 fieldData.defaultValueAsJson
    66|                   ? {borderBottom: `dashed ${colorAccentBlue()} 1px`, cursor: 'pointer'}
    67|                   : undefined
    68|               }
    69|             >
    70|               {fieldData.name}
    71|             </DictKey>
    72|           );
    73|           return (
    74|             <DictEntry key={fieldData.name}>
    75|               <DictBlockComment indent={innerIndent} content={fieldData.description} />
    76|               {innerIndent}
    77|               {fieldData.defaultValueAsJson ? (
    78|                 <Popover
    79|                   popoverClassName="config-tooltip"
    80|                   interactionKind="hover"
    81|                   hoverCloseDelay={100}
    82|                   content={<ConfigContent value={fieldData.defaultValueAsJson} />}
    83|                 >
    84|                   {keyDisplay}
    85|                 </Popover>
    86|               ) : (

# --- HUNK 2: Lines 160-207 ---
   160|     );
   161|   }
   162|   return <span>{type.givenName}</span>;
   163| };
   164| export const tryPrettyPrintJSON = (jsonString: string) => {
   165|   try {
   166|     return JSON.stringify(JSON.parse(jsonString), null, 2);
   167|   } catch (err) {
   168|     return jsonString;
   169|   }
   170| };
   171| const ConfigContent = React.memo(({value}: {value: string}) => (
   172|   <>
   173|     <ConfigHeader>
   174|       <strong>Default value</strong>
   175|     </ConfigHeader>
   176|     <ConfigJSON>{tryPrettyPrintJSON(value)}</ConfigJSON>
   177|   </>
   178| ));
   179| const ConfigHeader = styled.div`
   180|   background-color: ${colorTooltipBackground()};
   181|   color: ${colorTooltipText()};
   182|   font-size: 13px;
   183|   padding: 8px;
   184| `;
   185| const ConfigJSON = styled.pre`
   186|   background-color: ${colorTooltipBackground()};
   187|   color: ${colorTooltipText()};
   188|   whitespace: pre-wrap;
   189|   font-family: ${FontFamily.monospace};
   190|   font-size: 14px;
   191|   padding: 8px;
   192|   margin: 0;
   193| `;
   194| export const ConfigTypeSchema = React.memo((props: ConfigTypeSchemaProps) => {
   195|   const {type, typesInScope} = props;
   196|   const typeLookup: Record<string, TypeData> = {};
   197|   for (const typeInScope of typesInScope) {
   198|     typeLookup[typeInScope.key] = typeInScope;
   199|   }
   200|   return (
   201|     <HoveredDictEntryContextProvider>
   202|       <TypeSchemaContainer>
   203|         <DictBlockComment content={type.description} indent="" />
   204|         {renderTypeRecursive(type, typeLookup, 0, props)}
   205|       </TypeSchemaContainer>
   206|     </HoveredDictEntryContextProvider>
   207|   );

# --- HUNK 3: Lines 267-317 ---
   267|       React.useContext(HoveredDictEntryContext).useDictEntryHover();
   268|     return (
   269|       <DictEntryDiv2>
   270|         <DictEntryDiv
   271|           {...props}
   272|           $hovered={hovered}
   273|           onMouseEnter={onMouseEnter}
   274|           onMouseLeave={onMouseLeave}
   275|           ref={ref}
   276|         />
   277|       </DictEntryDiv2>
   278|     );
   279|   },
   280| );
   281| const DictEntryDiv2 = styled.div``;
   282| const DictEntryDiv = styled.div<{$hovered: boolean}>`
   283|   border: 1px solid transparent;
   284|   ${({$hovered}) =>
   285|     $hovered
   286|       ? `
   287|       border: 1px solid ${colorBorderDefault()};
   288|       background-color: ${colorBackgroundLight()};
   289|       >${DictEntryDiv2} {
   290|         background-color: ${colorBackgroundLighter()};
   291|       }
   292|     `
   293|       : ``}
   294|   }
   295| `;
   296| const TypeSchemaContainer = styled.code`
   297|   color: ${colorTextLighter()};
   298|   display: block;
   299|   white-space: pre-wrap;
   300|   font-size: 14px;
   301|   line-height: 18px;
   302| `;
   303| const DictKey = styled.span<{theme: ConfigTypeSchemaTheme | undefined}>`
   304|   color: ${({theme}) => (theme === 'dark' ? colorAccentReversed() : colorAccentPrimary())};
   305| `;
   306| const DictComment = styled.div`
   307|   /* This allows long comments to wrap as nice indented blocks, while
   308|      copy/pasting as a single line with space-based indentation. */
   309|   text-indent: -1.85em;
   310|   padding-left: 1.85em;
   311|   white-space: initial;
   312| `;
   313| const DictBlockComment = ({indent = '', content}: {indent: string; content: string | null}) =>
   314|   content !== null && content !== '' ? (
   315|     <DictComment>{`${indent.replace(/ /g, '\u00A0')}/* ${content} */`}</DictComment>
   316|   ) : null;
   317| const Optional = <span style={{fontWeight: 500, color: colorAccentYellow()}}>?</span>;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/CustomTooltipProvider.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-23 ---
     1| import React from 'react';
     2| import styled from 'styled-components';
     3| import {colorTooltipBackground, colorTooltipText} from '../theme/color';
     4| export const CustomTooltipProvider = () => {
     5|   const [state, setState] = React.useState<null | {
     6|     title: string;
     7|     style: React.CSSProperties;
     8|   }>(null);
     9|   React.useEffect(() => {
    10|     document.addEventListener('mouseover', (ev) => {
    11|       const el = ev.target;
    12|       if (!(el instanceof Element)) {
    13|         return;
    14|       }
    15|       if (el.getAttribute('id') === 'tooltip-container') {
    16|         return;
    17|       }
    18|       const tooltipParentEl = el.closest('[data-tooltip]') as HTMLElement;
    19|       if (!tooltipParentEl) {
    20|         setState(null);
    21|         return;
    22|       }
    23|       const isOverflowing = tooltipParentEl.offsetWidth < tooltipParentEl.scrollWidth;

# --- HUNK 2: Lines 40-69 ---
    40|       }
    41|       setState({
    42|         title: tooltip!,
    43|         style,
    44|       });
    45|     });
    46|   }, []);
    47|   if (!state) {
    48|     return <span />;
    49|   }
    50|   return (
    51|     <TooltipContainer id="tooltip-container" style={state.style}>
    52|       {state.title}
    53|     </TooltipContainer>
    54|   );
    55| };
    56| const TooltipContainer = styled.div`
    57|   position: absolute;
    58|   top: 0;
    59|   left: 0;
    60|   font-size: 12px;
    61|   padding: 4px 6px;
    62|   color: ${colorTooltipText()};
    63|   background: ${colorTooltipBackground()};
    64|   transform: translate(5px, 5px);
    65|   box-shadow: 1px 1px 3px ${colorTooltipBackground()};
    66|   z-index: 100;
    67|   pointer-events: none;
    68|   user-select: none;
    69| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/DagsterCodeMirrorStyle.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-125 ---
     1| import {createGlobalStyle} from 'styled-components';
     2| import {
     3|   colorAccentRed,
     4|   colorBorderDefault,
     5|   colorBackgroundDefault,
     6|   colorBackgroundBlue,
     7|   colorBackgroundCyan,
     8|   colorBackgroundGray,
     9|   colorBackgroundGreen,
    10|   colorBackgroundOlive,
    11|   colorBackgroundRed,
    12|   colorBackgroundYellow,
    13|   colorTextLight,
    14|   colorTextBlue,
    15|   colorTextCyan,
    16|   colorTextGreen,
    17|   colorTextRed,
    18|   colorTextYellow,
    19|   colorTextDefault,
    20|   colorBackgroundLight,
    21|   colorBackgroundBlueHover,
    22| } from '../theme/color';
    23| import {Icons} from './Icon';
    24| import {FontFamily} from './styles';
    25| export const DagsterCodeMirrorStyle = createGlobalStyle`
    26|   .CodeMirror-gutter-elt {
    27|     .CodeMirror-lint-marker-error {
    28|       background-image: none;
    29|       background: ${colorAccentRed()};
    30|       mask-image: url(${Icons.error});
    31|       mask-size: cover;
    32|       margin-bottom: 2px;
    33|     }
    34|   }
    35|   .CodeMirror-cursor {
    36|     border-color: ${colorTextLight()};
    37|   }
    38|   .CodeMirror-hint,
    39|   .CodeMirror-lint-marker-error,
    40|   .CodeMirror-lint-marker-warning,
    41|   .CodeMirror-lint-message-error,
    42|   .CodeMirror-lint-message-warning {
    43|     font-family: ${FontFamily.monospace};
    44|     font-size: 16px;
    45|   }
    46|   .CodeMirror.cm-s-dagster {
    47|     background-color: ${colorBackgroundLight()};
    48|     color: ${colorTextDefault()};
    49|     font-family: ${FontFamily.monospace};
    50|     font-size: 16px;
    51|     /* Note: Theme overrides */
    52|     &.cm-s-default .cm-comment {
    53|       color: ${colorTextLight()};
    54|     }
    55|     .cm-atom {
    56|       color: ${colorTextBlue()};
    57|     }
    58|     .cm-comment {
    59|       color: ${colorTextLight()};
    60|     }
    61|     .cm-meta {
    62|       color: ${colorTextLight()};
    63|     }
    64|     .cm-number {
    65|       color: ${colorTextRed()};
    66|     }
    67|     .cm-string {
    68|       color: ${colorTextGreen()};
    69|     }
    70|     .cm-string-2 {
    71|       color: ${colorTextCyan()};
    72|     }
    73|     .cm-variable-2 {
    74|       color: ${colorTextBlue()};
    75|     }
    76|     .cm-keyword {
    77|       color: ${colorTextYellow()};
    78|     }
    79|     .CodeMirror-selected {
    80|       background-color: ${colorBackgroundBlueHover()};
    81|     }
    82|     .CodeMirror-gutters {
    83|       background-color: ${colorBackgroundDefault()};
    84|       opacity: 0.6;
    85|     }
    86|     .cm-indent {
    87|       display: inline-block;
    88|       &.cm-zero {
    89|         box-shadow: -1px 0 0 ${colorBackgroundGreen()};
    90|       }
    91|       &.cm-one {
    92|         box-shadow: -1px 0 0 ${colorBackgroundBlue()};
    93|       }
    94|       &.cm-two {
    95|         box-shadow: -1px 0 0 ${colorBackgroundCyan()};
    96|       }
    97|       &.cm-three {
    98|         box-shadow: -1px 0 0 ${colorBackgroundRed()};
    99|       }
   100|       &.cm-four {
   101|         box-shadow: -1px 0 0 ${colorBackgroundYellow()};
   102|       }
   103|       &.cm-five {
   104|         box-shadow: -1px 0 0 ${colorBackgroundOlive()};
   105|       }
   106|       &.cm-six {
   107|         box-shadow: -1px 0 0 ${colorBackgroundGray()};
   108|       }
   109|     }
   110|   }
   111|   div.CodeMirror-lint-tooltip {
   112|     background: ${colorBackgroundDefault()};
   113|     border: 1px solid ${colorBorderDefault()};
   114|   }
   115|   .CodeMirror-lint-message {
   116|     background: transparent;
   117|   }
   118|   .CodeMirror-lint-message.CodeMirror-lint-message-error {
   119|     background: transparent;
   120|   }
   121|   /* Ensure that hints aren't vertically cutoff*/
   122|   .CodeMirror-hint div {
   123|     max-height: none !important;
   124|   }
   125| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Dialog.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-117 ---
     1| import {Dialog as BlueprintDialog} from '@blueprintjs/core';
     2| import * as React from 'react';
     3| import styled, {createGlobalStyle} from 'styled-components';
     4| import {colorAccentPrimary, colorBackgroundDefault, colorDialogBackground} from '../theme/color';
     5| import {Box} from './Box';
     6| import {ErrorBoundary} from './ErrorBoundary';
     7| import {Group} from './Group';
     8| import {IconName, Icon} from './Icon';
     9| interface Props
    10|   extends Omit<
    11|     React.ComponentProps<typeof BlueprintDialog>,
    12|     'title' | 'icon' | 'backdropClassName'
    13|   > {
    14|   children: React.ReactNode;
    15|   title?: React.ReactNode;
    16|   icon?: IconName;
    17| }
    18| export const Dialog = (props: Props) => {
    19|   const {icon, title, children, ...rest} = props;
    20|   return (
    21|     <BlueprintDialog
    22|       {...rest}
    23|       portalClassName="dagster-portal"
    24|       backdropClassName="dagster-backdrop"
    25|       className="dagster-dialog"
    26|     >
    27|       {title ? <DialogHeader icon={icon} label={title} /> : null}
    28|       <ErrorBoundary region="dialog">{children}</ErrorBoundary>
    29|     </BlueprintDialog>
    30|   );
    31| };
    32| interface HeaderProps {
    33|   icon?: IconName;
    34|   label: React.ReactNode;
    35| }
    36| export const DialogHeader = (props: HeaderProps) => {
    37|   const {icon, label} = props;
    38|   return (
    39|     <Box
    40|       background={colorBackgroundDefault()}
    41|       padding={{vertical: 16, horizontal: 20}}
    42|       border="bottom"
    43|     >
    44|       <Group direction="row" spacing={8} alignItems="center">
    45|         {icon ? <Icon name={icon} color={colorAccentPrimary()} /> : null}
    46|         <DialogHeaderText>{label}</DialogHeaderText>
    47|       </Group>
    48|     </Box>
    49|   );
    50| };
    51| interface BodyProps {
    52|   children: React.ReactNode;
    53| }
    54| export const DialogBody = ({children, ...rest}: BodyProps) => {
    55|   return (
    56|     <Box padding={{vertical: 16, horizontal: 20}} background={colorBackgroundDefault()} {...rest}>
    57|       {children}
    58|     </Box>
    59|   );
    60| };
    61| interface DialogFooterProps {
    62|   children: React.ReactNode;
    63|   topBorder?: boolean;
    64|   left?: React.ReactNode;
    65| }
    66| export const DialogFooter = ({children, left, topBorder}: DialogFooterProps) => {
    67|   return (
    68|     <Box
    69|       padding={{bottom: 16, top: topBorder ? 16 : 8, horizontal: 20}}
    70|       border={topBorder ? 'top' : null}
    71|       background={colorBackgroundDefault()}
    72|       flex={{direction: 'row', alignItems: 'center', justifyContent: 'space-between'}}
    73|     >
    74|       <div>{left}</div>
    75|       <Box flex={{direction: 'row', alignItems: 'center', gap: 12}}>{children}</Box>
    76|     </Box>
    77|   );
    78| };
    79| export const DialogHeaderText = styled.div`
    80|   font-size: 16px;
    81|   font-weight: 500;
    82|   overflow: hidden;
    83|   text-overflow: ellipsis;
    84|   white-space: nowrap;
    85|   width: 100%;
    86| `;
    87| export const GlobalDialogStyle = createGlobalStyle`
    88|   .dagster-portal .bp4-overlay-backdrop {
    89|     background-color: ${colorDialogBackground()};
    90|   }
    91|   .dagster-portal .bp4-dialog-container {
    92|     display: grid;
    93|     grid-template-rows: minmax(40px, 1fr) auto minmax(40px, 2fr);
    94|     grid-template-columns: 40px 8fr 40px;
    95|   }
    96|   .dagster-portal .bp4-dialog {
    97|     background-color: ${colorBackgroundDefault()};
    98|     border-radius: 4px;
    99|     box-shadow: rgba(0, 0, 0, 0.12) 0px 2px 12px;
   100|     grid-row: 2;
   101|     grid-column: 2;
   102|     margin: 0 auto;
   103|     overflow: hidden;
   104|     padding: 0;
   105|   }
   106|   .dagster-portal .bp4-dialog > :first-child {
   107|     border-top-left-radius: 4px;
   108|     border-top-right-radius: 4px;
   109|   }
   110|   .dagster-portal .bp4-dialog > :last-child {
   111|     border-bottom-right-radius: 4px;
   112|     border-bottom-left-radius: 4px;
   113|   }
   114|   .dagster-portal .bp4-dialog-container.bp4-overlay-enter > .bp4-dialog,
   115|   .dagster-portal .bp4-dialog-container.bp4-overlay-appear > .bp4-dialog {
   116|     opacity: 0;
   117|     transform:scale(0.95);


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/ErrorBoundary.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-24 ---
     1| import React from 'react';
     2| import styled from 'styled-components';
     3| import {colorAccentRed, colorTextLight} from '../theme/color';
     4| import {Box} from './Box';
     5| import {Body, Subheading} from './Text';
     6| import {FontFamily} from './styles';
     7| export type ErrorCollectionContextValue = {
     8|   errorStackIncluded: boolean;
     9|   errorCollectionMessage: string;
    10|   onReportError: (error: Error, context: Record<string, any>) => void;
    11| };
    12| export const ErrorCollectionContext = React.createContext<ErrorCollectionContextValue>({
    13|   errorStackIncluded: true,
    14|   errorCollectionMessage:
    15|     `Please report this error to the Dagster team via GitHub or Slack. ` +
    16|     `Refresh the page to try again.`,
    17|   onReportError: (error, context) => {
    18|     console.error(error, context);
    19|   },
    20| });
    21| interface ErrorBoundaryProps {
    22|   children: React.ReactNode;
    23|   region: string;
    24|   resetErrorOnChange?: any[];

# --- HUNK 2: Lines 36-75 ---
    36|       this.state.errorResetPropsValue !== JSON.stringify(this.props.resetErrorOnChange)
    37|     ) {
    38|       this.setState({error: null, errorResetPropsValue: null});
    39|     }
    40|   }
    41|   componentDidCatch(error: Error, info: any) {
    42|     (this.context as ErrorCollectionContextValue).onReportError(error, {
    43|       info,
    44|       region: this.props.region,
    45|     });
    46|     this.setState({error, errorResetPropsValue: JSON.stringify(this.props.resetErrorOnChange)});
    47|   }
    48|   render() {
    49|     const {error} = this.state;
    50|     const {errorCollectionMessage, errorStackIncluded} = this
    51|       .context as ErrorCollectionContextValue;
    52|     if (error) {
    53|       return (
    54|         <Box
    55|           style={{width: '100%', height: '100%', flex: 1, overflow: 'hidden'}}
    56|           border={{side: 'all', color: colorAccentRed()}}
    57|           flex={{direction: 'column', gap: 8}}
    58|           padding={16}
    59|         >
    60|           <Subheading>Sorry, {this.props.region} can&apos;t be displayed.</Subheading>
    61|           <Body color={colorTextLight()}>{errorCollectionMessage}</Body>
    62|           {errorStackIncluded && <Trace>{`${error.message}\n\n${error.stack}`}</Trace>}
    63|         </Box>
    64|       );
    65|     }
    66|     return this.props.children;
    67|   }
    68| }
    69| const Trace = styled.div`
    70|   color: ${colorTextLight()};
    71|   font-family: ${FontFamily.monospace};
    72|   font-size: 1em;
    73|   white-space: pre;
    74|   padding-bottom: 1em;
    75| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Icon.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 134-174 ---
   134| import toggle_off from '../icon-svgs/toggle_off.svg';
   135| import toggle_on from '../icon-svgs/toggle_on.svg';
   136| import toggle_whitespace from '../icon-svgs/toggle_whitespace.svg';
   137| import tune from '../icon-svgs/tune.svg';
   138| import unfold_less from '../icon-svgs/unfold_less.svg';
   139| import unfold_more from '../icon-svgs/unfold_more.svg';
   140| import vertical_align_bottom from '../icon-svgs/vertical_align_bottom.svg';
   141| import vertical_align_center from '../icon-svgs/vertical_align_center.svg';
   142| import vertical_align_top from '../icon-svgs/vertical_align_top.svg';
   143| import view_list from '../icon-svgs/view_list.svg';
   144| import visibility from '../icon-svgs/visibility.svg';
   145| import visibility_off from '../icon-svgs/visibility_off.svg';
   146| import warning from '../icon-svgs/warning.svg';
   147| import warning_outline from '../icon-svgs/warning_outline.svg';
   148| import waterfall_chart from '../icon-svgs/waterfall_chart.svg';
   149| import workspaces from '../icon-svgs/workspaces.svg';
   150| import wysiwyg from '../icon-svgs/wysiwyg.svg';
   151| import youtube from '../icon-svgs/youtube.svg';
   152| import zoom_in from '../icon-svgs/zoom_in.svg';
   153| import zoom_out from '../icon-svgs/zoom_out.svg';
   154| import {colorAccentPrimary} from '../theme/color';
   155| export const Icons = {
   156|   auto_materialize_policy,
   157|   auto_observe,
   158|   asset,
   159|   asset_check,
   160|   asset_plot,
   161|   asset_non_sda,
   162|   asset_group,
   163|   backfill,
   164|   badge,
   165|   date,
   166|   expectation,
   167|   execute,
   168|   materialization,
   169|   observation,
   170|   job,
   171|   op,
   172|   op_selector,
   173|   op_dynamic: bolt,
   174|   partition_set: schedule,

# --- HUNK 2: Lines 311-352 ---
   311|   vertical_align_top,
   312|   wysiwyg,
   313|   zoom_in,
   314|   zoom_out,
   315| } as const;
   316| const SVGS_WITH_COLORS = new Set([(slack as any).src]);
   317| export type IconName = keyof typeof Icons;
   318| const rotations: {[key in IconName]?: string} = {
   319|   waterfall_chart: '-90deg',
   320| };
   321| export const IconNames = Object.keys(Icons) as IconName[];
   322| interface Props {
   323|   color?: string;
   324|   name: IconName;
   325|   size?: 12 | 16 | 20 | 24 | 48;
   326|   style?: React.CSSProperties;
   327| }
   328| export const Icon = React.memo((props: Props) => {
   329|   const {name, size = 16, style} = props;
   330|   const img = typeof Icons[name] === 'string' ? (Icons[name] as any) : Icons[name].src;
   331|   const color: string | null =
   332|     props.color || (SVGS_WITH_COLORS.has(img) ? null : colorAccentPrimary());
   333|   return (
   334|     <IconWrapper
   335|       role="img"
   336|       $size={size}
   337|       $img={img}
   338|       $color={color}
   339|       $rotation={rotations[name] || null}
   340|       aria-label={name}
   341|       style={style}
   342|     />
   343|   );
   344| });
   345| interface WrapperProps {
   346|   $color: string | null;
   347|   $size: number;
   348|   $img: string;
   349|   $rotation: string | null;
   350| }
   351| export const IconWrapper = styled.div<WrapperProps>`
   352|   width: ${(p) => p.$size}px;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/LegacyColors.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-45 ---
     1| export const LegacyColors = {
     2|   Dark: 'rgba(23, 22, 21, 1)',
     3|   Gray900: 'rgba(35, 31, 27, 1)',
     4|   Gray800: 'rgba(58, 54, 49, 1)',
     5|   Gray700: 'rgba(82, 78, 72, 1)',
     6|   Gray600: 'rgba(107, 103, 98, 1)',
     7|   Gray500: 'rgba(134, 131, 127, 1)',
     8|   Gray400: 'rgba(161, 157, 153, 1)',
     9|   Gray300: 'rgba(189, 186, 183, 1)',
    10|   Gray200: 'rgba(218, 216, 214, 1)',
    11|   Gray100: 'rgba(245, 244, 242, 1)',
    12|   Gray50: 'rgba(250, 249, 247, 1)',
    13|   KeylineGray: 'rgba(233, 232, 232, 1)',
    14|   WashGray: 'rgba(0, 0, 0, .35)',
    15|   Gray10: 'rgba(35, 31, 27, 0.03)',
    16|   White: 'rgba(255, 255, 255, 1)',
    17|   LightPurple: 'rgba(222, 221, 255, 1)',
    18|   Link: 'rgba(9, 8, 110, 1)',
    19|   Blue700: 'rgba(14, 12, 167, 1)',
    20|   Blue500: 'rgba(79, 67, 221, 1)',
    21|   Blue200: 'rgba(185, 180, 241, 1)',
    22|   Blue100: 'rgba(211, 209,237,1)',
    23|   Blue50: 'rgba(236, 236, 248, 1)',
    24|   Red700: 'rgba(165, 9, 6, 1)',
    25|   Red500: 'rgba(221, 84, 72, 1)',
    26|   Red200: 'rgba(241, 187, 182, 1)',
    27|   Red100: 'rgba(248, 236, 235, 1)',
    28|   Red50: 'rgba(248, 236, 235, 1)',
    29|   HighlightRed: 'rgba(255, 128, 100, 1)',
    30|   Yellow700: 'rgba(165, 88, 2, 1)',
    31|   Yellow500: 'rgba(252, 188, 65, 1)',
    32|   Yellow200: 'rgba(251, 233, 181, 1)',
    33|   Yellow50: 'rgba(248, 242, 235, 1)',
    34|   ForestGreen: 'rgba(33, 70, 61, 1)',
    35|   Green700: 'rgba(18, 117, 75, 1)',
    36|   Green500: 'rgba(73, 193, 136, 1)',
    37|   Green200: 'rgba(200, 236, 219, 1)',
    38|   Green50: 'rgba(236, 244, 241, 1)',
    39|   NeonGreen: 'rgba(167, 255, 191, 1)',
    40|   HighlightGreen: 'rgba(81, 233, 124, 1)',
    41|   Olive700: 'rgba(72, 82, 69, 1)',
    42|   Olive500: 'rgba(156, 172, 151, 1)',
    43|   Olive200: 'rgba(215, 222, 213, 1)',
    44|   Olive50: 'rgba(236, 237, 236, 1)',
    45| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Menu.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-76 ---
     1| /* eslint-disable no-restricted-imports */
     2| import {
     3|   Intent,
     4|   Menu as BlueprintMenu,
     5|   MenuDivider as BlueprintMenuDivider,
     6|   MenuItem as BlueprintMenuItem,
     7| } from '@blueprintjs/core';
     8| import * as React from 'react';
     9| import styled from 'styled-components';
    10| import {
    11|   colorAccentBlue,
    12|   colorAccentGray,
    13|   colorAccentGreen,
    14|   colorAccentRed,
    15|   colorAccentYellow,
    16|   colorKeylineDefault,
    17|   colorTextDefault,
    18|   colorTextLight,
    19|   colorPopoverBackground,
    20|   colorPopoverBackgroundHover,
    21|   colorBackgroundBlue,
    22|   colorFocusRing,
    23| } from '../theme/color';
    24| import {IconName, Icon, IconWrapper} from './Icon';
    25| interface Props extends React.ComponentProps<typeof BlueprintMenu> {}
    26| export const Menu = (props: Props) => {
    27|   return <StyledMenu {...props} />;
    28| };
    29| const intentToTextColor = (intent: React.ComponentProps<typeof BlueprintMenuItem>['intent']) => {
    30|   switch (intent) {
    31|     case 'primary':
    32|       return colorAccentBlue();
    33|     case 'danger':
    34|       return colorAccentRed();
    35|     case 'success':
    36|       return colorAccentGreen();
    37|     case 'warning':
    38|       return colorAccentYellow();
    39|     case 'none':
    40|     default:
    41|       return colorTextDefault();
    42|   }
    43| };
    44| const intentToIconColor = (intent: React.ComponentProps<typeof BlueprintMenuItem>['intent']) => {
    45|   switch (intent) {
    46|     case 'primary':
    47|       return colorAccentBlue();
    48|     case 'danger':
    49|       return colorAccentRed();
    50|     case 'success':
    51|       return colorAccentGreen();
    52|     case 'warning':
    53|       return colorAccentYellow();
    54|     case 'none':
    55|     default:
    56|       return colorAccentGray();
    57|   }
    58| };
    59| export const iconWithColor = (icon?: IconName | JSX.Element, intent?: Intent) => {
    60|   if (icon) {
    61|     if (typeof icon === 'string') {
    62|       return <Icon name={icon} color={intentToIconColor(intent)} />;
    63|     }
    64|     return icon;
    65|   }
    66|   return null;
    67| };
    68| export interface CommonMenuItemProps {
    69|   icon?: IconName | JSX.Element;
    70| }
    71| interface ItemProps
    72|   extends CommonMenuItemProps,
    73|     Omit<React.ComponentProps<typeof BlueprintMenuItem>, 'href' | 'icon'> {}
    74| export const MenuItem = (props: ItemProps) => {
    75|   const {icon, intent, ...rest} = props;
    76|   return (

# --- HUNK 2: Lines 86-170 ---
    86|   extends CommonMenuItemProps,
    87|     Omit<React.ComponentProps<typeof BlueprintMenuItem>, 'href' | 'icon'> {
    88|   href: string;
    89| }
    90| /**
    91|  * If you want to use a menu item as a link, use `MenuLink` and provide a `to` prop.
    92|  */
    93| export const MenuExternalLink = (props: MenuExternalLinkProps) => {
    94|   const {icon, intent = 'none', ...rest} = props;
    95|   return (
    96|     <StyledMenuItem
    97|       {...rest}
    98|       target="_blank"
    99|       rel="noreferrer nofollow"
   100|       $textColor={intentToTextColor(intent)}
   101|       icon={iconWithColor(icon, intent)}
   102|     />
   103|   );
   104| };
   105| export const MenuDivider = styled(BlueprintMenuDivider)`
   106|   border-top: 1px solid ${colorKeylineDefault()};
   107|   margin: 2px 0;
   108|   :focus {
   109|     outline: none;
   110|   }
   111|   && h6 {
   112|     color: ${colorTextLight()};
   113|     padding: 8px 6px 2px;
   114|     font-size: 12px;
   115|     font-weight: 300;
   116|     user-select: none;
   117|   }
   118| `;
   119| const StyledMenu = styled(BlueprintMenu)`
   120|   background-color: ${colorPopoverBackground()};
   121|   border-radius: 4px;
   122|   padding: 8px 4px;
   123| `;
   124| interface StyledMenuItemProps extends React.ComponentProps<typeof BlueprintMenuItem> {
   125|   $textColor: string;
   126| }
   127| const StyledMenuItem = styled(BlueprintMenuItem)<StyledMenuItemProps>`
   128|   border-radius: 4px;
   129|   color: ${({$textColor}) => $textColor};
   130|   line-height: 20px;
   131|   padding: 6px 8px 6px 12px;
   132|   transition:
   133|     background-color 50ms,
   134|     box-shadow 150ms;
   135|   align-items: flex-start;
   136|   font-size: 14px;
   137|   /**
   138|    * Use margin instead of align-items: center because the contents of the menu item may wrap 
   139|    * in unusual circumstances.
   140|    */
   141|   ${IconWrapper} {
   142|     margin-top: 2px;
   143|   }
   144|   &.bp4-active,
   145|   &.bp4-active:hover {
   146|     background-color: ${colorBackgroundBlue()};
   147|     color: ${colorTextDefault()};
   148|     ${IconWrapper} {
   149|       background-color: ${colorTextDefault()};
   150|     }
   151|   }
   152|   &.bp4-disabled ${IconWrapper} {
   153|     opacity: 0.5;
   154|   }
   155|   &.bp4-active ${IconWrapper} {
   156|     color: ${colorTextDefault()};
   157|   }
   158|   ${IconWrapper}:first-child {
   159|     margin-left: -4px;
   160|   }
   161|   &:hover {
   162|     background: ${colorPopoverBackgroundHover()};
   163|     color: ${({$textColor}) => $textColor};
   164|   }
   165|   &:focus {
   166|     color: ${({$textColor}) => $textColor};
   167|     box-shadow: ${colorFocusRing()} 0 0 0 2px;
   168|     outline: none;
   169|   }
   170| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/MetadataTable.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-24 ---
     1| import * as React from 'react';
     2| import styled from 'styled-components';
     3| import {colorTextDefault, colorTextLight} from '../theme/color';
     4| import {Box} from './Box';
     5| import {Table, TableProps} from './Table';
     6| export type MetadataTableRow = {key: string; label?: React.ReactNode; value: React.ReactNode};
     7| interface Props {
     8|   dark?: boolean;
     9|   rows: (MetadataTableRow | null | undefined)[];
    10|   spacing: 0 | 2 | 4;
    11| }
    12| export const MetadataTable = (props: Props) => {
    13|   const {rows, spacing, dark = false} = props;
    14|   return (
    15|     <StyledTable>
    16|       <tbody>
    17|         {rows.map((pair: MetadataTableRow | null | undefined) => {
    18|           if (!pair) {
    19|             return null;
    20|           }
    21|           const {key, label, value} = pair;
    22|           return (
    23|             <tr key={key}>
    24|               <td>

# --- HUNK 2: Lines 32-65 ---
    32|             </tr>
    33|           );
    34|         })}
    35|       </tbody>
    36|     </StyledTable>
    37|   );
    38| };
    39| MetadataTable.defaultProps = {
    40|   spacing: 4,
    41| };
    42| export const StyledTable = styled.table`
    43|   border-spacing: 0;
    44|   td {
    45|     vertical-align: top;
    46|   }
    47|   td .bp4-control {
    48|     margin-bottom: 0;
    49|   }
    50| `;
    51| const MetadataKey = styled.div<{$dark: boolean}>`
    52|   color: ${({$dark}) => ($dark ? colorTextDefault() : colorTextLight())};
    53|   font-weight: 400;
    54| `;
    55| export const MetadataTableWIP = styled(Table)<TableProps>`
    56|   td:first-child {
    57|     white-space: nowrap;
    58|     width: 1px;
    59|     max-width: 400px;
    60|     word-break: break-word;
    61|     overflow: hidden;
    62|     padding-right: 24px;
    63|     text-overflow: ellipsis;
    64|   }
    65| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/NewConfigEditor.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-74 ---
     1| import 'codemirror/addon/comment/comment';
     2| import 'codemirror/addon/dialog/dialog';
     3| import 'codemirror/addon/fold/foldgutter';
     4| import 'codemirror/addon/fold/foldgutter.css';
     5| import 'codemirror/addon/fold/indent-fold';
     6| import 'codemirror/addon/hint/show-hint';
     7| import 'codemirror/addon/hint/show-hint.css';
     8| import 'codemirror/addon/lint/lint.css';
     9| import 'codemirror/addon/search/jump-to-line';
    10| import 'codemirror/addon/search/search';
    11| import 'codemirror/addon/search/searchcursor';
    12| import 'codemirror/keymap/sublime';
    13| import debounce from 'lodash/debounce';
    14| import * as React from 'react';
    15| import {createGlobalStyle} from 'styled-components';
    16| import * as yaml from 'yaml';
    17| import {colorBackgroundLight} from '../theme/color';
    18| import {StyledRawCodeMirror} from './StyledRawCodeMirror';
    19| import {patchLint} from './configeditor/codemirror-yaml/lint';
    20| import {
    21|   YamlModeValidateFunction,
    22|   expandAutocompletionContextAtCursor,
    23|   findRangeInDocumentFromPath,
    24|   YamlModeValidationResult,
    25| } from './configeditor/codemirror-yaml/mode';
    26| import {ConfigEditorHelpContext} from './configeditor/types/ConfigEditorHelpContext';
    27| import {ConfigSchema} from './configeditor/types/ConfigSchema';
    28| export {isHelpContextEqual} from './configeditor/isHelpContextEqual';
    29| export {ConfigEditorHelp} from './configeditor/ConfigEditorHelp';
    30| export type {ConfigEditorHelpContext, ConfigSchema, YamlModeValidationResult};
    31| patchLint();
    32| interface ConfigEditorProps {
    33|   configCode: string;
    34|   readOnly: boolean;
    35|   configSchema?: ConfigSchema | null;
    36|   checkConfig: YamlModeValidateFunction;
    37|   onConfigChange: (newValue: string) => void;
    38|   onHelpContextChange: (helpContext: ConfigEditorHelpContext | null) => void;
    39| }
    40| const AUTO_COMPLETE_AFTER_KEY = /^[a-zA-Z0-9_@(]$/;
    41| const performLint = debounce((editor: any) => {
    42|   editor.performLint();
    43| }, 1000);
    44| const performInitialPass = (
    45|   editor: CodeMirror.Editor,
    46|   onHelpContextChange: (helpContext: ConfigEditorHelpContext | null) => void,
    47| ) => {
    48|   performLint(editor);
    49|   const {context} = expandAutocompletionContextAtCursor(editor);
    50|   onHelpContextChange(context ? {type: context.closestMappingType} : null);
    51| };
    52| const ConfigEditorStyle = createGlobalStyle`
    53|   .CodeMirror.cm-s-config-editor {
    54|     background-color: ${colorBackgroundLight()};
    55|     height: initial;
    56|     position: absolute;
    57|     inset: 0;
    58|   }
    59| `;
    60| export type ConfigEditorHandle = {
    61|   moveCursor: (line: number, ch: number) => void;
    62|   moveCursorToPath: (path: string[]) => void;
    63| };
    64| export const NewConfigEditor = React.forwardRef<ConfigEditorHandle, ConfigEditorProps>(
    65|   (props, ref) => {
    66|     const {configCode, checkConfig, readOnly, configSchema, onConfigChange, onHelpContextChange} =
    67|       props;
    68|     const editor = React.useRef<CodeMirror.Editor | null>(null);
    69|     React.useImperativeHandle(
    70|       ref,
    71|       () => {
    72|         const moveCursor = (line: number, ch: number) => {
    73|           if (!editor.current) {
    74|             return;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/NonIdealState.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-59 ---
     1| import * as React from 'react';
     2| import {colorAccentGray, colorBackgroundLight, colorTextDefault} from '../theme/color';
     3| import {Box} from './Box';
     4| import {IconName, Icon} from './Icon';
     5| import {Spinner} from './Spinner';
     6| import {Subheading} from './Text';
     7| export type NonIdealStateProps = React.DetailedHTMLProps<
     8|   React.InputHTMLAttributes<HTMLInputElement>,
     9|   HTMLInputElement
    10| > & {
    11|   icon?: 'error' | 'no-results' | 'spinner' | IconName;
    12|   title: string;
    13|   description?: React.ReactNode;
    14|   action?: React.ReactNode;
    15|   shrinkable?: boolean;
    16| };
    17| export const NonIdealState = ({
    18|   title,
    19|   description,
    20|   icon,
    21|   action,
    22|   shrinkable,
    23| }: NonIdealStateProps) => {
    24|   const singleContentElement = [title, description, action].filter(Boolean).length === 1;
    25|   return (
    26|     <Box
    27|       flex={{gap: 20, alignItems: singleContentElement ? 'center' : 'flex-start'}}
    28|       background={colorBackgroundLight()}
    29|       padding={24}
    30|       style={{
    31|         margin: 'auto',
    32|         borderRadius: 8,
    33|         width: shrinkable ? 'initial' : 'max-content',
    34|         maxWidth: 500,
    35|       }}
    36|     >
    37|       {icon === 'spinner' ? (
    38|         <Spinner purpose="section" />
    39|       ) : icon === 'no-results' ? (
    40|         <Icon name="search" size={48} color={colorAccentGray()} />
    41|       ) : icon ? (
    42|         <Icon name={icon} size={48} color={colorAccentGray()} />
    43|       ) : null}
    44|       <Box
    45|         flex={{
    46|           gap: 8,
    47|           direction: 'column',
    48|           alignItems: 'flex-start',
    49|           shrink: 1,
    50|           grow: 1,
    51|         }}
    52|       >
    53|         {title && <Subheading style={{color: colorTextDefault()}}>{title}</Subheading>}
    54|         {description && <div style={{color: colorTextDefault()}}>{description}</div>}
    55|         {action}
    56|       </Box>
    57|     </Box>
    58|   );
    59| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/PageHeader.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-42 ---
     1| import * as React from 'react';
     2| import styled from 'styled-components';
     3| import {colorBackgroundLight} from '../theme/color';
     4| import {Box} from './Box';
     5| import {IconName} from './Icon';
     6| interface Props {
     7|   title: React.ReactNode;
     8|   tags?: React.ReactNode;
     9|   icon?: IconName;
    10|   description?: React.ReactNode;
    11|   metadata?: React.ReactNode;
    12|   right?: React.ReactNode;
    13|   tabs?: React.ReactNode;
    14| }
    15| export const PageHeader = (props: Props) => {
    16|   const {title, tags, right, tabs} = props;
    17|   return (
    18|     <PageHeaderContainer
    19|       background={colorBackgroundLight()}
    20|       padding={{top: 16, left: 24, right: 12}}
    21|       border="bottom"
    22|     >
    23|       <Box flex={{direction: 'row', justifyContent: 'space-between'}} padding={{bottom: 16}}>
    24|         <Box flex={{direction: 'row', alignItems: 'center', gap: 12, wrap: 'wrap'}}>
    25|           {title}
    26|           {tags}
    27|         </Box>
    28|         {right}
    29|       </Box>
    30|       {tabs}
    31|     </PageHeaderContainer>
    32|   );
    33| };
    34| const PageHeaderContainer = styled(Box)`
    35|   width: 100%;
    36|   /**
    37|    * Blueprint breadcrumbs annoyingly have a built-in height.
    38|    */
    39|   .bp4-breadcrumbs {
    40|     height: auto;
    41|   }
    42| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Popover.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-89 ---
     1| /* eslint-disable @typescript-eslint/no-var-requires */
     2| import {Popover2, Popover2Props} from '@blueprintjs/popover2';
     3| import deepmerge from 'deepmerge';
     4| import * as React from 'react';
     5| import {createGlobalStyle} from 'styled-components';
     6| import searchSVG from '../icon-svgs/search.svg';
     7| import {
     8|   colorAccentGray,
     9|   colorBorderDefault,
    10|   colorKeylineDefault,
    11|   colorTextDefault,
    12|   colorTextDisabled,
    13|   colorPopoverBackground,
    14| } from '../theme/color';
    15| import {FontFamily} from './styles';
    16| export const GlobalPopoverStyle = createGlobalStyle`
    17|   .dagster-popover.bp4-popover2,
    18|   .dagster-popover.bp4-popover {
    19|     box-shadow: rgba(0, 0, 0, 0.18) 0px 2px 12px;
    20|   }
    21|   .dagster-popover .bp4-popover2-content,
    22|   .dagster-popover .bp4-popover-content {
    23|     background-color: ${colorPopoverBackground()};
    24|     border-radius: 4px;
    25|     .bp4-menu {
    26|       background-color: ${colorPopoverBackground()};
    27|       color: ${colorTextDefault()};
    28|     }
    29|     .bp4-input-group {
    30|       .bp4-icon.bp4-icon-search {
    31|         width: 16px;
    32|         height: 16px;
    33|         background: ${colorAccentGray()};
    34|         mask-image: url(${searchSVG.src});
    35|         mask-size: cover;
    36|         &::before { 
    37|           content: '';
    38|         }
    39|         svg {
    40|           display: none;
    41|         }
    42|       }
    43|       .bp4-input {
    44|         background-color: ${colorPopoverBackground()};
    45|         border: none;
    46|         border-radius: 8px;
    47|         box-shadow: ${colorBorderDefault()} inset 0px 0px 0px 1px, ${colorKeylineDefault()} inset 2px 2px 1.5px;
    48|         color: ${colorTextDefault()};
    49|         font-family: ${FontFamily.default};
    50|         ::placeholder {
    51|           color: ${colorTextDisabled()};
    52|         }
    53|       }
    54|     }
    55|   }
    56|   .dagster-popover .bp4-popover2-content > :first-child {
    57|     border-top-left-radius: 4px;
    58|     border-top-right-radius: 4px;
    59|   }
    60|   .dagster-popover .bp4-popover2-content > :last-child {
    61|     border-bottom-left-radius: 4px;
    62|     border-bottom-right-radius: 4px;
    63|   }
    64|   .dagster-popover .bp4-popover2-arrow-fill {
    65|     fill: ${colorPopoverBackground()};
    66|   }
    67|   .dagster-popover .bp4-popover2.bp4-dark .bp4-popover2-content,
    68|   .bp4-dark .dagster-popover .bp4-popover2 .bp4-popover2-content {
    69|     background-color: ${colorPopoverBackground()};
    70|   }
    71| `;
    72| const overwriteMerge = (destination: any[], source: any[]) => source;
    73| interface Props extends Popover2Props {
    74|   children: React.ReactNode;
    75| }
    76| export const Popover = (props: Props) => {
    77|   return (
    78|     <Popover2
    79|       minimal
    80|       autoFocus={false}
    81|       {...props}
    82|       popoverClassName={`dagster-popover ${props.popoverClassName}`}
    83|       modifiers={deepmerge(
    84|         {offset: {enabled: true, options: {offset: [0, 8]}}},
    85|         props.modifiers || {},
    86|         {arrayMerge: overwriteMerge},
    87|       )}
    88|     />
    89|   );


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/ProductTour.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-26 ---
     1| import {Placement} from '@blueprintjs/popover2';
     2| import React from 'react';
     3| import styled, {CSSProperties} from 'styled-components';
     4| import {CoreColors} from '../palettes/Colors';
     5| import {Box} from './Box';
     6| import {Button} from './Button';
     7| import {Popover} from './Popover';
     8| import {Subheading} from './Text';
     9| export enum ProductTourPosition {
    10|   TOP_LEFT = 'top-start',
    11|   TOP_CENTER = 'top',
    12|   TOP_RIGHT = 'top-end',
    13|   BOTTOM_LEFT = 'bottom-start',
    14|   BOTTOM_CENTER = 'bottom',
    15|   BOTTOM_RIGHT = 'bottom-end',
    16| }
    17| type ObjectType =
    18|   | {img: string; video?: undefined; object?: undefined}
    19|   | {video: string; img?: undefined; object?: undefined}
    20|   | {object: React.ReactNode; video?: undefined; img?: undefined}
    21|   | {img?: undefined; video?: undefined; object?: undefined};
    22| type Props = {
    23|   children: React.ReactNode;
    24|   title: React.ReactNode;
    25|   description?: React.ReactNode;
    26|   actions?: {

# --- HUNK 2: Lines 71-119 ---
    71|         <>
    72|           <div />
    73|           <ProductTourContainer flex={{direction: 'column', gap: 4}} padding={16} style={{width}}>
    74|             <Box flex={{direction: 'column', gap: 8}}>
    75|               {media}
    76|               <Subheading style={{fontSize: '16px'}}>{title}</Subheading>
    77|             </Box>
    78|             <div>{description}</div>
    79|             {actionsJsx}
    80|           </ProductTourContainer>
    81|           <div />
    82|         </>
    83|       }
    84|     >
    85|       {children}
    86|     </Popover>
    87|   );
    88| };
    89| const ProductTourContainer = styled(Box)`
    90|   pointer-events: all;
    91|   background: ${CoreColors.Gray900};
    92|   border-radius: 4px;
    93|   padding: 16px;
    94|   box-shadow: 0px 2px 12px rgba(0, 0, 0, 0.12);
    95|   &,
    96|   button {
    97|     &,
    98|     &:hover,
    99|     &:focus {
   100|       color: ${CoreColors.White};
   101|     }
   102|   }
   103| `;
   104| const ActionsContainer = styled(Box)`
   105|   > *:not(:first-child) {
   106|     &,
   107|     &:hover,
   108|     &:focus {
   109|       border: none;
   110|       box-shadow: none;
   111|     }
   112|   }
   113|   > * {
   114|     &:hover,
   115|     &:focus {
   116|       opacity: 0.9;
   117|     }
   118|   }
   119| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/ProgressBar.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-28 ---
     1| import {ProgressBar as BlueprintProgressBar, ProgressBarProps} from '@blueprintjs/core';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| import {colorAccentGray} from '../theme/color';
     5| interface Props extends ProgressBarProps {
     6|   fillColor?: string;
     7| }
     8| export const ProgressBar = ({fillColor = colorAccentGray(), ...rest}: Props) => {
     9|   return (
    10|     <StyledProgressBar
    11|       {...rest}
    12|       intent="none"
    13|       $fillColor={fillColor}
    14|       stripes={rest.animate ? true : false}
    15|     />
    16|   );
    17| };
    18| const StyledProgressBar = styled(BlueprintProgressBar)<{$fillColor: string}>`
    19|   &.bp4-progress-bar {
    20|     background: transparent;
    21|     ::before {
    22|       content: '';
    23|       background: ${(p) => p.$fillColor};
    24|       position: absolute;
    25|       inset: 0;
    26|       opacity: 0.25;
    27|     }
    28|     .bp4-progress-meter {


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Radio.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-43 ---
     1| import styled from 'styled-components';
     2| import {colorAccentBlue, colorBackgroundDisabled} from '../theme/color';
     3| import {IconWrapper} from './Icon';
     4| export const RadioContainer = styled.div`
     5|   .bp4-control {
     6|     margin-bottom: 0;
     7|     display: flex;
     8|     flex-direction: row;
     9|     align-items: center;
    10|     input {
    11|       display: none;
    12|     }
    13|   }
    14|   .bp4-control.bp4-radio {
    15|     padding: 4px 4px 4px 0;
    16|   }
    17|   .bp4-control.bp4-radio.bp4-disabled {
    18|     cursor: default;
    19|     color: ${colorBackgroundDisabled()};
    20|     ${IconWrapper} {
    21|       opacity: 0.3;
    22|     }
    23|   }
    24|   .bp4-control .bp4-control-indicator {
    25|     margin: 0;
    26|     margin-right: 8px;
    27|   }
    28|   .bp4-control input:checked ~ .bp4-control-indicator {
    29|     background-color: ${colorAccentBlue()};
    30|   }
    31|   .bp4-control.bp4-radio input:disabled ~ .bp4-control-indicator {
    32|     cursor: default;
    33|     opacity: 0.7;
    34|   }
    35|   .bp4-control.bp4-radio input:disabled:checked ~ .bp4-control-indicator {
    36|     background-color: ${colorAccentBlue()};
    37|   }
    38|   .bp4-control .bp4-control-indicator,
    39|   .bp4-control .bp4-control-indicator::before {
    40|     width: 18px;
    41|     height: 18px;
    42|   }
    43| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/RefreshableCountdown.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-51 ---
     1| import * as React from 'react';
     2| import styled from 'styled-components';
     3| import {colorAccentGray, colorAccentGrayHover, colorTextLight} from '../theme/color';
     4| import {Group} from './Group';
     5| import {Icon, IconWrapper} from './Icon';
     6| import {Tooltip} from './Tooltip';
     7| import {secondsToCountdownTime} from './secondsToCountdownTime';
     8| interface Props {
     9|   refreshing: boolean;
    10|   seconds?: number;
    11|   onRefresh: () => void;
    12|   dataDescription?: string;
    13| }
    14| export const RefreshableCountdown = (props: Props) => {
    15|   const {refreshing, seconds, onRefresh, dataDescription = 'data'} = props;
    16|   return (
    17|     <Group direction="row" spacing={8} alignItems="center">
    18|       <span
    19|         style={{color: colorTextLight(), fontVariantNumeric: 'tabular-nums', whiteSpace: 'nowrap'}}
    20|       >
    21|         {refreshing
    22|           ? `Refreshing ${dataDescription}`
    23|           : seconds === undefined
    24|           ? null
    25|           : secondsToCountdownTime(seconds)}
    26|       </span>
    27|       <Tooltip content={<span style={{whiteSpace: 'nowrap'}}>Refresh now</span>} position="top">
    28|         <RefreshButton onClick={onRefresh}>
    29|           <Icon name="refresh" color={colorAccentGray()} />
    30|         </RefreshButton>
    31|       </Tooltip>
    32|     </Group>
    33|   );
    34| };
    35| export const RefreshButton = styled.button`
    36|   border: none;
    37|   cursor: pointer;
    38|   padding: 8px;
    39|   margin: -8px;
    40|   outline: none;
    41|   background-color: transparent;
    42|   position: relative;
    43|   top: 1px;
    44|   & ${IconWrapper} {
    45|     display: block;
    46|     transition: color 100ms linear;
    47|     &:hover {
    48|       color: ${colorAccentGrayHover()};
    49|     }
    50|   }
    51| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Slider.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-75 ---
     1| import {
     2|   Slider as BlueprintSlider,
     3|   MultiSlider as BlueprintMultiSlider,
     4|   SliderProps as BlueprintSliderProps,
     5|   MultiSliderProps as BlueprintMultiSliderProps,
     6| } from '@blueprintjs/core';
     7| import * as React from 'react';
     8| import styled, {css} from 'styled-components';
     9| import {
    10|   colorAccentBlue,
    11|   colorAccentGray,
    12|   colorAccentGrayHover,
    13|   colorBackgroundLighter,
    14| } from '../theme/color';
    15| interface SliderProps extends BlueprintSliderProps {
    16|   fillColor?: string;
    17| }
    18| export const Slider = ({fillColor = colorAccentGray(), ...rest}: SliderProps) => {
    19|   return <StyledSlider {...rest} intent="none" $fillColor={fillColor} />;
    20| };
    21| interface MultiSliderProps extends BlueprintMultiSliderProps {
    22|   fillColor?: string;
    23|   children: React.ReactNode;
    24| }
    25| export const MultiSlider = ({fillColor = colorAccentGray(), ...rest}: MultiSliderProps) => {
    26|   return <StyledMultiSlider {...rest} intent="none" $fillColor={fillColor} />;
    27| };
    28| MultiSlider.Handle = BlueprintMultiSlider.Handle;
    29| export const SliderStyles = css<{$fillColor: string}>`
    30|   .bp4-slider-track {
    31|     height: 8px;
    32|     .bp4-slider-progress {
    33|       background-color: ${(p) => p.$fillColor};
    34|       opacity: 0.4;
    35|       height: 8px;
    36|     }
    37|     .bp4-slider-progress.bp4-intent-primary {
    38|       background-color: ${(p) => p.$fillColor};
    39|       opacity: 1;
    40|       height: 8px;
    41|     }
    42|   }
    43|   &.bp4-vertical {
    44|     width: 20px;
    45|     min-width: 20px;
    46|   }
    47|   &.bp4-vertical .bp4-slider-track,
    48|   &.bp4-vertical .bp4-slider-track .bp4-slider-progress {
    49|     height: initial;
    50|     width: 8px;
    51|   }
    52|   .bp4-slider-handle {
    53|     width: 18px;
    54|     height: 18px;
    55|     border-radius: 50%;
    56|     border: 2px solid ${colorAccentGray()};
    57|     background: ${colorBackgroundLighter()};
    58|     box-shadow: none;
    59|     &:hover {
    60|       border: 2px solid ${colorAccentGrayHover()};
    61|       box-shadow: rgba(0, 0, 0, 0.12) 0px 2px 12px 0px;
    62|     }
    63|     .bp4-slider-label {
    64|       background: ${colorAccentBlue()};
    65|       box-shadow: 0 1px 4px rgba(0,0,0,0.15)
    66|       padding: 4px 8px;
    67|     }
    68|   }
    69| `;
    70| const StyledMultiSlider = styled(BlueprintMultiSlider)<{$fillColor: string}>`
    71|   ${SliderStyles}
    72| `;
    73| const StyledSlider = styled(BlueprintSlider)<{$fillColor: string}>`
    74|   ${SliderStyles}
    75| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Spinner.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-36 ---
     1| import {Spinner as BlueprintSpinner} from '@blueprintjs/core';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| import {colorAccentGray} from '../theme/color';
     5| type SpinnerPurpose = 'page' | 'section' | 'body-text' | 'caption-text';
     6| interface Props {
     7|   purpose: SpinnerPurpose;
     8|   value?: number;
     9|   fillColor?: string;
    10|   stopped?: boolean;
    11|   title?: string;
    12| }
    13| export const Spinner = ({
    14|   purpose,
    15|   value,
    16|   fillColor = colorAccentGray(),
    17|   stopped,
    18|   title = 'Loading',
    19| }: Props) => {
    20|   const size = () => {
    21|     switch (purpose) {
    22|       case 'page':
    23|         return 80;
    24|       case 'section':
    25|         return 32;
    26|       case 'caption-text':
    27|         return 10;
    28|       case 'body-text':
    29|       default:
    30|         return 12;
    31|     }
    32|   };
    33|   const padding = () => {
    34|     switch (purpose) {
    35|       case 'caption-text':
    36|         return 1;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/SplitPanelContainer.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-24 ---
     1| import * as React from 'react';
     2| import styled from 'styled-components';
     3| import {colorAccentGray, colorKeylineDefault} from '../theme/color';
     4| import {Button} from './Button';
     5| import {Icon} from './Icon';
     6| const DIVIDER_THICKNESS = 2;
     7| interface SplitPanelContainerProps {
     8|   axis?: 'horizontal' | 'vertical';
     9|   identifier: string;
    10|   first: React.ReactNode;
    11|   firstInitialPercent: number;
    12|   firstMinSize?: number;
    13|   second: React.ReactNode | null; // Note: pass null to hide / animate away the second panel
    14| }
    15| interface SplitPanelContainerState {
    16|   size: number;
    17|   key: string;
    18|   resizing: boolean;
    19| }
    20| export class SplitPanelContainer extends React.Component<
    21|   SplitPanelContainerProps,
    22|   SplitPanelContainerState
    23| > {
    24|   constructor(props: SplitPanelContainerProps) {

# --- HUNK 2: Lines 140-188 ---
   140|         }
   141|         const current = container.current.state.size;
   142|         if (current < 90) {
   143|           setPrevSize(current);
   144|           setOpen(false);
   145|           container.current.onChangeSize(100);
   146|         } else {
   147|           setOpen(true);
   148|           container.current.onChangeSize(
   149|             prevSize === 'unknown' ? container.current.props.firstInitialPercent : prevSize,
   150|           );
   151|         }
   152|       }}
   153|     />
   154|   );
   155| };
   156| const DividerWrapper = {
   157|   horizontal: styled.div<{resizing: boolean}>`
   158|     width: ${DIVIDER_THICKNESS}px;
   159|     z-index: 1;
   160|     background: ${(p) => (p.resizing ? colorAccentGray() : colorKeylineDefault())};
   161|     margin-left: -1px;
   162|     overflow: visible;
   163|     position: relative;
   164|   `,
   165|   vertical: styled.div<{resizing: boolean}>`
   166|     height: ${DIVIDER_THICKNESS}px;
   167|     z-index: 1;
   168|     background: ${(p) => (p.resizing ? colorAccentGray() : colorKeylineDefault())};
   169|     margin-top: -1px;
   170|     overflow: visible;
   171|     position: relative;
   172|   `,
   173| };
   174| const DividerHitArea = {
   175|   horizontal: styled.div`
   176|     width: 17px;
   177|     height: 100%;
   178|     z-index: 1;
   179|     cursor: ew-resize;
   180|     position: relative;
   181|     left: -8px;
   182|   `,
   183|   vertical: styled.div`
   184|     height: 17px;
   185|     width: 100%;
   186|     z-index: 1;
   187|     cursor: ns-resize;
   188|     position: relative;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/StyledButton.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-89 ---
     1| import styled from 'styled-components';
     2| import {colorFocusRing} from '../theme/color';
     3| import {IconWrapper} from './Icon';
     4| import {SpinnerWrapper} from './Spinner';
     5| import {FontFamily} from './styles';
     6| interface StyledButtonProps {
     7|   $fillColor: string;
     8|   $fillColorHover?: string;
     9|   $strokeColor: string;
    10|   $strokeColorHover?: string;
    11|   $textColor: string;
    12|   $iconColor: string;
    13| }
    14| export const StyledButton = styled.button<StyledButtonProps>`
    15|   align-items: center;
    16|   background-color: ${({$fillColor}) => $fillColor || 'transparent'};
    17|   border: none;
    18|   border-radius: 8px;
    19|   color: ${({$textColor}) => $textColor};
    20|   cursor: pointer;
    21|   display: inline-flex;
    22|   flex-direction: row;
    23|   font-family: ${FontFamily.default};
    24|   font-size: 14px;
    25|   line-height: 20px;
    26|   padding: 6px 12px;
    27|   transition:
    28|     background 100ms,
    29|     box-shadow 150ms,
    30|     filter 100ms,
    31|     opacity 150ms;
    32|   user-select: none;
    33|   white-space: nowrap;
    34|   box-shadow: ${({$strokeColor}) => `${$strokeColor} inset 0px 0px 0px 1px`};
    35|   :hover:not(:disabled) {
    36|     background-color: ${({$fillColor, $fillColorHover}) =>
    37|       $fillColorHover || $fillColor || 'transparent'};
    38|     box-shadow: ${({$strokeColor, $strokeColorHover}) =>
    39|       `${
    40|         $strokeColorHover || $strokeColor
    41|       } inset 0px 0px 0px 1px, rgba(0, 0, 0, 0.12) 0px 2px 12px 0px;`};
    42|     color: ${({$textColor}) => $textColor};
    43|     text-decoration: none;
    44|   }
    45|   :focus {
    46|     box-shadow: ${colorFocusRing()} 0 0 0 2px;
    47|     outline: none;
    48|   }
    49|   :focus:not(:focus-visible) {
    50|     box-shadow: ${({$strokeColor}) =>
    51|       `${$strokeColor} inset 0px 0px 0px 1px, rgba(0, 0, 0, 0.12) 0px 2px 12px 0px;`};
    52|   }
    53|   :active:not(:disabled) {
    54|     filter: brightness(0.95);
    55|   }
    56|   :disabled {
    57|     cursor: default;
    58|     opacity: 0.5;
    59|   }
    60|   :disabled:hover {
    61|     box-shadow: ${({$strokeColor}) => `${$strokeColor} inset 0px 0px 0px 1px`};
    62|   }
    63|   ${SpinnerWrapper} {
    64|     align-self: center;
    65|     display: block;
    66|   }
    67|   ${IconWrapper} {
    68|     color: ${({$iconColor}) => $iconColor};
    69|     background-color: ${({$iconColor}) => $iconColor};
    70|     align-self: center;
    71|     display: block;
    72|   }
    73|   ${SpinnerWrapper}:first-child,
    74|   ${IconWrapper}:first-child {
    75|     margin-left: -4px;
    76|     margin-right: 4px;
    77|   }
    78|   ${SpinnerWrapper}:last-child,
    79|   ${IconWrapper}:last-child {
    80|     margin-right: -4px;
    81|     margin-left: 4px;
    82|   }
    83|   ${SpinnerWrapper}:first-child:last-child {
    84|     margin: 2px -4px;
    85|   }
    86|   ${IconWrapper}:first-child:last-child {
    87|     margin: 2px -4px;
    88|   }
    89| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/SubwayDot.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-24 ---
     1| import memoize from 'lodash/memoize';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| import {colorAccentReversed} from '../theme/color';
     5| import {Icon, IconName} from './Icon';
     6| const SECONDARY_COLORS = {
     7|   Orchid: '#8982DD',
     8|   Fern: '#508E74',
     9|   Teal: '#0080B6',
    10|   Rose: '#D16FA4',
    11|   Ruby: '#CF4C49',
    12|   Gold: '#CC8430',
    13|   Stone: '#8F988C',
    14|   Sand: '#9E7D56',
    15|   Mustard: '#BDB247',
    16| };
    17| const colors = [
    18|   SECONDARY_COLORS.Orchid,
    19|   SECONDARY_COLORS.Fern,
    20|   SECONDARY_COLORS.Teal,
    21|   SECONDARY_COLORS.Rose,
    22|   SECONDARY_COLORS.Ruby,
    23|   SECONDARY_COLORS.Gold,
    24|   SECONDARY_COLORS.Stone,

# --- HUNK 2: Lines 34-90 ---
    34|       }, 0),
    35|     ) % colors.length;
    36|   return colors[index]!;
    37| });
    38| type IconProps = React.ComponentProps<typeof Icon>;
    39| interface Props {
    40|   label: string;
    41|   fontSize?: number;
    42|   icon?: IconName;
    43|   iconSize?: IconProps['size'];
    44|   blobColor?: string;
    45|   blobSize?: number;
    46| }
    47| export const SubwayDot = React.memo(
    48|   ({label, fontSize = 13, blobColor, icon, iconSize = 16, blobSize = 24}: Props) => (
    49|     <Blob $color={blobColor || colorForString(label)} $blobSize={blobSize} $fontSize={fontSize}>
    50|       {icon ? (
    51|         <Icon
    52|           size={iconSize}
    53|           name={icon}
    54|           color={colorAccentReversed()}
    55|           style={{marginLeft: 0, marginTop: 0, opacity: 0.9}}
    56|         />
    57|       ) : (
    58|         label.slice(0, 1)
    59|       )}
    60|     </Blob>
    61|   ),
    62| );
    63| interface BlobProps {
    64|   $color: string;
    65|   $blobSize: number;
    66|   $fontSize: number;
    67| }
    68| const Blob = styled.div<BlobProps>`
    69|   align-items: center;
    70|   background-color: ${({$color}) => $color};
    71|   border-radius: 50%;
    72|   color: ${colorAccentReversed()};
    73|   cursor: pointer;
    74|   display: flex;
    75|   flex-shrink: 0;
    76|   font-size: ${({$fontSize}) => `${$fontSize}px`};
    77|   height: ${({$blobSize}) => `${$blobSize}px`};
    78|   justify-content: center;
    79|   outline: none;
    80|   text-transform: uppercase;
    81|   transition:
    82|     background 50ms linear,
    83|     color 50ms linear;
    84|   user-select: none;
    85|   width: ${({$blobSize}) => `${$blobSize}px`};
    86|   :focus,
    87|   :active {
    88|     outline: none;
    89|   }
    90| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Suggest.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-42 ---
     1| import {InputGroupProps2, IPopoverProps} from '@blueprintjs/core';
     2| import {isCreateNewItem, Suggest as BlueprintSuggest, SuggestProps} from '@blueprintjs/select';
     3| import deepmerge from 'deepmerge';
     4| import * as React from 'react';
     5| import {List as _List} from 'react-virtualized';
     6| import {createGlobalStyle} from 'styled-components';
     7| import {colorAccentGray, colorTextDisabled} from '../theme/color';
     8| import {Box} from './Box';
     9| import {IconWrapper} from './Icon';
    10| import {TextInputContainerStyles, TextInputStyles} from './TextInput';
    11| const List: any = _List;
    12| export const GlobalSuggestStyle = createGlobalStyle`
    13|   .dagster-suggest-input.bp4-input-group {
    14|     ${TextInputContainerStyles}
    15|     &:disabled ${IconWrapper}:first-child {
    16|       background-color: ${colorAccentGray()};
    17|     }
    18|     .bp4-input {
    19|       ${TextInputStyles}
    20|       height: auto;
    21|       ::placeholder {
    22|         color: ${colorTextDisabled()};
    23|       }
    24|     }
    25|     .bp4-input-action {
    26|       height: auto;
    27|       top: 1px;
    28|       right: 2px;
    29|     }
    30|   }
    31|   .bp4-select-popover.dagster-popover {
    32|     .bp4-popover-content li {
    33|       list-style: none;
    34|       margin: 0;
    35|       padding: 0;
    36|     }
    37|   }
    38| `;
    39| export const MENU_ITEM_HEIGHT = 32;
    40| const MENU_WIDTH = 250; // arbitrary, just looks nice
    41| const VISIBLE_ITEMS = 7.5;
    42| interface Props<T> extends React.PropsWithChildren<SuggestProps<T>> {


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Table.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-50 ---
     1| import {HTMLTable, HTMLTableProps} from '@blueprintjs/core';
     2| import styled from 'styled-components';
     3| import {colorKeylineDefault, colorTextDefault, colorTextLight} from '../theme/color';
     4| import {StyledTag} from './BaseTag';
     5| import {FontFamily} from './styles';
     6| export interface TableProps extends HTMLTableProps {
     7|   $compact?: boolean;
     8| }
     9| export const Table = styled(HTMLTable)<TableProps>`
    10|   border: none;
    11|   width: 100%;
    12|   & tr th,
    13|   & tr td {
    14|     box-shadow:
    15|       inset 0 1px 0 ${colorKeylineDefault()},
    16|       inset 1px 0 0 ${colorKeylineDefault()} !important;
    17|   }
    18|   & tr th {
    19|     color: ${colorTextLight()};
    20|     font-family: ${FontFamily.default};
    21|     font-size: 12px;
    22|     font-weight: 400;
    23|     padding: ${({$compact}) => ($compact ? '0 8px' : ' 8px 12px')};
    24|     min-height: 32px;
    25|     white-space: nowrap;
    26|     vertical-align: bottom;
    27|   }
    28|   & tr th:first-child {
    29|     padding-left: ${({$compact}) => ($compact ? '8px' : ' 24px')};
    30|   }
    31|   & tr td {
    32|     color: ${colorTextDefault()};
    33|     font-family: ${FontFamily.default};
    34|     font-size: 14px;
    35|     line-height: 20px;
    36|     padding: ${({$compact}) => ($compact ? '8px' : '12px')};
    37|   }
    38|   & tr td:first-child {
    39|     padding-left: ${({$compact}) => ($compact ? '8px' : ' 24px')};
    40|   }
    41|   & tr:last-child td {
    42|     box-shadow:
    43|       inset 0 1px 0 ${colorKeylineDefault()},
    44|       inset 1px 0 0 ${colorKeylineDefault()},
    45|       inset 0 -1px 0 ${colorKeylineDefault()} !important;
    46|   }
    47|   & tr td ${StyledTag} {
    48|     font-family: ${FontFamily.default};
    49|   }
    50| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Tabs.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-115 ---
     1| import * as React from 'react';
     2| import styled, {css} from 'styled-components';
     3| import {
     4|   colorAccentBlue,
     5|   colorAccentGray,
     6|   colorBackgroundGray,
     7|   colorTextDefault,
     8|   colorTextDisabled,
     9|   colorTextLight,
    10| } from '../theme/color';
    11| import {IconWrapper} from './Icon';
    12| import {FontFamily} from './styles';
    13| export interface TabStyleProps {
    14|   disabled?: boolean;
    15|   selected?: boolean;
    16|   count?: number | 'indeterminate' | null;
    17|   icon?: React.ReactNode;
    18|   title?: React.ReactNode;
    19|   $size?: 'small' | 'large';
    20| }
    21| export const getTabA11yProps = (props: {selected?: boolean; disabled?: boolean}) => {
    22|   const {selected, disabled} = props;
    23|   return {
    24|     role: 'tab',
    25|     tabIndex: disabled ? -1 : 0,
    26|     'aria-disabled': disabled,
    27|     'aria-expanded': selected,
    28|     'aria-selected': selected,
    29|   };
    30| };
    31| export const getTabContent = (props: TabStyleProps & {title?: React.ReactNode}) => {
    32|   const {title, count, icon} = props;
    33|   return (
    34|     <>
    35|       {title}
    36|       {icon}
    37|       {count !== undefined ? (
    38|         <Count $disabled={!!props.disabled}>{count === 'indeterminate' ? '\u2013' : count}</Count>
    39|       ) : null}
    40|     </>
    41|   );
    42| };
    43| const Count = styled.div<{$disabled: boolean}>`
    44|   display: inline;
    45|   font-family: ${FontFamily.monospace};
    46|   font-size: 14px;
    47|   font-weight: 500;
    48|   letter-spacing: -0.02%;
    49|   padding: 0 6px;
    50|   color: ${({$disabled}) => ($disabled ? colorTextDisabled() : colorTextDefault())};
    51|   background: ${colorBackgroundGray()};
    52|   border-radius: 4px;
    53| `;
    54| export const tabCSS = css<TabStyleProps>`
    55|   background: none;
    56|   border: none;
    57|   font-size: 14px;
    58|   line-height: 20px;
    59|   font-weight: 600;
    60|   padding: ${({$size}) => ($size === 'small' ? '10px 0' : '16px 0')};
    61|   box-shadow: ${({selected}) => (selected ? colorAccentBlue() : 'transparent')} 0 -2px 0 inset;
    62|   display: flex;
    63|   align-items: center;
    64|   cursor: pointer;
    65|   gap: 6px;
    66|   &,
    67|   & a {
    68|     cursor: pointer;
    69|     user-select: none;
    70|     color: ${({selected, disabled}) =>
    71|       selected ? colorAccentBlue() : disabled ? colorTextDisabled() : colorTextLight()};
    72|   }
    73|   ${({disabled}) =>
    74|     disabled
    75|       ? css`
    76|           & ${IconWrapper} {
    77|             background-color: ${colorTextDisabled()};
    78|           }
    79|         `
    80|       : null}
    81|   /* Focus outline only when using keyboard, not when focusing via mouse. */
    82|   &:focus {
    83|     outline: none !important;
    84|     box-shadow: ${({selected, disabled}) =>
    85|         selected ? colorAccentBlue() : disabled ? 'transparent' : colorAccentGray()}
    86|       0 -2px 0 inset;
    87|   }
    88|   &:hover {
    89|     &,
    90|     a {
    91|       text-decoration: none;
    92|       color: ${({selected, disabled}) =>
    93|         selected ? colorAccentBlue() : disabled ? colorTextDisabled() : colorAccentBlue()};
    94|     }
    95|     ${({disabled}) => (disabled ? `color: ${colorTextDisabled()};` : null)}
    96|   }
    97| `;
    98| interface TabProps extends TabStyleProps, Omit<React.ComponentPropsWithoutRef<'button'>, 'title'> {}
    99| export const Tab = styled((props: TabProps) => {
   100|   const containerProps = getTabA11yProps(props);
   101|   const content = getTabContent(props);
   102|   const titleText = typeof props.title === 'string' ? props.title : undefined;
   103|   return (
   104|     <button {...props} {...containerProps} title={titleText} type="button">
   105|       {content}
   106|     </button>
   107|   );
   108| })<TabStyleProps>`
   109|   ${tabCSS}
   110| `;
   111| interface TabsProps {
   112|   children: Array<React.ReactElement<TabProps>>;
   113|   selectedTabId?: string;
   114|   onChange?: (selectedTabId: string) => void;
   115|   size?: 'small' | 'large';


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Tag.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-85 ---
     1| import {Tag as BlueprintTag} from '@blueprintjs/core';
     2| import * as React from 'react';
     3| import {
     4|   colorAccentBlue,
     5|   colorAccentGray,
     6|   colorAccentGreen,
     7|   colorAccentRed,
     8|   colorAccentYellow,
     9|   colorBackgroundBlue,
    10|   colorBackgroundGray,
    11|   colorBackgroundGreen,
    12|   colorBackgroundRed,
    13|   colorBackgroundYellow,
    14|   colorTextBlue,
    15|   colorTextDefault,
    16|   colorTextGreen,
    17|   colorTextRed,
    18|   colorTextYellow,
    19| } from '../theme/color';
    20| import {BaseTag} from './BaseTag';
    21| import {IconName, Icon} from './Icon';
    22| import {Spinner} from './Spinner';
    23| const intentToFillColor = (intent: React.ComponentProps<typeof BlueprintTag>['intent']) => {
    24|   switch (intent) {
    25|     case 'primary':
    26|       return colorBackgroundBlue();
    27|     case 'danger':
    28|       return colorBackgroundRed();
    29|     case 'success':
    30|       return colorBackgroundGreen();
    31|     case 'warning':
    32|       return colorBackgroundYellow();
    33|     case 'none':
    34|     default:
    35|       return colorBackgroundGray();
    36|   }
    37| };
    38| const intentToTextColor = (intent: React.ComponentProps<typeof BlueprintTag>['intent']) => {
    39|   switch (intent) {
    40|     case 'primary':
    41|       return colorTextBlue();
    42|     case 'danger':
    43|       return colorTextRed();
    44|     case 'success':
    45|       return colorTextGreen();
    46|     case 'warning':
    47|       return colorTextYellow();
    48|     case 'none':
    49|     default:
    50|       return colorTextDefault();
    51|   }
    52| };
    53| const intentToIconColor = (intent: React.ComponentProps<typeof BlueprintTag>['intent']) => {
    54|   switch (intent) {
    55|     case 'primary':
    56|       return colorAccentBlue();
    57|     case 'danger':
    58|       return colorAccentRed();
    59|     case 'success':
    60|       return colorAccentGreen();
    61|     case 'warning':
    62|       return colorAccentYellow();
    63|     case 'none':
    64|     default:
    65|       return colorAccentGray();
    66|   }
    67| };
    68| interface Props extends Omit<React.ComponentProps<typeof BlueprintTag>, 'icon' | 'rightIcon'> {
    69|   children?: React.ReactNode;
    70|   icon?: IconName | 'spinner';
    71|   rightIcon?: IconName | 'spinner';
    72|   tooltipText?: string;
    73| }
    74| interface IconOrSpinnerProps {
    75|   icon: IconName | 'spinner' | null;
    76|   color: string;
    77| }
    78| const IconOrSpinner = React.memo(({icon, color}: IconOrSpinnerProps) => {
    79|   if (icon === 'spinner') {
    80|     return <Spinner fillColor={color} purpose="body-text" />;
    81|   }
    82|   return icon ? <Icon name={icon} color={color} /> : null;
    83| });
    84| export const Tag = (props: Props) => {
    85|   const {children, icon = null, rightIcon = null, intent, ...rest} = props;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/TagSelector.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-31 ---
     1| import {useVirtualizer} from '@tanstack/react-virtual';
     2| import React from 'react';
     3| import styled from 'styled-components';
     4| import {
     5|   colorBackgroundDefault,
     6|   colorBorderDefault,
     7|   colorTextDefault,
     8|   colorTextDisabled,
     9| } from '../theme/color';
    10| import {Box} from './Box';
    11| import {Checkbox} from './Checkbox';
    12| import {Icon} from './Icon';
    13| import {MenuItem, Menu} from './Menu';
    14| import {MiddleTruncate} from './MiddleTruncate';
    15| import {Popover} from './Popover';
    16| import {Tag} from './Tag';
    17| import {TextInput, TextInputStyles} from './TextInput';
    18| import {Container as VirtualContainer, Inner, Row} from './VirtualizedTable';
    19| import {useViewport} from './useViewport';
    20| export type TagSelectorTagProps = {
    21|   remove: (ev: React.SyntheticEvent<HTMLDivElement>) => void;
    22| };
    23| export type TagSelectorDropdownItemProps = {
    24|   toggle: () => void;
    25|   selected: boolean;
    26| };
    27| export type TagSelectorDropdownProps = {
    28|   width: string;
    29|   allTags: string[];
    30| };
    31| type Props = {

# --- HUNK 2: Lines 201-241 ---
   201|         onClick={() => {
   202|           setIsDropdownOpen((isOpen) => !isOpen);
   203|         }}
   204|         {...containerProps}
   205|       >
   206|         <TagsContainer flex={{grow: 1, gap: 6}}>{tagsContent}</TagsContainer>
   207|         <div style={{cursor: 'pointer'}}>
   208|           <Icon name={isDropdownOpen ? 'expand_less' : 'expand_more'} />
   209|         </div>
   210|       </Container>
   211|     </Popover>
   212|   );
   213| };
   214| const Container = styled.div`
   215|   display: flex;
   216|   flex-direction: row;
   217|   align-items: center;
   218|   ${TextInputStyles}
   219| `;
   220| const Placeholder = styled.div`
   221|   color: ${colorTextDisabled()};
   222| `;
   223| const TagsContainer = styled(Box)`
   224|   overflow-x: auto;
   225|   &::-webkit-scrollbar {
   226|     display: none;
   227|   }
   228|   scrollbar-width: none;
   229|   -ms-overflow-style: none;
   230| `;
   231| export const TagSelectorWithSearch = (
   232|   props: Props & {
   233|     searchPlaceholder?: string;
   234|   },
   235| ) => {
   236|   const [search, setSearch] = React.useState('');
   237|   const {
   238|     allTags,
   239|     selectedTags,
   240|     setSelectedTags,
   241|     rowHeight,

# --- HUNK 3: Lines 267-290 ---
   267|                     onChange={(e) => setSearch(e.target.value)}
   268|                     placeholder={searchPlaceholder || 'Search'}
   269|                     ref={(input) => {
   270|                       if (input) {
   271|                         input.focus();
   272|                       }
   273|                     }}
   274|                   />
   275|                 </Box>
   276|                 {renderDropdown ? renderDropdown(dropdownContent, dropdownProps) : dropdownContent}
   277|               </Box>
   278|             </Menu>
   279|           );
   280|         },
   281|         [renderDropdown, search, searchPlaceholder],
   282|       )}
   283|     />
   284|   );
   285| };
   286| const DefaultTagTooltipStyle = JSON.stringify({
   287|   background: colorBackgroundDefault(),
   288|   border: `1px solid ${colorBorderDefault()}`,
   289|   color: colorTextDefault(),
   290| });


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Text.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-22 ---
     1| import styled from 'styled-components';
     2| import {colorBackgroundBlue} from '../theme/color';
     3| import {FontFamily} from './styles';
     4| interface TextProps {
     5|   color?: string;
     6| }
     7| const Text = styled.span<TextProps>`
     8|   ${({color}) => (color ? `color: ${color};` : null)}
     9| `;
    10| export const Title = styled(Text)`
    11|   font-size: 24px;
    12|   font-weight: 600;
    13|   line-height: 30px;
    14|   -webkit-font-smoothing: antialiased;
    15| `;
    16| export const Heading = styled(Text)`
    17|   font-size: 18px;
    18|   font-weight: 600;
    19|   line-height: 24px;
    20|   -webkit-font-smoothing: antialiased;
    21| `;
    22| export const Headline = styled(Text)`

# --- HUNK 2: Lines 51-84 ---
    51|   font-size: 16px;
    52|   font-weight: 400;
    53|   line-height: 24px;
    54| `;
    55| export const Body2 = styled(Text)`
    56|   font-family: ${FontFamily.default};
    57|   line-height: 20px;
    58|   font-size: 14px;
    59|   font-weight: 400;
    60| `;
    61| export const Caption = styled(Text)`
    62|   font-family: ${FontFamily.default};
    63|   font-size: 12px;
    64| `;
    65| export const CaptionSubtitle = styled(Text)`
    66|   font-size: 12px;
    67|   font-weight: 600;
    68|   line-height: 16px;
    69| `;
    70| export const Code = styled(Text)`
    71|   background-color: ${colorBackgroundBlue()};
    72|   border-radius: 2px;
    73|   font-family: ${FontFamily.monospace};
    74|   font-size: 14px;
    75|   padding: 2px 4px;
    76| `;
    77| export const Mono = styled(Text)`
    78|   font-family: ${FontFamily.monospace};
    79|   font-size: 16px;
    80| `;
    81| export const CaptionMono = styled(Text)`
    82|   font-family: ${FontFamily.monospace};
    83|   font-size: 14px;
    84| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/TextInput.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-171 ---
     1| import * as React from 'react';
     2| import styled, {css} from 'styled-components';
     3| import {
     4|   colorAccentGray,
     5|   colorAccentPrimary,
     6|   colorBackgroundDefault,
     7|   colorBackgroundDisabled,
     8|   colorBorderDefault,
     9|   colorBorderHover,
    10|   colorBorderDisabled,
    11|   colorFocusRing,
    12|   colorKeylineDefault,
    13|   colorTextDefault,
    14|   colorTextDisabled,
    15|   colorTextLight,
    16|   colorTextLighter,
    17|   colorBackgroundDefaultHover,
    18| } from '../theme/color';
    19| import {IconName, Icon, IconWrapper} from './Icon';
    20| import {FontFamily} from './styles';
    21| interface Props extends Omit<React.ComponentPropsWithRef<'input'>, 'onChange'> {
    22|   icon?: IconName;
    23|   onChange?: (e: React.ChangeEvent<HTMLInputElement>) => void;
    24|   strokeColor?: string;
    25|   rightElement?: JSX.Element;
    26| }
    27| export const TextInput = React.forwardRef(
    28|   (props: Props, ref: React.ForwardedRef<HTMLInputElement>) => {
    29|     const {
    30|       icon,
    31|       disabled,
    32|       strokeColor = colorBorderDefault(),
    33|       rightElement,
    34|       type = 'text',
    35|       ...rest
    36|     } = props;
    37|     return (
    38|       <TextInputContainer $disabled={!!disabled}>
    39|         {icon ? (
    40|           <Icon name={icon} color={disabled ? colorAccentGray() : colorAccentPrimary()} />
    41|         ) : null}
    42|         <StyledInput
    43|           {...rest}
    44|           $strokeColor={strokeColor}
    45|           disabled={disabled}
    46|           ref={ref}
    47|           $hasIcon={!!icon}
    48|           $hasRightElement={!!rightElement}
    49|           type={type}
    50|         />
    51|         {rightElement ? <RightContainer>{rightElement}</RightContainer> : null}
    52|       </TextInputContainer>
    53|     );
    54|   },
    55| );
    56| TextInput.displayName = 'TextInput';
    57| export const TextInputContainerStyles = css`
    58|   align-items: center;
    59|   color: ${colorTextLight()};
    60|   display: inline-flex;
    61|   flex-direction: row;
    62|   flex: 1;
    63|   flex-grow: 0;
    64|   font-family: ${FontFamily.default};
    65|   font-size: 14px;
    66|   font-weight: 400;
    67|   position: relative;
    68| `;
    69| export const TextInputContainer = styled.div<{$disabled?: boolean}>`
    70|   ${TextInputContainerStyles}
    71|   > ${IconWrapper}:first-child {
    72|     position: absolute;
    73|     left: 8px;
    74|     top: 8px;
    75|     ${({$disabled}) =>
    76|       $disabled
    77|         ? css`
    78|             background-color: ${colorBackgroundDisabled()};
    79|           `
    80|         : null};
    81|   }
    82| `;
    83| const RightContainer = styled.div`
    84|   position: absolute;
    85|   bottom: 0;
    86|   top: 0;
    87|   right: 8px;
    88|   display: flex;
    89|   flex-direction: column;
    90|   justify-content: center;
    91| `;
    92| export const TextInputStyles = css`
    93|   background-color: ${colorBackgroundDefault()};
    94|   border: none;
    95|   box-shadow: ${colorBorderDefault()} inset 0px 0px 0px 1px;
    96|   outline: none;
    97|   border-radius: 8px;
    98|   color: ${colorTextDefault()};
    99|   flex-grow: 1;
   100|   font-size: 14px;
   101|   line-height: 20px;
   102|   padding: 6px 6px 6px 12px;
   103|   margin: 0;
   104|   transition: box-shadow linear 150ms;
   105|   ::placeholder {
   106|     color: ${colorTextLighter()};
   107|   }
   108|   :disabled {
   109|     box-shadow:
   110|       ${colorBorderDisabled()} inset 0px 0px 0px 1px,
   111|       ${colorKeylineDefault()} inset 2px 2px 1.5px;
   112|     background-color: ${colorBackgroundDisabled()};
   113|     color: ${colorTextDisabled()};
   114|   }
   115|   :disabled::placeholder {
   116|     color: ${colorTextDisabled()};
   117|   }
   118|   :focus {
   119|     box-shadow:
   120|       ${colorBorderDefault()} inset 0px 0px 0px 1px,
   121|       ${colorKeylineDefault()} inset 2px 2px 1.5px,
   122|       ${colorFocusRing()} 0 0 0 3px;
   123|     outline: none;
   124|   }
   125| `;
   126| interface StyledInputProps {
   127|   $hasIcon: boolean;
   128|   $strokeColor: string;
   129|   $hasRightElement: boolean;
   130| }
   131| const StyledInput = styled.input<StyledInputProps>`
   132|   ${TextInputStyles}
   133|   ${({$hasRightElement}) =>
   134|     $hasRightElement
   135|       ? css`
   136|           & {
   137|             padding-right: 28px;
   138|           }
   139|         `
   140|       : null}
   141|   box-shadow: ${({$strokeColor}) => $strokeColor || colorBorderDefault()} 0px 0px 0px 1px;
   142|   padding: ${({$hasIcon}) => ($hasIcon ? '6px 6px 6px 28px' : '6px 6px 6px 12px')};
   143|   :hover {
   144|     box-shadow: ${({$strokeColor}) => $strokeColor || colorBorderHover()} 0px 0px 0px 1px;
   145|   }
   146|   :focus {
   147|     box-shadow:
   148|       ${({$strokeColor}) => $strokeColor || colorBorderDefault()} 0px 0px 0px 1px,
   149|       ${colorFocusRing()} 0 0 0 3px;
   150|     background-color: ${colorBackgroundDefaultHover()};
   151|   }
   152| `;
   153| interface TextAreaProps {
   154|   $resize: React.CSSProperties['resize'];
   155|   $strokeColor?: string;
   156| }
   157| export const TextArea = styled.textarea<TextAreaProps>`
   158|   ${TextInputStyles}
   159|   box-shadow: ${colorBorderDefault()} inset 0px 0px 0px 1px;
   160|   :hover {
   161|     box-shadow: ${colorBorderHover()} inset 0px 0px 0px 1px;
   162|   }
   163|   :hover {
   164|     box-shadow: ${colorBorderHover()} inset 0px 0px 0px 1px;
   165|   }
   166|   :focus {
   167|     box-shadow: ${colorFocusRing()} 0px 0px 0px 1px;
   168|     background-color: ${colorBackgroundDefaultHover()};
   169|   }
   170|   ${({$resize}) => ($resize ? `resize: ${$resize};` : null)}
   171| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Toaster.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-75 ---
     1| import {IToasterProps, ToasterInstance, ToastProps} from '@blueprintjs/core';
     2| import React from 'react';
     3| import {createGlobalStyle} from 'styled-components';
     4| import {CoreColors} from '../palettes/Colors';
     5| import {colorAccentBlue, colorAccentGray, colorAccentPrimary, colorAccentRed} from '../theme/color';
     6| import {IconName, Icon, IconWrapper} from './Icon';
     7| import {createToaster} from './createToaster';
     8| export const GlobalToasterStyle = createGlobalStyle`
     9|   .dagster-toaster {
    10|     .bp4-toast {
    11|       padding: 8px 12px;
    12|       border-radius: 8px;
    13|       font-size: 14px;
    14|       line-height: 22px;
    15|       color: ${CoreColors.White};
    16|       background-color: ${colorAccentGray()};
    17|     }
    18|     .bp4-button-group {
    19|       padding: 2px;
    20|     }
    21|     .bp4-toast-message {
    22|       display: flex;
    23|       align-items: center;
    24|       padding: 6px;
    25|       gap: 8px;
    26|     }
    27|     .bp4-icon-cross {
    28|       color: ${CoreColors.White} !important;
    29|     }
    30|     ${IconWrapper} {
    31|       background-color: ${CoreColors.White} !important;
    32|     }
    33|     .bp4-toast.bp4-intent-primary,
    34|     .bp4-toast.bp4-intent-primary .bp4-button {
    35|       background-color: ${colorAccentGray()} !important;
    36|     }
    37|     .bp4-toast.bp4-intent-success,
    38|     .bp4-toast.bp4-intent-success .bp4-button {
    39|       background-color: ${colorAccentBlue()} !important;
    40|     }
    41|     .bp4-toast.bp4-intent-warning,
    42|     .bp4-toast.bp4-intent-warning .bp4-button {
    43|       background-color: ${colorAccentGray()} !important;
    44|     }
    45|     .bp4-toast.bp4-intent-danger,
    46|     .bp4-toast.bp4-intent-danger .bp4-button {
    47|       background-color: ${colorAccentRed()} !important;
    48|     }
    49|   }
    50| `;
    51| export type DToasterShowProps = Omit<ToastProps, 'icon'> & {icon?: IconName};
    52| export type DToasterShowFn = (props: DToasterShowProps, key?: string) => string;
    53| export type DToaster = Omit<ToasterInstance, 'show'> & {show: DToasterShowFn};
    54| const setup = (instance: ToasterInstance): DToaster => {
    55|   const show = instance.show;
    56|   const showWithDagsterIcon: DToasterShowFn = ({icon, ...rest}, key) => {
    57|     if (icon && typeof icon === 'string') {
    58|       rest.message = (
    59|         <>
    60|           <Icon name={icon} color={colorAccentPrimary()} />
    61|           {rest.message}
    62|         </>
    63|       );
    64|     }
    65|     return show.apply(instance, [rest, key]);
    66|   };
    67|   return Object.assign(instance, {show: showWithDagsterIcon}) as DToaster;
    68| };
    69| const asyncCreate = async (props?: IToasterProps, container?: HTMLElement): Promise<DToaster> => {
    70|   const instance = await createToaster({...props, className: 'dagster-toaster'}, container);
    71|   return setup(instance);
    72| };
    73| export const Toaster = {
    74|   asyncCreate,
    75| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/TokenizingField.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-36 ---
     1| import {TagInput} from '@blueprintjs/core';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| import {
     5|   colorBackgroundDefault,
     6|   colorBackgroundGray,
     7|   colorBackgroundGreen,
     8|   colorBackgroundRed,
     9|   colorBackgroundYellow,
    10|   colorBorderDefault,
    11|   colorTextDefault,
    12|   colorTextGreen,
    13|   colorTextRed,
    14|   colorTextYellow,
    15| } from '../theme/color';
    16| import {Box} from './Box';
    17| import {MenuItem, Menu} from './Menu';
    18| import {Popover} from './Popover';
    19| import {Spinner} from './Spinner';
    20| const MAX_SUGGESTIONS = 100;
    21| export interface SuggestionProvider {
    22|   token?: string;
    23|   values: () => string[];
    24|   suggestionFilter?: (query: string, suggestion: Suggestion) => boolean;
    25|   textOnly?: boolean;
    26| }
    27| export interface Suggestion {
    28|   text: string;
    29|   final: boolean;
    30| }
    31| interface ActiveSuggestionInfo {
    32|   text: string;
    33|   idx: number;
    34| }
    35| export interface TokenizingFieldValue {
    36|   token?: string;

# --- HUNK 2: Lines 354-441 ---
   354|             setOpen(false);
   355|           },
   356|         }}
   357|         $maxWidth={fullwidth ? '100%' : undefined}
   358|         onAdd={() => false}
   359|         onKeyDown={onKeyDown}
   360|         tagProps={{minimal: true}}
   361|         placeholder={placeholder || 'Filter'}
   362|         rightElement={
   363|           loading && open ? (
   364|             <Box style={{alignSelf: 'center'}} margin={{right: 4}}>
   365|               <Spinner purpose="body-text" />
   366|             </Box>
   367|           ) : undefined
   368|         }
   369|       />
   370|     </Popover>
   371|   );
   372| };
   373| export const StyledTagInput = styled(TagInput)<{$maxWidth?: any}>`
   374|   background-color: ${colorBackgroundDefault()};
   375|   border: none;
   376|   border-radius: 8px;
   377|   box-shadow: ${colorBorderDefault()} inset 0px 0px 0px 1px;
   378|   color: ${colorTextDefault()};
   379|   min-width: 400px;
   380|   max-width: ${(p) => (p.$maxWidth ? p.$maxWidth : '600px')};
   381|   transition: box-shadow 150ms;
   382|   input {
   383|     background-color: ${colorBackgroundDefault()};
   384|     color: ${colorTextDefault()};
   385|     font-size: 14px;
   386|     font-weight: 400;
   387|     padding-left: 4px;
   388|     padding-bottom: 2px;
   389|     padding-top: 2px;
   390|   }
   391|   &&.bp4-tag-input.bp4-active {
   392|     background-color: ${colorBackgroundDefault()};
   393|     color: ${colorTextDefault()};
   394|     box-shadow:
   395|       ${colorBorderDefault()} inset 0px 0px 0px 1px,
   396|       rgba(58, 151, 212, 0.6) 0 0 0 3px;
   397|   }
   398|   && .bp4-tag-input-values:first-child .bp4-input-ghost:first-child {
   399|     padding-left: 8px;
   400|   }
   401|   && .bp4-tag-input-values {
   402|     margin-right: 4px;
   403|     margin-top: 4px;
   404|   }
   405|   && .bp4-tag-input-values > * {
   406|     margin-bottom: 4px;
   407|   }
   408|   .bp4-tag {
   409|     border-radius: 6px;
   410|     display: inline-flex;
   411|     flex-direction: row;
   412|     font-size: 12px;
   413|     line-height: 16px;
   414|     align-items: center;
   415|     max-width: 400px;
   416|     overflow: hidden;
   417|     white-space: nowrap;
   418|     text-overflow: ellipsis;
   419|     padding: 4px 8px;
   420|     user-select: none;
   421|   }
   422|   .bp4-tag.bp4-minimal:not([class*='bp4-intent-']) {
   423|     background-color: ${colorBackgroundGray()};
   424|     color: ${colorTextDefault()};
   425|   }
   426|   .bp4-tag.bp4-minimal.bp4-intent-success {
   427|     background-color: ${colorBackgroundGreen()};
   428|     color: ${colorTextGreen()};
   429|   }
   430|   .bp4-tag.bp4-minimal.bp4-intent-warning {
   431|     background-color: ${colorBackgroundYellow()};
   432|     color: ${colorTextYellow()};
   433|   }
   434|   .bp4-tag.bp4-minimal.bp4-intent-danger {
   435|     background-color: ${colorBackgroundRed()};
   436|     color: ${colorTextRed()};
   437|   }
   438| `;
   439| const StyledMenu = styled(Menu)`
   440|   width: 400px;
   441| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Tooltip.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-33 ---
     1| import {Tooltip2, Tooltip2Props} from '@blueprintjs/popover2';
     2| import deepmerge from 'deepmerge';
     3| import React from 'react';
     4| import styled, {createGlobalStyle, css} from 'styled-components';
     5| import {colorTooltipBackground, colorTooltipText} from '../theme/color';
     6| import {FontFamily} from './styles';
     7| export const GlobalTooltipStyle = createGlobalStyle`
     8|   .dagster-tooltip .bp4-popover2-content {
     9|       font-family: ${FontFamily.default};
    10|       font-size: 12px;
    11|       line-height: 16px;
    12|       background: ${colorTooltipBackground()};
    13|       color: ${colorTooltipText()};
    14|       padding: 8px 16px;
    15|   }
    16|   .block-tooltip.bp4-popover2-target {
    17|     display: block;
    18|   }
    19|   .dagster-tooltip-bare .bp4-popover2-content {
    20|     padding: 0;
    21|   }
    22| `;
    23| const overwriteMerge = (destination: any[], source: any[]) => source;
    24| interface Props extends Tooltip2Props {
    25|   children: React.ReactNode;
    26|   display?: React.CSSProperties['display'];
    27|   canShow?: boolean;
    28|   useDisabledButtonTooltipFix?: boolean;
    29| }
    30| export const Tooltip = (props: Props) => {
    31|   const {useDisabledButtonTooltipFix = false, children, display, canShow = true, ...rest} = props;
    32|   const [isOpen, setIsOpen] = React.useState<undefined | boolean>(undefined);
    33|   const divRef = React.useRef<HTMLDivElement>(null);


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Trace.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-13 ---
     1| import styled from 'styled-components';
     2| import {colorBackgroundLight, colorTextLight} from '../theme/color';
     3| import {FontFamily} from './styles';
     4| export const Trace = styled.div`
     5|   background-color: ${colorBackgroundLight()};
     6|   color: ${colorTextLight()};
     7|   font-family: ${FontFamily.monospace};
     8|   font-size: 14px;
     9|   max-height: 90vh;
    10|   overflow: auto;
    11|   white-space: pre;
    12|   padding: 16px;
    13| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/UnstyledButton.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-41 ---
     1| import styled, {css} from 'styled-components';
     2| import {colorTextDefault, colorFocusRing} from '../theme/color';
     3| interface Props {
     4|   $expandedClickPx?: number;
     5|   $showFocusOutline?: boolean;
     6| }
     7| export const UnstyledButton = styled.button<Props>`
     8|   border: 0;
     9|   background-color: transparent;
    10|   border-radius: 4px;
    11|   color: ${colorTextDefault()};
    12|   cursor: pointer;
    13|   padding: 0;
    14|   text-align: start;
    15|   transition:
    16|     box-shadow 150ms,
    17|     opacity 150ms;
    18|   user-select: none;
    19|   white-space: nowrap;
    20|   ${({$expandedClickPx}) =>
    21|     $expandedClickPx
    22|       ? css`
    23|           padding: ${$expandedClickPx}px;
    24|           margin: -${$expandedClickPx}px;
    25|         `
    26|       : null}
    27|   :focus,
    28|   :active {
    29|     outline: none;
    30|     ${({$showFocusOutline}) =>
    31|       $showFocusOutline
    32|         ? `box-shadow: ${colorFocusRing()} 0 0 0 2px;
    33|       `
    34|         : null}
    35|   }
    36|   &:disabled {
    37|     color: inherit;
    38|     cursor: default;
    39|     opacity: 0.6;
    40|   }
    41| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/VirtualizedTable.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-37 ---
     1| import * as React from 'react';
     2| import styled from 'styled-components';
     3| import {Box} from './Box';
     4| export const HeaderCell = ({children}: {children?: React.ReactNode}) => (
     5|   <CellBox
     6|     padding={{vertical: 8, horizontal: 12}}
     7|     border="right"
     8|     style={{whiteSpace: 'nowrap', textOverflow: 'ellipsis', overflow: 'hidden'}}
     9|   >
    10|     {children}
    11|   </CellBox>
    12| );
    13| export const RowCell = ({children}: {children?: React.ReactNode}) => (
    14|   <CellBox
    15|     padding={12}
    16|     flex={{direction: 'column', justifyContent: 'flex-start'}}
    17|     style={{overflow: 'hidden'}}
    18|     border="right"
    19|   >
    20|     {children}
    21|   </CellBox>
    22| );
    23| const CellBox = styled(Box)`
    24|   :first-child {
    25|     padding-left: 24px;
    26|   }
    27|   :last-child {
    28|     padding-right: 24px;
    29|   }
    30| `;
    31| export const Container = styled.div`
    32|   height: 100%;
    33|   overflow: auto;
    34| `;
    35| type InnerProps = {
    36|   $totalHeight: number;
    37| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Warning.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-30 ---
     1| import * as React from 'react';
     2| import styled from 'styled-components';
     3| import {
     4|   colorAccentGray,
     5|   colorBackgroundLight,
     6|   colorBackgroundRed,
     7|   colorKeylineDefault,
     8| } from '../theme/color';
     9| import {Icon} from './Icon';
    10| interface Props {
    11|   children: React.ReactNode;
    12|   errorBackground?: boolean;
    13| }
    14| export const Warning = ({errorBackground, children}: Props) => {
    15|   return (
    16|     <ErrorContainer errorBackground={errorBackground}>
    17|       <Icon name="warning" size={16} color={colorAccentGray()} style={{marginRight: 8}} />
    18|       {children}
    19|     </ErrorContainer>
    20|   );
    21| };
    22| const ErrorContainer = styled.div<{errorBackground?: boolean}>`
    23|   border-top: 1px solid ${colorKeylineDefault()};
    24|   background: ${({errorBackground}) =>
    25|     errorBackground ? colorBackgroundRed() : colorBackgroundLight()};
    26|   padding: 8px 24px 8px 24px;
    27|   display: flex;
    28|   align-items: center;
    29|   font-size: 12px;
    30| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/BaseButton.stories.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-110 ---
     1| import {Meta} from '@storybook/react';
     2| import * as React from 'react';
     3| import {CoreColors} from '../../palettes/Colors';
     4| import {BaseButton} from '../BaseButton';
     5| import {Box} from '../Box';
     6| import {Group} from '../Group';
     7| import {Icon} from '../Icon';
     8| export default {
     9|   title: 'BaseButton',
    10|   component: BaseButton,
    11| } as Meta;
    12| export const Default = () => {
    13|   return (
    14|     <Group direction="column" spacing={8}>
    15|       <BaseButton label="Button" />
    16|       <BaseButton label="Button" icon={<Icon name="star" />} />
    17|       <BaseButton label="Button" rightIcon={<Icon name="close" />} />
    18|       <BaseButton
    19|         label="Button"
    20|         icon={<Icon name="source" />}
    21|         rightIcon={<Icon name="expand_more" />}
    22|       />
    23|       <BaseButton icon={<Icon name="cached" />} />
    24|     </Group>
    25|   );
    26| };
    27| export const Fill = () => {
    28|   return (
    29|     <Group direction="column" spacing={8}>
    30|       <BaseButton label="Button" fillColor={CoreColors.Gray900} textColor={CoreColors.White} />
    31|       <BaseButton
    32|         label="Button"
    33|         fillColor={CoreColors.Blue500}
    34|         textColor={CoreColors.White}
    35|         icon={<Icon name="star" />}
    36|       />
    37|       <BaseButton
    38|         label="Button"
    39|         fillColor={CoreColors.Green500}
    40|         textColor={CoreColors.White}
    41|         rightIcon={<Icon name="close" />}
    42|       />
    43|       <BaseButton
    44|         label="Button"
    45|         fillColor={CoreColors.Red500}
    46|         textColor={CoreColors.White}
    47|         icon={<Icon name="source" />}
    48|         rightIcon={<Icon name="expand_more" />}
    49|       />
    50|       <BaseButton
    51|         label="Button"
    52|         fillColor={CoreColors.Olive500}
    53|         textColor={CoreColors.White}
    54|         icon={<Icon name="folder_open" />}
    55|       />
    56|       <BaseButton
    57|         fillColor={CoreColors.Yellow500}
    58|         textColor={CoreColors.White}
    59|         icon={<Icon name="cached" />}
    60|       />
    61|     </Group>
    62|   );
    63| };
    64| export const Transparent = () => {
    65|   return (
    66|     <Box padding={12} background={CoreColors.Gray200}>
    67|       <Group direction="column" spacing={8}>
    68|         <BaseButton textColor={CoreColors.Gray900} label="Button" fillColor="transparent" />
    69|         <BaseButton
    70|           textColor={CoreColors.Gray900}
    71|           label="Button"
    72|           fillColor="transparent"
    73|           icon={<Icon name="star" />}
    74|         />
    75|         <BaseButton
    76|           textColor={CoreColors.Gray900}
    77|           label="Button"
    78|           fillColor="transparent"
    79|           rightIcon={<Icon name="close" />}
    80|         />
    81|         <BaseButton
    82|           textColor={CoreColors.Gray900}
    83|           label="Button"
    84|           fillColor="transparent"
    85|           icon={<Icon name="source" />}
    86|           rightIcon={<Icon name="expand_more" />}
    87|         />
    88|         <BaseButton
    89|           textColor={CoreColors.Gray900}
    90|           fillColor="transparent"
    91|           icon={<Icon name="cached" />}
    92|         />
    93|       </Group>
    94|     </Box>
    95|   );
    96| };
    97| export const Disabled = () => {
    98|   return (
    99|     <Group direction="column" spacing={8}>
   100|       <BaseButton label="Button" icon={<Icon name="star" />} disabled />
   101|       <BaseButton
   102|         label="Button"
   103|         fillColor={CoreColors.Gray900}
   104|         textColor={CoreColors.White}
   105|         disabled
   106|       />
   107|       <BaseButton textColor={CoreColors.Gray900} label="Button" fillColor="transparent" disabled />
   108|     </Group>
   109|   );
   110| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/BaseTag.stories.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-59 ---
     1| import {Meta} from '@storybook/react';
     2| import * as React from 'react';
     3| import {
     4|   colorAccentBlue,
     5|   colorAccentCyan,
     6|   colorAccentGray,
     7|   colorAccentGreen,
     8|   colorAccentLime,
     9|   colorAccentRed,
    10|   colorAccentYellow,
    11|   colorBackgroundBlue,
    12|   colorBackgroundCyan,
    13|   colorBackgroundGray,
    14|   colorBackgroundGreen,
    15|   colorBackgroundLime,
    16|   colorBackgroundRed,
    17|   colorBackgroundYellow,
    18|   colorTextCyan,
    19|   colorTextDefault,
    20| } from '../../theme/color';
    21| import {BaseTag} from '../BaseTag';
    22| import {Group} from '../Group';
    23| import {Icon} from '../Icon';
    24| export default {
    25|   title: 'BaseTag',
    26|   component: BaseTag,
    27| } as Meta;
    28| const COLORS = [
    29|   {fillColor: colorBackgroundGray(), textColor: colorTextDefault(), iconColor: colorAccentGray()},
    30|   {fillColor: colorBackgroundBlue(), textColor: colorAccentBlue(), iconColor: colorAccentBlue()},
    31|   {fillColor: colorBackgroundCyan(), textColor: colorTextCyan(), iconColor: colorAccentCyan()},
    32|   {fillColor: colorBackgroundGreen(), textColor: colorAccentGreen(), iconColor: colorAccentGreen()},
    33|   {fillColor: colorBackgroundLime(), textColor: colorAccentLime(), iconColor: colorAccentLime()},
    34|   {
    35|     fillColor: colorBackgroundYellow(),
    36|     textColor: colorAccentYellow(),
    37|     iconColor: colorAccentYellow(),
    38|   },
    39|   {fillColor: colorBackgroundRed(), textColor: colorAccentRed(), iconColor: colorAccentRed()},
    40| ];
    41| export const Basic = () => {
    42|   return (
    43|     <Group direction="column" spacing={8}>
    44|       {COLORS.map(({fillColor, textColor, iconColor}, ii) => (
    45|         <Group direction="row" spacing={8} key={ii}>
    46|           <BaseTag
    47|             fillColor={fillColor}
    48|             textColor={textColor}
    49|             icon={<Icon name="info" color={iconColor} />}
    50|           />
    51|           <BaseTag
    52|             fillColor={fillColor}
    53|             textColor={textColor}
    54|             icon={<Icon name="alternate_email" color={iconColor} />}
    55|             label="Lorem"
    56|           />
    57|           <BaseTag
    58|             fillColor={fillColor}
    59|             textColor={textColor}


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/Box.stories.tsx
# Total hunks: 4
# ====================================================================
# --- HUNK 1: Lines 1-150 ---
     1| import {Meta} from '@storybook/react';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| import {
     5|   colorAccentBlue,
     6|   colorAccentCyan,
     7|   colorAccentGreen,
     8|   colorAccentRed,
     9|   colorAccentYellow,
    10|   colorBackgroundGray,
    11| } from '../../theme/color';
    12| import {Box} from '../Box';
    13| import {Group} from '../Group';
    14| import {
    15|   AlignItems,
    16|   BorderSide,
    17|   BorderWidth,
    18|   FlexDirection,
    19|   JustifyContent as JustifyContentType,
    20|   Spacing,
    21| } from '../types';
    22| export default {
    23|   title: 'Box',
    24|   component: Box,
    25| } as Meta;
    26| export const Padding = () => {
    27|   const spacings: Spacing[] = [0, 2, 4, 8, 12, 16, 20, 24, 32, 48, 64];
    28|   return (
    29|     <Group spacing={2} direction="row">
    30|       {spacings.map((spacing) => (
    31|         <Box key={`${spacing}`} background={colorBackgroundGray()} padding={spacing}>
    32|           {spacing}
    33|         </Box>
    34|       ))}
    35|     </Group>
    36|   );
    37| };
    38| export const BorderSides = () => {
    39|   const sides: BorderSide[] = [
    40|     'all',
    41|     'top-and-bottom',
    42|     'left-and-right',
    43|     'top',
    44|     'right',
    45|     'bottom',
    46|     'left',
    47|   ];
    48|   const widths: BorderWidth[] = [1, 2];
    49|   return (
    50|     <Group direction="column" spacing={16}>
    51|       {widths.map((width) => (
    52|         <Group spacing={8} direction="column" key={`width-${width}`}>
    53|           <div>{`Width ${width}:`}</div>
    54|           <Group spacing={8} direction="row">
    55|             {sides.map((side) => (
    56|               <Box
    57|                 key={side}
    58|                 background={colorBackgroundGray()}
    59|                 border={{side, width, color: colorAccentBlue()}}
    60|                 padding={24}
    61|                 style={{fontSize: '12px', textTransform: 'uppercase'}}
    62|               >
    63|                 {side}
    64|               </Box>
    65|             ))}
    66|           </Group>
    67|         </Group>
    68|       ))}
    69|     </Group>
    70|   );
    71| };
    72| export const FlexDirections = () => {
    73|   const directions: FlexDirection[] = ['row', 'column', 'row-reverse', 'column-reverse'];
    74|   const alignItems: AlignItems[] = ['stretch', 'center', 'flex-start', 'flex-end'];
    75|   return (
    76|     <Group direction="column" spacing={16}>
    77|       <div>Flex direction:</div>
    78|       <Group spacing={24} direction="row">
    79|         {directions.map((direction) => (
    80|           <Group key={direction} direction="column" spacing={12}>
    81|             <ExampleText>{direction}</ExampleText>
    82|             <Box background={colorBackgroundGray()} flex={{direction}} padding={8}>
    83|               <Box padding={12} background={colorAccentBlue()} />
    84|               <Box padding={12} background={colorAccentCyan()} />
    85|               <Box padding={12} background={colorAccentGreen()} />
    86|               <Box padding={12} background={colorAccentYellow()} />
    87|               <Box padding={12} background={colorAccentRed()} />
    88|             </Box>
    89|           </Group>
    90|         ))}
    91|       </Group>
    92|       <div>Align items:</div>
    93|       <Group spacing={24} direction="row">
    94|         {alignItems.map((alignment) => (
    95|           <Group key={alignment} direction="column" spacing={12}>
    96|             <ExampleText>{alignment}</ExampleText>
    97|             <Box
    98|               background={colorBackgroundGray()}
    99|               flex={{direction: 'row', alignItems: alignment}}
   100|               padding={8}
   101|             >
   102|               <Box padding={12} background={colorAccentBlue()} />
   103|               <Box padding={24} background={colorAccentCyan()} />
   104|               <Box padding={32} background={colorAccentGreen()} />
   105|               <Box padding={4} background={colorAccentYellow()} />
   106|               <Box padding={16} background={colorAccentRed()} />
   107|             </Box>
   108|           </Group>
   109|         ))}
   110|       </Group>
   111|     </Group>
   112|   );
   113| };
   114| export const JustifyContent = () => {
   115|   const justifyContent: JustifyContentType[] = [
   116|     'space-between',
   117|     'space-around',
   118|     'space-evenly',
   119|     'center',
   120|     'flex-start',
   121|     'flex-end',
   122|   ];
   123|   return (
   124|     <Group direction="column" spacing={16}>
   125|       <div>Justify content:</div>
   126|       <Group spacing={24} direction="column">
   127|         {justifyContent.map((option) => (
   128|           <Group key={option} direction="column" spacing={12}>
   129|             <ExampleText>{option}</ExampleText>
   130|             <Box
   131|               background={colorBackgroundGray()}
   132|               flex={{direction: 'row', justifyContent: option}}
   133|               padding={8}
   134|             >
   135|               <Box padding={12} background={colorAccentBlue()} />
   136|               <Box padding={12} background={colorAccentCyan()} />
   137|               <Box padding={12} background={colorAccentGreen()} />
   138|               <Box padding={12} background={colorAccentYellow()} />
   139|               <Box padding={12} background={colorAccentRed()} />
   140|             </Box>
   141|           </Group>
   142|         ))}
   143|       </Group>
   144|     </Group>
   145|   );
   146| };
   147| const ExampleText = styled.span`
   148|   font-size: 12px;
   149|   text-transform: uppercase;
   150| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/Button.stories.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 9-72 ---
     9| export default {
    10|   title: 'Button',
    11|   component: Button,
    12| } as Meta;
    13| export const Default = () => {
    14|   return (
    15|     <Group direction="column" spacing={8}>
    16|       <Button>Button</Button>
    17|       <Button icon={<Icon name="star" />}>Button</Button>
    18|       <Button rightIcon={<Icon name="close" />}>Button</Button>
    19|       <Button icon={<Icon name="source" />} rightIcon={<Icon name="expand_more" />}>
    20|         Button
    21|       </Button>
    22|       <Button icon={<Icon name="cached" />} />
    23|     </Group>
    24|   );
    25| };
    26| export const Intent = () => {
    27|   return (
    28|     <Group direction="column" spacing={8}>
    29|       <Button icon={<Icon name="star" />}>Intent not defined</Button>
    30|       <Button icon={<Icon name="star" />} intent="primary">
    31|         Primary
    32|       </Button>
    33|       <Button icon={<Icon name="done" />} intent="success">
    34|         Success
    35|       </Button>
    36|       <Button icon={<Icon name="error" />} intent="danger">
    37|         Danger
    38|       </Button>
    39|       <Button icon={<Icon name="warning" />} intent="warning">
    40|         Warning
    41|       </Button>
    42|       <Button icon={<Icon name="star" />} intent="none">
    43|         None
    44|       </Button>
    45|     </Group>
    46|   );
    47| };
    48| export const Outlined = () => {
    49|   return (
    50|     <Group direction="column" spacing={8}>
    51|       <Button outlined icon={<Icon name="star" />}>
    52|         Intent not defined
    53|       </Button>
    54|       <Button outlined icon={<Icon name="star" />} intent="primary">
    55|         Primary
    56|       </Button>
    57|       <Button outlined icon={<Icon name="done" />} intent="success">
    58|         Success
    59|       </Button>
    60|       <Button outlined icon={<Icon name="error" />} intent="danger">
    61|         Danger
    62|       </Button>
    63|       <Button outlined icon={<Icon name="warning" />} intent="warning">
    64|         Warning
    65|       </Button>
    66|       <Button outlined icon={<Icon name="star" />} intent="none">
    67|         None
    68|       </Button>
    69|     </Group>
    70|   );
    71| };
    72| export const Disabled = () => {

# --- HUNK 2: Lines 148-185 ---
   148|         <Button icon={<Icon name="star" />}>Left</Button>
   149|         <Button icon={<Icon name="star" />}>Center</Button>
   150|         <Button icon={<Icon name="star" />}>Right</Button>
   151|       </JoinedButtons>
   152|       <JoinedButtons>
   153|         <Button rightIcon={<Icon name="wysiwyg" />}>Left</Button>
   154|         <Button rightIcon={<Icon name="wysiwyg" />}>Center</Button>
   155|         <Button rightIcon={<Icon name="wysiwyg" />}>Right</Button>
   156|       </JoinedButtons>
   157|       <JoinedButtons>
   158|         <Button icon={<Icon name="cached" />}></Button>
   159|         <Button icon={<Icon name="wysiwyg" />}></Button>
   160|         <Button icon={<Icon name="close" />}></Button>
   161|       </JoinedButtons>
   162|     </Group>
   163|   );
   164| };
   165| export function LoadingStates() {
   166|   return (
   167|     <Box flex={{direction: 'row', gap: 12}}>
   168|       <Button loading icon={<Icon name="wysiwyg" />}>
   169|         Test
   170|       </Button>
   171|       <Button loading icon={<Icon name="close" />} rightIcon={<Icon name="cached" />}>
   172|         Test
   173|       </Button>
   174|       <Button loading rightIcon={<Icon name="wysiwyg" />}>
   175|         Test
   176|       </Button>
   177|       <Button loading intent="primary">
   178|         Test
   179|       </Button>
   180|       <Button loading intent="danger">
   181|         Test
   182|       </Button>
   183|     </Box>
   184|   );
   185| }


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/ButtonLink.stories.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-41 ---
     1| import {Story, Meta} from '@storybook/react';
     2| import * as React from 'react';
     3| import {colorLinkDefault, colorLinkHover} from '../../theme/color';
     4| import {ButtonLink} from '../ButtonLink';
     5| export default {
     6|   title: 'ButtonLink',
     7|   component: ButtonLink,
     8| } as Meta;
     9| type Props = React.ComponentProps<typeof ButtonLink>;
    10| const Template: Story<Props> = (props) => <ButtonLink {...props} />;
    11| export const ColorString = Template.bind({});
    12| ColorString.args = {
    13|   children: 'Hello world',
    14|   color: colorLinkDefault(),
    15| };
    16| export const ColorMap = Template.bind({});
    17| ColorMap.args = {
    18|   children: 'Hello world',
    19|   color: {
    20|     link: colorLinkDefault(),
    21|     hover: colorLinkHover(),
    22|     active: colorLinkHover(),
    23|   },
    24| };
    25| export const HoverUnderline = Template.bind({});
    26| HoverUnderline.args = {
    27|   children: 'Hello world',
    28|   color: colorLinkDefault(),
    29|   underline: 'hover',
    30| };
    31| export const WithinText = () => {
    32|   return (
    33|     <div>
    34|       Lorem ipsum{' '}
    35|       <ButtonLink color={{link: colorLinkDefault(), hover: colorLinkHover()}} underline="always">
    36|         dolor sit
    37|       </ButtonLink>{' '}
    38|       amet edipiscing.
    39|     </div>
    40|   );
    41| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/Checkbox.stories.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-42 ---
     1| import {Meta} from '@storybook/react';
     2| import * as React from 'react';
     3| import {useState} from 'react';
     4| import {
     5|   colorAccentBlue,
     6|   colorAccentCyan,
     7|   colorAccentGray,
     8|   colorAccentGreen,
     9| } from '../../theme/color';
    10| import {Checkbox} from '../Checkbox';
    11| import {Group} from '../Group';
    12| export default {
    13|   title: 'Checkbox',
    14|   component: Checkbox,
    15| } as Meta;
    16| export const Default = () => {
    17|   const [state, setState] = useState<'true' | 'false' | 'indeterminate'>('false');
    18|   const onChange = () =>
    19|     setState(({true: 'indeterminate', indeterminate: 'false', false: 'true'} as const)[state]);
    20|   return (
    21|     <Group spacing={8} direction="column">
    22|       {[colorAccentBlue(), colorAccentCyan(), colorAccentGray()].map((fillColor) => (
    23|         <Group spacing={24} direction="row" key={fillColor}>
    24|           <Checkbox
    25|             label="Hello world"
    26|             checked={state === 'false' ? false : true}
    27|             indeterminate={state === 'indeterminate'}
    28|             fillColor={fillColor}
    29|             onChange={onChange}
    30|             format="check"
    31|           />
    32|           <Checkbox
    33|             label="Hello world"
    34|             checked={state === 'false' ? false : true}
    35|             indeterminate={state === 'indeterminate'}
    36|             fillColor={fillColor}
    37|             onChange={onChange}
    38|             format="star"
    39|           />
    40|           <Checkbox
    41|             label="Hello world"
    42|             checked={state === 'false' ? false : true}

# --- HUNK 2: Lines 91-131 ---
    91|           format="star"
    92|         />
    93|         <Checkbox
    94|           disabled
    95|           label="Hello world"
    96|           checked={state === 'false' ? true : false}
    97|           indeterminate={state === 'indeterminate'}
    98|           onChange={onChange}
    99|           format="switch"
   100|         />
   101|       </Group>
   102|     </Group>
   103|   );
   104| };
   105| export const Small = () => {
   106|   const [state, setState] = useState<'true' | 'false' | 'indeterminate'>('false');
   107|   const onChange = () =>
   108|     setState(({true: 'indeterminate', indeterminate: 'false', false: 'true'} as const)[state]);
   109|   return (
   110|     <Group spacing={8} direction="column">
   111|       {[colorAccentBlue(), colorAccentGreen(), colorAccentGray()].map((fillColor) => (
   112|         <Group spacing={24} direction="row" key={fillColor}>
   113|           <Checkbox
   114|             size="small"
   115|             label="Hello world"
   116|             checked={state === 'false' ? false : true}
   117|             indeterminate={state === 'indeterminate'}
   118|             fillColor={fillColor}
   119|             onChange={onChange}
   120|             format="check"
   121|           />
   122|           <Checkbox
   123|             size="small"
   124|             label="Hello world"
   125|             checked={state === 'false' ? false : true}
   126|             indeterminate={state === 'indeterminate'}
   127|             fillColor={fillColor}
   128|             onChange={onChange}
   129|             format="star"
   130|           />
   131|           <Checkbox


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/Group.stories.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-143 ---
     1| import {Meta} from '@storybook/react';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| import {colorAccentYellow, colorBackgroundLight, colorLinkDefault} from '../../theme/color';
     5| import {Box} from '../Box';
     6| import {ButtonLink} from '../ButtonLink';
     7| import {Group} from '../Group';
     8| import {Body, Code, Heading, Subheading} from '../Text';
     9| import {AlignItems, FlexWrap, Spacing} from '../types';
    10| export default {
    11|   title: 'Group',
    12|   component: Group,
    13| } as Meta;
    14| export const Row = () => {
    15|   const spacings: Spacing[] = [0, 2, 4, 8, 12, 16, 20, 24, 32, 48, 64];
    16|   return (
    17|     <Group spacing={12} direction="column">
    18|       {spacings.map((spacing) => (
    19|         <Box background={colorBackgroundLight()} padding={8} key={`${spacing}`}>
    20|           <Group direction="row" spacing={spacing}>
    21|             <ExampleText>
    22|               <strong>{spacing}</strong>
    23|             </ExampleText>
    24|             <ExampleText>China</ExampleText>
    25|             <ExampleText>France</ExampleText>
    26|             <ExampleText>Russia</ExampleText>
    27|             <ExampleText>United Kingdom</ExampleText>
    28|             <ExampleText>United States</ExampleText>
    29|           </Group>
    30|         </Box>
    31|       ))}
    32|     </Group>
    33|   );
    34| };
    35| export const Column = () => {
    36|   const spacings: Spacing[] = [4, 8, 12, 16, 32, 48, 64];
    37|   return (
    38|     <Group spacing={12} direction="column">
    39|       {spacings.map((spacing) => (
    40|         <Box background={colorBackgroundLight()} padding={12} key={`${spacing}`}>
    41|           <Group direction="column" spacing={spacing}>
    42|             <ExampleText>
    43|               <strong>{spacing}</strong>
    44|             </ExampleText>
    45|             <ExampleText>China</ExampleText>
    46|             <ExampleText>France</ExampleText>
    47|             <ExampleText>Russia</ExampleText>
    48|             <ExampleText>United Kingdom</ExampleText>
    49|             <ExampleText>United States</ExampleText>
    50|           </Group>
    51|         </Box>
    52|       ))}
    53|     </Group>
    54|   );
    55| };
    56| export const AlignItemsColumn = () => {
    57|   const alignments: AlignItems[] = ['center', 'flex-start', 'flex-end'];
    58|   return (
    59|     <Group spacing={12} direction="column">
    60|       {alignments.map((alignment) => (
    61|         <Box background={colorBackgroundLight()} padding={12} key={alignment}>
    62|           <Group direction="column" alignItems={alignment} spacing={8}>
    63|             <ExampleText>
    64|               <strong>{alignment}</strong>
    65|             </ExampleText>
    66|             <ExampleText>France</ExampleText>
    67|             <ExampleText>Russia</ExampleText>
    68|             <ExampleText>United Kingdom</ExampleText>
    69|             <ExampleText>United States</ExampleText>
    70|           </Group>
    71|         </Box>
    72|       ))}
    73|     </Group>
    74|   );
    75| };
    76| export const EmptyChildren = () => {
    77|   const EmptyThing = () => {
    78|     return null;
    79|   };
    80|   return (
    81|     <Group direction="column" spacing={12}>
    82|       <Body>
    83|         In the group below, two children are empty: one inline <Code>null</Code>, and one component
    84|         that renders to <Code>null</Code>. Upon inspection of the DOM, note that both are given{' '}
    85|         <Code>display: none</Code>.
    86|       </Body>
    87|       <Group background={colorBackgroundLight()} padding={12} direction="column" spacing={8}>
    88|         <ExampleText>China</ExampleText>
    89|         <ExampleText>France</ExampleText>
    90|         {null}
    91|         <EmptyThing />
    92|         <ExampleText>Russia</ExampleText>
    93|         <ExampleText>United Kingdom</ExampleText>
    94|         <ExampleText>United States</ExampleText>
    95|       </Group>
    96|     </Group>
    97|   );
    98| };
    99| export const PointerEventsTest = () => {
   100|   return (
   101|     <div>
   102|       <ButtonLink color={{link: colorLinkDefault(), hover: colorAccentYellow()}}>
   103|         <strong>Try to click me!</strong>
   104|       </ButtonLink>
   105|       <Group direction="column" spacing={32}>
   106|         <Group direction="column" spacing={32}>
   107|           <Heading>Heading</Heading>
   108|           <div style={{width: '500px'}}>
   109|             This is a Group within a Group, which results in overlapping negative margins. We want
   110|             to be sure that the user can still interact with elements that are overlapped by the
   111|             relevant margins.
   112|           </div>
   113|         </Group>
   114|         <Subheading>Subheading</Subheading>
   115|       </Group>
   116|     </div>
   117|   );
   118| };
   119| export const Wrap = () => {
   120|   const wraps: FlexWrap[] = ['wrap', 'nowrap'];
   121|   return (
   122|     <Group spacing={12} direction="column">
   123|       {wraps.map((wrap) => (
   124|         <Box background={colorBackgroundLight()} padding={12} key={wrap} style={{width: '400px'}}>
   125|           <Group direction="row" spacing={8} wrap={wrap}>
   126|             <ExampleText>
   127|               <strong>{wrap}</strong>
   128|             </ExampleText>
   129|             <ExampleText>China</ExampleText>
   130|             <ExampleText>France</ExampleText>
   131|             <ExampleText>Russia</ExampleText>
   132|             <ExampleText>United Kingdom</ExampleText>
   133|             <ExampleText>United States</ExampleText>
   134|           </Group>
   135|         </Box>
   136|       ))}
   137|     </Group>
   138|   );
   139| };
   140| const ExampleText = styled.span`
   141|   font-size: 12px;
   142|   text-transform: uppercase;
   143| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/Icon.stories.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-56 ---
     1| import {Meta} from '@storybook/react';
     2| import * as React from 'react';
     3| import {CoreColors} from '../../palettes/Colors';
     4| import {Box} from '../Box';
     5| import {IconNames as _iconNames, Icon} from '../Icon';
     6| import {Tooltip} from '../Tooltip';
     7| const IconNames = _iconNames.slice().sort();
     8| export default {
     9|   title: 'Icon',
    10|   component: Icon,
    11| } as Meta;
    12| export const Size16 = () => {
    13|   return (
    14|     <Box flex={{gap: 6, wrap: 'wrap'}}>
    15|       {IconNames.map((name) => (
    16|         <Tooltip content={name} key={name}>
    17|           <Icon name={name} />
    18|         </Tooltip>
    19|       ))}
    20|     </Box>
    21|   );
    22| };
    23| export const Size24 = () => {
    24|   return (
    25|     <Box flex={{gap: 6, wrap: 'wrap'}}>
    26|       {IconNames.map((name) => (
    27|         <Tooltip content={name} key={name}>
    28|           <Icon name={name} size={24} />
    29|         </Tooltip>
    30|       ))}
    31|     </Box>
    32|   );
    33| };
    34| export const IconColors = () => {
    35|   const colorKeys = Object.keys(CoreColors);
    36|   const numColors = colorKeys.length;
    37|   const colorAtIndex = (index: number) => {
    38|     const colorKey = colorKeys[index % numColors];
    39|     if (colorKey) {
    40|       const colorAtKey = CoreColors[colorKey as keyof typeof CoreColors];
    41|       if (colorAtKey) {
    42|         return colorAtKey;
    43|       }
    44|     }
    45|     return CoreColors.Gray100;
    46|   };
    47|   return (
    48|     <Box flex={{gap: 6, wrap: 'wrap'}}>
    49|       {IconNames.map((name, idx) => (
    50|         <Tooltip content={name} key={name}>
    51|           <Icon name={name} color={colorAtIndex(idx)} size={24} />
    52|         </Tooltip>
    53|       ))}
    54|     </Box>
    55|   );
    56| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/LegacyColors.stories.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-52 ---
     1| import {Colors as BlueprintColors} from '@blueprintjs/core';
     2| import {Meta} from '@storybook/react';
     3| import nearestColor from 'nearest-color';
     4| import * as React from 'react';
     5| import rgbHex from 'rgb-hex';
     6| import {Box} from '../Box';
     7| import {LegacyColors} from '../LegacyColors';
     8| const ColorExample = ({color, name}: {name: string; color: string}) => (
     9|   <Box background={color} padding={12} style={{width: 120}}>
    10|     {name}
    11|   </Box>
    12| );
    13| export default {
    14|   title: 'Colors',
    15|   component: ColorExample,
    16| } as Meta;
    17| const ColorsToHex = Object.keys(LegacyColors).reduce(
    18|   (accum, key) => ({
    19|     ...accum,
    20|     [key]: `#${rgbHex(LegacyColors[key as keyof typeof LegacyColors]).slice(0, 6)}`,
    21|   }),
    22|   {},
    23| );
    24| const toCurrent = nearestColor.from(ColorsToHex);
    25| const BlueprintToHex = Object.keys(BlueprintColors).reduce(
    26|   (accum, key) => ({
    27|     ...accum,
    28|     [key]: `${BlueprintColors[key as keyof typeof BlueprintColors].slice(0, 7)}`,
    29|   }),
    30|   {},
    31| );
    32| export const Comparison = () => {
    33|   return (
    34|     <Box flex={{direction: 'row', gap: 4}}>
    35|       <Box flex={{direction: 'column', alignItems: 'stretch', gap: 4}}>
    36|         <div>Current colors</div>
    37|         {Object.keys(ColorsToHex).map((key) => (
    38|           <ColorExample key={key} name={key} color={ColorsToHex[key as keyof typeof ColorsToHex]} />
    39|         ))}
    40|       </Box>
    41|       <Box flex={{direction: 'column', alignItems: 'stretch', gap: 4}}>
    42|         <div>Blueprint colors</div>
    43|         {Object.keys(BlueprintToHex).map((key) => (
    44|           <Box flex={{direction: 'row', gap: 4, alignItems: 'center'}} key={key}>
    45|             <ColorExample name={key} color={BlueprintToHex[key as keyof typeof BlueprintToHex]} />
    46|             <div>{toCurrent(BlueprintToHex[key as keyof typeof BlueprintToHex]).name}</div>
    47|           </Box>
    48|         ))}
    49|       </Box>
    50|     </Box>
    51|   );
    52| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/MiddleTruncate.stories.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-25 ---
     1| import {Meta} from '@storybook/react';
     2| import faker from 'faker';
     3| import * as React from 'react';
     4| import {colorBackgroundBlue, colorBackgroundLight} from '../../theme/color';
     5| import {Box} from '../Box';
     6| import {Icon} from '../Icon';
     7| import {MiddleTruncate} from '../MiddleTruncate';
     8| import {Slider} from '../Slider';
     9| import {Tag} from '../Tag';
    10| export default {
    11|   title: 'MiddleTruncate',
    12|   component: MiddleTruncate,
    13| } as Meta;
    14| export const Simple = () => {
    15|   const sizer = React.useRef<HTMLDivElement>(null);
    16|   const [controlledWidth, setControlledWidth] = React.useState(400);
    17|   const sentences = React.useMemo(() => {
    18|     return new Array(30).fill(null).map(() => faker.random.words(20));
    19|   }, []);
    20|   return (
    21|     <>
    22|       <Slider
    23|         min={200}
    24|         max={600}
    25|         stepSize={10}

# --- HUNK 2: Lines 96-202 ---
    96| export const Containers = () => {
    97|   const sizer = React.useRef<HTMLDivElement>(null);
    98|   const [controlledWidth, setControlledWidth] = React.useState(400);
    99|   const LONG_TEXT =
   100|     'Four score and seven years ago our fathers brought forth on this continent, a new nation, conceived in Liberty, and dedicated to the proposition that all men are created equal.';
   101|   const SHORT_TEXT = 'Hello world';
   102|   return (
   103|     <>
   104|       <Slider
   105|         min={200}
   106|         max={600}
   107|         stepSize={10}
   108|         value={controlledWidth}
   109|         labelRenderer={false}
   110|         onChange={(value) => setControlledWidth(value)}
   111|       />
   112|       <div ref={sizer} style={{width: controlledWidth}}>
   113|         <Box flex={{direction: 'row', gap: 24, alignItems: 'center'}} margin={{vertical: 12}}>
   114|           <Box
   115|             flex={{direction: 'column', gap: 8, alignItems: 'flex-start'}}
   116|             background={colorBackgroundLight()}
   117|             padding={12}
   118|             style={{overflow: 'hidden'}}
   119|           >
   120|             <div style={{width: '100%'}}>
   121|               <MiddleTruncate text={LONG_TEXT} />
   122|             </div>
   123|             <Box
   124|               flex={{direction: 'row', gap: 4}}
   125|               background={colorBackgroundBlue()}
   126|               padding={4}
   127|               style={{maxWidth: '100px'}}
   128|             >
   129|               <Icon name="account_circle" />
   130|               <MiddleTruncate text={LONG_TEXT} />
   131|             </Box>
   132|             <Box
   133|               flex={{direction: 'row', gap: 4}}
   134|               background={colorBackgroundBlue()}
   135|               padding={4}
   136|               style={{maxWidth: '300px'}}
   137|             >
   138|               <Icon name="account_circle" />
   139|               <MiddleTruncate text={LONG_TEXT} />
   140|             </Box>
   141|             <Box
   142|               flex={{direction: 'row', gap: 4}}
   143|               background={colorBackgroundBlue()}
   144|               padding={4}
   145|               style={{width: '100%'}}
   146|             >
   147|               <Icon name="account_circle" />
   148|               <div style={{flex: 1, overflow: 'hidden'}}>
   149|                 <MiddleTruncate text={LONG_TEXT} />
   150|               </div>
   151|             </Box>
   152|             <Box flex={{direction: 'row', gap: 4}} background={colorBackgroundBlue()} padding={4}>
   153|               <Icon name="account_circle" />
   154|               <MiddleTruncate text={LONG_TEXT} />
   155|             </Box>
   156|           </Box>
   157|         </Box>
   158|         <Box margin={{bottom: 12}}>
   159|           <Box
   160|             flex={{direction: 'column', gap: 8, alignItems: 'flex-start'}}
   161|             background={colorBackgroundLight()}
   162|             padding={12}
   163|             style={{overflow: 'hidden'}}
   164|           >
   165|             <MiddleTruncate text={SHORT_TEXT} />
   166|             <Box
   167|               flex={{direction: 'row', gap: 4}}
   168|               background={colorBackgroundBlue()}
   169|               padding={4}
   170|               style={{maxWidth: '100px'}}
   171|             >
   172|               <Icon name="account_circle" />
   173|               <MiddleTruncate text={SHORT_TEXT} />
   174|             </Box>
   175|             <Box
   176|               flex={{direction: 'row', gap: 4}}
   177|               background={colorBackgroundBlue()}
   178|               padding={4}
   179|               style={{maxWidth: '60px'}}
   180|             >
   181|               <Icon name="account_circle" />
   182|               <MiddleTruncate text={SHORT_TEXT} />
   183|             </Box>
   184|             <Box
   185|               flex={{direction: 'row', gap: 4}}
   186|               background={colorBackgroundBlue()}
   187|               padding={4}
   188|               style={{maxWidth: '100%'}}
   189|             >
   190|               <Icon name="account_circle" />
   191|               <MiddleTruncate text={SHORT_TEXT} />
   192|             </Box>
   193|             <Box flex={{direction: 'row', gap: 4}} background={colorBackgroundBlue()} padding={4}>
   194|               <Icon name="account_circle" />
   195|               <MiddleTruncate text={SHORT_TEXT} />
   196|             </Box>
   197|           </Box>
   198|         </Box>
   199|       </div>
   200|     </>
   201|   );
   202| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/ProgressBar.stories.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-28 ---
     1| import {Meta} from '@storybook/react';
     2| import * as React from 'react';
     3| import {colorAccentBlue} from '../../theme/color';
     4| import {Box} from '../Box';
     5| import {Group} from '../Group';
     6| import {ProgressBar} from '../ProgressBar';
     7| export default {
     8|   title: 'ProgressBar',
     9|   component: ProgressBar,
    10| } as Meta;
    11| export const Sizes = () => {
    12|   return (
    13|     <Group direction="column" spacing={32}>
    14|       <Box padding={20} border="all">
    15|         <Group direction="column" spacing={16}>
    16|           <ProgressBar intent="primary" value={0.1} animate={true} />
    17|           <ProgressBar intent="primary" value={0.7} />
    18|         </Group>
    19|       </Box>
    20|       <Box padding={20} border="all">
    21|         <Group direction="column" spacing={16}>
    22|           <ProgressBar intent="primary" value={0.1} animate={true} fillColor={colorAccentBlue()} />
    23|           <ProgressBar intent="primary" value={0.7} fillColor={colorAccentBlue()} />
    24|         </Group>
    25|       </Box>
    26|     </Group>
    27|   );
    28| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/Slider.stories.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-61 ---
     1| import {Intent} from '@blueprintjs/core';
     2| import {Meta} from '@storybook/react';
     3| import * as React from 'react';
     4| import {colorAccentBlue} from '../../theme/color';
     5| import {Group} from '../Group';
     6| import {Slider, MultiSlider} from '../Slider';
     7| export default {
     8|   title: 'Slider',
     9|   component: Slider,
    10| } as Meta;
    11| export const Sizes = () => {
    12|   const [value, setValue] = React.useState(2);
    13|   const [minValue, setMinValue] = React.useState(1);
    14|   return (
    15|     <Group direction="column" spacing={32}>
    16|       <Slider value={value} onChange={setValue} max={10} labelStepSize={2} />
    17|       <Slider
    18|         vertical
    19|         min={0}
    20|         max={10}
    21|         stepSize={1}
    22|         value={value}
    23|         labelRenderer={false}
    24|         onChange={setValue}
    25|       />
    26|       <MultiSlider
    27|         min={0}
    28|         max={10}
    29|         stepSize={0.1}
    30|         labelRenderer={(value: number) => (
    31|           <span style={{whiteSpace: 'nowrap'}}>Value: {value.toFixed(1)}</span>
    32|         )}
    33|         onChange={(values: number[]) => {
    34|           const [first] = values;
    35|           first && setValue(first);
    36|         }}
    37|       >
    38|         <MultiSlider.Handle value={value} type="full" intentAfter={Intent.PRIMARY} />
    39|       </MultiSlider>
    40|       <MultiSlider
    41|         min={0}
    42|         max={10}
    43|         stepSize={0.01}
    44|         fillColor={colorAccentBlue()}
    45|         labelRenderer={(value: number) => (
    46|           <span style={{whiteSpace: 'nowrap'}}>Value: {value.toFixed(1)}</span>
    47|         )}
    48|         onChange={(values: number[]) => {
    49|           const [first, second] = values;
    50|           if (typeof first === 'number' && typeof second === 'number') {
    51|             setMinValue(Math.min(first, second));
    52|             setValue(Math.max(first, second));
    53|           }
    54|         }}
    55|       >
    56|         <MultiSlider.Handle value={minValue} type="full" intentAfter={Intent.PRIMARY} />
    57|         <MultiSlider.Handle value={value} type="full" intentBefore={Intent.PRIMARY} />
    58|       </MultiSlider>
    59|     </Group>
    60|   );
    61| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/Spinner.stories.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-53 ---
     1| import {Meta} from '@storybook/react';
     2| import * as React from 'react';
     3| import {colorAccentBlue} from '../../theme/color';
     4| import {Box} from '../Box';
     5| import {Group} from '../Group';
     6| import {Spinner} from '../Spinner';
     7| import {Caption, Code} from '../Text';
     8| export default {
     9|   title: 'Spinner',
    10|   component: Spinner,
    11| } as Meta;
    12| export const Sizes = () => {
    13|   return (
    14|     <Group direction="column" spacing={32}>
    15|       <Box padding={20} border="all">
    16|         <Group direction="column" spacing={16}>
    17|           <Code>purpose=&quot;caption-text&quot;</Code>
    18|           <Group direction="row" spacing={8} alignItems="center">
    19|             <Spinner purpose="caption-text" />
    20|             <Caption>Waiting for something to load</Caption>
    21|           </Group>
    22|         </Group>
    23|       </Box>
    24|       <Box padding={20} border="all">
    25|         <Group direction="column" spacing={16}>
    26|           <Code>purpose=&quot;body-text&quot;</Code>
    27|           <Group direction="row" spacing={8} alignItems="center">
    28|             <Spinner purpose="body-text" />
    29|             <div>Waiting for something to load</div>
    30|           </Group>
    31|         </Group>
    32|       </Box>
    33|       <Box padding={20} border="all">
    34|         <Group direction="column" spacing={16}>
    35|           <Code>purpose=&quot;section&quot;</Code>
    36|           <Box flex={{direction: 'row', justifyContent: 'center', gap: 10}} padding={24}>
    37|             <Spinner purpose="section" />
    38|             <Spinner purpose="section" fillColor={colorAccentBlue()} />
    39|           </Box>
    40|         </Group>
    41|       </Box>
    42|       <Box padding={20} border="all">
    43|         <Group direction="column" spacing={16}>
    44|           <Code>purpose=&quot;page&quot;</Code>
    45|           <Box flex={{direction: 'row', justifyContent: 'center', gap: 10}} padding={48}>
    46|             <Spinner purpose="page" />
    47|             <Spinner purpose="page" fillColor={colorAccentBlue()} />
    48|           </Box>
    49|         </Group>
    50|       </Box>
    51|     </Group>
    52|   );
    53| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/Tabs.stories.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-40 ---
     1| import {Meta} from '@storybook/react';
     2| import * as React from 'react';
     3| import {colorAccentYellow} from '../../theme/color';
     4| import {Group} from '../Group';
     5| import {Icon} from '../Icon';
     6| import {Tabs, Tab} from '../Tabs';
     7| export default {
     8|   title: 'Tabs',
     9|   component: Tabs,
    10| } as Meta;
    11| export const Default = () => {
    12|   const [tab, setTab] = React.useState('health');
    13|   return (
    14|     <Group spacing={0} direction="column">
    15|       <Tabs selectedTabId={tab} onChange={setTab}>
    16|         <Tab id="health" title="Health" />
    17|         <Tab id="schedules" title="Schedules" count={2} />
    18|         <Tab
    19|           id="sensors"
    20|           title="Sensors"
    21|           icon={<Icon name="warning" color={colorAccentYellow()} />}
    22|         />
    23|         <Tab id="backfills" title="Backfills" disabled />
    24|         <Tab id="config" title={<a href="/?path=/story/box">Box Component</a>} />
    25|       </Tabs>
    26|       <Tabs small selectedTabId={tab} onChange={setTab}>
    27|         <Tab id="health" title="Health" />
    28|         <Tab id="schedules" title="Schedules" count={2} disabled />
    29|         <Tab
    30|           id="sensors"
    31|           title="Sensors"
    32|           disabled
    33|           icon={<Icon name="warning" color={colorAccentYellow()} />}
    34|         />
    35|         <Tab id="backfills" title="Backfills" disabled />
    36|         <Tab id="config" disabled title={<a href="/?path=/story/box">Box Component</a>} />
    37|       </Tabs>
    38|     </Group>
    39|   );
    40| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/TagSelector.stories.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-26 ---
     1| import {Meta} from '@storybook/react';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| import {colorAccentGray, colorAccentGreen} from '../../theme/color';
     5| import {Box} from '../Box';
     6| import {Checkbox} from '../Checkbox';
     7| import {Icon} from '../Icon';
     8| import {Menu, MenuDivider, MenuItem} from '../Menu';
     9| import {TagSelector, TagSelectorWithSearch} from '../TagSelector';
    10| export default {
    11|   title: 'TagSelector',
    12|   component: TagSelector,
    13| } as Meta;
    14| const allTags = [
    15|   'NY',
    16|   'NJ',
    17|   'VC',
    18|   'FL',
    19|   'AL',
    20|   'CALIFORNIA_SUPER_LONG_TAG',
    21|   'ANOTHER_REALLY_LONG_TAG',
    22|   'LONG_TAGS_ARE_GREAT_FOR_TESTING_DECEMBER_2020',
    23| ];
    24| export const Basic = () => {
    25|   const [selectedTags, setSelectedTags] = React.useState<string[]>(['NY', 'NJ']);
    26|   return (

# --- HUNK 2: Lines 40-80 ---
    40| export const Styled = () => {
    41|   const [selectedTags, setSelectedTags] = React.useState<string[]>(allTags.slice(0, 2));
    42|   const isAllSelected = selectedTags.length === 6;
    43|   return (
    44|     <TagSelector
    45|       allTags={allTags}
    46|       selectedTags={selectedTags}
    47|       setSelectedTags={setSelectedTags}
    48|       placeholder="Select a partition or create one"
    49|       renderDropdownItem={(tag, dropdownItemProps) => {
    50|         return (
    51|           <label>
    52|             <MenuItem
    53|               tagName="div"
    54|               text={
    55|                 <Box flex={{alignItems: 'center', gap: 12}}>
    56|                   <Checkbox
    57|                     checked={dropdownItemProps.selected}
    58|                     onChange={dropdownItemProps.toggle}
    59|                   />
    60|                   <Dot color={Math.random() > 0.5 ? colorAccentGreen() : colorAccentGray()} />
    61|                   <span>{tag}</span>
    62|                 </Box>
    63|               }
    64|             />
    65|           </label>
    66|         );
    67|       }}
    68|       renderDropdown={(dropdown) => {
    69|         const toggleAll = () => {
    70|           if (isAllSelected) {
    71|             setSelectedTags([]);
    72|           } else {
    73|             setSelectedTags(allTags);
    74|           }
    75|         };
    76|         return (
    77|           <Menu>
    78|             <Box padding={4}>
    79|               <Box flex={{direction: 'column'}} padding={{horizontal: 8}}>
    80|                 <Box flex={{direction: 'row', alignItems: 'center'}}>


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/TextArea.stories.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-42 ---
     1| import {Meta} from '@storybook/react';
     2| import * as React from 'react';
     3| import {colorAccentRed} from '../../theme/color';
     4| import {TextArea} from '../TextInput';
     5| export default {
     6|   title: 'TextArea',
     7|   component: TextArea,
     8| } as Meta;
     9| export const Default = () => {
    10|   const [value, setValue] = React.useState('');
    11|   return (
    12|     <TextArea
    13|       placeholder="Type anything"
    14|       value={value}
    15|       onChange={(e) => setValue(e.target.value)}
    16|       $resize="none"
    17|     />
    18|   );
    19| };
    20| export const Resize = () => {
    21|   const [value, setValue] = React.useState('');
    22|   return (
    23|     <TextArea
    24|       placeholder="Type anything"
    25|       value={value}
    26|       onChange={(e) => setValue(e.target.value)}
    27|       $resize="vertical"
    28|     />
    29|   );
    30| };
    31| export const StrokeColor = () => {
    32|   const [value, setValue] = React.useState('');
    33|   return (
    34|     <TextArea
    35|       placeholder="Type anything"
    36|       value={value}
    37|       onChange={(e) => setValue(e.target.value)}
    38|       $resize="none"
    39|       $strokeColor={colorAccentRed()}
    40|     />
    41|   );
    42| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/TextInput.stories.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-54 ---
     1| import {Meta} from '@storybook/react';
     2| import * as React from 'react';
     3| import {colorAccentPrimary, colorAccentRed} from '../../theme/color';
     4| import {Icon} from '../Icon';
     5| import {TextInput} from '../TextInput';
     6| export default {
     7|   title: 'TextInput',
     8|   component: TextInput,
     9| } as Meta;
    10| export const Default = () => {
    11|   const [value, setValue] = React.useState('');
    12|   return (
    13|     <TextInput
    14|       placeholder="Type anything"
    15|       value={value}
    16|       onChange={(e) => setValue(e.target.value)}
    17|     />
    18|   );
    19| };
    20| export const WithIcon = () => {
    21|   const [value, setValue] = React.useState('');
    22|   return (
    23|     <TextInput
    24|       icon="layers"
    25|       placeholder="Type anything"
    26|       value={value}
    27|       onChange={(e) => setValue(e.target.value)}
    28|     />
    29|   );
    30| };
    31| export const StrokeColor = () => {
    32|   const [value, setValue] = React.useState('');
    33|   return (
    34|     <TextInput
    35|       icon="layers"
    36|       placeholder="Type anything"
    37|       value={value}
    38|       onChange={(e) => setValue(e.target.value)}
    39|       strokeColor={colorAccentRed()}
    40|     />
    41|   );
    42| };
    43| export const RightElement = () => {
    44|   const [value, setValue] = React.useState('');
    45|   return (
    46|     <TextInput
    47|       icon="layers"
    48|       placeholder="Type anything"
    49|       value={value}
    50|       onChange={(e) => setValue(e.target.value)}
    51|       rightElement={<Icon name="info" color={colorAccentPrimary()} />}
    52|     />
    53|   );
    54| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/TokenizingField.stories.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-29 ---
     1| import {Meta} from '@storybook/react';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| import {
     5|   colorAccentRed,
     6|   colorAccentGreen,
     7|   colorAccentBlue,
     8|   colorAccentYellow,
     9| } from '../../theme/color';
    10| import {Group} from '../Group';
    11| import {
    12|   Suggestion,
    13|   SuggestionProvider,
    14|   TokenizingField,
    15|   TokenizingFieldValue,
    16| } from '../TokenizingField';
    17| export default {
    18|   title: 'TokenizingField',
    19|   component: TokenizingField,
    20| } as Meta;
    21| export const Default = () => {
    22|   const [value, setValue] = React.useState<TokenizingFieldValue[]>([]);
    23|   const suggestions = [
    24|     {
    25|       token: 'pipeline',
    26|       values: () => ['airline_demo_ingest', 'airline_demo_warehouse', 'composition'],
    27|     },
    28|     {
    29|       token: 'status',

# --- HUNK 2: Lines 63-106 ---
    63|       values: () => ['core@dagsterlabs.com', 'cloud@dagsterlabs.com'],
    64|     },
    65|     {
    66|       values: () => Object.keys(users),
    67|       suggestionFilter: (typed: string, s: Suggestion) =>
    68|         s.text.toLowerCase().includes(typed.toLowerCase()) ||
    69|         (users as any)[s.text].toLowerCase().includes(typed.toLowerCase()),
    70|     },
    71|   ];
    72|   return (
    73|     <TokenizingField
    74|       values={value}
    75|       onChange={(values) => setValue(values)}
    76|       suggestionProviders={suggestions}
    77|     />
    78|   );
    79| };
    80| export const CustomSuggestionRenderer = () => {
    81|   const [value, setValue] = React.useState<TokenizingFieldValue[]>([]);
    82|   const colors = {
    83|     Red: colorAccentRed(),
    84|     Green: colorAccentGreen(),
    85|     Blue: colorAccentBlue(),
    86|     Yellow: colorAccentYellow(),
    87|   };
    88|   const suggestionProviders: SuggestionProvider[] = [{values: () => Object.keys(colors)}];
    89|   return (
    90|     <TokenizingField
    91|       values={value}
    92|       onChange={(values) => setValue(values)}
    93|       suggestionProviders={suggestionProviders}
    94|       suggestionRenderer={(suggestion) => (
    95|         <Group direction="row" spacing={8} alignItems="center">
    96|           <ColorSwatch $color={suggestion.text} />
    97|           {suggestion.text}
    98|         </Group>
    99|       )}
   100|     />
   101|   );
   102| };
   103| const ColorSwatch = styled.div<{$color: string}>`
   104|   border-radius: 50%;
   105|   background-color: ${(p) => p.$color};
   106|   width: 16px;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/Tooltip.stories.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-98 ---
     1| import {Meta} from '@storybook/react';
     2| import * as React from 'react';
     3| import {
     4|   colorAccentYellow,
     5|   colorBackgroundDefault,
     6|   colorBorderDefault,
     7|   colorTextDefault,
     8|   colorTextLight,
     9| } from '../../theme/color';
    10| import {Box} from '../Box';
    11| import {Button} from '../Button';
    12| import {Checkbox} from '../Checkbox';
    13| import {CustomTooltipProvider} from '../CustomTooltipProvider';
    14| import {Group} from '../Group';
    15| import {Icon} from '../Icon';
    16| import {Tooltip, GlobalTooltipStyle} from '../Tooltip';
    17| const SOLID_STYLES: React.CSSProperties = {
    18|   background: colorBackgroundDefault(),
    19|   transform: 'translate(0,0)',
    20|   border: `1px solid ${colorAccentYellow()}`,
    21|   color: colorTextDefault(),
    22|   fontSize: '12px',
    23|   padding: 6,
    24| };
    25| const JOB_STYLES: React.CSSProperties = {
    26|   background: colorBackgroundDefault(),
    27|   border: `1px solid ${colorBorderDefault()}`,
    28|   color: colorTextDefault(),
    29|   fontSize: '15px',
    30|   padding: 3,
    31| };
    32| export default {
    33|   title: 'Tooltip',
    34|   component: Tooltip,
    35| } as Meta;
    36| export const Default = () => {
    37|   const content = (
    38|     <>
    39|       View snapshot as of <strong>12cad35e</strong>
    40|     </>
    41|   );
    42|   return (
    43|     <Group spacing={8} direction="column">
    44|       <CustomTooltipProvider />
    45|       <GlobalTooltipStyle />
    46|       <p style={{color: colorTextLight()}}>
    47|         Use the <code>Tooltip</code> component to attach additional explanations, descriptions, and
    48|         context to controls, icons, etc.
    49|       </p>
    50|       <Tooltip content={content} placement="bottom">
    51|         Tooltip Below
    52|       </Tooltip>
    53|       <Tooltip content={content} placement="top">
    54|         Tooltip Above
    55|       </Tooltip>
    56|       <Tooltip
    57|         content={content}
    58|         modifiers={{offset: {enabled: true, options: {offset: [0, 16]}}}}
    59|         placement="right"
    60|       >
    61|         Tooltip After, Custom Offset
    62|       </Tooltip>
    63|       <Tooltip
    64|         content={
    65|           <div style={{display: 'flex', width: 400, gap: 8}}>
    66|             <Icon name="warning" color={colorAccentYellow()} />
    67|             <div>
    68|               Wow, who would have thought you can put an entire paragraph into a tooltip? Just
    69|               don&apos;t try to put interactable content here, they don&apos;t hold focus.
    70|             </div>
    71|           </div>
    72|         }
    73|         placement="top"
    74|       >
    75|         Tooltip with Block Content
    76|       </Tooltip>
    77|       <hr />
    78|       <p style={{color: colorTextLight()}}>
    79|         Use the <code>data-tooltip</code> attribute to expand truncated job, op names, etc. on
    80|         hover. These are highly stylable via <code>data-tooltip-style</code> so they can look like
    81|         boxes / nodes expanding in place to reveal their full text. There is no per-component render
    82|         cost to these annotations so they can be used in cases when thousands of nodes are rendered.
    83|         <br />
    84|         <br />
    85|         These tooltips automatically appear only when the content is truncated or when content
    86|         contains a <code></code>
    87|       </p>
    88|       {['short_solid', 'long_solid_name_here'].map((name) => (
    89|         <div
    90|           key={name}
    91|           data-tooltip={name}
    92|           data-tooltip-style={JSON.stringify(SOLID_STYLES)}
    93|           style={{
    94|             width: '100px',
    95|             overflow: 'hidden',
    96|             textOverflow: 'ellipsis',
    97|             position: 'relative',
    98|             ...SOLID_STYLES,


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/UnstyledButton.stories.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-48 ---
     1| import {Meta} from '@storybook/react';
     2| import * as React from 'react';
     3| import {colorAccentBlue} from '../../theme/color';
     4| import {Box} from '../Box';
     5| import {Icon} from '../Icon';
     6| import {Caption} from '../Text';
     7| import {UnstyledButton} from '../UnstyledButton';
     8| export default {
     9|   title: 'UnstyledButton',
    10|   component: UnstyledButton,
    11| } as Meta;
    12| export const Default = () => {
    13|   return (
    14|     <Box flex={{direction: 'column', gap: 12, alignItems: 'flex-start'}}>
    15|       <UnstyledButton>No style here at all</UnstyledButton>
    16|       <UnstyledButton>
    17|         <Caption>Hey I am a Caption</Caption>
    18|       </UnstyledButton>
    19|       <UnstyledButton>
    20|         <Box flex={{direction: 'row', gap: 8, alignItems: 'center'}}>
    21|           <Icon name="account_tree" />
    22|           <div>A button with icon and text</div>
    23|         </Box>
    24|       </UnstyledButton>
    25|       <UnstyledButton disabled>Disabled button</UnstyledButton>
    26|       <UnstyledButton>
    27|         <span style={{color: colorAccentBlue()}}>Button with blue text</span>
    28|       </UnstyledButton>
    29|       <UnstyledButton disabled>
    30|         <span style={{color: colorAccentBlue()}}>Disabled button with blue text</span>
    31|       </UnstyledButton>
    32|     </Box>
    33|   );
    34| };
    35| export const UnstyledWithLargerClickArea = () => {
    36|   return (
    37|     <Box padding={24}>
    38|       <UnstyledButton $expandedClickPx={24}>Lots more to click on</UnstyledButton>
    39|     </Box>
    40|   );
    41| };
    42| export const UnstyledWithFocusOutline = () => {
    43|   return (
    44|     <UnstyledButton $showFocusOutline $expandedClickPx={4}>
    45|       Click me to see focus
    46|     </UnstyledButton>
    47|   );
    48| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/useSuggestionsForString.stories.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-65 ---
     1| import {Meta} from '@storybook/react';
     2| import * as React from 'react';
     3| import {colorBorderDefault} from '../../theme/color';
     4| import {ButtonLink} from '../ButtonLink';
     5| import {Group} from '../Group';
     6| import {useSuggestionsForString} from '../useSuggestionsForString';
     7| export default {
     8|   title: 'useSuggestionsForString',
     9| } as Meta;
    10| const empties = ['query:', 'prez:', 'state:'];
    11| const values = [
    12|   ...empties,
    13|   'prez:washington',
    14|   'prez:adams',
    15|   'prez:jefferson',
    16|   'state:hull',
    17|   'state:rusk',
    18|   'state:shultz',
    19| ];
    20| export const Example = () => {
    21|   const [value, setValue] = React.useState('');
    22|   const buildSuggestions = React.useCallback(
    23|     (queryString: string): string[] =>
    24|       queryString
    25|         ? values.filter((value) => value.toLowerCase().startsWith(queryString))
    26|         : [...empties],
    27|     [],
    28|   );
    29|   const {suggestions, onSelectSuggestion} = useSuggestionsForString(buildSuggestions, value);
    30|   const onChange = React.useCallback(
    31|     (e: React.ChangeEvent<HTMLInputElement>) => setValue(e.target.value),
    32|     [setValue],
    33|   );
    34|   return (
    35|     <Group direction="column" spacing={12}>
    36|       <input
    37|         type="text"
    38|         value={value}
    39|         onChange={onChange}
    40|         style={{
    41|           border: `1px solid ${colorBorderDefault()}`,
    42|           borderRadius: '3px',
    43|           padding: '8px',
    44|           fontSize: '14px',
    45|           width: '500px',
    46|         }}
    47|         placeholder="Type something"
    48|       />
    49|       <div>
    50|         {suggestions.map((suggestion) => (
    51|           <div key={suggestion}>
    52|             <ButtonLink
    53|               onMouseDown={(e: React.MouseEvent<any>) => {
    54|                 e.preventDefault();
    55|                 setValue(onSelectSuggestion(suggestion));
    56|               }}
    57|             >
    58|               {suggestion}
    59|             </ButtonLink>
    60|           </div>
    61|         ))}
    62|       </div>
    63|     </Group>
    64|   );
    65| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/configeditor/ConfigEditorHelp.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-54 ---
     1| import * as React from 'react';
     2| import styled from 'styled-components';
     3| import {
     4|   colorBackgroundLight,
     5|   colorKeylineDefault,
     6|   colorTextDefault,
     7|   colorTextLight,
     8| } from '../../theme/color';
     9| import {ConfigTypeSchema, TypeData} from '../ConfigTypeSchema';
    10| import {isHelpContextEqual} from '../configeditor/isHelpContextEqual';
    11| import {ConfigEditorHelpContext} from './types/ConfigEditorHelpContext';
    12| interface ConfigEditorHelpProps {
    13|   context: ConfigEditorHelpContext | null;
    14|   allInnerTypes: TypeData[];
    15| }
    16| export const ConfigEditorHelp = React.memo(
    17|   ({context, allInnerTypes}: ConfigEditorHelpProps) => {
    18|     if (!context) {
    19|       return <Container />;
    20|     }
    21|     return (
    22|       <Container>
    23|         <ConfigScrollWrap>
    24|           <ConfigTypeSchema type={context.type} typesInScope={allInnerTypes} maxDepth={2} />
    25|         </ConfigScrollWrap>
    26|         <AutocompletionsNote>Use Ctrl+Space to show auto-completions inline.</AutocompletionsNote>
    27|       </Container>
    28|     );
    29|   },
    30|   (prev, next) => isHelpContextEqual(prev.context, next.context),
    31| );
    32| const AutocompletionsNote = styled.div`
    33|   font-size: 0.75rem;
    34|   text-align: center;
    35|   padding: 4px;
    36|   border-top: 1px solid ${colorKeylineDefault()};
    37|   background: ${colorBackgroundLight()};
    38|   color: ${colorTextLight()};
    39| `;
    40| const ConfigScrollWrap = styled.div`
    41|   padding: 8px;
    42|   color: ${colorTextDefault()};
    43|   flex: 1;
    44|   pointer-events: initial;
    45|   max-height: 100%;
    46|   overflow-y: auto;
    47| `;
    48| const Container = styled.div`
    49|   position: relative;
    50|   display: flex;
    51|   flex-direction: column;
    52|   background-color: ${colorBackgroundLight()};
    53|   height: 100%;
    54| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/index.ts
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-29 ---
     1| export * from './components/Alert';
     2| export * from './components/BaseButton';
     3| export * from './components/BaseTag';
     4| export * from './components/Box';
     5| export * from './components/Button';
     6| export * from './components/ButtonGroup';
     7| export * from './components/ButtonLink';
     8| export * from './components/Checkbox';
     9| export * from './components/LegacyColors';
    10| export * from './components/ConfigEditorDialog';
    11| export * from './components/ConfigEditorWithSchema';
    12| export * from './components/ConfigTypeSchema';
    13| export * from './components/Countdown';
    14| export * from './components/CursorControls';
    15| export * from './components/CustomTooltipProvider';
    16| export * from './components/Icon';
    17| export * from './components/Dialog';
    18| export * from './components/Group';
    19| export * from './components/MainContent';
    20| export * from './components/Menu';
    21| export * from './components/MetadataTable';
    22| export * from './components/MiddleTruncate';
    23| export * from './components/NewConfigEditor';
    24| export * from './components/NonIdealState';
    25| export * from './components/Page';
    26| export * from './components/PageHeader';
    27| export * from './components/Popover';
    28| export * from './components/ProductTour';
    29| export * from './components/Radio';

# --- HUNK 2: Lines 37-60 ---
    37| export * from './components/Suggest';
    38| export * from './components/Table';
    39| export * from './components/Tabs';
    40| export * from './components/Tag';
    41| export * from './components/TagSelector';
    42| export * from './components/Text';
    43| export * from './components/TextInput';
    44| export * from './components/Toaster';
    45| export * from './components/TokenizingField';
    46| export * from './components/Tooltip';
    47| export * from './components/Trace';
    48| export * from './components/Warning';
    49| export * from './components/styles';
    50| export * from './components/useSuggestionsForString';
    51| export * from './components/ErrorBoundary';
    52| export * from './components/useViewport';
    53| export * from './components/UnstyledButton';
    54| export * from './components/StyledRawCodeMirror';
    55| export * from './components/useDelayedState';
    56| export * from './components/ifPlural';
    57| export * from './theme/color';
    58| export * from './palettes/Colors';
    59| export * from './fonts/GlobalInconsolata';
    60| export * from './fonts/GlobalInter';


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/palettes/ColorName.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-118 ---
     1| export enum ColorName {
     2|   BrowserColorScheme = 'BrowserColorScheme',
     3|   KeylineDefault = 'KeylineDefault',
     4|   LinkDefault = 'LinkDefault',
     5|   LinkHover = 'LinkHover',
     6|   LinkDisabled = 'LinkDisabled',
     7|   TextDefault = 'TextDefault',
     8|   TextLight = 'TextLight',
     9|   TextLighter = 'TextLighter',
    10|   TextDisabled = 'TextDisabled',
    11|   TextRed = 'TextRed',
    12|   TextYellow = 'TextYellow',
    13|   TextGreen = 'TextGreen',
    14|   TextBlue = 'TextBlue',
    15|   TextOlive = 'TextOlive',
    16|   TextCyan = 'TextCyan',
    17|   TextLime = 'TextLime',
    18|   BackgroundDefault = 'BackgroundDefault',
    19|   BackgroundDefaultHover = 'BackgroundDefaultHover',
    20|   BackgroundLight = 'BackgroundLight',
    21|   BackgroundLightHover = 'BackgroundLightHover',
    22|   BackgroundLighter = 'BackgroundLighter',
    23|   BackgroundLighterHover = 'BackgroundLighterHover',
    24|   BackgroundDisabled = 'BackgroundDisabled',
    25|   BackgroundRed = 'BackgroundRed',
    26|   BackgroundRedHover = 'BackgroundRedHover',
    27|   BackgroundYellow = 'BackgroundYellow',
    28|   BackgroundYellowHover = 'BackgroundYellowHover',
    29|   BackgroundGreen = 'BackgroundGreen',
    30|   BackgroundGreenHover = 'BackgroundGreenHover',
    31|   BackgroundBlue = 'BackgroundBlue',
    32|   BackgroundBlueHover = 'BackgroundBlueHover',
    33|   BackgroundOlive = 'BackgroundOlive',
    34|   BackgroundOliverHover = 'BackgroundOliverHover',
    35|   BackgroundCyan = 'BackgroundCyan',
    36|   BackgroundCyanHover = 'BackgroundCyanHover',
    37|   BackgroundLime = 'BackgroundLime',
    38|   BackgroundLimeHover = 'BackgroundLimeHover',
    39|   BackgroundGray = 'BackgroundGray',
    40|   BackgroundGrayHover = 'BackgroundGrayHover',
    41|   BorderDefault = 'BorderDefault',
    42|   BorderHover = 'BorderHover',
    43|   BorderDisabled = 'BorderDisabled',
    44|   FocusRing = 'FocusRing',
    45|   AccentPrimary = 'AccentPrimary',
    46|   AccentPrimaryHover = 'AccentPrimaryHover',
    47|   AccentReversed = 'AccentReversed',
    48|   AccentReversedHover = 'AccentReversedHover',
    49|   AccentRed = 'AccentRed',
    50|   AccentRedHover = 'AccentRedHover',
    51|   AccentYellow = 'AccentYellow',
    52|   AccentYellowHover = 'AccentYellowHover',
    53|   AccentGreen = 'AccentGreen',
    54|   AccentGreenHover = 'AccentGreenHover',
    55|   AccentBlue = 'AccentBlue',
    56|   AccentBlueHover = 'AccentBlueHover',
    57|   AccentCyan = 'AccentCyan',
    58|   AccentCyanHover = 'AccentCyanHover',
    59|   AccentLime = 'AccentLime',
    60|   AccentLimeHover = 'AccentLimeHover',
    61|   AccentLavender = 'AccentLavender',
    62|   AccentLavenderHover = 'AccentLavenderHover',
    63|   AccentOlive = 'AccentOlive',
    64|   AccentOliveHover = 'AccentOliveHover',
    65|   AccentGray = 'AccentGray',
    66|   AccentGrayHover = 'AccentGrayHover',
    67|   AccentWhite = 'AccentWhite',
    68|   DialogBackground = 'DialogBackground',
    69|   TooltipBackground = 'TooltipBackground',
    70|   TooltipText = 'TooltipText',
    71|   PopoverBackground = 'PopoverBackground',
    72|   PopoverBackgroundHover = 'PopoverBackgroundHover',
    73|   NavBackground = 'NavBackground',
    74|   NavText = 'NavText',
    75|   NavTextHover = 'NavTextHover',
    76|   NavTextSelected = 'NavTextSelected',
    77|   NavButton = 'NavButton',
    78|   NavButtonHover = 'NavButtonHover',
    79|   LineageDots = 'LineageDots',
    80|   LineageEdge = 'LineageEdge',
    81|   LineageEdgeHighlighted = 'LineageEdgeHighlighted',
    82|   LineageGroupNodeBackground = 'LineageGroupNodeBackground',
    83|   LineageGroupNodeBackgroundHover = 'LineageGroupNodeBackgroundHover',
    84|   LineageGroupNodeBorder = 'LineageGroupNodeBorder',
    85|   LineageGroupNodeBorderHover = 'LineageGroupNodeBorderHover',
    86|   LineageGroupBackground = 'LineageGroupBackground',
    87|   LineageNodeBackground = 'LineageNodeBackground',
    88|   LineageNodeBackgroundHover = 'LineageNodeBackgroundHover',
    89|   LineageNodeBorder = 'LineageNodeBorder',
    90|   LineageNodeBorderHover = 'LineageNodeBorderHover',
    91|   LineageNodeBorderSelected = 'LineageNodeBorderSelected',
    92|   DataVizBlue = 'DataVizBlue',
    93|   DataVizBlueAlt = 'DataVizBlueAlt',
    94|   DataVizBlurple = 'DataVizBlurple',
    95|   DataVizBlurpleAlt = 'DataVizBlurpleAlt',
    96|   DataVizBrown = 'DataVizBrown',
    97|   DataVizBrownAlt = 'DataVizBrownAlt',
    98|   DataVizCyan = 'DataVizCyan',
    99|   DataVizCyanAlt = 'DataVizCyanAlt',
   100|   DataVizGray = 'DataVizGray',
   101|   DataVizGrayAlt = 'DataVizGrayAlt',
   102|   DataVizGreen = 'DataVizGreen',
   103|   DataVizGreenAlt = 'DataVizGreenAlt',
   104|   DataVizLime = 'DataVizLime',
   105|   DataVizLimeAlt = 'DataVizLimeAlt',
   106|   DataVizOrange = 'DataVizOrange',
   107|   DataVizOrangeAlt = 'DataVizOrangeAlt',
   108|   DataVizPink = 'DataVizPink',
   109|   DataVizPinkAlt = 'DataVizPinkAlt',
   110|   DataVizRed = 'DataVizRed',
   111|   DataVizRedAlt = 'DataVizRedAlt',
   112|   DataVizTeal = 'DataVizTeal',
   113|   DataVizTealAlt = 'DataVizTealAlt',
   114|   DataVizViolet = 'DataVizViolet',
   115|   DataVizVioletAlt = 'DataVizVioletAlt',
   116|   DataVizYellow = 'DataVizYellow',
   117|   DataVizYellowAlt = 'DataVizYellowAlt',
   118| }


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/palettes/Colors.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-202 ---
     1| export const CoreColors = {
     2|   Blue990: 'rgba(14, 15, 52, 1)',
     3|   Blue950: 'rgba(17, 18, 62, 1)',
     4|   Blue900: 'rgba(25, 24, 82, 1)',
     5|   Blue800: 'rgba(33, 30, 102, 1)',
     6|   Blue700: 'rgba(48, 43, 141, 1)',
     7|   Blue600: 'rgba(64, 55, 181, 1)',
     8|   Blue500: 'rgba(79, 67, 221, 1)',
     9|   Blue400: 'rgba(114, 105, 228, 1)',
    10|   Blue300: 'rgba(149, 142, 235, 1)',
    11|   Blue200: 'rgba(185, 180, 241, 1)',
    12|   Blue100: 'rgba(220, 217, 248, 1)',
    13|   Blue50: 'rgba(237, 236, 252, 1)',
    14|   Blue10: 'rgba(246, 246, 253, 1)',
    15|   Red990: 'rgba(33, 15, 27, 1)',
    16|   Red950: 'rgba(44, 18, 28, 1)',
    17|   Red900: 'rgba(64, 24, 31, 1)',
    18|   Red800: 'rgba(85, 30, 34, 1)',
    19|   Red700: 'rgba(127, 42, 41, 1)',
    20|   Red600: 'rgba(168, 54, 47, 1)',
    21|   Red500: 'rgba(210, 66, 53, 1)',
    22|   Red400: 'rgba(219, 104, 93, 1)',
    23|   Red300: 'rgba(228, 142, 134, 1)',
    24|   Red200: 'rgba(237, 179, 174, 1)',
    25|   Red100: 'rgba(246, 217, 215, 1)',
    26|   Red50: 'rgba(250, 236, 235, 1)',
    27|   Red10: 'rgba(253, 246, 245, 1)',
    28|   Yellow990: 'rgba(36, 29, 26, 1)',
    29|   Yellow950: 'rgba(47, 36, 27, 1)',
    30|   Yellow900: 'rgba(70, 51, 30, 1)',
    31|   Yellow800: 'rgba(93, 66, 32, 1)',
    32|   Yellow700: 'rgba(138, 97, 37, 1)',
    33|   Yellow600: 'rgba(184, 127, 42, 1)',
    34|   Yellow500: 'rgba(229, 157, 47, 1)',
    35|   Yellow400: 'rgba(234, 177, 89, 1)',
    36|   Yellow300: 'rgba(239, 196, 130, 1)',
    37|   Yellow200: 'rgba(245, 216, 172, 1)',
    38|   Yellow100: 'rgba(245, 216, 172, 1)',
    39|   Yellow50: 'rgba(252, 245, 234, 1)',
    40|   Yellow10: 'rgba(252, 245, 234, 1)',
    41|   Green990: 'rgba(9, 36, 38, 1)',
    42|   Green950: 'rgba(11, 46, 43, 1)',
    43|   Green900: 'rgba(15, 65, 54, 1)',
    44|   Green800: 'rgba(20, 85, 65, 1)',
    45|   Green700: 'rgba(28, 125, 86, 1)',
    46|   Green600: 'rgba(37, 164, 108, 1)',
    47|   Green500: 'rgba(46, 204, 129, 1)',
    48|   Green400: 'rgba(88, 214, 154, 1)',
    49|   Green300: 'rgba(130, 224, 179, 1)',
    50|   Green200: 'rgba(171, 235, 205, 1)',
    51|   Green100: 'rgba(213, 245, 230, 1)',
    52|   Green50: 'rgba(234, 250, 242, 1)',
    53|   Green10: 'rgba(245, 252, 249, 1)',
    54|   Lime990: 'rgba(0, 38, 11, 1)',
    55|   Lime950: 'rgba(0, 38, 11, 1)',
    56|   Lime900: 'rgba(0, 101, 28, 1)',
    57|   Lime800: 'rgba(0, 155, 43, 1)',
    58|   Lime700: 'rgba(5, 213, 63, 1)',
    59|   Lime600: 'rgba(37, 240, 94, 1)',
    60|   Lime500: 'rgba(81, 233, 124, 1)',
    61|   Lime400: 'rgba(116, 237, 150, 1)',
    62|   Lime300: 'rgba(151, 242, 176, 1)',
    63|   Lime200: 'rgba(185, 246, 203, 1)',
    64|   Lime100: 'rgba(220, 251, 229, 1)',
    65|   Lime50: 'rgba(238, 253, 242, 1)',
    66|   Lime10: 'rgba(246, 254, 248, 1)',
    67|   Cyan990: 'rgba(13, 32, 50, 1)',
    68|   Cyan950: 'rgba(17, 41, 60, 1)',
    69|   Cyan900: 'rgba(24, 58, 78, 1)',
    70|   Cyan800: 'rgba(31, 76, 97, 1)',
    71|   Cyan700: 'rgba(46, 110, 135, 1)',
    72|   Cyan600: 'rgba(60, 145, 172, 1)',
    73|   Cyan500: 'rgba(75, 180, 210, 1)',
    74|   Cyan400: 'rgba(111, 195, 219, 1)',
    75|   Cyan300: 'rgba(147, 210, 228, 1)',
    76|   Cyan200: 'rgba(183, 225, 237, 1)',
    77|   Cyan100: 'rgba(219, 240, 246, 1)',
    78|   Cyan50: 'rgba(237, 247, 250, 1)',
    79|   Cyan10: 'rgba(246, 251, 253, 1)',
    80|   Olive990: 'rgba(25, 31, 41, 1)',
    81|   Olive950: 'rgba(33, 39, 48, 1)',
    82|   Olive900: 'rgba(48, 56, 61, 1)',
    83|   Olive800: 'rgba(64, 72, 74, 1)',
    84|   Olive700: 'rgba(94, 106, 99, 1)',
    85|   Olive600: 'rgba(125, 139, 125, 1)',
    86|   Olive500: 'rgba(156, 172, 151, 1)',
    87|   Olive400: 'rgba(176, 189, 172, 1)',
    88|   Olive300: 'rgba(196, 205, 193, 1)',
    89|   Olive200: 'rgba(215, 222, 213, 1)',
    90|   Olive100: 'rgba(235, 238, 234, 1)',
    91|   Olive50: 'rgba(245, 247, 245, 1)',
    92|   Olive10: 'rgba(250, 251, 250, 1)',
    93|   Gray990: 'rgba(3, 6, 21, 1)',
    94|   Gray950: 'rgba(13, 17, 33, 1)',
    95|   Gray900: 'rgba(23, 28, 44, 1)',
    96|   Gray850: 'rgba(33, 39, 56, 1)',
    97|   Gray800: 'rgba(43, 50, 68, 1)',
    98|   Gray750: 'rgba(53, 61, 80, 1)',
    99|   Gray700: 'rgba(63, 72, 91, 1)',
   100|   Gray650: 'rgba(73, 83, 103, 1)',
   101|   Gray600: 'rgba(83, 94, 115, 1)',
   102|   Gray550: 'rgba(93, 105, 126, 1)',
   103|   Gray500: 'rgba(103, 116, 138, 1)',
   104|   Gray450: 'rgba(118, 130, 150, 1)',
   105|   Gray400: 'rgba(133, 144, 161, 1)',
   106|   Gray350: 'rgba(149, 158, 173, 1)',
   107|   Gray300: 'rgba(164, 172, 185, 1)',
   108|   Gray250: 'rgba(179, 185, 197, 1)',
   109|   Gray200: 'rgba(194, 199, 208, 1)',
   110|   Gray150: 'rgba(209, 213, 220, 1)',
   111|   Gray100: 'rgba(225, 227, 232, 1)',
   112|   Gray50: 'rgba(240, 241, 243, 1)',
   113|   Gray10: 'rgba(247, 248, 249, 1)',
   114|   White: 'rgba(255, 255, 255, 1)',
   115| };
   116| export const TranslucentColors = {
   117|   Blue12: 'rgba(79, 67, 221, 0.12)',
   118|   Blue15: 'rgba(79, 67, 221, 0.15)',
   119|   Blue20: 'rgba(79, 67, 221, 0.20)',
   120|   Blue25: 'rgba(79, 67, 221, 0.25)',
   121|   Blue30: 'rgba(79, 67, 221, 0.30)',
   122|   Red12: 'rgba(210, 66, 53, 0.12)',
   123|   Red15: 'rgba(210, 66, 53, 0.15)',
   124|   Red20: 'rgba(210, 66, 53, 0.20)',
   125|   Red25: 'rgba(210, 66, 53, 0.25)',
   126|   Red30: 'rgba(210, 66, 53, 0.30)',
   127|   Yellow12: 'rgba(229, 157, 47, 0.12)',
   128|   Yellow15: 'rgba(229, 157, 47, 0.15)',
   129|   Yellow20: 'rgba(229, 157, 47, 0.20)',
   130|   Yellow25: 'rgba(229, 157, 47, 0.25)',
   131|   Yellow30: 'rgba(229, 157, 47, 0.30)',
   132|   Green12: 'rgba(46, 204, 129, 0.12)',
   133|   Green15: 'rgba(46, 204, 129, 0.15)',
   134|   Green20: 'rgba(46, 204, 129, 0.20)',
   135|   Green25: 'rgba(46, 204, 129, 0.25)',
   136|   Green30: 'rgba(46, 204, 129, 0.30)',
   137|   Lime12: 'rgba(81, 233, 124, 0.12)',
   138|   Lime15: 'rgba(81, 233, 124, 0.15)',
   139|   Lime20: 'rgba(81, 233, 124, 0.20)',
   140|   Lime25: 'rgba(81, 233, 124, 0.25)',
   141|   Lime30: 'rgba(81, 233, 124, 0.30)',
   142|   Olive12: 'rgba(156, 172, 151, 0.12)',
   143|   Olive15: 'rgba(156, 172, 151, 0.15)',
   144|   Olive20: 'rgba(156, 172, 151, 0.20)',
   145|   Olive25: 'rgba(156, 172, 151, 0.25)',
   146|   Olive30: 'rgba(156, 172, 151, 0.30)',
   147|   Cyan12: 'rgba(156, 172, 151, 0.12)',
   148|   Cyan15: 'rgba(156, 172, 151, 0.15)',
   149|   Cyan20: 'rgba(156, 172, 151, 0.20)',
   150|   Cyan25: 'rgba(156, 172, 151, 0.25)',
   151|   Cyan30: 'rgba(156, 172, 151, 0.30)',
   152|   Gray12: 'rgba(156, 172, 151, 0.12)',
   153|   Gray15: 'rgba(156, 172, 151, 0.15)',
   154|   Gray20: 'rgba(156, 172, 151, 0.20)',
   155|   Gray25: 'rgba(156, 172, 151, 0.25)',
   156|   Gray30: 'rgba(156, 172, 151, 0.30)',
   157|   Gray50: 'rgba(13, 17, 33, 0.50)',
   158|   Gray90: 'rgba(13, 17, 33, 0.90)',
   159|   LightWash: 'rgba(247, 248, 249, 0.40)',
   160|   DarkWash: 'rgba(13, 17, 33, 0.40)',
   161| };
   162| export const DataVizColors = {
   163|   Blue100: 'rgba(147, 197, 253, 1)',
   164|   Blue200: 'rgba(59, 130, 246, 1)',
   165|   Blue300: 'rgba(30, 64, 175, 1)',
   166|   Blurple100: 'rgba(149, 142, 235, 1)',
   167|   Blurple200: 'rgba(79, 67, 221, 1)',
   168|   Blurple300: 'rgba(35, 25, 138, 1)',
   169|   Brown100: 'rgba(245, 216, 172, 1)',
   170|   Brown200: 'rgba(234, 177, 89, 1)',
   171|   Brown300: 'rgba(93, 66, 32, 1)',
   172|   Cyan100: 'rgba(183, 225, 237, 1)',
   173|   Cyan200: 'rgba(75, 180, 210, 1)',
   174|   Cyan300: 'rgba(44, 87, 100, 1)',
   175|   Gray100: 'rgba(209, 213, 220, 1)',
   176|   Gray200: 'rgba(133, 144, 161, 1)',
   177|   Gray300: 'rgba(3, 6, 21, 1)',
   178|   Green100: 'rgba(171, 235, 205, 1)',
   179|   Green200: 'rgba(46, 204, 129, 1)',
   180|   Green300: 'rgba(28, 125, 86, 1)',
   181|   Lime100: 'rgba(185, 246, 203, 1)',
   182|   Lime200: 'rgba(116, 237, 150, 1)',
   183|   Lime300: 'rgba(5, 213, 63, 1)',
   184|   Orange100: 'rgba(251, 146, 60, 1)',
   185|   Orange200: 'rgba(234, 88, 12, 1)',
   186|   Orange300: 'rgba(154, 37, 0, 1)',
   187|   Pink100: 'rgba(249, 168, 212, 1)',
   188|   Pink200: 'rgba(236, 72, 153, 1)',
   189|   Pink300: 'rgba(190, 18, 60, 1)',
   190|   Red100: 'rgba(237, 179, 174, 1)',
   191|   Red200: 'rgba(219, 104, 93, 1)',
   192|   Red300: 'rgba(127, 42, 41, 1)',
   193|   Teal100: 'rgba(153, 246, 228, 1)',
   194|   Teal200: 'rgba(20, 184, 166, 1)',
   195|   Teal300: 'rgba(17, 94, 89, 1)',
   196|   Violet100: 'rgba(216, 180, 254, 1)',
   197|   Violet200: 'rgba(168, 85, 247, 1)',
   198|   Violet300: 'rgba(107, 33, 168, 1)',
   199|   Yellow100: 'rgba(255, 242, 176, 1)',
   200|   Yellow200: 'rgba(253, 224, 71, 1)',
   201|   Yellow300: 'rgba(180, 83, 9, 1)',
   202| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/palettes/DarkPalette.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-120 ---
     1| import {ColorName} from './ColorName';
     2| import {CoreColors, DataVizColors, TranslucentColors} from './Colors';
     3| export const DarkPalette = {
     4|   [ColorName.BrowserColorScheme]: 'dark',
     5|   [ColorName.KeylineDefault]: TranslucentColors.Gray15,
     6|   [ColorName.LinkDefault]: CoreColors.Blue200,
     7|   [ColorName.LinkHover]: CoreColors.Blue400,
     8|   [ColorName.LinkDisabled]: CoreColors.Gray750,
     9|   [ColorName.TextDefault]: CoreColors.White,
    10|   [ColorName.TextLight]: CoreColors.Gray300,
    11|   [ColorName.TextLighter]: CoreColors.Gray500,
    12|   [ColorName.TextDisabled]: CoreColors.Gray600,
    13|   [ColorName.TextRed]: CoreColors.Red200,
    14|   [ColorName.TextYellow]: CoreColors.Yellow200,
    15|   [ColorName.TextGreen]: CoreColors.Green200,
    16|   [ColorName.TextBlue]: CoreColors.Blue200,
    17|   [ColorName.TextOlive]: CoreColors.Olive200,
    18|   [ColorName.TextCyan]: CoreColors.Cyan200,
    19|   [ColorName.TextLime]: CoreColors.Lime200,
    20|   [ColorName.BackgroundDefault]: CoreColors.Gray990,
    21|   [ColorName.BackgroundDefaultHover]: CoreColors.Gray950,
    22|   [ColorName.BackgroundLight]: CoreColors.Gray950,
    23|   [ColorName.BackgroundLightHover]: CoreColors.Gray900,
    24|   [ColorName.BackgroundLighter]: CoreColors.Gray850,
    25|   [ColorName.BackgroundLighterHover]: CoreColors.Gray800,
    26|   [ColorName.BackgroundDisabled]: CoreColors.Gray800,
    27|   [ColorName.BackgroundRed]: TranslucentColors.Red15,
    28|   [ColorName.BackgroundRedHover]: TranslucentColors.Red20,
    29|   [ColorName.BackgroundYellow]: TranslucentColors.Yellow15,
    30|   [ColorName.BackgroundYellowHover]: TranslucentColors.Yellow20,
    31|   [ColorName.BackgroundGreen]: TranslucentColors.Green15,
    32|   [ColorName.BackgroundGreenHover]: TranslucentColors.Green20,
    33|   [ColorName.BackgroundBlue]: TranslucentColors.Blue25,
    34|   [ColorName.BackgroundBlueHover]: TranslucentColors.Blue30,
    35|   [ColorName.BackgroundOlive]: TranslucentColors.Olive15,
    36|   [ColorName.BackgroundOliverHover]: TranslucentColors.Olive20,
    37|   [ColorName.BackgroundCyan]: TranslucentColors.Cyan15,
    38|   [ColorName.BackgroundCyanHover]: TranslucentColors.Cyan20,
    39|   [ColorName.BackgroundLime]: TranslucentColors.Lime15,
    40|   [ColorName.BackgroundLimeHover]: TranslucentColors.Lime20,
    41|   [ColorName.BackgroundGray]: TranslucentColors.Gray15,
    42|   [ColorName.BackgroundGrayHover]: TranslucentColors.Gray20,
    43|   [ColorName.BorderDefault]: CoreColors.Gray800,
    44|   [ColorName.BorderHover]: CoreColors.Gray700,
    45|   [ColorName.BorderDisabled]: CoreColors.Gray600,
    46|   [ColorName.FocusRing]: CoreColors.Blue600,
    47|   [ColorName.AccentPrimary]: CoreColors.Gray150,
    48|   [ColorName.AccentPrimaryHover]: CoreColors.Gray50,
    49|   [ColorName.AccentReversed]: CoreColors.Gray950,
    50|   [ColorName.AccentReversedHover]: CoreColors.Gray800,
    51|   [ColorName.AccentRed]: CoreColors.Red500,
    52|   [ColorName.AccentRedHover]: CoreColors.Red600,
    53|   [ColorName.AccentYellow]: CoreColors.Yellow500,
    54|   [ColorName.AccentYellowHover]: CoreColors.Yellow600,
    55|   [ColorName.AccentGreen]: CoreColors.Green600,
    56|   [ColorName.AccentGreenHover]: CoreColors.Green700,
    57|   [ColorName.AccentBlue]: CoreColors.Blue400,
    58|   [ColorName.AccentBlueHover]: CoreColors.Blue500,
    59|   [ColorName.AccentCyan]: CoreColors.Cyan500,
    60|   [ColorName.AccentCyanHover]: CoreColors.Cyan600,
    61|   [ColorName.AccentLime]: CoreColors.Lime500,
    62|   [ColorName.AccentLimeHover]: CoreColors.Lime600,
    63|   [ColorName.AccentLavender]: CoreColors.Blue800,
    64|   [ColorName.AccentLavenderHover]: CoreColors.Blue700,
    65|   [ColorName.AccentOlive]: CoreColors.Olive500,
    66|   [ColorName.AccentOliveHover]: CoreColors.Olive600,
    67|   [ColorName.AccentGray]: CoreColors.Gray500,
    68|   [ColorName.AccentGrayHover]: CoreColors.Gray600,
    69|   [ColorName.AccentWhite]: CoreColors.Gray150,
    70|   [ColorName.DialogBackground]: TranslucentColors.Gray90,
    71|   [ColorName.TooltipBackground]: CoreColors.Gray850,
    72|   [ColorName.TooltipText]: CoreColors.White,
    73|   [ColorName.PopoverBackground]: CoreColors.Gray900,
    74|   [ColorName.PopoverBackgroundHover]: CoreColors.Gray850,
    75|   [ColorName.NavBackground]: CoreColors.Gray990,
    76|   [ColorName.NavText]: CoreColors.Gray400,
    77|   [ColorName.NavTextHover]: CoreColors.Gray300,
    78|   [ColorName.NavTextSelected]: CoreColors.White,
    79|   [ColorName.NavButton]: CoreColors.Gray900,
    80|   [ColorName.NavButtonHover]: CoreColors.Gray850,
    81|   [ColorName.LineageDots]: TranslucentColors.Gray12,
    82|   [ColorName.LineageEdge]: CoreColors.Gray850,
    83|   [ColorName.LineageEdgeHighlighted]: CoreColors.Gray500,
    84|   [ColorName.LineageGroupNodeBackground]: CoreColors.Gray900,
    85|   [ColorName.LineageGroupNodeBackgroundHover]: CoreColors.Gray850,
    86|   [ColorName.LineageGroupNodeBorder]: CoreColors.Gray900,
    87|   [ColorName.LineageGroupNodeBorderHover]: CoreColors.Gray850,
    88|   [ColorName.LineageGroupBackground]: TranslucentColors.DarkWash,
    89|   [ColorName.LineageNodeBackground]: CoreColors.Gray850,
    90|   [ColorName.LineageNodeBackgroundHover]: CoreColors.Gray800,
    91|   [ColorName.LineageNodeBorder]: CoreColors.Gray700,
    92|   [ColorName.LineageNodeBorderHover]: CoreColors.Gray400,
    93|   [ColorName.LineageNodeBorderSelected]: CoreColors.Blue300,
    94|   [ColorName.DataVizBlue]: DataVizColors.Blue200,
    95|   [ColorName.DataVizBlueAlt]: DataVizColors.Blue100,
    96|   [ColorName.DataVizBlurple]: DataVizColors.Blurple200,
    97|   [ColorName.DataVizBlurpleAlt]: DataVizColors.Blurple100,
    98|   [ColorName.DataVizBrown]: DataVizColors.Brown200,
    99|   [ColorName.DataVizBrownAlt]: DataVizColors.Brown100,
   100|   [ColorName.DataVizCyan]: DataVizColors.Cyan200,
   101|   [ColorName.DataVizCyanAlt]: DataVizColors.Cyan100,
   102|   [ColorName.DataVizGray]: DataVizColors.Gray200,
   103|   [ColorName.DataVizGrayAlt]: DataVizColors.Gray100,
   104|   [ColorName.DataVizGreen]: DataVizColors.Green200,
   105|   [ColorName.DataVizGreenAlt]: DataVizColors.Green100,
   106|   [ColorName.DataVizLime]: DataVizColors.Lime200,
   107|   [ColorName.DataVizLimeAlt]: DataVizColors.Lime100,
   108|   [ColorName.DataVizOrange]: DataVizColors.Orange200,
   109|   [ColorName.DataVizOrangeAlt]: DataVizColors.Orange100,
   110|   [ColorName.DataVizPink]: DataVizColors.Pink200,
   111|   [ColorName.DataVizPinkAlt]: DataVizColors.Pink100,
   112|   [ColorName.DataVizRed]: DataVizColors.Red200,
   113|   [ColorName.DataVizRedAlt]: DataVizColors.Red100,
   114|   [ColorName.DataVizTeal]: DataVizColors.Teal200,
   115|   [ColorName.DataVizTealAlt]: DataVizColors.Teal100,
   116|   [ColorName.DataVizViolet]: DataVizColors.Violet200,
   117|   [ColorName.DataVizVioletAlt]: DataVizColors.Violet100,
   118|   [ColorName.DataVizYellow]: DataVizColors.Yellow200,
   119|   [ColorName.DataVizYellowAlt]: DataVizColors.Yellow100,
   120| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/palettes/LegacyPalette.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-121 ---
     1| import {LegacyColors} from '../components/LegacyColors';
     2| import {ColorName} from './ColorName';
     3| import {CoreColors, DataVizColors} from './Colors';
     4| export const LegacyPalette = {
     5|   [ColorName.BrowserColorScheme]: 'light',
     6|   [ColorName.KeylineDefault]: LegacyColors.KeylineGray,
     7|   [ColorName.LinkDefault]: LegacyColors.Link,
     8|   [ColorName.LinkHover]: LegacyColors.Link,
     9|   [ColorName.LinkDisabled]: LegacyColors.Link,
    10|   [ColorName.TextDefault]: LegacyColors.Dark,
    11|   [ColorName.TextLight]: LegacyColors.Gray700,
    12|   [ColorName.TextLighter]: LegacyColors.Gray600,
    13|   [ColorName.TextDisabled]: LegacyColors.Gray300,
    14|   [ColorName.TextRed]: LegacyColors.Red700,
    15|   [ColorName.TextYellow]: LegacyColors.Yellow700,
    16|   [ColorName.TextGreen]: LegacyColors.Green700,
    17|   [ColorName.TextBlue]: LegacyColors.Blue700,
    18|   [ColorName.TextOlive]: LegacyColors.Olive700,
    19|   [ColorName.TextCyan]: LegacyColors.Blue700, // No cyan in Legacy
    20|   [ColorName.TextLime]: LegacyColors.HighlightGreen, // No lime in Legacy
    21|   [ColorName.BackgroundDefault]: LegacyColors.White,
    22|   [ColorName.BackgroundDefaultHover]: LegacyColors.Gray50,
    23|   [ColorName.BackgroundLight]: LegacyColors.Gray50,
    24|   [ColorName.BackgroundLightHover]: LegacyColors.Gray100,
    25|   [ColorName.BackgroundLighter]: LegacyColors.Gray10,
    26|   [ColorName.BackgroundLighterHover]: LegacyColors.Gray200,
    27|   [ColorName.BackgroundDisabled]: LegacyColors.Gray200,
    28|   [ColorName.BackgroundRed]: LegacyColors.Red50,
    29|   [ColorName.BackgroundRedHover]: LegacyColors.Red50,
    30|   [ColorName.BackgroundYellow]: LegacyColors.Yellow50,
    31|   [ColorName.BackgroundYellowHover]: LegacyColors.Yellow50,
    32|   [ColorName.BackgroundGreen]: LegacyColors.Green50,
    33|   [ColorName.BackgroundGreenHover]: LegacyColors.Green50,
    34|   [ColorName.BackgroundBlue]: LegacyColors.Blue50,
    35|   [ColorName.BackgroundBlueHover]: LegacyColors.Blue50,
    36|   [ColorName.BackgroundOlive]: LegacyColors.Olive50,
    37|   [ColorName.BackgroundOliverHover]: LegacyColors.Olive50,
    38|   [ColorName.BackgroundCyan]: LegacyColors.Blue50, // No cyan
    39|   [ColorName.BackgroundCyanHover]: LegacyColors.Blue50, // No cyan
    40|   [ColorName.BackgroundLime]: LegacyColors.Green50, // No lime
    41|   [ColorName.BackgroundLimeHover]: LegacyColors.Green50, // No lime
    42|   [ColorName.BackgroundGray]: LegacyColors.Gray50,
    43|   [ColorName.BackgroundGrayHover]: LegacyColors.Gray50,
    44|   [ColorName.BorderDefault]: LegacyColors.Gray300,
    45|   [ColorName.BorderHover]: LegacyColors.Gray200,
    46|   [ColorName.BorderDisabled]: LegacyColors.Gray100,
    47|   [ColorName.FocusRing]: CoreColors.Cyan400,
    48|   [ColorName.AccentPrimary]: LegacyColors.Gray900,
    49|   [ColorName.AccentPrimaryHover]: LegacyColors.Gray800,
    50|   [ColorName.AccentReversed]: LegacyColors.White,
    51|   [ColorName.AccentReversedHover]: LegacyColors.White,
    52|   [ColorName.AccentRed]: LegacyColors.Red500,
    53|   [ColorName.AccentRedHover]: LegacyColors.Red500,
    54|   [ColorName.AccentYellow]: LegacyColors.Yellow500,
    55|   [ColorName.AccentYellowHover]: LegacyColors.Yellow500,
    56|   [ColorName.AccentGreen]: LegacyColors.Green500,
    57|   [ColorName.AccentGreenHover]: LegacyColors.Green500,
    58|   [ColorName.AccentBlue]: LegacyColors.Blue500,
    59|   [ColorName.AccentBlueHover]: LegacyColors.Blue500,
    60|   [ColorName.AccentCyan]: LegacyColors.Blue200, // No cyan
    61|   [ColorName.AccentCyanHover]: LegacyColors.Blue200, // No cyan
    62|   [ColorName.AccentLime]: LegacyColors.HighlightGreen, // No lime
    63|   [ColorName.AccentLimeHover]: LegacyColors.HighlightGreen, // No lime
    64|   [ColorName.AccentGray]: LegacyColors.Gray500,
    65|   [ColorName.AccentGrayHover]: LegacyColors.Gray400,
    66|   [ColorName.AccentLavender]: LegacyColors.Blue200,
    67|   [ColorName.AccentLavenderHover]: LegacyColors.Blue100,
    68|   [ColorName.AccentOlive]: LegacyColors.Olive500,
    69|   [ColorName.AccentOliveHover]: LegacyColors.Olive500,
    70|   [ColorName.AccentWhite]: LegacyColors.White,
    71|   [ColorName.DialogBackground]: LegacyColors.WashGray,
    72|   [ColorName.TooltipBackground]: LegacyColors.Dark,
    73|   [ColorName.TooltipText]: LegacyColors.White,
    74|   [ColorName.PopoverBackground]: LegacyColors.White,
    75|   [ColorName.PopoverBackgroundHover]: LegacyColors.Gray100,
    76|   [ColorName.NavBackground]: LegacyColors.Dark,
    77|   [ColorName.NavText]: LegacyColors.Gray500,
    78|   [ColorName.NavTextHover]: LegacyColors.Gray300,
    79|   [ColorName.NavTextSelected]: LegacyColors.Gray100,
    80|   [ColorName.NavButton]: LegacyColors.Gray900,
    81|   [ColorName.NavButtonHover]: LegacyColors.Gray800,
    82|   [ColorName.LineageDots]: LegacyColors.Gray100,
    83|   [ColorName.LineageEdge]: LegacyColors.Gray200,
    84|   [ColorName.LineageEdgeHighlighted]: LegacyColors.Blue500,
    85|   [ColorName.LineageGroupNodeBackground]: LegacyColors.Gray100,
    86|   [ColorName.LineageGroupNodeBackgroundHover]: LegacyColors.KeylineGray,
    87|   [ColorName.LineageGroupNodeBorder]: LegacyColors.Gray200,
    88|   [ColorName.LineageGroupNodeBorderHover]: LegacyColors.Gray200,
    89|   [ColorName.LineageGroupBackground]: LegacyColors.Gray10,
    90|   [ColorName.LineageNodeBackground]: LegacyColors.Blue50,
    91|   [ColorName.LineageNodeBackgroundHover]: LegacyColors.Blue50,
    92|   [ColorName.LineageNodeBorder]: LegacyColors.Olive500,
    93|   [ColorName.LineageNodeBorderHover]: LegacyColors.Olive500,
    94|   [ColorName.LineageNodeBorderSelected]: LegacyColors.Blue500,
    95|   [ColorName.DataVizBlue]: DataVizColors.Blue200,
    96|   [ColorName.DataVizBlueAlt]: DataVizColors.Blue300,
    97|   [ColorName.DataVizBlurple]: DataVizColors.Blurple200,
    98|   [ColorName.DataVizBlurpleAlt]: DataVizColors.Blurple300,
    99|   [ColorName.DataVizBrown]: DataVizColors.Brown200,
   100|   [ColorName.DataVizBrownAlt]: DataVizColors.Brown300,
   101|   [ColorName.DataVizCyan]: DataVizColors.Cyan200,
   102|   [ColorName.DataVizCyanAlt]: DataVizColors.Cyan300,
   103|   [ColorName.DataVizGray]: DataVizColors.Gray200,
   104|   [ColorName.DataVizGrayAlt]: DataVizColors.Gray300,
   105|   [ColorName.DataVizGreen]: DataVizColors.Green200,
   106|   [ColorName.DataVizGreenAlt]: DataVizColors.Green300,
   107|   [ColorName.DataVizLime]: DataVizColors.Lime200,
   108|   [ColorName.DataVizLimeAlt]: DataVizColors.Lime300,
   109|   [ColorName.DataVizOrange]: DataVizColors.Orange200,
   110|   [ColorName.DataVizOrangeAlt]: DataVizColors.Orange300,
   111|   [ColorName.DataVizPink]: DataVizColors.Pink200,
   112|   [ColorName.DataVizPinkAlt]: DataVizColors.Pink300,
   113|   [ColorName.DataVizRed]: DataVizColors.Red200,
   114|   [ColorName.DataVizRedAlt]: DataVizColors.Red300,
   115|   [ColorName.DataVizTeal]: DataVizColors.Teal200,
   116|   [ColorName.DataVizTealAlt]: DataVizColors.Teal300,
   117|   [ColorName.DataVizViolet]: DataVizColors.Violet200,
   118|   [ColorName.DataVizVioletAlt]: DataVizColors.Violet300,
   119|   [ColorName.DataVizYellow]: DataVizColors.Yellow200,
   120|   [ColorName.DataVizYellowAlt]: DataVizColors.Yellow300,
   121| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/palettes/LightPalette.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-120 ---
     1| import {ColorName} from './ColorName';
     2| import {CoreColors, DataVizColors, TranslucentColors} from './Colors';
     3| export const LightPalette = {
     4|   [ColorName.BrowserColorScheme]: 'light',
     5|   [ColorName.KeylineDefault]: TranslucentColors.Gray15,
     6|   [ColorName.LinkDefault]: CoreColors.Blue700,
     7|   [ColorName.LinkHover]: CoreColors.Blue500,
     8|   [ColorName.LinkDisabled]: CoreColors.Gray150,
     9|   [ColorName.TextDefault]: CoreColors.Gray990,
    10|   [ColorName.TextLight]: CoreColors.Gray700,
    11|   [ColorName.TextLighter]: CoreColors.Gray500,
    12|   [ColorName.TextDisabled]: CoreColors.Gray400,
    13|   [ColorName.TextRed]: CoreColors.Red700,
    14|   [ColorName.TextYellow]: CoreColors.Yellow700,
    15|   [ColorName.TextGreen]: CoreColors.Green700,
    16|   [ColorName.TextBlue]: CoreColors.Blue700,
    17|   [ColorName.TextOlive]: CoreColors.Olive700,
    18|   [ColorName.TextCyan]: CoreColors.Cyan700,
    19|   [ColorName.TextLime]: CoreColors.Lime700,
    20|   [ColorName.BackgroundDefault]: CoreColors.White,
    21|   [ColorName.BackgroundDefaultHover]: CoreColors.Gray10,
    22|   [ColorName.BackgroundLight]: CoreColors.Gray10,
    23|   [ColorName.BackgroundLightHover]: CoreColors.Gray50,
    24|   [ColorName.BackgroundLighter]: CoreColors.Gray50,
    25|   [ColorName.BackgroundLighterHover]: CoreColors.Gray100,
    26|   [ColorName.BackgroundDisabled]: CoreColors.Gray150,
    27|   [ColorName.BackgroundRed]: TranslucentColors.Red12,
    28|   [ColorName.BackgroundRedHover]: TranslucentColors.Red15,
    29|   [ColorName.BackgroundYellow]: TranslucentColors.Yellow12,
    30|   [ColorName.BackgroundYellowHover]: TranslucentColors.Yellow15,
    31|   [ColorName.BackgroundGreen]: TranslucentColors.Green12,
    32|   [ColorName.BackgroundGreenHover]: TranslucentColors.Green15,
    33|   [ColorName.BackgroundBlue]: TranslucentColors.Blue12,
    34|   [ColorName.BackgroundBlueHover]: TranslucentColors.Blue15,
    35|   [ColorName.BackgroundOlive]: TranslucentColors.Olive12,
    36|   [ColorName.BackgroundOliverHover]: TranslucentColors.Olive15,
    37|   [ColorName.BackgroundCyan]: TranslucentColors.Cyan12,
    38|   [ColorName.BackgroundCyanHover]: TranslucentColors.Cyan15,
    39|   [ColorName.BackgroundLime]: TranslucentColors.Lime12,
    40|   [ColorName.BackgroundLimeHover]: TranslucentColors.Lime15,
    41|   [ColorName.BackgroundGray]: TranslucentColors.Gray12,
    42|   [ColorName.BackgroundGrayHover]: TranslucentColors.Gray15,
    43|   [ColorName.BorderDefault]: CoreColors.Gray200,
    44|   [ColorName.BorderHover]: CoreColors.Gray300,
    45|   [ColorName.BorderDisabled]: CoreColors.Gray500,
    46|   [ColorName.FocusRing]: CoreColors.Blue300,
    47|   [ColorName.AccentPrimary]: CoreColors.Gray950,
    48|   [ColorName.AccentPrimaryHover]: CoreColors.Gray800,
    49|   [ColorName.AccentReversed]: CoreColors.Gray10,
    50|   [ColorName.AccentReversedHover]: CoreColors.White,
    51|   [ColorName.AccentRed]: CoreColors.Red500,
    52|   [ColorName.AccentRedHover]: CoreColors.Red400,
    53|   [ColorName.AccentYellow]: CoreColors.Yellow500,
    54|   [ColorName.AccentYellowHover]: CoreColors.Yellow400,
    55|   [ColorName.AccentGreen]: CoreColors.Green500,
    56|   [ColorName.AccentGreenHover]: CoreColors.Green400,
    57|   [ColorName.AccentBlue]: CoreColors.Blue500,
    58|   [ColorName.AccentBlueHover]: CoreColors.Blue400,
    59|   [ColorName.AccentCyan]: CoreColors.Cyan500,
    60|   [ColorName.AccentCyanHover]: CoreColors.Cyan400,
    61|   [ColorName.AccentLime]: CoreColors.Lime500,
    62|   [ColorName.AccentLimeHover]: CoreColors.Lime400,
    63|   [ColorName.AccentLavender]: CoreColors.Blue200,
    64|   [ColorName.AccentLavenderHover]: CoreColors.Blue100,
    65|   [ColorName.AccentOlive]: CoreColors.Olive500,
    66|   [ColorName.AccentOliveHover]: CoreColors.Olive400,
    67|   [ColorName.AccentGray]: CoreColors.Gray500,
    68|   [ColorName.AccentGrayHover]: CoreColors.Gray400,
    69|   [ColorName.AccentWhite]: CoreColors.White,
    70|   [ColorName.DialogBackground]: TranslucentColors.Gray50,
    71|   [ColorName.TooltipBackground]: CoreColors.Gray850,
    72|   [ColorName.TooltipText]: CoreColors.White,
    73|   [ColorName.PopoverBackground]: CoreColors.White,
    74|   [ColorName.PopoverBackgroundHover]: CoreColors.Gray50,
    75|   [ColorName.NavBackground]: CoreColors.Gray990,
    76|   [ColorName.NavText]: CoreColors.Gray400,
    77|   [ColorName.NavTextHover]: CoreColors.Gray300,
    78|   [ColorName.NavTextSelected]: CoreColors.White,
    79|   [ColorName.NavButton]: CoreColors.Gray900,
    80|   [ColorName.NavButtonHover]: CoreColors.Gray850,
    81|   [ColorName.LineageDots]: TranslucentColors.Gray20,
    82|   [ColorName.LineageEdge]: CoreColors.Gray100,
    83|   [ColorName.LineageEdgeHighlighted]: CoreColors.Gray400,
    84|   [ColorName.LineageGroupNodeBackground]: CoreColors.Gray10,
    85|   [ColorName.LineageGroupNodeBackgroundHover]: CoreColors.Gray50,
    86|   [ColorName.LineageGroupNodeBorder]: CoreColors.Gray50,
    87|   [ColorName.LineageGroupNodeBorderHover]: CoreColors.Gray50,
    88|   [ColorName.LineageGroupBackground]: TranslucentColors.LightWash,
    89|   [ColorName.LineageNodeBackground]: CoreColors.Gray50,
    90|   [ColorName.LineageNodeBackgroundHover]: CoreColors.Gray100,
    91|   [ColorName.LineageNodeBorder]: CoreColors.Gray150,
    92|   [ColorName.LineageNodeBorderHover]: CoreColors.Gray300,
    93|   [ColorName.LineageNodeBorderSelected]: CoreColors.Blue500,
    94|   [ColorName.DataVizBlue]: DataVizColors.Blue200,
    95|   [ColorName.DataVizBlueAlt]: DataVizColors.Blue300,
    96|   [ColorName.DataVizBlurple]: DataVizColors.Blurple200,
    97|   [ColorName.DataVizBlurpleAlt]: DataVizColors.Blurple300,
    98|   [ColorName.DataVizBrown]: DataVizColors.Brown200,
    99|   [ColorName.DataVizBrownAlt]: DataVizColors.Brown300,
   100|   [ColorName.DataVizCyan]: DataVizColors.Cyan200,
   101|   [ColorName.DataVizCyanAlt]: DataVizColors.Cyan300,
   102|   [ColorName.DataVizGray]: DataVizColors.Gray200,
   103|   [ColorName.DataVizGrayAlt]: DataVizColors.Gray300,
   104|   [ColorName.DataVizGreen]: DataVizColors.Green200,
   105|   [ColorName.DataVizGreenAlt]: DataVizColors.Green300,
   106|   [ColorName.DataVizLime]: DataVizColors.Lime200,
   107|   [ColorName.DataVizLimeAlt]: DataVizColors.Lime300,
   108|   [ColorName.DataVizOrange]: DataVizColors.Orange200,
   109|   [ColorName.DataVizOrangeAlt]: DataVizColors.Orange300,
   110|   [ColorName.DataVizPink]: DataVizColors.Pink200,
   111|   [ColorName.DataVizPinkAlt]: DataVizColors.Pink300,
   112|   [ColorName.DataVizRed]: DataVizColors.Red200,
   113|   [ColorName.DataVizRedAlt]: DataVizColors.Red300,
   114|   [ColorName.DataVizTeal]: DataVizColors.Teal200,
   115|   [ColorName.DataVizTealAlt]: DataVizColors.Teal300,
   116|   [ColorName.DataVizViolet]: DataVizColors.Violet200,
   117|   [ColorName.DataVizVioletAlt]: DataVizColors.Violet300,
   118|   [ColorName.DataVizYellow]: DataVizColors.Yellow200,
   119|   [ColorName.DataVizYellowAlt]: DataVizColors.Yellow300,
   120| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/palettes/types.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-3 ---
     1| import {ColorName} from './ColorName';
     2| import {CoreColors, TranslucentColors} from './Colors';
     3| export type Theme = Record<ColorName, keyof typeof CoreColors | keyof typeof TranslucentColors>;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/theme/color.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-124 ---
     1| import memoize from 'lodash/memoize';
     2| import {ColorName} from '../palettes/ColorName';
     3| import {getPaletteForTheme} from './theme';
     4| const color = memoize((semanticName: ColorName): string => {
     5|   const palette = getPaletteForTheme();
     6|   return palette[semanticName];
     7| });
     8| export const browserColorScheme = () => color(ColorName.BrowserColorScheme);
     9| export const colorKeylineDefault = () => color(ColorName.KeylineDefault);
    10| export const colorLinkDefault = () => color(ColorName.LinkDefault);
    11| export const colorLinkHover = () => color(ColorName.LinkHover);
    12| export const colorLinkDisabled = () => color(ColorName.LinkDisabled);
    13| export const colorTextDefault = () => color(ColorName.TextDefault);
    14| export const colorTextLight = () => color(ColorName.TextLight);
    15| export const colorTextLighter = () => color(ColorName.TextLighter);
    16| export const colorTextDisabled = () => color(ColorName.TextDisabled);
    17| export const colorTextRed = () => color(ColorName.TextRed);
    18| export const colorTextYellow = () => color(ColorName.TextYellow);
    19| export const colorTextGreen = () => color(ColorName.TextGreen);
    20| export const colorTextBlue = () => color(ColorName.TextBlue);
    21| export const colorTextOlive = () => color(ColorName.TextOlive);
    22| export const colorTextCyan = () => color(ColorName.TextCyan);
    23| export const colorTextLime = () => color(ColorName.TextLime);
    24| export const colorBackgroundDefault = () => color(ColorName.BackgroundDefault);
    25| export const colorBackgroundDefaultHover = () => color(ColorName.BackgroundDefaultHover);
    26| export const colorBackgroundLight = () => color(ColorName.BackgroundLight);
    27| export const colorBackgroundLightHover = () => color(ColorName.BackgroundLightHover);
    28| export const colorBackgroundLighter = () => color(ColorName.BackgroundLighter);
    29| export const colorBackgroundLighterHover = () => color(ColorName.BackgroundLighterHover);
    30| export const colorBackgroundDisabled = () => color(ColorName.BackgroundDisabled);
    31| export const colorBackgroundRed = () => color(ColorName.BackgroundRed);
    32| export const colorBackgroundRedHover = () => color(ColorName.BackgroundRedHover);
    33| export const colorBackgroundYellow = () => color(ColorName.BackgroundYellow);
    34| export const colorBackgroundYellowHover = () => color(ColorName.BackgroundYellowHover);
    35| export const colorBackgroundGreen = () => color(ColorName.BackgroundGreen);
    36| export const colorBackgroundGreenHover = () => color(ColorName.BackgroundGreenHover);
    37| export const colorBackgroundBlue = () => color(ColorName.BackgroundBlue);
    38| export const colorBackgroundBlueHover = () => color(ColorName.BackgroundBlueHover);
    39| export const colorBackgroundOlive = () => color(ColorName.BackgroundOlive);
    40| export const colorBackgroundOliverHover = () => color(ColorName.BackgroundOliverHover);
    41| export const colorBackgroundCyan = () => color(ColorName.BackgroundCyan);
    42| export const colorBackgroundCyanHover = () => color(ColorName.BackgroundCyanHover);
    43| export const colorBackgroundLime = () => color(ColorName.BackgroundLime);
    44| export const colorBackgroundLimeHover = () => color(ColorName.BackgroundLimeHover);
    45| export const colorBackgroundGray = () => color(ColorName.BackgroundGray);
    46| export const colorBackgroundGrayHover = () => color(ColorName.BackgroundGrayHover);
    47| export const colorBorderDefault = () => color(ColorName.BorderDefault);
    48| export const colorBorderHover = () => color(ColorName.BorderHover);
    49| export const colorBorderDisabled = () => color(ColorName.BorderDisabled);
    50| export const colorFocusRing = () => color(ColorName.FocusRing);
    51| export const colorAccentPrimary = () => color(ColorName.AccentPrimary);
    52| export const colorAccentPrimaryHover = () => color(ColorName.AccentPrimaryHover);
    53| export const colorAccentReversed = () => color(ColorName.AccentReversed);
    54| export const colorAccentReversedHover = () => color(ColorName.AccentReversedHover);
    55| export const colorAccentRed = () => color(ColorName.AccentRed);
    56| export const colorAccentRedHover = () => color(ColorName.AccentRedHover);
    57| export const colorAccentYellow = () => color(ColorName.AccentYellow);
    58| export const colorAccentYellowHover = () => color(ColorName.AccentYellowHover);
    59| export const colorAccentGreen = () => color(ColorName.AccentGreen);
    60| export const colorAccentGreenHover = () => color(ColorName.AccentGreenHover);
    61| export const colorAccentBlue = () => color(ColorName.AccentBlue);
    62| export const colorAccentBlueHover = () => color(ColorName.AccentBlueHover);
    63| export const colorAccentCyan = () => color(ColorName.AccentCyan);
    64| export const colorAccentCyanHover = () => color(ColorName.AccentCyanHover);
    65| export const colorAccentLime = () => color(ColorName.AccentLime);
    66| export const colorAccentLimeHover = () => color(ColorName.AccentLimeHover);
    67| export const colorAccentLavender = () => color(ColorName.AccentLavender);
    68| export const colorAccentLavenderHover = () => color(ColorName.AccentLavenderHover);
    69| export const colorAccentOlive = () => color(ColorName.AccentOlive);
    70| export const colorAccentOliveHover = () => color(ColorName.AccentOliveHover);
    71| export const colorAccentGray = () => color(ColorName.AccentGray);
    72| export const colorAccentGrayHover = () => color(ColorName.AccentGrayHover);
    73| export const colorAccentWhite = () => color(ColorName.AccentWhite);
    74| export const colorDialogBackground = () => color(ColorName.DialogBackground);
    75| export const colorTooltipBackground = () => color(ColorName.TooltipBackground);
    76| export const colorTooltipText = () => color(ColorName.TooltipText);
    77| export const colorPopoverBackground = () => color(ColorName.PopoverBackground);
    78| export const colorPopoverBackgroundHover = () => color(ColorName.PopoverBackgroundHover);
    79| export const colorNavBackground = () => color(ColorName.NavBackground);
    80| export const colorNavText = () => color(ColorName.NavText);
    81| export const colorNavTextHover = () => color(ColorName.NavTextHover);
    82| export const colorNavTextSelected = () => color(ColorName.NavTextSelected);
    83| export const colorNavButton = () => color(ColorName.NavButton);
    84| export const colorNavButtonHover = () => color(ColorName.NavButtonHover);
    85| export const colorLineageDots = () => color(ColorName.LineageDots);
    86| export const colorLineageEdge = () => color(ColorName.LineageEdge);
    87| export const colorLineageEdgeHighlighted = () => color(ColorName.LineageEdgeHighlighted);
    88| export const colorLineageGroupNodeBackground = () => color(ColorName.LineageGroupNodeBackground);
    89| export const colorLineageGroupNodeBackgroundHover = () =>
    90|   color(ColorName.LineageGroupNodeBackgroundHover);
    91| export const colorLineageGroupNodeBorder = () => color(ColorName.LineageGroupNodeBorder);
    92| export const colorLineageGroupNodeBorderHover = () => color(ColorName.LineageGroupNodeBorderHover);
    93| export const colorLineageGroupBackground = () => color(ColorName.LineageGroupBackground);
    94| export const colorLineageNodeBackground = () => color(ColorName.LineageNodeBackground);
    95| export const colorLineageNodeBackgroundHover = () => color(ColorName.LineageNodeBackgroundHover);
    96| export const colorLineageNodeBorder = () => color(ColorName.LineageNodeBorder);
    97| export const colorLineageNodeBorderHover = () => color(ColorName.LineageNodeBorderHover);
    98| export const colorLineageNodeBorderSelected = () => color(ColorName.LineageNodeBorderSelected);
    99| export const colorDataVizBlue = () => color(ColorName.DataVizBlue);
   100| export const colorDataVizBlueAlt = () => color(ColorName.DataVizBlueAlt);
   101| export const colorDataVizBlurple = () => color(ColorName.DataVizBlurple);
   102| export const colorDataVizBlurpleAlt = () => color(ColorName.DataVizBlurpleAlt);
   103| export const colorDataVizBrown = () => color(ColorName.DataVizBrown);
   104| export const colorDataVizBrownAlt = () => color(ColorName.DataVizBrownAlt);
   105| export const colorDataVizCyan = () => color(ColorName.DataVizCyan);
   106| export const colorDataVizCyanAlt = () => color(ColorName.DataVizCyanAlt);
   107| export const colorDataVizGray = () => color(ColorName.DataVizGray);
   108| export const colorDataVizGrayAlt = () => color(ColorName.DataVizGrayAlt);
   109| export const colorDataVizGreen = () => color(ColorName.DataVizGreen);
   110| export const colorDataVizGreenAlt = () => color(ColorName.DataVizGreenAlt);
   111| export const colorDataVizLime = () => color(ColorName.DataVizLime);
   112| export const colorDataVizLimeAlt = () => color(ColorName.DataVizLimeAlt);
   113| export const colorDataVizOrange = () => color(ColorName.DataVizOrange);
   114| export const colorDataVizOrangeAlt = () => color(ColorName.DataVizOrangeAlt);
   115| export const colorDataVizPink = () => color(ColorName.DataVizPink);
   116| export const colorDataVizPinkAlt = () => color(ColorName.DataVizPinkAlt);
   117| export const colorDataVizRed = () => color(ColorName.DataVizRed);
   118| export const colorDataVizRedAlt = () => color(ColorName.DataVizRedAlt);
   119| export const colorDataVizTeal = () => color(ColorName.DataVizTeal);
   120| export const colorDataVizTealAlt = () => color(ColorName.DataVizTealAlt);
   121| export const colorDataVizViolet = () => color(ColorName.DataVizViolet);
   122| export const colorDataVizVioletAlt = () => color(ColorName.DataVizVioletAlt);
   123| export const colorDataVizYellow = () => color(ColorName.DataVizYellow);
   124| export const colorDataVizYellowAlt = () => color(ColorName.DataVizYellowAlt);


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/theme/theme.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-39 ---
     1| import memoize from 'lodash/memoize';
     2| import {DarkPalette} from '../palettes/DarkPalette';
     3| import {LegacyPalette} from '../palettes/LegacyPalette';
     4| import {LightPalette} from '../palettes/LightPalette';
     5| export enum DagsterTheme {
     6|   Legacy = 'Legacy',
     7|   Light = 'Light',
     8|   Dark = 'Dark',
     9| }
    10| export const DAGSTER_THEME_KEY = 'dagster-theme';
    11| export const getTheme = memoize(() => {
    12|   const stored = window.localStorage.getItem('dagster-theme');
    13|   let value: string | null = null;
    14|   if (stored) {
    15|     try {
    16|       value = JSON.parse(stored);
    17|     } catch (e) {
    18|       if (typeof stored === 'string') {
    19|         value = stored;
    20|       }
    21|     }
    22|   }
    23|   if (value === DagsterTheme.Light || value === DagsterTheme.Dark) {
    24|     return value;
    25|   }
    26|   return DagsterTheme.Legacy;
    27| });
    28| export const getPaletteForTheme = () => {
    29|   const theme = getTheme();
    30|   switch (theme) {
    31|     case DagsterTheme.Dark:
    32|       return DarkPalette;
    33|     case DagsterTheme.Light:
    34|       return LightPalette;
    35|     case DagsterTheme.Legacy:
    36|     default:
    37|       return LegacyPalette;
    38|   }
    39| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/app/AppError.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-24 ---
     1| import {ServerError} from '@apollo/client';
     2| import {ErrorResponse, onError} from '@apollo/client/link/error';
     3| import {Observable} from '@apollo/client/utilities';
     4| import {FontFamily, Toaster, colorBackgroundRed} from '@dagster-io/ui-components';
     5| import {GraphQLError} from 'graphql';
     6| import memoize from 'lodash/memoize';
     7| import * as React from 'react';
     8| import {showCustomAlert} from './CustomAlertProvider';
     9| import {ERROR_CODES_TO_SURFACE, errorCodeToMessage} from './HTTPErrorCodes';
    10| interface DagsterSerializableErrorInfo {
    11|   message: string;
    12|   stack: string[];
    13|   cls_name: string | null;
    14|   cause: DagsterSerializableErrorInfo | null;
    15|   context: DagsterSerializableErrorInfo | null;
    16| }
    17| type DagsterGraphQLError = GraphQLError & {
    18|   extensions:
    19|     | {
    20|         errorInfo?: DagsterSerializableErrorInfo;
    21|       }
    22|     | undefined;
    23| };
    24| const getErrorToaster = memoize(async () => {

# --- HUNK 2: Lines 101-141 ---
   101|       <br />
   102|       If you have a minute, consider reporting this error either by{' '}
   103|       <a href="https://github.com/dagster-io/dagster/issues/" rel="noreferrer" target="_blank">
   104|         filing a Github issue
   105|       </a>{' '}
   106|       or by{' '}
   107|       <a href="https://dagster.slack.com/archives/CCCR6P2UR" rel="noreferrer" target="_blank">
   108|         messaging in the Dagster slack
   109|       </a>
   110|       . Use the <code>&quot;Copy&quot;</code> button below to include error information that is
   111|       helpful for the core development team to diagnose what is happening and to improve Dagster in
   112|       recovering from unexpected errors.
   113|     </div>
   114|   );
   115|   const body = (
   116|     <div>
   117|       {instructions}
   118|       <div
   119|         className="errorInfo"
   120|         style={{
   121|           backgroundColor: colorBackgroundRed(),
   122|           border: '1px solid #d17257',
   123|           borderRadius: 3,
   124|           maxWidth: '90vw',
   125|           maxHeight: '80vh',
   126|           padding: '1em 2em',
   127|           overflow: 'auto',
   128|           color: 'rgb(41, 50, 56)',
   129|           fontFamily: FontFamily.monospace,
   130|           fontSize: '1em',
   131|           whiteSpace: 'pre',
   132|           overflowX: 'auto',
   133|         }}
   134|       >
   135|         {operationName ? `Operation name: ${operationName}\n\n` : null}
   136|         Message: {error.message}
   137|         {'\n\n'}
   138|         Path: {JSON.stringify(error.path)}
   139|         {'\n\n'}
   140|         Locations: {JSON.stringify(error.locations)}
   141|         {stackTraceContent}


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/app/AppProvider.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-103 ---
     1| import {
     2|   ApolloLink,
     3|   ApolloClient,
     4|   ApolloProvider,
     5|   HttpLink,
     6|   InMemoryCache,
     7|   split,
     8| } from '@apollo/client';
     9| import {WebSocketLink} from '@apollo/client/link/ws';
    10| import {getMainDefinition} from '@apollo/client/utilities';
    11| import {
    12|   GlobalDialogStyle,
    13|   GlobalPopoverStyle,
    14|   GlobalSuggestStyle,
    15|   GlobalToasterStyle,
    16|   GlobalTooltipStyle,
    17|   FontFamily,
    18|   CustomTooltipProvider,
    19|   GlobalInter,
    20|   GlobalInconsolata,
    21|   colorLinkDefault,
    22|   colorBackgroundDefault,
    23|   colorTextDefault,
    24|   browserColorScheme,
    25| } from '@dagster-io/ui-components';
    26| import * as React from 'react';
    27| import {BrowserRouter} from 'react-router-dom';
    28| import {CompatRouter} from 'react-router-dom-v5-compat';
    29| import {createGlobalStyle} from 'styled-components';
    30| import {SubscriptionClient} from 'subscriptions-transport-ws';
    31| import {AssetLiveDataProvider} from '../asset-data/AssetLiveDataProvider';
    32| import {AssetRunLogObserver} from '../asset-graph/AssetRunLogObserver';
    33| import {DeploymentStatusProvider, DeploymentStatusType} from '../instance/DeploymentStatusProvider';
    34| import {InstancePageContext} from '../instance/InstancePageContext';
    35| import {JobFeatureProvider} from '../pipelines/JobFeatureContext';
    36| import {WorkspaceProvider} from '../workspace/WorkspaceContext';
    37| import {AppContext} from './AppContext';
    38| import {CustomAlertProvider} from './CustomAlertProvider';
    39| import {CustomConfirmationProvider} from './CustomConfirmationProvider';
    40| import {LayoutProvider} from './LayoutProvider';
    41| import {PermissionsProvider} from './Permissions';
    42| import {patchCopyToRemoveZeroWidthUnderscores} from './Util';
    43| import {WebSocketProvider} from './WebSocketProvider';
    44| import {AnalyticsContext, dummyAnalytics} from './analytics';
    45| import {migrateLocalStorageKeys} from './migrateLocalStorageKeys';
    46| import {TimeProvider} from './time/TimeContext';
    47| import './blueprint.css';
    48| patchCopyToRemoveZeroWidthUnderscores();
    49| const GlobalStyle = createGlobalStyle`
    50|   * {
    51|     box-sizing: border-box;
    52|   }
    53|   html, body, #root {
    54|     color-scheme: ${browserColorScheme()};
    55|     background-color: ${colorBackgroundDefault()};
    56|     color: ${colorTextDefault()};
    57|     width: 100vw;
    58|     height: 100vh;
    59|     overflow: hidden;
    60|     display: flex;
    61|     flex: 1 1;
    62|     -webkit-font-smoothing: antialiased;
    63|     -moz-osx-font-smoothing: grayscale;
    64|   }
    65|   a,
    66|   a:hover,
    67|   a:active {
    68|     color: ${colorLinkDefault()};
    69|   }
    70|   #root {
    71|     display: flex;
    72|     flex-direction: column;
    73|     align-items: stretch;
    74|   }
    75|   body {
    76|     margin: 0;
    77|     padding: 0;
    78|   }
    79|   body, input, select, textarea {
    80|     font-family: ${FontFamily.default};
    81|   }
    82|   button {
    83|     color: ${colorTextDefault()};
    84|     font-family: inherit;
    85|   }
    86|   code, pre {
    87|     font-family: ${FontFamily.monospace};
    88|     font-size: 16px;
    89|   }
    90| `;
    91| export interface AppProviderProps {
    92|   children: React.ReactNode;
    93|   appCache: InMemoryCache;
    94|   config: {
    95|     apolloLinks: ApolloLink[];
    96|     basePath?: string;
    97|     headers?: {[key: string]: string};
    98|     origin: string;
    99|     telemetryEnabled?: boolean;
   100|     statusPolling: Set<DeploymentStatusType>;
   101|   };
   102| }
   103| export const AppProvider = (props: AppProviderProps) => {


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/app/AppTopNav.tsx
# Total hunks: 4
# ====================================================================
# --- HUNK 1: Lines 1-31 ---
     1| import {
     2|   Box,
     3|   Icon,
     4|   IconWrapper,
     5|   Tooltip,
     6|   colorNavBackground,
     7|   colorNavText,
     8|   colorNavTextSelected,
     9|   colorNavTextHover,
    10|   colorNavButton,
    11| } from '@dagster-io/ui-components';
    12| import * as React from 'react';
    13| import {Link, NavLink, useHistory} from 'react-router-dom';
    14| import styled from 'styled-components';
    15| import {DeploymentStatusIcon} from '../nav/DeploymentStatusIcon';
    16| import {VersionNumber} from '../nav/VersionNumber';
    17| import {
    18|   reloadFnForWorkspace,
    19|   useRepositoryLocationReload,
    20| } from '../nav/useRepositoryLocationReload';
    21| import {SearchDialog} from '../search/SearchDialog';
    22| import {LayoutContext} from './LayoutProvider';
    23| import {ShortcutHandler} from './ShortcutHandler';
    24| import {WebSocketStatus} from './WebSocketProvider';
    25| type AppNavLinkType = {
    26|   title: string;
    27|   element: React.ReactNode;
    28| };
    29| interface Props {
    30|   children?: React.ReactNode;
    31|   searchPlaceholder: string;

# --- HUNK 2: Lines 168-208 ---
   168|     navButton.current && navButton.current.focus();
   169|     nav.isOpen ? nav.close() : nav.open();
   170|   }, [nav]);
   171|   const onKeyDown = React.useCallback(
   172|     (e: React.KeyboardEvent<HTMLButtonElement>) => {
   173|       if (e.key === 'Escape' && nav.isOpen) {
   174|         nav.close();
   175|       }
   176|     },
   177|     [nav],
   178|   );
   179|   return (
   180|     <LogoContainer>
   181|       {nav.canOpen ? (
   182|         <ShortcutHandler
   183|           onShortcut={() => onToggle()}
   184|           shortcutLabel="."
   185|           shortcutFilter={(e) => e.key === '.'}
   186|         >
   187|           <NavButton onClick={onToggle} onKeyDown={onKeyDown} ref={navButton}>
   188|             <Icon name="menu" color={colorNavTextSelected()} size={24} />
   189|           </NavButton>
   190|         </ShortcutHandler>
   191|       ) : null}
   192|       <Box flex={{display: 'inline-flex'}} margin={{left: 8}}>
   193|         <GhostDaggyWithTooltip />
   194|       </Box>
   195|     </LogoContainer>
   196|   );
   197| };
   198| export const GhostDaggyWithTooltip = () => {
   199|   return (
   200|     <DaggyTooltip
   201|       content={
   202|         <Box flex={{direction: 'row', gap: 4}}>
   203|           <WebSocketStatus />
   204|           <VersionNumber />
   205|         </Box>
   206|       }
   207|       placement="bottom"
   208|       modifiers={{offset: {enabled: true, options: {offset: [0, 18]}}}}

# --- HUNK 3: Lines 242-324 ---
   242|     <path
   243|       d="M51.0052 114.84C56.5259 114.84 61.0013 110.363 61.0013 104.84C61.0013 99.317 56.5259 94.8398 51.0052 94.8398C45.4845 94.8398 41.0092 99.317 41.0092 104.84C41.0092 110.363 45.4845 114.84 51.0052 114.84Z"
   244|       fill="#C9C6FA"
   245|     />
   246|     <path
   247|       d="M31.0131 134.84C36.5338 134.84 41.0092 130.363 41.0092 124.84C41.0092 119.317 36.5338 114.84 31.0131 114.84C25.4925 114.84 21.0171 119.317 21.0171 124.84C21.0171 130.363 25.4925 134.84 31.0131 134.84Z"
   248|       fill="#C9C6FA"
   249|     />
   250|     <path
   251|       d="M75.9954 192H77.9946C111.631 192 142.709 168.12 151.226 135.27C152.075 131.86 154.624 130.15 158.033 130.15C159.781 130.22 161.432 130.976 162.627 132.255C163.822 133.533 164.467 135.23 164.421 136.98C164.268 140.47 163.479 143.904 162.091 147.11C162.333 146.738 162.543 146.346 162.721 145.94C165.25 140.157 166.557 133.913 166.56 127.6C166.56 117.79 159.742 111.39 149.956 111.39C132.893 111.39 129.474 126.29 122.277 142.22C114.81 158.76 101.096 176.65 66.5092 176.65C30.5734 176.65 -6.35207 151.48 2.65438 100.3C2.76433 99.66 2.85429 99.0899 2.92426 98.5599C1.60457 105.172 0.934978 111.897 0.925049 118.64C1.02501 159.84 33.2023 191.04 75.9954 192Z"
   252|       fill="#C9C6FA"
   253|     />
   254|   </svg>
   255| );
   256| const DaggyTooltip = styled(Tooltip)`
   257|   &.bp4-popover2-target {
   258|     display: inline-flex;
   259|   }
   260| `;
   261| export const TopNavLink = styled(NavLink)`
   262|   color: ${colorNavText()};
   263|   font-weight: 600;
   264|   transition: color 50ms linear;
   265|   padding: 24px 0;
   266|   text-decoration: none;
   267|   :hover {
   268|     color: ${colorNavTextHover()};
   269|     text-decoration: none;
   270|   }
   271|   :active,
   272|   &.active {
   273|     color: ${colorNavTextSelected()};
   274|     text-decoration: none;
   275|   }
   276|   :focus {
   277|     outline: none !important;
   278|     color: ${colorNavTextSelected()};
   279|   }
   280| `;
   281| export const AppTopNavContainer = styled.div`
   282|   background: ${colorNavBackground()};
   283|   display: flex;
   284|   flex-direction: row;
   285|   justify-content: space-between;
   286|   height: 64px;
   287| `;
   288| const LogoContainer = styled.div`
   289|   cursor: pointer;
   290|   display: flex;
   291|   align-items: center;
   292|   flex-shrink: 0;
   293|   padding-left: 12px;
   294|   svg {
   295|     transition: filter 100ms;
   296|   }
   297|   &:hover {
   298|     svg {
   299|       filter: brightness(90%);
   300|     }
   301|   }
   302| `;
   303| const NavButton = styled.button`
   304|   border-radius: 20px;
   305|   cursor: pointer;
   306|   margin-left: 4px;
   307|   outline: none;
   308|   padding: 6px;
   309|   border: none;
   310|   background: ${colorNavBackground()};
   311|   display: block;
   312|   ${IconWrapper} {
   313|     transition: background 100ms linear;
   314|   }
   315|   :hover ${IconWrapper} {
   316|     background: ${colorNavText()};
   317|   }
   318|   :active ${IconWrapper} {
   319|     background: ${colorNavText()};
   320|   }
   321|   :focus {
   322|     background: ${colorNavButton()};
   323|   }
   324| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/app/FallthroughRoot.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-46 ---
     1| import {Box, Spinner, colorTextLight} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import {Redirect, Route, Switch} from 'react-router-dom';
     4| import {isHiddenAssetGroupJob} from '../asset-graph/Utils';
     5| import {DagsterRepoOption, WorkspaceContext} from '../workspace/WorkspaceContext';
     6| import {workspacePath, workspacePipelinePath} from '../workspace/workspacePath';
     7| export const FallthroughRoot = () => {
     8|   return (
     9|     <Switch>
    10|       <Route path="*">
    11|         <FinalRedirectOrLoadingRoot />
    12|       </Route>
    13|     </Switch>
    14|   );
    15| };
    16| const getVisibleJobs = (r: DagsterRepoOption) =>
    17|   r.repository.pipelines.filter((j) => !isHiddenAssetGroupJob(j.name));
    18| const FinalRedirectOrLoadingRoot = () => {
    19|   const workspaceContext = React.useContext(WorkspaceContext);
    20|   const {allRepos, loading, locationEntries} = workspaceContext;
    21|   if (loading) {
    22|     return (
    23|       <Box flex={{direction: 'row', justifyContent: 'center'}} style={{paddingTop: '100px'}}>
    24|         <Box flex={{direction: 'row', alignItems: 'center', gap: 16}}>
    25|           <Spinner purpose="section" />
    26|           <div style={{color: colorTextLight()}}>Loading definitions</div>
    27|         </Box>
    28|       </Box>
    29|     );
    30|   }
    31|   if (locationEntries.length && allRepos.length === 0) {
    32|     return <Redirect to="/locations" />;
    33|   }
    34|   const reposWithVisibleJobs = allRepos.filter((r) => getVisibleJobs(r).length > 0);
    35|   if (reposWithVisibleJobs.length === 0) {
    36|     const repoWithAssetGroup = allRepos.find((r) => r.repository.assetGroups.length);
    37|     if (repoWithAssetGroup) {
    38|       return (
    39|         <Redirect
    40|           to={workspacePath(
    41|             repoWithAssetGroup.repository.name,
    42|             repoWithAssetGroup.repositoryLocation.name,
    43|             `/asset-groups/${repoWithAssetGroup.repository.assetGroups[0]!.groupName}`,
    44|           )}
    45|         />
    46|       );


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/app/Flags.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-27 ---
     1| import memoize from 'lodash/memoize';
     2| import * as React from 'react';
     3| import {getJSONForKey} from '../hooks/useStateWithStorage';
     4| export const DAGSTER_FLAGS_KEY = 'DAGSTER_FLAGS';
     5| export const FeatureFlag = {
     6|   flagDebugConsoleLogging: 'flagDebugConsoleLogging' as const,
     7|   flagDisableWebsockets: 'flagDisableWebsockets' as const,
     8|   flagSensorScheduleLogging: 'flagSensorScheduleLogging' as const,
     9|   flagSidebarResources: 'flagSidebarResources' as const,
    10|   flagDisableAutoLoadDefaults: 'flagDisableAutoLoadDefaults' as const,
    11|   flagDAGSidebar: 'flagDAGSidebar' as const,
    12|   flagDisableDAGCache: 'flagDisableDAGCache' as const,
    13| };
    14| export type FeatureFlagType = keyof typeof FeatureFlag;
    15| export const getFeatureFlags: () => FeatureFlagType[] = memoize(
    16|   () => getJSONForKey(DAGSTER_FLAGS_KEY) || [],
    17| );
    18| export const featureEnabled = memoize((flag: FeatureFlagType) => getFeatureFlags().includes(flag));
    19| type FlagMap = {
    20|   readonly [F in FeatureFlagType]: boolean;
    21| };
    22| export const useFeatureFlags = () => {
    23|   return React.useMemo(() => {
    24|     const flagSet = new Set(getFeatureFlags());
    25|     const all: Record<string, boolean> = {};
    26|     for (const flag in FeatureFlag) {
    27|       all[flag] = flagSet.has(flag as FeatureFlagType);


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/app/PythonErrorInfo.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-31 ---
     1| import {gql} from '@apollo/client';
     2| import {
     3|   Button,
     4|   Icon,
     5|   FontFamily,
     6|   colorKeylineDefault,
     7|   colorAccentRed,
     8|   colorBackgroundRed,
     9|   colorTextLight,
    10|   colorTextRed,
    11| } from '@dagster-io/ui-components';
    12| import * as React from 'react';
    13| import styled from 'styled-components';
    14| import {ErrorSource} from '../graphql/types';
    15| import {useLaunchPadHooks} from '../launchpad/LaunchpadHooksContext';
    16| import {MetadataEntries} from '../metadata/MetadataEntry';
    17| import {MetadataEntryFragment} from '../metadata/types/MetadataEntry.types';
    18| import {showSharedToaster} from './DomUtils';
    19| import {useCopyToClipboard} from './browser';
    20| import {PythonErrorChainFragment, PythonErrorFragment} from './types/PythonErrorFragment.types';
    21| export type GenericError = {
    22|   message: string;
    23|   stack?: string[];
    24|   errorChain?: PythonErrorChainFragment[];
    25| };
    26| interface IPythonErrorInfoProps {
    27|   showReload?: boolean;
    28|   centered?: boolean;
    29|   error: GenericError | PythonErrorFragment;
    30|   failureMetadata?: {metadataEntries: MetadataEntryFragment[]} | null;
    31|   errorSource?: ErrorSource | null;

# --- HUNK 2: Lines 101-169 ---
   101|         onClick={async () => {
   102|           const message = copy();
   103|           await showSharedToaster({
   104|             message: message ?? <div>Copied value</div>,
   105|             intent: 'success',
   106|           });
   107|         }}
   108|       >
   109|         <Icon name="content_copy" /> Copy
   110|       </CopyErrorButtonWrapper>
   111|     </div>
   112|   );
   113| };
   114| const CopyErrorButtonWrapper = styled.button`
   115|   position: absolute;
   116|   display: flex;
   117|   flex-direction: row;
   118|   gap: 8px;
   119|   top: 0px;
   120|   right: -8px;
   121|   border: 1px solid ${colorKeylineDefault()};
   122|   background: transparent;
   123|   cursor: pointer;
   124|   border: none;
   125|   box-shadow: none;
   126|   outline: none;
   127| `;
   128| const ContextHeader = styled.h4`
   129|   font-weight: 400;
   130|   margin: 0 0 1em;
   131| `;
   132| const CauseHeader = styled.h3`
   133|   font-weight: 400;
   134|   margin: 1em 0 1em;
   135| `;
   136| const ErrorHeader = styled.h3`
   137|   color: ${colorTextRed()};
   138|   font-weight: 400;
   139|   margin: 0.5em 0 0.25em;
   140|   white-space: pre-wrap;
   141| `;
   142| const Trace = styled.div`
   143|   color: ${colorTextLight()};
   144|   font-family: ${FontFamily.monospace};
   145|   font-size: 1em;
   146|   white-space: pre;
   147|   padding-bottom: 1em;
   148| `;
   149| export const ErrorWrapper = styled.div`
   150|   background-color: ${colorBackgroundRed()};
   151|   border: 1px solid ${colorAccentRed()};
   152|   border-radius: 3px;
   153|   max-width: 90vw;
   154|   max-height: calc(100vh - 250px);
   155|   padding: 1em 2em;
   156|   overflow: auto;
   157|   ${CopyErrorButtonWrapper} {
   158|     display: none;
   159|   }
   160|   &:hover ${CopyErrorButtonWrapper} {
   161|     display: flex;
   162|   }
   163| `;
   164| export const ErrorWrapperCentered = styled(ErrorWrapper)`
   165|   position: absolute;
   166|   left: 50%;
   167|   top: 100px;
   168|   transform: translate(-50%, 0);
   169| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/app/ShortcutHandler.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {CoreColors} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import ReactDOM from 'react-dom';
     4| import styled from 'styled-components';
     5| import {getJSONForKey} from '../hooks/useStateWithStorage';
     6| export const SHORTCUTS_STORAGE_KEY = 'keyboard-shortcuts-enabled';
     7| const MODIFIER_KEYS = [
     8|   'ControlLeft',
     9|   'ControlRight',
    10|   'AltLeft',
    11|   'AltRight',
    12|   'MetaLeft',
    13|   'MetaRight',
    14| ];
    15| const SHORTCUT_VISIBILITY_EVENT_TYPE = 'shortcut-visibility';
    16| const SHORTCUT_VISIBLITY_DELAY = 800;
    17| let shortcutsVisible = false;
    18| let shortcutsTimer: NodeJS.Timeout | null = null;
    19| function getShortcutsVisible() {
    20|   return shortcutsVisible;
    21| }

# --- HUNK 2: Lines 137-162 ---
   137|           {children}
   138|           <ShortcutAnnotation style={{top: previewPosition.top, left: previewPosition.left}}>
   139|             {shortcutLabel}
   140|           </ShortcutAnnotation>
   141|         </>
   142|       );
   143|     }
   144|     return <>{children}</>;
   145|   }
   146| }
   147| const ShortcutAnnotation = styled.div`
   148|   position: fixed;
   149|   min-width: 32px;
   150|   font-size: 12px;
   151|   font-weight: 600;
   152|   line-height: 14px;
   153|   text-align: center;
   154|   padding: 2px;
   155|   z-index: 20;
   156|   transform: translate(-90%, -10px);
   157|   color: ${CoreColors.Gray100};
   158|   background: ${CoreColors.Gray800};
   159|   border: 1px solid ${CoreColors.Gray300};
   160|   border-radius: 3px;
   161|   box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
   162| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/app/UserSettingsButton.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-41 ---
     1| import {IconWrapper, Icon, CoreColors} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| import {UserSettingsDialog} from './UserSettingsDialog';
     5| import {getVisibleFeatureFlagRows} from './getVisibleFeatureFlagRows';
     6| const SettingsButton = styled.button`
     7|   background: transparent;
     8|   border: 0;
     9|   cursor: pointer;
    10|   padding: 24px;
    11|   ${IconWrapper} {
    12|     transition: background 50ms linear;
    13|   }
    14|   &:hover ${IconWrapper} {
    15|     background: ${CoreColors.White};
    16|   }
    17|   &:active ${IconWrapper} {
    18|     background: ${CoreColors.White};
    19|   }
    20|   &:focus {
    21|     outline: none;
    22|     ${IconWrapper} {
    23|       background: ${CoreColors.White};
    24|     }
    25|   }
    26| `;
    27| export const UserSettingsButton = () => {
    28|   const [isOpen, setIsOpen] = React.useState(false);
    29|   return (
    30|     <>
    31|       <SettingsButton onClick={() => setIsOpen(true)} title="User settings">
    32|         <Icon name="settings" color={CoreColors.Gray200} />
    33|       </SettingsButton>
    34|       <UserSettingsDialog
    35|         isOpen={isOpen}
    36|         onClose={() => setIsOpen(false)}
    37|         visibleFlags={getVisibleFeatureFlagRows()}
    38|       />
    39|     </>
    40|   );
    41| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/app/UserSettingsDialog.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-154 ---
     1| import {
     2|   Box,
     3|   Button,
     4|   ButtonLink,
     5|   Checkbox,
     6|   Dialog,
     7|   DialogBody,
     8|   DialogFooter,
     9|   MetadataTable,
    10|   Subheading,
    11| } from '@dagster-io/ui-components';
    12| import {DAGSTER_THEME_KEY, DagsterTheme} from '@dagster-io/ui-components/src/theme/theme';
    13| import * as React from 'react';
    14| import {useStateWithStorage} from '../hooks/useStateWithStorage';
    15| import {FeatureFlagType, getFeatureFlags, setFeatureFlags} from './Flags';
    16| import {SHORTCUTS_STORAGE_KEY} from './ShortcutHandler';
    17| import {HourCycleSelect} from './time/HourCycleSelect';
    18| import {ThemeSelect} from './time/ThemeSelect';
    19| import {TimezoneSelect} from './time/TimezoneSelect';
    20| import {automaticLabel} from './time/browserTimezone';
    21| type OnCloseFn = (event: React.SyntheticEvent<HTMLElement>) => void;
    22| type VisibleFlag = {key: string; label?: React.ReactNode; flagType: FeatureFlagType};
    23| interface DialogProps {
    24|   isOpen: boolean;
    25|   onClose: OnCloseFn;
    26|   visibleFlags: VisibleFlag[];
    27| }
    28| export const UserSettingsDialog = ({isOpen, onClose, visibleFlags}: DialogProps) => {
    29|   return (
    30|     <Dialog
    31|       title="User settings"
    32|       isOpen={isOpen}
    33|       canOutsideClickClose={false}
    34|       canEscapeKeyClose={false}
    35|     >
    36|       <UserSettingsDialogContent onClose={onClose} visibleFlags={visibleFlags} />
    37|     </Dialog>
    38|   );
    39| };
    40| interface DialogContentProps {
    41|   onClose: OnCloseFn;
    42|   visibleFlags: {key: string; label?: React.ReactNode; flagType: FeatureFlagType}[];
    43| }
    44| /**
    45|  * Separate the content from the `Dialog` so that we don't prepare its state before
    46|  * we want to render it.
    47|  */
    48| const UserSettingsDialogContent = ({onClose, visibleFlags}: DialogContentProps) => {
    49|   const [flags, setFlags] = React.useState<FeatureFlagType[]>(() => getFeatureFlags());
    50|   const [reloading, setReloading] = React.useState(false);
    51|   const [shortcutsEnabled, setShortcutsEnabled] = useStateWithStorage(
    52|     SHORTCUTS_STORAGE_KEY,
    53|     (value: any) => (typeof value === 'boolean' ? value : true),
    54|   );
    55|   const [theme, setTheme] = useStateWithStorage(DAGSTER_THEME_KEY, (value: any) => {
    56|     if (value === DagsterTheme.Light || value === DagsterTheme.Dark) {
    57|       return value;
    58|     }
    59|     return DagsterTheme.Legacy;
    60|   });
    61|   const initialFlagState = React.useRef(JSON.stringify([...getFeatureFlags().sort()]));
    62|   const initialShortcutsEnabled = React.useRef(shortcutsEnabled);
    63|   const initialTheme = React.useRef(theme);
    64|   React.useEffect(() => {
    65|     setFeatureFlags(flags);
    66|   });
    67|   const toggleFlag = (flag: FeatureFlagType) => {
    68|     setFlags(flags.includes(flag) ? flags.filter((f) => f !== flag) : [...flags, flag]);
    69|   };
    70|   const trigger = React.useCallback(
    71|     (timezone: string) => (
    72|       <ButtonLink>{timezone === 'Automatic' ? automaticLabel() : timezone}</ButtonLink>
    73|     ),
    74|     [],
    75|   );
    76|   const toggleKeyboardShortcuts = (e: React.ChangeEvent<HTMLInputElement>) => {
    77|     const {checked} = e.target;
    78|     setShortcutsEnabled(checked);
    79|   };
    80|   const anyChange =
    81|     initialFlagState.current !== JSON.stringify([...flags.sort()]) ||
    82|     initialShortcutsEnabled.current !== shortcutsEnabled ||
    83|     initialTheme.current !== theme;
    84|   const handleClose = (event: React.SyntheticEvent<HTMLElement>) => {
    85|     if (anyChange) {
    86|       setReloading(true);
    87|       window.location.reload();
    88|     } else {
    89|       onClose(event);
    90|     }
    91|   };
    92|   return (
    93|     <>
    94|       <DialogBody>
    95|         <Box padding={{bottom: 8}}>
    96|           <Box padding={{bottom: 8}}>
    97|             <Subheading>Preferences</Subheading>
    98|           </Box>
    99|           <MetadataTable
   100|             rows={[
   101|               {
   102|                 key: 'Timezone',
   103|                 value: (
   104|                   <Box margin={{bottom: 4}}>
   105|                     <TimezoneSelect trigger={trigger} />
   106|                   </Box>
   107|                 ),
   108|               },
   109|               {
   110|                 key: 'Hour format',
   111|                 value: (
   112|                   <Box margin={{bottom: 4}}>
   113|                     <HourCycleSelect />
   114|                   </Box>
   115|                 ),
   116|               },
   117|               {
   118|                 key: 'Theme',
   119|                 label: (
   120|                   <div>
   121|                     Theme (
   122|                     <a
   123|                       href="https://github.com/dagster-io/dagster/discussions/18439"
   124|                       target="_blank"
   125|                       rel="noreferrer"
   126|                     >
   127|                       Learn more
   128|                     </a>
   129|                     )
   130|                   </div>
   131|                 ),
   132|                 value: (
   133|                   <Box margin={{bottom: 4}}>
   134|                     <ThemeSelect theme={theme} onChange={setTheme} />
   135|                   </Box>
   136|                 ),
   137|               },
   138|               {
   139|                 key: 'Enable keyboard shortcuts',
   140|                 value: (
   141|                   <Checkbox
   142|                     checked={shortcutsEnabled}
   143|                     format="switch"
   144|                     onChange={toggleKeyboardShortcuts}
   145|                   />
   146|                 ),
   147|               },
   148|             ]}
   149|           />
   150|         </Box>
   151|         <Box padding={{top: 16}} border="top">
   152|           <Box padding={{bottom: 8}}>
   153|             <Subheading>Experimental features</Subheading>
   154|           </Box>


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/app/WebSocketProvider.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-26 ---
     1| import {
     2|   colorAccentGray,
     3|   colorAccentGreen,
     4|   colorAccentLime,
     5|   colorAccentPrimary,
     6| } from '@dagster-io/ui-components';
     7| import debounce from 'lodash/debounce';
     8| import * as React from 'react';
     9| import styled from 'styled-components';
    10| import {SubscriptionClient} from 'subscriptions-transport-ws';
    11| import {useFeatureFlags} from './Flags';
    12| type Availability = 'attempting-to-connect' | 'unavailable' | 'available';
    13| export type WebSocketContextType = {
    14|   availability: Availability;
    15|   status: number;
    16|   disabled?: boolean;
    17|   websocketClient?: SubscriptionClient;
    18| };
    19| export const WebSocketContext = React.createContext<WebSocketContextType>({
    20|   availability: 'attempting-to-connect',
    21|   status: WebSocket.CONNECTING,
    22|   disabled: false,
    23| });
    24| const WS_EVENTS = [
    25|   'connecting',
    26|   'connected',

# --- HUNK 2: Lines 84-124 ---
    84|   React.useEffect(() => {
    85|     let timeout: ReturnType<typeof setTimeout> | null = null;
    86|     if (availability === 'attempting-to-connect') {
    87|       timeout = setTimeout(() => {
    88|         console.log('[WebSockets] Timed out waiting for WS connection.');
    89|         setAvailability('unavailable');
    90|       }, TIME_TO_WAIT_FOR_ACK);
    91|     }
    92|     return () => {
    93|       timeout && clearTimeout(timeout);
    94|     };
    95|   }, [availability]);
    96|   return <WebSocketContext.Provider value={value}>{children}</WebSocketContext.Provider>;
    97| };
    98| const Circle = styled.div`
    99|   align-self: center;
   100|   width: 12px;
   101|   height: 12px;
   102|   display: inline-block;
   103|   border-radius: 7px;
   104|   border: 1px solid ${colorAccentPrimary()};
   105| `;
   106| export const WebSocketStatus = (props: React.ComponentProps<typeof Circle>) => (
   107|   <WebSocketContext.Consumer>
   108|     {({status}) =>
   109|       ({
   110|         [WebSocket.CONNECTING]: (
   111|           <Circle style={{background: colorAccentLime()}} title="Connecting..." {...props} />
   112|         ),
   113|         [WebSocket.OPEN]: (
   114|           <Circle style={{background: colorAccentGreen()}} title="Connected" {...props} />
   115|         ),
   116|         [WebSocket.CLOSING]: (
   117|           <Circle style={{background: colorAccentGray()}} title="Closing..." {...props} />
   118|         ),
   119|       })[status] || (
   120|         <Circle style={{background: colorAccentGray()}} title="Disconnected" {...props} />
   121|       )
   122|     }
   123|   </WebSocketContext.Consumer>
   124| );


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/app/getVisibleFeatureFlagRows.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 11-50 ---
    11|       <Box flex={{direction: 'column'}}>
    12|         Experimental asset graph experience
    13|         <div>
    14|           <a
    15|             href="https://github.com/dagster-io/dagster/discussions/16657"
    16|             target="_blank"
    17|             rel="noreferrer"
    18|           >
    19|             Learn more
    20|           </a>
    21|         </div>
    22|       </Box>
    23|     ),
    24|     flagType: FeatureFlag.flagDAGSidebar,
    25|   },
    26|   {
    27|     key: 'Experimental schedule/sensor logging view',
    28|     flagType: FeatureFlag.flagSensorScheduleLogging,
    29|   },
    30|   {
    31|     key: 'Display resources in navigation sidebar',
    32|     flagType: FeatureFlag.flagSidebarResources,
    33|   },
    34|   {
    35|     key: 'Disable Asset Graph caching',
    36|     flagType: FeatureFlag.flagDisableDAGCache,
    37|   },
    38|   {
    39|     key: 'Disable WebSockets',
    40|     flagType: FeatureFlag.flagDisableWebsockets,
    41|   },
    42|   {
    43|     key: 'Disable automatically loading default config in launchpad',
    44|     flagType: FeatureFlag.flagDisableAutoLoadDefaults,
    45|   },
    46|   {
    47|     key: 'Debug console logging',
    48|     flagType: FeatureFlag.flagDebugConsoleLogging,
    49|   },
    50| ];


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/app/time/ThemeSelect.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-53 ---
     1| import {ButtonLink, Menu, MenuItem, Select} from '@dagster-io/ui-components';
     2| import {DagsterTheme} from '@dagster-io/ui-components/src/theme/theme';
     3| import * as React from 'react';
     4| interface Props {
     5|   theme: DagsterTheme;
     6|   onChange: (value: DagsterTheme) => void;
     7| }
     8| export const ThemeSelect = ({theme, onChange}: Props) => {
     9|   const items = [
    10|     {
    11|       key: DagsterTheme.Legacy,
    12|       label: 'Legacy',
    13|     },
    14|     {
    15|       key: DagsterTheme.Light,
    16|       label: 'Light (experimental)',
    17|     },
    18|     {
    19|       key: DagsterTheme.Dark,
    20|       label: 'Dark (experimental)',
    21|     },
    22|   ];
    23|   const activeItem = items.find(({key}) => key === theme);
    24|   return (
    25|     <Select<(typeof items)[0]>
    26|       popoverProps={{
    27|         position: 'bottom-left',
    28|         modifiers: {offset: {enabled: true, offset: '-12px, 8px'}},
    29|       }}
    30|       filterable={false}
    31|       activeItem={activeItem}
    32|       items={items}
    33|       itemRenderer={(item, props) => {
    34|         return (
    35|           <MenuItem
    36|             active={props.modifiers.active}
    37|             onClick={props.handleClick}
    38|             key={item.key}
    39|             text={item.label}
    40|             style={{width: '300px'}}
    41|           />
    42|         );
    43|       }}
    44|       itemListRenderer={({renderItem, filteredItems}) => {
    45|         const renderedItems = filteredItems.map(renderItem).filter(Boolean);
    46|         return <Menu>{renderedItems}</Menu>;
    47|       }}
    48|       onItemSelect={(item) => onChange(item.key)}
    49|     >
    50|       <ButtonLink>{activeItem?.label}</ButtonLink>
    51|     </Select>
    52|   );
    53| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-data/AssetDataRefreshButton.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {Box, Button, Icon, Tooltip, colorAccentGray} from '@dagster-io/ui-components';
     2| import dayjs from 'dayjs';
     3| import relativeTime from 'dayjs/plugin/relativeTime';
     4| import updateLocale from 'dayjs/plugin/updateLocale';
     5| import React from 'react';
     6| dayjs.extend(relativeTime);
     7| dayjs.extend(updateLocale);
     8| dayjs.updateLocale('en', {
     9|   relativeTime: {
    10|     future: 'in %s',
    11|     past: '%s ago',
    12|     s: '%d seconds',
    13|     m: 'a minute',
    14|     mm: '%d minutes',
    15|     h: 'an hour',
    16|     hh: '%d hours',
    17|     d: 'a day',
    18|     dd: '%d days',
    19|     M: 'a month',
    20|     MM: '%d months',
    21|     y: 'a year',

# --- HUNK 2: Lines 28-68 ---
    28|   oldestDataTimestamp,
    29| }: {
    30|   isRefreshing: boolean;
    31|   onRefresh: () => void;
    32|   oldestDataTimestamp: number;
    33| }) => {
    34|   return (
    35|     <Tooltip
    36|       content={
    37|         isRefreshing ? (
    38|           'Refreshing asset data'
    39|         ) : (
    40|           <Box flex={{direction: 'column', gap: 4}}>
    41|             <TimeFromNowWithSeconds timestamp={oldestDataTimestamp} />
    42|             <div>Click to refresh now</div>
    43|           </Box>
    44|         )
    45|       }
    46|     >
    47|       <Button
    48|         icon={<Icon name="refresh" color={colorAccentGray()} />}
    49|         onClick={() => {
    50|           if (!isRefreshing) {
    51|             onRefresh();
    52|           }
    53|         }}
    54|       />
    55|     </Tooltip>
    56|   );
    57| };
    58| const TimeFromNowWithSeconds = ({timestamp}: {timestamp: number}) => {
    59|   const [text, setText] = React.useState(dayjs(timestamp).fromNow(true));
    60|   React.useEffect(() => {
    61|     const interval = setInterval(() => {
    62|       setText(dayjs(timestamp).fromNow(true));
    63|     }, 1000);
    64|     return () => {
    65|       clearInterval(interval);
    66|     };
    67|   }, [timestamp]);
    68|   return <>{text === '0s' ? 'Refreshing asset data' : `Data is at most ${text} old`}</>;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/AssetEdges.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-54 ---
     1| import {colorLineageEdgeHighlighted, colorLineageEdge} from '@dagster-io/ui-components';
     2| import React from 'react';
     3| import {buildSVGPath} from './Utils';
     4| import {AssetLayoutEdge} from './layout';
     5| interface AssetEdgesProps {
     6|   edges: AssetLayoutEdge[];
     7|   selected: string[] | null;
     8|   highlighted: string | null;
     9|   strokeWidth?: number;
    10|   viewportRect: {top: number; left: number; right: number; bottom: number};
    11| }
    12| export const AssetEdges = ({
    13|   edges,
    14|   selected,
    15|   highlighted,
    16|   strokeWidth = 4,
    17|   viewportRect,
    18| }: AssetEdgesProps) => {
    19|   const intersectedEdges = edges.filter((edge) => doesViewportContainEdge(edge, viewportRect));
    20|   const visibleToFromEdges = intersectedEdges.filter(
    21|     (edge) =>
    22|       doesViewportContainPoint(edge.from, viewportRect) ||
    23|       doesViewportContainPoint(edge.to, viewportRect),
    24|   );
    25|   return (
    26|     <React.Fragment>
    27|       <AssetEdgeSet
    28|         color={colorLineageEdge()}
    29|         edges={intersectedEdges.length > 50 ? visibleToFromEdges : intersectedEdges}
    30|         strokeWidth={strokeWidth}
    31|         viewportRect={viewportRect}
    32|       />
    33|       <AssetEdgeSet
    34|         color={colorLineageEdgeHighlighted()}
    35|         edges={edges.filter(
    36|           ({fromId, toId}) =>
    37|             selected?.includes(fromId) ||
    38|             selected?.includes(toId) ||
    39|             highlighted === fromId ||
    40|             highlighted === toId,
    41|         )}
    42|         strokeWidth={strokeWidth}
    43|         viewportRect={viewportRect}
    44|       />
    45|     </React.Fragment>
    46|   );
    47| };
    48| interface AssetEdgeSetProps {
    49|   edges: AssetLayoutEdge[];
    50|   color: string;
    51|   strokeWidth: number;
    52|   viewportRect: {top: number; left: number; right: number; bottom: number};
    53| }
    54| const AssetEdgeSet = React.memo(({edges, color, strokeWidth}: AssetEdgeSetProps) => (


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/AssetGraphExplorer.tsx
# Total hunks: 5
# ====================================================================
# --- HUNK 1: Lines 1-214 ---
     1| import {
     2|   Checkbox,
     3|   NonIdealState,
     4|   SplitPanelContainer,
     5|   ErrorBoundary,
     6|   Button,
     7|   Icon,
     8|   Tooltip,
     9|   TextInputContainer,
    10|   Box,
    11|   colorKeylineDefault,
    12|   colorBackgroundDefault,
    13|   Menu,
    14|   MenuItem,
    15| } from '@dagster-io/ui-components';
    16| import pickBy from 'lodash/pickBy';
    17| import uniq from 'lodash/uniq';
    18| import without from 'lodash/without';
    19| import React from 'react';
    20| import styled from 'styled-components';
    21| import {useFeatureFlags} from '../app/Flags';
    22| import {ShortcutHandler} from '../app/ShortcutHandler';
    23| import {AssetLiveDataRefresh} from '../asset-data/AssetLiveDataProvider';
    24| import {LaunchAssetExecutionButton} from '../assets/LaunchAssetExecutionButton';
    25| import {LaunchAssetObservationButton} from '../assets/LaunchAssetObservationButton';
    26| import {AssetKey} from '../assets/types';
    27| import {DEFAULT_MAX_ZOOM, SVGViewport} from '../graph/SVGViewport';
    28| import {useAssetLayout} from '../graph/asyncGraphLayout';
    29| import {closestNodeInDirection, isNodeOffscreen} from '../graph/common';
    30| import {AssetGroupSelector} from '../graphql/types';
    31| import {useQueryPersistedState} from '../hooks/useQueryPersistedState';
    32| import {
    33|   GraphExplorerOptions,
    34|   OptionsOverlay,
    35|   RightInfoPanel,
    36|   RightInfoPanelContent,
    37| } from '../pipelines/GraphExplorer';
    38| import {EmptyDAGNotice, EntirelyFilteredDAGNotice, LoadingNotice} from '../pipelines/GraphNotices';
    39| import {ExplorerPath} from '../pipelines/PipelinePathUtils';
    40| import {GraphQueryInput} from '../ui/GraphQueryInput';
    41| import {Loading} from '../ui/Loading';
    42| import {WorkspaceContext} from '../workspace/WorkspaceContext';
    43| import {AssetEdges} from './AssetEdges';
    44| import {useAssetGraphExplorerFilters} from './AssetGraphExplorerFilters';
    45| import {AssetGraphJobSidebar} from './AssetGraphJobSidebar';
    46| import {AssetGroupNode} from './AssetGroupNode';
    47| import {AssetNode, AssetNodeMinimal, AssetNodeContextMenuWrapper} from './AssetNode';
    48| import {CollapsedGroupNode} from './CollapsedGroupNode';
    49| import {ContextMenuWrapper} from './ContextMenuWrapper';
    50| import {ExpandedGroupNode} from './ExpandedGroupNode';
    51| import {AssetNodeLink} from './ForeignNode';
    52| import {SidebarAssetInfo} from './SidebarAssetInfo';
    53| import {TryTheFeatureFlagNotice} from './TryTheFeatureFlagNotice';
    54| import {
    55|   GraphData,
    56|   graphHasCycles,
    57|   GraphNode,
    58|   isGroupId,
    59|   groupIdForNode,
    60|   tokenForAssetKey,
    61| } from './Utils';
    62| import {assetKeyTokensInRange} from './assetKeyTokensInRange';
    63| import {AssetGraphLayout, AssetLayoutEdge, GroupLayout} from './layout';
    64| import {AssetGraphExplorerSidebar} from './sidebar/Sidebar';
    65| import {AssetNodeForGraphQueryFragment} from './types/useAssetGraphData.types';
    66| import {AssetGraphFetchScope, AssetGraphQueryItem, useAssetGraphData} from './useAssetGraphData';
    67| import {AssetLocation, useFindAssetLocation} from './useFindAssetLocation';
    68| type AssetNode = AssetNodeForGraphQueryFragment;
    69| type OptionalFilters =
    70|   | {
    71|       filters: {
    72|         groups: AssetGroupSelector[];
    73|         computeKindTags: string[];
    74|       };
    75|       setFilters: (updates: {groups: AssetGroupSelector[]; computeKindTags: string[]}) => void;
    76|     }
    77|   | {filters?: null; setFilters?: null};
    78| type Props = {
    79|   options: GraphExplorerOptions;
    80|   setOptions?: (options: GraphExplorerOptions) => void;
    81|   fetchOptions: AssetGraphFetchScope;
    82|   explorerPath: ExplorerPath;
    83|   onChangeExplorerPath: (path: ExplorerPath, mode: 'replace' | 'push') => void;
    84|   onNavigateToSourceAssetNode: (node: AssetLocation) => void;
    85| } & OptionalFilters;
    86| export const MINIMAL_SCALE = 0.6;
    87| export const GROUPS_ONLY_SCALE = 0.15;
    88| const emptyArray: any[] = [];
    89| export const AssetGraphExplorer = (props: Props) => {
    90|   const {fetchResult, assetGraphData, fullAssetGraphData, graphQueryItems, allAssetKeys} =
    91|     useAssetGraphData(props.explorerPath.opsQuery, {
    92|       ...props.fetchOptions,
    93|       computeKinds: props.filters?.computeKindTags,
    94|     });
    95|   const {visibleRepos} = React.useContext(WorkspaceContext);
    96|   const assetGroups: AssetGroupSelector[] = React.useMemo(() => {
    97|     return visibleRepos.flatMap((repo) =>
    98|       repo.repository.assetGroups.map((g) => ({
    99|         groupName: g.groupName,
   100|         repositoryLocationName: repo.repositoryLocation.name,
   101|         repositoryName: repo.repository.name,
   102|       })),
   103|     );
   104|   }, [visibleRepos]);
   105|   const {button, filterBar} = useAssetGraphExplorerFilters({
   106|     nodes: React.useMemo(
   107|       () => (fullAssetGraphData ? Object.values(fullAssetGraphData.nodes) : []),
   108|       [fullAssetGraphData],
   109|     ),
   110|     assetGroups,
   111|     visibleAssetGroups: React.useMemo(() => props.filters?.groups || [], [props.filters?.groups]),
   112|     setGroupFilters: React.useCallback(
   113|       (groups: AssetGroupSelector[]) => props.setFilters?.({...props.filters, groups}),
   114|       [props],
   115|     ),
   116|     computeKindTags: props.filters?.computeKindTags || emptyArray,
   117|     setComputeKindTags: React.useCallback(
   118|       (tags: string[]) =>
   119|         props.setFilters?.({
   120|           ...props.filters,
   121|           computeKindTags: tags,
   122|         }),
   123|       [props],
   124|     ),
   125|   });
   126|   return (
   127|     <Loading allowStaleData queryResult={fetchResult}>
   128|       {() => {
   129|         if (!assetGraphData || !allAssetKeys || !fullAssetGraphData) {
   130|           return <NonIdealState icon="error" title="Query Error" />;
   131|         }
   132|         const hasCycles = graphHasCycles(assetGraphData);
   133|         if (hasCycles) {
   134|           return (
   135|             <NonIdealState
   136|               icon="error"
   137|               title="Cycle detected"
   138|               description="Assets dependencies form a cycle"
   139|             />
   140|           );
   141|         }
   142|         return (
   143|           <AssetGraphExplorerWithData
   144|             key={props.explorerPath.pipelineName}
   145|             assetGraphData={assetGraphData}
   146|             fullAssetGraphData={fullAssetGraphData}
   147|             allAssetKeys={allAssetKeys}
   148|             graphQueryItems={graphQueryItems}
   149|             filterBar={filterBar}
   150|             filterButton={button}
   151|             {...props}
   152|           />
   153|         );
   154|       }}
   155|     </Loading>
   156|   );
   157| };
   158| type WithDataProps = Props & {
   159|   allAssetKeys: AssetKey[];
   160|   assetGraphData: GraphData;
   161|   fullAssetGraphData: GraphData;
   162|   graphQueryItems: AssetGraphQueryItem[];
   163|   filterButton?: React.ReactNode;
   164|   filterBar?: React.ReactNode;
   165| };
   166| const AssetGraphExplorerWithData = ({
   167|   options,
   168|   setOptions,
   169|   explorerPath,
   170|   onChangeExplorerPath,
   171|   onNavigateToSourceAssetNode: onNavigateToSourceAssetNode,
   172|   assetGraphData,
   173|   fullAssetGraphData,
   174|   graphQueryItems,
   175|   fetchOptions,
   176|   allAssetKeys,
   177|   filterButton,
   178|   filterBar,
   179|   filters,
   180|   setFilters,
   181| }: WithDataProps) => {
   182|   const findAssetLocation = useFindAssetLocation();
   183|   const {flagDAGSidebar} = useFeatureFlags();
   184|   const [highlighted, setHighlighted] = React.useState<string | null>(null);
   185|   const {allGroups, allGroupCounts, groupedAssets} = React.useMemo(() => {
   186|     const groupedAssets: Record<string, GraphNode[]> = {};
   187|     Object.values(assetGraphData.nodes).forEach((node) => {
   188|       const groupId = groupIdForNode(node);
   189|       groupedAssets[groupId] = groupedAssets[groupId] || [];
   190|       groupedAssets[groupId]!.push(node);
   191|     });
   192|     const counts: Record<string, number> = {};
   193|     Object.keys(groupedAssets).forEach((key) => (counts[key] = groupedAssets[key]!.length));
   194|     return {allGroups: Object.keys(groupedAssets), allGroupCounts: counts, groupedAssets};
   195|   }, [assetGraphData]);
   196|   const [expandedGroups, setExpandedGroups] = useQueryPersistedState<string[]>({
   197|     encode: (arr) => ({expanded: arr.length ? arr.join(',') : undefined}),
   198|     decode: (qs) => (qs.expanded || '').split(',').filter(Boolean),
   199|   });
   200|   const focusGroupIdAfterLayoutRef = React.useRef('');
   201|   const {layout, loading, async} = useAssetLayout(
   202|     assetGraphData,
   203|     flagDAGSidebar ? expandedGroups : allGroups,
   204|   );
   205|   const viewportEl = React.useRef<SVGViewport>();
   206|   const selectedTokens = explorerPath.opNames[explorerPath.opNames.length - 1]!.split(',');
   207|   const selectedGraphNodes = Object.values(assetGraphData.nodes).filter((node) =>
   208|     selectedTokens.includes(tokenForAssetKey(node.definition.assetKey)),
   209|   );
   210|   const lastSelectedNode = selectedGraphNodes[selectedGraphNodes.length - 1]!;
   211|   const selectedDefinitions = selectedGraphNodes.map((a) => a.definition);
   212|   const allDefinitionsForMaterialize = Object.values(assetGraphData.nodes).map((a) => a.definition);
   213|   const onSelectNode = React.useCallback(
   214|     async (

# --- HUNK 2: Lines 354-762 ---
   354|       key="toggle-groups"
   355|       shortcutLabel="E"
   356|       onShortcut={() => setExpandedGroups(expandedGroups.length === 0 ? allGroups : [])}
   357|       shortcutFilter={(e) => e.altKey && e.code === 'KeyE'}
   358|     >
   359|       {expandedGroups.length === 0 ? (
   360|         <Button
   361|           title="Expand all groups"
   362|           icon={<Icon name="unfold_more" />}
   363|           onClick={() => setExpandedGroups(allGroups)}
   364|         />
   365|       ) : (
   366|         <Button
   367|           title="Collapse all groups"
   368|           icon={<Icon name="unfold_less" />}
   369|           onClick={() => setExpandedGroups([])}
   370|         />
   371|       )}
   372|     </ShortcutHandler>
   373|   );
   374|   const onFilterToGroup = (group: GroupLayout) => {
   375|     setFilters?.({
   376|       ...filters,
   377|       groups: [
   378|         {
   379|           groupName: group.groupName,
   380|           repositoryName: group.repositoryName,
   381|           repositoryLocationName: group.repositoryLocationName,
   382|         },
   383|       ],
   384|     });
   385|   };
   386|   const areAllGroupsCollapsed = expandedGroups.length === 0;
   387|   const areAllGroupsExpanded = expandedGroups.length === allGroups.length;
   388|   const svgViewport = layout ? (
   389|     <SVGViewport
   390|       ref={(r) => (viewportEl.current = r || undefined)}
   391|       defaultZoom={flagDAGSidebar ? 'zoom-to-fit-width' : 'zoom-to-fit'}
   392|       interactor={SVGViewport.Interactors.PanAndZoom}
   393|       graphWidth={layout.width}
   394|       graphHeight={layout.height}
   395|       graphHasNoMinimumZoom={allowGroupsOnlyZoomLevel || flagDAGSidebar}
   396|       additionalToolbarElements={toggleGroupsButton}
   397|       onClick={onClickBackground}
   398|       onArrowKeyDown={onArrowKeyDown}
   399|       onDoubleClick={(e) => {
   400|         viewportEl.current?.autocenter(true);
   401|         e.stopPropagation();
   402|       }}
   403|       maxZoom={DEFAULT_MAX_ZOOM}
   404|       maxAutocenterZoom={1.0}
   405|     >
   406|       {({scale}, viewportRect) => (
   407|         <SVGContainer width={layout.width} height={layout.height}>
   408|           {flagDAGSidebar &&
   409|             Object.values(layout.groups)
   410|               .filter((node) => !isNodeOffscreen(node.bounds, viewportRect))
   411|               .filter((group) => group.expanded)
   412|               .sort((a, b) => a.id.length - b.id.length)
   413|               .map((group) => (
   414|                 <foreignObject
   415|                   key={group.id}
   416|                   {...group.bounds}
   417|                   className="group"
   418|                   onDoubleClick={(e) => {
   419|                     zoomToGroup(group.id);
   420|                     e.stopPropagation();
   421|                   }}
   422|                 >
   423|                   <ExpandedGroupNode
   424|                     preferredJobName={explorerPath.pipelineName}
   425|                     onFilterToGroup={() => onFilterToGroup(group)}
   426|                     group={{
   427|                       ...group,
   428|                       assets: groupedAssets[group.id] || [],
   429|                     }}
   430|                     minimal={scale < MINIMAL_SCALE}
   431|                     onCollapse={() => {
   432|                       focusGroupIdAfterLayoutRef.current = group.id;
   433|                       setExpandedGroups(expandedGroups.filter((g) => g !== group.id));
   434|                     }}
   435|                   />
   436|                 </foreignObject>
   437|               ))}
   438|           <AssetEdges
   439|             viewportRect={viewportRect}
   440|             selected={selectedGraphNodes.map((n) => n.id)}
   441|             highlighted={highlighted}
   442|             edges={
   443|               flagDAGSidebar
   444|                 ? layout.edges
   445|                 : filterEdges(layout.edges, allowGroupsOnlyZoomLevel, scale, assetGraphData)
   446|             }
   447|             strokeWidth={allowGroupsOnlyZoomLevel ? Math.max(4, 3 / scale) : 4}
   448|           />
   449|           {Object.values(layout.groups)
   450|             .filter((node) => !isNodeOffscreen(node.bounds, viewportRect))
   451|             .filter((group) => !flagDAGSidebar || !group.expanded)
   452|             .sort((a, b) => a.id.length - b.id.length)
   453|             .map((group) => (
   454|               <foreignObject
   455|                 key={group.id}
   456|                 {...group.bounds}
   457|                 className="group"
   458|                 onDoubleClick={(e) => {
   459|                   if (!viewportEl.current) {
   460|                     return;
   461|                   }
   462|                   const targetScale = viewportEl.current.scaleForSVGBounds(
   463|                     group.bounds.width,
   464|                     group.bounds.height,
   465|                   );
   466|                   viewportEl.current.zoomToSVGBox(group.bounds, true, targetScale * 0.9);
   467|                   e.stopPropagation();
   468|                 }}
   469|               >
   470|                 {flagDAGSidebar ? (
   471|                   <CollapsedGroupNode
   472|                     preferredJobName={explorerPath.pipelineName}
   473|                     onFilterToGroup={() => onFilterToGroup(group)}
   474|                     minimal={scale < MINIMAL_SCALE}
   475|                     group={{
   476|                       ...group,
   477|                       assetCount: allGroupCounts[group.id] || 0,
   478|                       assets: groupedAssets[group.id] || [],
   479|                     }}
   480|                     onExpand={() => {
   481|                       focusGroupIdAfterLayoutRef.current = group.id;
   482|                       setExpandedGroups([...expandedGroups, group.id]);
   483|                     }}
   484|                   />
   485|                 ) : (
   486|                   <AssetGroupNode group={group} scale={scale} />
   487|                 )}
   488|               </foreignObject>
   489|             ))}
   490|           {Object.values(layout.nodes)
   491|             .filter((node) => !isNodeOffscreen(node.bounds, viewportRect))
   492|             .map(({id, bounds}) => {
   493|               const graphNode = assetGraphData.nodes[id]!;
   494|               const path = JSON.parse(id);
   495|               if (allowGroupsOnlyZoomLevel && scale < GROUPS_ONLY_SCALE) {
   496|                 return;
   497|               }
   498|               if (bounds.width === 1) {
   499|                 return;
   500|               }
   501|               const contextMenuProps = {
   502|                 graphData: fullAssetGraphData,
   503|                 node: graphNode,
   504|                 explorerPath,
   505|                 onChangeExplorerPath,
   506|                 selectNode: selectNodeById,
   507|               };
   508|               return (
   509|                 <foreignObject
   510|                   {...bounds}
   511|                   key={id}
   512|                   onMouseEnter={() => setHighlighted(id)}
   513|                   onMouseLeave={() => setHighlighted(null)}
   514|                   onClick={(e) => onSelectNode(e, {path}, graphNode)}
   515|                   onDoubleClick={(e) => {
   516|                     viewportEl.current?.zoomToSVGBox(bounds, true, 1.2);
   517|                     e.stopPropagation();
   518|                   }}
   519|                   style={{overflow: 'visible'}}
   520|                 >
   521|                   {!graphNode ? (
   522|                     <AssetNodeLink assetKey={{path}} />
   523|                   ) : scale < MINIMAL_SCALE ? (
   524|                     <AssetNodeContextMenuWrapper {...contextMenuProps}>
   525|                       <AssetNodeMinimal
   526|                         definition={graphNode.definition}
   527|                         selected={selectedGraphNodes.includes(graphNode)}
   528|                         height={bounds.height}
   529|                       />
   530|                     </AssetNodeContextMenuWrapper>
   531|                   ) : (
   532|                     <AssetNodeContextMenuWrapper {...contextMenuProps}>
   533|                       <AssetNode
   534|                         definition={graphNode.definition}
   535|                         selected={selectedGraphNodes.includes(graphNode)}
   536|                       />
   537|                     </AssetNodeContextMenuWrapper>
   538|                   )}
   539|                 </foreignObject>
   540|               );
   541|             })}
   542|         </SVGContainer>
   543|       )}
   544|     </SVGViewport>
   545|   ) : null;
   546|   const explorer = (
   547|     <SplitPanelContainer
   548|       key="explorer"
   549|       identifier="asset-graph-explorer"
   550|       firstInitialPercent={70}
   551|       firstMinSize={400}
   552|       first={
   553|         <ErrorBoundary region="graph">
   554|           {!flagDAGSidebar ? <TryTheFeatureFlagNotice /> : undefined}
   555|           {graphQueryItems.length === 0 ? (
   556|             <EmptyDAGNotice nodeType="asset" isGraph />
   557|           ) : Object.keys(assetGraphData.nodes).length === 0 ? (
   558|             <EntirelyFilteredDAGNotice nodeType="asset" />
   559|           ) : undefined}
   560|           {loading || !layout ? (
   561|             <LoadingNotice async={async} nodeType="asset" />
   562|           ) : allGroups.length > 1 ? (
   563|             <ContextMenuWrapper
   564|               wrapperOuterStyles={{width: '100%', height: '100%'}}
   565|               wrapperInnerStyles={{width: '100%', height: '100%'}}
   566|               menu={
   567|                 <Menu>
   568|                   {areAllGroupsCollapsed ? null : (
   569|                     <MenuItem
   570|                       text="Collapse all groups"
   571|                       icon={<Icon name="unfold_less" />}
   572|                       onClick={() => {
   573|                         setExpandedGroups([]);
   574|                       }}
   575|                     />
   576|                   )}
   577|                   {areAllGroupsExpanded ? null : (
   578|                     <MenuItem
   579|                       text="Expand all groups"
   580|                       icon={<Icon name="unfold_more" />}
   581|                       onClick={() => {
   582|                         setExpandedGroups(allGroups);
   583|                       }}
   584|                     />
   585|                   )}
   586|                 </Menu>
   587|               }
   588|             >
   589|               {svgViewport}
   590|             </ContextMenuWrapper>
   591|           ) : (
   592|             svgViewport
   593|           )}
   594|           {setOptions && (
   595|             <OptionsOverlay>
   596|               <Checkbox
   597|                 format="switch"
   598|                 label="View as Asset Graph"
   599|                 checked={options.preferAssetRendering}
   600|                 onChange={() => {
   601|                   onChangeExplorerPath(
   602|                     {...explorerPath, opNames: selectedDefinitions[0]?.opNames || []},
   603|                     'replace',
   604|                   );
   605|                   setOptions({
   606|                     ...options,
   607|                     preferAssetRendering: !options.preferAssetRendering,
   608|                   });
   609|                 }}
   610|               />
   611|             </OptionsOverlay>
   612|           )}
   613|           <TopbarWrapper>
   614|             <Box flex={{direction: 'column'}} style={{width: '100%'}}>
   615|               <Box
   616|                 border={filterBar ? 'bottom' : undefined}
   617|                 flex={{gap: 12, alignItems: 'center'}}
   618|                 padding={{left: showSidebar || !flagDAGSidebar ? 12 : 24, vertical: 12, right: 12}}
   619|               >
   620|                 {showSidebar || !flagDAGSidebar ? undefined : (
   621|                   <Tooltip content="Show sidebar">
   622|                     <Button
   623|                       icon={<Icon name="panel_show_left" />}
   624|                       onClick={() => {
   625|                         setShowSidebar(true);
   626|                       }}
   627|                     />
   628|                   </Tooltip>
   629|                 )}
   630|                 <div>{filterButton}</div>
   631|                 <GraphQueryInputFlexWrap>
   632|                   <GraphQueryInput
   633|                     type="asset_graph"
   634|                     items={graphQueryItems}
   635|                     value={explorerPath.opsQuery}
   636|                     placeholder="Type an asset subset"
   637|                     onChange={(opsQuery) =>
   638|                       onChangeExplorerPath({...explorerPath, opsQuery}, 'replace')
   639|                     }
   640|                     popoverPosition="bottom-left"
   641|                   />
   642|                 </GraphQueryInputFlexWrap>
   643|                 <Button
   644|                   onClick={() => {
   645|                     onChangeExplorerPath({...explorerPath, opsQuery: ''}, 'push');
   646|                   }}
   647|                 >
   648|                   Clear query
   649|                 </Button>
   650|                 <AssetLiveDataRefresh />
   651|                 <LaunchAssetObservationButton
   652|                   preferredJobName={explorerPath.pipelineName}
   653|                   scope={
   654|                     selectedDefinitions.length
   655|                       ? {selected: selectedDefinitions.filter((a) => a.isObservable)}
   656|                       : {all: allDefinitionsForMaterialize.filter((a) => a.isObservable)}
   657|                   }
   658|                 />
   659|                 <LaunchAssetExecutionButton
   660|                   preferredJobName={explorerPath.pipelineName}
   661|                   scope={
   662|                     selectedDefinitions.length
   663|                       ? {selected: selectedDefinitions}
   664|                       : {all: allDefinitionsForMaterialize}
   665|                   }
   666|                   showChangedAndMissingOption
   667|                 />
   668|               </Box>
   669|               {filterBar}
   670|             </Box>
   671|           </TopbarWrapper>
   672|         </ErrorBoundary>
   673|       }
   674|       second={
   675|         selectedGraphNodes.length === 1 && selectedGraphNodes[0] ? (
   676|           <RightInfoPanel>
   677|             <RightInfoPanelContent>
   678|               <ErrorBoundary region="asset sidebar" resetErrorOnChange={[selectedGraphNodes[0].id]}>
   679|                 <SidebarAssetInfo graphNode={selectedGraphNodes[0]} />
   680|               </ErrorBoundary>
   681|             </RightInfoPanelContent>
   682|           </RightInfoPanel>
   683|         ) : fetchOptions.pipelineSelector ? (
   684|           <RightInfoPanel>
   685|             <RightInfoPanelContent>
   686|               <ErrorBoundary region="asset job sidebar">
   687|                 <AssetGraphJobSidebar pipelineSelector={fetchOptions.pipelineSelector} />
   688|               </ErrorBoundary>
   689|             </RightInfoPanelContent>
   690|           </RightInfoPanel>
   691|         ) : null
   692|       }
   693|     />
   694|   );
   695|   if (showSidebar && flagDAGSidebar) {
   696|     return (
   697|       <SplitPanelContainer
   698|         key="explorer-wrapper"
   699|         identifier="explorer-wrapper"
   700|         firstMinSize={300}
   701|         firstInitialPercent={0}
   702|         first={
   703|           showSidebar ? (
   704|             <AssetGraphExplorerSidebar
   705|               allAssetKeys={allAssetKeys}
   706|               assetGraphData={assetGraphData}
   707|               fullAssetGraphData={fullAssetGraphData}
   708|               selectedNodes={selectedGraphNodes}
   709|               selectNode={selectNodeById}
   710|               explorerPath={explorerPath}
   711|               onChangeExplorerPath={onChangeExplorerPath}
   712|               expandedGroups={expandedGroups}
   713|               setExpandedGroups={setExpandedGroups}
   714|               hideSidebar={() => {
   715|                 setShowSidebar(false);
   716|               }}
   717|             />
   718|           ) : null
   719|         }
   720|         second={explorer}
   721|       />
   722|     );
   723|   }
   724|   return explorer;
   725| };
   726| const SVGContainer = styled.svg`
   727|   overflow: visible;
   728|   border-radius: 0;
   729|   foreignObject.group {
   730|     transition: opacity 300ms linear;
   731|   }
   732| `;
   733| const TopbarWrapper = styled.div`
   734|   position: absolute;
   735|   top: 0;
   736|   left: 0;
   737|   right: 0;
   738|   display: flex;
   739|   background: ${colorBackgroundDefault()};
   740|   gap: 12px;
   741|   align-items: center;
   742|   border-bottom: 1px solid ${colorKeylineDefault()};
   743| `;
   744| const GraphQueryInputFlexWrap = styled.div`
   745|   flex: 1;
   746|   > ${Box} {
   747|     ${TextInputContainer} {
   748|       width: 100%;
   749|     }
   750|     > * {
   751|       display: block;
   752|       width: 100%;
   753|     }
   754|   }
   755| `;
   756| function filterEdges(
   757|   edges: AssetLayoutEdge[],
   758|   allowGroupsOnlyZoomLevel: boolean,
   759|   scale: number,
   760|   graphData: GraphData,
   761| ) {
   762|   if (allowGroupsOnlyZoomLevel && scale < GROUPS_ONLY_SCALE) {


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/AssetGraphExplorerFilters.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-175 ---
     1| import {Box, Icon} from '@dagster-io/ui-components';
     2| import React from 'react';
     3| import {AssetGroupSelector} from '../graphql/types';
     4| import {TruncatedTextWithFullTextOnHover} from '../nav/getLeftNavItemsForOption';
     5| import {useFilters} from '../ui/Filters';
     6| import {FilterObject} from '../ui/Filters/useFilter';
     7| import {useStaticSetFilter} from '../ui/Filters/useStaticSetFilter';
     8| import {DagsterRepoOption, WorkspaceContext} from '../workspace/WorkspaceContext';
     9| import {buildRepoAddress, buildRepoPathForHuman} from '../workspace/buildRepoAddress';
    10| import {GraphNode} from './Utils';
    11| const emptySet = new Set<any>();
    12| type OptionalFilters =
    13|   | {
    14|       assetGroups?: null;
    15|       setGroupFilters?: null;
    16|       visibleAssetGroups?: null;
    17|       computeKindTags?: null;
    18|       setComputeKindTags?: null;
    19|     }
    20|   | {
    21|       assetGroups: AssetGroupSelector[];
    22|       visibleAssetGroups: AssetGroupSelector[];
    23|       setGroupFilters: (groups: AssetGroupSelector[]) => void;
    24|       computeKindTags: string[];
    25|       setComputeKindTags: (s: string[]) => void;
    26|     };
    27| type Props = {
    28|   nodes: GraphNode[];
    29| } & OptionalFilters;
    30| const emptyArray: any[] = [];
    31| export function useAssetGraphExplorerFilters({
    32|   nodes,
    33|   assetGroups,
    34|   visibleAssetGroups,
    35|   setGroupFilters,
    36|   computeKindTags,
    37|   setComputeKindTags,
    38| }: Props) {
    39|   const {allRepos, visibleRepos, toggleVisible, setVisible} = React.useContext(WorkspaceContext);
    40|   const visibleReposSet = React.useMemo(() => new Set(visibleRepos), [visibleRepos]);
    41|   const reposFilter = useStaticSetFilter<DagsterRepoOption>({
    42|     name: 'Code location',
    43|     icon: 'repo',
    44|     allValues: allRepos.map((repo) => ({
    45|       key: repo.repository.id,
    46|       value: repo,
    47|       match: [buildRepoPathForHuman(repo.repository.name, repo.repositoryLocation.name)],
    48|     })),
    49|     menuWidth: '300px',
    50|     renderLabel: ({value}) => (
    51|       <Box flex={{direction: 'row', gap: 4, alignItems: 'center'}}>
    52|         <Icon name="repo" />
    53|         <TruncatedTextWithFullTextOnHover
    54|           text={buildRepoPathForHuman(value.repository.name, value.repositoryLocation.name)}
    55|         />
    56|       </Box>
    57|     ),
    58|     getStringValue: (value) =>
    59|       buildRepoPathForHuman(value.repository.name, value.repositoryLocation.name),
    60|     initialState: visibleReposSet.size === allRepos.length ? emptySet : visibleReposSet,
    61|     onStateChanged: (values) => {
    62|       let areAllVisible = false;
    63|       if (values.size === 0) {
    64|         areAllVisible = true;
    65|       }
    66|       allRepos.forEach((repo) => {
    67|         const address = buildRepoAddress(repo.repository.name, repo.repositoryLocation.name);
    68|         if (areAllVisible) {
    69|           setVisible([address]);
    70|         } else if (visibleReposSet.has(repo) !== values.has(repo)) {
    71|           toggleVisible([address]);
    72|         }
    73|       });
    74|     },
    75|   });
    76|   const groupsFilter = useStaticSetFilter<AssetGroupSelector>({
    77|     name: 'Asset Groups',
    78|     icon: 'asset_group',
    79|     allValues: (assetGroups || []).map((group) => ({
    80|       key: group.groupName,
    81|       value:
    82|         visibleAssetGroups?.find(
    83|           (visibleGroup) =>
    84|             visibleGroup.groupName === group.groupName &&
    85|             visibleGroup.repositoryName === group.repositoryName &&
    86|             visibleGroup.repositoryLocationName === group.repositoryLocationName,
    87|         ) ?? group,
    88|       match: [group.groupName],
    89|     })),
    90|     menuWidth: '300px',
    91|     renderLabel: ({value}) => (
    92|       <Box flex={{direction: 'row', gap: 4, alignItems: 'center'}}>
    93|         <Icon name="repo" />
    94|         <TruncatedTextWithFullTextOnHover
    95|           tooltipText={
    96|             value.groupName +
    97|             ' - ' +
    98|             buildRepoPathForHuman(value.repositoryName, value.repositoryLocationName)
    99|           }
   100|           text={
   101|             <>
   102|               {value.groupName}
   103|               <span style={{opacity: 0.5, paddingLeft: '4px'}}>
   104|                 {buildRepoPathForHuman(value.repositoryName, value.repositoryLocationName)}
   105|               </span>
   106|             </>
   107|           }
   108|         />
   109|       </Box>
   110|     ),
   111|     getStringValue: (group) => group.groupName,
   112|     getTooltipText: (group) =>
   113|       group.groupName +
   114|       ' - ' +
   115|       buildRepoPathForHuman(group.repositoryName, group.repositoryLocationName),
   116|     initialState: React.useMemo(() => new Set(visibleAssetGroups ?? []), [visibleAssetGroups]),
   117|     onStateChanged: (values) => {
   118|       if (setGroupFilters) {
   119|         setGroupFilters(Array.from(values));
   120|       }
   121|     },
   122|   });
   123|   const allKindTags = React.useMemo(
   124|     () =>
   125|       Array.from(
   126|         new Set(nodes.map((node) => node.definition.computeKind).filter((v) => v) as string[]),
   127|       ),
   128|     [nodes],
   129|   );
   130|   const kindTagsFilter = useStaticSetFilter<string>({
   131|     name: 'Compute kind',
   132|     icon: 'tag',
   133|     allValues: React.useMemo(
   134|       () =>
   135|         allKindTags.map((value) => ({
   136|           value,
   137|           match: [value],
   138|         })),
   139|       [allKindTags],
   140|     ),
   141|     menuWidth: '300px',
   142|     renderLabel: ({value}) => (
   143|       <Box flex={{direction: 'row', gap: 4, alignItems: 'center'}}>
   144|         <Icon name="tag" />
   145|         <TruncatedTextWithFullTextOnHover tooltipText={value} text={value} />
   146|       </Box>
   147|     ),
   148|     getStringValue: (value) => value,
   149|     initialState: computeKindTags ?? emptyArray,
   150|     onStateChanged: (values) => {
   151|       setComputeKindTags?.(Array.from(values));
   152|     },
   153|   });
   154|   const filters: FilterObject[] = [];
   155|   if (allRepos.length > 1) {
   156|     filters.push(reposFilter);
   157|   }
   158|   if (assetGroups) {
   159|     filters.push(groupsFilter);
   160|   }
   161|   filters.push(kindTagsFilter);
   162|   const {button, activeFiltersJsx} = useFilters({filters});
   163|   if (allRepos.length <= 1 && !assetGroups) {
   164|     return {button: null, activeFiltersJsx: null};
   165|   }
   166|   return {
   167|     button,
   168|     filterBar: activeFiltersJsx.length ? (
   169|       <Box padding={{vertical: 8, horizontal: 12}} flex={{gap: 12}}>
   170|         {' '}
   171|         {activeFiltersJsx}
   172|       </Box>
   173|     ) : null,
   174|   };
   175| }


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/AssetGroupNode.tsx
# Total hunks: 4
# ====================================================================
# --- HUNK 1: Lines 1-107 ---
     1| import {
     2|   Box,
     3|   FontFamily,
     4|   Icon,
     5|   Mono,
     6|   colorLineageGroupBackground,
     7|   colorTextLight,
     8| } from '@dagster-io/ui-components';
     9| import React from 'react';
    10| import {Link} from 'react-router-dom';
    11| import styled from 'styled-components';
    12| import {withMiddleTruncation} from '../app/Util';
    13| import {buildRepoPathForHuman} from '../workspace/buildRepoAddress';
    14| import {workspacePath} from '../workspace/workspacePath';
    15| import {MINIMAL_SCALE, GROUPS_ONLY_SCALE} from './AssetGraphExplorer';
    16| import {GroupLayout} from './layout';
    17| interface Props {
    18|   group: GroupLayout;
    19|   scale: number;
    20| }
    21| export const AssetGroupNode = ({group, scale}: Props) => {
    22|   const {repositoryLocationName, repositoryName, groupName} = group;
    23|   return (
    24|     <div style={{position: 'relative', width: '100%', height: '100%'}}>
    25|       {scale > GROUPS_ONLY_SCALE && (
    26|         <Box flex={{alignItems: 'flex-end'}} style={{height: 70}}>
    27|           <Mono
    28|             style={{
    29|               fontWeight: 600,
    30|               userSelect: 'none',
    31|               fontSize: scale > MINIMAL_SCALE ? '16px' : '32px',
    32|               display: 'flex',
    33|               gap: 6,
    34|             }}
    35|           >
    36|             <Icon
    37|               name="asset_group"
    38|               color={colorTextLight()}
    39|               size={scale > MINIMAL_SCALE ? 20 : 48}
    40|             />
    41|             <Box flex={{direction: 'column'}}>
    42|               <Link
    43|                 style={{color: colorTextLight()}}
    44|                 onClick={(e) => e.stopPropagation()}
    45|                 to={workspacePath(
    46|                   repositoryName,
    47|                   repositoryLocationName,
    48|                   `/asset-groups/${groupName}`,
    49|                 )}
    50|               >
    51|                 {groupName}
    52|               </Link>
    53|               <GroupRepoName style={{marginBottom: '0.5em'}}>
    54|                 {withMiddleTruncation(
    55|                   buildRepoPathForHuman(repositoryName, repositoryLocationName),
    56|                   {
    57|                     maxLength: 45,
    58|                   },
    59|                 )}
    60|               </GroupRepoName>
    61|             </Box>
    62|           </Mono>
    63|         </Box>
    64|       )}
    65|       <GroupOutline
    66|         style={{
    67|           inset: 0,
    68|           top: 75,
    69|           position: 'absolute',
    70|           background:
    71|             scale < GROUPS_ONLY_SCALE
    72|               ? colorLineageGroupBackground()
    73|               : colorLineageGroupBackground(),
    74|         }}
    75|       />
    76|       {scale < GROUPS_ONLY_SCALE ? (
    77|         <Box
    78|           flex={{justifyContent: 'center', alignItems: 'center'}}
    79|           style={{inset: 0, position: 'absolute', fontSize: `${12 / scale}px`, userSelect: 'none'}}
    80|         >
    81|           <Box
    82|             flex={{direction: 'column', alignItems: 'center'}}
    83|             style={{fontWeight: 600, fontFamily: FontFamily.monospace}}
    84|           >
    85|             {groupName}
    86|             <GroupRepoName>
    87|               {withMiddleTruncation(buildRepoPathForHuman(repositoryName, repositoryLocationName), {
    88|                 maxLength: 45,
    89|               })}
    90|             </GroupRepoName>
    91|           </Box>
    92|         </Box>
    93|       ) : undefined}
    94|     </div>
    95|   );
    96| };
    97| const GroupOutline = styled.div`
    98|   width: 100%;
    99|   border-radius: 10px;
   100|   pointer-events: none;
   101| `;
   102| const GroupRepoName = styled.div`
   103|   font-size: 0.8em;
   104|   line-height: 0.6em;
   105|   white-space: nowrap;
   106|   color: ${colorTextLight()};
   107| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/AssetNode.tsx
# Total hunks: 7
# ====================================================================
# --- HUNK 1: Lines 1-290 ---
     1| import {gql} from '@apollo/client';
     2| import {
     3|   Box,
     4|   FontFamily,
     5|   Icon,
     6|   Spinner,
     7|   Tooltip,
     8|   colorAccentGray,
     9|   colorAccentGrayHover,
    10|   colorAccentGreen,
    11|   colorAccentRed,
    12|   colorAccentYellow,
    13|   colorBackgroundDefault,
    14|   colorBackgroundGray,
    15|   colorBackgroundLight,
    16|   colorTextDefault,
    17|   colorTextLight,
    18|   colorTextLighter,
    19|   colorLineageNodeBorder,
    20|   colorLineageNodeBorderSelected,
    21|   colorLineageNodeBorderHover,
    22|   colorLineageNodeBackground,
    23| } from '@dagster-io/ui-components';
    24| import countBy from 'lodash/countBy';
    25| import isEqual from 'lodash/isEqual';
    26| import React from 'react';
    27| import {Link} from 'react-router-dom';
    28| import styled, {CSSObject} from 'styled-components';
    29| import {withMiddleTruncation} from '../app/Util';
    30| import {useAssetLiveData} from '../asset-data/AssetLiveDataProvider';
    31| import {PartitionCountTags} from '../assets/AssetNodePartitionCounts';
    32| import {StaleReasonsTags} from '../assets/Stale';
    33| import {assetDetailsPathForKey} from '../assets/assetDetailsPathForKey';
    34| import {AssetComputeKindTag} from '../graph/OpTags';
    35| import {AssetCheckExecutionResolvedStatus, AssetCheckSeverity} from '../graphql/types';
    36| import {ExplorerPath} from '../pipelines/PipelinePathUtils';
    37| import {markdownToPlaintext} from '../ui/markdownToPlaintext';
    38| import {useAssetNodeMenu} from './AssetNodeMenu';
    39| import {buildAssetNodeStatusContent} from './AssetNodeStatusContent';
    40| import {AssetLatestRunSpinner} from './AssetRunLinking';
    41| import {ContextMenuWrapper} from './ContextMenuWrapper';
    42| import {GraphData, GraphNode, LiveDataForNode} from './Utils';
    43| import {ASSET_NODE_NAME_MAX_LENGTH} from './layout';
    44| import {AssetNodeFragment} from './types/AssetNode.types';
    45| interface Props {
    46|   definition: AssetNodeFragment;
    47|   selected: boolean;
    48| }
    49| export const AssetNode = React.memo(({definition, selected}: Props) => {
    50|   const displayName = definition.assetKey.path[definition.assetKey.path.length - 1]!;
    51|   const isSource = definition.isSource;
    52|   const {liveData} = useAssetLiveData(definition.assetKey);
    53|   return (
    54|     <AssetInsetForHoverEffect>
    55|       <AssetTopTags definition={definition} liveData={liveData} />
    56|       <AssetNodeContainer $selected={selected}>
    57|         <AssetNodeBox $selected={selected} $isSource={isSource}>
    58|           <AssetName $isSource={isSource}>
    59|             <span style={{marginTop: 1}}>
    60|               <Icon name={isSource ? 'source_asset' : 'asset'} />
    61|             </span>
    62|             <div
    63|               data-tooltip={displayName}
    64|               data-tooltip-style={isSource ? NameTooltipStyleSource : NameTooltipStyle}
    65|               style={{overflow: 'hidden', textOverflow: 'ellipsis'}}
    66|             >
    67|               {withMiddleTruncation(displayName, {
    68|                 maxLength: ASSET_NODE_NAME_MAX_LENGTH,
    69|               })}
    70|             </div>
    71|             <div style={{flex: 1}} />
    72|           </AssetName>
    73|           <Box style={{padding: '6px 8px'}} flex={{direction: 'column', gap: 4}} border="top">
    74|             {definition.description ? (
    75|               <AssetDescription $color={colorTextDefault()}>
    76|                 {markdownToPlaintext(definition.description).split('\n')[0]}
    77|               </AssetDescription>
    78|             ) : (
    79|               <AssetDescription $color={colorTextLight()}>No description</AssetDescription>
    80|             )}
    81|             {definition.isPartitioned && !definition.isSource && (
    82|               <PartitionCountTags definition={definition} liveData={liveData} />
    83|             )}
    84|             <StaleReasonsTags liveData={liveData} assetKey={definition.assetKey} include="self" />
    85|           </Box>
    86|           {isSource && !definition.isObservable ? null : (
    87|             <AssetNodeStatusRow definition={definition} liveData={liveData} />
    88|           )}
    89|           {(liveData?.assetChecks || []).length > 0 && (
    90|             <AssetNodeChecksRow definition={definition} liveData={liveData} />
    91|           )}
    92|         </AssetNodeBox>
    93|         <AssetComputeKindTag definition={definition} style={{right: -2, paddingTop: 7}} />
    94|       </AssetNodeContainer>
    95|     </AssetInsetForHoverEffect>
    96|   );
    97| }, isEqual);
    98| interface AssetTopTagsProps {
    99|   definition: AssetNodeFragment;
   100|   liveData?: LiveDataForNode;
   101| }
   102| const AssetTopTags = ({definition, liveData}: AssetTopTagsProps) => (
   103|   <Box flex={{gap: 4}} padding={{left: 4}} style={{height: 24}}>
   104|     <StaleReasonsTags liveData={liveData} assetKey={definition.assetKey} include="upstream" />
   105|   </Box>
   106| );
   107| const AssetNodeRowBox = styled(Box)`
   108|   white-space: nowrap;
   109|   line-height: 12px;
   110|   font-size: 12px;
   111|   height: 24px;
   112|   a:hover {
   113|     text-decoration: none;
   114|   }
   115|   &:last-child {
   116|     border-bottom-left-radius: 8px;
   117|     border-bottom-right-radius: 8px;
   118|   }
   119| `;
   120| interface StatusRowProps {
   121|   definition: AssetNodeFragment;
   122|   liveData: LiveDataForNode | undefined;
   123| }
   124| const AssetNodeStatusRow = ({definition, liveData}: StatusRowProps) => {
   125|   const {content, background} = buildAssetNodeStatusContent({
   126|     assetKey: definition.assetKey,
   127|     definition,
   128|     liveData,
   129|   });
   130|   return (
   131|     <AssetNodeRowBox
   132|       background={background}
   133|       padding={{horizontal: 8}}
   134|       flex={{justifyContent: 'space-between', alignItems: 'center', gap: 6}}
   135|     >
   136|       {content}
   137|     </AssetNodeRowBox>
   138|   );
   139| };
   140| type AssetCheckIconType =
   141|   | Exclude<
   142|       AssetCheckExecutionResolvedStatus,
   143|       AssetCheckExecutionResolvedStatus.FAILED | AssetCheckExecutionResolvedStatus.EXECUTION_FAILED
   144|     >
   145|   | 'NOT_EVALUATED'
   146|   | 'WARN'
   147|   | 'ERROR';
   148| const AssetCheckIconsOrdered: {type: AssetCheckIconType; content: React.ReactNode}[] = [
   149|   {
   150|     type: AssetCheckExecutionResolvedStatus.IN_PROGRESS,
   151|     content: <Spinner purpose="caption-text" />,
   152|   },
   153|   {
   154|     type: 'NOT_EVALUATED',
   155|     content: <Icon name="dot" color={colorAccentGray()} />,
   156|   },
   157|   {
   158|     type: 'ERROR',
   159|     content: <Icon name="cancel" color={colorAccentRed()} />,
   160|   },
   161|   {
   162|     type: 'WARN',
   163|     content: <Icon name="warning_outline" color={colorAccentYellow()} />,
   164|   },
   165|   {
   166|     type: AssetCheckExecutionResolvedStatus.SKIPPED,
   167|     content: <Icon name="dot" color={colorAccentGray()} />,
   168|   },
   169|   {
   170|     type: AssetCheckExecutionResolvedStatus.SUCCEEDED,
   171|     content: <Icon name="check_circle" color={colorAccentGreen()} />,
   172|   },
   173| ];
   174| export const AssetNodeContextMenuWrapper = React.memo(
   175|   ({
   176|     children,
   177|     graphData,
   178|     explorerPath,
   179|     onChangeExplorerPath,
   180|     selectNode,
   181|     node,
   182|   }: {
   183|     children: React.ReactNode;
   184|     graphData: GraphData;
   185|     node: GraphNode;
   186|     selectNode?: (e: React.MouseEvent<any> | React.KeyboardEvent<any>, nodeId: string) => void;
   187|     explorerPath?: ExplorerPath;
   188|     onChangeExplorerPath?: (path: ExplorerPath, mode: 'replace' | 'push') => void;
   189|   }) => {
   190|     const {dialog, menu} = useAssetNodeMenu({
   191|       graphData,
   192|       explorerPath,
   193|       onChangeExplorerPath,
   194|       selectNode,
   195|       node,
   196|     });
   197|     return (
   198|       <>
   199|         <ContextMenuWrapper menu={menu} stopPropagation>
   200|           {children}
   201|         </ContextMenuWrapper>
   202|         {dialog}
   203|       </>
   204|     );
   205|   },
   206| );
   207| const AssetNodeChecksRow = ({
   208|   definition,
   209|   liveData,
   210| }: {
   211|   definition: AssetNodeFragment;
   212|   liveData: LiveDataForNode | undefined;
   213| }) => {
   214|   if (!liveData || !liveData.assetChecks.length) {
   215|     return <span />;
   216|   }
   217|   const byIconType = countBy(liveData.assetChecks, (c) => {
   218|     const status = c.executionForLatestMaterialization?.status;
   219|     const value: AssetCheckIconType =
   220|       status === undefined
   221|         ? 'NOT_EVALUATED'
   222|         : status === AssetCheckExecutionResolvedStatus.FAILED
   223|         ? c.executionForLatestMaterialization?.evaluation?.severity === AssetCheckSeverity.WARN
   224|           ? 'WARN'
   225|           : 'ERROR'
   226|         : status === AssetCheckExecutionResolvedStatus.EXECUTION_FAILED
   227|         ? 'ERROR'
   228|         : status;
   229|     return value;
   230|   });
   231|   return (
   232|     <AssetNodeRowBox
   233|       padding={{horizontal: 8}}
   234|       flex={{justifyContent: 'space-between', alignItems: 'center', gap: 6}}
   235|       border="top"
   236|       background={colorBackgroundLight()}
   237|     >
   238|       Checks
   239|       <Link
   240|         to={assetDetailsPathForKey(definition.assetKey, {view: 'checks'})}
   241|         onClick={(e) => e.stopPropagation()}
   242|       >
   243|         <Box flex={{gap: 6, alignItems: 'center'}}>
   244|           {AssetCheckIconsOrdered.filter((a) => byIconType[a.type]).map((icon) => (
   245|             <Box flex={{gap: 2, alignItems: 'center'}} key={icon.type}>
   246|               {icon.content}
   247|               {byIconType[icon.type]}
   248|             </Box>
   249|           ))}
   250|         </Box>
   251|       </Link>
   252|     </AssetNodeRowBox>
   253|   );
   254| };
   255| export const AssetNodeMinimal = ({
   256|   selected,
   257|   definition,
   258|   height,
   259| }: {
   260|   selected: boolean;
   261|   definition: AssetNodeFragment;
   262|   height: number;
   263| }) => {
   264|   const {isSource, assetKey} = definition;
   265|   const {liveData} = useAssetLiveData(assetKey);
   266|   const {border, background} = buildAssetNodeStatusContent({assetKey, definition, liveData});
   267|   const displayName = assetKey.path[assetKey.path.length - 1]!;
   268|   return (
   269|     <AssetInsetForHoverEffect>
   270|       <MinimalAssetNodeContainer $selected={selected} style={{paddingTop: (height - 64) / 2}}>
   271|         <TooltipStyled
   272|           content={displayName}
   273|           canShow={displayName.length > 14}
   274|           targetTagName="div"
   275|           position="top"
   276|         >
   277|           <MinimalAssetNodeBox
   278|             $selected={selected}
   279|             $isSource={isSource}
   280|             $background={background}
   281|             $border={border}
   282|           >
   283|             <AssetNodeSpinnerContainer>
   284|               <AssetLatestRunSpinner liveData={liveData} purpose="section" />
   285|             </AssetNodeSpinnerContainer>
   286|             <MinimalName style={{fontSize: 30}} $isSource={isSource}>
   287|               {withMiddleTruncation(displayName, {maxLength: 14})}
   288|             </MinimalName>
   289|           </MinimalAssetNodeBox>
   290|         </TooltipStyled>

# --- HUNK 2: Lines 306-430 ---
   306|     isObservable
   307|     isSource
   308|     assetKey {
   309|       ...AssetNodeKey
   310|     }
   311|   }
   312|   fragment AssetNodeKey on AssetKey {
   313|     path
   314|   }
   315| `;
   316| const AssetInsetForHoverEffect = styled.div`
   317|   padding: 10px 4px 2px 4px;
   318|   height: 100%;
   319|   & *:focus {
   320|     outline: 0;
   321|   }
   322| `;
   323| const AssetNodeContainer = styled.div<{$selected: boolean}>`
   324|   user-select: none;
   325|   cursor: pointer;
   326|   padding: 6px;
   327|   overflow: clip;
   328| `;
   329| const AssetNodeShowOnHover = styled.span`
   330|   display: none;
   331| `;
   332| const AssetNodeBox = styled.div<{$isSource: boolean; $selected: boolean}>`
   333|   ${(p) =>
   334|     p.$isSource
   335|       ? `border: 2px dashed ${p.$selected ? colorAccentGrayHover() : colorAccentGray()}`
   336|       : `border: 2px solid ${
   337|           p.$selected ? colorLineageNodeBorderSelected() : colorLineageNodeBorder()
   338|         }`};
   339|   ${(p) => p.$selected && `outline: 2px solid ${colorLineageNodeBorderSelected()}`};
   340|   background: ${colorBackgroundDefault()};
   341|   border-radius: 10px;
   342|   position: relative;
   343|   transition: all 150ms linear;
   344|   &:hover {
   345|     ${(p) => !p.$selected && `border: 2px solid ${colorLineageNodeBorderHover()};`};
   346|     box-shadow: rgba(0, 0, 0, 0.12) 0px 2px 12px 0px;
   347|     scale: 1.03;
   348|     ${AssetNodeShowOnHover} {
   349|       display: initial;
   350|     }
   351|   }
   352| `;
   353| /** Keep in sync with DISPLAY_NAME_PX_PER_CHAR */
   354| const NameCSS: CSSObject = {
   355|   padding: '3px 6px',
   356|   color: colorTextDefault(),
   357|   fontFamily: FontFamily.monospace,
   358|   fontWeight: 600,
   359| };
   360| export const NameTooltipCSS: CSSObject = {
   361|   ...NameCSS,
   362|   top: -9,
   363|   left: -12,
   364|   fontSize: 16.8,
   365| };
   366| export const NameTooltipStyle = JSON.stringify({
   367|   ...NameTooltipCSS,
   368|   background: colorLineageNodeBackground(),
   369|   border: `none`,
   370| });
   371| const NameTooltipStyleSource = JSON.stringify({
   372|   ...NameTooltipCSS,
   373|   background: colorBackgroundGray(),
   374|   border: `none`,
   375| });
   376| const AssetName = styled.div<{$isSource: boolean}>`
   377|   ${NameCSS};
   378|   display: flex;
   379|   gap: 4px;
   380|   background: ${(p) => (p.$isSource ? colorBackgroundLight() : colorLineageNodeBackground())};
   381|   border-top-left-radius: 8px;
   382|   border-top-right-radius: 8px;
   383| `;
   384| const AssetNodeSpinnerContainer = styled.div`
   385|   top: 50%;
   386|   position: absolute;
   387|   transform: translate(8px, -16px);
   388| `;
   389| const MinimalAssetNodeContainer = styled(AssetNodeContainer)`
   390|   height: 100%;
   391| `;
   392| const MinimalAssetNodeBox = styled.div<{
   393|   $isSource: boolean;
   394|   $selected: boolean;
   395|   $background: string;
   396|   $border: string;
   397| }>`
   398|   background: ${(p) => p.$background};
   399|   ${(p) =>
   400|     p.$isSource
   401|       ? `border: 4px dashed ${p.$selected ? colorAccentGray() : p.$border}`
   402|       : `border: 4px solid ${p.$selected ? colorLineageNodeBorderSelected() : p.$border}`};
   403|   border-radius: 16px;
   404|   position: relative;
   405|   padding: 4px;
   406|   height: 100%;
   407|   min-height: 86px;
   408|   &:hover {
   409|     box-shadow: rgba(0, 0, 0, 0.12) 0px 2px 12px 0px;
   410|   }
   411| `;
   412| const MinimalName = styled(AssetName)`
   413|   font-weight: 600;
   414|   white-space: nowrap;
   415|   position: absolute;
   416|   background: none;
   417|   top: 50%;
   418|   left: 50%;
   419|   transform: translate(-50%, -50%);
   420| `;
   421| export const AssetDescription = styled.div<{$color: string}>`
   422|   white-space: nowrap;
   423|   overflow: hidden;
   424|   text-overflow: ellipsis;
   425|   color: ${colorTextLighter()};
   426|   font-size: 12px;
   427| `;
   428| const TooltipStyled = styled(Tooltip)`
   429|   height: 100%;
   430| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/AssetNodeStatusContent.tsx
# Total hunks: 7
# ====================================================================
# --- HUNK 1: Lines 1-82 ---
     1| import {
     2|   Body,
     3|   Icon,
     4|   Spinner,
     5|   colorAccentBlue,
     6|   colorAccentGray,
     7|   colorAccentGreen,
     8|   colorAccentRed,
     9|   colorAccentYellow,
    10|   colorBackgroundBlue,
    11|   colorBackgroundGreen,
    12|   colorBackgroundLight,
    13|   colorBackgroundRed,
    14|   colorBackgroundYellow,
    15|   colorBorderDefault,
    16|   colorKeylineDefault,
    17|   colorTextGreen,
    18|   colorTextLight,
    19|   colorTextRed,
    20|   colorTextYellow,
    21| } from '@dagster-io/ui-components';
    22| import React from 'react';
    23| import {Link} from 'react-router-dom';
    24| import {
    25|   StyleForAssetPartitionStatus,
    26|   partitionCountString,
    27| } from '../assets/AssetNodePartitionCounts';
    28| import {AssetPartitionStatusDot} from '../assets/AssetPartitionList';
    29| import {AssetPartitionStatus} from '../assets/AssetPartitionStatus';
    30| import {OverdueLineagePopover, isAssetOverdue} from '../assets/OverdueTag';
    31| import {assetDetailsPathForKey} from '../assets/assetDetailsPathForKey';
    32| import {
    33|   AssetCheckExecutionResolvedStatus,
    34|   AssetCheckSeverity,
    35|   AssetKeyInput,
    36| } from '../graphql/types';
    37| import {TimestampDisplay} from '../schedules/TimestampDisplay';
    38| import {AssetLatestRunSpinner, AssetRunLink} from './AssetRunLinking';
    39| import {LiveDataForNode, stepKeyForAsset} from './Utils';
    40| export enum StatusCase {
    41|   LOADING = 'LOADING',
    42|   SOURCE_OBSERVING = 'SOURCE_OBSERVING',
    43|   SOURCE_OBSERVED = 'SOURCE_OBSERVED',
    44|   SOURCE_NEVER_OBSERVED = 'SOURCE_NEVER_OBSERVED',
    45|   SOURCE_NO_STATE = 'SOURCE_NO_STATE',
    46|   MATERIALIZING = 'MATERIALIZING',
    47|   LATE_OR_FAILED = 'LATE_OR_FAILED',
    48|   NEVER_MATERIALIZED = 'NEVER_MATERIALIZED',
    49|   MATERIALIZED = 'MATERIALIZED',
    50|   PARTITIONS_FAILED = 'PARTITIONS_FAILED',
    51|   PARTITIONS_MISSING = 'PARTITIONS_MISSING',
    52|   PARTITIONS_MATERIALIZED = 'PARTITIONS_MATERIALIZED',
    53| }
    54| export type AssetNodeStatusContent = ReturnType<typeof buildAssetNodeStatusContent>;
    55| const LOADING_STATUS_CONTENT = {
    56|   case: StatusCase.LOADING as const,
    57|   background: colorBackgroundLight(),
    58|   border: colorBorderDefault(),
    59|   content: (
    60|     <>
    61|       <Spinner purpose="caption-text" />
    62|       <span style={{flex: 1, color: colorTextLight()}}>Loading...</span>
    63|     </>
    64|   ),
    65| };
    66| type StatusContentArgs = {
    67|   assetKey: AssetKeyInput;
    68|   definition: {opNames: string[]; isSource: boolean; isObservable: boolean};
    69|   liveData: LiveDataForNode | null | undefined;
    70|   expanded?: boolean;
    71| };
    72| export function buildAssetNodeStatusContent({
    73|   assetKey,
    74|   definition,
    75|   liveData,
    76|   expanded,
    77| }: StatusContentArgs) {
    78|   return definition.isSource
    79|     ? _buildSourceAssetNodeStatusContent({
    80|         assetKey,
    81|         definition,
    82|         liveData,

# --- HUNK 2: Lines 86-229 ---
    86|         assetKey,
    87|         definition,
    88|         liveData,
    89|         expanded,
    90|       });
    91| }
    92| export function _buildSourceAssetNodeStatusContent({
    93|   assetKey,
    94|   definition,
    95|   liveData,
    96|   expanded,
    97| }: StatusContentArgs) {
    98|   if (!liveData) {
    99|     return LOADING_STATUS_CONTENT;
   100|   }
   101|   const {inProgressRunIds, unstartedRunIds} = liveData;
   102|   const materializingRunId = inProgressRunIds[0] || unstartedRunIds[0];
   103|   if (materializingRunId) {
   104|     return {
   105|       case: StatusCase.SOURCE_OBSERVING as const,
   106|       background: colorBackgroundLight(),
   107|       border: colorBorderDefault(),
   108|       content: (
   109|         <>
   110|           <AssetLatestRunSpinner liveData={liveData} purpose="caption-text" />
   111|           <span style={{flex: 1}} color={colorTextLight()}>
   112|             Observing...
   113|           </span>
   114|           {expanded && <SpacerDot />}
   115|           <AssetRunLink assetKey={assetKey} runId={materializingRunId} />
   116|         </>
   117|       ),
   118|     };
   119|   }
   120|   if (liveData?.lastObservation) {
   121|     return {
   122|       case: StatusCase.SOURCE_OBSERVED as const,
   123|       background: colorBackgroundLight(),
   124|       border: colorBorderDefault(),
   125|       content: (
   126|         <>
   127|           {expanded && <AssetPartitionStatusDot status={[AssetPartitionStatus.MISSING]} />}
   128|           <span>Observed</span>
   129|           {expanded && <SpacerDot />}
   130|           <span style={{textAlign: 'right', overflow: 'hidden'}}>
   131|             <AssetRunLink
   132|               assetKey={assetKey}
   133|               runId={liveData.lastObservation.runId}
   134|               event={{
   135|                 stepKey: stepKeyForAsset(definition),
   136|                 timestamp: liveData.lastObservation.timestamp,
   137|               }}
   138|             >
   139|               <TimestampDisplay
   140|                 timestamp={Number(liveData.lastObservation.timestamp) / 1000}
   141|                 timeFormat={{showSeconds: false, showTimezone: false}}
   142|               />
   143|             </AssetRunLink>
   144|           </span>
   145|         </>
   146|       ),
   147|     };
   148|   }
   149|   if (definition.isObservable) {
   150|     return {
   151|       case: StatusCase.SOURCE_NEVER_OBSERVED as const,
   152|       background: colorBackgroundLight(),
   153|       border: colorBorderDefault(),
   154|       content: (
   155|         <>
   156|           {expanded && (
   157|             <Icon
   158|               name="partition_missing"
   159|               color={colorAccentGray()}
   160|               style={{marginRight: -2}}
   161|               size={12}
   162|             />
   163|           )}
   164|           <span>Never observed</span>
   165|           {!expanded && <span></span>}
   166|         </>
   167|       ),
   168|     };
   169|   }
   170|   return {
   171|     case: StatusCase.SOURCE_NO_STATE as const,
   172|     background: colorBackgroundLight(),
   173|     border: colorBorderDefault(),
   174|     content: <span></span>,
   175|   };
   176| }
   177| export function _buildAssetNodeStatusContent({
   178|   assetKey,
   179|   definition,
   180|   liveData,
   181|   expanded,
   182| }: StatusContentArgs) {
   183|   if (!liveData) {
   184|     return LOADING_STATUS_CONTENT;
   185|   }
   186|   const {lastMaterialization, runWhichFailedToMaterialize, inProgressRunIds, unstartedRunIds} =
   187|     liveData;
   188|   const materializingRunId = inProgressRunIds[0] || unstartedRunIds[0];
   189|   const overdue = isAssetOverdue(liveData);
   190|   const checksFailed = liveData.assetChecks.some(
   191|     (c) =>
   192|       (c.executionForLatestMaterialization?.status === AssetCheckExecutionResolvedStatus.FAILED &&
   193|         c.executionForLatestMaterialization?.evaluation?.severity === AssetCheckSeverity.ERROR) ||
   194|       c.executionForLatestMaterialization?.status ===
   195|         AssetCheckExecutionResolvedStatus.EXECUTION_FAILED,
   196|   );
   197|   if (materializingRunId) {
   198|     const numMaterializing = liveData.partitionStats?.numMaterializing;
   199|     return {
   200|       case: StatusCase.MATERIALIZING as const,
   201|       background: colorBackgroundBlue(),
   202|       border: colorAccentBlue(),
   203|       numMaterializing,
   204|       content: (
   205|         <>
   206|           <div style={{marginLeft: -1, marginRight: -1}}>
   207|             <AssetLatestRunSpinner liveData={liveData} purpose="caption-text" />
   208|           </div>
   209|           <span style={{flex: 1}} color={colorTextLight()}>
   210|             {numMaterializing === 1
   211|               ? `Materializing 1 partition...`
   212|               : numMaterializing
   213|               ? `Materializing ${numMaterializing} partitions...`
   214|               : `Materializing...`}
   215|           </span>
   216|           {expanded && <SpacerDot />}
   217|           {!numMaterializing || numMaterializing === 1 ? (
   218|             <AssetRunLink assetKey={assetKey} runId={materializingRunId} />
   219|           ) : undefined}
   220|         </>
   221|       ),
   222|     };
   223|   }
   224|   if (liveData.partitionStats) {
   225|     const {numPartitions, numMaterialized, numFailed} = liveData.partitionStats;
   226|     const numMissing = numPartitions - numFailed - numMaterialized;
   227|     const {background, foreground, border} =
   228|       StyleForAssetPartitionStatus[
   229|         overdue || numFailed || checksFailed

# --- HUNK 3: Lines 264-366 ---
   264|       ),
   265|     };
   266|   }
   267|   const lastMaterializationLink = lastMaterialization ? (
   268|     <span style={{overflow: 'hidden'}}>
   269|       <AssetRunLink
   270|         assetKey={assetKey}
   271|         runId={lastMaterialization.runId}
   272|         event={{stepKey: stepKeyForAsset(definition), timestamp: lastMaterialization.timestamp}}
   273|       >
   274|         <TimestampDisplay
   275|           timestamp={Number(lastMaterialization.timestamp) / 1000}
   276|           timeFormat={{showSeconds: false, showTimezone: false}}
   277|         />
   278|       </AssetRunLink>
   279|     </span>
   280|   ) : undefined;
   281|   if (runWhichFailedToMaterialize || overdue || checksFailed) {
   282|     return {
   283|       case: StatusCase.LATE_OR_FAILED as const,
   284|       background: colorBackgroundRed(),
   285|       border: colorAccentRed(),
   286|       content: (
   287|         <>
   288|           {expanded && (
   289|             <Icon
   290|               name="partition_failure"
   291|               color={colorAccentRed()}
   292|               style={{marginRight: -2}}
   293|               size={12}
   294|             />
   295|           )}
   296|           {overdue && runWhichFailedToMaterialize ? (
   297|             <OverdueLineagePopover assetKey={assetKey} liveData={liveData}>
   298|               <span style={{color: colorTextRed()}}>Failed, Overdue</span>
   299|             </OverdueLineagePopover>
   300|           ) : overdue ? (
   301|             <OverdueLineagePopover assetKey={assetKey} liveData={liveData}>
   302|               <span style={{color: colorTextRed()}}>Overdue</span>
   303|             </OverdueLineagePopover>
   304|           ) : runWhichFailedToMaterialize ? (
   305|             <span style={{color: colorTextRed()}}>Failed</span>
   306|           ) : lastMaterialization ? (
   307|             <span style={{color: colorTextRed()}}>Materialized</span>
   308|           ) : (
   309|             <span style={{color: colorTextRed()}}>Never materialized</span>
   310|           )}
   311|           {expanded && <SpacerDot />}
   312|           {runWhichFailedToMaterialize ? (
   313|             <span style={{overflow: 'hidden'}}>
   314|               <AssetRunLink assetKey={assetKey} runId={runWhichFailedToMaterialize.id}>
   315|                 <TimestampDisplay
   316|                   timestamp={Number(runWhichFailedToMaterialize.endTime)}
   317|                   timeFormat={{showSeconds: false, showTimezone: false}}
   318|                 />
   319|               </AssetRunLink>
   320|             </span>
   321|           ) : (
   322|             lastMaterializationLink
   323|           )}
   324|         </>
   325|       ),
   326|     };
   327|   }
   328|   if (!lastMaterialization) {
   329|     return {
   330|       case: StatusCase.NEVER_MATERIALIZED as const,
   331|       background: colorBackgroundYellow(),
   332|       border: colorAccentYellow(),
   333|       content: (
   334|         <>
   335|           {expanded && (
   336|             <Icon
   337|               name="partition_missing"
   338|               color={colorAccentYellow()}
   339|               style={{marginRight: -2}}
   340|               size={12}
   341|             />
   342|           )}
   343|           <span style={{color: colorTextYellow()}}>Never materialized</span>
   344|         </>
   345|       ),
   346|     };
   347|   }
   348|   return {
   349|     case: StatusCase.MATERIALIZED as const,
   350|     background: colorBackgroundGreen(),
   351|     border: colorAccentGreen(),
   352|     content: (
   353|       <>
   354|         {expanded && <AssetPartitionStatusDot status={[AssetPartitionStatus.MATERIALIZED]} />}
   355|         <span style={{color: colorTextGreen()}}>Materialized</span>
   356|         {expanded && <SpacerDot />}
   357|         {lastMaterializationLink}
   358|       </>
   359|     ),
   360|   };
   361| }
   362| const SpacerDot = () => (
   363|   <Body color={colorKeylineDefault()} style={{marginLeft: -3, marginRight: -3}}>
   364|     
   365|   </Body>
   366| );


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/CollapsedGroupNode.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-195 ---
     1| import {
     2|   Box,
     3|   FontFamily,
     4|   Icon,
     5|   Menu,
     6|   MenuItem,
     7|   colorBackgroundLight,
     8|   colorBackgroundLightHover,
     9|   colorLineageGroupNodeBorder,
    10|   colorTextLight,
    11|   colorTextLighter,
    12| } from '@dagster-io/ui-components';
    13| import React from 'react';
    14| import styled from 'styled-components';
    15| import {withMiddleTruncation} from '../app/Util';
    16| import {CalculateChangedAndMissingDialog} from '../assets/CalculateChangedAndMissingDialog';
    17| import {useMaterializationAction} from '../assets/LaunchAssetExecutionButton';
    18| import {AssetKey} from '../assets/types';
    19| import {repoAddressAsHumanString} from '../workspace/repoAddressAsString';
    20| import {AssetDescription, NameTooltipCSS} from './AssetNode';
    21| import {ContextMenuWrapper} from './ContextMenuWrapper';
    22| import {GraphNode} from './Utils';
    23| import {GroupLayout} from './layout';
    24| export const GroupNodeNameAndRepo = ({group, minimal}: {minimal: boolean; group: GroupLayout}) => {
    25|   const name = `${group.groupName} `;
    26|   const location = repoAddressAsHumanString({
    27|     name: group.repositoryName,
    28|     location: group.repositoryLocationName,
    29|   });
    30|   if (minimal) {
    31|     return (
    32|       <Box style={{flex: 1, fontFamily: FontFamily.monospace}}>
    33|         <div
    34|           data-tooltip={name}
    35|           data-tooltip-style={GroupNameTooltipStyle}
    36|           style={{fontSize: 30, fontWeight: 600, lineHeight: '30px'}}
    37|         >
    38|           {withMiddleTruncation(name, {maxLength: 14})}
    39|         </div>
    40|       </Box>
    41|     );
    42|   }
    43|   return (
    44|     <Box style={{flex: 1, fontFamily: FontFamily.monospace}}>
    45|       <Box flex={{direction: 'row', gap: 4}}>
    46|         <div
    47|           data-tooltip={name}
    48|           data-tooltip-style={GroupNameTooltipStyle}
    49|           style={{fontSize: 20, fontWeight: 600, lineHeight: '1.1em'}}
    50|         >
    51|           {withMiddleTruncation(name, {maxLength: 22})}
    52|         </div>
    53|       </Box>
    54|       <Box style={{lineHeight: '1em', color: colorTextLight()}}>
    55|         {withMiddleTruncation(location, {maxLength: 31})}
    56|       </Box>
    57|     </Box>
    58|   );
    59| };
    60| export const CollapsedGroupNode = ({
    61|   group,
    62|   minimal,
    63|   onExpand,
    64|   preferredJobName,
    65|   onFilterToGroup,
    66| }: {
    67|   minimal: boolean;
    68|   onExpand: () => void;
    69|   group: GroupLayout & {assetCount: number; assets: GraphNode[]};
    70|   preferredJobName: string;
    71|   onFilterToGroup: () => void;
    72| }) => {
    73|   const {menu, dialog} = useGroupNodeContextMenu({
    74|     onFilterToGroup,
    75|     assets: group.assets,
    76|     preferredJobName,
    77|   });
    78|   return (
    79|     <ContextMenuWrapper menu={menu} stopPropagation>
    80|       <CollapsedGroupNodeContainer
    81|         onClick={(e) => {
    82|           onExpand();
    83|           e.stopPropagation();
    84|         }}
    85|       >
    86|         <CollapsedGroupNodeBox $minimal={minimal}>
    87|           <Box padding={{vertical: 8, left: 12, right: 8}} flex={{}}>
    88|             <GroupNodeNameAndRepo group={group} minimal={minimal} />
    89|             <Box padding={{vertical: 4}}>
    90|               <Icon name="unfold_more" />
    91|             </Box>
    92|           </Box>
    93|           {!minimal && (
    94|             <Box padding={{horizontal: 12, bottom: 4}}>
    95|               <AssetDescription $color={colorTextLighter()}>
    96|                 {group.assetCount} {group.assetCount === 1 ? 'asset' : 'assets'}
    97|               </AssetDescription>
    98|             </Box>
    99|           )}
   100|         </CollapsedGroupNodeBox>
   101|         <GroupStackLine style={{width: '94%', marginLeft: '3%'}} />
   102|         <GroupStackLine style={{width: '88%', marginLeft: '6%'}} />
   103|       </CollapsedGroupNodeContainer>
   104|       {dialog}
   105|     </ContextMenuWrapper>
   106|   );
   107| };
   108| export const useGroupNodeContextMenu = ({
   109|   onFilterToGroup,
   110|   assets,
   111|   preferredJobName,
   112| }: {
   113|   onFilterToGroup?: () => void;
   114|   assets: GraphNode[];
   115|   preferredJobName?: string;
   116| }) => {
   117|   const {onClick, launchpadElement} = useMaterializationAction(preferredJobName);
   118|   const [showCalculatingChangedAndMissingDialog, setShowCalculatingChangedAndMissingDialog] =
   119|     React.useState<boolean>(false);
   120|   const menu = (
   121|     <Menu>
   122|       <MenuItem
   123|         icon="materialization"
   124|         text={`Materialize assets (${assets.length})`}
   125|         onClick={(e) => {
   126|           onClick(
   127|             assets.map((asset) => asset.assetKey),
   128|             e,
   129|           );
   130|         }}
   131|       />
   132|       <MenuItem
   133|         icon="changes_present"
   134|         text="Materialize changed and missing"
   135|         onClick={() => setShowCalculatingChangedAndMissingDialog(true)}
   136|       />
   137|       {onFilterToGroup ? (
   138|         <MenuItem text="Filter to this group" onClick={onFilterToGroup} icon="filter_alt" />
   139|       ) : null}
   140|     </Menu>
   141|   );
   142|   const dialog = (
   143|     <div>
   144|       <CalculateChangedAndMissingDialog
   145|         isOpen={!!showCalculatingChangedAndMissingDialog}
   146|         onClose={() => {
   147|           setShowCalculatingChangedAndMissingDialog(false);
   148|         }}
   149|         assets={assets}
   150|         onMaterializeAssets={(assets: AssetKey[], e: React.MouseEvent<any>) => {
   151|           onClick(assets, e);
   152|         }}
   153|       />
   154|       {launchpadElement}
   155|     </div>
   156|   );
   157|   return {menu, dialog};
   158| };
   159| export const GroupNameTooltipStyle = JSON.stringify({
   160|   ...NameTooltipCSS,
   161|   background: colorBackgroundLight(),
   162|   border: `none`,
   163|   borderRadius: '4px',
   164| });
   165| const GroupStackLine = styled.div`
   166|   background: transparent;
   167|   border-top: 2px solid ${colorLineageGroupNodeBorder()};
   168|   border-radius: 2px;
   169| `;
   170| const CollapsedGroupNodeBox = styled.div<{$minimal: boolean}>`
   171|   border: ${(p) => (p.$minimal ? '4px' : '2px')} solid ${colorLineageGroupNodeBorder()};
   172|   background: ${colorBackgroundLight()};
   173|   border-radius: 8px;
   174|   position: relative;
   175|   margin-top: 8px;
   176| `;
   177| const CollapsedGroupNodeContainer = styled.div`
   178|   user-select: none;
   179|   padding: 4px;
   180|   transition:
   181|     transform linear 200ms,
   182|     gap linear 200ms;
   183|   cursor: pointer;
   184|   display: flex;
   185|   flex-direction: column;
   186|   gap: 2px;
   187|   &:hover {
   188|     transform: scale(1.03);
   189|     gap: 3px;
   190|     ${CollapsedGroupNodeBox} {
   191|       transition: background linear 200ms;
   192|       background: ${colorBackgroundLightHover()};
   193|     }
   194|   }
   195| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/ContextMenuWrapper.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-93 ---
     1| import {colorPopoverBackground} from '@dagster-io/ui-components';
     2| import React from 'react';
     3| import ReactDOM from 'react-dom';
     4| const CONTEXT_MENU_EVENT = 'context-menu-event';
     5| export const ContextMenuWrapper = ({
     6|   children,
     7|   menu,
     8|   stopPropagation,
     9|   wrapperOuterStyles,
    10|   wrapperInnerStyles,
    11| }: {
    12|   children: React.ReactNode;
    13|   menu: React.ReactNode;
    14|   stopPropagation?: boolean;
    15|   wrapperOuterStyles?: React.CSSProperties;
    16|   wrapperInnerStyles?: React.CSSProperties;
    17| }) => {
    18|   const [menuVisible, setMenuVisible] = React.useState(false);
    19|   const [menuPosition, setMenuPosition] = React.useState<{top: number; left: number}>({
    20|     top: 0,
    21|     left: 0,
    22|   });
    23|   const showMenu = (e: React.MouseEvent) => {
    24|     e.preventDefault();
    25|     setMenuPosition({top: e.pageY, left: e.pageX});
    26|     if (!menuVisible) {
    27|       setMenuVisible(true);
    28|       document.dispatchEvent(new CustomEvent(CONTEXT_MENU_EVENT));
    29|     }
    30|     if (stopPropagation) {
    31|       e.stopPropagation();
    32|     }
    33|   };
    34|   const hideMenu = () => {
    35|     setMenuVisible(false);
    36|   };
    37|   const ref = React.useRef<HTMLDivElement | null>(null);
    38|   React.useEffect(() => {
    39|     const node = ref.current;
    40|     const listener = (e: MouseEvent) => {
    41|       if (ref.current && e.target && !ref.current.contains(e.target as Node)) {
    42|         hideMenu();
    43|       }
    44|     };
    45|     const keydownListener = (e: KeyboardEvent) => {
    46|       if (ref.current && e.code === 'Escape') {
    47|         hideMenu();
    48|       }
    49|     };
    50|     if (menuVisible && node) {
    51|       document.body.addEventListener('click', listener);
    52|       document.body.addEventListener('keydown', keydownListener);
    53|       document.body.addEventListener('contextmenu', listener);
    54|       document.addEventListener(CONTEXT_MENU_EVENT, listener as any);
    55|     }
    56|     return () => {
    57|       if (node) {
    58|         document.body.removeEventListener('click', listener);
    59|         document.body.removeEventListener('keydown', keydownListener);
    60|         document.body.removeEventListener('contextmenu', listener);
    61|         document.removeEventListener(CONTEXT_MENU_EVENT, listener as any);
    62|       }
    63|     };
    64|   }, [menuVisible]);
    65|   return (
    66|     <div ref={ref} style={wrapperOuterStyles}>
    67|       <div onContextMenu={showMenu} onClick={hideMenu} style={wrapperInnerStyles}>
    68|         {children}
    69|       </div>
    70|       {menuVisible
    71|         ? ReactDOM.createPortal(
    72|             <div
    73|               style={{
    74|                 position: 'absolute',
    75|                 top: menuPosition.top,
    76|                 left: menuPosition.left,
    77|                 backgroundColor: colorPopoverBackground(),
    78|                 boxShadow: '0 2px 4px rgba(0, 0, 0, 0.1)',
    79|                 zIndex: 10,
    80|                 borderRadius: '4px',
    81|               }}
    82|               onClick={(e) => {
    83|                 e.stopPropagation();
    84|               }}
    85|             >
    86|               {menu}
    87|             </div>,
    88|             document.body,
    89|           )
    90|         : null}
    91|     </div>
    92|   );
    93| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/ExpandedGroupNode.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-90 ---
     1| import {
     2|   Box,
     3|   Icon,
     4|   colorLineageGroupBackground,
     5|   colorLineageGroupNodeBorder,
     6|   colorLineageGroupNodeBackground,
     7|   colorLineageGroupNodeBackgroundHover,
     8|   colorLineageGroupNodeBorderHover,
     9| } from '@dagster-io/ui-components';
    10| import React from 'react';
    11| import styled from 'styled-components';
    12| import {GroupNodeNameAndRepo, useGroupNodeContextMenu} from './CollapsedGroupNode';
    13| import {ContextMenuWrapper} from './ContextMenuWrapper';
    14| import {GraphNode} from './Utils';
    15| import {GroupLayout} from './layout';
    16| export const ExpandedGroupNode = ({
    17|   group,
    18|   minimal,
    19|   onCollapse,
    20|   preferredJobName,
    21|   onFilterToGroup,
    22| }: {
    23|   group: GroupLayout & {assets: GraphNode[]};
    24|   minimal: boolean;
    25|   onCollapse?: () => void;
    26|   preferredJobName?: string;
    27|   onFilterToGroup?: () => void;
    28| }) => {
    29|   const {menu, dialog} = useGroupNodeContextMenu({
    30|     onFilterToGroup,
    31|     assets: group.assets,
    32|     preferredJobName,
    33|   });
    34|   return (
    35|     <div style={{position: 'relative', width: '100%', height: '100%'}}>
    36|       <ContextMenuWrapper menu={menu} stopPropagation>
    37|         <GroupNodeHeaderBox
    38|           $minimal={minimal}
    39|           onClick={(e) => {
    40|             onCollapse?.();
    41|             e.stopPropagation();
    42|           }}
    43|         >
    44|           <GroupNodeNameAndRepo group={group} minimal={minimal} />
    45|           {onCollapse && (
    46|             <Box padding={{vertical: 4}}>
    47|               <Icon name="unfold_less" />
    48|             </Box>
    49|           )}
    50|         </GroupNodeHeaderBox>
    51|       </ContextMenuWrapper>
    52|       <GroupOutline $minimal={minimal} />
    53|       {dialog}
    54|     </div>
    55|   );
    56| };
    57| const GroupOutline = styled.div<{$minimal: boolean}>`
    58|   inset: 0;
    59|   top: 60px;
    60|   position: absolute;
    61|   background: ${colorLineageGroupBackground()};
    62|   width: 100%;
    63|   border-radius: 10px;
    64|   border-top-left-radius: 0;
    65|   border-top-right-radius: 0;
    66|   pointer-events: none;
    67|   border: ${(p) => (p.$minimal ? '4px' : '2px')} solid ${colorLineageGroupNodeBorder()};
    68| `;
    69| const GroupNodeHeaderBox = styled.div<{$minimal: boolean}>`
    70|   border: ${(p) => (p.$minimal ? '4px' : '2px')} solid ${colorLineageGroupNodeBorder()};
    71|   background: ${colorLineageGroupNodeBackground()};
    72|   width: 100%;
    73|   height: 60px;
    74|   display: flex;
    75|   align-items: center;
    76|   cursor: pointer;
    77|   padding: 0 12px 0 16px;
    78|   border-radius: 8px;
    79|   border-bottom-left-radius: 0;
    80|   border-bottom-right-radius: 0;
    81|   border-bottom: 0;
    82|   position: relative;
    83|   transition:
    84|     background 100ms linear,
    85|     border-color 100ms linear;
    86|   &:hover {
    87|     background: ${colorLineageGroupNodeBackgroundHover()};
    88|     border-color: ${colorLineageGroupNodeBorderHover()};
    89|   }
    90| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/ForeignNode.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-33 ---
     1| import {Icon, FontFamily, colorLinkDefault} from '@dagster-io/ui-components';
     2| import React from 'react';
     3| import styled from 'styled-components';
     4| import {withMiddleTruncation} from '../app/Util';
     5| import {ASSET_LINK_NAME_MAX_LENGTH} from './layout';
     6| export const AssetNodeLink = React.memo(({assetKey}: {assetKey: {path: string[]}}) => {
     7|   const label = assetKey.path[assetKey.path.length - 1]!;
     8|   return (
     9|     <AssetNodeLinkContainer>
    10|       <Icon name="open_in_new" color={colorLinkDefault()} />
    11|       <span className="label" title={label}>
    12|         {withMiddleTruncation(label, {
    13|           maxLength: ASSET_LINK_NAME_MAX_LENGTH,
    14|         })}
    15|       </span>
    16|     </AssetNodeLinkContainer>
    17|   );
    18| });
    19| const AssetNodeLinkContainer = styled.div`
    20|   display: flex;
    21|   padding: 4px 8px 6px;
    22|   margin-top: 26px;
    23|   line-height: 30px;
    24|   font-family: ${FontFamily.monospace};
    25|   color: ${colorLinkDefault()};
    26|   align-items: center;
    27|   font-weight: 600;
    28|   gap: 4px;
    29|   &:hover .label {
    30|     color: ${colorLinkDefault()};
    31|     text-decoration: underline;
    32|   }
    33| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/SidebarAssetInfo.tsx
# Total hunks: 4
# ====================================================================
# --- HUNK 1: Lines 1-30 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {
     3|   Box,
     4|   ConfigTypeSchema,
     5|   Icon,
     6|   Spinner,
     7|   colorAccentGray,
     8|   colorBorderDefault,
     9|   colorLinkDefault,
    10| } from '@dagster-io/ui-components';
    11| import * as React from 'react';
    12| import {Link} from 'react-router-dom';
    13| import styled from 'styled-components';
    14| import {COMMON_COLLATOR} from '../app/Util';
    15| import {useAssetLiveData} from '../asset-data/AssetLiveDataProvider';
    16| import {ASSET_NODE_CONFIG_FRAGMENT} from '../assets/AssetConfig';
    17| import {AssetDefinedInMultipleReposNotice} from '../assets/AssetDefinedInMultipleReposNotice';
    18| import {
    19|   AssetMetadataTable,
    20|   ASSET_NODE_OP_METADATA_FRAGMENT,
    21|   metadataForAssetNode,
    22| } from '../assets/AssetMetadata';
    23| import {AssetSidebarActivitySummary} from '../assets/AssetSidebarActivitySummary';
    24| import {DependsOnSelfBanner} from '../assets/DependsOnSelfBanner';
    25| import {PartitionHealthSummary} from '../assets/PartitionHealthSummary';
    26| import {UnderlyingOpsOrGraph} from '../assets/UnderlyingOpsOrGraph';
    27| import {Version} from '../assets/Version';
    28| import {
    29|   EXECUTE_CHECKS_BUTTON_ASSET_NODE_FRAGMENT,
    30|   EXECUTE_CHECKS_BUTTON_CHECK_FRAGMENT,

# --- HUNK 2: Lines 86-152 ---
    86|       />
    87|       {(asset.description || OpMetadataPlugin?.SidebarComponent || !hasAssetMetadata) && (
    88|         <SidebarSection title="Description">
    89|           <Box padding={{vertical: 16, horizontal: 24}}>
    90|             <Description description={asset.description || 'No description provided'} />
    91|           </Box>
    92|           {asset.op && OpMetadataPlugin?.SidebarComponent && (
    93|             <Box padding={{bottom: 16, horizontal: 24}}>
    94|               <OpMetadataPlugin.SidebarComponent definition={asset.op} repoAddress={repoAddress} />
    95|             </Box>
    96|           )}
    97|         </SidebarSection>
    98|       )}
    99|       <AssetSidebarActivitySummary
   100|         asset={asset}
   101|         assetLastMaterializedAt={lastMaterialization?.timestamp}
   102|         isSourceAsset={definition.isSource}
   103|         stepKey={stepKeyForAsset(definition)}
   104|         liveData={liveData}
   105|       />
   106|       <div style={{borderBottom: `2px solid ${colorBorderDefault()}`}} />
   107|       {nodeDependsOnSelf(graphNode) && <DependsOnSelfBanner />}
   108|       {asset.opVersion && (
   109|         <SidebarSection title="Code Version">
   110|           <Box padding={{vertical: 16, horizontal: 24}}>
   111|             <Version>{asset.opVersion}</Version>
   112|           </Box>
   113|         </SidebarSection>
   114|       )}
   115|       {assetConfigSchema && (
   116|         <SidebarSection title="Config">
   117|           <Box padding={{vertical: 16, horizontal: 24}}>
   118|             <ConfigTypeSchema
   119|               type={assetConfigSchema}
   120|               typesInScope={assetConfigSchema.recursiveConfigTypes}
   121|             />
   122|           </Box>
   123|         </SidebarSection>
   124|       )}
   125|       {asset.requiredResources.length > 0 && (
   126|         <SidebarSection title="Required resources">
   127|           <Box padding={{vertical: 16, horizontal: 24}}>
   128|             {[...asset.requiredResources]
   129|               .sort((a, b) => COMMON_COLLATOR.compare(a.resourceKey, b.resourceKey))
   130|               .map((resource) => (
   131|                 <ResourceContainer key={resource.resourceKey}>
   132|                   <Icon name="resource" color={colorAccentGray()} />
   133|                   {repoAddress ? (
   134|                     <Link
   135|                       to={workspacePathFromAddress(
   136|                         repoAddress,
   137|                         `/resources/${resource.resourceKey}`,
   138|                       )}
   139|                     >
   140|                       <ResourceHeader>{resource.resourceKey}</ResourceHeader>
   141|                     </Link>
   142|                   ) : (
   143|                     <ResourceHeader>{resource.resourceKey}</ResourceHeader>
   144|                   )}
   145|                 </ResourceContainer>
   146|               ))}
   147|           </Box>
   148|         </SidebarSection>
   149|       )}
   150|       {assetMetadata.length > 0 && (
   151|         <SidebarSection title="Metadata">
   152|           <AssetMetadataTable assetMetadata={assetMetadata} repoLocation={repoAddress?.location} />

# --- HUNK 3: Lines 176-216 ---
   176|   opName?: string;
   177|   repoAddress?: RepoAddress | null;
   178| }
   179| const Header = ({assetNode, repoAddress}: HeaderProps) => {
   180|   const displayName = displayNameForAssetKey(assetNode.assetKey);
   181|   return (
   182|     <Box flex={{gap: 4, direction: 'column'}} margin={{left: 24, right: 12, vertical: 16}}>
   183|       <SidebarTitle
   184|         style={{
   185|           marginBottom: 0,
   186|           display: 'flex',
   187|           justifyContent: 'space-between',
   188|           flexWrap: 'wrap',
   189|         }}
   190|       >
   191|         <Box>{displayName}</Box>
   192|       </SidebarTitle>
   193|       <Box flex={{direction: 'row', justifyContent: 'space-between', alignItems: 'center'}}>
   194|         <AssetCatalogLink to={assetDetailsPathForKey(assetNode.assetKey)}>
   195|           {'View in Asset Catalog '}
   196|           <Icon name="open_in_new" color={colorLinkDefault()} />
   197|         </AssetCatalogLink>
   198|         {repoAddress && (
   199|           <UnderlyingOpsOrGraph assetNode={assetNode} repoAddress={repoAddress} minimal />
   200|         )}
   201|       </Box>
   202|     </Box>
   203|   );
   204| };
   205| const AssetCatalogLink = styled(Link)`
   206|   display: flex;
   207|   gap: 5px;
   208|   padding: 6px;
   209|   margin: -6px;
   210|   align-items: center;
   211|   white-space: nowrap;
   212| `;
   213| const SIDEBAR_ASSET_FRAGMENT = gql`
   214|   fragment SidebarAssetFragment on AssetNode {
   215|     id
   216|     description


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/TryTheFeatureFlagNotice.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-58 ---
     1| import {
     2|   Body,
     3|   Box,
     4|   Button,
     5|   Subtitle1,
     6|   colorAccentBlue,
     7|   colorBackgroundBlue,
     8|   colorTextLight,
     9| } from '@dagster-io/ui-components';
    10| import uniq from 'lodash/uniq';
    11| import React from 'react';
    12| import styled from 'styled-components';
    13| import {FeatureFlag, getFeatureFlags, setFeatureFlags} from '../app/Flags';
    14| import {useStateWithStorage} from '../hooks/useStateWithStorage';
    15| const TITLE = 'Try the new asset graph';
    16| const MESSAGE =
    17|   "We're building a better asset graph experience with faster rendering, a new sidebar, collapsible groups, and more. You can opt-in to this experimental feature at any time from user settings.";
    18| export const TryTheFeatureFlagNotice = () => {
    19|   const [dismissed, setDismissed] = useStateWithStorage<boolean>(
    20|     'new-graph-feature-flag',
    21|     (val) => !!val,
    22|   );
    23|   if (dismissed) {
    24|     return <span />;
    25|   }
    26|   return (
    27|     <Container>
    28|       <Box flex={{direction: 'column', gap: 4}}>
    29|         <Subtitle1>{TITLE}</Subtitle1>
    30|         <Body color={colorTextLight()}>{MESSAGE}</Body>
    31|         <Box flex={{gap: 8}} margin={{top: 12}}>
    32|           <Button
    33|             intent="primary"
    34|             onClick={() => {
    35|               setFeatureFlags(uniq([...getFeatureFlags(), FeatureFlag.flagDAGSidebar]));
    36|               window.location.reload();
    37|             }}
    38|           >
    39|             Try it now
    40|           </Button>
    41|           <Button onClick={() => setDismissed(true)}>No thanks</Button>
    42|         </Box>
    43|       </Box>
    44|     </Container>
    45|   );
    46| };
    47| const Container = styled.div`
    48|   position: absolute;
    49|   left: 16px;
    50|   bottom: 16px;
    51|   z-index: 2;
    52|   width: 700px;
    53|   max-width: 50vw;
    54|   border: 1px solid ${colorAccentBlue()};
    55|   border-radius: 16px;
    56|   background: ${colorBackgroundBlue()};
    57|   padding: 24px;
    58| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/__stories__/AssetNode.stories.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 22-62 ---
    22|     };
    23|     definitionCopy.assetKey.path = scenario.liveData
    24|       ? [scenario.liveData.stepKey]
    25|       : JSON.parse(scenario.definition.id);
    26|     const dimensions = getAssetNodeDimensions(definitionCopy);
    27|     _setCacheEntryForTest(definitionCopy.assetKey, scenario.liveData);
    28|     return (
    29|       <Box flex={{direction: 'column', gap: 8, alignItems: 'flex-start'}}>
    30|         <div
    31|           style={{
    32|             position: 'relative',
    33|             width: dimensions.width,
    34|             height: dimensions.height,
    35|             overflowY: 'hidden',
    36|           }}
    37|         >
    38|           <AssetNode definition={definitionCopy} selected={false} />
    39|         </div>
    40|         <div style={{position: 'relative', width: dimensions.width, height: 82}}>
    41|           <div style={{position: 'absolute', width: dimensions.width, height: 82}}>
    42|             <AssetNodeMinimal definition={definitionCopy} selected={false} height={82} />
    43|           </div>
    44|         </div>
    45|         <code>
    46|           <strong>{scenario.title}</strong>
    47|           <pre>{JSON.stringify(scenario.liveData, null, 2)}</pre>
    48|         </code>
    49|       </Box>
    50|     );
    51|   };
    52|   return (
    53|     <>
    54|       <Box flex={{gap: 20, wrap: 'wrap', alignItems: 'flex-start'}}>
    55|         {Mocks.AssetNodeScenariosBase.map(caseWithLiveData)}
    56|       </Box>
    57|       <Box flex={{gap: 20, wrap: 'wrap', alignItems: 'flex-start'}}>
    58|         {Mocks.AssetNodeScenariosSource.map(caseWithLiveData)}
    59|       </Box>
    60|       <Box flex={{gap: 20, wrap: 'wrap', alignItems: 'flex-start'}}>
    61|         {Mocks.AssetNodeScenariosPartitioned.map(caseWithLiveData)}
    62|       </Box>


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/layout.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 223-256 ---
   223| };
   224| export const extendBounds = (a: IBounds, b: IBounds) => {
   225|   const xmin = Math.min(a.x, b.x);
   226|   const ymin = Math.min(a.y, b.y);
   227|   const xmax = Math.max(a.x + a.width, b.x + b.width);
   228|   const ymax = Math.max(a.y + a.height, b.y + b.height);
   229|   return {x: xmin, y: ymin, width: xmax - xmin, height: ymax - ymin};
   230| };
   231| export const ASSET_NODE_NAME_MAX_LENGTH = 28;
   232| export const getAssetNodeDimensions = (def: {
   233|   assetKey: {path: string[]};
   234|   opNames: string[];
   235|   isSource: boolean;
   236|   isObservable: boolean;
   237|   isPartitioned: boolean;
   238|   graphName: string | null;
   239|   description?: string | null;
   240|   computeKind: string | null;
   241| }) => {
   242|   const width = 265;
   243|   let height = 100; // top tags area + name + description
   244|   if (def.isSource && def.isObservable) {
   245|     height += 30; // status row
   246|   } else if (def.isSource) {
   247|     height += 0; // no status row
   248|   } else {
   249|     height += 26; // status row
   250|     if (def.isPartitioned) {
   251|       height += 40;
   252|     }
   253|   }
   254|   height += 30; // tags beneath
   255|   return {width, height};
   256| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/sidebar/AssetSidebarNode.tsx
# Total hunks: 4
# ====================================================================
# --- HUNK 1: Lines 1-116 ---
     1| import {
     2|   Box,
     3|   Icon,
     4|   MiddleTruncate,
     5|   Popover,
     6|   UnstyledButton,
     7|   colorAccentGray,
     8|   colorBackgroundBlue,
     9|   colorBackgroundLightHover,
    10|   colorKeylineDefault,
    11| } from '@dagster-io/ui-components';
    12| import React from 'react';
    13| import styled from 'styled-components';
    14| import {ExplorerPath} from '../../pipelines/PipelinePathUtils';
    15| import {useAssetNodeMenu} from '../AssetNodeMenu';
    16| import {GraphData, GraphNode} from '../Utils';
    17| import {StatusDot} from './StatusDot';
    18| import {FolderNodeNonAssetType, getDisplayName} from './util';
    19| export const AssetSidebarNode = ({
    20|   node,
    21|   level,
    22|   toggleOpen,
    23|   selectNode,
    24|   isOpen,
    25|   isSelected,
    26|   selectThisNode,
    27|   explorerPath,
    28|   onChangeExplorerPath,
    29|   fullAssetGraphData,
    30|   isLastSelected,
    31| }: {
    32|   fullAssetGraphData: GraphData;
    33|   node: GraphNode | FolderNodeNonAssetType;
    34|   level: number;
    35|   toggleOpen: () => void;
    36|   selectThisNode: (e: React.MouseEvent<any> | React.KeyboardEvent<any>) => void;
    37|   selectNode: (e: React.MouseEvent<any> | React.KeyboardEvent<any>, nodeId: string) => void;
    38|   isOpen: boolean;
    39|   isLastSelected: boolean;
    40|   isSelected: boolean;
    41|   explorerPath: ExplorerPath;
    42|   onChangeExplorerPath: (path: ExplorerPath, mode: 'replace' | 'push') => void;
    43| }) => {
    44|   const isGroupNode = 'groupName' in node;
    45|   const isLocationNode = 'locationName' in node;
    46|   const isAssetNode = !isGroupNode && !isLocationNode;
    47|   const displayName = React.useMemo(() => {
    48|     if (isAssetNode) {
    49|       return getDisplayName(node);
    50|     } else if (isGroupNode) {
    51|       return node.groupName;
    52|     } else {
    53|       return node.locationName;
    54|     }
    55|   }, [isAssetNode, isGroupNode, node]);
    56|   const elementRef = React.useRef<HTMLDivElement | null>(null);
    57|   const showArrow = !isAssetNode;
    58|   const ref = React.useRef<HTMLButtonElement | null>(null);
    59|   React.useLayoutEffect(() => {
    60|     if (ref.current && isLastSelected && !isElementInsideSVGViewport(document.activeElement)) {
    61|       ref.current.focus();
    62|     }
    63|   }, [isLastSelected]);
    64|   return (
    65|     <>
    66|       <Box ref={elementRef} onClick={selectThisNode} padding={{left: 8}}>
    67|         <BoxWrapper level={level}>
    68|           <Box padding={{right: 12}} flex={{direction: 'row', alignItems: 'center'}}>
    69|             {showArrow ? (
    70|               <UnstyledButton
    71|                 $showFocusOutline
    72|                 onClick={(e) => {
    73|                   e.stopPropagation();
    74|                   toggleOpen();
    75|                 }}
    76|                 onKeyDown={(e) => {
    77|                   if (e.code === 'Space') {
    78|                     e.preventDefault();
    79|                   }
    80|                 }}
    81|                 style={{cursor: 'pointer', width: 18}}
    82|               >
    83|                 <Icon
    84|                   name="arrow_drop_down"
    85|                   style={{transform: isOpen ? 'rotate(0deg)' : 'rotate(-90deg)'}}
    86|                 />
    87|               </UnstyledButton>
    88|             ) : (
    89|               <div style={{width: 18}} />
    90|             )}
    91|             <GrayOnHoverBox
    92|               onDoubleClick={toggleOpen}
    93|               style={{
    94|                 width: '100%',
    95|                 borderRadius: '8px',
    96|                 ...(isSelected ? {background: colorBackgroundBlue()} : {}),
    97|               }}
    98|               $showFocusOutline={true}
    99|               ref={ref}
   100|             >
   101|               <div
   102|                 style={{
   103|                   display: 'grid',
   104|                   gridTemplateColumns: 'auto minmax(0, 1fr)',
   105|                   gap: '6px',
   106|                   alignItems: 'center',
   107|                 }}
   108|               >
   109|                 {isAssetNode ? <StatusDot node={node} /> : null}
   110|                 {isGroupNode ? <Icon name="asset_group" /> : null}
   111|                 {isLocationNode ? <Icon name="folder_open" /> : null}
   112|                 <MiddleTruncate text={displayName} />
   113|               </div>
   114|               {isAssetNode ? (
   115|                 <AssetNodePopoverMenu
   116|                   graphData={fullAssetGraphData}

# --- HUNK 2: Lines 133-209 ---
   133|     <div
   134|       onClick={(e) => {
   135|         e.stopPropagation();
   136|       }}
   137|       onKeyDown={(e) => {
   138|         if (e.code === 'Space') {
   139|           e.preventDefault();
   140|         }
   141|       }}
   142|     >
   143|       {dialog}
   144|       <Popover
   145|         content={menu}
   146|         hoverOpenDelay={100}
   147|         hoverCloseDelay={100}
   148|         placement="right"
   149|         shouldReturnFocusOnClose
   150|         canEscapeKeyClose
   151|       >
   152|         <ExpandMore tabIndex={0} role="button">
   153|           <Icon name="more_horiz" color={colorAccentGray()} />
   154|         </ExpandMore>
   155|       </Popover>
   156|     </div>
   157|   );
   158| };
   159| const BoxWrapper = ({level, children}: {level: number; children: React.ReactNode}) => {
   160|   const wrapper = React.useMemo(() => {
   161|     let sofar = children;
   162|     for (let i = 0; i < level; i++) {
   163|       sofar = (
   164|         <Box
   165|           padding={{left: 8}}
   166|           margin={{left: 8}}
   167|           border={
   168|             i < level - 1 ? {side: 'left', width: 1, color: colorKeylineDefault()} : undefined
   169|           }
   170|           style={{position: 'relative'}}
   171|         >
   172|           {sofar}
   173|         </Box>
   174|       );
   175|     }
   176|     return sofar;
   177|   }, [level, children]);
   178|   return <>{wrapper}</>;
   179| };
   180| const ExpandMore = styled.div``;
   181| const GrayOnHoverBox = styled(UnstyledButton)`
   182|   border-radius: 8px;
   183|   cursor: pointer;
   184|   user-select: none;
   185|   width: 100%;
   186|   display: flex;
   187|   flex-direction: row;
   188|   align-items: center;
   189|   padding: 5px 8px;
   190|   justify-content: space-between;
   191|   gap: 6;
   192|   flex-grow: 1;
   193|   flex-shrink: 1;
   194|   &:hover,
   195|   &:focus-within {
   196|     background: ${colorBackgroundLightHover()};
   197|     transition: background 100ms linear;
   198|     box-shadow: none;
   199|     ${ExpandMore} {
   200|       visibility: visible;
   201|     }
   202|   }
   203|   ${ExpandMore} {
   204|     visibility: hidden;
   205|   }
   206| `;
   207| function isElementInsideSVGViewport(element: Element | null) {
   208|   return !!element?.closest('[data-svg-viewport]');
   209| }


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/sidebar/SearchFilter.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {MenuItem, useViewport, Suggest, colorTextLighter} from '@dagster-io/ui-components';
     2| import React from 'react';
     3| import styled from 'styled-components';
     4| import {ShortcutHandler} from '../../app/ShortcutHandler';
     5| export const SearchFilter = <T,>({
     6|   values,
     7|   onSelectValue,
     8| }: {
     9|   values: {label: string; value: T}[];
    10|   onSelectValue: (e: React.MouseEvent<any>, value: T) => void;
    11| }) => {
    12|   const {viewport, containerProps} = useViewport();
    13|   const ref = React.useRef<HTMLDivElement | null>(null);
    14|   return (
    15|     <ShortcutHandler
    16|       key="insights"
    17|       onShortcut={() => {
    18|         if (ref.current) {
    19|           ref.current.querySelector('input')?.focus();
    20|         }
    21|       }}

# --- HUNK 2: Lines 43-67 ---
    43|           popoverProps={{usePortal: false, fill: true}}
    44|           itemRenderer={(item, itemProps) => (
    45|             <MenuItem
    46|               active={itemProps.modifiers.active}
    47|               onClick={(e) => itemProps.handleClick(e)}
    48|               key={item.label}
    49|               text={item.label}
    50|             />
    51|           )}
    52|           noResults={<MenuItem disabled={true} text="No results" />}
    53|           onItemSelect={(item, e) => onSelectValue(e as any, item.value)}
    54|           selectedItem={null}
    55|         />
    56|       </SuggestWrapper>
    57|     </ShortcutHandler>
    58|   );
    59| };
    60| const SuggestWrapper = styled.div`
    61|   .bp4-input-group.dagster-suggest-input {
    62|     width: 100%;
    63|     ::placeholder {
    64|       color: ${colorTextLighter()};
    65|     }
    66|   }
    67| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/sidebar/Sidebar.tsx
# Total hunks: 5
# ====================================================================
# --- HUNK 1: Lines 1-109 ---
     1| import {Button, Icon, Tooltip, Box} from '@dagster-io/ui-components';
     2| import {useVirtualizer} from '@tanstack/react-virtual';
     3| import React from 'react';
     4| import {AssetKey} from '../../assets/types';
     5| import {ExplorerPath} from '../../pipelines/PipelinePathUtils';
     6| import {Container, Inner, Row} from '../../ui/VirtualizedTable';
     7| import {buildRepoPathForHuman} from '../../workspace/buildRepoAddress';
     8| import {GraphData, GraphNode, tokenForAssetKey} from '../Utils';
     9| import {SearchFilter} from '../sidebar/SearchFilter';
    10| import {AssetSidebarNode} from './AssetSidebarNode';
    11| import {FolderNodeType, getDisplayName, nodePathKey} from './util';
    12| const COLLATOR = new Intl.Collator(navigator.language, {sensitivity: 'base', numeric: true});
    13| export const AssetGraphExplorerSidebar = React.memo(
    14|   ({
    15|     assetGraphData,
    16|     fullAssetGraphData,
    17|     selectedNodes,
    18|     selectNode: _selectNode,
    19|     explorerPath,
    20|     onChangeExplorerPath,
    21|     allAssetKeys,
    22|     hideSidebar,
    23|   }: {
    24|     assetGraphData: GraphData;
    25|     fullAssetGraphData: GraphData;
    26|     selectedNodes: GraphNode[];
    27|     selectNode: (e: React.MouseEvent<any> | React.KeyboardEvent<any>, nodeId: string) => void;
    28|     explorerPath: ExplorerPath;
    29|     onChangeExplorerPath: (path: ExplorerPath, mode: 'replace' | 'push') => void;
    30|     allAssetKeys: AssetKey[];
    31|     expandedGroups: string[];
    32|     setExpandedGroups: (a: string[]) => void;
    33|     hideSidebar: () => void;
    34|   }) => {
    35|     const lastSelectedNode = selectedNodes[selectedNodes.length - 1];
    36|     const graphData = Object.keys(assetGraphData.nodes).length
    37|       ? assetGraphData
    38|       : fullAssetGraphData;
    39|     const [selectWhenDataAvailable, setSelectWhenDataAvailable] = React.useState<
    40|       [React.MouseEvent<any> | React.KeyboardEvent<any>, string] | null
    41|     >(null);
    42|     const selectedNodeHasDataAvailable = selectWhenDataAvailable
    43|       ? !!graphData.nodes[selectWhenDataAvailable[1]]
    44|       : false;
    45|     React.useEffect(() => {
    46|       if (selectWhenDataAvailable) {
    47|         const [e, id] = selectWhenDataAvailable;
    48|         _selectNode(e, id);
    49|       }
    50|     }, [selectWhenDataAvailable, selectedNodeHasDataAvailable]);
    51|     const selectNode: typeof _selectNode = (e, id) => {
    52|       setSelectWhenDataAvailable([e, id]);
    53|       if (!assetGraphData.nodes[id]) {
    54|         try {
    55|           const path = JSON.parse(id);
    56|           const nextOpsQuery = explorerPath.opsQuery.trim()
    57|             ? `\"${tokenForAssetKey({path})}\"`
    58|             : '*';
    59|           onChangeExplorerPath(
    60|             {
    61|               ...explorerPath,
    62|               opsQuery: nextOpsQuery,
    63|             },
    64|             'push',
    65|           );
    66|         } catch (e) {
    67|         }
    68|       }
    69|     };
    70|     const [openNodes, setOpenNodes] = React.useState<Set<string>>(new Set());
    71|     const [selectedNode, setSelectedNode] = React.useState<
    72|       null | {id: string; path: string} | {id: string}
    73|     >(null);
    74|     const rootNodes = React.useMemo(
    75|       () =>
    76|         Object.keys(graphData.nodes)
    77|           .filter(
    78|             (id) =>
    79|               !Object.keys(graphData.upstream[id] ?? {}).filter((id) => graphData.nodes[id]).length,
    80|           )
    81|           .sort((a, b) =>
    82|             COLLATOR.compare(
    83|               getDisplayName(graphData.nodes[a]!),
    84|               getDisplayName(graphData.nodes[b]!),
    85|             ),
    86|           ),
    87|       [graphData],
    88|     );
    89|     const {folderNodes: renderedNodes, codeLocationNodes} = React.useMemo(() => {
    90|       const folderNodes: FolderNodeType[] = [];
    91|       const codeLocationNodes: Record<
    92|         string,
    93|         {
    94|           locationName: string;
    95|           groups: Record<
    96|             string,
    97|             {
    98|               groupName: string;
    99|               assets: string[];
   100|             }
   101|           >;
   102|         }
   103|       > = {};
   104|       Object.entries(graphData.nodes).forEach(([id, node]) => {
   105|         const locationName = node.definition.repository.location.name;
   106|         const repositoryName = node.definition.repository.name;
   107|         const groupName = node.definition.groupName || 'default';
   108|         const codeLocation = buildRepoPathForHuman(repositoryName, locationName);
   109|         codeLocationNodes[codeLocation] = codeLocationNodes[codeLocation] || {

# --- HUNK 2: Lines 122-268 ---
   122|         if (openNodes.has(locationName)) {
   123|           Object.entries(locationNode.groups).forEach(([groupName, groupNode]) => {
   124|             const groupId = locationName + ':' + groupName;
   125|             folderNodes.push({groupName, id: groupId, level: 2});
   126|             if (openNodes.has(groupId)) {
   127|               groupNode.assets
   128|                 .sort((a, b) => COLLATOR.compare(a, b))
   129|                 .forEach((assetKey) => {
   130|                   folderNodes.push({
   131|                     id: assetKey,
   132|                     path: locationName + ':' + groupName + ':' + assetKey,
   133|                     level: 3,
   134|                   });
   135|                 });
   136|             }
   137|           });
   138|         }
   139|       });
   140|       return {folderNodes, codeLocationNodes};
   141|     }, [graphData.nodes, openNodes]);
   142|     const containerRef = React.useRef<HTMLDivElement | null>(null);
   143|     const rowVirtualizer = useVirtualizer({
   144|       count: renderedNodes.length,
   145|       getScrollElement: () => containerRef.current,
   146|       estimateSize: () => 32,
   147|       overscan: 10,
   148|     });
   149|     const totalHeight = rowVirtualizer.getTotalSize();
   150|     const items = rowVirtualizer.getVirtualItems();
   151|     React.useLayoutEffect(() => {
   152|       if (renderedNodes.length === 1) {
   153|         setOpenNodes((prevOpenNodes) => {
   154|           const nextOpenNodes = new Set(prevOpenNodes);
   155|           const locations = Object.keys(codeLocationNodes);
   156|           if (locations.length === 1) {
   157|             const location = codeLocationNodes[locations[0]!]!;
   158|             nextOpenNodes.add(location.locationName);
   159|             const groups = Object.keys(location.groups);
   160|             if (groups.length === 1) {
   161|               nextOpenNodes.add(
   162|                 location.locationName + ':' + location.groups[groups[0]!]!.groupName,
   163|               );
   164|             }
   165|           }
   166|           return nextOpenNodes;
   167|         });
   168|       }
   169|       if (lastSelectedNode) {
   170|         setOpenNodes((prevOpenNodes) => {
   171|           const nextOpenNodes = new Set(prevOpenNodes);
   172|           const assetNode = graphData.nodes[lastSelectedNode.id];
   173|           if (assetNode) {
   174|             const locationName = buildRepoPathForHuman(
   175|               assetNode.definition.repository.name,
   176|               assetNode.definition.repository.location.name,
   177|             );
   178|             const groupName = assetNode.definition.groupName || 'default';
   179|             nextOpenNodes.add(locationName);
   180|             nextOpenNodes.add(locationName + ':' + groupName);
   181|           }
   182|           if (selectedNode?.id !== lastSelectedNode.id) {
   183|             setSelectedNode({id: lastSelectedNode.id});
   184|           }
   185|           return nextOpenNodes;
   186|         });
   187|       } else {
   188|         setSelectedNode(null);
   189|       }
   190|     }, [
   191|       lastSelectedNode,
   192|       graphData,
   193|       lastSelectedNode &&
   194|         renderedNodes.findIndex((node) => nodePathKey(lastSelectedNode) === nodePathKey(node)),
   195|     ]);
   196|     const indexOfLastSelectedNode = React.useMemo(
   197|       () => {
   198|         if (!selectedNode) {
   199|           return -1;
   200|         }
   201|         return renderedNodes.findIndex((node) => {
   202|           if (!('path' in selectedNode)) {
   203|             return node.id === selectedNode.id;
   204|           } else {
   205|             return nodePathKey(node) === nodePathKey(selectedNode);
   206|           }
   207|         });
   208|       },
   209|       [renderedNodes, selectedNode],
   210|     );
   211|     const indexOfLastSelectedNodeRef = React.useRef(indexOfLastSelectedNode);
   212|     indexOfLastSelectedNodeRef.current = indexOfLastSelectedNode;
   213|     React.useLayoutEffect(() => {
   214|       if (indexOfLastSelectedNode !== -1) {
   215|         rowVirtualizer.scrollToIndex(indexOfLastSelectedNode, {
   216|           align: 'center',
   217|           smoothScroll: true,
   218|         });
   219|       }
   220|     }, [selectedNode, rootNodes, rowVirtualizer]);
   221|     React.useLayoutEffect(() => {
   222|       const id = setInterval(rowVirtualizer.measure, 1000);
   223|       return () => clearInterval(id);
   224|     }, [rowVirtualizer.measure]);
   225|     return (
   226|       <div style={{display: 'grid', gridTemplateRows: 'auto minmax(0, 1fr)', height: '100%'}}>
   227|         <Box
   228|           style={{
   229|             display: 'grid',
   230|             gridTemplateColumns: '1fr auto',
   231|             gap: '6px',
   232|             padding: '12px 24px',
   233|             paddingRight: 12,
   234|           }}
   235|           border="bottom"
   236|         >
   237|           <SearchFilter
   238|             values={React.useMemo(() => {
   239|               return allAssetKeys.map((key) => ({
   240|                 value: JSON.stringify(key.path),
   241|                 label: key.path[key.path.length - 1]!,
   242|               }));
   243|             }, [allAssetKeys])}
   244|             onSelectValue={selectNode}
   245|           />
   246|           <Tooltip content="Hide sidebar">
   247|             <Button icon={<Icon name="panel_show_right" />} onClick={hideSidebar} />
   248|           </Tooltip>
   249|         </Box>
   250|         <div>
   251|           <Container
   252|             ref={containerRef}
   253|             onKeyDown={(e) => {
   254|               let nextIndex = 0;
   255|               if (e.code === 'ArrowDown' || e.code === 'ArrowUp') {
   256|                 nextIndex = indexOfLastSelectedNodeRef.current + (e.code === 'ArrowDown' ? 1 : -1);
   257|                 indexOfLastSelectedNodeRef.current = nextIndex;
   258|                 e.preventDefault();
   259|                 const nextNode =
   260|                   renderedNodes[(nextIndex + renderedNodes.length) % renderedNodes.length]!;
   261|                 setSelectedNode(nextNode);
   262|                 selectNode(e, nextNode.id);
   263|               } else if (e.code === 'ArrowLeft' || e.code === 'ArrowRight') {
   264|                 const open = e.code === 'ArrowRight';
   265|                 setOpenNodes((nodes) => {
   266|                   const node = renderedNodes[indexOfLastSelectedNode];
   267|                   if (!node) {
   268|                     return nodes;

# --- HUNK 3: Lines 277-337 ---
   277|                 });
   278|               }
   279|             }}
   280|           >
   281|             <Inner $totalHeight={totalHeight}>
   282|               {items.map(({index, key, size, start, measureElement}) => {
   283|                 const node = renderedNodes[index]!;
   284|                 const isCodelocationNode = 'locationName' in node;
   285|                 const isGroupNode = 'groupName' in node;
   286|                 const row = !isCodelocationNode && !isGroupNode ? graphData.nodes[node.id] : node;
   287|                 return (
   288|                   <Row
   289|                     $height={size}
   290|                     $start={start}
   291|                     key={key}
   292|                     style={{overflow: 'visible'}}
   293|                     ref={measureElement}
   294|                   >
   295|                     {row ? (
   296|                       <AssetSidebarNode
   297|                         isOpen={openNodes.has(nodePathKey(node))}
   298|                         fullAssetGraphData={fullAssetGraphData}
   299|                         node={row}
   300|                         level={node.level}
   301|                         isLastSelected={lastSelectedNode?.id === node.id}
   302|                         isSelected={
   303|                           selectedNode?.id === node.id || selectedNodes.includes(row as GraphNode)
   304|                         }
   305|                         toggleOpen={() => {
   306|                           setOpenNodes((nodes) => {
   307|                             const openNodes = new Set(nodes);
   308|                             const isOpen = openNodes.has(nodePathKey(node));
   309|                             if (isOpen) {
   310|                               openNodes.delete(nodePathKey(node));
   311|                             } else {
   312|                               openNodes.add(nodePathKey(node));
   313|                             }
   314|                             return openNodes;
   315|                           });
   316|                         }}
   317|                         selectNode={(e, id) => {
   318|                           selectNode(e, id);
   319|                         }}
   320|                         selectThisNode={(e) => {
   321|                           setSelectedNode(node);
   322|                           selectNode(e, node.id);
   323|                         }}
   324|                         explorerPath={explorerPath}
   325|                         onChangeExplorerPath={onChangeExplorerPath}
   326|                       />
   327|                     ) : null}
   328|                   </Row>
   329|                 );
   330|               })}
   331|             </Inner>
   332|           </Container>
   333|         </div>
   334|       </div>
   335|     );
   336|   },
   337| );


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/sidebar/util.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-28 ---
     1| import {
     2|   Spinner,
     3|   Tooltip,
     4|   colorAccentGray,
     5|   colorAccentGrayHover,
     6|   colorAccentGreen,
     7|   colorAccentRed,
     8| } from '@dagster-io/ui-components';
     9| import React from 'react';
    10| import styled, {keyframes} from 'styled-components';
    11| import {StatusCase} from '../AssetNodeStatusContent';
    12| import {GraphNode} from '../Utils';
    13| export type FolderNodeNonAssetType =
    14|   | {groupName: string; id: string; level: number}
    15|   | {locationName: string; id: string; level: number};
    16| export type FolderNodeType = FolderNodeNonAssetType | {path: string; id: string; level: number};
    17| export type TreeNodeType = {level: number; id: string; path: string};
    18| export function nodePathKey(node: {path: string; id: string} | {id: string}) {
    19|   return 'path' in node ? node.path : node.id;
    20| }
    21| export function getDisplayName(node: GraphNode) {
    22|   return node.assetKey.path[node.assetKey.path.length - 1]!;
    23| }
    24| export function StatusCaseDot({statusCase}: {statusCase: StatusCase}) {
    25|   const type = React.useMemo(() => {
    26|     switch (statusCase) {
    27|       case StatusCase.LOADING:
    28|         return 'loading' as const;

# --- HUNK 2: Lines 39-93 ---
    39|       case StatusCase.LATE_OR_FAILED:
    40|         return 'failed' as const;
    41|       case StatusCase.NEVER_MATERIALIZED:
    42|         return 'missing' as const;
    43|       case StatusCase.MATERIALIZED:
    44|         return 'successful' as const;
    45|       case StatusCase.PARTITIONS_FAILED:
    46|         return 'failed' as const;
    47|       case StatusCase.PARTITIONS_MISSING:
    48|         return 'missing' as const;
    49|       case StatusCase.PARTITIONS_MATERIALIZED:
    50|         return 'successful' as const;
    51|     }
    52|   }, [statusCase]);
    53|   switch (type) {
    54|     case 'loading':
    55|       return <LoadingDot />;
    56|     case 'missing':
    57|       return (
    58|         <Tooltip content="Missing" position="top">
    59|           <Dot style={{border: `2px solid ${colorAccentGray()}`}} />
    60|         </Tooltip>
    61|       );
    62|     case 'failed':
    63|       return (
    64|         <Tooltip content="Failed" position="top">
    65|           <Dot style={{backgroundColor: colorAccentRed()}} />
    66|         </Tooltip>
    67|       );
    68|     case 'inprogress':
    69|       return <Spinner purpose="caption-text" />;
    70|     case 'successful':
    71|       return <Dot style={{backgroundColor: colorAccentGreen()}} />;
    72|   }
    73| }
    74| const pulse = keyframes`
    75|   from {
    76|     background-color: ${colorAccentGray()}
    77|   }
    78|   50% {
    79|     background-color: ${colorAccentGrayHover()}
    80|   }
    81|   to {
    82|     background-color: ${colorAccentGray()}
    83|   }
    84| `;
    85| const Dot = styled.div`
    86|   width: 10px;
    87|   height: 10px;
    88|   border-radius: 50%;
    89|   margin: 0 1px;
    90| `;
    91| const LoadingDot = styled(Dot)`
    92|   animation: ${pulse} 1s ease-out infinite;
    93| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/useAssetGraphData.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-41 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import groupBy from 'lodash/groupBy';
     3| import keyBy from 'lodash/keyBy';
     4| import reject from 'lodash/reject';
     5| import React from 'react';
     6| import {filterByQuery, GraphQueryItem} from '../app/GraphQueryImpl';
     7| import {AssetKey} from '../assets/types';
     8| import {AssetGroupSelector, PipelineSelector} from '../graphql/types';
     9| import {ASSET_NODE_FRAGMENT} from './AssetNode';
    10| import {buildGraphData, GraphData, toGraphId, tokenForAssetKey} from './Utils';
    11| import {
    12|   AssetGraphQuery,
    13|   AssetGraphQueryVariables,
    14|   AssetNodeForGraphQueryFragment,
    15| } from './types/useAssetGraphData.types';
    16| export interface AssetGraphFetchScope {
    17|   hideEdgesToNodesOutsideQuery?: boolean;
    18|   hideNodesMatching?: (node: AssetNodeForGraphQueryFragment) => boolean;
    19|   pipelineSelector?: PipelineSelector;
    20|   groupSelector?: AssetGroupSelector;
    21|   computeKinds?: string[];
    22| }
    23| export type AssetGraphQueryItem = GraphQueryItem & {
    24|   node: AssetNode;
    25| };
    26| /** Fetches data for rendering an asset graph:
    27|  *
    28|  * @param pipelineSelector: Optionally scope to an asset job, or pass null for the global graph
    29|  *
    30|  * @param opsQuery: filter the returned graph using selector syntax string (eg: asset_name++)
    31|  *
    32|  * @param filterNodes: filter the returned graph using the provided function. The global graph
    33|  * uses this option to implement the "3 of 4 repositories" picker.
    34|  */
    35| export function useAssetGraphData(opsQuery: string, options: AssetGraphFetchScope) {
    36|   const fetchResult = useQuery<AssetGraphQuery, AssetGraphQueryVariables>(ASSET_GRAPH_QUERY, {
    37|     notifyOnNetworkStatusChange: true,
    38|     variables: {
    39|       pipelineSelector: options.pipelineSelector,
    40|       groupSelector: options.groupSelector,
    41|     },

# --- HUNK 2: Lines 51-112 ---
    51|   const graphQueryItems = React.useMemo(
    52|     () => (repoFilteredNodes ? buildGraphQueryItems(repoFilteredNodes) : []),
    53|     [repoFilteredNodes],
    54|   );
    55|   const fullGraphQueryItems = React.useMemo(
    56|     () => (nodes ? buildGraphQueryItems(nodes) : []),
    57|     [nodes],
    58|   );
    59|   const fullAssetGraphData = React.useMemo(
    60|     () => (fullGraphQueryItems ? buildGraphData(fullGraphQueryItems.map((n) => n.node)) : null),
    61|     [fullGraphQueryItems],
    62|   );
    63|   const {assetGraphData, graphAssetKeys, allAssetKeys} = React.useMemo(() => {
    64|     if (repoFilteredNodes === undefined || graphQueryItems === undefined) {
    65|       return {
    66|         graphAssetKeys: [],
    67|         graphQueryItems: [],
    68|         assetGraphData: null,
    69|       };
    70|     }
    71|     const {all: allFilteredByOpQuery} = filterByQuery(graphQueryItems, opsQuery);
    72|     const computeKinds = options.computeKinds;
    73|     const all = computeKinds?.length
    74|       ? allFilteredByOpQuery.filter((item) => computeKinds.includes(item.node.computeKind ?? ''))
    75|       : allFilteredByOpQuery;
    76|     const assetGraphData = buildGraphData(all.map((n) => n.node));
    77|     if (options.hideEdgesToNodesOutsideQuery) {
    78|       removeEdgesToHiddenAssets(assetGraphData, repoFilteredNodes);
    79|     }
    80|     return {
    81|       allAssetKeys: repoFilteredNodes.map((n) => n.assetKey),
    82|       graphAssetKeys: all.map((n) => ({path: n.node.assetKey.path})),
    83|       assetGraphData,
    84|       graphQueryItems,
    85|     };
    86|   }, [
    87|     repoFilteredNodes,
    88|     graphQueryItems,
    89|     opsQuery,
    90|     options.computeKinds,
    91|     options.hideEdgesToNodesOutsideQuery,
    92|   ]);
    93|   return {
    94|     fetchResult,
    95|     assetGraphData,
    96|     fullAssetGraphData,
    97|     graphQueryItems,
    98|     graphAssetKeys,
    99|     allAssetKeys,
   100|   };
   101| }
   102| type AssetNode = AssetNodeForGraphQueryFragment;
   103| const buildGraphQueryItems = (nodes: AssetNode[]) => {
   104|   const items: {[name: string]: AssetGraphQueryItem} = {};
   105|   for (const node of nodes) {
   106|     const name = tokenForAssetKey(node.assetKey);
   107|     items[name] = {
   108|       node,
   109|       name,
   110|       inputs: node.dependencyKeys.map((key) => ({
   111|         dependsOn: [{solid: {name: tokenForAssetKey(key)}}],
   112|       })),


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AllIndividualEventsButton.tsx
# Total hunks: 5
# ====================================================================
# --- HUNK 1: Lines 1-35 ---
     1| import {
     2|   Box,
     3|   Button,
     4|   DialogFooter,
     5|   Dialog,
     6|   Group,
     7|   Icon,
     8|   IconWrapper,
     9|   Table,
    10|   Mono,
    11|   colorTextLight,
    12|   colorBackgroundLight,
    13|   colorAccentLime,
    14|   colorBackgroundLightHover,
    15|   colorTextDefault,
    16| } from '@dagster-io/ui-components';
    17| import dayjs from 'dayjs';
    18| import * as React from 'react';
    19| import {Link} from 'react-router-dom';
    20| import styled from 'styled-components';
    21| import {Timestamp} from '../app/time/Timestamp';
    22| import {isHiddenAssetGroupJob} from '../asset-graph/Utils';
    23| import {MetadataEntry} from '../metadata/MetadataEntry';
    24| import {PipelineReference} from '../pipelines/PipelineReference';
    25| import {RunStatusWithStats} from '../runs/RunStatusDots';
    26| import {linkToRunEvent, titleForRun} from '../runs/RunUtils';
    27| import {isThisThingAJob, useRepository} from '../workspace/WorkspaceContext';
    28| import {buildRepoAddress} from '../workspace/buildRepoAddress';
    29| import {AssetLineageElements} from './AssetLineageElements';
    30| import {AssetEventGroup} from './groupByPartition';
    31| import {
    32|   AssetMaterializationFragment,
    33|   AssetObservationFragment,
    34| } from './types/useRecentAssetEvents.types';
    35| interface AssetEventsTableProps {

# --- HUNK 2: Lines 66-125 ---
    66|                 }
    67|                 setFocused?.(focused !== group ? group : undefined);
    68|               }}
    69|             >
    70|               <EventGroupRow
    71|                 group={group}
    72|                 hasPartitions={hasPartitions}
    73|                 hasLineage={hasLineage}
    74|                 isFocused={focused === group}
    75|               />
    76|             </HoverableRow>
    77|             {focused === group ? (
    78|               <MetadataEntriesRow hasLineage={hasLineage} group={group} />
    79|             ) : undefined}
    80|           </React.Fragment>
    81|         ))}
    82|       </tbody>
    83|     </Table>
    84|   );
    85| };
    86| const NoneSpan = () => <span style={{color: colorTextLight()}}>None</span>;
    87| interface MetadataEntriesRowProps {
    88|   group: AssetEventGroup;
    89|   hasLineage: boolean;
    90| }
    91| const MetadataEntriesRow = React.memo(({group, hasLineage}: MetadataEntriesRowProps) => {
    92|   const {latest, timestamp} = group;
    93|   if (!latest) {
    94|     return <tr></tr>;
    95|   }
    96|   const assetLineage = latest.__typename === 'MaterializationEvent' ? latest.assetLineage : [];
    97|   const observationsAboutLatest =
    98|     latest.__typename === 'MaterializationEvent'
    99|       ? group.all.filter(
   100|           (e) =>
   101|             e.__typename === 'ObservationEvent' && Number(e.timestamp) > Number(latest.timestamp),
   102|         )
   103|       : [];
   104|   return (
   105|     <tr style={{background: colorBackgroundLight()}}>
   106|       <td colSpan={6} style={{fontSize: 14, padding: 0}}>
   107|         {latest.description && (
   108|           <Box padding={{horizontal: 24, vertical: 12}}>{latest.description}</Box>
   109|         )}
   110|         {latest.metadataEntries.length || hasLineage ? (
   111|           <DetailsTable>
   112|             <tbody>
   113|               {latest.metadataEntries.map((entry) => (
   114|                 <tr key={`metadata-${entry.label}`}>
   115|                   <td style={{maxWidth: 300}}>{entry.label}</td>
   116|                   <td>
   117|                     <MetadataEntry entry={entry} expandSmallValues={true} />
   118|                   </td>
   119|                   <td style={{opacity: 0.7}}>{entry.description}</td>
   120|                 </tr>
   121|               ))}
   122|               {observationsAboutLatest.map((obs) => (
   123|                 <React.Fragment key={obs.timestamp}>
   124|                   {obs.metadataEntries.map((entry) => (
   125|                     <tr key={`metadata-${obs.timestamp}-${entry.label}`}>

# --- HUNK 3: Lines 157-282 ---
   157|               ) : null}
   158|             </tbody>
   159|           </DetailsTable>
   160|         ) : (
   161|           <Box padding={{horizontal: 24, vertical: 12}}>No materialization event metadata</Box>
   162|         )}
   163|       </td>
   164|     </tr>
   165|   );
   166| });
   167| interface EventGroupRowProps {
   168|   group: AssetEventGroup;
   169|   hasPartitions: boolean;
   170|   hasLineage: boolean;
   171|   isFocused: boolean;
   172| }
   173| const EventGroupRow = React.memo((props: EventGroupRowProps) => {
   174|   const {group, hasPartitions, hasLineage, isFocused} = props;
   175|   const {latest, partition, timestamp, all} = group;
   176|   const focusCss = isFocused
   177|     ? {paddingLeft: 4, borderLeft: `4px solid ${colorAccentLime()}`}
   178|     : {paddingLeft: 8};
   179|   const run = latest?.runOrError.__typename === 'Run' ? latest.runOrError : undefined;
   180|   const repositoryOrigin = run?.repositoryOrigin;
   181|   const repoAddress = repositoryOrigin
   182|     ? buildRepoAddress(repositoryOrigin.repositoryName, repositoryOrigin.repositoryLocationName)
   183|     : null;
   184|   const repo = useRepository(repoAddress);
   185|   if (!latest) {
   186|     return (
   187|       <>
   188|         <td style={{whiteSpace: 'nowrap', paddingLeft: 24}}>{partition || <NoneSpan />}</td>
   189|         <td colSpan={3} />
   190|       </>
   191|     );
   192|   }
   193|   if (!run) {
   194|     return <span />;
   195|   }
   196|   return (
   197|     <>
   198|       {hasPartitions && (
   199|         <td style={{whiteSpace: 'nowrap', ...focusCss}}>
   200|           <Group direction="row" spacing={2}>
   201|             <DisclosureTriangle open={isFocused} />
   202|             {partition || <NoneSpan />}
   203|           </Group>
   204|         </td>
   205|       )}
   206|       <td style={hasPartitions ? {} : focusCss}>
   207|         <Group direction="row" spacing={4}>
   208|           {!hasPartitions && <DisclosureTriangle open={isFocused} />}
   209|           <Group direction="column" spacing={4}>
   210|             <Timestamp timestamp={{ms: Number(timestamp)}} />
   211|             {all?.length > 1 ? (
   212|               <AllIndividualEventsButton
   213|                 hasPartitions={hasPartitions}
   214|                 hasLineage={hasLineage}
   215|                 events={all}
   216|               >{`View ${all.length} events`}</AllIndividualEventsButton>
   217|             ) : latest.__typename === 'MaterializationEvent' ? (
   218|               <Box flex={{gap: 8, alignItems: 'center'}} style={{color: colorTextLight()}}>
   219|                 <Icon name="materialization" size={16} color={colorTextLight()} />
   220|                 Materialization
   221|               </Box>
   222|             ) : (
   223|               <Box flex={{gap: 8, alignItems: 'center'}} style={{color: colorTextLight()}}>
   224|                 <Icon name="observation" size={16} color={colorTextLight()} /> Observation
   225|               </Box>
   226|             )}
   227|           </Group>
   228|         </Group>
   229|       </td>
   230|       <td>
   231|         {!isHiddenAssetGroupJob(run.pipelineName) && (
   232|           <Box margin={{bottom: 4}}>
   233|             <Box padding={{left: 8}}>
   234|               <PipelineReference
   235|                 showIcon
   236|                 pipelineName={run.pipelineName}
   237|                 pipelineHrefContext={repoAddress || 'repo-unknown'}
   238|                 snapshotId={run.pipelineSnapshotId}
   239|                 isJob={isThisThingAJob(repo, run.pipelineName)}
   240|               />
   241|             </Box>
   242|             <Group direction="row" padding={{left: 8}} spacing={8} alignItems="center">
   243|               <Icon name="linear_scale" color={colorTextLight()} />
   244|               <Link to={linkToRunEvent(run, latest)}>{latest.stepKey}</Link>
   245|             </Group>
   246|           </Box>
   247|         )}
   248|       </td>
   249|       <td>
   250|         <Box flex={{direction: 'row', gap: 8, alignItems: 'center'}}>
   251|           <RunStatusWithStats runId={run.id} status={run.status} />
   252|           <Link to={`/runs/${run.id}?timestamp=${timestamp}`}>
   253|             <Mono>{titleForRun(run)}</Mono>
   254|           </Link>
   255|         </Box>
   256|       </td>
   257|     </>
   258|   );
   259| });
   260| const HoverableRow = styled.tr`
   261|   &:hover {
   262|     background: ${colorBackgroundLightHover()};
   263|   }
   264| `;
   265| const DetailsTable = styled.table`
   266|   width: 100%;
   267|   margin: -2px -2px -3px;
   268|   tr td {
   269|     font-size: 14px;
   270|   }
   271| `;
   272| interface PredecessorDialogProps {
   273|   hasLineage: boolean;
   274|   hasPartitions: boolean;
   275|   events: (AssetMaterializationFragment | AssetObservationFragment)[];
   276| }
   277| export const AllIndividualEventsButton = ({
   278|   disabled,
   279|   hasLineage,
   280|   hasPartitions,
   281|   events,
   282|   children,

# --- HUNK 4: Lines 341-365 ---
   341| const DisclosureTriangle = ({open, onClick}: {open: boolean; onClick?: () => void}) => (
   342|   <DisclosureTriangleButton onClick={onClick} $open={open}>
   343|     <Icon name="arrow_drop_down" size={24} />
   344|   </DisclosureTriangleButton>
   345| );
   346| const DisclosureTriangleButton = styled.button<{$open: boolean}>`
   347|   padding: 4px;
   348|   margin: -4px;
   349|   cursor: pointer;
   350|   border: 0;
   351|   background: transparent;
   352|   outline: none;
   353|   ${IconWrapper} {
   354|     margin: -2px -5px;
   355|     transform: ${({$open}) => ($open ? 'rotate(0deg)' : 'rotate(-90deg)')};
   356|     opacity: 0.25;
   357|   }
   358|   :focus {
   359|     outline: none;
   360|     ${IconWrapper} {
   361|       background: ${colorTextDefault()};
   362|       opacity: 0.5;
   363|     }
   364|   }
   365| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetDefinedInMultipleReposNotice.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-22 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {Alert, Box, ButtonLink, colorTextYellow} from '@dagster-io/ui-components';
     3| import React from 'react';
     4| import {showCustomAlert} from '../app/CustomAlertProvider';
     5| import {displayNameForAssetKey} from '../asset-graph/Utils';
     6| import {buildRepoPathForHuman} from '../workspace/buildRepoAddress';
     7| import {repoAddressAsHumanString} from '../workspace/repoAddressAsString';
     8| import {RepoAddress} from '../workspace/types';
     9| import {AssetKey} from './types';
    10| import {
    11|   AssetDefinitionCollisionQuery,
    12|   AssetDefinitionCollisionQueryVariables,
    13| } from './types/AssetDefinedInMultipleReposNotice.types';
    14| export const MULTIPLE_DEFINITIONS_WARNING = 'Multiple asset definitions found';
    15| export const AssetDefinedInMultipleReposNotice = ({
    16|   assetKey,
    17|   loadedFromRepo,
    18|   padded,
    19| }: {
    20|   assetKey: AssetKey;
    21|   loadedFromRepo: RepoAddress;
    22|   padded?: boolean;

# --- HUNK 2: Lines 29-69 ---
    29|   );
    30|   const collision = data?.assetNodeDefinitionCollisions[0];
    31|   if (!collision) {
    32|     return <span />;
    33|   }
    34|   const allReposWithAsset = collision.repositories.map((r) =>
    35|     repoAddressAsHumanString({name: r.name, location: r.location.name}),
    36|   );
    37|   return (
    38|     <Box padding={padded ? {vertical: 16, left: 24, right: 12} : {}} border="bottom">
    39|       <Alert
    40|         intent="warning"
    41|         title={MULTIPLE_DEFINITIONS_WARNING}
    42|         description={
    43|           <>
    44|             This asset was loaded from{' '}
    45|             {buildRepoPathForHuman(loadedFromRepo.name, loadedFromRepo.location)}, but duplicate
    46|             definitions were found in{' '}
    47|             <ButtonLink
    48|               underline="always"
    49|               color={colorTextYellow()}
    50|               onClick={() =>
    51|                 showCustomAlert({
    52|                   title: MULTIPLE_DEFINITIONS_WARNING,
    53|                   body: (
    54|                     <>
    55|                       Code locations containing an asset definition for{' '}
    56|                       <strong>{displayNameForAssetKey(assetKey)}</strong>:
    57|                       <ul>
    58|                         {allReposWithAsset.map((addr) => (
    59|                           <li key={addr}>{addr}</li>
    60|                         ))}
    61|                       </ul>
    62|                     </>
    63|                   ),
    64|                 })
    65|               }
    66|             >
    67|               {allReposWithAsset.length - 1} other repo{allReposWithAsset.length === 2 ? '' : 's'}
    68|             </ButtonLink>
    69|             . You should rename these assets to avoid collisions.


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetEventDetail.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-30 ---
     1| import {
     2|   Box,
     3|   Group,
     4|   Heading,
     5|   Icon,
     6|   Mono,
     7|   Subheading,
     8|   colorAccentGray,
     9|   colorTextLight,
    10| } from '@dagster-io/ui-components';
    11| import React from 'react';
    12| import {Link} from 'react-router-dom';
    13| import {Timestamp} from '../app/time/Timestamp';
    14| import {isHiddenAssetGroupJob} from '../asset-graph/Utils';
    15| import {AssetKeyInput} from '../graphql/types';
    16| import {Description} from '../pipelines/Description';
    17| import {PipelineReference} from '../pipelines/PipelineReference';
    18| import {RunStatusWithStats} from '../runs/RunStatusDots';
    19| import {titleForRun, linkToRunEvent} from '../runs/RunUtils';
    20| import {isThisThingAJob, useRepository} from '../workspace/WorkspaceContext';
    21| import {buildRepoAddress} from '../workspace/buildRepoAddress';
    22| import {AssetEventMetadataEntriesTable} from './AssetEventMetadataEntriesTable';
    23| import {AssetEventSystemTags} from './AssetEventSystemTags';
    24| import {AssetLineageElements} from './AssetLineageElements';
    25| import {AssetMaterializationUpstreamData} from './AssetMaterializationUpstreamData';
    26| import {RunlessEventTag} from './RunlessEventTag';
    27| import {isRunlessEvent} from './isRunlessEvent';
    28| import {
    29|   AssetMaterializationFragment,
    30|   AssetObservationFragment,

# --- HUNK 2: Lines 86-126 ---
    86|               </Link>
    87|             </Box>
    88|           ) : (
    89|             ''
    90|           )}
    91|         </Box>
    92|         <Box flex={{gap: 4, direction: 'column'}}>
    93|           <Subheading>Job</Subheading>
    94|           {run && !isHiddenAssetGroupJob(run.pipelineName) ? (
    95|             <Box>
    96|               <Box>
    97|                 <PipelineReference
    98|                   showIcon
    99|                   pipelineName={run.pipelineName}
   100|                   pipelineHrefContext={repoAddress || 'repo-unknown'}
   101|                   snapshotId={run.pipelineSnapshotId}
   102|                   isJob={isThisThingAJob(repo, run.pipelineName)}
   103|                 />
   104|               </Box>
   105|               <Group direction="row" spacing={8} alignItems="center">
   106|                 <Icon name="linear_scale" color={colorAccentGray()} />
   107|                 <Link to={linkToRunEvent(run, event)}>{event.stepKey}</Link>
   108|               </Group>
   109|             </Box>
   110|           ) : (
   111|             ''
   112|           )}
   113|         </Box>
   114|       </Box>
   115|       {event.description && (
   116|         <Box padding={{top: 24}} flex={{direction: 'column', gap: 8}}>
   117|           <Subheading>Description</Subheading>
   118|           <Description description={event.description} />
   119|         </Box>
   120|       )}
   121|       <Box padding={{top: 24}} flex={{direction: 'column', gap: 8}}>
   122|         <Subheading>Metadata</Subheading>
   123|         <AssetEventMetadataEntriesTable event={event} />
   124|       </Box>
   125|       {event.__typename === 'MaterializationEvent' && (
   126|         <Box padding={{top: 24}} flex={{direction: 'column', gap: 8}}>

# --- HUNK 3: Lines 131-171 ---
   131|       <Box padding={{top: 24}} flex={{direction: 'column', gap: 8}}>
   132|         <Subheading>System tags</Subheading>
   133|         <AssetEventSystemTags event={event} collapsible />
   134|       </Box>
   135|       {assetLineage.length > 0 && (
   136|         <Box padding={{top: 24}} flex={{direction: 'column', gap: 8}}>
   137|           <Subheading>Parent materializations</Subheading>
   138|           <AssetLineageElements elements={assetLineage} timestamp={event.timestamp} />
   139|         </Box>
   140|       )}
   141|     </Box>
   142|   );
   143| };
   144| export const AssetEventDetailEmpty = () => (
   145|   <Box padding={{horizontal: 24}} style={{flex: 1}}>
   146|     <Box
   147|       padding={{vertical: 24}}
   148|       border="bottom"
   149|       flex={{alignItems: 'center', justifyContent: 'space-between'}}
   150|     >
   151|       <Heading color={colorTextLight()}>No event selected</Heading>
   152|     </Box>
   153|     <Box
   154|       style={{display: 'grid', gridTemplateColumns: '1fr 1fr 1fr 1fr', gap: 16}}
   155|       border="bottom"
   156|       padding={{vertical: 16}}
   157|     >
   158|       <Box flex={{gap: 4, direction: 'column'}}>
   159|         <Subheading>Event</Subheading>
   160|       </Box>
   161|       <Box flex={{gap: 4, direction: 'column'}} style={{minHeight: 64}}>
   162|         <Subheading>Run</Subheading>
   163|       </Box>
   164|       <Box flex={{gap: 4, direction: 'column'}}>
   165|         <Subheading>Job</Subheading>
   166|       </Box>
   167|     </Box>
   168|     <Box padding={{top: 24}} flex={{direction: 'column', gap: 8}}>
   169|       <Subheading>Metadata</Subheading>
   170|       <AssetEventMetadataEntriesTable event={null} />
   171|     </Box>


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetEventList.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-31 ---
     1| import {
     2|   Box,
     3|   Caption,
     4|   Icon,
     5|   Tag,
     6|   colorAccentBlue,
     7|   colorBackgroundBlue,
     8|   colorBackgroundLight,
     9|   colorTextBlue,
    10|   colorTextLight,
    11| } from '@dagster-io/ui-components';
    12| import {useVirtualizer} from '@tanstack/react-virtual';
    13| import * as React from 'react';
    14| import styled from 'styled-components';
    15| import {Timestamp} from '../app/time/Timestamp';
    16| import {AssetRunLink} from '../asset-graph/AssetRunLinking';
    17| import {AssetKeyInput} from '../graphql/types';
    18| import {RunStatusWithStats} from '../runs/RunStatusDots';
    19| import {titleForRun} from '../runs/RunUtils';
    20| import {Container, Inner, Row} from '../ui/VirtualizedTable';
    21| import {RunlessEventTag} from './RunlessEventTag';
    22| import {AssetEventGroup} from './groupByPartition';
    23| import {isRunlessEvent} from './isRunlessEvent';
    24| export const AssetEventList = ({
    25|   groups,
    26|   focused,
    27|   setFocused,
    28|   xAxis,
    29|   assetKey,
    30| }: {
    31|   xAxis: 'time' | 'partition';

# --- HUNK 2: Lines 76-147 ---
    76|                 padding={{left: 24, right: 12}}
    77|                 flex={{direction: 'column', justifyContent: 'center', gap: 8}}
    78|                 border="bottom"
    79|               >
    80|                 {xAxis === 'partition' ? (
    81|                   <AssetEventListPartitionRow group={group} />
    82|                 ) : (
    83|                   <AssetEventListEventRow group={group} assetKey={assetKey} />
    84|                 )}
    85|               </Box>
    86|             </AssetListRow>
    87|           );
    88|         })}
    89|       </Inner>
    90|     </AssetListContainer>
    91|   );
    92| };
    93| export const AssetListContainer = styled(Container)`
    94|   outline: none;
    95|   &:focus {
    96|     box-shadow: 0 -1px ${colorAccentBlue()};
    97|   }
    98| `;
    99| export const AssetListRow = styled(Row)<{$focused: boolean}>`
   100|   cursor: pointer;
   101|   user-select: none;
   102|   :focus,
   103|   :active,
   104|   :hover {
   105|     outline: none;
   106|     background: ${colorBackgroundLight()};
   107|   }
   108|   ${(p) =>
   109|     p.$focused &&
   110|     `background: ${colorBackgroundBlue()};
   111|      color: ${colorTextBlue()};
   112|      :hover {
   113|        background: ${colorBackgroundBlue()};
   114|      }
   115|     `}
   116| `;
   117| const AssetEventListPartitionRow = ({group}: {group: AssetEventGroup}) => {
   118|   const {partition, latest, timestamp} = group;
   119|   return (
   120|     <>
   121|       <Box flex={{gap: 4, direction: 'row', alignItems: 'flex-start'}}>
   122|         <Icon name="partition" />
   123|         {partition}
   124|         <div style={{flex: 1}} />
   125|         {!latest ? <Tag intent="none">Missing</Tag> : <Tag intent="success">Materialized</Tag>}
   126|       </Box>
   127|       <Caption color={colorTextLight()} style={{userSelect: 'none'}}>
   128|         {timestamp ? (
   129|           <span>
   130|             Materialized <Timestamp timestamp={{ms: Number(timestamp)}} />
   131|           </span>
   132|         ) : (
   133|           'Never materialized'
   134|         )}
   135|       </Caption>
   136|     </>
   137|   );
   138| };
   139| const AssetEventListEventRow = ({
   140|   group,
   141|   assetKey,
   142| }: {
   143|   group: AssetEventGroup;
   144|   assetKey: AssetKeyInput;
   145| }) => {
   146|   const {latest, partition, timestamp} = group;
   147|   const run = latest?.runOrError.__typename === 'Run' ? latest.runOrError : null;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetEventMetadataEntriesTable.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-45 ---
     1| import {Box, Caption, Mono, colorKeylineDefault, colorTextLight} from '@dagster-io/ui-components';
     2| import dayjs from 'dayjs';
     3| import uniqBy from 'lodash/uniqBy';
     4| import React from 'react';
     5| import {Link} from 'react-router-dom';
     6| import styled from 'styled-components';
     7| import {MetadataEntry} from '../metadata/MetadataEntry';
     8| import {titleForRun} from '../runs/RunUtils';
     9| import {
    10|   AssetObservationFragment,
    11|   AssetMaterializationFragment,
    12| } from './types/useRecentAssetEvents.types';
    13| /**
    14|  * This component shows the metadata entries attached to an Asset Materialization or Observation event.
    15|  * AssetNodes also have definition-time metadata, which is unrelated to this event metadata.
    16|  */
    17| export const AssetEventMetadataEntriesTable = ({
    18|   event,
    19|   observations,
    20| }: {
    21|   event: AssetObservationFragment | AssetMaterializationFragment | null;
    22|   observations?: (AssetObservationFragment | AssetMaterializationFragment)[];
    23| }) => {
    24|   if (!event || (!event.metadataEntries.length && !observations?.length)) {
    25|     return <Caption color={colorTextLight()}>No metadata entries</Caption>;
    26|   }
    27|   const {metadataEntries, timestamp} = event;
    28|   const observationEntries = uniqBy(
    29|     (observations || []).flatMap((o) =>
    30|       o.metadataEntries.map((entry) => ({timestamp: o.timestamp, runId: o.runId, entry})),
    31|     ),
    32|     (e) => e.entry.label,
    33|   );
    34|   return (
    35|     <AssetEventMetadataScrollContainer>
    36|       <AssetEventMetadataTable>
    37|         <tbody>
    38|           {metadataEntries.map((entry) => (
    39|             <tr key={`metadata-${entry.label}`}>
    40|               <td>
    41|                 <Mono>{entry.label}</Mono>
    42|               </td>
    43|               <td>
    44|                 <Mono>
    45|                   <MetadataEntry entry={entry} expandSmallValues={true} />

# --- HUNK 2: Lines 77-102 ---
    77|           ))}
    78|         </tbody>
    79|       </AssetEventMetadataTable>
    80|     </AssetEventMetadataScrollContainer>
    81|   );
    82| };
    83| const AssetEventMetadataScrollContainer = styled.div`
    84|   width: 100%;
    85|   overflow-x: auto;
    86| `;
    87| const AssetEventMetadataTable = styled.table`
    88|   width: 100%;
    89|   border-spacing: 0;
    90|   border-collapse: collapse;
    91|   tr td:first-child {
    92|     max-width: 300px;
    93|     word-wrap: break-word;
    94|     width: 25%;
    95|   }
    96|   tr td {
    97|     border: 1px solid ${colorKeylineDefault()};
    98|     padding: 8px 12px;
    99|     font-size: 14px;
   100|     vertical-align: top;
   101|   }
   102| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetEventSystemTags.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {Box, ButtonLink, Caption, Icon, Mono, colorKeylineDefault} from '@dagster-io/ui-components';
     2| import React from 'react';
     3| import styled from 'styled-components';
     4| import {useStateWithStorage} from '../hooks/useStateWithStorage';
     5| import {DagsterTag} from '../runs/RunTag';
     6| import {AssetEventGroup} from './groupByPartition';
     7| const ORDER = [
     8|   DagsterTag.AssetEventDataVersion.valueOf(),
     9|   DagsterTag.AssetEventDataVersionDeprecated.valueOf(),
    10|   DagsterTag.AssetEventCodeVersion.valueOf(),
    11| ];
    12| export const AssetEventSystemTags = ({
    13|   event,
    14|   paddingLeft,
    15|   collapsible,
    16| }: {
    17|   event: AssetEventGroup['latest'] | null;
    18|   paddingLeft?: number;
    19|   collapsible?: boolean;
    20| }) => {
    21|   const [shown, setShown] = useStateWithStorage('show-asset-system-tags', Boolean);

# --- HUNK 2: Lines 59-84 ---
    59|             <Box flex={{alignItems: 'center'}}>
    60|               <span>Hide tags</span>
    61|               <Icon name="arrow_drop_down" style={{transform: 'rotate(180deg)'}} />
    62|             </Box>
    63|           </ButtonLink>
    64|         </Caption>
    65|       )}
    66|     </>
    67|   );
    68| };
    69| const AssetEventSystemTagsTable = styled.table`
    70|   width: 100%;
    71|   border-spacing: 0;
    72|   border-collapse: collapse;
    73|   tr td:first-child {
    74|     max-width: 300px;
    75|     word-wrap: break-word;
    76|     width: 25%;
    77|   }
    78|   tr td {
    79|     border: 1px solid ${colorKeylineDefault()};
    80|     padding: 8px 12px;
    81|     font-size: 14px;
    82|     vertical-align: top;
    83|   }
    84| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetEvents.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-33 ---
     1| import {
     2|   Box,
     3|   ButtonGroup,
     4|   Spinner,
     5|   Subheading,
     6|   ErrorBoundary,
     7|   Checkbox,
     8|   Popover,
     9|   Menu,
    10|   MenuItem,
    11|   Button,
    12|   Icon,
    13|   colorBackgroundLight,
    14| } from '@dagster-io/ui-components';
    15| import * as React from 'react';
    16| import {LiveDataForNode, stepKeyForAsset} from '../asset-graph/Utils';
    17| import {RepositorySelector} from '../graphql/types';
    18| import {useStateWithStorage} from '../hooks/useStateWithStorage';
    19| import {AssetEventDetail, AssetEventDetailEmpty} from './AssetEventDetail';
    20| import {AssetEventList} from './AssetEventList';
    21| import {AssetPartitionDetail, AssetPartitionDetailEmpty} from './AssetPartitionDetail';
    22| import {CurrentRunsBanner} from './CurrentRunsBanner';
    23| import {FailedRunSinceMaterializationBanner} from './FailedRunSinceMaterializationBanner';
    24| import {AssetEventGroup, useGroupedEvents} from './groupByPartition';
    25| import {AssetKey, AssetViewParams} from './types';
    26| import {AssetViewDefinitionNodeFragment} from './types/AssetView.types';
    27| import {useRecentAssetEvents} from './useRecentAssetEvents';
    28| interface Props {
    29|   assetKey: AssetKey;
    30|   assetNode: AssetViewDefinitionNodeFragment | null;
    31|   liveData?: LiveDataForNode;
    32|   params: AssetViewParams;
    33|   paramsTimeWindowOnly: boolean;

# --- HUNK 2: Lines 126-166 ---
   126|             stepKey={stepKeyForAsset(assetNode)}
   127|             border="bottom"
   128|             run={liveData?.runWhichFailedToMaterialize || null}
   129|           />
   130|           <CurrentRunsBanner
   131|             stepKey={stepKeyForAsset(assetNode)}
   132|             border="bottom"
   133|             liveData={liveData}
   134|           />
   135|         </>
   136|       )}
   137|       <Box
   138|         style={{flex: 1, minHeight: 0, outline: 'none'}}
   139|         flex={{direction: 'row'}}
   140|         onKeyDown={onKeyDown}
   141|         tabIndex={-1}
   142|       >
   143|         <Box
   144|           style={{display: 'flex', flex: 1, minWidth: 200}}
   145|           flex={{direction: 'column'}}
   146|           background={colorBackgroundLight()}
   147|         >
   148|           {hideFilters ? undefined : (
   149|             <Box
   150|               flex={{alignItems: 'center', gap: 16}}
   151|               padding={{vertical: 12, horizontal: 24}}
   152|               border="bottom"
   153|             >
   154|               <EventTypeSelect
   155|                 value={filters.types}
   156|                 onChange={(types) => setFilters({...filters, types})}
   157|               />
   158|             </Box>
   159|           )}
   160|           {loading ? (
   161|             <Box flex={{alignItems: 'center', justifyContent: 'center'}} style={{flex: 1}}>
   162|               <Spinner purpose="section" />
   163|             </Box>
   164|           ) : (
   165|             <AssetEventList
   166|               xAxis={xAxis}


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetLink.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-37 ---
     1| import {Box, Icon, MiddleTruncate, colorAccentGray} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import {Link} from 'react-router-dom';
     4| import {assetDetailsPathForKey} from './assetDetailsPathForKey';
     5| export const AssetLink = (props: {
     6|   path: string[];
     7|   icon?: 'asset' | 'asset_non_sda' | 'folder';
     8|   textStyle?: 'break-word' | 'middle-truncate';
     9|   url?: string;
    10|   isGroup?: boolean;
    11| }) => {
    12|   const {path, icon, url, isGroup, textStyle = 'break-word'} = props;
    13|   const linkUrl = url ? url : assetDetailsPathForKey({path});
    14|   const assetPath =
    15|     path
    16|       .reduce((accum, elem, ii) => [...accum, ii > 0 ? ' / ' : '', elem], [] as string[])
    17|       .join('') + (isGroup ? '/' : '');
    18|   return (
    19|     <Box
    20|       flex={{direction: 'row', alignItems: 'flex-start', display: 'inline-flex'}}
    21|       style={{maxWidth: '100%'}}
    22|     >
    23|       {icon ? (
    24|         <Box margin={{right: 8, top: 2}}>
    25|           <Icon name={icon} color={colorAccentGray()} />
    26|         </Box>
    27|       ) : null}
    28|       <Link to={linkUrl} style={{overflow: 'hidden'}}>
    29|         {textStyle === 'break-word' ? (
    30|           <span style={{wordBreak: 'break-word'}}>{assetPath}</span>
    31|         ) : (
    32|           <MiddleTruncate text={assetPath} />
    33|         )}
    34|       </Link>
    35|     </Box>
    36|   );
    37| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetMaterializationGraphs.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-27 ---
     1| import {
     2|   Box,
     3|   NonIdealState,
     4|   Caption,
     5|   Subheading,
     6|   ExternalAnchorButton,
     7|   colorTextLight,
     8| } from '@dagster-io/ui-components';
     9| import flatMap from 'lodash/flatMap';
    10| import uniq from 'lodash/uniq';
    11| import * as React from 'react';
    12| import {AssetValueGraph, AssetValueGraphData} from './AssetValueGraph';
    13| import {AssetEventGroup} from './groupByPartition';
    14| export const AssetMaterializationGraphs = (props: {
    15|   groups: AssetEventGroup[];
    16|   xAxis: 'partition' | 'time';
    17|   asSidebarSection?: boolean;
    18|   columnCount?: number;
    19| }) => {
    20|   const [xHover, setXHover] = React.useState<string | number | null>(null);
    21|   const reversed = React.useMemo(() => {
    22|     return [...props.groups].reverse();
    23|   }, [props.groups]);
    24|   const graphDataByMetadataLabel = extractNumericData(reversed, props.xAxis);
    25|   const graphLabels = Object.keys(graphDataByMetadataLabel).slice(0, 20).sort();
    26|   if (process.env.NODE_ENV === 'test') {
    27|     return <span />; // chartjs and our useViewport hook don't play nicely with jest

# --- HUNK 2: Lines 51-112 ---
    51|                   <Subheading>{label}</Subheading>
    52|                 </Box>
    53|               )}
    54|               <Box padding={{horizontal: 24, vertical: 16}}>
    55|                 <AssetValueGraph
    56|                   label={label}
    57|                   width="100%"
    58|                   data={graphDataByMetadataLabel[label]!}
    59|                   xHover={xHover}
    60|                   onHoverX={(x) => x !== xHover && setXHover(x)}
    61|                 />
    62|               </Box>
    63|             </Box>
    64|           </Box>
    65|         ))}
    66|       </div>
    67|       {graphLabels.length === 0 ? (
    68|         props.asSidebarSection ? (
    69|           <Box
    70|             margin={{horizontal: 24, vertical: 12}}
    71|             style={{color: colorTextLight(), fontSize: '0.8rem'}}
    72|           >
    73|             No numeric metadata entries available to be graphed.
    74|           </Box>
    75|         ) : (
    76|           <Box padding={{horizontal: 24, top: 64}}>
    77|             <NonIdealState
    78|               shrinkable
    79|               icon="asset_plot"
    80|               title="Asset plots are automatically generated by metadata"
    81|               description="Include numeric metadata entries in your materializations and observations to see data graphed by time or partition."
    82|               action={
    83|                 <ExternalAnchorButton href="https://docs.dagster.io/concepts/assets/software-defined-assets#recording-materialization-metadata">
    84|                   View documentation
    85|                 </ExternalAnchorButton>
    86|               }
    87|             />
    88|           </Box>
    89|         )
    90|       ) : (
    91|         props.xAxis === 'partition' && (
    92|           <Box padding={{vertical: 16, horizontal: 24}} style={{color: colorTextLight()}}>
    93|             When graphing values by partition, the highest data point for each materialized event
    94|             label is displayed.
    95|           </Box>
    96|         )
    97|       )}
    98|     </>
    99|   );
   100| };
   101| /**
   102|  * Helper function that iterates over the asset materializations and assembles time series data
   103|  * and stats for all numeric metadata entries. This function makes the following guaruntees:
   104|  *
   105|  * - If a metadata entry is sparsely emitted, points are still included for missing x values
   106|  *   with y = NaN. (For compatiblity with react-chartjs-2)
   107|  * - If a metadata entry is generated many times for the same partition, and xAxis = partition,
   108|  *   the MAX value emitted is used as the data point.
   109|  *
   110|  * Assumes that the data is pre-sorted in ascending partition order if using xAxis = partition.
   111|  */
   112| const extractNumericData = (datapoints: AssetEventGroup[], xAxis: 'time' | 'partition') => {


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetMaterializationUpstreamData.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-30 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {
     3|   Box,
     4|   Caption,
     5|   Icon,
     6|   MiddleTruncate,
     7|   colorKeylineDefault,
     8|   colorTextLight,
     9|   colorTextRed,
    10| } from '@dagster-io/ui-components';
    11| import dayjs from 'dayjs';
    12| import relativeTime from 'dayjs/plugin/relativeTime';
    13| import React from 'react';
    14| import {Link} from 'react-router-dom';
    15| import styled from 'styled-components';
    16| import {Timestamp} from '../app/time/Timestamp';
    17| import {displayNameForAssetKey} from '../asset-graph/Utils';
    18| import {AssetKeyInput} from '../graphql/types';
    19| import {assetDetailsPathForKey} from './assetDetailsPathForKey';
    20| import {
    21|   AssetMaterializationUpstreamTableFragment,
    22|   AssetMaterializationUpstreamQuery,
    23|   AssetMaterializationUpstreamQueryVariables,
    24|   MaterializationUpstreamDataVersionFragment,
    25| } from './types/AssetMaterializationUpstreamData.types';
    26| dayjs.extend(relativeTime);
    27| export const AssetMaterializationUpstreamTable = ({
    28|   data,
    29|   assetKey,
    30|   maximumLagMinutes,

# --- HUNK 2: Lines 131-207 ---
   131|     downstreamAssetKey {
   132|       path
   133|     }
   134|   }
   135| `;
   136| export const AssetMaterializationUpstreamData = ({
   137|   assetKey,
   138|   timestamp = '',
   139| }: {
   140|   assetKey: AssetKeyInput;
   141|   timestamp?: string;
   142| }) => {
   143|   const result = useQuery<
   144|     AssetMaterializationUpstreamQuery,
   145|     AssetMaterializationUpstreamQueryVariables
   146|   >(ASSET_MATERIALIZATION_UPSTREAM_QUERY, {
   147|     variables: {assetKey: {path: assetKey.path}, timestamp},
   148|     skip: !timestamp,
   149|   });
   150|   if (!timestamp) {
   151|     return <Caption color={colorTextLight()}>None</Caption>;
   152|   }
   153|   const data =
   154|     result.data?.assetNodeOrError.__typename === 'AssetNode'
   155|       ? result.data.assetNodeOrError
   156|       : undefined;
   157|   return (
   158|     <AssetMaterializationUpstreamTable
   159|       relativeTo={Number(timestamp)}
   160|       assetKey={assetKey}
   161|       data={data}
   162|     />
   163|   );
   164| };
   165| export const TimeSinceWithOverdueColor = ({
   166|   timestamp,
   167|   maximumLagMinutes,
   168|   relativeTo = Date.now(),
   169| }: {
   170|   timestamp: number;
   171|   maximumLagMinutes?: number;
   172|   relativeTo?: number | 'now';
   173| }) => {
   174|   const lagMinutes = ((relativeTo === 'now' ? Date.now() : relativeTo) - timestamp) / (60 * 1000);
   175|   const isOverdue = maximumLagMinutes && lagMinutes > maximumLagMinutes;
   176|   return relativeTo === 'now' ? (
   177|     <span style={{color: isOverdue ? colorTextRed() : colorTextLight()}}>
   178|       ({dayjs(timestamp).fromNow()})
   179|     </span>
   180|   ) : (
   181|     <span style={{color: isOverdue ? colorTextRed() : colorTextLight()}}>
   182|       ({dayjs(Number(timestamp)).from(relativeTo, true)} earlier)
   183|     </span>
   184|   );
   185| };
   186| export const ASSET_MATERIALIZATION_UPSTREAM_QUERY = gql`
   187|   query AssetMaterializationUpstreamQuery($assetKey: AssetKeyInput!, $timestamp: String!) {
   188|     assetNodeOrError(assetKey: $assetKey) {
   189|       ... on AssetNode {
   190|         id
   191|         ...AssetMaterializationUpstreamTableFragment
   192|       }
   193|     }
   194|   }
   195|   ${ASSET_MATERIALIZATION_UPSTREAM_TABLE_FRAGMENT}
   196| `;
   197| const TableContainer = styled.table`
   198|   width: 100%;
   199|   border-spacing: 0;
   200|   border-collapse: collapse;
   201|   tr td {
   202|     border: 1px solid ${colorKeylineDefault()};
   203|     padding: 8px 12px;
   204|     font-size: 14px;
   205|     vertical-align: top;
   206|   }
   207| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetNodeDefinition.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-31 ---
     1| import {gql} from '@apollo/client';
     2| import {
     3|   Body,
     4|   Box,
     5|   Caption,
     6|   ConfigTypeSchema,
     7|   Icon,
     8|   Mono,
     9|   Subheading,
    10|   colorAccentGray,
    11|   colorLinkDefault,
    12| } from '@dagster-io/ui-components';
    13| import * as React from 'react';
    14| import {Link} from 'react-router-dom';
    15| import {COMMON_COLLATOR} from '../app/Util';
    16| import {ASSET_NODE_FRAGMENT} from '../asset-graph/AssetNode';
    17| import {isHiddenAssetGroupJob} from '../asset-graph/Utils';
    18| import {AssetNodeForGraphQueryFragment} from '../asset-graph/types/useAssetGraphData.types';
    19| import {DagsterTypeSummary} from '../dagstertype/DagsterType';
    20| import {Description} from '../pipelines/Description';
    21| import {PipelineReference} from '../pipelines/PipelineReference';
    22| import {ResourceContainer, ResourceHeader} from '../pipelines/SidebarOpHelpers';
    23| import {buildRepoAddress} from '../workspace/buildRepoAddress';
    24| import {RepoAddress} from '../workspace/types';
    25| import {workspacePathFromAddress} from '../workspace/workspacePath';
    26| import {ASSET_NODE_CONFIG_FRAGMENT} from './AssetConfig';
    27| import {AssetDefinedInMultipleReposNotice} from './AssetDefinedInMultipleReposNotice';
    28| import {
    29|   AssetMetadataTable,
    30|   ASSET_NODE_OP_METADATA_FRAGMENT,
    31|   metadataForAssetNode,

# --- HUNK 2: Lines 134-209 ---
   134|               </Box>
   135|               <Box
   136|                 padding={{vertical: 16, horizontal: 24}}
   137|                 flex={{gap: 12, alignItems: 'flex-start'}}
   138|               >
   139|                 <Body style={{flex: 1}}>{assetNode.backfillPolicy.description}</Body>
   140|               </Box>
   141|             </>
   142|           )}
   143|           <Box
   144|             padding={{vertical: 16, horizontal: 24}}
   145|             border="top-and-bottom"
   146|             flex={{justifyContent: 'space-between', gap: 8}}
   147|           >
   148|             <Subheading>
   149|               Upstream assets{upstream?.length ? ` (${upstream.length})` : ''}
   150|             </Subheading>
   151|             <Link to="?view=lineage&lineageScope=upstream">
   152|               <Box flex={{gap: 4, alignItems: 'center'}}>
   153|                 View upstream graph
   154|                 <Icon name="open_in_new" color={colorLinkDefault()} />
   155|               </Box>
   156|             </Link>
   157|           </Box>
   158|           {dependsOnSelf && <DependsOnSelfBanner />}
   159|           <AssetNodeList items={upstream} />
   160|           <Box
   161|             padding={{vertical: 16, horizontal: 24}}
   162|             border="top-and-bottom"
   163|             flex={{justifyContent: 'space-between', gap: 8}}
   164|           >
   165|             <Subheading>
   166|               Downstream assets{downstream?.length ? ` (${downstream.length})` : ''}
   167|             </Subheading>
   168|             <Link to="?view=lineage&lineageScope=downstream">
   169|               <Box flex={{gap: 4, alignItems: 'center'}}>
   170|                 View downstream graph
   171|                 <Icon name="open_in_new" color={colorLinkDefault()} />
   172|               </Box>
   173|             </Link>
   174|           </Box>
   175|           <AssetNodeList items={downstream} />
   176|           {/** Ensures the line between the left and right columns goes to the bottom of the page */}
   177|           <div style={{flex: 1}} />
   178|         </Box>
   179|         <Box border="left-and-right" style={{flex: 0.5, minWidth: 0}} flex={{direction: 'column'}}>
   180|           <>
   181|             <Box padding={{vertical: 16, horizontal: 24}} border="bottom">
   182|               <Subheading>Required resources</Subheading>
   183|             </Box>
   184|             <Box padding={{vertical: 16, horizontal: 24}} border="bottom">
   185|               {[...assetNode.requiredResources]
   186|                 .sort((a, b) => COMMON_COLLATOR.compare(a.resourceKey, b.resourceKey))
   187|                 .map((resource) => (
   188|                   <ResourceContainer key={resource.resourceKey}>
   189|                     <Icon name="resource" color={colorAccentGray()} />
   190|                     {repoAddress ? (
   191|                       <Link
   192|                         to={workspacePathFromAddress(
   193|                           repoAddress,
   194|                           `/resources/${resource.resourceKey}`,
   195|                         )}
   196|                       >
   197|                         <ResourceHeader>{resource.resourceKey}</ResourceHeader>
   198|                       </Link>
   199|                     ) : (
   200|                       <ResourceHeader>{resource.resourceKey}</ResourceHeader>
   201|                     )}
   202|                   </ResourceContainer>
   203|                 ))}
   204|               {assetNode.requiredResources.length === 0 && (
   205|                 <Body>
   206|                   No required resources to display
   207|                   <Box padding={{top: 4}}>
   208|                     <a href="https://docs.dagster.io/concepts/resources#using-software-defined-assets">
   209|                       View documentation


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetNodeLineage.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-30 ---
     1| import {
     2|   Box,
     3|   Button,
     4|   ButtonGroup,
     5|   Icon,
     6|   JoinedButtons,
     7|   TextInput,
     8|   colorBackgroundLight,
     9|   colorBorderDefault,
    10|   colorTextLight,
    11| } from '@dagster-io/ui-components';
    12| import * as React from 'react';
    13| import styled from 'styled-components';
    14| import {GraphData} from '../asset-graph/Utils';
    15| import {AssetGraphQueryItem, calculateGraphDistances} from '../asset-graph/useAssetGraphData';
    16| import {AssetKeyInput} from '../graphql/types';
    17| import {AssetNodeLineageGraph} from './AssetNodeLineageGraph';
    18| import {LaunchAssetExecutionButton} from './LaunchAssetExecutionButton';
    19| import {AssetLineageScope, AssetViewParams} from './types';
    20| export const AssetNodeLineage = ({
    21|   params,
    22|   setParams,
    23|   assetKey,
    24|   assetGraphData,
    25|   graphQueryItems,
    26|   requestedDepth,
    27| }: {
    28|   params: AssetViewParams;
    29|   setParams: (params: AssetViewParams) => void;
    30|   assetKey: AssetKeyInput;

# --- HUNK 2: Lines 73-115 ---
    73|             intent="none"
    74|             scope={{all: Object.values(assetGraphData.nodes).map((n) => n.definition)}}
    75|             showChangedAndMissingOption
    76|           />
    77|         ) : (
    78|           <Button icon={<Icon name="materialization" />} disabled>
    79|             Materialize all
    80|           </Button>
    81|         )}
    82|       </Box>
    83|       {currentDepth < maxDepth && (
    84|         <DepthHidesAssetsNotice>
    85|           Not all upstream/downstream assets shown. Increase the depth to show more.
    86|         </DepthHidesAssetsNotice>
    87|       )}
    88|       <AssetNodeLineageGraph assetKey={assetKey} assetGraphData={assetGraphData} params={params} />
    89|     </Box>
    90|   );
    91| };
    92| const DepthHidesAssetsNotice = styled.div`
    93|   background: ${colorBackgroundLight()};
    94|   border-radius: 8px;
    95|   color: ${colorTextLight()};
    96|   align-items: center;
    97|   display: flex;
    98|   padding: 4px 8px;
    99|   gap: 4px;
   100|   position: absolute;
   101|   right: 12px;
   102|   top: 70px;
   103|   z-index: 2;
   104| `;
   105| const LineageDepthControl = ({
   106|   value,
   107|   max,
   108|   onChange,
   109| }: {
   110|   value: number;
   111|   max: number;
   112|   onChange: (v: number) => void;
   113| }) => {
   114|   const [text, setText] = React.useState(`${value}`);
   115|   React.useEffect(() => {

# --- HUNK 3: Lines 124-163 ---
   124|       Graph depth
   125|       <JoinedButtons>
   126|         <Button
   127|           disabled={value <= 1}
   128|           onClick={() => onChange(value - 1)}
   129|           icon={<Icon name="subtract" />}
   130|         />
   131|         <TextInput
   132|           min={1}
   133|           max={max}
   134|           disabled={max <= 1}
   135|           inputMode="numeric"
   136|           style={{
   137|             width: 40,
   138|             marginLeft: -1,
   139|             textAlign: 'center',
   140|             height: 32,
   141|             padding: 6,
   142|             borderRadius: 0,
   143|             boxShadow: 'none',
   144|             border: `1px solid ${colorBorderDefault()}`,
   145|           }}
   146|           key={value}
   147|           value={text}
   148|           onChange={(e) => setText(e.target.value)}
   149|           onKeyDown={(e) => (e.key === 'Enter' || e.key === 'Return' ? commitText() : undefined)}
   150|           onBlur={() => commitText()}
   151|         />
   152|         <Button
   153|           disabled={value >= max}
   154|           onClick={() => onChange(value + 1)}
   155|           icon={<Icon name="add" />}
   156|         />
   157|         <Button disabled={value >= max} onClick={() => onChange(max)}>
   158|           All
   159|         </Button>
   160|       </JoinedButtons>
   161|     </Box>
   162|   );
   163| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetNodeLineageGraph.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-60 ---
     1| import {Box, Spinner} from '@dagster-io/ui-components';
     2| import React from 'react';
     3| import {useHistory} from 'react-router-dom';
     4| import styled from 'styled-components';
     5| import {useFeatureFlags} from '../app/Flags';
     6| import {AssetEdges} from '../asset-graph/AssetEdges';
     7| import {MINIMAL_SCALE} from '../asset-graph/AssetGraphExplorer';
     8| import {AssetGroupNode} from '../asset-graph/AssetGroupNode';
     9| import {AssetNodeMinimal, AssetNode, AssetNodeContextMenuWrapper} from '../asset-graph/AssetNode';
    10| import {ExpandedGroupNode} from '../asset-graph/ExpandedGroupNode';
    11| import {AssetNodeLink} from '../asset-graph/ForeignNode';
    12| import {GraphData, GraphNode, groupIdForNode, toGraphId} from '../asset-graph/Utils';
    13| import {DEFAULT_MAX_ZOOM, SVGViewport} from '../graph/SVGViewport';
    14| import {useAssetLayout} from '../graph/asyncGraphLayout';
    15| import {isNodeOffscreen} from '../graph/common';
    16| import {AssetKeyInput} from '../graphql/types';
    17| import {getJSONForKey} from '../hooks/useStateWithStorage';
    18| import {assetDetailsPathForKey} from './assetDetailsPathForKey';
    19| import {AssetKey, AssetViewParams} from './types';
    20| const LINEAGE_GRAPH_ZOOM_LEVEL = 'lineageGraphZoomLevel';
    21| export const AssetNodeLineageGraph = ({
    22|   assetKey,
    23|   assetGraphData,
    24|   params,
    25| }: {
    26|   assetKey: AssetKeyInput;
    27|   assetGraphData: GraphData;
    28|   params: AssetViewParams;
    29| }) => {
    30|   const {flagDAGSidebar} = useFeatureFlags();
    31|   const assetGraphId = toGraphId(assetKey);
    32|   const {allGroups, groupedAssets} = React.useMemo(() => {
    33|     const groupedAssets: Record<string, GraphNode[]> = {};
    34|     Object.values(assetGraphData.nodes).forEach((node) => {
    35|       const groupId = groupIdForNode(node);
    36|       groupedAssets[groupId] = groupedAssets[groupId] || [];
    37|       groupedAssets[groupId]!.push(node);
    38|     });
    39|     return {allGroups: Object.keys(groupedAssets), groupedAssets};
    40|   }, [assetGraphData]);
    41|   const [highlighted, setHighlighted] = React.useState<string | null>(null);
    42|   const {layout, loading} = useAssetLayout(assetGraphData, allGroups);
    43|   const viewportEl = React.useRef<SVGViewport>();
    44|   const history = useHistory();
    45|   const onClickAsset = (key: AssetKey) => {
    46|     history.push(assetDetailsPathForKey(key, {...params, lineageScope: 'neighbors'}));
    47|   };
    48|   React.useEffect(() => {
    49|     if (viewportEl.current && layout) {
    50|       const lastZoomLevel = Number(getJSONForKey(LINEAGE_GRAPH_ZOOM_LEVEL));
    51|       viewportEl.current.autocenter(false, lastZoomLevel);
    52|       viewportEl.current.focus();
    53|     }
    54|   }, [viewportEl, layout, assetGraphId]);
    55|   if (!layout || loading) {
    56|     return (
    57|       <Box style={{flex: 1}} flex={{alignItems: 'center', justifyContent: 'center'}}>
    58|         <Spinner purpose="page" />
    59|       </Box>
    60|     );

# --- HUNK 2: Lines 65-152 ---
    65|       interactor={SVGViewport.Interactors.PanAndZoom}
    66|       defaultZoom="zoom-to-fit"
    67|       graphWidth={layout.width}
    68|       graphHeight={layout.height}
    69|       onDoubleClick={(e) => {
    70|         viewportEl.current?.autocenter(true);
    71|         e.stopPropagation();
    72|       }}
    73|       maxZoom={DEFAULT_MAX_ZOOM}
    74|       maxAutocenterZoom={DEFAULT_MAX_ZOOM}
    75|     >
    76|       {({scale}, viewportRect) => (
    77|         <SVGContainer width={layout.width} height={layout.height}>
    78|           {viewportEl.current && <SVGSaveZoomLevel scale={scale} />}
    79|           {Object.values(layout.groups)
    80|             .filter((node) => !isNodeOffscreen(node.bounds, viewportRect))
    81|             .sort((a, b) => a.id.length - b.id.length)
    82|             .map((group) => (
    83|               <foreignObject {...group.bounds} key={group.id}>
    84|                 {flagDAGSidebar ? (
    85|                   <ExpandedGroupNode
    86|                     group={{
    87|                       ...group,
    88|                       assets: groupedAssets[group.id]!,
    89|                     }}
    90|                     minimal={scale < MINIMAL_SCALE}
    91|                   />
    92|                 ) : (
    93|                   <AssetGroupNode group={group} scale={scale} />
    94|                 )}
    95|               </foreignObject>
    96|             ))}
    97|           <AssetEdges
    98|             selected={null}
    99|             highlighted={highlighted}
   100|             edges={layout.edges}
   101|             viewportRect={viewportRect}
   102|           />
   103|           {Object.values(layout.nodes)
   104|             .filter((node) => !isNodeOffscreen(node.bounds, viewportRect))
   105|             .map(({id, bounds}) => {
   106|               const graphNode = assetGraphData.nodes[id];
   107|               const path = JSON.parse(id);
   108|               const contextMenuProps = {
   109|                 graphData: assetGraphData,
   110|                 node: graphNode!,
   111|               };
   112|               return (
   113|                 <foreignObject
   114|                   {...bounds}
   115|                   key={id}
   116|                   style={{overflow: 'visible'}}
   117|                   onMouseEnter={() => setHighlighted(id)}
   118|                   onMouseLeave={() => setHighlighted(null)}
   119|                   onClick={() => onClickAsset({path})}
   120|                   onDoubleClick={(e) => {
   121|                     viewportEl.current?.zoomToSVGBox(bounds, true, 1.2);
   122|                     e.stopPropagation();
   123|                   }}
   124|                 >
   125|                   {!graphNode ? (
   126|                     <AssetNodeLink assetKey={{path}} />
   127|                   ) : scale < MINIMAL_SCALE ? (
   128|                     <AssetNodeContextMenuWrapper {...contextMenuProps}>
   129|                       <AssetNodeMinimal
   130|                         definition={graphNode.definition}
   131|                         selected={graphNode.id === assetGraphId}
   132|                         height={bounds.height}
   133|                       />
   134|                     </AssetNodeContextMenuWrapper>
   135|                   ) : (
   136|                     <AssetNodeContextMenuWrapper {...contextMenuProps}>
   137|                       <AssetNode
   138|                         definition={graphNode.definition}
   139|                         selected={graphNode.id === assetGraphId}
   140|                       />
   141|                     </AssetNodeContextMenuWrapper>
   142|                   )}
   143|                 </foreignObject>
   144|               );
   145|             })}
   146|         </SVGContainer>
   147|       )}
   148|     </SVGViewport>
   149|   );
   150| };
   151| const SVGSaveZoomLevel = ({scale}: {scale: number}) => {
   152|   React.useEffect(() => {


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetNodePartitionCounts.tsx
# Total hunks: 4
# ====================================================================
# --- HUNK 1: Lines 1-132 ---
     1| import {
     2|   Icon,
     3|   Box,
     4|   Tooltip,
     5|   IconName,
     6|   colorBackgroundRed,
     7|   colorTextRed,
     8|   colorAccentRed,
     9|   colorBackgroundGreen,
    10|   colorTextGreen,
    11|   colorAccentGreen,
    12|   colorAccentBlue,
    13|   colorAccentGray,
    14|   colorBackgroundBlue,
    15|   colorBackgroundGray,
    16|   colorTextBlue,
    17|   colorTextLight,
    18|   colorTextDefault,
    19|   colorTextLighter,
    20| } from '@dagster-io/ui-components';
    21| import React from 'react';
    22| import styled from 'styled-components';
    23| import {LiveDataForNode} from '../asset-graph/Utils';
    24| import {AssetNodeFragment} from '../asset-graph/types/AssetNode.types';
    25| import {AssetPartitionStatus} from '../assets/AssetPartitionStatus';
    26| export const partitionCountString = (count: number | undefined, adjective = '') =>
    27|   `${count === undefined ? '-' : count.toLocaleString()} ${adjective}${adjective ? ' ' : ''}${
    28|     count === 1 ? 'partition' : 'partitions'
    29|   }`;
    30| const countMissing = (partitionStats: LiveDataForNode['partitionStats'] | null | undefined) =>
    31|   partitionStats
    32|     ? partitionStats.numPartitions -
    33|       partitionStats.numFailed -
    34|       partitionStats.numMaterializing -
    35|       partitionStats.numMaterialized
    36|     : undefined;
    37| export const StyleForAssetPartitionStatus: Record<
    38|   AssetPartitionStatus,
    39|   {
    40|     background: string;
    41|     foreground: string;
    42|     border: string;
    43|     icon: IconName;
    44|     adjective: string;
    45|   }
    46| > = {
    47|   [AssetPartitionStatus.FAILED]: {
    48|     background: colorBackgroundRed(),
    49|     foreground: colorTextRed(),
    50|     border: colorAccentRed(),
    51|     icon: 'partition_failure',
    52|     adjective: 'failed',
    53|   },
    54|   [AssetPartitionStatus.MATERIALIZED]: {
    55|     background: colorBackgroundGreen(),
    56|     foreground: colorTextGreen(),
    57|     border: colorAccentGreen(),
    58|     icon: 'partition_success',
    59|     adjective: 'materialized',
    60|   },
    61|   [AssetPartitionStatus.MATERIALIZING]: {
    62|     background: colorBackgroundBlue(),
    63|     foreground: colorTextBlue(),
    64|     border: colorAccentBlue(),
    65|     icon: 'partition_success',
    66|     adjective: 'materializing',
    67|   },
    68|   [AssetPartitionStatus.MISSING]: {
    69|     background: colorBackgroundGray(),
    70|     foreground: colorTextLight(),
    71|     border: colorAccentGray(),
    72|     icon: 'partition_missing',
    73|     adjective: 'missing',
    74|   },
    75| };
    76| export const PartitionCountTags = (props: {
    77|   definition: AssetNodeFragment;
    78|   liveData: LiveDataForNode | undefined;
    79| }) => {
    80|   const data = props.liveData?.partitionStats;
    81|   return (
    82|     <Box style={{display: 'grid', gridTemplateColumns: '1fr 1fr 1fr', gap: 2}}>
    83|       <PartitionCountTag
    84|         status={AssetPartitionStatus.MATERIALIZED}
    85|         value={data?.numMaterialized}
    86|         total={data?.numPartitions}
    87|       />
    88|       <PartitionCountTag
    89|         status={AssetPartitionStatus.MISSING}
    90|         value={countMissing(data)}
    91|         total={data?.numPartitions}
    92|       />
    93|       <PartitionCountTag
    94|         status={AssetPartitionStatus.FAILED}
    95|         value={data?.numFailed}
    96|         total={data?.numPartitions}
    97|       />
    98|     </Box>
    99|   );
   100| };
   101| const PartitionCountTag = ({
   102|   status,
   103|   value,
   104|   total,
   105| }: {
   106|   status: AssetPartitionStatus;
   107|   value: number | undefined;
   108|   total: number | undefined;
   109| }) => {
   110|   const style = StyleForAssetPartitionStatus[status];
   111|   const foreground = value ? style.foreground : colorTextLight();
   112|   const background = value ? style.background : colorBackgroundGray();
   113|   return (
   114|     <Tooltip
   115|       display="block"
   116|       position="top"
   117|       canShow={value !== undefined}
   118|       content={partitionCountString(value, style.adjective)}
   119|     >
   120|       <PartitionCountContainer style={{color: foreground, background}}>
   121|         <Icon name={style.icon} color={foreground} size={12} />
   122|         {value === undefined ? '' : value === total ? 'All' : value > 1000 ? '999+' : value}
   123|       </PartitionCountContainer>
   124|     </Tooltip>
   125|   );
   126| };
   127| export const PartitionCountLabels = ({
   128|   partitionStats,
   129| }: {
   130|   partitionStats: LiveDataForNode['partitionStats'] | null | undefined;
   131| }) => {
   132|   return (

# --- HUNK 2: Lines 156-195 ---
   156| };
   157| const PartitionCountLabel = ({
   158|   status,
   159|   value,
   160|   total,
   161| }: {
   162|   status: AssetPartitionStatus;
   163|   value: number | undefined;
   164|   total: number | undefined;
   165| }) => {
   166|   const style = StyleForAssetPartitionStatus[status];
   167|   return (
   168|     <Tooltip
   169|       display="block"
   170|       position="top"
   171|       canShow={value !== undefined}
   172|       content={partitionCountString(value, style.adjective)}
   173|     >
   174|       <Box
   175|         flex={{gap: 4, alignItems: 'center'}}
   176|         style={{
   177|           color: value === undefined || value === 0 ? colorTextLighter() : colorTextDefault(),
   178|         }}
   179|       >
   180|         <Icon name={style.icon} color={value ? style.border : colorTextLighter()} size={12} />
   181|         {value === undefined ? '' : value === total ? 'All' : value.toLocaleString()}
   182|       </Box>
   183|     </Tooltip>
   184|   );
   185| };
   186| const PartitionCountContainer = styled.div`
   187|   width: 100%;
   188|   border-radius: 6px;
   189|   font-size: 12px;
   190|   gap: 4px;
   191|   display: flex;
   192|   align-items: center;
   193|   justify-content: center;
   194|   padding: 4px;
   195| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetPageHeader.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-33 ---
     1| import {BreadcrumbProps, Breadcrumbs} from '@blueprintjs/core';
     2| import {
     3|   Box,
     4|   PageHeader,
     5|   Heading,
     6|   Icon,
     7|   Tooltip,
     8|   IconWrapper,
     9|   colorLinkDefault,
    10|   colorTextLight,
    11|   colorAccentGray,
    12|   colorAccentGrayHover,
    13|   colorTextLighter,
    14| } from '@dagster-io/ui-components';
    15| import React from 'react';
    16| import {Link} from 'react-router-dom';
    17| import styled from 'styled-components';
    18| import {showSharedToaster} from '../app/DomUtils';
    19| import {useCopyToClipboard} from '../app/browser';
    20| type Props = {assetKey: {path: string[]}} & Partial<React.ComponentProps<typeof PageHeader>>;
    21| export const AssetPageHeader = ({assetKey, ...extra}: Props) => {
    22|   const copy = useCopyToClipboard();
    23|   const copyableString = assetKey.path.join('/');
    24|   const [didCopy, setDidCopy] = React.useState(false);
    25|   const iconTimeout = React.useRef<NodeJS.Timeout>();
    26|   const performCopy = React.useCallback(async () => {
    27|     if (iconTimeout.current) {
    28|       clearTimeout(iconTimeout.current);
    29|     }
    30|     copy(copyableString);
    31|     setDidCopy(true);
    32|     await showSharedToaster({
    33|       icon: 'done',

# --- HUNK 2: Lines 50-121 ---
    50|   return (
    51|     <PageHeader
    52|       title={
    53|         <Box
    54|           flex={{alignItems: 'center', gap: 4}}
    55|           style={{maxWidth: '600px', overflow: 'hidden', marginBottom: 4}}
    56|         >
    57|           <BreadcrumbsWithSlashes
    58|             items={breadcrumbs}
    59|             currentBreadcrumbRenderer={({text}) => <Heading>{text}</Heading>}
    60|             breadcrumbRenderer={({text, href}) => (
    61|               <Heading>
    62|                 <BreadcrumbLink to={href || '#'}>{text}</BreadcrumbLink>
    63|               </Heading>
    64|             )}
    65|           />
    66|           <Tooltip placement="bottom" content="Copy asset key">
    67|             <CopyButton onClick={performCopy}>
    68|               <Icon
    69|                 name={didCopy ? 'copy_to_clipboard_done' : 'copy_to_clipboard'}
    70|                 color={colorAccentGray()}
    71|               />
    72|             </CopyButton>
    73|           </Tooltip>
    74|         </Box>
    75|       }
    76|       {...extra}
    77|     />
    78|   );
    79| };
    80| const CopyButton = styled.button`
    81|   border: none;
    82|   background: transparent;
    83|   cursor: pointer;
    84|   padding: 3px;
    85|   margin-top: 2px;
    86|   :focus {
    87|     outline: none;
    88|   }
    89|   ${IconWrapper} {
    90|     transition: background-color 100ms linear;
    91|   }
    92|   :hover ${IconWrapper} {
    93|     background-color: ${colorAccentGrayHover()};
    94|   }
    95| `;
    96| export const AssetGlobalLineageLink = () => (
    97|   <Link to="/asset-groups">
    98|     <Box flex={{gap: 4}}>
    99|       <Icon color={colorLinkDefault()} name="schema" />
   100|       View global asset lineage
   101|     </Box>
   102|   </Link>
   103| );
   104| const BreadcrumbsWithSlashes = styled(Breadcrumbs)`
   105|   & li:not(:first-child)::after {
   106|     background: none;
   107|     font-size: 20px;
   108|     font-weight: bold;
   109|     color: ${colorTextLighter()};
   110|     content: '/';
   111|     width: 8px;
   112|     line-height: 16px;
   113|   }
   114| `;
   115| const BreadcrumbLink = styled(Link)`
   116|   color: ${colorTextLight()};
   117|   :hover,
   118|   :active {
   119|     color: ${colorTextLight()};
   120|   }
   121| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetPartitionDetail.tsx
# Total hunks: 4
# ====================================================================
# --- HUNK 1: Lines 1-37 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {
     3|   Alert,
     4|   Box,
     5|   Group,
     6|   Heading,
     7|   Icon,
     8|   MiddleTruncate,
     9|   Mono,
    10|   Spinner,
    11|   Subheading,
    12|   Tag,
    13|   colorAccentGray,
    14|   colorBackgroundLight,
    15|   colorBorderDefault,
    16|   colorTextDefault,
    17|   colorTextLight,
    18| } from '@dagster-io/ui-components';
    19| import React from 'react';
    20| import {Link} from 'react-router-dom';
    21| import {Timestamp} from '../app/time/Timestamp';
    22| import {LiveDataForNode, isHiddenAssetGroupJob, stepKeyForAsset} from '../asset-graph/Utils';
    23| import {RunStatus, StaleStatus} from '../graphql/types';
    24| import {PipelineReference} from '../pipelines/PipelineReference';
    25| import {RunStatusWithStats} from '../runs/RunStatusDots';
    26| import {titleForRun, linkToRunEvent} from '../runs/RunUtils';
    27| import {isThisThingAJob, useRepository} from '../workspace/WorkspaceContext';
    28| import {buildRepoAddress} from '../workspace/buildRepoAddress';
    29| import {AllIndividualEventsButton} from './AllIndividualEventsButton';
    30| import {AssetEventMetadataEntriesTable} from './AssetEventMetadataEntriesTable';
    31| import {AssetEventSystemTags} from './AssetEventSystemTags';
    32| import {AssetMaterializationUpstreamData} from './AssetMaterializationUpstreamData';
    33| import {FailedRunSinceMaterializationBanner} from './FailedRunSinceMaterializationBanner';
    34| import {StaleReasonsTags} from './Stale';
    35| import {AssetEventGroup} from './groupByPartition';
    36| import {AssetKey} from './types';
    37| import {

# --- HUNK 2: Lines 223-263 ---
   223|           >
   224|             <Heading>
   225|               <MiddleTruncate text={partition} />
   226|             </Heading>
   227|             {hasLoadingState ? (
   228|               <Spinner purpose="body-text" />
   229|             ) : latest ? (
   230|               <Tag intent="success">Materialized</Tag>
   231|             ) : undefined}
   232|             {hasStaleLoadingState ? (
   233|               <Spinner purpose="body-text" />
   234|             ) : staleCauses && staleStatus ? (
   235|               <StaleReasonsTags
   236|                 liveData={{staleCauses, staleStatus}}
   237|                 assetKey={assetKey}
   238|                 include="all"
   239|               />
   240|             ) : undefined}
   241|           </div>
   242|         ) : (
   243|           <Heading color={colorTextLight()}>No partition selected</Heading>
   244|         )}
   245|         <div style={{flex: 1}} />
   246|       </Box>
   247|       {currentRun?.status === RunStatus.FAILURE && (
   248|         <FailedRunSinceMaterializationBanner
   249|           run={currentRun}
   250|           stepKey={stepKey}
   251|           padding={{horizontal: 0, vertical: 16}}
   252|           border="bottom"
   253|         />
   254|       )}
   255|       {currentRun && currentRunStatusMessage && (
   256|         <Alert
   257|           intent="info"
   258|           icon={<Spinner purpose="body-text" />}
   259|           title={
   260|             <div style={{fontWeight: 400}}>
   261|               Run <Link to={`/runs/${currentRun.id}`}>{titleForRun(currentRun)}</Link>{' '}
   262|               {currentRunStatusMessage}
   263|             </div>

# --- HUNK 3: Lines 304-344 ---
   304|               </Link>
   305|             </Box>
   306|           ) : (
   307|             'None'
   308|           )}
   309|         </Box>
   310|         <Box flex={{gap: 4, direction: 'column'}}>
   311|           <Subheading>Job</Subheading>
   312|           {latest && latestEventRun && !isHiddenAssetGroupJob(latestEventRun.pipelineName) ? (
   313|             <Box>
   314|               <Box>
   315|                 <PipelineReference
   316|                   showIcon
   317|                   pipelineName={latestEventRun.pipelineName}
   318|                   pipelineHrefContext={repoAddress || 'repo-unknown'}
   319|                   snapshotId={latestEventRun.pipelineSnapshotId}
   320|                   isJob={isThisThingAJob(repo, latestEventRun.pipelineName)}
   321|                 />
   322|               </Box>
   323|               <Group direction="row" spacing={8} alignItems="center">
   324|                 <Icon name="linear_scale" color={colorAccentGray()} />
   325|                 <Link to={linkToRunEvent(latestEventRun, latest)}>{latest.stepKey}</Link>
   326|               </Group>
   327|             </Box>
   328|           ) : (
   329|             'None'
   330|           )}
   331|         </Box>
   332|         <Box style={{textAlign: 'right'}}>
   333|           <AllIndividualEventsButton
   334|             hasPartitions
   335|             hasLineage={hasLineage}
   336|             events={all}
   337|             disabled={all.length === 0}
   338|           >
   339|             {`View all historical events (${all.length})`}
   340|           </AllIndividualEventsButton>
   341|         </Box>
   342|       </Box>
   343|       <Box padding={{top: 24}} flex={{direction: 'column', gap: 8}}>
   344|         <Subheading>Metadata</Subheading>

# --- HUNK 4: Lines 348-373 ---
   348|         <Subheading>Source data</Subheading>
   349|         <AssetMaterializationUpstreamData timestamp={latest?.timestamp} assetKey={assetKey} />
   350|       </Box>
   351|       <Box padding={{top: 24}} flex={{direction: 'column', gap: 8}}>
   352|         <Subheading>System tags</Subheading>
   353|         <AssetEventSystemTags event={latest} collapsible />
   354|       </Box>
   355|     </Box>
   356|   );
   357| };
   358| export const AssetPartitionDetailEmpty = ({partitionKey}: {partitionKey?: string}) => (
   359|   <AssetPartitionDetail
   360|     assetKey={{path: ['']}}
   361|     group={{all: [], latest: null, timestamp: '0', partition: partitionKey}}
   362|     latestRunForPartition={null}
   363|     hasLineage={false}
   364|     hasLoadingState
   365|   />
   366| );
   367| const PartitionHeadingTooltipStyle = JSON.stringify({
   368|   background: colorBackgroundLight(),
   369|   border: `1px solid ${colorBorderDefault()}`,
   370|   fontSize: '18px',
   371|   fontWeight: '600',
   372|   color: colorTextDefault(),
   373| });


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetPartitionList.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-27 ---
     1| import {
     2|   Box,
     3|   MiddleTruncate,
     4|   colorBackgroundLight,
     5|   colorBorderDefault,
     6|   colorTextDefault,
     7| } from '@dagster-io/ui-components';
     8| import {useVirtualizer} from '@tanstack/react-virtual';
     9| import * as React from 'react';
    10| import {Inner} from '../ui/VirtualizedTable';
    11| import {AssetListRow, AssetListContainer} from './AssetEventList';
    12| import {AssetPartitionStatus, assetPartitionStatusesToStyle} from './AssetPartitionStatus';
    13| export interface AssetPartitionListProps {
    14|   partitions: string[];
    15|   statusForPartition: (dimensionKey: string) => AssetPartitionStatus[];
    16|   focusedDimensionKey?: string;
    17|   setFocusedDimensionKey?: (dimensionKey: string | undefined) => void;
    18| }
    19| export const AssetPartitionList = ({
    20|   focusedDimensionKey,
    21|   setFocusedDimensionKey,
    22|   statusForPartition,
    23|   partitions,
    24| }: AssetPartitionListProps) => {
    25|   const parentRef = React.useRef<HTMLDivElement | null>(null);
    26|   const rowVirtualizer = useVirtualizer({
    27|     count: partitions.length,

# --- HUNK 2: Lines 110-136 ---
   110|               </Box>
   111|             </AssetListRow>
   112|           );
   113|         })}
   114|       </Inner>
   115|     </AssetListContainer>
   116|   );
   117| };
   118| export const AssetPartitionStatusDot = ({status}: {status: AssetPartitionStatus[]}) => (
   119|   <div
   120|     style={{
   121|       width: 10,
   122|       height: 10,
   123|       borderRadius: '100%',
   124|       flexShrink: 0,
   125|       ...assetPartitionStatusesToStyle(status),
   126|     }}
   127|   />
   128| );
   129| const PartitionTooltipStyle = JSON.stringify({
   130|   background: colorBackgroundLight(),
   131|   border: `1px solid ${colorBorderDefault()}`,
   132|   color: colorTextDefault(),
   133|   fontSize: '14px',
   134|   top: 0,
   135|   left: 0,
   136| });


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetPartitionStatus.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-63 ---
     1| import {
     2|   colorAccentBlue,
     3|   colorAccentGray,
     4|   colorAccentGreen,
     5|   colorAccentRed,
     6|   colorBackgroundLight,
     7| } from '@dagster-io/ui-components';
     8| import {CSSProperties} from 'react';
     9| import {assertUnreachable} from '../app/Util';
    10| export enum AssetPartitionStatus {
    11|   FAILED = 'FAILED',
    12|   MATERIALIZED = 'MATERIALIZED',
    13|   MATERIALIZING = 'MATERIALIZING',
    14|   MISSING = 'MISSING',
    15| }
    16| export const emptyAssetPartitionStatusCounts = () => ({
    17|   [AssetPartitionStatus.MISSING]: 0,
    18|   [AssetPartitionStatus.MATERIALIZED]: 0,
    19|   [AssetPartitionStatus.MATERIALIZING]: 0,
    20|   [AssetPartitionStatus.FAILED]: 0,
    21| });
    22| export const assetPartitionStatusToText = (status: AssetPartitionStatus) => {
    23|   switch (status) {
    24|     case AssetPartitionStatus.MATERIALIZED:
    25|       return 'Materialized';
    26|     case AssetPartitionStatus.MATERIALIZING:
    27|       return 'Materializing';
    28|     case AssetPartitionStatus.FAILED:
    29|       return 'Failed';
    30|     case AssetPartitionStatus.MISSING:
    31|       return 'Missing';
    32|     default:
    33|       assertUnreachable(status);
    34|   }
    35| };
    36| const assetPartitionStatusToColor = (status: AssetPartitionStatus) => {
    37|   switch (status) {
    38|     case AssetPartitionStatus.MATERIALIZED:
    39|       return colorAccentGreen();
    40|     case AssetPartitionStatus.MATERIALIZING:
    41|       return colorAccentBlue();
    42|     case AssetPartitionStatus.FAILED:
    43|       return colorAccentRed();
    44|     case AssetPartitionStatus.MISSING:
    45|       return colorAccentGray();
    46|     default:
    47|       assertUnreachable(status);
    48|   }
    49| };
    50| export const assetPartitionStatusesToStyle = (status: AssetPartitionStatus[]): CSSProperties => {
    51|   if (status.length === 0) {
    52|     return {background: colorBackgroundLight()};
    53|   }
    54|   if (status.length === 1) {
    55|     return {background: assetPartitionStatusToColor(status[0]!)};
    56|   }
    57|   const a = assetPartitionStatusToColor(status[0]!);
    58|   const b = assetPartitionStatusToColor(status[1]!);
    59|   return {
    60|     backgroundImage: `linear-gradient(135deg, ${a} 25%, ${b} 25%, ${b} 50%, ${a} 50%, ${a} 75%, ${b} 75%, ${b} 100%)`,
    61|     backgroundSize: '8.49px 8.49px',
    62|   };
    63| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetPartitions.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-32 ---
     1| import {
     2|   Box,
     3|   Icon,
     4|   Menu,
     5|   MenuItem,
     6|   Popover,
     7|   Spinner,
     8|   Subheading,
     9|   Tooltip,
    10|   colorAccentGray,
    11|   colorBackgroundDefault,
    12|   colorBackgroundLight,
    13| } from '@dagster-io/ui-components';
    14| import isEqual from 'lodash/isEqual';
    15| import uniq from 'lodash/uniq';
    16| import * as React from 'react';
    17| import {LiveDataForNode} from '../asset-graph/Utils';
    18| import {PartitionDefinitionType, RepositorySelector} from '../graphql/types';
    19| import {useQueryPersistedState} from '../hooks/useQueryPersistedState';
    20| import {SortButton} from '../launchpad/ConfigEditorConfigPicker';
    21| import {DimensionRangeWizard} from '../partitions/DimensionRangeWizard';
    22| import {testId} from '../testing/testId';
    23| import {AssetPartitionDetailEmpty, AssetPartitionDetailLoader} from './AssetPartitionDetail';
    24| import {AssetPartitionList} from './AssetPartitionList';
    25| import {AssetPartitionStatus} from './AssetPartitionStatus';
    26| import {AssetPartitionStatusCheckboxes} from './AssetPartitionStatusCheckboxes';
    27| import {isTimeseriesDimension} from './MultipartitioningSupport';
    28| import {AssetViewParams, AssetKey} from './types';
    29| import {usePartitionDimensionSelections} from './usePartitionDimensionSelections';
    30| import {
    31|   usePartitionHealthData,
    32|   rangesClippedToSelection,

# --- HUNK 2: Lines 175-220 ---
   175|       >
   176|         <div data-testid={testId('partitions-selected')}>
   177|           {countsFiltered.toLocaleString()} Partitions Selected
   178|         </div>
   179|         <AssetPartitionStatusCheckboxes
   180|           counts={countsByStateInSelection}
   181|           allowed={DISPLAYED_STATUSES}
   182|           value={statusFilters}
   183|           onChange={setStatusFilters}
   184|         />
   185|       </Box>
   186|       <Box style={{flex: 1, minHeight: 0, outline: 'none'}} flex={{direction: 'row'}} tabIndex={-1}>
   187|         {selections.map((selection, idx) => {
   188|           const sortType = getSort(sortTypes, idx, selection.dimension.type);
   189|           return (
   190|             <Box
   191|               key={selection.dimension.name}
   192|               style={{display: 'flex', flex: 1, paddingRight: 1, minWidth: 200}}
   193|               flex={{direction: 'column'}}
   194|               border="right"
   195|               background={colorBackgroundLight()}
   196|               data-testid={testId(`partitions-${selection.dimension.name}`)}
   197|             >
   198|               <Box
   199|                 flex={{direction: 'row', justifyContent: 'space-between', alignItems: 'center'}}
   200|                 background={colorBackgroundDefault()}
   201|                 border="bottom"
   202|                 padding={{horizontal: 24, vertical: 8}}
   203|               >
   204|                 <div>
   205|                   {selection.dimension.name !== 'default' && (
   206|                     <Box flex={{gap: 8, alignItems: 'center'}}>
   207|                       <Icon name="partition" />
   208|                       <Subheading>{selection.dimension.name}</Subheading>
   209|                     </Box>
   210|                   )}
   211|                 </div>
   212|                 <Popover
   213|                   content={
   214|                     <Menu>
   215|                       <MenuItem
   216|                         text={
   217|                           <Tooltip content="The order in which partitions were created">
   218|                             <Box flex={{direction: 'row', alignItems: 'center', gap: 8}}>
   219|                               <span>Creation sort</span>
   220|                               <Icon name="info" />

# --- HUNK 3: Lines 262-302 ---
   262|                         }}
   263|                         data-testId={testId('sort-alphabetical')}
   264|                       />
   265|                       <MenuItem
   266|                         text="Reverse alphabetical sort"
   267|                         active={SortType.REVERSE_ALPHABETICAL === sortType}
   268|                         onClick={() => {
   269|                           setSortTypes((sorts) => {
   270|                             const copy = [...sorts];
   271|                             copy[idx] = SortType.REVERSE_ALPHABETICAL;
   272|                             return [...copy];
   273|                           });
   274|                         }}
   275|                         data-testId={testId('sort-reverse-alphabetical')}
   276|                       />
   277|                     </Menu>
   278|                   }
   279|                   position="bottom-left"
   280|                 >
   281|                   <SortButton style={{marginRight: '-16px'}} data-testid={`sort-${idx}`}>
   282|                     <Icon name="sort_by_alpha" color={colorAccentGray()} />
   283|                   </SortButton>
   284|                 </Popover>
   285|               </Box>
   286|               {!assetHealth ? (
   287|                 <Box flex={{alignItems: 'center', justifyContent: 'center'}} style={{flex: 1}}>
   288|                   <Spinner purpose="section" />
   289|                 </Box>
   290|               ) : (
   291|                 <AssetPartitionList
   292|                   partitions={dimensionKeysInSelection(idx)}
   293|                   statusForPartition={(dimensionKey) => {
   294|                     if (idx === 1 && focusedDimensionKeys[0]) {
   295|                       return [assetHealth.stateForKey([focusedDimensionKeys[0], dimensionKey])];
   296|                     }
   297|                     const dimensionKeyIdx = selection.dimension.partitionKeys.indexOf(dimensionKey);
   298|                     return partitionStatusAtIndex(
   299|                       rangesForEachDimension[idx]!,
   300|                       dimensionKeyIdx,
   301|                     ).filter((s) => statusFilters.includes(s));
   302|                   }}


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetSidebarActivitySummary.tsx
# Total hunks: 4
# ====================================================================
# --- HUNK 1: Lines 1-30 ---
     1| import {
     2|   Body,
     3|   Box,
     4|   Icon,
     5|   MiddleTruncate,
     6|   Spinner,
     7|   colorKeylineDefault,
     8|   colorLinkDefault,
     9|   colorTextLight,
    10| } from '@dagster-io/ui-components';
    11| import * as React from 'react';
    12| import {Link} from 'react-router-dom';
    13| import {LiveDataForNode} from '../asset-graph/Utils';
    14| import {SidebarAssetFragment} from '../asset-graph/types/SidebarAssetInfo.types';
    15| import {SidebarSection} from '../pipelines/SidebarComponents';
    16| import {AssetEventSystemTags} from './AssetEventSystemTags';
    17| import {AssetMaterializationGraphs} from './AssetMaterializationGraphs';
    18| import {
    19|   AutomaterializePolicyTag,
    20|   automaterializePolicyDescription,
    21| } from './AutomaterializePolicyTag';
    22| import {CurrentRunsBanner} from './CurrentRunsBanner';
    23| import {FailedRunSinceMaterializationBanner} from './FailedRunSinceMaterializationBanner';
    24| import {LatestMaterializationMetadata} from './LastMaterializationMetadata';
    25| import {OverdueTag, freshnessPolicyDescription} from './OverdueTag';
    26| import {AssetCheckStatusTag} from './asset-checks/AssetCheckStatusTag';
    27| import {ExecuteChecksButton} from './asset-checks/ExecuteChecksButton';
    28| import {assetDetailsPathForKey} from './assetDetailsPathForKey';
    29| import {useGroupedEvents} from './groupByPartition';
    30| import {isRunlessEvent} from './isRunlessEvent';

# --- HUNK 2: Lines 66-106 ---
    66|           <CurrentRunsBanner stepKey={stepKey} border="top" liveData={liveData} />
    67|         </>
    68|       )}
    69|       {asset.freshnessPolicy && (
    70|         <SidebarSection title="Freshness policy">
    71|           <Box margin={{horizontal: 24, vertical: 12}} flex={{gap: 12, alignItems: 'flex-start'}}>
    72|             <Body style={{flex: 1}}>{freshnessPolicyDescription(asset.freshnessPolicy)}</Body>
    73|             <OverdueTag policy={asset.freshnessPolicy} assetKey={asset.assetKey} />
    74|           </Box>
    75|         </SidebarSection>
    76|       )}
    77|       {asset.autoMaterializePolicy && (
    78|         <SidebarSection title="Auto-materialize policy">
    79|           <Box
    80|             padding={{horizontal: 24, vertical: 12}}
    81|             flex={{direction: 'row', gap: 4, alignItems: 'center'}}
    82|           >
    83|             <Link to={assetDetailsPathForKey(asset.assetKey, {view: 'auto-materialize-history'})}>
    84|               View auto-materialize history
    85|             </Link>
    86|             <Icon name="open_in_new" color={colorLinkDefault()} />
    87|           </Box>
    88|           <Box margin={{horizontal: 24}} flex={{gap: 12, alignItems: 'flex-start'}}>
    89|             <Body style={{flex: 1, marginBottom: 12}}>
    90|               {automaterializePolicyDescription(asset.autoMaterializePolicy)}
    91|             </Body>
    92|             <AutomaterializePolicyTag policy={asset.autoMaterializePolicy} />
    93|           </Box>
    94|         </SidebarSection>
    95|       )}
    96|       {asset.backfillPolicy && (
    97|         <SidebarSection title="Backfill policy">
    98|           <Box margin={{horizontal: 24, vertical: 12}} flex={{gap: 12, alignItems: 'flex-start'}}>
    99|             <Body style={{flex: 1}}>{asset.backfillPolicy.description}</Body>
   100|           </Box>
   101|         </SidebarSection>
   102|       )}
   103|       {loadedPartitionKeys.length > 1 ? null : (
   104|         <>
   105|           <SidebarSection
   106|             title={

# --- HUNK 3: Lines 109-216 ---
   109|                   ? 'Last reported materialization'
   110|                   : 'Materialization in last run'
   111|                 : 'Observation in last run'
   112|             }
   113|           >
   114|             {displayedEvent ? (
   115|               <div style={{margin: -1, maxWidth: '100%', overflowX: 'auto'}}>
   116|                 <LatestMaterializationMetadata
   117|                   assetKey={asset.assetKey}
   118|                   latest={displayedEvent}
   119|                   liveData={liveData}
   120|                 />
   121|               </div>
   122|             ) : loading ? (
   123|               <Box padding={{vertical: 20}}>
   124|                 <Spinner purpose="section" />
   125|               </Box>
   126|             ) : (
   127|               <Box
   128|                 margin={{horizontal: 24, vertical: 12}}
   129|                 style={{color: colorTextLight(), fontSize: '0.8rem'}}
   130|               >
   131|                 {!isSourceAsset ? `No materializations found` : `No observations found`}
   132|               </Box>
   133|             )}
   134|           </SidebarSection>
   135|           <SidebarSection
   136|             title={!isSourceAsset ? 'Materialization system tags' : 'Observation system tags'}
   137|             collapsedByDefault
   138|           >
   139|             {displayedEvent ? (
   140|               <div style={{margin: -1, maxWidth: '100%', overflowX: 'auto'}}>
   141|                 <AssetEventSystemTags event={displayedEvent} paddingLeft={24} />
   142|               </div>
   143|             ) : loading ? (
   144|               <Box padding={{vertical: 20}}>
   145|                 <Spinner purpose="section" />
   146|               </Box>
   147|             ) : (
   148|               <Box
   149|                 margin={{horizontal: 24, vertical: 12}}
   150|                 style={{color: colorTextLight(), fontSize: '0.8rem'}}
   151|               >
   152|                 {!isSourceAsset ? `No materializations found` : `No observations found`}
   153|               </Box>
   154|             )}
   155|           </SidebarSection>
   156|         </>
   157|       )}
   158|       <SidebarSection title="Metadata plots">
   159|         <AssetMaterializationGraphs
   160|           xAxis={xAxis}
   161|           asSidebarSection
   162|           groups={grouped}
   163|           columnCount={1}
   164|         />
   165|       </SidebarSection>
   166|       {asset.assetChecksOrError.__typename === 'AssetChecks' &&
   167|         asset.assetChecksOrError.checks.length > 0 && (
   168|           <SidebarSection title="Checks">
   169|             <Box padding={{horizontal: 24, vertical: 12}} flex={{gap: 12, alignItems: 'center'}}>
   170|               <ExecuteChecksButton assetNode={asset} checks={asset.assetChecksOrError.checks} />
   171|               <Link to={assetDetailsPathForKey(asset.assetKey, {view: 'checks'})}>
   172|                 View all check details
   173|               </Link>
   174|             </Box>
   175|             {asset.assetChecksOrError.checks.slice(0, 10).map((check) => {
   176|               const execution =
   177|                 liveData &&
   178|                 liveData.assetChecks?.find((c) => c.name === check.name)
   179|                   ?.executionForLatestMaterialization;
   180|               return (
   181|                 <Box
   182|                   key={check.name}
   183|                   style={{minHeight: 40}}
   184|                   border={{side: 'top', width: 1, color: colorKeylineDefault()}}
   185|                   padding={{vertical: 8, right: 12, left: 24}}
   186|                   flex={{
   187|                     gap: 8,
   188|                     direction: 'row',
   189|                     alignItems: 'center',
   190|                     justifyContent: 'space-between',
   191|                   }}
   192|                 >
   193|                   <MiddleTruncate text={`${check.name}`} />
   194|                   {execution ? (
   195|                     <AssetCheckStatusTag execution={execution} />
   196|                   ) : (
   197|                     <Spinner purpose="caption-text" />
   198|                   )}
   199|                 </Box>
   200|               );
   201|             })}
   202|             {asset.assetChecksOrError.checks.length > 10 && (
   203|               <Box
   204|                 padding={{vertical: 12, right: 12, left: 24}}
   205|                 border={{side: 'top', width: 1, color: colorKeylineDefault()}}
   206|               >
   207|                 <Link to={assetDetailsPathForKey(asset.assetKey, {view: 'checks'})}>
   208|                   View {asset.assetChecksOrError.checks.length - 10} more
   209|                 </Link>
   210|               </Box>
   211|             )}
   212|           </SidebarSection>
   213|         )}
   214|     </>
   215|   );
   216| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetTable.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-34 ---
     1| import {RefetchQueriesFunction} from '@apollo/client';
     2| import {
     3|   Box,
     4|   Button,
     5|   Icon,
     6|   MenuItem,
     7|   Menu,
     8|   Popover,
     9|   Tooltip,
    10|   Checkbox,
    11|   NonIdealState,
    12|   colorBackgroundDefault,
    13|   colorTextDisabled,
    14|   colorAccentRed,
    15| } from '@dagster-io/ui-components';
    16| import groupBy from 'lodash/groupBy';
    17| import * as React from 'react';
    18| import {useUnscopedPermissions} from '../app/Permissions';
    19| import {QueryRefreshCountdown, QueryRefreshState} from '../app/QueryRefresh';
    20| import {AssetGroupSelector, AssetKeyInput} from '../graphql/types';
    21| import {useSelectionReducer} from '../hooks/useSelectionReducer';
    22| import {testId} from '../testing/testId';
    23| import {VirtualizedAssetTable} from '../workspace/VirtualizedAssetTable';
    24| import {AssetWipeDialog} from './AssetWipeDialog';
    25| import {LaunchAssetExecutionButton} from './LaunchAssetExecutionButton';
    26| import {AssetTableFragment} from './types/AssetTableFragment.types';
    27| import {AssetViewType} from './useAssetView';
    28| type Asset = AssetTableFragment;
    29| interface Props {
    30|   view: AssetViewType;
    31|   assets: Asset[];
    32|   refreshState: QueryRefreshState;
    33|   actionBarComponents: React.ReactNode;
    34|   prefixPath: string[];

# --- HUNK 2: Lines 122-162 ---
   122|               if (e.target instanceof HTMLInputElement) {
   123|                 onToggleAll(checkedDisplayKeys.size !== displayKeys.length);
   124|               }
   125|             }}
   126|           />
   127|         }
   128|         prefixPath={prefixPath}
   129|         groups={groupedByDisplayKey}
   130|         checkedDisplayKeys={checkedDisplayKeys}
   131|         onToggleFactory={onToggleFactory}
   132|         showRepoColumn
   133|         view={view}
   134|         onWipe={(assetKeys: AssetKeyInput[]) => setToWipe(assetKeys)}
   135|       />
   136|     );
   137|   };
   138|   return (
   139|     <>
   140|       <Box flex={{direction: 'column'}} style={{height: '100%', overflow: 'hidden'}}>
   141|         <Box
   142|           background={colorBackgroundDefault()}
   143|           flex={{alignItems: 'center', gap: 12}}
   144|           padding={{vertical: 8, left: 24, right: 12}}
   145|           style={{position: 'sticky', top: 0, zIndex: 1}}
   146|         >
   147|           {actionBarComponents}
   148|           <div style={{flex: 1}} />
   149|           <QueryRefreshCountdown refreshState={refreshState} />
   150|           <Box flex={{alignItems: 'center', gap: 8}}>
   151|             {checkedAssets.some((c) => !c.definition) ? (
   152|               <Tooltip content="One or more selected assets are not software-defined and cannot be launched directly.">
   153|                 <Button
   154|                   intent="primary"
   155|                   data-testid={testId('materialize-button')}
   156|                   icon={<Icon name="materialization" />}
   157|                   disabled
   158|                 >
   159|                   {checkedAssets.length > 1
   160|                     ? `Materialize (${checkedAssets.length.toLocaleString()})`
   161|                     : 'Materialize'}
   162|                 </Button>

# --- HUNK 3: Lines 191-233 ---
   191| }
   192| const MoreActionsDropdown = React.memo((props: MoreActionsDropdownProps) => {
   193|   const {selected, clearSelection, requery} = props;
   194|   const [showBulkWipeDialog, setShowBulkWipeDialog] = React.useState<boolean>(false);
   195|   const {
   196|     permissions: {canWipeAssets},
   197|   } = useUnscopedPermissions();
   198|   if (!canWipeAssets) {
   199|     return null;
   200|   }
   201|   const disabled = selected.length === 0;
   202|   return (
   203|     <>
   204|       <Popover
   205|         position="bottom-right"
   206|         content={
   207|           <Menu>
   208|             <MenuItem
   209|               text="Wipe materializations"
   210|               onClick={() => setShowBulkWipeDialog(true)}
   211|               icon={
   212|                 <Icon name="delete" color={disabled ? colorTextDisabled() : colorAccentRed()} />
   213|               }
   214|               disabled={disabled}
   215|               intent="danger"
   216|             />
   217|           </Menu>
   218|         }
   219|       >
   220|         <Button icon={<Icon name="expand_more" />} />
   221|       </Popover>
   222|       <AssetWipeDialog
   223|         assetKeys={selected.map((asset) => asset.key)}
   224|         isOpen={showBulkWipeDialog}
   225|         onClose={() => setShowBulkWipeDialog(false)}
   226|         onComplete={() => {
   227|           setShowBulkWipeDialog(false);
   228|           clearSelection();
   229|         }}
   230|         requery={requery}
   231|       />
   232|     </>
   233|   );


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetValueGraph.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-67 ---
     1| import {colorAccentBlue, colorBackgroundBlue} from '@dagster-io/ui-components';
     2| import {ActiveElement, ChartEvent} from 'chart.js';
     3| import 'chartjs-adapter-date-fns';
     4| import * as React from 'react';
     5| import {Line} from 'react-chartjs-2';
     6| export interface AssetValueGraphData {
     7|   minY: number;
     8|   maxY: number;
     9|   minXNumeric: number;
    10|   maxXNumeric: number;
    11|   xAxis: 'time' | 'partition';
    12|   values: {
    13|     x: number | string; // time or partition
    14|     xNumeric: number; // time or partition index
    15|     y: number;
    16|   }[];
    17| }
    18| export const AssetValueGraph = (props: {
    19|   label: string;
    20|   width: string;
    21|   yAxisLabel?: string;
    22|   data: AssetValueGraphData;
    23|   xHover: string | number | null;
    24|   onHoverX: (value: string | number | null) => void;
    25| }) => {
    26|   if (!props.data) {
    27|     return <span />;
    28|   }
    29|   let labels: React.ReactText[] | undefined = undefined;
    30|   let xHover = props.xHover;
    31|   if (props.data.xAxis === 'partition') {
    32|     labels = props.data.values.map((v) => v.x);
    33|     xHover = xHover ? labels.indexOf(xHover) : null;
    34|   }
    35|   const graphData = {
    36|     labels,
    37|     datasets: [
    38|       {
    39|         label: props.label,
    40|         lineTension: 0,
    41|         data: props.data.values.map((v) => ({x: v.xNumeric, y: v.y})),
    42|         borderColor: colorAccentBlue(),
    43|         backgroundColor: colorBackgroundBlue(),
    44|         pointBorderWidth: 2,
    45|         pointHoverBorderWidth: 2,
    46|         pointHoverRadius: 13,
    47|         pointHoverBorderColor: colorAccentBlue(),
    48|       },
    49|     ],
    50|   };
    51|   const options = {
    52|     animation: {
    53|       duration: 0,
    54|     },
    55|     elements: {
    56|       point: {
    57|         radius: ((context: any) =>
    58|           context.dataset.data[context.dataIndex]?.x === xHover ? 13 : 2) as any,
    59|       },
    60|     },
    61|     scales: {
    62|       x: {
    63|         id: 'x',
    64|         display: true,
    65|         ...(props.data.xAxis === 'time'
    66|           ? {
    67|               type: 'time',


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetsCatalogRoot.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-22 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {Box, Page, Spinner, colorTextLight} from '@dagster-io/ui-components';
     3| import * as React from 'react';
     4| import {useHistory, useParams} from 'react-router-dom';
     5| import {useTrackPageView} from '../app/analytics';
     6| import {displayNameForAssetKey} from '../asset-graph/Utils';
     7| import {useDocumentTitle} from '../hooks/useDocumentTitle';
     8| import {ReloadAllButton} from '../workspace/ReloadAllButton';
     9| import {AssetGlobalLineageLink, AssetPageHeader} from './AssetPageHeader';
    10| import {AssetView} from './AssetView';
    11| import {AssetsCatalogTable} from './AssetsCatalogTable';
    12| import {assetDetailsPathForKey} from './assetDetailsPathForKey';
    13| import {
    14|   AssetsCatalogRootQuery,
    15|   AssetsCatalogRootQueryVariables,
    16| } from './types/AssetsCatalogRoot.types';
    17| export const AssetsCatalogRoot = () => {
    18|   useTrackPageView();
    19|   const params = useParams();
    20|   const history = useHistory();
    21|   const currentPath: string[] = ((params as any)['0'] || '')
    22|     .split('/')

# --- HUNK 2: Lines 24-64 ---
    24|     .map(decodeURIComponent);
    25|   const queryResult = useQuery<AssetsCatalogRootQuery, AssetsCatalogRootQueryVariables>(
    26|     ASSETS_CATALOG_ROOT_QUERY,
    27|     {
    28|       skip: currentPath.length === 0,
    29|       variables: {assetKey: {path: currentPath}},
    30|     },
    31|   );
    32|   useDocumentTitle(
    33|     currentPath && currentPath.length
    34|       ? `Assets: ${displayNameForAssetKey({path: currentPath})}`
    35|       : 'Assets',
    36|   );
    37|   if (queryResult.loading) {
    38|     return (
    39|       <Page>
    40|         <AssetPageHeader assetKey={{path: currentPath}} />
    41|         <Box flex={{direction: 'row', justifyContent: 'center'}} style={{paddingTop: '100px'}}>
    42|           <Box flex={{direction: 'row', alignItems: 'center', gap: 16}}>
    43|             <Spinner purpose="body-text" />
    44|             <div style={{color: colorTextLight()}}>Loading assets</div>
    45|           </Box>
    46|         </Box>
    47|       </Page>
    48|     );
    49|   }
    50|   if (
    51|     currentPath.length === 0 ||
    52|     queryResult.data?.assetOrError.__typename === 'AssetNotFoundError'
    53|   ) {
    54|     return (
    55|       <Box flex={{direction: 'column'}} style={{height: '100%', overflow: 'hidden'}}>
    56|         <AssetPageHeader
    57|           assetKey={{path: currentPath}}
    58|           right={
    59|             <Box flex={{gap: 12, alignItems: 'center'}}>
    60|               <AssetGlobalLineageLink />
    61|               <ReloadAllButton label="Reload definitions" />
    62|             </Box>
    63|           }
    64|         />


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetsGroupsGlobalGraphRoot.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-58 ---
     1| import {Page, PageHeader, Heading} from '@dagster-io/ui-components';
     2| import isEqual from 'lodash/isEqual';
     3| import * as React from 'react';
     4| import {useHistory, useParams} from 'react-router-dom';
     5| import {AssetGraphExplorer} from '../asset-graph/AssetGraphExplorer';
     6| import {AssetGraphFetchScope} from '../asset-graph/useAssetGraphData';
     7| import {AssetLocation} from '../asset-graph/useFindAssetLocation';
     8| import {AssetGroupSelector} from '../graphql/types';
     9| import {useDocumentTitle} from '../hooks/useDocumentTitle';
    10| import {useQueryPersistedState} from '../hooks/useQueryPersistedState';
    11| import {ExplorerPath} from '../pipelines/PipelinePathUtils';
    12| import {ReloadAllButton} from '../workspace/ReloadAllButton';
    13| import {WorkspaceContext} from '../workspace/WorkspaceContext';
    14| import {buildAssetGroupSelector} from './AssetGroupSuggest';
    15| import {assetDetailsPathForKey} from './assetDetailsPathForKey';
    16| import {
    17|   globalAssetGraphPathFromString,
    18|   globalAssetGraphPathToString,
    19| } from './globalAssetGraphPathToString';
    20| interface AssetGroupRootParams {
    21|   0: string;
    22| }
    23| export const AssetsGroupsGlobalGraphRoot = () => {
    24|   const {0: path} = useParams<AssetGroupRootParams>();
    25|   const {visibleRepos} = React.useContext(WorkspaceContext);
    26|   const history = useHistory();
    27|   const [filters, setFilters] = useQueryPersistedState<{
    28|     groups: AssetGroupSelector[];
    29|     computeKindTags: string[];
    30|   }>({
    31|     encode: ({groups, computeKindTags}) => ({
    32|       groups: groups.length ? JSON.stringify(groups) : undefined,
    33|       computeKindTags: computeKindTags.length ? JSON.stringify(computeKindTags) : undefined,
    34|     }),
    35|     decode: (qs) => ({
    36|       groups: qs.groups ? JSON.parse(qs.groups) : [],
    37|       computeKindTags: qs.computeKindTags ? JSON.parse(qs.computeKindTags) : [],
    38|     }),
    39|   });
    40|   useDocumentTitle(`Global Asset Lineage`);
    41|   const onChangeExplorerPath = React.useCallback(
    42|     (path: ExplorerPath, mode: 'push' | 'replace') => {
    43|       history[mode]({
    44|         pathname: globalAssetGraphPathToString(path),
    45|         search: history.location.search,
    46|       });
    47|     },
    48|     [history],
    49|   );
    50|   const onNavigateToSourceAssetNode = React.useCallback(
    51|     (node: AssetLocation) => {
    52|       history.push(assetDetailsPathForKey(node.assetKey, {view: 'definition'}));
    53|     },
    54|     [history],
    55|   );
    56|   const fetchOptions = React.useMemo(() => {
    57|     const options: AssetGraphFetchScope = {
    58|       hideEdgesToNodesOutsideQuery: false,

# --- HUNK 2: Lines 60-98 ---
    60|         if (
    61|           !visibleRepos.some(
    62|             (repo) =>
    63|               repo.repositoryLocation.name === node.repository.location.name &&
    64|               repo.repository.name === node.repository.name,
    65|           )
    66|         ) {
    67|           return true;
    68|         }
    69|         if (filters.groups?.length) {
    70|           const nodeGroup = buildAssetGroupSelector({definition: node});
    71|           if (!filters.groups.some((g) => isEqual(g, nodeGroup))) {
    72|             return true;
    73|           }
    74|         }
    75|         return false;
    76|       },
    77|     };
    78|     return options;
    79|   }, [filters.groups, visibleRepos]);
    80|   return (
    81|     <Page style={{display: 'flex', flexDirection: 'column', paddingBottom: 0}}>
    82|       <PageHeader
    83|         title={<Heading>Global Asset Lineage</Heading>}
    84|         right={<ReloadAllButton label="Reload definitions" />}
    85|       />
    86|       <AssetGraphExplorer
    87|         fetchOptions={fetchOptions}
    88|         filters={filters}
    89|         setFilters={setFilters}
    90|         options={{preferAssetRendering: true, explodeComposites: true}}
    91|         explorerPath={globalAssetGraphPathFromString(path)}
    92|         onChangeExplorerPath={onChangeExplorerPath}
    93|         onNavigateToSourceAssetNode={onNavigateToSourceAssetNode}
    94|       />
    95|     </Page>
    96|   );
    97| };
    98| export default AssetsGroupsGlobalGraphRoot;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AutoMaterializePolicyPage/AssetAutomaterializePolicyPage.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {Box, Subheading, colorTextLight} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| import {FIFTEEN_SECONDS, useQueryRefreshAtInterval} from '../../app/QueryRefresh';
     5| import {useQueryPersistedState} from '../../hooks/useQueryPersistedState';
     6| import {AssetKey} from '../types';
     7| import {AutoMaterializeExperimentalBanner} from './AutoMaterializeExperimentalBanner';
     8| import {AutomaterializeLeftPanel} from './AutomaterializeLeftPanel';
     9| import {AutomaterializeMiddlePanel} from './AutomaterializeMiddlePanel';
    10| import {AutomaterializeRightPanel} from './AutomaterializeRightPanel';
    11| import {useEvaluationsQueryResult} from './useEvaluationsQueryResult';
    12| export const AssetAutomaterializePolicyPage = ({
    13|   assetKey,
    14|   assetHasDefinedPartitions,
    15| }: {
    16|   assetKey: AssetKey;
    17|   assetHasDefinedPartitions: boolean;
    18| }) => {
    19|   const {queryResult, paginationProps} = useEvaluationsQueryResult({assetKey});
    20|   useQueryRefreshAtInterval(queryResult, FIFTEEN_SECONDS);
    21|   const {evaluations} = React.useMemo(() => {

# --- HUNK 2: Lines 36-76 ---
    36|     queryResult.data?.assetNodeOrError,
    37|   ]);
    38|   const isFirstPage = !paginationProps.hasPrevCursor;
    39|   const [selectedEvaluationId, setSelectedEvaluationId] = useQueryPersistedState<
    40|     number | undefined
    41|   >({
    42|     queryKey: 'evaluation',
    43|     decode: (raw) => {
    44|       const value = parseInt(raw.evaluation);
    45|       return isNaN(value) ? undefined : value;
    46|     },
    47|   });
    48|   const selectedEvaluation = React.useMemo(() => {
    49|     if (selectedEvaluationId === undefined && isFirstPage) {
    50|       return evaluations[0];
    51|     }
    52|     return evaluations.find((evaluation) => evaluation.evaluationId === selectedEvaluationId);
    53|   }, [selectedEvaluationId, isFirstPage, evaluations]);
    54|   return (
    55|     <AutomaterializePage
    56|       style={{flex: 1, minHeight: 0, color: colorTextLight(), overflow: 'hidden'}}
    57|       flex={{direction: 'column'}}
    58|     >
    59|       <Box padding={{horizontal: 24, vertical: 12}} border="bottom">
    60|         <AutoMaterializeExperimentalBanner />
    61|       </Box>
    62|       <Box flex={{direction: 'row'}} style={{minHeight: 0, flex: 1}}>
    63|         <Box flex={{direction: 'column', grow: 1}}>
    64|           <Box
    65|             flex={{alignItems: 'center'}}
    66|             padding={{vertical: 16, horizontal: 24}}
    67|             border="bottom"
    68|           >
    69|             <Subheading>Evaluation history</Subheading>
    70|           </Box>
    71|           <Box flex={{direction: 'row'}} style={{flex: 1, minHeight: 0}}>
    72|             <Box border="right" flex={{grow: 0, direction: 'column'}} style={{flex: '0 0 296px'}}>
    73|               <AutomaterializeLeftPanel
    74|                 assetHasDefinedPartitions={assetHasDefinedPartitions}
    75|                 evaluations={evaluations}
    76|                 paginationProps={paginationProps}


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AutoMaterializePolicyPage/AutoMaterializeExperimentalBanner.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-30 ---
     1| import {Alert, Icon, Tag, Tooltip, colorAccentBlue} from '@dagster-io/ui-components';
     2| import React from 'react';
     3| const LearnMoreLink =
     4|   'https://docs.dagster.io/concepts/assets/asset-auto-execution#auto-materializing-assets-';
     5| export const AutoMaterializeExperimentalBanner = () => {
     6|   return (
     7|     <Alert
     8|       intent="info"
     9|       title="Auto-materialize policies are experimental"
    10|       icon={<Icon name="info" color={colorAccentBlue()} />}
    11|       description={
    12|         <span>
    13|           You can learn more about this new feature and provide feedback{' '}
    14|           <a target="_blank" href={LearnMoreLink} rel="noreferrer">
    15|             here
    16|           </a>
    17|           .
    18|         </span>
    19|       }
    20|     />
    21|   );
    22| };
    23| export const AutoMaterializeExperimentalTag = () => {
    24|   return (
    25|     <Tooltip content="Click to learn more about this new feature and provide feedback">
    26|       <a target="_blank" href={LearnMoreLink} rel="noreferrer">
    27|         <Tag intent="primary">Experimental</Tag>
    28|       </a>
    29|     </Tooltip>
    30|   );


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AutoMaterializePolicyPage/AutomaterializeLeftPanel.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-33 ---
     1| import {
     2|   Box,
     3|   Caption,
     4|   CursorPaginationControls,
     5|   colorBackgroundBlue,
     6|   colorBackgroundBlueHover,
     7|   colorBackgroundDefault,
     8|   colorBackgroundDefaultHover,
     9|   colorBackgroundLight,
    10|   colorKeylineDefault,
    11|   colorTextBlue,
    12|   colorTextDefault,
    13| } from '@dagster-io/ui-components';
    14| import * as React from 'react';
    15| import styled from 'styled-components';
    16| import {TimestampDisplay} from '../../schedules/TimestampDisplay';
    17| import {EvaluationCounts} from './EvaluationCounts';
    18| import {AutoMaterializeEvaluationRecordItemFragment} from './types/GetEvaluationsQuery.types';
    19| import {useEvaluationsQueryResult} from './useEvaluationsQueryResult';
    20| interface Props extends ListProps {
    21|   evaluations: AutoMaterializeEvaluationRecordItemFragment[];
    22|   paginationProps: ReturnType<typeof useEvaluationsQueryResult>['paginationProps'];
    23| }
    24| export const AutomaterializeLeftPanel = ({
    25|   assetHasDefinedPartitions,
    26|   evaluations,
    27|   paginationProps,
    28|   onSelectEvaluation,
    29|   selectedEvaluation,
    30| }: Props) => {
    31|   return (
    32|     <Box flex={{direction: 'column', grow: 1}} style={{overflowY: 'auto'}}>
    33|       <AutomaterializeLeftList

# --- HUNK 2: Lines 74-129 ---
    74|               <EvaluationCounts
    75|                 numRequested={numRequested}
    76|                 numSkipped={numSkipped}
    77|                 numDiscarded={numDiscarded}
    78|                 isPartitionedAsset={assetHasDefinedPartitions}
    79|                 selected={isSelected}
    80|               />
    81|             </Box>
    82|           </EvaluationListItem>
    83|         );
    84|       })}
    85|       <Box border="top" padding={{vertical: 20, horizontal: 12}} margin={{top: 12}}>
    86|         <Caption>Evaluations are retained for 30 days</Caption>
    87|       </Box>
    88|     </Box>
    89|   );
    90| };
    91| const PaginationWrapper = styled.div`
    92|   position: sticky;
    93|   bottom: 0;
    94|   background: ${colorBackgroundLight()};
    95|   border-right: 1px solid ${colorKeylineDefault()};
    96|   box-shadow: inset 0 1px ${colorKeylineDefault()};
    97|   margin-top: -1px;
    98|   padding-bottom: 16px;
    99|   padding-top: 16px;
   100|   > * {
   101|     margin-top: 0;
   102|   }
   103| `;
   104| interface EvaluationListItemProps {
   105|   $selected: boolean;
   106| }
   107| const EvaluationListItem = styled.button<EvaluationListItemProps>`
   108|   background-color: ${({$selected}) =>
   109|     $selected ? colorBackgroundBlue() : colorBackgroundDefault()};
   110|   border: none;
   111|   border-radius: 8px;
   112|   color: ${({$selected}) => ($selected ? colorTextBlue() : colorTextDefault())};
   113|   cursor: pointer;
   114|   margin: 2px 0;
   115|   text-align: left;
   116|   transition:
   117|     100ms background-color linear,
   118|     100ms color linear;
   119|   user-select: none;
   120|   &:hover {
   121|     background-color: ${({$selected}) =>
   122|       $selected ? colorBackgroundBlueHover() : colorBackgroundDefaultHover()};
   123|   }
   124|   &:focus,
   125|   &:active {
   126|     outline: none;
   127|   }
   128|   padding: 8px 12px;
   129| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AutoMaterializePolicyPage/CollapsibleSection.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-80 ---
     1| import {
     2|   Box,
     3|   Icon,
     4|   Subheading,
     5|   Tooltip,
     6|   colorAccentGray,
     7|   colorBackgroundLight,
     8| } from '@dagster-io/ui-components';
     9| import * as React from 'react';
    10| import styled from 'styled-components';
    11| interface Props {
    12|   header: React.ReactNode;
    13|   details: JSX.Element | string;
    14|   headerRightSide?: React.ReactNode;
    15|   children: React.ReactNode;
    16| }
    17| export const CollapsibleSection = ({header, details, headerRightSide, children}: Props) => {
    18|   return (
    19|     <Collapsible
    20|       header={
    21|         <Box
    22|           flex={{
    23|             justifyContent: 'space-between',
    24|             gap: 12,
    25|             grow: 1,
    26|           }}
    27|         >
    28|           <Box flex={{direction: 'row', alignItems: 'center', gap: 8, grow: 1}}>
    29|             <Subheading>{header}</Subheading>
    30|             {details ? (
    31|               <Tooltip content={details} placement="top">
    32|                 <Icon color={colorAccentGray()} name="info" />
    33|               </Tooltip>
    34|             ) : null}
    35|           </Box>
    36|           {headerRightSide}
    37|         </Box>
    38|       }
    39|     >
    40|       <Box padding={{vertical: 12, left: 32, right: 16}}>{children}</Box>
    41|     </Collapsible>
    42|   );
    43| };
    44| export const Collapsible = ({
    45|   header,
    46|   children,
    47| }: {
    48|   header: React.ReactNode;
    49|   children: React.ReactNode;
    50| }) => {
    51|   const [isCollapsed, setIsCollapsed] = React.useState(false);
    52|   return (
    53|     <Box flex={{direction: 'column'}} border="bottom">
    54|       <SectionHeader onClick={() => setIsCollapsed(!isCollapsed)}>
    55|         <Box
    56|           flex={{direction: 'row', alignItems: 'center', gap: 6}}
    57|           padding={{vertical: 8, horizontal: 12}}
    58|           border="bottom"
    59|         >
    60|           <Icon
    61|             name="arrow_drop_down"
    62|             style={{transform: isCollapsed ? 'rotate(-90deg)' : 'rotate(0deg)'}}
    63|           />
    64|           <div>{header}</div>
    65|         </Box>
    66|       </SectionHeader>
    67|       {isCollapsed ? null : children}
    68|     </Box>
    69|   );
    70| };
    71| const SectionHeader = styled.button`
    72|   background-color: ${colorBackgroundLight()};
    73|   border: 0;
    74|   cursor: pointer;
    75|   padding: 0;
    76|   margin: 0;
    77|   :focus {
    78|     outline: none;
    79|   }
    80| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AutoMaterializePolicyPage/EvaluationCounts.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-65 ---
     1| import {
     2|   Box,
     3|   Caption,
     4|   colorTextBlue,
     5|   colorTextGreen,
     6|   colorTextLight,
     7|   colorTextLighter,
     8|   colorTextRed,
     9|   colorTextYellow,
    10| } from '@dagster-io/ui-components';
    11| import * as React from 'react';
    12| import {compactNumber} from '../../ui/formatters';
    13| interface Props {
    14|   numRequested: number;
    15|   numSkipped: number;
    16|   numDiscarded: number;
    17|   isPartitionedAsset: boolean;
    18|   selected: boolean;
    19| }
    20| export const EvaluationCounts = React.memo((props: Props) => {
    21|   const {numRequested, numSkipped, numDiscarded, isPartitionedAsset, selected} = props;
    22|   const requested =
    23|     numRequested || isPartitionedAsset ? (
    24|       <Caption
    25|         key="requested"
    26|         color={selected ? colorTextBlue() : numRequested ? colorTextGreen() : colorTextLight()}
    27|       >
    28|         {isPartitionedAsset ? `${compactNumber(numRequested)} launched` : 'Launched'}
    29|       </Caption>
    30|     ) : null;
    31|   const skipped =
    32|     numSkipped || isPartitionedAsset ? (
    33|       <Caption
    34|         key="skipped"
    35|         color={selected ? colorTextBlue() : numSkipped ? colorTextYellow() : colorTextLight()}
    36|       >
    37|         {isPartitionedAsset ? `${compactNumber(numSkipped)} skipped` : 'Skipped'}
    38|       </Caption>
    39|     ) : null;
    40|   const discarded =
    41|     numDiscarded || isPartitionedAsset ? (
    42|       <Caption
    43|         key="discarded"
    44|         color={selected ? colorTextBlue() : numDiscarded ? colorTextRed() : colorTextLight()}
    45|       >
    46|         {isPartitionedAsset ? `${compactNumber(numDiscarded)} discarded` : 'Discarded'}
    47|       </Caption>
    48|     ) : null;
    49|   const filtered = [requested, skipped, discarded].filter(
    50|     (element): element is React.ReactElement => !!element,
    51|   );
    52|   return (
    53|     <Box flex={{direction: 'row', gap: 2, alignItems: 'center'}} style={{whiteSpace: 'nowrap'}}>
    54|       {filtered
    55|         .map((element, ii) => [
    56|           element,
    57|           <Caption key={`spacer-${ii}`} color={selected ? colorTextBlue() : colorTextLighter()}>
    58|             /
    59|           </Caption>,
    60|         ])
    61|         .flat()
    62|         .slice(0, -1)}
    63|     </Box>
    64|   );
    65| });


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AutoMaterializePolicyPage/RuleEvaluationOutcomes.tsx
# Total hunks: 4
# ====================================================================
# --- HUNK 1: Lines 1-57 ---
     1| import {
     2|   Box,
     3|   Icon,
     4|   Tag,
     5|   colorTextDefault,
     6|   colorTextLight,
     7|   colorTextLighter,
     8| } from '@dagster-io/ui-components';
     9| import groupBy from 'lodash/groupBy';
    10| import * as React from 'react';
    11| import {assertUnreachable} from '../../app/Util';
    12| import {
    13|   AutoMaterializeDecisionType,
    14|   AutoMaterializeRule,
    15|   AutoMaterializeRuleEvaluation,
    16| } from '../../graphql/types';
    17| import {AutomaterializeRequestedPartitionsLink} from './AutomaterializeRequestedPartitionsLink';
    18| import {CollapsibleSection} from './CollapsibleSection';
    19| import {ParentUpdatedLink} from './ParentUpdatedLink';
    20| import {ParentUpdatedPartitionLink} from './ParentUpdatedPartitionLink';
    21| import {WaitingOnAssetKeysLink} from './WaitingOnAssetKeysLink';
    22| import {WaitingOnAssetKeysPartitionLink} from './WaitingOnAssetKeysPartitionLink';
    23| import {RuleWithEvaluationsFragment} from './types/GetEvaluationsQuery.types';
    24| interface RuleEvaluationOutcomeProps {
    25|   text: string;
    26|   met: boolean;
    27|   rightElement?: React.ReactNode;
    28| }
    29| const RuleEvaluationOutcome = ({text, met, rightElement}: RuleEvaluationOutcomeProps) => {
    30|   return (
    31|     <Box
    32|       flex={{direction: 'row', alignItems: 'center', justifyContent: 'space-between'}}
    33|       style={{height: 24}}
    34|     >
    35|       <Box flex={{direction: 'row', alignItems: 'center', gap: 8}}>
    36|         <Icon name={met ? 'done' : 'close'} color={met ? colorTextDefault() : colorTextLight()} />
    37|         <div style={{color: met ? colorTextDefault() : colorTextLight()}}>
    38|           {text.slice(0, 1).toUpperCase()}
    39|           {text.slice(1)}
    40|         </div>
    41|       </Box>
    42|       {rightElement}
    43|     </Box>
    44|   );
    45| };
    46| const SECTIONS: {
    47|   decisionType: AutoMaterializeDecisionType;
    48|   header: string;
    49|   details: string;
    50|   intent?: React.ComponentProps<typeof Tag>['intent'];
    51|   partitionedOnly?: boolean;
    52| }[] = [
    53|   {
    54|     decisionType: AutoMaterializeDecisionType.MATERIALIZE,
    55|     header: 'Materialization conditions met',
    56|     details:
    57|       'These conditions trigger a materialization, unless they are blocked by a skip or discard condition.',

# --- HUNK 2: Lines 116-193 ---
   116|                       />
   117|                     )
   118|                   }
   119|                 />
   120|               );
   121|             })}
   122|           </Box>
   123|         </CollapsibleSection>
   124|       ))}
   125|     </>
   126|   );
   127| };
   128| const RightElementForEvaluations = ({
   129|   evaluations,
   130| }: {
   131|   evaluations: AutoMaterializeRuleEvaluation[];
   132|   intent?: React.ComponentProps<typeof Tag>['intent'];
   133| }) => {
   134|   const first = evaluations.map((e) => e.evaluationData!).find(Boolean);
   135|   if (!first) {
   136|     return <div style={{color: colorTextLighter()}}>&ndash;</div>;
   137|   }
   138|   switch (first.__typename) {
   139|     case 'ParentMaterializedRuleEvaluationData':
   140|       return (
   141|         <ParentUpdatedLink
   142|           updatedAssetKeys={first.updatedAssetKeys || []}
   143|           willUpdateAssetKeys={first.willUpdateAssetKeys || []}
   144|         />
   145|       );
   146|     case 'WaitingOnKeysRuleEvaluationData':
   147|       return <WaitingOnAssetKeysLink assetKeys={first.waitingOnAssetKeys || []} />;
   148|     case 'TextRuleEvaluationData':
   149|       return <span>{first.text}</span>;
   150|     default:
   151|       assertUnreachable(first);
   152|   }
   153|   return <span />;
   154| };
   155| const partitionKeysOf = (e: AutoMaterializeRuleEvaluation) =>
   156|   e.partitionKeysOrError?.__typename === 'PartitionKeys'
   157|     ? e.partitionKeysOrError.partitionKeys
   158|     : [];
   159| const RightElementForPartitionedEvaluations = ({
   160|   evaluations,
   161|   intent,
   162| }: {
   163|   evaluations: AutoMaterializeRuleEvaluation[];
   164|   intent?: React.ComponentProps<typeof Tag>['intent'];
   165| }) => {
   166|   const evaluationsWithData = evaluations.filter((e) => !!e.evaluationData);
   167|   const first = evaluationsWithData[0]?.evaluationData;
   168|   if (!first) {
   169|     const partitionKeys = evaluations.flatMap(partitionKeysOf);
   170|     return partitionKeys.length ? (
   171|       <AutomaterializeRequestedPartitionsLink partitionKeys={partitionKeys} intent={intent} />
   172|     ) : (
   173|       <div style={{color: colorTextLighter()}}>&ndash;</div>
   174|     );
   175|   }
   176|   const typename = first.__typename;
   177|   switch (typename) {
   178|     case 'ParentMaterializedRuleEvaluationData':
   179|       const updatedAssetKeys = Object.fromEntries(
   180|         evaluationsWithData.flatMap((e) =>
   181|           partitionKeysOf(e).map((key) => [
   182|             key,
   183|             (e.evaluationData?.__typename === 'ParentMaterializedRuleEvaluationData' &&
   184|               e.evaluationData.updatedAssetKeys) ||
   185|               [],
   186|           ]),
   187|         ),
   188|       );
   189|       const willUpdateAssetKeys = Object.fromEntries(
   190|         evaluationsWithData.flatMap((e) =>
   191|           partitionKeysOf(e).map((key) => [
   192|             key,
   193|             (e.evaluationData?.__typename === 'ParentMaterializedRuleEvaluationData' &&


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/BackfillPreviewModal.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-30 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {
     3|   Box,
     4|   Button,
     5|   Dialog,
     6|   DialogFooter,
     7|   Spinner,
     8|   colorTextDefault,
     9|   colorTextLight,
    10| } from '@dagster-io/ui-components';
    11| import {useVirtualizer} from '@tanstack/react-virtual';
    12| import React from 'react';
    13| import styled from 'styled-components';
    14| import {tokenForAssetKey} from '../asset-graph/Utils';
    15| import {TargetPartitionsDisplay} from '../instance/backfill/TargetPartitionsDisplay';
    16| import {testId} from '../testing/testId';
    17| import {Container, HeaderCell, Inner, Row, RowCell} from '../ui/VirtualizedTable';
    18| import {AssetLink} from './AssetLink';
    19| import {asAssetKeyInput} from './asInput';
    20| import {AssetKey} from './types';
    21| import {
    22|   BackfillPreviewQuery,
    23|   BackfillPreviewQueryVariables,
    24| } from './types/BackfillPreviewModal.types';
    25| import {
    26|   BackfillPolicyForLaunchAssetFragment,
    27|   PartitionDefinitionForLaunchAssetFragment,
    28| } from './types/LaunchAssetExecutionButton.types';
    29| interface BackfillPreviewModalProps {
    30|   isOpen: boolean;

# --- HUNK 2: Lines 73-161 ---
    73|       style={{width: '90vw', maxWidth: 1100, transform: 'scale(1)'}}
    74|     >
    75|       <Container
    76|         ref={parentRef}
    77|         style={{maxHeight: '50vh'}}
    78|         data-testid={testId('backfill-preview-modal-content')}
    79|       >
    80|         <BackfillPreviewTableHeader />
    81|         <Inner $totalHeight={totalHeight}>
    82|           {items.map(({index, size, start}) => {
    83|             const {assetKey, partitionDefinition, backfillPolicy} = assets[index]!;
    84|             const token = tokenForAssetKey(assetKey);
    85|             const partitions = partitionsByAssetToken[token];
    86|             return (
    87|               <Row key={token} $height={size} $start={start}>
    88|                 <RowGrid border={index < assets.length - 1 ? 'bottom' : undefined}>
    89|                   <RowCell>
    90|                     <AssetLink path={assetKey.path} textStyle="middle-truncate" icon="asset" />
    91|                   </RowCell>
    92|                   {backfillPolicy ? (
    93|                     <RowCell style={{color: colorTextDefault()}}>
    94|                       {backfillPolicy?.description}
    95|                     </RowCell>
    96|                   ) : (
    97|                     <RowCell>{'\u2013'}</RowCell>
    98|                   )}
    99|                   {partitionDefinition ? (
   100|                     <RowCell style={{color: colorTextDefault()}}>
   101|                       {partitionDefinition?.description}
   102|                     </RowCell>
   103|                   ) : (
   104|                     <RowCell>{'\u2013'}</RowCell>
   105|                   )}
   106|                   <RowCell style={{color: colorTextDefault(), alignItems: 'flex-start'}}>
   107|                     {partitions ? (
   108|                       <TargetPartitionsDisplay targetPartitions={partitions} />
   109|                     ) : (
   110|                       <Spinner purpose="body-text" />
   111|                     )}
   112|                   </RowCell>
   113|                 </RowGrid>
   114|               </Row>
   115|             );
   116|           })}
   117|         </Inner>
   118|       </Container>
   119|       <DialogFooter topBorder>
   120|         <Button intent="primary" autoFocus={true} onClick={() => setOpen(false)}>
   121|           OK
   122|         </Button>
   123|       </DialogFooter>
   124|     </Dialog>
   125|   );
   126| };
   127| const RowGrid = styled(Box)`
   128|   display: grid;
   129|   grid-template-columns: ${TEMPLATE_COLUMNS};
   130|   height: 100%;
   131| `;
   132| export const BackfillPreviewTableHeader = () => {
   133|   return (
   134|     <Box
   135|       border="bottom"
   136|       style={{
   137|         display: 'grid',
   138|         gridTemplateColumns: TEMPLATE_COLUMNS,
   139|         height: '32px',
   140|         fontSize: '12px',
   141|         color: colorTextLight(),
   142|       }}
   143|     >
   144|       <HeaderCell>Asset key</HeaderCell>
   145|       <HeaderCell>Backfill policy</HeaderCell>
   146|       <HeaderCell>Partition definition</HeaderCell>
   147|       <HeaderCell>Partitions to launch</HeaderCell>
   148|     </Box>
   149|   );
   150| };
   151| export const BACKFILL_PREVIEW_QUERY = gql`
   152|   query BackfillPreviewQuery($partitionNames: [String!]!, $assetKeys: [AssetKeyInput!]!) {
   153|     assetBackfillPreview(params: {partitionNames: $partitionNames, assetSelection: $assetKeys}) {
   154|       assetKey {
   155|         path
   156|       }
   157|       partitions {
   158|         partitionKeys
   159|         ranges {
   160|           start
   161|           end


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/CalculateChangedAndMissingDialog.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-34 ---
     1| import {useQuery, gql} from '@apollo/client';
     2| import {
     3|   Spinner,
     4|   Dialog,
     5|   DialogBody,
     6|   DialogFooter,
     7|   Button,
     8|   Box,
     9|   Icon,
    10|   Checkbox,
    11|   MiddleTruncate,
    12|   colorLinkDefault,
    13|   colorTextLight,
    14|   colorAccentGreen,
    15| } from '@dagster-io/ui-components';
    16| import {useVirtualizer} from '@tanstack/react-virtual';
    17| import React from 'react';
    18| import {Link} from 'react-router-dom';
    19| import styled from 'styled-components';
    20| import {showCustomAlert} from '../app/CustomAlertProvider';
    21| import {displayNameForAssetKey} from '../asset-graph/Utils';
    22| import {Container, Inner, Row} from '../ui/VirtualizedTable';
    23| import {isAssetStale, isAssetMissing} from './Stale';
    24| import {asAssetKeyInput} from './asInput';
    25| import {assetDetailsPathForKey} from './assetDetailsPathForKey';
    26| import {AssetKey} from './types';
    27| import {
    28|   AssetStaleStatusQuery,
    29|   AssetStaleStatusQueryVariables,
    30| } from './types/CalculateChangedAndMissingDialog.types';
    31| export const CalculateChangedAndMissingDialog = React.memo(
    32|   ({
    33|     isOpen,
    34|     onClose,

# --- HUNK 2: Lines 90-180 ---
    90|           </Box>
    91|         );
    92|       }
    93|       if (staleOrMissing?.length) {
    94|         return (
    95|           <>
    96|             <RowGrid border="bottom" padding={{bottom: 8}}>
    97|               <Checkbox
    98|                 id="check-all"
    99|                 checked={checked.size === staleOrMissing.length}
   100|                 onChange={() => {
   101|                   setChecked((checked) => {
   102|                     if (checked.size === staleOrMissing.length) {
   103|                       return new Set();
   104|                     } else {
   105|                       return new Set(staleOrMissing);
   106|                     }
   107|                   });
   108|                 }}
   109|               />
   110|               <label htmlFor="check-all" style={{color: colorTextLight(), cursor: 'pointer'}}>
   111|                 Asset Name
   112|               </label>
   113|             </RowGrid>
   114|             <Container ref={containerRef} style={{maxHeight: '400px'}}>
   115|               <Inner $totalHeight={totalHeight}>
   116|                 {items.map(({index, key, size, start, measureElement}) => {
   117|                   const item = staleOrMissing[index]!;
   118|                   return (
   119|                     <Row $height={size} $start={start} key={key} ref={measureElement}>
   120|                       <RowGrid border="bottom">
   121|                         <Checkbox
   122|                           id={`checkbox-${key}`}
   123|                           checked={checked.has(item)}
   124|                           onChange={() => {
   125|                             setChecked((checked) => {
   126|                               const copy = new Set(checked);
   127|                               if (copy.has(item)) {
   128|                                 copy.delete(item);
   129|                               } else {
   130|                                 copy.add(item);
   131|                               }
   132|                               return copy;
   133|                             });
   134|                           }}
   135|                         />
   136|                         <Box
   137|                           as="label"
   138|                           htmlFor={`checkbox-${key}`}
   139|                           flex={{alignItems: 'center', gap: 4}}
   140|                           style={{cursor: 'pointer'}}
   141|                         >
   142|                           <Box style={{overflow: 'hidden'}}>
   143|                             <MiddleTruncate text={displayNameForAssetKey(item)} />
   144|                           </Box>
   145|                           <Link to={assetDetailsPathForKey(item)} target="_blank">
   146|                             <Icon name="open_in_new" color={colorLinkDefault()} />
   147|                           </Link>
   148|                         </Box>
   149|                       </RowGrid>
   150|                     </Row>
   151|                   );
   152|                 })}
   153|               </Inner>
   154|             </Container>
   155|           </>
   156|         );
   157|       }
   158|       return (
   159|         <Box flex={{alignItems: 'center', gap: 8}}>
   160|           <Icon name="check_circle" color={colorAccentGreen()} />
   161|           <div>All assets are up to date</div>
   162|         </Box>
   163|       );
   164|     };
   165|     return (
   166|       <>
   167|         <Dialog isOpen={isOpen} onClose={onClose} title="Materialize changed and missing assets">
   168|           <DialogBody>{content()}</DialogBody>
   169|           <DialogFooter topBorder>
   170|             {loading ? (
   171|               <Button onClick={onClose}>Cancel</Button>
   172|             ) : staleOrMissing?.length ? (
   173|               <Button
   174|                 intent="primary"
   175|                 onClick={(e) => {
   176|                   onMaterializeAssets(Array.from(checked), e);
   177|                   onClose();
   178|                 }}
   179|                 disabled={checked.size === 0}
   180|               >


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/DependsOnSelfBanner.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-22 ---
     1| import {Alert, Box, Icon, colorAccentBlue} from '@dagster-io/ui-components';
     2| import React from 'react';
     3| export const DependsOnSelfBanner = () => {
     4|   return (
     5|     <Box padding={{vertical: 16, left: 24, right: 12}} border="bottom">
     6|       <Alert
     7|         intent="info"
     8|         icon={
     9|           <Icon
    10|             name="history_toggle_off"
    11|             size={16}
    12|             color={colorAccentBlue()}
    13|             style={{marginTop: 1}}
    14|           />
    15|         }
    16|         title={
    17|           <div style={{fontWeight: 400}}>This asset depends on earlier partitions of itself. </div>
    18|         }
    19|       />
    20|     </Box>
    21|   );
    22| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/LastMaterializationMetadata.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-30 ---
     1| import {
     2|   Box,
     3|   Group,
     4|   Icon,
     5|   Mono,
     6|   NonIdealState,
     7|   Table,
     8|   colorAccentGray,
     9|   colorTextLight,
    10| } from '@dagster-io/ui-components';
    11| import * as React from 'react';
    12| import {Link} from 'react-router-dom';
    13| import styled from 'styled-components';
    14| import {Timestamp} from '../app/time/Timestamp';
    15| import {isHiddenAssetGroupJob, LiveDataForNode} from '../asset-graph/Utils';
    16| import {AssetKeyInput} from '../graphql/types';
    17| import {MetadataEntry} from '../metadata/MetadataEntry';
    18| import {Description} from '../pipelines/Description';
    19| import {PipelineReference} from '../pipelines/PipelineReference';
    20| import {linkToRunEvent, titleForRun} from '../runs/RunUtils';
    21| import {useStepLogs} from '../runs/StepLogsDialog';
    22| import {isThisThingAJob, useRepository} from '../workspace/WorkspaceContext';
    23| import {buildRepoAddress} from '../workspace/buildRepoAddress';
    24| import {AssetLineageElements} from './AssetLineageElements';
    25| import {StaleReasonsTags} from './Stale';
    26| import {isRunlessEvent} from './isRunlessEvent';
    27| import {
    28|   AssetObservationFragment,
    29|   AssetMaterializationFragment,
    30| } from './types/useRecentAssetEvents.types';

# --- HUNK 2: Lines 81-155 ---
    81|                         </Box>
    82|                         {stepLogs.button}
    83|                       </Box>
    84|                       {!isHiddenAssetGroupJob(latestRun.pipelineName) && (
    85|                         <>
    86|                           <Box padding={{left: 8, top: 4}}>
    87|                             <PipelineReference
    88|                               showIcon
    89|                               pipelineName={latestRun.pipelineName}
    90|                               pipelineHrefContext={repoAddress || 'repo-unknown'}
    91|                               snapshotId={latestRun.pipelineSnapshotId}
    92|                               isJob={isThisThingAJob(repo, latestRun.pipelineName)}
    93|                             />
    94|                           </Box>
    95|                           <Group
    96|                             direction="row"
    97|                             padding={{left: 8}}
    98|                             spacing={8}
    99|                             alignItems="center"
   100|                           >
   101|                             <Icon name="linear_scale" color={colorAccentGray()} />
   102|                             <Link to={linkToRunEvent(latestRun, latestEvent)}>
   103|                               {latestEvent.stepKey}
   104|                             </Link>
   105|                           </Group>
   106|                         </>
   107|                       )}
   108|                     </div>
   109|                   ) : (
   110|                     'No materialization events'
   111|                   )}
   112|                 </td>
   113|               </tr>
   114|             ) : null}
   115|             {latestEvent.partition ? (
   116|               <tr>
   117|                 <td>Partition</td>
   118|                 <td>{latestEvent.partition}</td>
   119|               </tr>
   120|             ) : null}
   121|             <tr>
   122|               <td>Timestamp</td>
   123|               <td>
   124|                 <Box flex={{gap: 8, alignItems: 'center'}}>
   125|                   <Timestamp timestamp={{ms: Number(latestEvent.timestamp)}} />
   126|                   {liveData && (
   127|                     <StaleReasonsTags assetKey={assetKey} liveData={liveData} include="all" />
   128|                   )}
   129|                 </Box>
   130|               </td>
   131|             </tr>
   132|             {isRunlessEvent(latestEvent) ? (
   133|               <tr>
   134|                 <td>Description</td>
   135|                 <td style={{color: colorTextLight()}}>
   136|                   <Description
   137|                     description={latestEvent.description}
   138|                     fontSize={14}
   139|                     maxHeight={150}
   140|                   />
   141|                 </td>
   142|               </tr>
   143|             ) : null}
   144|             {latestAssetLineage?.length ? (
   145|               <tr>
   146|                 <td>Parent assets</td>
   147|                 <td>
   148|                   <AssetLineageElements
   149|                     elements={latestAssetLineage}
   150|                     timestamp={latestEvent.timestamp}
   151|                   />
   152|                 </td>
   153|               </tr>
   154|             ) : null}
   155|             {latestEvent.metadataEntries.map((entry) => (


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/LaunchAssetChoosePartitionsDialog.tsx
# Total hunks: 5
# ====================================================================
# --- HUNK 1: Lines 1-38 ---
     1| import {gql, useApolloClient, useQuery} from '@apollo/client';
     2| import {Radio} from '@blueprintjs/core';
     3| import {
     4|   Alert,
     5|   Box,
     6|   Button,
     7|   ButtonLink,
     8|   Checkbox,
     9|   Dialog,
    10|   DialogFooter,
    11|   DialogHeader,
    12|   Icon,
    13|   RadioContainer,
    14|   Subheading,
    15|   Tooltip,
    16|   colorAccentGray,
    17|   colorBackgroundYellow,
    18|   colorTextYellow,
    19| } from '@dagster-io/ui-components';
    20| import reject from 'lodash/reject';
    21| import React from 'react';
    22| import {useHistory} from 'react-router-dom';
    23| import {showCustomAlert} from '../app/CustomAlertProvider';
    24| import {PipelineRunTag} from '../app/ExecutionSessionStorage';
    25| import {usePermissionsForLocation} from '../app/Permissions';
    26| import {PythonErrorInfo} from '../app/PythonErrorInfo';
    27| import {
    28|   displayNameForAssetKey,
    29|   isHiddenAssetGroupJob,
    30|   itemWithAssetKey,
    31| } from '../asset-graph/Utils';
    32| import {AssetKey} from '../assets/types';
    33| import {LaunchBackfillParams, PartitionDefinitionType} from '../graphql/types';
    34| import {LAUNCH_PARTITION_BACKFILL_MUTATION} from '../instance/backfill/BackfillUtils';
    35| import {
    36|   LaunchPartitionBackfillMutation,
    37|   LaunchPartitionBackfillMutationVariables,
    38| } from '../instance/backfill/types/BackfillUtils.types';

# --- HUNK 2: Lines 350-414 ---
   350|     }
   351|     if (!launchAsBackfill && !canLaunchPipelineExecution) {
   352|       return (
   353|         <Tooltip content={disabledReasons.canLaunchPipelineExecution}>
   354|           <Button disabled>Launch 1 run</Button>
   355|         </Tooltip>
   356|       );
   357|     }
   358|     return (
   359|       <Button
   360|         data-testid={testId('launch-button')}
   361|         intent="primary"
   362|         onClick={onLaunch}
   363|         disabled={target.type === 'pureAll' ? false : keysFiltered.length === 0}
   364|         loading={launching}
   365|       >
   366|         {launching ? 'Launching...' : launchAsBackfill ? 'Launch backfill' : `Launch 1 run`}
   367|       </Button>
   368|     );
   369|   };
   370|   const previewNotice = (() => {
   371|     const notices: string[] = [];
   372|     if (target.type === 'pureWithAnchorAsset') {
   373|       notices.push(
   374|         `Dagster will materialize all partitions downstream of the ` +
   375|           `selected partitions for the selected assets, using separate runs 
   376|                 ${backfillPolicyVaries ? `and obeying backfill policies.` : `as needed.`}`,
   377|       );
   378|     } else if (backfillPolicyVaries) {
   379|       notices.push(
   380|         `Dagster will materialize the selected partitions for the ` +
   381|           `selected assets using varying backfill policies.`,
   382|       );
   383|     } else if (assets[0]?.backfillPolicy) {
   384|       notices.push(`${assets[0].backfillPolicy.description}.`);
   385|     }
   386|     if (missingFailedOnly) {
   387|       notices.push(
   388|         `Only ${partitionCountString(
   389|           keysFiltered.length,
   390|         )} failed and missing partitions will be materialized.`,
   391|       );
   392|     }
   393|     return notices.join(' ');
   394|   })();
   395|   return (
   396|     <>
   397|       <div data-testid={testId('choose-partitions-dialog')}>
   398|         <Warnings
   399|           displayedPartitionDefinition={displayedPartitionDefinition}
   400|           launchAsBackfill={launchAsBackfill}
   401|           upstreamAssetKeys={upstreamAssetKeys}
   402|           selections={selections}
   403|           setSelections={setSelections}
   404|         />
   405|         {target.type === 'pureAll' ? (
   406|           <ToggleableSection
   407|             isInitiallyOpen={true}
   408|             title={
   409|               <Box flex={{direction: 'row', justifyContent: 'space-between'}}>
   410|                 <Subheading>Partition selection</Subheading>
   411|                 <span>All partitions</span>
   412|               </Box>
   413|             }
   414|           >

# --- HUNK 3: Lines 474-513 ---
   474|                   dimensionType={range.dimension.type}
   475|                   selected={range.selectedKeys}
   476|                   setSelected={(selectedKeys) =>
   477|                     setSelections((selections) =>
   478|                       selections.map((r) =>
   479|                         r.dimension === range.dimension ? {...r, selectedKeys} : r,
   480|                       ),
   481|                     )
   482|                   }
   483|                   partitionDefinitionName={
   484|                     displayedPartitionDefinition?.name ||
   485|                     displayedBaseAsset?.partitionDefinition?.dimensionTypes.find(
   486|                       (d) => d.name === range.dimension.name,
   487|                     )?.dynamicPartitionsDefinitionName
   488|                   }
   489|                   repoAddress={repoAddress}
   490|                   refetch={refetch}
   491|                 />
   492|               </Box>
   493|             ))}
   494|           </ToggleableSection>
   495|         )}
   496|         <ToggleableSection
   497|           title={
   498|             <Box flex={{direction: 'row', justifyContent: 'space-between'}}>
   499|               <Subheading>Tags</Subheading>
   500|               <span>{tags.length} tags</span>
   501|             </Box>
   502|           }
   503|           isInitiallyOpen={false}
   504|         >
   505|           <Box padding={{vertical: 16, horizontal: 20}} flex={{direction: 'column', gap: 12}}>
   506|             <TagEditor
   507|               tagsFromSession={tags}
   508|               onChange={setTags}
   509|               open={tagEditorOpen}
   510|               onRequestClose={() => setTagEditorOpen(false)}
   511|             />
   512|             <div>Tags will be applied to all backfill runs</div>
   513|             {tags.length ? (

# --- HUNK 4: Lines 549-617 ---
   549|                   <Subheading>Launch as...</Subheading>
   550|                   <Radio
   551|                     data-testid={testId('ranges-as-tags-true-radio')}
   552|                     checked={canLaunchWithRangesAsTags && launchWithRangesAsTags}
   553|                     disabled={!canLaunchWithRangesAsTags}
   554|                     onChange={() => setLaunchWithRangesAsTags(!launchWithRangesAsTags)}
   555|                   >
   556|                     <Box flex={{direction: 'row', alignItems: 'center', gap: 8}}>
   557|                       <span>Single run</span>
   558|                       <Tooltip
   559|                         targetTagName="div"
   560|                         position="top-left"
   561|                         content={
   562|                           <div style={{maxWidth: 300}}>
   563|                             This option requires that your assets are written to operate on a
   564|                             partition key range via context.asset_partition_key_range_for_output or
   565|                             context.asset_partitions_time_window_for_output.
   566|                           </div>
   567|                         }
   568|                       >
   569|                         <Icon name="info" color={colorAccentGray()} />
   570|                       </Tooltip>
   571|                     </Box>
   572|                   </Radio>
   573|                   <Radio
   574|                     data-testid={testId('ranges-as-tags-false-radio')}
   575|                     checked={!canLaunchWithRangesAsTags || !launchWithRangesAsTags}
   576|                     disabled={!canLaunchWithRangesAsTags}
   577|                     onChange={() => setLaunchWithRangesAsTags(!launchWithRangesAsTags)}
   578|                   >
   579|                     Multiple runs (One per selected partition)
   580|                   </Radio>
   581|                 </RadioContainer>
   582|               ) : null}
   583|             </Box>
   584|           </ToggleableSection>
   585|         )}
   586|       </div>
   587|       <BackfillPreviewModal
   588|         assets={assets}
   589|         keysFiltered={keysFiltered}
   590|         isOpen={previewOpen}
   591|         setOpen={setPreviewOpen}
   592|       />
   593|       {previewNotice && (
   594|         <PartitionSelectionNotice onShowPreview={() => setPreviewOpen(true)} text={previewNotice} />
   595|       )}
   596|       <DialogFooter
   597|         topBorder={!previewNotice}
   598|         left={
   599|           'partitionSetName' in target && (
   600|             <RunningBackfillsNotice partitionSetName={target.partitionSetName} />
   601|           )
   602|         }
   603|       >
   604|         <Button intent="none" onClick={() => setOpen(false)}>
   605|           Cancel
   606|         </Button>
   607|         {launchButton()}
   608|       </DialogFooter>
   609|     </>
   610|   );
   611| };
   612| const UpstreamUnavailableWarning = ({
   613|   upstreamAssetKeys,
   614|   selections,
   615|   setSelections,
   616| }: {
   617|   upstreamAssetKeys: AssetKey[];

# --- HUNK 5: Lines 725-787 ---
   725|         )
   726|         .map((a) => a.assetKey),
   727|     [upstreamAssets, displayedPartitionDefinition],
   728|   );
   729|   const alerts = [
   730|     UpstreamUnavailableWarning({
   731|       upstreamAssetKeys: upstreamAssetKeysSamePartitioning,
   732|       selections,
   733|       setSelections,
   734|     }),
   735|     instance && launchAsBackfill && DaemonNotRunningAlert({instance}),
   736|     instance && launchAsBackfill && UsingDefaultLauncherAlert({instance}),
   737|   ]
   738|     .filter((a) => !!a)
   739|     .map((a, index) => <Box key={index}>{a}</Box>);
   740|   if (!instance || !alerts.length) {
   741|     return null;
   742|   }
   743|   return (
   744|     <ToggleableSection
   745|       background={colorBackgroundYellow()}
   746|       isInitiallyOpen={false}
   747|       title={
   748|         <Box
   749|           flex={{direction: 'row', justifyContent: 'space-between', alignItems: 'center'}}
   750|           style={{color: colorTextYellow()}}
   751|         >
   752|           <Box flex={{alignItems: 'center', gap: 12}}>
   753|             <Icon name="warning" color={colorTextYellow()} />
   754|             <Subheading>Warnings</Subheading>
   755|           </Box>
   756|           <span>{alerts.length > 1 ? `${alerts.length} warnings` : `1 warning`}</span>
   757|         </Box>
   758|       }
   759|     >
   760|       <Box flex={{direction: 'column', gap: 16}} padding={{vertical: 12, horizontal: 20}}>
   761|         {alerts}
   762|       </Box>
   763|     </ToggleableSection>
   764|   );
   765| };
   766| const PartitionSelectionNotice = ({
   767|   text,
   768|   onShowPreview,
   769| }: {
   770|   text: string;
   771|   onShowPreview?: () => void;
   772| }) => {
   773|   return (
   774|     <Box padding={{horizontal: 16, top: 16, bottom: 8}} style={{position: 'relative'}} border="top">
   775|       <Alert intent="info" title={<Box style={{marginRight: 100, minHeight: 24}}>{text}</Box>} />
   776|       <div style={{position: 'absolute', top: 24, right: 24, zIndex: 4}}>
   777|         <Button
   778|           data-testid={testId('backfill-preview-button')}
   779|           intent="none"
   780|           onClick={onShowPreview}
   781|         >
   782|           Preview
   783|         </Button>
   784|       </div>
   785|     </Box>
   786|   );
   787| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/PartitionHealthSummary.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-63 ---
     1| import {Spinner, Box, Caption} from '@dagster-io/ui-components';
     2| import React from 'react';
     3| import {displayNameForAssetKey} from '../asset-graph/Utils';
     4| import {PartitionStatus} from '../partitions/PartitionStatus';
     5| import {AssetPartitionStatus} from './AssetPartitionStatus';
     6| import {isTimeseriesDimension} from './MultipartitioningSupport';
     7| import {AssetKey} from './types';
     8| import {PartitionHealthData, PartitionDimensionSelection} from './usePartitionHealthData';
     9| interface Props {
    10|   assetKey: AssetKey;
    11|   showAssetKey?: boolean;
    12|   data: PartitionHealthData[];
    13|   selections?: PartitionDimensionSelection[];
    14| }
    15| export const PartitionHealthSummary = React.memo((props: Props) => {
    16|   const {showAssetKey, assetKey, data, selections} = props;
    17|   const assetData = data.find((d) => JSON.stringify(d.assetKey) === JSON.stringify(assetKey));
    18|   if (!assetData) {
    19|     return (
    20|       <div style={{minHeight: 55, position: 'relative'}}>
    21|         <Spinner purpose="section" />
    22|       </div>
    23|     );
    24|   }
    25|   const keysForTotals = selections
    26|     ? selections.map((r) => r.selectedKeys)
    27|     : assetData.dimensions.map((d) => d.partitionKeys);
    28|   const total = keysForTotals.reduce((total, d) => d.length * total, 1);
    29|   const success = keysForTotals
    30|     .reduce(
    31|       (combinations, d) =>
    32|         combinations.length
    33|           ? combinations.flatMap((keys) => d.map((key) => [...keys, key]))
    34|           : d.map((key) => [key]),
    35|       [] as string[][],
    36|     )
    37|     .filter((dkeys) => assetData.stateForKey(dkeys) === AssetPartitionStatus.MATERIALIZED).length;
    38|   return (
    39|     <div>
    40|       <Box flex={{justifyContent: 'space-between'}} style={{fontWeight: 600}} margin={{bottom: 4}}>
    41|         <Caption>{showAssetKey ? displayNameForAssetKey(assetKey) : 'Materialized'}</Caption>
    42|         <Caption>{`${success.toLocaleString()}/${total.toLocaleString()}`}</Caption>
    43|       </Box>
    44|       {assetData.dimensions.map((dimension, dimensionIdx) => (
    45|         <Box key={dimensionIdx} margin={{bottom: 4}}>
    46|           {assetData.dimensions.length > 1 && <Caption>{dimension.name}</Caption>}
    47|           <PartitionStatus
    48|             small
    49|             partitionNames={dimension.partitionKeys}
    50|             splitPartitions={!isTimeseriesDimension(dimension)}
    51|             selected={selections ? selections[dimensionIdx]!.selectedKeys : undefined}
    52|             health={{
    53|               ranges: assetData.rangesForSingleDimension(
    54|                 dimensionIdx,
    55|                 selections?.length === 2 ? selections[1 - dimensionIdx]!.selectedRanges : undefined,
    56|               ),
    57|             }}
    58|           />
    59|         </Box>
    60|       ))}
    61|     </div>
    62|   );
    63| });


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/RunningBackfillsNotice.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-47 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {Box, Icon, colorLinkDefault, colorTextLight} from '@dagster-io/ui-components';
     3| import React from 'react';
     4| import {Link} from 'react-router-dom';
     5| import {
     6|   RunningBackfillsNoticeQuery,
     7|   RunningBackfillsNoticeQueryVariables,
     8| } from './types/RunningBackfillsNotice.types';
     9| export const RunningBackfillsNotice = ({partitionSetName}: {partitionSetName: string}) => {
    10|   const {data} = useQuery<RunningBackfillsNoticeQuery, RunningBackfillsNoticeQueryVariables>(
    11|     RUNNING_BACKFILLS_NOTICE_QUERY,
    12|   );
    13|   const runningBackfills =
    14|     data?.partitionBackfillsOrError.__typename === 'PartitionBackfills'
    15|       ? data.partitionBackfillsOrError.results
    16|       : [];
    17|   const runningBackfillCount = runningBackfills.filter(
    18|     (r) => r.partitionSetName === partitionSetName,
    19|   ).length;
    20|   if (runningBackfillCount === 0) {
    21|     return <span />;
    22|   }
    23|   return (
    24|     <div style={{color: colorTextLight(), maxWidth: 350}}>
    25|       {runningBackfillCount === 1
    26|         ? 'Note: A backfill has been requested for this job and may be refreshing displayed assets. '
    27|         : `Note: ${runningBackfillCount} backfills have been requested for this job and may be refreshing displayed assets. `}
    28|       <Link to="/overview/backfills" target="_blank">
    29|         <Box flex={{gap: 4, display: 'inline-flex', alignItems: 'center'}}>
    30|           View <Icon name="open_in_new" color={colorLinkDefault()} />
    31|         </Box>
    32|       </Link>
    33|     </div>
    34|   );
    35| };
    36| export const RUNNING_BACKFILLS_NOTICE_QUERY = gql`
    37|   query RunningBackfillsNoticeQuery {
    38|     partitionBackfillsOrError(status: REQUESTED) {
    39|       ... on PartitionBackfills {
    40|         results {
    41|           id
    42|           partitionSetName
    43|         }
    44|       }
    45|     }
    46|   }
    47| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/Stale.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-114 ---
     1| import {
     2|   BaseTag,
     3|   Body,
     4|   Box,
     5|   ButtonLink,
     6|   Caption,
     7|   CaptionMono,
     8|   Icon,
     9|   Popover,
    10|   colorBackgroundYellow,
    11|   colorTextYellow,
    12| } from '@dagster-io/ui-components';
    13| import groupBy from 'lodash/groupBy';
    14| import isEqual from 'lodash/isEqual';
    15| import React from 'react';
    16| import {Link} from 'react-router-dom';
    17| import {displayNameForAssetKey, LiveDataForNode} from '../asset-graph/Utils';
    18| import {AssetNodeKeyFragment} from '../asset-graph/types/AssetNode.types';
    19| import {AssetKeyInput, StaleCauseCategory, StaleStatus} from '../graphql/types';
    20| import {assetDetailsPathForKey} from './assetDetailsPathForKey';
    21| type StaleDataForNode = Pick<LiveDataForNode, 'staleCauses' | 'staleStatus'>;
    22| export const isAssetMissing = (liveData?: Pick<StaleDataForNode, 'staleStatus'>) =>
    23|   liveData && liveData.staleStatus === StaleStatus.MISSING;
    24| export const isAssetStale = (liveData?: Pick<StaleDataForNode, 'staleStatus'>) =>
    25|   liveData && liveData.staleStatus === StaleStatus.STALE;
    26| const LABELS = {
    27|   self: {
    28|     [StaleCauseCategory.CODE]: 'Code version',
    29|     [StaleCauseCategory.DATA]: 'Data version',
    30|     [StaleCauseCategory.DEPENDENCIES]: 'Dependencies',
    31|   },
    32|   upstream: {
    33|     [StaleCauseCategory.CODE]: 'Upstream code version',
    34|     [StaleCauseCategory.DATA]: 'Upstream data',
    35|     [StaleCauseCategory.DEPENDENCIES]: 'Upstream dependencies',
    36|   },
    37| };
    38| export const StaleReasonsLabel = ({
    39|   liveData,
    40|   include,
    41|   assetKey,
    42| }: {
    43|   assetKey: AssetKeyInput;
    44|   include: 'all' | 'upstream' | 'self';
    45|   liveData?: StaleDataForNode;
    46| }) => {
    47|   if (!isAssetStale(liveData) || !liveData?.staleCauses.length) {
    48|     return null;
    49|   }
    50|   return (
    51|     <Body color={colorTextYellow()}>
    52|       <Popover
    53|         position="top"
    54|         content={<StaleCausesPopoverSummary causes={liveData.staleCauses} />}
    55|         interactionKind="hover"
    56|         className="chunk-popover-target"
    57|       >
    58|         {Object.keys(groupedCauses(assetKey, include, liveData)).join(', ')}
    59|       </Popover>
    60|     </Body>
    61|   );
    62| };
    63| export const StaleReasonsTags = ({
    64|   liveData,
    65|   include,
    66|   assetKey,
    67|   onClick,
    68| }: {
    69|   assetKey: AssetKeyInput;
    70|   include: 'all' | 'upstream' | 'self';
    71|   liveData?: StaleDataForNode;
    72|   onClick?: () => void;
    73| }) => {
    74|   if (!isAssetStale(liveData) || !liveData?.staleCauses.length) {
    75|     return null;
    76|   }
    77|   return (
    78|     <>
    79|       {Object.entries(groupedCauses(assetKey, include, liveData)).map(([label, causes]) => (
    80|         <Popover
    81|           key={label}
    82|           content={<StaleCausesPopoverSummary causes={causes} />}
    83|           position="top"
    84|           interactionKind="hover"
    85|           className="chunk-popover-target"
    86|         >
    87|           <BaseTag
    88|             fillColor={colorBackgroundYellow()}
    89|             textColor={colorTextYellow()}
    90|             interactive={!!onClick}
    91|             icon={<Icon name="changes_present" color={colorTextYellow()} />}
    92|             label={
    93|               onClick ? (
    94|                 <ButtonLink underline="never" onClick={onClick} color={colorTextYellow()}>
    95|                   {label}
    96|                 </ButtonLink>
    97|               ) : (
    98|                 label
    99|               )
   100|             }
   101|           />
   102|         </Popover>
   103|       ))}
   104|     </>
   105|   );
   106| };
   107| function groupedCauses(
   108|   assetKey: AssetKeyInput,
   109|   include: 'all' | 'upstream' | 'self',
   110|   liveData?: StaleDataForNode,
   111| ) {
   112|   const all = (liveData?.staleCauses || [])
   113|     .map((cause) => {
   114|       const target = isEqual(assetKey.path, cause.key.path) ? 'self' : 'upstream';


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/asset-checks/AssetCheckDetailModal.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-34 ---
     1| import {gql} from '@apollo/client';
     2| import {
     3|   Body2,
     4|   Box,
     5|   Button,
     6|   CursorHistoryControls,
     7|   Dialog,
     8|   DialogBody,
     9|   DialogFooter,
    10|   Mono,
    11|   NonIdealState,
    12|   Spinner,
    13|   Table,
    14|   colorTextLight,
    15| } from '@dagster-io/ui-components';
    16| import React from 'react';
    17| import {Link} from 'react-router-dom';
    18| import {FIFTEEN_SECONDS, useQueryRefreshAtInterval} from '../../app/QueryRefresh';
    19| import {useTrackPageView} from '../../app/analytics';
    20| import {AssetKeyInput} from '../../graphql/types';
    21| import {useDocumentTitle} from '../../hooks/useDocumentTitle';
    22| import {METADATA_ENTRY_FRAGMENT, MetadataEntries} from '../../metadata/MetadataEntry';
    23| import {MetadataEntryFragment} from '../../metadata/types/MetadataEntry.types';
    24| import {linkToRunEvent} from '../../runs/RunUtils';
    25| import {useCursorPaginatedQuery} from '../../runs/useCursorPaginatedQuery';
    26| import {TimestampDisplay} from '../../schedules/TimestampDisplay';
    27| import {AssetCheckStatusTag} from './AssetCheckStatusTag';
    28| import {
    29|   AssetCheckDetailsQuery,
    30|   AssetCheckDetailsQueryVariables,
    31| } from './types/AssetCheckDetailModal.types';
    32| export const AssetCheckDetailModal = ({
    33|   assetKey,
    34|   checkName,

# --- HUNK 2: Lines 226-357 ---
   226|     assetCheckExecutions(
   227|       assetKey: $assetKey
   228|       checkName: $checkName
   229|       limit: $limit
   230|       cursor: $cursor
   231|     ) {
   232|       id
   233|       ...AssetCheckExecutionFragment
   234|     }
   235|   }
   236|   ${ASSET_CHECK_EXECUTION_FRAGMENT}
   237| `;
   238| export function MigrationRequired() {
   239|   return (
   240|     <Box padding={24}>
   241|       <NonIdealState
   242|         icon="warning"
   243|         title="Migration required"
   244|         description={
   245|           <Box flex={{direction: 'column'}}>
   246|             <Body2 color={colorTextLight()} style={{padding: '6px 0'}}>
   247|               A database schema migration is required to use asset checks. Run{' '}
   248|               <Mono>dagster instance migrate</Mono>.
   249|             </Body2>
   250|           </Box>
   251|         }
   252|       />
   253|     </Box>
   254|   );
   255| }
   256| export function AgentUpgradeRequired() {
   257|   return (
   258|     <Box padding={24}>
   259|       <NonIdealState
   260|         icon="warning"
   261|         title="Agent upgrade required"
   262|         description={
   263|           <Box flex={{direction: 'column'}}>
   264|             <Body2 color={colorTextLight()} style={{padding: '6px 0'}}>
   265|               Checks require Dagster Cloud Agent version 1.5 or higher. Upgrade your agent(s) to use
   266|               checks.
   267|             </Body2>
   268|           </Box>
   269|         }
   270|       />
   271|     </Box>
   272|   );
   273| }
   274| export function NeedsUserCodeUpgrade() {
   275|   return (
   276|     <Box padding={24}>
   277|       <NonIdealState
   278|         icon="warning"
   279|         title="Upgrade required"
   280|         description={
   281|           <Box flex={{direction: 'column'}}>
   282|             <Body2 color={colorTextLight()} style={{padding: '6px 0'}}>
   283|               Checks aren&apos;t supported with dagster versions before 1.5. Upgrade the dagster
   284|               library in this code location to use them.
   285|             </Body2>
   286|           </Box>
   287|         }
   288|       />
   289|     </Box>
   290|   );
   291| }
   292| export function NoChecks() {
   293|   return (
   294|     <Box padding={24}>
   295|       <NonIdealState
   296|         icon="asset_check"
   297|         title="No checks found for this asset"
   298|         description={
   299|           <Box flex={{direction: 'column'}}>
   300|             <Body2 color={colorTextLight()} style={{padding: '6px 0'}}>
   301|               Asset Checks run after a materialization and can verify a particular property of a
   302|               data asset. Checks can help ensure that the contents of each data asset is correct.
   303|             </Body2>
   304|             {/* <Box
   305|               as="a"
   306|               href="https://docs.dagster.io/concepts/assets/asset-checks"
   307|               target="_blank"
   308|               flex={{direction: 'row', alignItems: 'end', gap: 4}}
   309|             >
   310|               Learn more about Asset Checks
   311|               <Icon name="open_in_new" color={colorLinkDefault()} />
   312|             </Box> */}
   313|           </Box>
   314|         }
   315|       />
   316|     </Box>
   317|   );
   318| }
   319| function NoExecutions() {
   320|   return (
   321|     <Box padding={24}>
   322|       <NonIdealState
   323|         icon="asset_check"
   324|         title="No executions found for this check"
   325|         description={
   326|           <Box flex={{direction: 'column'}}>
   327|             <Body2 color={colorTextLight()} style={{padding: '6px 0'}}>
   328|               No executions found. Materialize this asset and the check will run automatically.
   329|             </Body2>
   330|             {/* <Box
   331|               as="a"
   332|               href="https://docs.dagster.io/concepts/assets/asset-checks"
   333|               target="_blank"
   334|               flex={{direction: 'row', alignItems: 'end', gap: 4}}
   335|             >
   336|               Learn more about Asset Checks
   337|               <Icon name="open_in_new" color={colorLinkDefault()} />
   338|             </Box> */}
   339|           </Box>
   340|         }
   341|       />
   342|     </Box>
   343|   );
   344| }
   345| const InlineableTypenames: MetadataEntryFragment['__typename'][] = [
   346|   'BoolMetadataEntry',
   347|   'FloatMetadataEntry',
   348|   'IntMetadataEntry',
   349|   'TextMetadataEntry',
   350|   'UrlMetadataEntry',
   351|   'PathMetadataEntry',
   352|   'NullMetadataEntry',
   353|   'TableSchemaMetadataEntry',
   354| ];
   355| function canShowMetadataInline(entries: MetadataEntryFragment[]) {
   356|   if (entries.length > 1) {
   357|     return false;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/asset-checks/AssetCheckStatusTag.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-55 ---
     1| import {
     2|   BaseTag,
     3|   Box,
     4|   Icon,
     5|   Spinner,
     6|   Tag,
     7|   colorAccentGray,
     8|   colorBackgroundLight,
     9|   colorTextLight,
    10| } from '@dagster-io/ui-components';
    11| import * as React from 'react';
    12| import {assertUnreachable} from '../../app/Util';
    13| import {
    14|   AssetCheckEvaluation,
    15|   AssetCheckExecution,
    16|   AssetCheckExecutionResolvedStatus,
    17|   AssetCheckSeverity,
    18| } from '../../graphql/types';
    19| import {linkToRunEvent} from '../../runs/RunUtils';
    20| import {TagActionsPopover} from '../../ui/TagActions';
    21| export const AssetCheckStatusTag = ({
    22|   execution,
    23| }: {
    24|   execution:
    25|     | (Pick<AssetCheckExecution, 'runId' | 'status' | 'timestamp' | 'stepKey'> & {
    26|         evaluation: Pick<AssetCheckEvaluation, 'severity'> | null;
    27|       })
    28|     | null;
    29| }) => {
    30|   if (!execution) {
    31|     return (
    32|       <BaseTag
    33|         textColor={colorTextLight()}
    34|         fillColor={colorBackgroundLight()}
    35|         icon={<Icon name="dot" color={colorAccentGray()} />}
    36|         label="Not evaluated"
    37|       />
    38|     );
    39|   }
    40|   const {status, runId, evaluation} = execution;
    41|   if (!status) {
    42|     return null;
    43|   }
    44|   console.log(status, evaluation);
    45|   const renderTag = () => {
    46|     const isWarn = evaluation?.severity === AssetCheckSeverity.WARN;
    47|     switch (status) {
    48|       case AssetCheckExecutionResolvedStatus.IN_PROGRESS:
    49|         return (
    50|           <Tag intent="primary">
    51|             <Box flex={{direction: 'row', alignItems: 'center', gap: 4}}>
    52|               <Spinner purpose="body-text" />
    53|               Running
    54|             </Box>
    55|           </Tag>


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/asset-checks/AssetChecksBanner.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-17 ---
     1| import {Alert, Icon, colorAccentBlue} from '@dagster-io/ui-components';
     2| import React from 'react';
     3| export const AssetChecksBanner = () => {
     4|   return (
     5|     <Alert
     6|       intent="info"
     7|       title="Asset Checks are experimental"
     8|       icon={<Icon name="info" color={colorAccentBlue()} />}
     9|       description={
    10|         <span>
    11|           You can learn more about this new feature and provide feedback{' '}
    12|           <a href="https://github.com/dagster-io/dagster/discussions/16266">here</a>.
    13|         </span>
    14|       }
    15|     />
    16|   );
    17| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/asset-checks/VirtualizedAssetCheckTable.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-22 ---
     1| import {gql} from '@apollo/client';
     2| import {Body2, Box, Caption, colorTextLight} from '@dagster-io/ui-components';
     3| import {useVirtualizer} from '@tanstack/react-virtual';
     4| import * as React from 'react';
     5| import {Link} from 'react-router-dom';
     6| import styled from 'styled-components';
     7| import {linkToRunEvent} from '../../runs/RunUtils';
     8| import {TimestampDisplay} from '../../schedules/TimestampDisplay';
     9| import {testId} from '../../testing/testId';
    10| import {HeaderCell, Row, RowCell, Container, Inner} from '../../ui/VirtualizedTable';
    11| import {assetDetailsPathForAssetCheck} from '../assetDetailsPathForKey';
    12| import {ASSET_CHECK_EXECUTION_FRAGMENT, MetadataCell} from './AssetCheckDetailModal';
    13| import {AssetCheckStatusTag} from './AssetCheckStatusTag';
    14| import {ExecuteChecksButton} from './ExecuteChecksButton';
    15| import {ExecuteChecksButtonAssetNodeFragment} from './types/ExecuteChecksButton.types';
    16| import {AssetCheckTableFragment} from './types/VirtualizedAssetCheckTable.types';
    17| type Props = {
    18|   assetNode: ExecuteChecksButtonAssetNodeFragment;
    19|   rows: AssetCheckTableFragment[];
    20| };
    21| export const VirtualizedAssetCheckTable = ({assetNode, rows}: Props) => {
    22|   const parentRef = React.useRef<HTMLDivElement | null>(null);

# --- HUNK 2: Lines 108-148 ---
   108|         </RowCell>
   109|       </RowGrid>
   110|     </Row>
   111|   );
   112| };
   113| const CaptionEllipsed = styled(Caption)`
   114|   text-overflow: ellipsis;
   115|   max-width: 100%;
   116|   overflow: hidden;
   117|   white-space: nowrap;
   118| `;
   119| export const VirtualizedAssetCheckHeader = () => {
   120|   return (
   121|     <Box
   122|       border="top-and-bottom"
   123|       style={{
   124|         display: 'grid',
   125|         gridTemplateColumns: TEMPLATE_COLUMNS,
   126|         height: '32px',
   127|         fontSize: '12px',
   128|         color: colorTextLight(),
   129|       }}
   130|     >
   131|       <HeaderCell>Check name</HeaderCell>
   132|       <HeaderCell>Status</HeaderCell>
   133|       <HeaderCell>Evaluation timestamp</HeaderCell>
   134|       <HeaderCell>Evaluation metadata</HeaderCell>
   135|       <HeaderCell>Actions</HeaderCell>
   136|     </Box>
   137|   );
   138| };
   139| const RowGrid = styled(Box)`
   140|   display: grid;
   141|   grid-template-columns: ${TEMPLATE_COLUMNS};
   142|   height: 100%;
   143| `;
   144| export const ASSET_CHECK_TABLE_FRAGMENT = gql`
   145|   fragment AssetCheckTableFragment on AssetCheck {
   146|     name
   147|     description
   148|     canExecuteIndividually


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/auto-materialization/AutomaterializationRoot.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-25 ---
     1| import {useLazyQuery} from '@apollo/client';
     2| import {
     3|   Alert,
     4|   Box,
     5|   Page,
     6|   Checkbox,
     7|   Spinner,
     8|   Subtitle2,
     9|   Heading,
    10|   PageHeader,
    11|   Table,
    12| } from '@dagster-io/ui-components';
    13| import React, {useLayoutEffect} from 'react';
    14| import {useConfirmation} from '../../app/CustomConfirmationProvider';
    15| import {useUnscopedPermissions} from '../../app/Permissions';
    16| import {useQueryRefreshAtInterval} from '../../app/QueryRefresh';
    17| import {useTrackPageView} from '../../app/analytics';
    18| import {InstigationTickStatus} from '../../graphql/types';
    19| import {useQueryPersistedState} from '../../hooks/useQueryPersistedState';
    20| import {LiveTickTimeline} from '../../instigation/LiveTickTimeline2';
    21| import {isOldTickWithoutEndtimestamp} from '../../instigation/util';
    22| import {OverviewTabs} from '../../overview/OverviewTabs';
    23| import {useAutomaterializeDaemonStatus} from '../AutomaterializeDaemonStatusTag';
    24| import {ASSET_DAEMON_TICKS_QUERY} from './AssetDaemonTicksQuery';
    25| import {AutomaterializationEvaluationHistoryTable} from './AutomaterializationEvaluationHistoryTable';

# --- HUNK 2: Lines 91-131 ---
    91|             const copy = {...tick};
    92|             copy.endTimestamp = ticks[index - 1]!.timestamp;
    93|             copy.status = InstigationTickStatus.FAILURE;
    94|             return copy;
    95|           }
    96|           return tick;
    97|         }) ?? []
    98|       );
    99|     },
   100|     [...ids.slice(0, 100)],
   101|   );
   102|   const onHoverTick = React.useCallback(
   103|     (tick: AssetDaemonTickFragment | undefined) => {
   104|       setIsPaused(!!tick);
   105|     },
   106|     [setIsPaused],
   107|   );
   108|   return (
   109|     <Page>
   110|       <PageHeader title={<Heading>Overview</Heading>} tabs={<OverviewTabs tab="amp" />} />
   111|       <Box padding={{vertical: 12, horizontal: 24}} flex={{direction: 'column', gap: 12}}>
   112|         <Alert
   113|           intent="info"
   114|           title="[Experimental] Dagster can automatically materialize assets when criteria are met."
   115|           description={
   116|             <>
   117|               Auto-materialization enables a declarative approach to asset scheduling  instead of
   118|               defining imperative workflows to materialize your assets, you just describe the
   119|               conditions under which they should be materialized.{' '}
   120|               <a
   121|                 href="https://docs.dagster.io/concepts/assets/asset-auto-execution"
   122|                 target="_blank"
   123|                 rel="noreferrer"
   124|               >
   125|                 Learn more about auto-materialization here
   126|               </a>
   127|               .
   128|             </>
   129|           }
   130|         />
   131|       </Box>


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/auto-materialization/AutomaterializationTickDetailDialog.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-30 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {
     3|   Box,
     4|   Subtitle2,
     5|   Caption,
     6|   Icon,
     7|   Spinner,
     8|   colorTextLight,
     9|   colorBackgroundDefault,
    10| } from '@dagster-io/ui-components';
    11| import {useVirtualizer} from '@tanstack/react-virtual';
    12| import React from 'react';
    13| import {Link} from 'react-router-dom';
    14| import styled from 'styled-components';
    15| import {Timestamp} from '../../app/time/Timestamp';
    16| import {tokenForAssetKey} from '../../asset-graph/Utils';
    17| import {AssetKeyInput, InstigationTickStatus} from '../../graphql/types';
    18| import {TickDetailSummary} from '../../instigation/TickDetailsDialog';
    19| import {HeaderCell, Inner, Row, RowCell} from '../../ui/VirtualizedTable';
    20| import {buildRepoAddress} from '../../workspace/buildRepoAddress';
    21| import {workspacePathFromAddress} from '../../workspace/workspacePath';
    22| import {AssetLink} from '../AssetLink';
    23| import {
    24|   AssetKeysDialog,
    25|   AssetKeysDialogHeader,
    26|   AssetKeysDialogEmptyState,
    27| } from '../AutoMaterializePolicyPage/AssetKeysDialog';
    28| import {assetDetailsPathForKey} from '../assetDetailsPathForKey';
    29| import {AssetDaemonTickFragment} from './types/AssetDaemonTicksQuery.types';
    30| import {

# --- HUNK 2: Lines 68-125 ---
    68|         map[tokenForAssetKey(assetKey)] = partitionKeys;
    69|       });
    70|       return map;
    71|     }, [tick?.requestedMaterializationsForAssets]);
    72|     const content = React.useMemo(() => {
    73|       if (queryString && !filteredAssetKeys.length) {
    74|         return (
    75|           <AssetKeysDialogEmptyState
    76|             title="No matching asset keys"
    77|             description={
    78|               <>
    79|                 No matching asset keys for <strong>{queryString}</strong>
    80|               </>
    81|             }
    82|           />
    83|         );
    84|       }
    85|       if (!tick?.requestedAssetKeys.length) {
    86|         return (
    87|           <Box padding={{vertical: 12, horizontal: 24}}>
    88|             <Caption color={colorTextLight()}>None</Caption>
    89|           </Box>
    90|         );
    91|       }
    92|       return (
    93|         <div style={{overflow: 'scroll'}} ref={parentRef}>
    94|           <Box
    95|             border="top-and-bottom"
    96|             style={{
    97|               display: 'grid',
    98|               gridTemplateColumns: TEMPLATE_COLUMNS,
    99|               height: '32px',
   100|               fontSize: '12px',
   101|               color: colorTextLight(),
   102|               position: 'sticky',
   103|               top: 0,
   104|               zIndex: 1,
   105|               background: colorBackgroundDefault(),
   106|             }}
   107|           >
   108|             <HeaderCell>Asset</HeaderCell>
   109|             <HeaderCell>Group</HeaderCell>
   110|             <HeaderCell>Result</HeaderCell>
   111|           </Box>
   112|           <Inner $totalHeight={totalHeight}>
   113|             {items.map(({index, key, size, start}) => {
   114|               const assetKey = filteredAssetKeys[index]!;
   115|               return (
   116|                 <AssetDetailRow
   117|                   key={key}
   118|                   $height={size}
   119|                   $start={start}
   120|                   assetKey={assetKey}
   121|                   partitionKeys={assetKeyToPartitionsMap[tokenForAssetKey(assetKey)]}
   122|                   evaluationId={tick.autoMaterializeAssetEvaluationId!}
   123|                 />
   124|               );
   125|             })}

# --- HUNK 3: Lines 201-246 ---
   201|     },
   202|   );
   203|   const asset = data?.assetOrError.__typename === 'Asset' ? data.assetOrError : null;
   204|   const definition = asset?.definition;
   205|   const repoAddress = definition
   206|     ? buildRepoAddress(definition.repository.name, definition.repository.location.name)
   207|     : null;
   208|   return (
   209|     <Row $start={$start} $height={$height}>
   210|       <RowGrid border="bottom">
   211|         <RowCell>
   212|           <AssetLink path={assetKey.path} icon="asset" textStyle="middle-truncate" />
   213|         </RowCell>
   214|         <RowCell>
   215|           {data ? (
   216|             definition && definition.groupName && repoAddress ? (
   217|               <Link
   218|                 to={workspacePathFromAddress(repoAddress, `/asset-groups/${definition.groupName}`)}
   219|               >
   220|                 <Box flex={{direction: 'row', gap: 8, alignItems: 'center'}}>
   221|                   <Icon color={colorTextLight()} name="asset_group" />
   222|                   {definition.groupName}
   223|                 </Box>
   224|               </Link>
   225|             ) : (
   226|               <Caption color={colorTextLight()}>Asset not found</Caption>
   227|             )
   228|           ) : (
   229|             <Spinner purpose="body-text" />
   230|           )}
   231|         </RowCell>
   232|         <RowCell>
   233|           <Link
   234|             to={assetDetailsPathForKey(assetKey, {
   235|               view: 'auto-materialize-history',
   236|               evaluation: `${evaluationId}`,
   237|             })}
   238|           >
   239|             {numMaterializations} materialization{numMaterializations === 1 ? '' : 's'} requested
   240|           </Link>
   241|         </RowCell>
   242|       </RowGrid>
   243|     </Row>
   244|   );
   245| };
   246| const RowGrid = styled(Box)`


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/gantt/GanttChart.tsx
# Total hunks: 4
# ====================================================================
# --- HUNK 1: Lines 1-34 ---
     1| import {
     2|   Box,
     3|   Checkbox,
     4|   colorAccentCyan,
     5|   colorAccentGray,
     6|   colorAccentGrayHover,
     7|   colorAccentReversed,
     8|   colorAccentYellow,
     9|   colorBackgroundCyan,
    10|   colorBackgroundDefault,
    11|   colorBackgroundGray,
    12|   colorBackgroundYellow,
    13|   colorFocusRing,
    14|   colorTextYellow,
    15|   FontFamily,
    16|   Group,
    17|   Icon,
    18|   NonIdealState,
    19|   Spinner,
    20|   SpinnerWrapper,
    21|   SplitPanelContainer,
    22|   useViewport,
    23| } from '@dagster-io/ui-components';
    24| import isEqual from 'lodash/isEqual';
    25| import * as React from 'react';
    26| import {Link} from 'react-router-dom';
    27| import styled from 'styled-components';
    28| import {AppContext} from '../app/AppContext';
    29| import {filterByQuery, GraphQueryItem} from '../app/GraphQueryImpl';
    30| import {withMiddleTruncation} from '../app/Util';
    31| import {WebSocketContext} from '../app/WebSocketProvider';
    32| import {CancelRunButton} from '../runs/RunActionButtons';
    33| import {
    34|   EMPTY_RUN_METADATA,

# --- HUNK 2: Lines 317-361 ---
   317|               options={options}
   318|               metadata={metadata || EMPTY_RUN_METADATA}
   319|               layout={layout}
   320|               hoveredStep={hoveredStep}
   321|               focusedSteps={selection.keys}
   322|               viewport={viewport}
   323|               setHoveredNodeName={setHoveredNodeName}
   324|               onClickStep={props.onClickStep}
   325|               onDoubleClickStep={props.onDoubleClickStep}
   326|             />
   327|           )}
   328|         </div>
   329|       </div>
   330|       <GraphQueryInputContainer>
   331|         {lostWebsocket ? (
   332|           <WebsocketWarning>
   333|             <Box flex={{justifyContent: 'space-around'}} margin={{bottom: 12}}>
   334|               <Group
   335|                 direction="row"
   336|                 spacing={8}
   337|                 background={colorBackgroundYellow()}
   338|                 padding={{vertical: 8, horizontal: 12}}
   339|                 alignItems="flex-start"
   340|               >
   341|                 <Icon name="warning" color={colorAccentYellow()} />
   342|                 <div style={{maxWidth: '400px', whiteSpace: 'normal', overflow: 'hidden'}}>
   343|                   <strong>Lost connection to Dagster webserver.</strong>
   344|                   <span>
   345|                     {` Verify that your instance is responding to requests at ${rootServerURI} and reload the page.`}
   346|                   </span>
   347|                 </div>
   348|               </Group>
   349|             </Box>
   350|           </WebsocketWarning>
   351|         ) : null}
   352|         <FilterInputsBackgroundBox flex={{direction: 'row', alignItems: 'center', gap: 12}}>
   353|           <GraphQueryInput
   354|             items={props.graph}
   355|             value={props.selection.query}
   356|             placeholder="Type a step subset"
   357|             onChange={props.onUpdateQuery}
   358|             presets={metadata ? interestingQueriesFor(metadata, layout) : undefined}
   359|             className={selection.keys.length > 0 ? 'has-step' : ''}
   360|           />
   361|           <Checkbox

# --- HUNK 3: Lines 538-578 ---
   538|  * Renders a line on the Gantt visualization using a thin horizontal <div> and
   539|  * a thin vertical <div> as necessary.
   540|  */
   541| const GanttLine = React.memo(
   542|   ({
   543|     minX,
   544|     minY,
   545|     maxX,
   546|     maxY,
   547|     dotted,
   548|     darkened,
   549|     depIdx,
   550|     depNotDrawn,
   551|   }: {
   552|     dotted: boolean;
   553|     darkened: boolean;
   554|     depIdx: number;
   555|     depNotDrawn: boolean;
   556|   } & Bounds) => {
   557|     const border = `${LINE_SIZE}px ${dotted ? 'dotted' : 'solid'} ${
   558|       darkened ? colorAccentGray() : colorAccentGrayHover()
   559|     }`;
   560|     const maxXAvoidingOverlap = maxX + (depIdx % 10) * LINE_SIZE;
   561|     return (
   562|       <>
   563|         <div
   564|           className="line"
   565|           style={{
   566|             height: 1,
   567|             left: minX,
   568|             width: depNotDrawn ? 50 : maxXAvoidingOverlap - minX,
   569|             top: minY - 1,
   570|             borderTop: border,
   571|             zIndex: darkened ? 100 : 1,
   572|           }}
   573|         />
   574|         {minY !== maxY && !depNotDrawn && (
   575|           <div
   576|             className="line"
   577|             style={{
   578|               width: 1,

# --- HUNK 4: Lines 587-732 ---
   587|       </>
   588|     );
   589|   },
   590|   isEqual,
   591| );
   592| function truncatedBoxLabel(box: GanttChartBox) {
   593|   if (box.width <= BOX_SHOW_LABEL_WIDTH_CUTOFF) {
   594|     return undefined;
   595|   }
   596|   const totalPadding = 7 + (box.state === IStepState.RUNNING ? 16 : 0);
   597|   const maxLength = (box.width - totalPadding) / 6.2;
   598|   return withMiddleTruncation(box.node.name, {maxLength});
   599| }
   600| const GanttChartContainer = styled.div`
   601|   height: 100%;
   602|   position: relative;
   603|   display: flex;
   604|   flex-direction: column;
   605|   z-index: 2;
   606|   user-select: none;
   607|   background: ${colorBackgroundDefault()};
   608|   .line {
   609|     position: absolute;
   610|     user-select: none;
   611|     pointer-events: none;
   612|     transition:
   613|       top ${CSS_DURATION}ms linear,
   614|       left ${CSS_DURATION}ms linear,
   615|       width ${CSS_DURATION}ms linear,
   616|       height ${CSS_DURATION}ms linear;
   617|   }
   618|   .chart-element {
   619|     font-size: 12px;
   620|     transition:
   621|       top ${CSS_DURATION}ms linear,
   622|       left ${CSS_DURATION}ms linear;
   623|     display: inline-block;
   624|     position: absolute;
   625|     color: ${colorAccentReversed()};
   626|     overflow: hidden;
   627|     user-select: text;
   628|     z-index: 2;
   629|     user-select: none;
   630|     -webkit-user-select: none;
   631|     -moz-user-select: none;
   632|     -ms-user-select: none;
   633|   }
   634|   .dot {
   635|     width: ${BOX_DOT_SIZE}px;
   636|     height: ${BOX_DOT_SIZE}px;
   637|     border: 1px solid transparent;
   638|     border-radius: ${BOX_DOT_SIZE / 2}px;
   639|   }
   640|   .box {
   641|     /* Note: padding + font changes may also impact truncatedBoxLabel */
   642|     height: ${BOX_HEIGHT - BOX_MARGIN_Y * 2}px;
   643|     padding: 3px;
   644|     padding-right: 1px;
   645|     border-radius: 2px;
   646|     white-space: nowrap;
   647|     font-family: ${FontFamily.monospace};
   648|     font-size: 12.5px;
   649|     font-weight: 700;
   650|     line-height: 15px;
   651|     transition:
   652|       top ${CSS_DURATION}ms linear,
   653|       left ${CSS_DURATION}ms linear,
   654|       width ${CSS_DURATION}ms linear,
   655|       height ${CSS_DURATION}ms linear,
   656|       box-shadow ${CSS_DURATION}ms linear;
   657|     &.focused {
   658|       box-shadow: 0 0 0 2px ${colorFocusRing()};
   659|     }
   660|     &.hovered {
   661|       box-shadow: 0 0 0 2px ${colorFocusRing()};
   662|     }
   663|     &.dynamic {
   664|       filter: brightness(115%);
   665|     }
   666|     ${SpinnerWrapper} {
   667|       display: inline-block;
   668|       vertical-align: text-bottom;
   669|       padding-right: 4px;
   670|     }
   671|   }
   672|   .marker-dot {
   673|     width: ${BOX_DOT_SIZE}px;
   674|     height: ${BOX_DOT_SIZE}px;
   675|     border: 1px solid ${colorAccentCyan()};
   676|     border-radius: ${BOX_DOT_SIZE / 2}px;
   677|   }
   678|   .marker-whiskers {
   679|     display: inline-block;
   680|     position: absolute;
   681|     height: ${BOX_HEIGHT - BOX_MARGIN_Y * 2}px;
   682|     background-color: ${colorBackgroundCyan()};
   683|     border-left: 1px solid ${colorAccentCyan()};
   684|     border-right: 1px solid ${colorAccentCyan()};
   685|     transition:
   686|       top ${CSS_DURATION}ms linear,
   687|       left ${CSS_DURATION}ms linear,
   688|       width ${CSS_DURATION}ms linear;
   689|     & > div {
   690|       border-bottom: 1px dashed ${colorAccentCyan()};
   691|       height: ${(BOX_HEIGHT - BOX_MARGIN_Y * 2) / 2}px;
   692|     }
   693|   }
   694| `;
   695| const WebsocketWarning = styled.div`
   696|   position: absolute;
   697|   bottom: 100%;
   698|   color: ${colorTextYellow()};
   699|   width: 100%;
   700| `;
   701| const GraphQueryInputContainer = styled.div`
   702|   z-index: 2;
   703|   position: absolute;
   704|   bottom: 20px;
   705|   left: 50%;
   706|   transform: translateX(-50%);
   707|   white-space: nowrap;
   708| `;
   709| const FilterInputsBackgroundBox = styled(Box)`
   710|   background-color: ${colorBackgroundGray()};
   711|   border-radius: 4px;
   712|   padding: 8px 12px 8px 8px;
   713| `;
   714| export const GanttChartLoadingState = ({runId}: {runId: string}) => (
   715|   <GanttChartContainer>
   716|     <OptionsContainer />
   717|     <SplitPanelContainer
   718|       identifier="gantt-split"
   719|       axis="horizontal"
   720|       first={
   721|         <div style={{margin: 'auto', marginTop: 100}}>
   722|           <Spinner purpose="section" />
   723|         </div>
   724|       }
   725|       firstInitialPercent={70}
   726|       second={
   727|         <GanttStatusPanel
   728|           graph={[]}
   729|           metadata={EMPTY_RUN_METADATA}
   730|           selection={{keys: [], query: '*'}}
   731|           runId={runId}
   732|           nowMs={0}


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/gantt/GanttChartLayout.ts
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-34 ---
     1| import {
     2|   colorAccentGray,
     3|   colorAccentGrayHover,
     4|   colorAccentGreen,
     5|   colorAccentRed,
     6|   colorAccentReversed,
     7|   colorAccentWhite,
     8|   colorAccentYellow,
     9|   colorBackgroundBlue,
    10|   colorBackgroundDefault,
    11|   colorBackgroundLight,
    12|   colorTextBlue,
    13|   colorTextLight,
    14| } from '@dagster-io/ui-components';
    15| import {IRunMetadataDict, IStepAttempt, IStepState} from '../runs/RunMetadataProvider';
    16| import {
    17|   BOX_DOT_WIDTH_CUTOFF,
    18|   BOX_SPACING_X,
    19|   BOX_WIDTH,
    20|   FLAT_INSET_FROM_PARENT,
    21|   GanttChartBox,
    22|   GanttChartLayout,
    23|   GanttChartLayoutOptions,
    24|   GanttChartMarker,
    25|   GanttChartMode,
    26|   IGanttNode,
    27|   LEFT_INSET,
    28| } from './Constants';
    29| import {isDynamicStep, isPlannedDynamicStep, dynamicKeyWithoutIndex} from './DynamicStepSupport';
    30| export interface BuildLayoutParams {
    31|   nodes: IGanttNode[];
    32|   mode: GanttChartMode;
    33| }
    34| export const buildLayout = (params: BuildLayoutParams) => {

# --- HUNK 2: Lines 189-266 ---
   189|           state: undefined,
   190|           width: BOX_WIDTH,
   191|           root: false,
   192|           x: 0,
   193|           y: -1,
   194|         };
   195|         boxes.push(depBox);
   196|         added.push(depBox);
   197|       } else {
   198|         depBox = boxes[depBoxIdx]!;
   199|         ensureSubtreeAfterParentInArray(boxes, box, depBox);
   200|       }
   201|       box.children.push(depBox);
   202|     }
   203|   }
   204|   for (const depBox of added) {
   205|     addChildren(boxes, depBox, params);
   206|   }
   207| };
   208| const TextColorForStates = {
   209|   [IStepState.RUNNING]: colorTextBlue(),
   210|   [IStepState.RETRY_REQUESTED]: colorAccentWhite(),
   211|   [IStepState.SUCCEEDED]: colorAccentWhite(),
   212|   [IStepState.FAILED]: colorAccentWhite(),
   213|   [IStepState.SKIPPED]: colorAccentWhite(),
   214|   [IStepState.UNKNOWN]: colorAccentWhite(),
   215| };
   216| const BackgroundColorForStates = {
   217|   [IStepState.RUNNING]: colorBackgroundBlue(),
   218|   [IStepState.RETRY_REQUESTED]: colorAccentYellow(),
   219|   [IStepState.SUCCEEDED]: colorAccentGreen(),
   220|   [IStepState.FAILED]: colorAccentRed(),
   221|   [IStepState.SKIPPED]: colorAccentGray(),
   222|   [IStepState.UNKNOWN]: colorAccentGrayHover(),
   223| };
   224| export const boxStyleFor = (
   225|   state: IStepState | undefined,
   226|   context: {
   227|     metadata: IRunMetadataDict;
   228|     options: {mode: GanttChartMode};
   229|   },
   230| ) => {
   231|   if (
   232|     !context.metadata.startedPipelineAt &&
   233|     context.options.mode !== GanttChartMode.WATERFALL_TIMED
   234|   ) {
   235|     return {background: `#2491eb`};
   236|   }
   237|   if (state && state !== IStepState.PREPARING) {
   238|     return {
   239|       color: TextColorForStates[state] || colorAccentReversed(),
   240|       background: BackgroundColorForStates[state] || colorBackgroundLight(),
   241|     };
   242|   }
   243|   return {
   244|     color: colorTextLight(),
   245|     background: colorBackgroundDefault(),
   246|     border: `1.5px dotted ${colorAccentGray()}`,
   247|   };
   248| };
   249| const cloneLayout = ({boxes, markers}: GanttChartLayout): GanttChartLayout => {
   250|   const map = new WeakMap();
   251|   const nextMarkers = markers.map((m) => ({...m}));
   252|   const nextBoxes: GanttChartBox[] = [];
   253|   for (const box of boxes) {
   254|     const next = {...box};
   255|     nextBoxes.push(next);
   256|     map.set(box, next);
   257|   }
   258|   boxes.forEach((box, ii) => {
   259|     nextBoxes[ii]!.children = box.children.map((c) => map.get(c));
   260|   });
   261|   return {boxes: nextBoxes, markers: nextMarkers};
   262| };
   263| const positionAndSplitBoxes = (
   264|   boxes: GanttChartBox[],
   265|   metadata: IRunMetadataDict,
   266|   positionFor: (


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/gantt/GanttChartTimescale.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-29 ---
     1| import {
     2|   FontFamily,
     3|   colorAccentPrimary,
     4|   colorAccentReversed,
     5|   colorBackgroundLight,
     6|   colorBorderDefault,
     7|   colorKeylineDefault,
     8|   colorTextLight,
     9| } from '@dagster-io/ui-components';
    10| import * as React from 'react';
    11| import styled from 'styled-components';
    12| import {formatElapsedTime} from '../app/Util';
    13| import {CSS_DURATION, GanttViewport, LEFT_INSET} from './Constants';
    14| const ONE_MIN = 60 * 1000;
    15| const ONE_HOUR = 60 * 60 * 1000;
    16| const subsecondResolutionLabel = (ms: number) =>
    17|   ms > 5 * ONE_MIN ? formatElapsedTime(ms) : `${(ms / 1000).toFixed(1)}s`;
    18| const secondResolutionLabel = (ms: number) =>
    19|   ms > 5 * ONE_MIN ? formatElapsedTime(ms) : `${(ms / 1000).toFixed(0)}s`;
    20| const minuteResolutionLabel = (ms: number) =>
    21|   ms > 59 * ONE_MIN ? formatElapsedTime(ms) : `${Math.round(ms / ONE_MIN)}m`;
    22| const hourResolutionLabel = (ms: number) => `${Math.round(ms / ONE_HOUR)}h`;
    23| const TICK_CONFIG = [
    24|   {
    25|     tickIntervalMs: 0.5 * 1000,
    26|     tickLabels: subsecondResolutionLabel,
    27|   },
    28|   {
    29|     tickIntervalMs: 1 * 1000,

# --- HUNK 2: Lines 175-244 ---
   175|           ></div>
   176|         )}
   177|       </TimescaleLinesContainer>
   178|     </TimescaleContainer>
   179|   );
   180| };
   181| const TimescaleContainer = styled.div`
   182|   width: 100%;
   183|   & .tick {
   184|     position: absolute;
   185|     padding-top: 7px;
   186|     width: ${TICK_LABEL_WIDTH}px;
   187|     height: ${TICKS_ROW_HEIGHT}px;
   188|     box-sizing: border-box;
   189|     transition:
   190|       left ${CSS_DURATION}ms linear,
   191|       width ${CSS_DURATION}ms linear;
   192|     text-align: center;
   193|   }
   194|   & .tick.duration {
   195|     color: ${colorTextLight()};
   196|     background: ${colorBackgroundLight()};
   197|     box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
   198|   }
   199|   & .tick.highlight {
   200|     color: ${colorAccentReversed()};
   201|     height: ${TICKS_ROW_HEIGHT + 2}px;
   202|     background: ${colorAccentPrimary()};
   203|   }
   204|   & .line {
   205|     position: absolute;
   206|     border-left: 1px solid ${colorKeylineDefault()};
   207|     transition: left ${CSS_DURATION}ms linear;
   208|     top: 0px;
   209|     bottom: 0px;
   210|   }
   211|   & .line.highlight {
   212|     border-left: 2px solid ${colorBorderDefault()};
   213|     z-index: 1111;
   214|     top: -1px;
   215|   }
   216|   & .fog-of-war {
   217|     position: absolute;
   218|     background: ${colorBackgroundLight()};
   219|     transition: left ${CSS_DURATION}ms linear;
   220|     top: 0px;
   221|     bottom: 0px;
   222|     width: 100%;
   223|   }
   224| `;
   225| const TimescaleTicksContainer = styled.div`
   226|   height: ${TICKS_ROW_HEIGHT}px;
   227|   z-index: 4;
   228|   position: relative;
   229|   background: ${colorBackgroundLight()};
   230|   display: flex;
   231|   color: ${colorTextLight()};
   232|   font-size: 13px;
   233|   font-family: ${FontFamily.monospace};
   234|   box-shadow: inset 0 -1px ${colorKeylineDefault()};
   235|   overflow: hidden;
   236| `;
   237| const TimescaleLinesContainer = styled.div`
   238|   z-index: 0;
   239|   top: ${TICKS_ROW_HEIGHT}px;
   240|   left: 0;
   241|   position: absolute;
   242|   pointer-events: none;
   243|   overflow: hidden;
   244| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/gantt/GanttStatusPanel.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-28 ---
     1| import {
     2|   Spinner,
     3|   Tooltip,
     4|   colorBackgroundLight,
     5|   colorBackgroundLightHover,
     6|   colorKeylineDefault,
     7|   colorTextLight,
     8| } from '@dagster-io/ui-components';
     9| import * as React from 'react';
    10| import styled from 'styled-components';
    11| import {GraphQueryItem} from '../app/GraphQueryImpl';
    12| import {formatElapsedTime} from '../app/Util';
    13| import {SidebarSection} from '../pipelines/SidebarComponents';
    14| import {IRunMetadataDict, IStepState} from '../runs/RunMetadataProvider';
    15| import {StepSelection} from '../runs/StepSelection';
    16| import {GanttChartMode} from './Constants';
    17| import {isPlannedDynamicStep} from './DynamicStepSupport';
    18| import {boxStyleFor} from './GanttChartLayout';
    19| import {RunGroupPanel} from './RunGroupPanel';
    20| interface GanttStatusPanelProps {
    21|   graph: GraphQueryItem[];
    22|   metadata: IRunMetadataDict;
    23|   selection: StepSelection;
    24|   runId: string;
    25|   nowMs: number;
    26|   onClickStep?: (step: string, evt: React.MouseEvent<any>) => void;
    27|   onHighlightStep?: (step: string | null) => void;
    28|   onDoubleClickStep?: (step: string) => void;

# --- HUNK 2: Lines 185-229 ---
   185|           }}
   186|         />
   187|       )}
   188|       <StepLabel>{name}</StepLabel>
   189|       {step?.start && <Elapsed>{formatElapsedTime(end - step.start)}</Elapsed>}
   190|     </StepItemContainer>
   191|   );
   192| };
   193| const StepLabel = styled.div`
   194|   overflow: hidden;
   195|   text-overflow: ellipsis;
   196|   flex: 1;
   197| `;
   198| const StepItemContainer = styled.div<{selected: boolean}>`
   199|   display: flex;
   200|   line-height: 32px;
   201|   height: 32px;
   202|   padding: 0 14px 0 6px;
   203|   gap: 6px;
   204|   align-items: center;
   205|   border-bottom: 1px solid ${colorKeylineDefault()};
   206|   font-size: 12px;
   207|   ${({selected}) => selected && `background: ${colorBackgroundLight()};`}
   208|   &:hover {
   209|     background: ${colorBackgroundLightHover()};
   210|   }
   211| `;
   212| export const StepStatusDot = styled.div`
   213|   width: 12px;
   214|   height: 12px;
   215|   flex-shrink: 0;
   216|   border-radius: 50%;
   217|   text-align: center;
   218|   line-height: 12px;
   219| `;
   220| const Elapsed = styled.div`
   221|   color: ${colorTextLight()};
   222|   font-variant-numeric: tabular-nums;
   223| `;
   224| const EmptyNotice = styled.div`
   225|   min-height: 32px;
   226|   font-size: 12px;
   227|   padding: 8px 24px;
   228|   color: ${colorTextLight()};
   229| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/gantt/RunGroupPanel.tsx
# Total hunks: 4
# ====================================================================
# --- HUNK 1: Lines 1-39 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {
     3|   Box,
     4|   ButtonLink,
     5|   Group,
     6|   Icon,
     7|   FontFamily,
     8|   colorAccentYellow,
     9|   colorLinkDefault,
    10|   colorTextLight,
    11|   colorBackgroundLight,
    12|   colorBackgroundDefault,
    13|   colorBackgroundLightHover,
    14|   colorBackgroundDefaultHover,
    15|   colorBorderDefault,
    16|   colorTextDefault,
    17|   colorAccentReversed,
    18|   colorAccentPrimary,
    19| } from '@dagster-io/ui-components';
    20| import React from 'react';
    21| import {Link} from 'react-router-dom';
    22| import styled from 'styled-components';
    23| import {showCustomAlert} from '../app/CustomAlertProvider';
    24| import {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';
    25| import {FIFTEEN_SECONDS, useQueryRefreshAtInterval} from '../app/QueryRefresh';
    26| import {SidebarSection} from '../pipelines/SidebarComponents';
    27| import {RunStatusIndicator} from '../runs/RunStatusDots';
    28| import {DagsterTag} from '../runs/RunTag';
    29| import {RunStateSummary, RunTime, RUN_TIME_FRAGMENT} from '../runs/RunUtils';
    30| import {
    31|   RunGroupPanelQuery,
    32|   RunGroupPanelQueryVariables,
    33|   RunGroupPanelRunFragment,
    34| } from './types/RunGroupPanel.types';
    35| type Run = RunGroupPanelRunFragment;
    36| function subsetTitleForRun(run: {tags: {key: string; value: string}[]}) {
    37|   const stepsTag = run.tags.find((t) => t.key === DagsterTag.StepSelection);
    38|   return stepsTag ? stepsTag.value : '*';
    39| }

# --- HUNK 2: Lines 48-92 ---
    48|     RUN_GROUP_PANEL_QUERY,
    49|     {
    50|       variables: {runId},
    51|       notifyOnNetworkStatusChange: true,
    52|     },
    53|   );
    54|   const {data, refetch} = queryResult;
    55|   useQueryRefreshAtInterval(queryResult, FIFTEEN_SECONDS);
    56|   React.useEffect(() => {
    57|     if (runStatusLastChangedAt) {
    58|       refetch();
    59|     }
    60|   }, [refetch, runStatusLastChangedAt]);
    61|   const group = data?.runGroupOrError;
    62|   if (!group || group.__typename === 'RunGroupNotFoundError') {
    63|     return null;
    64|   }
    65|   if (group.__typename === 'PythonError') {
    66|     return (
    67|       <Group direction="row" spacing={8} padding={8}>
    68|         <Icon name="warning" color={colorAccentYellow()} />
    69|         <div style={{fontSize: '13px'}}>
    70|           The run group for this run could not be loaded.{' '}
    71|           <ButtonLink
    72|             color={colorLinkDefault()}
    73|             underline="always"
    74|             onClick={() => {
    75|               showCustomAlert({
    76|                 title: 'Python error',
    77|                 body: group.message,
    78|               });
    79|             }}
    80|           >
    81|             View error
    82|           </ButtonLink>
    83|         </div>
    84|       </Group>
    85|     );
    86|   }
    87|   if (group.runs?.length === 1) {
    88|     return null;
    89|   }
    90|   const unsorted: Run[] = [];
    91|   (group.runs || []).forEach((run: Run | null) => {
    92|     if (run && typeof run.startTime === 'number') {

# --- HUNK 3: Lines 94-147 ---
    94|     }
    95|   });
    96|   const runs: Run[] = unsorted.sort((a: Run, b: Run) => {
    97|     return (a.startTime || 0) - (b.startTime || 0);
    98|   });
    99|   return (
   100|     <SidebarSection title={runs[0] ? `${runs[0].pipelineName} (${runs.length})` : ''}>
   101|       <>
   102|         {runs.map((g, idx) =>
   103|           g ? (
   104|             <RunGroupRun key={g.id} to={`/runs/${g.id}`} selected={g.id === runId}>
   105|               {idx < runs.length - 1 && <ThinLine style={{height: 36}} />}
   106|               <Box padding={{top: 4}}>
   107|                 <RunStatusIndicator status={g.status} />
   108|               </Box>
   109|               <div
   110|                 style={{
   111|                   flex: 1,
   112|                   marginLeft: 5,
   113|                   minWidth: 0,
   114|                   color: colorTextLight(),
   115|                 }}
   116|               >
   117|                 <div style={{display: 'flex', justifyContent: 'space-between'}}>
   118|                   <RunTitle>
   119|                     {g.id.split('-')[0]}
   120|                     {idx === 0 && RootTag}
   121|                   </RunTitle>
   122|                   <RunTime run={g} />
   123|                 </div>
   124|                 <div
   125|                   style={{
   126|                     display: 'flex',
   127|                     color: colorTextLight(),
   128|                     justifyContent: 'space-between',
   129|                   }}
   130|                 >
   131|                   {subsetTitleForRun(g)}
   132|                   <RunStateSummary run={g} />
   133|                 </div>
   134|               </div>
   135|             </RunGroupRun>
   136|           ) : null,
   137|         )}
   138|       </>
   139|     </SidebarSection>
   140|   );
   141| };
   142| export const RUN_GROUP_PANEL_QUERY = gql`
   143|   query RunGroupPanelQuery($runId: ID!) {
   144|     runGroupOrError(runId: $runId) {
   145|       ... on RunGroup {
   146|         rootRunId
   147|         runs {

# --- HUNK 4: Lines 152-217 ---
   152|       ...PythonErrorFragment
   153|     }
   154|   }
   155|   fragment RunGroupPanelRun on Run {
   156|     id
   157|     parentRunId
   158|     status
   159|     stepKeysToExecute
   160|     pipelineName
   161|     tags {
   162|       key
   163|       value
   164|     }
   165|     ...RunTimeFragment
   166|   }
   167|   ${PYTHON_ERROR_FRAGMENT}
   168|   ${RUN_TIME_FRAGMENT}
   169| `;
   170| const RunGroupRun = styled(Link)<{selected: boolean}>`
   171|   align-items: flex-start;
   172|   background: ${({selected}) => (selected ? colorBackgroundLight() : colorBackgroundDefault())};
   173|   padding: 4px 6px 4px 24px;
   174|   font-family: ${FontFamily.monospace};
   175|   font-size: 14px;
   176|   line-height: 20px;
   177|   display: flex;
   178|   position: relative;
   179|   &:hover {
   180|     text-decoration: none;
   181|     background: ${({selected}) =>
   182|       selected ? colorBackgroundLightHover() : colorBackgroundDefaultHover()};
   183|   }
   184| `;
   185| const ThinLine = styled.div`
   186|   position: absolute;
   187|   top: 20px;
   188|   width: 1px;
   189|   background: ${colorBorderDefault()};
   190|   left: 29px;
   191|   z-index: 2;
   192| `;
   193| const RunTitle = styled.span`
   194|   color: ${colorTextDefault()};
   195|   font-weight: 500;
   196|   overflow: hidden;
   197|   text-overflow: ellipsis;
   198|   user-select: text;
   199|   flex: 1;
   200| `;
   201| const RootTag = (
   202|   <span
   203|     style={{
   204|       borderRadius: 2,
   205|       fontSize: 12,
   206|       lineHeight: '14px',
   207|       background: colorAccentReversed(),
   208|       color: colorAccentPrimary(),
   209|       padding: '0 4px',
   210|       fontWeight: 400,
   211|       userSelect: 'none',
   212|       marginLeft: 12,
   213|     }}
   214|   >
   215|     ROOT
   216|   </span>
   217| );


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/gantt/VizComponents.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-33 ---
     1| import {
     2|   CursorControlsContainer,
     3|   colorBackgroundDefault,
     4|   colorKeylineDefault,
     5| } from '@dagster-io/ui-components';
     6| import styled from 'styled-components';
     7| export const OptionsContainer = styled.div`
     8|   min-height: 56px;
     9|   display: flex;
    10|   align-items: center;
    11|   padding: 5px 12px 5px 24px;
    12|   border-bottom: 1px solid ${colorKeylineDefault()};
    13|   background: ${colorBackgroundDefault()};
    14|   flex-shrink: 0;
    15|   flex-wrap: wrap;
    16|   z-index: 3;
    17|   ${CursorControlsContainer} {
    18|     margin-top: 0;
    19|     gap: 8px;
    20|     @media (max-width: 1100px) {
    21|       & .hideable-button-text {
    22|         display: none;
    23|       }
    24|       & div[role='img'] {
    25|         margin: 0;
    26|       }
    27|     }
    28|   }
    29| `;
    30| export const OptionsDivider = styled.div`
    31|   width: 30px;
    32|   height: 25px;
    33| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/gantt/ZoomSlider.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-32 ---
     1| import {SliderStyles, colorAccentGray} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| /**
     5|  * Renders a horizontal slider that lets you adjust the graph's relative zoom from 1-100.
     6|  * It uses Blueprint CSS but not the Slider component, because that renders twice and
     7|  * forces a DOM layout to determine it's size (I think for tick marks, which we aren't using)
     8|  */
     9| export const ZoomSlider = React.memo((props: {value: number; onChange: (v: number) => void}) => {
    10|   return (
    11|     <ZoomSliderContainer
    12|       $fillColor={colorAccentGray()}
    13|       className="bp4-slider bp4-slider-unlabeled"
    14|       onMouseDown={(e: React.MouseEvent) => {
    15|         const rect = e.currentTarget.closest('.bp4-slider')!.getBoundingClientRect();
    16|         let initialX: number;
    17|         if (e.target instanceof HTMLElement && e.target.classList.contains('bp4-slider-handle')) {
    18|           initialX = e.pageX;
    19|         } else {
    20|           initialX = rect.left + (props.value / 100) * rect.width;
    21|         }
    22|         const onUpdate = (e: MouseEvent) => {
    23|           const nextValue = props.value + (e.pageX - initialX) * (100 / rect.width);
    24|           props.onChange(Math.max(0, Math.min(100, nextValue)));
    25|         };
    26|         const onRelease = (e: MouseEvent) => {
    27|           onUpdate(e);
    28|           document.removeEventListener('mousemove', onUpdate);
    29|           document.removeEventListener('mouseup', onRelease);
    30|         };
    31|         document.addEventListener('mousemove', onUpdate);
    32|         document.addEventListener('mouseup', onRelease);


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/graph/ExternalConnectionNode.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {colorBackgroundLight, colorBackgroundLightHover} from '@dagster-io/ui-components';
     2| import {LinkVertical as Link} from '@vx/shape';
     3| import * as React from 'react';
     4| import styled from 'styled-components';
     5| import {Edge} from './OpEdges';
     6| import {SVGMonospaceText} from './SVGComponents';
     7| import {IPoint, isHighlighted} from './common';
     8| interface ExternalConnectionNodeProps {
     9|   layout: IPoint;
    10|   target: IPoint;
    11|   labelAttachment: 'top' | 'bottom';
    12|   label: string;
    13|   minified: boolean;
    14|   edges: Edge[];
    15|   highlightedEdges: Edge[];
    16|   onHighlightEdges: (edges: Edge[]) => void;
    17|   onDoubleClickLabel: () => void;
    18| }
    19| export const ExternalConnectionNode = ({
    20|   layout,
    21|   target,

# --- HUNK 2: Lines 40-66 ---
    40|   };
    41|   return (
    42|     <g onMouseEnter={() => onHighlightEdges(edges)} onMouseLeave={() => onHighlightEdges([])}>
    43|       <BackingRect
    44|         {...textSize}
    45|         {...textOrigin}
    46|         onClick={(e) => e.stopPropagation()}
    47|         onDoubleClick={(e) => {
    48|           e.stopPropagation();
    49|           onDoubleClickLabel();
    50|         }}
    51|       />
    52|       <ellipse cx={layout.x} cy={layout.y} rx={7} ry={7} fill={color} />
    53|       <SVGMonospaceText {...textProps} {...textSize} {...textOrigin} />
    54|       <Link style={{stroke: color, strokeWidth: 6, fill: 'none'}} data={{source: layout, target}} />
    55|     </g>
    56|   );
    57| };
    58| const BackingRect = styled('rect')`
    59|   stroke-width: 10px;
    60|   fill: ${colorBackgroundLight()};
    61|   stroke: ${colorBackgroundLight()};
    62|   &:hover {
    63|     fill: ${colorBackgroundLightHover()};
    64|     stroke: ${colorBackgroundLightHover()};
    65|   }
    66| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/graph/OpGraph.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-28 ---
     1| import {gql} from '@apollo/client';
     2| import {
     3|   colorAccentBlue,
     4|   colorBackgroundBlue,
     5|   colorBackgroundBlueHover,
     6|   colorBackgroundYellow,
     7|   colorKeylineDefault,
     8| } from '@dagster-io/ui-components';
     9| import * as React from 'react';
    10| import styled from 'styled-components';
    11| import {OpNameOrPath} from '../ops/OpNameOrPath';
    12| import {OpEdges} from './OpEdges';
    13| import {OpNode, OP_NODE_DEFINITION_FRAGMENT, OP_NODE_INVOCATION_FRAGMENT} from './OpNode';
    14| import {ParentOpNode, SVGLabeledParentRect} from './ParentOpNode';
    15| import {DEFAULT_MAX_ZOOM, DETAIL_ZOOM, SVGViewport, SVGViewportInteractor} from './SVGViewport';
    16| import {OpGraphLayout} from './asyncGraphLayout';
    17| import {
    18|   Edge,
    19|   closestNodeInDirection,
    20|   computeNodeKeyPrefixBoundingBoxes,
    21|   isHighlighted,
    22|   isNodeOffscreen,
    23|   isOpHighlighted,
    24| } from './common';
    25| import {OpGraphOpFragment} from './types/OpGraph.types';
    26| const NoOp = () => {};
    27| interface OpGraphProps {
    28|   jobName: string;

# --- HUNK 2: Lines 52-129 ---
    52|     layout,
    53|     minified,
    54|     ops,
    55|     viewportRect,
    56|     focusOps,
    57|     parentOp,
    58|     parentHandleID,
    59|     onClickOp = NoOp,
    60|     onDoubleClickOp = NoOp,
    61|     onEnterSubgraph = NoOp,
    62|     highlightedOps,
    63|     selectedOp,
    64|   } = props;
    65|   return (
    66|     <>
    67|       {parentOp && layout.parent && layout.parent.invocationBoundingBox.width > 0 && (
    68|         <SVGLabeledParentRect
    69|           {...layout.parent.invocationBoundingBox}
    70|           key={`composite-rect-${parentHandleID}`}
    71|           label=""
    72|           fill={colorBackgroundYellow()}
    73|           minified={minified}
    74|         />
    75|       )}
    76|       {parentOp && (
    77|         <ParentOpNode
    78|           onClickOp={onClickOp}
    79|           onDoubleClick={(name) => onDoubleClickOp({name})}
    80|           onHighlightEdges={setHighlighted}
    81|           highlightedEdges={highlighted}
    82|           key={`composite-rect-${parentHandleID}-definition`}
    83|           minified={minified}
    84|           op={parentOp}
    85|           layout={layout}
    86|         />
    87|       )}
    88|       <OpEdges
    89|         ops={ops}
    90|         layout={layout}
    91|         color={colorKeylineDefault()}
    92|         edges={layout.edges}
    93|         onHighlight={setHighlighted}
    94|       />
    95|       <OpEdges
    96|         ops={ops}
    97|         layout={layout}
    98|         color={colorAccentBlue()}
    99|         onHighlight={setHighlighted}
   100|         edges={layout.edges.filter(({from, to}) =>
   101|           isHighlighted(highlighted, {a: from.opName, b: to.opName}),
   102|         )}
   103|       />
   104|       {computeNodeKeyPrefixBoundingBoxes(layout).map((box, idx) => (
   105|         <rect
   106|           key={idx}
   107|           {...box}
   108|           stroke={colorBackgroundBlue()}
   109|           fill={colorBackgroundBlueHover()}
   110|           strokeWidth={2}
   111|         />
   112|       ))}
   113|       <foreignObject width={layout.width} height={layout.height} style={{pointerEvents: 'none'}}>
   114|         {ops
   115|           .filter((op) => !isNodeOffscreen(layout.nodes[op.name]!.bounds, viewportRect))
   116|           .map((op) => (
   117|             <OpNode
   118|               key={op.name}
   119|               invocation={op}
   120|               definition={op.definition}
   121|               minified={minified}
   122|               onClick={() => onClickOp({name: op.name})}
   123|               onDoubleClick={() => onDoubleClickOp({name: op.name})}
   124|               onEnterComposite={() => onEnterSubgraph({name: op.name})}
   125|               onHighlightEdges={setHighlighted}
   126|               layout={layout.nodes[op.name]!}
   127|               selected={selectedOp === op}
   128|               focused={focusOps.includes(op)}
   129|               highlightedEdges={


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/graph/OpIOBox.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-29 ---
     1| import {
     2|   FontFamily,
     3|   colorAccentBlue,
     4|   colorAccentGray,
     5|   colorBackgroundBlue,
     6|   colorBackgroundDefault,
     7|   colorTextBlue,
     8|   colorTextLight,
     9| } from '@dagster-io/ui-components';
    10| import * as React from 'react';
    11| import styled from 'styled-components';
    12| import {DEFAULT_RESULT_NAME, titleOfIO} from '../app/titleOfIO';
    13| import {Edge, isHighlighted, position} from './common';
    14| import {OpLayoutIO} from './layout';
    15| import {
    16|   OpNodeInputDefinitionFragment,
    17|   OpNodeOutputDefinitionFragment,
    18|   OpNodeDefinitionFragment,
    19|   OpNodeInvocationFragment,
    20| } from './types/OpNode.types';
    21| export const PARENT_IN = 'PARENT_IN';
    22| export const PARENT_OUT = 'PARENT_OUT';
    23| interface OpIORenderMetadata {
    24|   edges: Edge[];
    25|   jumpTargetOp: string | null;
    26|   title: string;
    27| }
    28| interface OpIOBoxProps extends OpIORenderMetadata {
    29|   colorKey: 'input' | 'output';

# --- HUNK 2: Lines 70-141 ---
    70|       ) : (
    71|         <>
    72|           <div className="circle" />
    73|           {name !== DEFAULT_RESULT_NAME && <div className="label">{name}</div>}
    74|           {type.displayName && type.displayName !== 'Nothing' && (
    75|             <div className="type">{type.displayName}</div>
    76|           )}
    77|         </>
    78|       )}
    79|       {layoutInfo.collapsed.length > 0 && (
    80|         <div className="collapsedCount">+ {layoutInfo.collapsed.length}</div>
    81|       )}
    82|     </OpIOContainer>
    83|   );
    84| };
    85| const OpIOContainer = styled.div<{$colorKey: string; $highlighted: boolean}>`
    86|   display: inline-flex;
    87|   align-items: center;
    88|   border-top-right-radius: 8px;
    89|   border-bottom-right-radius: 8px;
    90|   background: ${(p) => (p.$highlighted ? colorBackgroundDefault() : colorBackgroundDefault())};
    91|   font-size: 12px;
    92|   &:last-child {
    93|     border-bottom-left-radius: 8px;
    94|   }
    95|   .circle {
    96|     width: 14px;
    97|     height: 14px;
    98|     border-radius: 50%;
    99|     background: ${(p) => (p.$highlighted ? colorAccentBlue() : colorAccentGray())};
   100|     display: inline-block;
   101|     margin: 6px;
   102|   }
   103|   .label {
   104|     line-height: 26px;
   105|     font-family: ${FontFamily.monospace};
   106|     font-weight: 500;
   107|     height: 26px;
   108|     padding-left: 2px;
   109|     padding-right: 6px;
   110|   }
   111|   .type {
   112|     padding: 1px 6px;
   113|     background: ${colorBackgroundBlue()};
   114|     margin-right: 4px;
   115|     color: ${colorTextBlue()};
   116|     font-family: ${FontFamily.monospace};
   117|     font-weight: 700;
   118|     border-radius: 4px;
   119|   }
   120|   .collapsedCount {
   121|     color: ${(p) => (p.$highlighted ? colorTextBlue() : colorTextLight())};
   122|     font-weight: 600;
   123|     margin-left: -3px;
   124|     padding-right: 4px;
   125|   }
   126| `;
   127| export function metadataForCompositeParentIO(
   128|   parentDefinition: OpNodeDefinitionFragment,
   129|   item: OpNodeInputDefinitionFragment | OpNodeOutputDefinitionFragment,
   130| ): OpIORenderMetadata {
   131|   const edges: Edge[] = [];
   132|   let title = `${item.name}: ${item.type.displayName}`;
   133|   if (parentDefinition.__typename !== 'CompositeSolidDefinition') {
   134|     throw new Error('Parent solid is not a composite - how did this happen?');
   135|   }
   136|   if (item.__typename === 'InputDefinition') {
   137|     const others = parentDefinition.inputMappings
   138|       .filter((i) => i.definition.name === item.name)
   139|       .map((i) => i.mappedInput);
   140|     title += `\n\nConnected to: ${others.map(titleOfIO).join('\n')}`;
   141|     edges.push(


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/graph/OpNode.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-32 ---
     1| import {gql} from '@apollo/client';
     2| import {
     3|   Icon,
     4|   FontFamily,
     5|   colorAccentBlue,
     6|   colorBackgroundBlue,
     7|   colorBackgroundDefault,
     8|   colorBackgroundLight,
     9|   colorAccentYellow,
    10|   colorBackgroundLighter,
    11|   colorKeylineDefault,
    12| } from '@dagster-io/ui-components';
    13| import * as React from 'react';
    14| import styled from 'styled-components';
    15| import {withMiddleTruncation} from '../app/Util';
    16| import {displayNameForAssetKey} from '../asset-graph/Utils';
    17| import {AssetKey} from '../assets/types';
    18| import {testId} from '../testing/testId';
    19| import {OpIOBox, metadataForIO} from './OpIOBox';
    20| import {OpTags, IOpTag} from './OpTags';
    21| import {OpLayout} from './asyncGraphLayout';
    22| import {Edge, position} from './common';
    23| import {OpNodeInvocationFragment, OpNodeDefinitionFragment} from './types/OpNode.types';
    24| interface IOpNodeProps {
    25|   layout: OpLayout;
    26|   invocation?: OpNodeInvocationFragment;
    27|   definition: OpNodeDefinitionFragment;
    28|   highlightedEdges: Edge[];
    29|   minified: boolean;
    30|   selected: boolean;
    31|   focused: boolean;
    32|   dim: boolean;

# --- HUNK 2: Lines 284-393 ---
   284|           }
   285|         }
   286|       }
   287|     }
   288|   }
   289|   fragment OpNodeInputDefinition on InputDefinition {
   290|     name
   291|     type {
   292|       displayName
   293|     }
   294|   }
   295|   fragment OpNodeOutputDefinition on OutputDefinition {
   296|     name
   297|     isDynamic
   298|     type {
   299|       displayName
   300|     }
   301|   }
   302| `;
   303| const NodeHighlightColors = {
   304|   Border: colorAccentBlue(),
   305|   Background: colorBackgroundBlue(),
   306| };
   307| const NodeContainer = styled.div<{
   308|   $minified: boolean;
   309|   $selected: boolean;
   310|   $secondaryHighlight: boolean;
   311|   $dim: boolean;
   312| }>`
   313|   opacity: ${({$dim}) => ($dim ? 0.3 : 1)};
   314|   pointer-events: auto;
   315|   user-select: none;
   316|   cursor: default;
   317|   .highlight-box {
   318|     border-radius: 13px;
   319|     background: ${(p) => (p.$selected ? NodeHighlightColors.Background : 'transparent')};
   320|   }
   321|   .node-box {
   322|     border: ${(p) =>
   323|       p.$selected
   324|         ? `2px dashed ${NodeHighlightColors.Border}`
   325|         : p.$secondaryHighlight
   326|         ? `2px solid ${colorAccentBlue()}55`
   327|         : `2px solid ${colorKeylineDefault()}`};
   328|     border-width: ${(p) => (p.$minified ? '3px' : '2px')};
   329|     border-radius: 8px;
   330|     background: ${(p) => (p.$minified ? colorBackgroundLight() : colorBackgroundDefault())};
   331|   }
   332|   .composite-marker {
   333|     outline: ${(p) => (p.$minified ? '3px' : '2px')} solid
   334|       ${(p) => (p.$selected ? 'transparent' : colorAccentYellow())};
   335|     outline-offset: ${(p) => (p.$minified ? '5px' : '3px')};
   336|     border-radius: 3px;
   337|   }
   338|   .dynamic-marker {
   339|     transform: translate(-5px, -5px);
   340|     border: ${(p) => (p.$minified ? '3px' : '2px')} solid ${colorKeylineDefault()};
   341|     border-radius: 3px;
   342|   }
   343|   .config-marker {
   344|     position: absolute;
   345|     transform: ${(p) => (p.$minified ? ' translate(-100%, -28px)' : ' translate(-100%, -21px)')};
   346|     font-size: ${(p) => (p.$minified ? '24px' : '12px')};
   347|     font-family: ${FontFamily.monospace};
   348|     font-weight: 700;
   349|     opacity: 0.5;
   350|   }
   351|   .name {
   352|     display: flex;
   353|     gap: 5px;
   354|     padding: 4px ${(p) => (p.$minified ? '8px' : '3px')};
   355|     font-size: ${(p) => (p.$minified ? '32px' : '14px')};
   356|     font-family: ${FontFamily.monospace};
   357|     border-top-left-radius: 8px;
   358|     border-top-right-radius: 8px;
   359|     align-items: center;
   360|     font-weight: 600;
   361|     .label {
   362|       white-space: nowrap;
   363|       overflow: hidden;
   364|       text-overflow: ellipsis;
   365|     }
   366|   }
   367|   .assets {
   368|     padding: 0 4px;
   369|     white-space: nowrap;
   370|     line-height: 22px;
   371|     height: 22px;
   372|     overflow: hidden;
   373|     text-overflow: ellipsis;
   374|     background: ${colorBackgroundLighter()};
   375|     font-size: 12px;
   376|     display: flex;
   377|     gap: 4px;
   378|     align-items: center;
   379|   }
   380|   .description {
   381|     padding: 0 8px;
   382|     white-space: nowrap;
   383|     line-height: 22px;
   384|     height: 22px;
   385|     overflow: hidden;
   386|     text-overflow: ellipsis;
   387|     background: ${colorBackgroundLighter()};
   388|     border-top: ${colorKeylineDefault()} 1px solid;
   389|     border-bottom-left-radius: 8px;
   390|     border-bottom-right-radius: 8px;
   391|     font-size: 12px;
   392|   }
   393| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/graph/OpTags.tsx
# Total hunks: 6
# ====================================================================
# --- HUNK 1: Lines 1-29 ---
     1| import {
     2|   Box,
     3|   FontFamily,
     4|   IconWrapper,
     5|   colorAccentPrimary,
     6|   colorBackgroundGray,
     7|   colorLineageNodeBackground,
     8|   colorTextLight,
     9| } from '@dagster-io/ui-components';
    10| import * as React from 'react';
    11| import styled from 'styled-components';
    12| import airbyte from './optag-images/airbyte.svg';
    13| import airflow from './optag-images/airflow.svg';
    14| import aws from './optag-images/aws.svg';
    15| import azure from './optag-images/azure.svg';
    16| import azureml from './optag-images/azureml.svg';
    17| import bigquery from './optag-images/bigquery.svg';
    18| import census from './optag-images/census.svg';
    19| import databricks from './optag-images/databricks.svg';
    20| import datadog from './optag-images/datadog.svg';
    21| import dbt from './optag-images/dbt.svg';
    22| import duckdb from './optag-images/duckdb.svg';
    23| import fivetran from './optag-images/fivetran.svg';
    24| import github from './optag-images/github.svg';
    25| import gitlab from './optag-images/gitlab.svg';
    26| import googlecloud from './optag-images/googlecloud.svg';
    27| import googlesheets from './optag-images/googlesheets.svg';
    28| import great_expectations from './optag-images/great_expectations.svg';
    29| import hex from './optag-images/hex.svg';

# --- HUNK 2: Lines 58-229 ---
    58| import sql from './optag-images/sql.svg';
    59| import stitch from './optag-images/stitch.svg';
    60| import stripe from './optag-images/stripe.svg';
    61| import tableau from './optag-images/tableau.svg';
    62| import tensorflow from './optag-images/tensorflow.svg';
    63| import vercel from './optag-images/vercel.svg';
    64| import weights_and_biases from './optag-images/weights_and_biases.svg';
    65| export interface IOpTag {
    66|   label: string;
    67|   onClick: (e: React.MouseEvent) => void;
    68| }
    69| interface OpTagsProps {
    70|   style: React.CSSProperties;
    71|   tags: IOpTag[];
    72|   reduceColor?: boolean;
    73|   reduceText?: boolean;
    74|   reversed?: boolean;
    75| }
    76| export const KNOWN_TAGS = {
    77|   jupyter: {
    78|     color: '#929292',
    79|     icon: jupyter,
    80|     content: 'Jupyter',
    81|   },
    82|   ipynb: {
    83|     color: '#4E4E4E',
    84|     icon: jupyter,
    85|     content: 'Jupyter',
    86|   },
    87|   noteable: {
    88|     color: '#00D2D2',
    89|     icon: noteable,
    90|     content: 'Noteable',
    91|   },
    92|   airbyte: {
    93|     color: '#655CFC',
    94|     icon: airbyte,
    95|     content: 'Airbyte',
    96|   },
    97|   sling: {
    98|     color: '#2176EA',
    99|     icon: sling,
   100|     content: 'Sling',
   101|   },
   102|   snowflake: {
   103|     color: '#29B5E8',
   104|     icon: snowflake,
   105|     content: 'Snowflake',
   106|   },
   107|   python: {
   108|     color: '#367EF0',
   109|     icon: python,
   110|     content: 'Python',
   111|   },
   112|   fivetran: {
   113|     color: '#0073FF',
   114|     icon: fivetran,
   115|     content: 'Fivetran',
   116|   },
   117|   dbt: {
   118|     color: '#FF6B4C',
   119|     icon: dbt,
   120|     content: 'dbt',
   121|   },
   122|   slack: {
   123|     color: '#803A80',
   124|     icon: slack,
   125|     content: 'Slack',
   126|   },
   127|   pytorch: {
   128|     color: '#EE4C2C',
   129|     icon: pytorch,
   130|     content: 'PyTorch',
   131|   },
   132|   pyspark: {
   133|     color: '#C74D15',
   134|     icon: pyspark,
   135|     content: 'PySpark',
   136|   },
   137|   spark: {
   138|     color: '#C74D15',
   139|     icon: pyspark,
   140|     content: 'Spark',
   141|   },
   142|   duckdb: {
   143|     color: '#FCBC41',
   144|     icon: duckdb,
   145|     content: 'DuckDB',
   146|   },
   147|   tensorflow: {
   148|     color: '#FE9413',
   149|     icon: tensorflow,
   150|     content: 'TensorFlow',
   151|   },
   152|   pandas: {
   153|     color: '#E40385',
   154|     icon: pandas,
   155|     content: 'pandas',
   156|     reversed: true,
   157|   },
   158|   googlesheets: {
   159|     color: '#23A566',
   160|     icon: googlesheets,
   161|     content: 'Google Sheets',
   162|   },
   163|   sql: {
   164|     color: '#B821FF',
   165|     icon: sql,
   166|     content: 'SQL',
   167|   },
   168|   wandb: {
   169|     color: '#FFBE00',
   170|     icon: weights_and_biases,
   171|     content: 'Weights & Biases',
   172|   },
   173|   databricks: {
   174|     color: '#FD3820',
   175|     icon: databricks,
   176|     content: 'Databricks',
   177|   },
   178|   airflow: {
   179|     color: '#017CEE',
   180|     icon: airflow,
   181|     content: 'Airflow',
   182|   },
   183|   datadog: {
   184|     color: '#7633C8',
   185|     icon: datadog,
   186|     content: 'Datadog',
   187|   },
   188|   postgres: {
   189|     color: '#136FBA',
   190|     icon: postgres,
   191|     content: 'Postgres',
   192|   },
   193|   stripe: {
   194|     color: '#635BFF',
   195|     icon: stripe,
   196|     content: 'Stripe',
   197|   },
   198|   hightouch: {
   199|     color: '#4EBB6C',
   200|     icon: hightouch,
   201|     content: 'Hightouch',
   202|   },
   203|   census: {
   204|     color: '#EF54AC',
   205|     icon: census,
   206|     content: 'Census',
   207|   },
   208|   hex: {
   209|     color: '#473982',
   210|     icon: hex,
   211|     content: 'Hex',
   212|     reversed: true,
   213|   },
   214|   azure: {
   215|     color: '#39C3F1',
   216|     icon: azure,
   217|     content: 'Azure',
   218|   },
   219|   azureml: {
   220|     color: '#39C3F1',
   221|     icon: azureml,
   222|     content: 'Azure ML',
   223|   },
   224|   sagemaker: {
   225|     color: '#A164FD',
   226|     icon: sagemaker,
   227|     content: 'Sagemaker',
   228|   },
   229|   bigquery: {

# --- HUNK 3: Lines 233-357 ---
   233|   },
   234|   teams: {
   235|     color: '#5255A9',
   236|     icon: teams,
   237|     content: 'Teams',
   238|   },
   239|   mlflow: {
   240|     color: '#0194E2',
   241|     icon: mlflow,
   242|     content: 'ML Flow',
   243|   },
   244|   greatexpectations: {
   245|     color: '#FF6310',
   246|     icon: great_expectations,
   247|     content: 'Great Expectations',
   248|   },
   249|   powerbi: {
   250|     color: '#EDC947',
   251|     icon: powerbi,
   252|     content: 'Power BI',
   253|   },
   254|   gcp: {
   255|     color: '#4285F4',
   256|     icon: googlecloud,
   257|     content: 'GCP',
   258|   },
   259|   googlecloud: {
   260|     color: '#4285F4',
   261|     icon: googlecloud,
   262|     content: 'Google Cloud',
   263|   },
   264|   looker: {
   265|     color: '#929292',
   266|     icon: looker,
   267|     content: 'Looker',
   268|   },
   269|   tableau: {
   270|     color: '#2E5EB1',
   271|     icon: tableau,
   272|     content: 'Tableau',
   273|   },
   274|   segment: {
   275|     color: '#43AF79',
   276|     icon: segment,
   277|     content: 'Segment',
   278|   },
   279|   athena: {
   280|     color: '#FF9900',
   281|     icon: aws,
   282|     content: 'Athena',
   283|   },
   284|   s3: {
   285|     color: '#FF9900',
   286|     icon: aws,
   287|     content: 'S3',
   288|   },
   289|   aws: {
   290|     color: '#FF9900',
   291|     icon: aws,
   292|     content: 'AWS',
   293|   },
   294|   stitch: {
   295|     color: '#FFD201',
   296|     icon: stitch,
   297|     content: 'Stitch',
   298|   },
   299|   openai: {
   300|     color: '#4AA081',
   301|     icon: openai,
   302|     content: 'Open AI',
   303|   },
   304|   vercel: {
   305|     color: '#787878',
   306|     icon: vercel,
   307|     content: 'Vercel',
   308|     reversed: true,
   309|   },
   310|   github: {
   311|     color: '#A970C1',
   312|     icon: github,
   313|     content: 'Github',
   314|   },
   315|   gitlab: {
   316|     color: '#E24329',
   317|     icon: gitlab,
   318|     content: 'Gitlab',
   319|   },
   320|   plotly: {
   321|     color: '#787AF7',
   322|     icon: plotly,
   323|     content: 'plotly',
   324|   },
   325|   modal: {
   326|     color: '#4CDE29',
   327|     icon: modal,
   328|     content: 'Modal',
   329|     reversed: true,
   330|   },
   331|   meltano: {
   332|     color: '#3537BE',
   333|     icon: meltano,
   334|     content: 'Meltano',
   335|   },
   336|   matplotlib: {
   337|     color: '#055998',
   338|     icon: matplotlib,
   339|     content: 'matplotlib',
   340|   },
   341|   numpy: {
   342|     color: '#4D77CF',
   343|     icon: numpy,
   344|     content: 'NumPy',
   345|   },
   346|   scipy: {
   347|     color: '#0054A6',
   348|     icon: scipy,
   349|     content: 'SciPy',
   350|   },
   351|   scikitlearn: {
   352|     color: '#F7931E',
   353|     icon: scikitlearn,
   354|     content: 'Scikit Learn',
   355|   },
   356|   keras: {
   357|     color: '#D00000',

# --- HUNK 4: Lines 394-466 ---
   394|   return (
   395|     <OpTags
   396|       {...rest}
   397|       tags={[
   398|         {
   399|           label: definition.computeKind,
   400|           onClick: () => {
   401|             window.requestAnimationFrame(() => document.dispatchEvent(new Event('show-kind-info')));
   402|           },
   403|         },
   404|       ]}
   405|     />
   406|   );
   407| };
   408| export const OpTags = React.memo(({tags, style, reduceColor, reduceText}: OpTagsProps) => {
   409|   return (
   410|     <OpTagsContainer style={style}>
   411|       {tags.map((tag) => {
   412|         const known = KNOWN_TAGS[coerceToStandardLabel(tag.label) as keyof typeof KNOWN_TAGS];
   413|         const text = known?.content || tag.label;
   414|         const color = known?.color || colorTextLight();
   415|         const reversed = known && 'reversed' in known ? known.reversed : false;
   416|         return (
   417|           <Box
   418|             key={tag.label}
   419|             flex={{gap: 4, alignItems: 'center'}}
   420|             data-tooltip={reduceText ? text : undefined}
   421|             onClick={tag.onClick}
   422|             style={{
   423|               background: reduceColor ? colorBackgroundGray() : colorLineageNodeBackground(),
   424|               fontWeight: reduceColor ? 500 : 700,
   425|             }}
   426|           >
   427|             {known && 'icon' in known && (
   428|               <OpTagIconWrapper
   429|                 role="img"
   430|                 $size={16}
   431|                 $img={known.icon.src}
   432|                 $color={reversed ? colorAccentPrimary() : color}
   433|                 $rotation={null}
   434|                 aria-label={tag.label}
   435|               />
   436|             )}
   437|             {known && 'icon' in known && reduceText ? undefined : text}
   438|           </Box>
   439|         );
   440|       })}
   441|     </OpTagsContainer>
   442|   );
   443| });
   444| const OpTagIconWrapper = styled(IconWrapper)`
   445|   mask-size: contain;
   446|   mask-repeat: no-repeat;
   447|   mask-position: center;
   448|   -webkit-mask-size: contain;
   449|   -webkit-mask-repeat: no-repeat;
   450|   -webkit-mask-position: center;
   451| `;
   452| const OpTagsContainer = styled.div`
   453|   gap: 6px;
   454|   position: absolute;
   455|   display: flex;
   456|   margin-right: 14px;
   457|   & > div {
   458|     padding: 0 8px;
   459|     min-height: 24px;
   460|     display: flex;
   461|     align-items: center;
   462|     font-family: ${FontFamily.default};
   463|     font-size: 12px;
   464|     border-radius: 8px;
   465|   }
   466| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/graph/ParentOpNode.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {colorBackgroundGray} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| import {titleOfIO} from '../app/titleOfIO';
     5| import {OpNameOrPath} from '../ops/OpNameOrPath';
     6| import {ExternalConnectionNode} from './ExternalConnectionNode';
     7| import {MappingLine} from './MappingLine';
     8| import {metadataForCompositeParentIO, PARENT_IN, PARENT_OUT, OpIOBox} from './OpIOBox';
     9| import {SVGLabeledRect} from './SVGComponents';
    10| import {OpGraphLayout} from './asyncGraphLayout';
    11| import {Edge} from './common';
    12| import {OpGraphOpFragment} from './types/OpGraph.types';
    13| interface ParentOpNodeProps {
    14|   layout: OpGraphLayout;
    15|   op: OpGraphOpFragment;
    16|   minified: boolean;
    17|   highlightedEdges: Edge[];
    18|   onDoubleClick: (opName: string) => void;
    19|   onClickOp: (arg: OpNameOrPath) => void;
    20|   onHighlightEdges: (edges: Edge[]) => void;
    21| }

# --- HUNK 2: Lines 27-67 ---
    27|   }
    28|   const parentLayout = layout.parent;
    29|   if (!parentLayout) {
    30|     throw new Error('Parent op rendered when no parent layout is present.');
    31|   }
    32|   const {bounds, mappingLeftEdge, mappingLeftSpacing} = parentLayout;
    33|   const highlightingProps = {
    34|     highlightedEdges: props.highlightedEdges,
    35|     onHighlightEdges: props.onHighlightEdges,
    36|     onDoubleClick: props.onDoubleClick,
    37|     onClickOp: props.onClickOp,
    38|   };
    39|   if (bounds.height < 0 || bounds.width < 0) {
    40|     return <g />;
    41|   }
    42|   return (
    43|     <>
    44|       <SVGLabeledParentRect
    45|         {...bounds}
    46|         label={op.definition.name}
    47|         fill={colorBackgroundGray()}
    48|         minified={minified}
    49|       />
    50|       {def.inputMappings.map(({definition, mappedInput}, idx) => {
    51|         const parentIO = parentLayout.inputs[definition.name];
    52|         const destinationNode = layout.nodes[mappedInput.solid.name];
    53|         if (!destinationNode || !parentIO) {
    54|           console.warn(
    55|             `Assertion failure - Unable to find ${mappedInput.solid.name} in the layout ` +
    56|               `or ${definition.name} in the parent layout`,
    57|           );
    58|           return <g key={mappedInput.solid.name} />;
    59|         }
    60|         const destinationIOFull = destinationNode.inputs[mappedInput.definition.name];
    61|         const destinationIOCollapsed = Object.values(destinationNode.inputs).find((o) =>
    62|           o.collapsed.includes(mappedInput.definition.name),
    63|         );
    64|         const destinationIO = destinationIOFull || destinationIOCollapsed;
    65|         if (!destinationIO) {
    66|           console.warn(
    67|             `Assertion failure - Unable to find port for ${mappedInput.definition.name}`,


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/graph/SVGViewport.tsx
# Total hunks: 6
# ====================================================================
# --- HUNK 1: Lines 1-32 ---
     1| import {
     2|   Box,
     3|   FontFamily,
     4|   Icon,
     5|   IconWrapper,
     6|   Slider,
     7|   colorBackgroundDefault,
     8|   colorBackgroundLight,
     9|   colorBorderDefault,
    10|   colorLineageDots,
    11|   CoreColors,
    12| } from '@dagster-io/ui-components';
    13| import animate from 'amator';
    14| import * as React from 'react';
    15| import ReactDOM from 'react-dom';
    16| import {MemoryRouter} from 'react-router-dom';
    17| import styled from 'styled-components';
    18| import {IBounds} from './common';
    19| import {makeSVGPortable} from './makeSVGPortable';
    20| export interface SVGViewportInteractor {
    21|   onMouseDown(viewport: SVGViewport, event: React.MouseEvent<HTMLDivElement>): void;
    22|   onWheel(viewport: SVGViewport, event: WheelEvent): void;
    23|   render?(viewport: SVGViewport): React.ReactElement<any> | null;
    24| }
    25| interface SVGViewportProps {
    26|   graphWidth: number;
    27|   graphHeight: number;
    28|   graphHasNoMinimumZoom?: boolean;
    29|   interactor: SVGViewportInteractor;
    30|   defaultZoom: 'zoom-to-fit' | 'zoom-to-fit-width';
    31|   maxZoom: number;
    32|   maxAutocenterZoom: number;

# --- HUNK 2: Lines 151-194 ---
   151|       >
   152|         <WheelInstructionTooltip />
   153|         <Box flex={{direction: 'column', alignItems: 'center'}}>
   154|           <IconButton
   155|             onClick={() => {
   156|               const x = viewport.element.current!.clientWidth / 2;
   157|               const y = viewport.element.current!.clientHeight / 2;
   158|               const scale = Math.min(
   159|                 viewport.getMaxZoom(),
   160|                 viewport.state.scale + BUTTON_INCREMENT,
   161|               );
   162|               const adjusted = Math.round((scale + Number.EPSILON) * 100) / 100;
   163|               viewport.adjustZoomRelativeToScreenPoint(adjusted, {x, y});
   164|             }}
   165|           >
   166|             <Icon size={24} name="zoom_in" />
   167|           </IconButton>
   168|           <Box
   169|             style={{width: 32}}
   170|             padding={{vertical: 12}}
   171|             background={colorBackgroundDefault()}
   172|             data-zoom-control={true}
   173|             flex={{alignItems: 'center', direction: 'column'}}
   174|             border={{side: 'left-and-right', color: colorBorderDefault()}}
   175|           >
   176|             <Slider
   177|               vertical
   178|               min={viewport.getMinZoom()}
   179|               max={viewport.getMaxZoom()}
   180|               stepSize={0.001}
   181|               value={viewport.state.scale}
   182|               labelRenderer={false}
   183|               onChange={(scale: number) => {
   184|                 const x = viewport.element.current!.clientWidth / 2;
   185|                 const y = viewport.element.current!.clientHeight / 2;
   186|                 viewport.adjustZoomRelativeToScreenPoint(scale, {x, y});
   187|               }}
   188|             />
   189|           </Box>
   190|           <IconButton
   191|             onClick={() => {
   192|               const x = viewport.element.current!.clientWidth / 2;
   193|               const y = viewport.element.current!.clientHeight / 2;
   194|               const scale = Math.max(

# --- HUNK 3: Lines 197-257 ---
   197|               );
   198|               viewport.adjustZoomRelativeToScreenPoint(scale, {x, y});
   199|             }}
   200|           >
   201|             <Icon size={24} name="zoom_out" />
   202|           </IconButton>
   203|         </Box>
   204|         <Box flex={{direction: 'column', alignItems: 'center', gap: 8}} margin={{top: 8}}>
   205|           {viewport.props.additionalToolbarElements}
   206|           <Box>
   207|             <IconButton onClick={() => viewport.onExportToSVG()}>
   208|               <Icon size={24} name="download_for_offline" />
   209|             </IconButton>
   210|           </Box>
   211|         </Box>
   212|       </ZoomSliderContainer>
   213|     );
   214|   },
   215| };
   216| const IconButton = styled.button`
   217|   background: ${colorBackgroundDefault()};
   218|   border: 1px solid ${colorBorderDefault()};
   219|   cursor: pointer;
   220|   padding: 3px;
   221|   position: relative;
   222|   :focus {
   223|     outline: none;
   224|   }
   225|   ${IconWrapper} {
   226|     transition: background 100ms;
   227|   }
   228|   &:first-child {
   229|     border-top-left-radius: 8px;
   230|     border-top-right-radius: 8px;
   231|   }
   232|   &:last-child {
   233|     border-bottom-left-radius: 8px;
   234|     border-bottom-right-radius: 8px;
   235|   }
   236|   :active {
   237|     background-color: ${colorBackgroundLight()};
   238|   }
   239| `;
   240| const NoneInteractor: SVGViewportInteractor = {
   241|   onMouseDown(_viewport: SVGViewport, event: React.MouseEvent<HTMLDivElement>) {
   242|     event.preventDefault();
   243|     event.stopPropagation();
   244|   },
   245|   onWheel() {
   246|     return;
   247|   },
   248|   render() {
   249|     return <span />;
   250|   },
   251| };
   252| export class SVGViewport extends React.Component<SVGViewportProps, SVGViewportState> {
   253|   static Interactors = {
   254|     PanAndZoom: PanAndZoomInteractor,
   255|     None: NoneInteractor,
   256|   };
   257|   static defaultProps = {

# --- HUNK 4: Lines 489-577 ---
   489|     ReactDOM.render(
   490|       <MemoryRouter>{this.props.children(this.state, unclippedViewport)}</MemoryRouter>,
   491|       div,
   492|     );
   493|     const svg = div.querySelector('svg') as SVGElement;
   494|     await makeSVGPortable(svg);
   495|     const text = new XMLSerializer().serializeToString(svg);
   496|     const blob = new Blob([text], {type: 'image/svg+xml'});
   497|     const a = document.createElement('a');
   498|     a.setAttribute(
   499|       'download',
   500|       `${document.title.replace(/[: \/]/g, '_').replace(/__+/g, '_')}.svg`,
   501|     );
   502|     a.setAttribute('href', URL.createObjectURL(blob));
   503|     a.click();
   504|     div.remove();
   505|   };
   506|   render() {
   507|     const {children, onClick, interactor} = this.props;
   508|     const {x, y, scale, isClickHeld} = this.state;
   509|     const dotsize = Math.max(7, 22 * scale);
   510|     return (
   511|       <div
   512|         ref={this.element}
   513|         style={Object.assign({}, SVGViewportStyles, {
   514|           backgroundPosition: `${x}px ${y}px`,
   515|           backgroundSize: `${dotsize}px`,
   516|           cursor: isClickHeld ? 'grabbing' : 'grab',
   517|         })}
   518|         data-svg-viewport="1"
   519|         onMouseDown={(e) => interactor.onMouseDown(this, e)}
   520|         onDoubleClick={this.onDoubleClick}
   521|         onKeyDown={this.onKeyDown}
   522|         onDragStart={(e) => e.preventDefault()}
   523|         onClick={onClick}
   524|         tabIndex={-1}
   525|       >
   526|         <div
   527|           style={{
   528|             transformOrigin: `top left`,
   529|             transform: `matrix(${scale}, 0, 0, ${scale}, ${x}, ${y})`,
   530|           }}
   531|         >
   532|           {children(this.state, this.getViewport())}
   533|         </div>
   534|         {interactor.render && interactor.render(this)}
   535|       </div>
   536|     );
   537|   }
   538| }
   539| /*
   540| BG: Not using styled-components here because I need a `ref` to an actual DOM element.
   541| Styled-component with a ref returns a React component we need to findDOMNode to use.
   542| */
   543| const SVGViewportStyles: React.CSSProperties = {
   544|   width: '100%',
   545|   height: '100%',
   546|   position: 'relative',
   547|   overflow: 'hidden',
   548|   userSelect: 'none',
   549|   outline: 'none',
   550|   background: `url("data:image/svg+xml;utf8,<svg width='30px' height='30px' viewBox='0 0 80 80' xmlns='http://www.w3.org/2000/svg'><circle fill='${colorLineageDots()}' cx='5' cy='5' r='5' /></svg>") repeat`,
   551| };
   552| const ZoomSliderContainer = styled.div`
   553|   position: absolute;
   554|   bottom: 12px;
   555|   right: 12px;
   556|   width: 30px;
   557|   background: ${colorBackgroundLight()};
   558| `;
   559| const WheelInstructionTooltip = () => {
   560|   const [usedMeta, setUsedMeta] = React.useState(false);
   561|   const [wheeling, setWheeling] = React.useState(false);
   562|   const timeout = React.useRef<NodeJS.Timeout>();
   563|   React.useEffect(() => {
   564|     const listener = (e: WheelEvent) => {
   565|       clearTimeout(timeout.current);
   566|       if (e.metaKey || e.shiftKey || e.ctrlKey) {
   567|         setUsedMeta(true);
   568|         setWheeling(false);
   569|         return;
   570|       }
   571|       setWheeling(true);
   572|       timeout.current = setTimeout(() => {
   573|         setWheeling(false);
   574|       }, 2000);
   575|     };
   576|     document.addEventListener('wheel', listener);
   577|     return () => {

# --- HUNK 5: Lines 580-603 ---
   580|     };
   581|   }, []);
   582|   const zoomKey = navigator.userAgent.includes('Mac') ? '' : 'Ctrl';
   583|   const visible = wheeling && !usedMeta;
   584|   return (
   585|     <WheelInstructionTooltipContainer style={{opacity: visible ? 1 : 0}}>
   586|       {`Hold ${zoomKey} to zoom`}
   587|     </WheelInstructionTooltipContainer>
   588|   );
   589| };
   590| const WheelInstructionTooltipContainer = styled.div`
   591|   position: absolute;
   592|   bottom: 42px;
   593|   right: 40px;
   594|   white-space: nowrap;
   595|   transition: opacity 300ms ease-in-out;
   596|   font-family: ${FontFamily.default};
   597|   font-size: 12px;
   598|   line-height: 16px;
   599|   border-radius: 2px;
   600|   background: ${CoreColors.Gray900};
   601|   color: ${CoreColors.Gray50};
   602|   padding: 8px 16px;
   603| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/graphql/types.ts
# Total hunks: 6
# ====================================================================
# --- HUNK 1: Lines 79-119 ---
    79|   key: AssetKey;
    80| };
    81| export type AssetAssetMaterializationsArgs = {
    82|   afterTimestampMillis?: InputMaybe<Scalars['String']>;
    83|   beforeTimestampMillis?: InputMaybe<Scalars['String']>;
    84|   limit?: InputMaybe<Scalars['Int']>;
    85|   partitionInLast?: InputMaybe<Scalars['Int']>;
    86|   partitions?: InputMaybe<Array<Scalars['String']>>;
    87|   tags?: InputMaybe<Array<InputTag>>;
    88| };
    89| export type AssetAssetObservationsArgs = {
    90|   afterTimestampMillis?: InputMaybe<Scalars['String']>;
    91|   beforeTimestampMillis?: InputMaybe<Scalars['String']>;
    92|   limit?: InputMaybe<Scalars['Int']>;
    93|   partitionInLast?: InputMaybe<Scalars['Int']>;
    94|   partitions?: InputMaybe<Array<Scalars['String']>>;
    95| };
    96| export type AssetBackfillData = {
    97|   __typename: 'AssetBackfillData';
    98|   assetBackfillStatuses: Array<AssetBackfillStatus>;
    99|   rootTargetedPartitions: Maybe<AssetBackfillTargetPartitions>;
   100| };
   101| export type AssetBackfillPreviewParams = {
   102|   assetSelection: Array<AssetKeyInput>;
   103|   partitionNames: Array<Scalars['String']>;
   104| };
   105| export type AssetBackfillStatus = AssetPartitionsStatusCounts | UnpartitionedAssetStatus;
   106| export type AssetBackfillTargetPartitions = {
   107|   __typename: 'AssetBackfillTargetPartitions';
   108|   partitionKeys: Maybe<Array<Scalars['String']>>;
   109|   ranges: Maybe<Array<PartitionKeyRange>>;
   110| };
   111| export type AssetCheck = {
   112|   __typename: 'AssetCheck';
   113|   assetKey: AssetKey;
   114|   canExecuteIndividually: AssetCheckCanExecuteIndividually;
   115|   description: Maybe<Scalars['String']>;
   116|   executionForLatestMaterialization: Maybe<AssetCheckExecution>;
   117|   jobNames: Array<Scalars['String']>;
   118|   name: Scalars['String'];
   119| };

# --- HUNK 2: Lines 1337-1385 ---
  1337|   name: Scalars['String'];
  1338|   repositoryLocationName: Scalars['String'];
  1339|   repositoryName: Scalars['String'];
  1340| };
  1341| export type InstigationState = {
  1342|   __typename: 'InstigationState';
  1343|   hasStartPermission: Scalars['Boolean'];
  1344|   hasStopPermission: Scalars['Boolean'];
  1345|   id: Scalars['ID'];
  1346|   instigationType: InstigationType;
  1347|   name: Scalars['String'];
  1348|   nextTick: Maybe<DryRunInstigationTick>;
  1349|   repositoryLocationName: Scalars['String'];
  1350|   repositoryName: Scalars['String'];
  1351|   repositoryOrigin: RepositoryOrigin;
  1352|   runningCount: Scalars['Int'];
  1353|   runs: Array<Run>;
  1354|   runsCount: Scalars['Int'];
  1355|   selectorId: Scalars['String'];
  1356|   status: InstigationStatus;
  1357|   tick: InstigationTick;
  1358|   ticks: Array<InstigationTick>;
  1359|   typeSpecificData: Maybe<InstigationTypeSpecificData>;
  1360| };
  1361| export type InstigationStateRunsArgs = {
  1362|   limit?: InputMaybe<Scalars['Int']>;
  1363| };
  1364| export type InstigationStateTickArgs = {
  1365|   tickId: Scalars['Int'];
  1366| };
  1367| export type InstigationStateTicksArgs = {
  1368|   afterTimestamp?: InputMaybe<Scalars['Float']>;
  1369|   beforeTimestamp?: InputMaybe<Scalars['Float']>;
  1370|   cursor?: InputMaybe<Scalars['String']>;
  1371|   dayOffset?: InputMaybe<Scalars['Int']>;
  1372|   dayRange?: InputMaybe<Scalars['Int']>;
  1373|   limit?: InputMaybe<Scalars['Int']>;
  1374|   statuses?: InputMaybe<Array<InstigationTickStatus>>;
  1375| };
  1376| export type InstigationStateNotFoundError = Error & {
  1377|   __typename: 'InstigationStateNotFoundError';
  1378|   message: Scalars['String'];
  1379|   name: Scalars['String'];
  1380| };
  1381| export type InstigationStateOrError =
  1382|   | InstigationState
  1383|   | InstigationStateNotFoundError
  1384|   | PythonError;
  1385| export type InstigationStates = {

# --- HUNK 3: Lines 1394-1434 ---
  1394| export type InstigationTick = {
  1395|   __typename: 'InstigationTick';
  1396|   autoMaterializeAssetEvaluationId: Maybe<Scalars['Int']>;
  1397|   cursor: Maybe<Scalars['String']>;
  1398|   dynamicPartitionsRequestResults: Array<DynamicPartitionsRequestResult>;
  1399|   endTimestamp: Maybe<Scalars['Float']>;
  1400|   error: Maybe<PythonError>;
  1401|   id: Scalars['ID'];
  1402|   instigationType: InstigationType;
  1403|   logEvents: InstigationEventConnection;
  1404|   logKey: Maybe<Array<Scalars['String']>>;
  1405|   originRunIds: Array<Scalars['String']>;
  1406|   requestedAssetKeys: Array<AssetKey>;
  1407|   requestedAssetMaterializationCount: Scalars['Int'];
  1408|   requestedMaterializationsForAssets: Array<RequestedMaterializationsForAsset>;
  1409|   runIds: Array<Scalars['String']>;
  1410|   runKeys: Array<Scalars['String']>;
  1411|   runs: Array<Run>;
  1412|   skipReason: Maybe<Scalars['String']>;
  1413|   status: InstigationTickStatus;
  1414|   tickId: Scalars['ID'];
  1415|   timestamp: Scalars['Float'];
  1416| };
  1417| export enum InstigationTickStatus {
  1418|   FAILURE = 'FAILURE',
  1419|   SKIPPED = 'SKIPPED',
  1420|   STARTED = 'STARTED',
  1421|   SUCCESS = 'SUCCESS',
  1422| }
  1423| export enum InstigationType {
  1424|   AUTO_MATERIALIZE = 'AUTO_MATERIALIZE',
  1425|   SCHEDULE = 'SCHEDULE',
  1426|   SENSOR = 'SENSOR',
  1427| }
  1428| export type InstigationTypeSpecificData = ScheduleData | SensorData;
  1429| export type IntMetadataEntry = MetadataEntry & {
  1430|   __typename: 'IntMetadataEntry';
  1431|   description: Maybe<Scalars['String']>;
  1432|   intRepr: Scalars['String'];
  1433|   intValue: Maybe<Scalars['Int']>;
  1434|   label: Scalars['String'];

# --- HUNK 4: Lines 3720-3760 ---
  3720|   SAFE_TERMINATE = 'SAFE_TERMINATE',
  3721| }
  3722| export type TerminateRunResult =
  3723|   | PythonError
  3724|   | RunNotFoundError
  3725|   | TerminateRunFailure
  3726|   | TerminateRunSuccess
  3727|   | UnauthorizedError;
  3728| export type TerminateRunSuccess = TerminatePipelineExecutionSuccess & {
  3729|   __typename: 'TerminateRunSuccess';
  3730|   run: Run;
  3731| };
  3732| export type TerminateRunsResult = {
  3733|   __typename: 'TerminateRunsResult';
  3734|   terminateRunResults: Array<TerminateRunResult>;
  3735| };
  3736| export type TerminateRunsResultOrError = PythonError | TerminateRunsResult;
  3737| export type TestFields = {
  3738|   __typename: 'TestFields';
  3739|   alwaysException: Maybe<Scalars['String']>;
  3740|   asyncString: Maybe<Scalars['String']>;
  3741| };
  3742| export type TextMetadataEntry = MetadataEntry & {
  3743|   __typename: 'TextMetadataEntry';
  3744|   description: Maybe<Scalars['String']>;
  3745|   label: Scalars['String'];
  3746|   text: Scalars['String'];
  3747| };
  3748| export type TextRuleEvaluationData = {
  3749|   __typename: 'TextRuleEvaluationData';
  3750|   text: Maybe<Scalars['String']>;
  3751| };
  3752| export type TickEvaluation = {
  3753|   __typename: 'TickEvaluation';
  3754|   cursor: Maybe<Scalars['String']>;
  3755|   dynamicPartitionsRequests: Maybe<Array<DynamicPartitionRequest>>;
  3756|   error: Maybe<PythonError>;
  3757|   runRequests: Maybe<Array<RunRequest>>;
  3758|   skipReason: Maybe<Scalars['String']>;
  3759| };
  3760| export type TimePartitionRangeStatus = {

# --- HUNK 5: Lines 6788-6831 ---
  6788|       overrides && overrides.hasOwnProperty('requestedAssetKeys')
  6789|         ? overrides.requestedAssetKeys!
  6790|         : [],
  6791|     requestedAssetMaterializationCount:
  6792|       overrides && overrides.hasOwnProperty('requestedAssetMaterializationCount')
  6793|         ? overrides.requestedAssetMaterializationCount!
  6794|         : 412,
  6795|     requestedMaterializationsForAssets:
  6796|       overrides && overrides.hasOwnProperty('requestedMaterializationsForAssets')
  6797|         ? overrides.requestedMaterializationsForAssets!
  6798|         : [],
  6799|     runIds: overrides && overrides.hasOwnProperty('runIds') ? overrides.runIds! : [],
  6800|     runKeys: overrides && overrides.hasOwnProperty('runKeys') ? overrides.runKeys! : [],
  6801|     runs: overrides && overrides.hasOwnProperty('runs') ? overrides.runs! : [],
  6802|     skipReason:
  6803|       overrides && overrides.hasOwnProperty('skipReason') ? overrides.skipReason! : 'maxime',
  6804|     status:
  6805|       overrides && overrides.hasOwnProperty('status')
  6806|         ? overrides.status!
  6807|         : InstigationTickStatus.FAILURE,
  6808|     tickId:
  6809|       overrides && overrides.hasOwnProperty('tickId')
  6810|         ? overrides.tickId!
  6811|         : '664bf548-9cd0-4a28-8f90-61c0e5d4d811',
  6812|     timestamp: overrides && overrides.hasOwnProperty('timestamp') ? overrides.timestamp! : 6.06,
  6813|   };
  6814| };
  6815| export const buildIntMetadataEntry = (
  6816|   overrides?: Partial<IntMetadataEntry>,
  6817|   _relationshipsToOmit: Set<string> = new Set(),
  6818| ): {__typename: 'IntMetadataEntry'} & IntMetadataEntry => {
  6819|   const relationshipsToOmit: Set<string> = new Set(_relationshipsToOmit);
  6820|   relationshipsToOmit.add('IntMetadataEntry');
  6821|   return {
  6822|     __typename: 'IntMetadataEntry',
  6823|     description:
  6824|       overrides && overrides.hasOwnProperty('description') ? overrides.description! : 'et',
  6825|     intRepr: overrides && overrides.hasOwnProperty('intRepr') ? overrides.intRepr! : 'omnis',
  6826|     intValue: overrides && overrides.hasOwnProperty('intValue') ? overrides.intValue! : 9039,
  6827|     label: overrides && overrides.hasOwnProperty('label') ? overrides.label! : 'enim',
  6828|   };
  6829| };
  6830| export const buildInvalidOutputError = (
  6831|   overrides?: Partial<InvalidOutputError>,

# --- HUNK 6: Lines 11777-11818 ---
 11777|   return {
 11778|     __typename: 'TerminateRunsResult',
 11779|     terminateRunResults:
 11780|       overrides && overrides.hasOwnProperty('terminateRunResults')
 11781|         ? overrides.terminateRunResults!
 11782|         : [],
 11783|   };
 11784| };
 11785| export const buildTestFields = (
 11786|   overrides?: Partial<TestFields>,
 11787|   _relationshipsToOmit: Set<string> = new Set(),
 11788| ): {__typename: 'TestFields'} & TestFields => {
 11789|   const relationshipsToOmit: Set<string> = new Set(_relationshipsToOmit);
 11790|   relationshipsToOmit.add('TestFields');
 11791|   return {
 11792|     __typename: 'TestFields',
 11793|     alwaysException:
 11794|       overrides && overrides.hasOwnProperty('alwaysException')
 11795|         ? overrides.alwaysException!
 11796|         : 'quibusdam',
 11797|     asyncString:
 11798|       overrides && overrides.hasOwnProperty('asyncString') ? overrides.asyncString! : 'non',
 11799|   };
 11800| };
 11801| export const buildTextMetadataEntry = (
 11802|   overrides?: Partial<TextMetadataEntry>,
 11803|   _relationshipsToOmit: Set<string> = new Set(),
 11804| ): {__typename: 'TextMetadataEntry'} & TextMetadataEntry => {
 11805|   const relationshipsToOmit: Set<string> = new Set(_relationshipsToOmit);
 11806|   relationshipsToOmit.add('TextMetadataEntry');
 11807|   return {
 11808|     __typename: 'TextMetadataEntry',
 11809|     description:
 11810|       overrides && overrides.hasOwnProperty('description') ? overrides.description! : 'illum',
 11811|     label: overrides && overrides.hasOwnProperty('label') ? overrides.label! : 'quae',
 11812|     text: overrides && overrides.hasOwnProperty('text') ? overrides.text! : 'dignissimos',
 11813|   };
 11814| };
 11815| export const buildTextRuleEvaluationData = (
 11816|   overrides?: Partial<TextRuleEvaluationData>,
 11817|   _relationshipsToOmit: Set<string> = new Set(),
 11818| ): {__typename: 'TextRuleEvaluationData'} & TextRuleEvaluationData => {


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instance/DaemonHealth.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-31 ---
     1| import {
     2|   Button,
     3|   ButtonLink,
     4|   DialogBody,
     5|   DialogFooter,
     6|   Dialog,
     7|   Group,
     8|   Tag,
     9|   Trace,
    10|   colorLinkDefault,
    11|   colorTextLight,
    12| } from '@dagster-io/ui-components';
    13| import * as React from 'react';
    14| import {DaemonStatusForListFragment} from './types/DaemonList.types';
    15| interface Props {
    16|   daemon: DaemonStatusForListFragment;
    17| }
    18| const DaemonHealthTag = (props: Props) => {
    19|   const {daemon} = props;
    20|   if (daemon.healthy) {
    21|     return <Tag intent="success">Running</Tag>;
    22|   }
    23|   if (daemon.required) {
    24|     return <Tag intent="danger">Not running</Tag>;
    25|   }
    26|   return <Tag intent="none">Not enabled</Tag>;
    27| };
    28| type State = {
    29|   shown: boolean;
    30|   page: number;
    31| };

# --- HUNK 2: Lines 40-80 ---
    40|       return {...state, page: action.page};
    41|     default:
    42|       return state;
    43|   }
    44| };
    45| const initialState = {shown: false, page: 0};
    46| export const DaemonHealth = (props: Props) => {
    47|   const {daemon} = props;
    48|   const [state, dispatch] = React.useReducer(reducer, initialState);
    49|   const {shown, page} = state;
    50|   const errors = daemon.lastHeartbeatErrors;
    51|   const errorCount = errors.length;
    52|   const show = () => dispatch({type: 'show'});
    53|   const hide = () => dispatch({type: 'hide'});
    54|   const prev = () => dispatch({type: 'page', page: page === 0 ? errorCount - 1 : page - 1});
    55|   const next = () => dispatch({type: 'page', page: page === errorCount - 1 ? 0 : page + 1});
    56|   const metadata = () => {
    57|     if (errorCount > 0) {
    58|       return (
    59|         <>
    60|           <ButtonLink color={colorLinkDefault()} underline="hover" onClick={show}>
    61|             {errorCount > 1 ? `View errors (${errorCount})` : 'View error'}
    62|           </ButtonLink>
    63|           <Dialog
    64|             isOpen={shown}
    65|             title="Daemon error"
    66|             onClose={hide}
    67|             style={{maxWidth: '80%', minWidth: '70%'}}
    68|           >
    69|             <DialogBody>
    70|               <Group direction="column" spacing={12}>
    71|                 {errorCount === 1 ? (
    72|                   <div>
    73|                     <strong>{daemon.daemonType}</strong> daemon logged an error.
    74|                   </div>
    75|                 ) : (
    76|                   <div>
    77|                     <strong>{daemon.daemonType}</strong> daemon logged {errorCount} errors.
    78|                   </div>
    79|                 )}
    80|                 <Trace>

# --- HUNK 3: Lines 90-120 ---
    90|                 errorCount > 1 ? (
    91|                   <Group direction="row" spacing={12} alignItems="center">
    92|                     <ButtonLink onClick={prev}>&larr; Previous</ButtonLink>
    93|                     <span>{`${page + 1} of ${errorCount}`}</span>
    94|                     <ButtonLink onClick={next}>Next &rarr;</ButtonLink>
    95|                   </Group>
    96|                 ) : (
    97|                   <div />
    98|                 )
    99|               }
   100|             >
   101|               <Button intent="primary" onClick={hide}>
   102|                 OK
   103|               </Button>
   104|             </DialogFooter>
   105|           </Dialog>
   106|         </>
   107|       );
   108|     }
   109|     if (!daemon.healthy) {
   110|       return <div style={{color: colorTextLight()}}>No recent heartbeat</div>;
   111|     }
   112|     return null;
   113|   };
   114|   return (
   115|     <Group direction="row" spacing={8} alignItems="center">
   116|       <DaemonHealthTag daemon={daemon} />
   117|       {metadata()}
   118|     </Group>
   119|   );
   120| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instance/InstanceBackfills.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-30 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {
     3|   Box,
     4|   CursorPaginationControls,
     5|   NonIdealState,
     6|   PageHeader,
     7|   Heading,
     8|   Page,
     9|   Spinner,
    10|   colorTextLight,
    11| } from '@dagster-io/ui-components';
    12| import * as React from 'react';
    13| import {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';
    14| import {PythonErrorInfo} from '../app/PythonErrorInfo';
    15| import {FIFTEEN_SECONDS, useQueryRefreshAtInterval} from '../app/QueryRefresh';
    16| import {useTrackPageView} from '../app/analytics';
    17| import {BulkActionStatus} from '../graphql/types';
    18| import {useDocumentTitle} from '../hooks/useDocumentTitle';
    19| import {OverviewTabs} from '../overview/OverviewTabs';
    20| import {DaemonNotRunningAlertBody} from '../partitions/BackfillMessaging';
    21| import {useCursorPaginatedQuery} from '../runs/useCursorPaginatedQuery';
    22| import {useFilters} from '../ui/Filters';
    23| import {useStaticSetFilter} from '../ui/Filters/useStaticSetFilter';
    24| import {INSTANCE_HEALTH_FRAGMENT} from './InstanceHealthFragment';
    25| import {BackfillTable, BACKFILL_TABLE_FRAGMENT} from './backfill/BackfillTable';
    26| import {
    27|   InstanceBackfillsQuery,
    28|   InstanceBackfillsQueryVariables,
    29|   InstanceHealthForBackfillsQuery,
    30|   InstanceHealthForBackfillsQueryVariables,

# --- HUNK 2: Lines 80-120 ---
    80|       status: statusState.size > 0 ? Array.from(statusState)[0]! : undefined,
    81|     },
    82|     pageSize: PAGE_SIZE,
    83|     nextCursorForResult: (result) =>
    84|       result.partitionBackfillsOrError.__typename === 'PartitionBackfills'
    85|         ? result.partitionBackfillsOrError.results[PAGE_SIZE - 1]?.id
    86|         : undefined,
    87|     getResultArray: (result) =>
    88|       result?.partitionBackfillsOrError.__typename === 'PartitionBackfills'
    89|         ? result.partitionBackfillsOrError.results
    90|         : [],
    91|   });
    92|   const refreshState = useQueryRefreshAtInterval(queryResult, FIFTEEN_SECONDS);
    93|   const {loading, data} = queryResult;
    94|   const content = () => {
    95|     if (loading && !data) {
    96|       return (
    97|         <Box padding={{vertical: 64}} flex={{direction: 'column', alignItems: 'center'}}>
    98|           <Box flex={{direction: 'row', alignItems: 'center', gap: 8}}>
    99|             <Spinner purpose="body-text" />
   100|             <div style={{color: colorTextLight()}}>Loading backfills</div>
   101|           </Box>
   102|         </Box>
   103|       );
   104|     }
   105|     const partitionBackfillsOrError = data?.partitionBackfillsOrError;
   106|     if (partitionBackfillsOrError?.__typename === 'PythonError') {
   107|       return <PythonErrorInfo error={partitionBackfillsOrError} />;
   108|     }
   109|     if (!partitionBackfillsOrError || !partitionBackfillsOrError?.results.length) {
   110|       if (statusState.size > 0) {
   111|         return (
   112|           <Box padding={{vertical: 64}}>
   113|             <NonIdealState
   114|               icon="no-results"
   115|               title="No matching backfills"
   116|               description="No backfills were found for this filter."
   117|             />
   118|           </Box>
   119|         );
   120|       }


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instance/InstanceConcurrency.tsx
# Total hunks: 6
# ====================================================================
# --- HUNK 1: Lines 1-142 ---
     1| import {gql, useQuery, useMutation} from '@apollo/client';
     2| import {
     3|   Subheading,
     4|   MetadataTableWIP,
     5|   StyledRawCodeMirror,
     6|   PageHeader,
     7|   Heading,
     8|   Box,
     9|   Dialog,
    10|   DialogBody,
    11|   DialogFooter,
    12|   Icon,
    13|   Menu,
    14|   MenuItem,
    15|   Mono,
    16|   Popover,
    17|   Spinner,
    18|   ButtonLink,
    19|   Table,
    20|   Tag,
    21|   TextInput,
    22|   Button,
    23|   NonIdealState,
    24|   Page,
    25|   Tooltip,
    26|   colorAccentGray,
    27|   colorTextLight,
    28|   colorBackgroundYellow,
    29| } from '@dagster-io/ui-components';
    30| import * as React from 'react';
    31| import {Link} from 'react-router-dom';
    32| import {showSharedToaster} from '../app/DomUtils';
    33| import {useQueryRefreshAtInterval, FIFTEEN_SECONDS} from '../app/QueryRefresh';
    34| import {COMMON_COLLATOR} from '../app/Util';
    35| import {useTrackPageView} from '../app/analytics';
    36| import {RunStatus} from '../graphql/types';
    37| import {useDocumentTitle} from '../hooks/useDocumentTitle';
    38| import {RunStatusDot} from '../runs/RunStatusDots';
    39| import {failedStatuses} from '../runs/RunStatuses';
    40| import {titleForRun} from '../runs/RunUtils';
    41| import {TimeElapsed} from '../runs/TimeElapsed';
    42| import {InstancePageContext} from './InstancePageContext';
    43| import {InstanceTabs} from './InstanceTabs';
    44| import {
    45|   ConcurrencyKeyDetailsQuery,
    46|   ConcurrencyKeyDetailsQueryVariables,
    47|   ConcurrencyLimitFragment,
    48|   ConcurrencyStepFragment,
    49|   FreeConcurrencySlotsMutation,
    50|   FreeConcurrencySlotsMutationVariables,
    51|   InstanceConcurrencyLimitsQuery,
    52|   InstanceConcurrencyLimitsQueryVariables,
    53|   RunsForConcurrencyKeyQuery,
    54|   RunsForConcurrencyKeyQueryVariables,
    55|   RunQueueConfigFragment,
    56|   SetConcurrencyLimitMutation,
    57|   SetConcurrencyLimitMutationVariables,
    58| } from './types/InstanceConcurrency.types';
    59| const InstanceConcurrencyPage = React.memo(() => {
    60|   useTrackPageView();
    61|   useDocumentTitle('Concurrency');
    62|   const {pageTitle} = React.useContext(InstancePageContext);
    63|   const queryResult = useQuery<
    64|     InstanceConcurrencyLimitsQuery,
    65|     InstanceConcurrencyLimitsQueryVariables
    66|   >(INSTANCE_CONCURRENCY_LIMITS_QUERY, {
    67|     notifyOnNetworkStatusChange: true,
    68|   });
    69|   const refreshState = useQueryRefreshAtInterval(queryResult, FIFTEEN_SECONDS);
    70|   const {data} = queryResult;
    71|   return (
    72|     <Page>
    73|       <PageHeader
    74|         title={<Heading>{pageTitle}</Heading>}
    75|         tabs={<InstanceTabs tab="concurrency" refreshState={refreshState} />}
    76|       />
    77|       {data ? (
    78|         <>
    79|           <Box margin={{bottom: 64}}>
    80|             <RunConcurrencyContent
    81|               hasRunQueue={!!data?.instance.runQueuingSupported}
    82|               runQueueConfig={data?.instance.runQueueConfig}
    83|             />
    84|           </Box>
    85|           <ConcurrencyLimits
    86|             instanceConfig={data.instance.info}
    87|             limits={data.instance.concurrencyLimits}
    88|             hasSupport={data.instance.supportsConcurrencyLimits}
    89|             refetch={queryResult.refetch}
    90|           />
    91|         </>
    92|       ) : (
    93|         <Box padding={{vertical: 64}}>
    94|           <Spinner purpose="section" />
    95|         </Box>
    96|       )}
    97|     </Page>
    98|   );
    99| });
   100| export default InstanceConcurrencyPage;
   101| type DialogAction =
   102|   | {
   103|       actionType: 'add';
   104|     }
   105|   | {
   106|       actionType: 'edit';
   107|       concurrencyKey: string;
   108|       concurrencyLimit: number;
   109|     }
   110|   | {
   111|       actionType: 'delete';
   112|       concurrencyKey: string;
   113|     }
   114|   | undefined;
   115| export const RunConcurrencyContent = ({
   116|   hasRunQueue,
   117|   runQueueConfig,
   118|   onEdit,
   119| }: {
   120|   hasRunQueue: boolean;
   121|   runQueueConfig: RunQueueConfigFragment | null | undefined;
   122|   onEdit?: () => void;
   123| }) => {
   124|   if (!hasRunQueue) {
   125|     return (
   126|       <>
   127|         <Box padding={{vertical: 16, horizontal: 24}} border="bottom">
   128|           <Subheading>Run concurrency</Subheading>
   129|         </Box>
   130|         <div>
   131|           Run concurrency is not supported with this run coordinator. To enable run concurrency
   132|           limits, configure your instance to use the <Mono>QueuedRunCoordinator</Mono> in your{' '}
   133|           <Mono>dagster.yaml</Mono>. See the{' '}
   134|           <a
   135|             target="_blank"
   136|             rel="noreferrer"
   137|             href="https://docs.dagster.io/deployment/dagster-instance#queuedruncoordinator"
   138|           >
   139|             QueuedRunCoordinator documentation
   140|           </a>{' '}
   141|           for more information.
   142|         </div>

# --- HUNK 2: Lines 166-401 ---
   166|           </td>
   167|         </tr>
   168|         <tr>
   169|           <td>Tag concurrency limits:</td>
   170|           <td>
   171|             {runQueueConfig.tagConcurrencyLimitsYaml ? (
   172|               <StyledRawCodeMirror
   173|                 value={runQueueConfig.tagConcurrencyLimitsYaml}
   174|                 options={{readOnly: true, lineNumbers: true, mode: 'yaml'}}
   175|               />
   176|             ) : (
   177|               '-'
   178|             )}
   179|           </td>
   180|         </tr>
   181|       </tbody>
   182|     </MetadataTableWIP>
   183|   ) : null;
   184|   return (
   185|     <>
   186|       <RunConcurrencyLimitHeader onEdit={onEdit} />
   187|       {info_content}
   188|       {settings_content}
   189|     </>
   190|   );
   191| };
   192| const RunConcurrencyLimitHeader = ({onEdit}: {onEdit?: () => void}) => (
   193|   <Box
   194|     flex={{justifyContent: 'space-between', alignItems: 'center'}}
   195|     padding={{vertical: 16, horizontal: 24}}
   196|     border="bottom"
   197|   >
   198|     <Subheading>Run concurrency</Subheading>
   199|     {onEdit ? (
   200|       <Button icon={<Icon name="edit" />} onClick={() => onEdit()}>
   201|         Edit configuration
   202|       </Button>
   203|     ) : (
   204|       <span />
   205|     )}
   206|   </Box>
   207| );
   208| export const ConcurrencyLimits = ({
   209|   instanceConfig,
   210|   hasSupport,
   211|   limits,
   212|   refetch,
   213| }: {
   214|   limits: ConcurrencyLimitFragment[];
   215|   refetch: () => void;
   216|   instanceConfig?: string | null;
   217|   hasSupport?: boolean;
   218| }) => {
   219|   const [action, setAction] = React.useState<DialogAction>();
   220|   const [selectedKey, setSelectedKey] = React.useState<string | undefined>(undefined);
   221|   const onConcurrencyStepsDialogClose = React.useCallback(() => {
   222|     setSelectedKey(undefined);
   223|   }, [setSelectedKey]);
   224|   const limitsByKey = Object.fromEntries(
   225|     limits.map(({concurrencyKey, slotCount}) => [concurrencyKey, slotCount]),
   226|   );
   227|   const sortedLimits = React.useMemo(() => {
   228|     return [...limits].sort((a, b) => COMMON_COLLATOR.compare(a.concurrencyKey, b.concurrencyKey));
   229|   }, [limits]);
   230|   const onAdd = () => {
   231|     setAction({actionType: 'add'});
   232|   };
   233|   const onEdit = (concurrencyKey: string) => {
   234|     setAction({actionType: 'edit', concurrencyKey, concurrencyLimit: limitsByKey[concurrencyKey]!});
   235|   };
   236|   const onDelete = (concurrencyKey: string) => {
   237|     setAction({actionType: 'delete', concurrencyKey});
   238|   };
   239|   if (!hasSupport && instanceConfig && instanceConfig.includes('SqliteEventLogStorage')) {
   240|     return (
   241|       <>
   242|         <ConcurrencyLimitHeader />
   243|         <Box margin={24}>
   244|           <NonIdealState
   245|             icon="error"
   246|             title="No concurrency support"
   247|             description={
   248|               'This instance does not support global concurrency limits. You will need to ' +
   249|               'configure a different storage implementation (e.g. Postgres/MySQL) to use this ' +
   250|               'feature.'
   251|             }
   252|           />
   253|         </Box>
   254|       </>
   255|     );
   256|   } else if (hasSupport === false) {
   257|     return (
   258|       <>
   259|         <ConcurrencyLimitHeader />
   260|         <Box margin={24}>
   261|           <NonIdealState
   262|             icon="error"
   263|             title="No concurrency support"
   264|             description={
   265|               'This instance does not currently support global concurrency limits. You may need to ' +
   266|               'run `dagster instance migrate` to add the necessary tables to your dagster storage ' +
   267|               'to support this feature.'
   268|             }
   269|           />
   270|         </Box>
   271|       </>
   272|     );
   273|   }
   274|   return (
   275|     <>
   276|       <ConcurrencyLimitHeader onAdd={onAdd} />
   277|       {limits.length === 0 ? (
   278|         <Box margin={24}>
   279|           <NonIdealState
   280|             icon="error"
   281|             title="No concurrency limits"
   282|             description={
   283|               <>
   284|                 No concurrency limits have been configured for this instance.&nbsp;
   285|                 <ButtonLink onClick={() => onAdd()}>Add a concurrency limit</ButtonLink>.
   286|               </>
   287|             }
   288|           />
   289|         </Box>
   290|       ) : (
   291|         <Table>
   292|           <thead>
   293|             <tr>
   294|               <th style={{width: '260px'}}>Concurrency key</th>
   295|               <th style={{width: '20%'}}>Total slots</th>
   296|               <th style={{width: '20%'}}>Assigned steps</th>
   297|               <th style={{width: '20%'}}>Pending steps</th>
   298|               <th style={{width: '20%'}}>All steps</th>
   299|               <th></th>
   300|             </tr>
   301|           </thead>
   302|           <tbody>
   303|             {sortedLimits.map((limit) => (
   304|               <tr key={limit.concurrencyKey}>
   305|                 <td>{limit.concurrencyKey}</td>
   306|                 <td>{limit.slotCount}</td>
   307|                 <td>{limit.pendingSteps.filter((x) => !!x.assignedTimestamp).length}</td>
   308|                 <td>{limit.pendingSteps.filter((x) => !x.assignedTimestamp).length}</td>
   309|                 <td>
   310|                   <span style={{marginRight: 16}}>{limit.pendingSteps.length}</span>
   311|                   <Tag intent="primary" interactive>
   312|                     <ButtonLink
   313|                       onClick={() => {
   314|                         setSelectedKey(limit.concurrencyKey);
   315|                       }}
   316|                     >
   317|                       View all
   318|                     </ButtonLink>
   319|                   </Tag>
   320|                 </td>
   321|                 <td>
   322|                   <ConcurrencyLimitActionMenu
   323|                     concurrencyKey={limit.concurrencyKey}
   324|                     onEdit={onEdit}
   325|                     onDelete={onDelete}
   326|                   />
   327|                 </td>
   328|               </tr>
   329|             ))}
   330|           </tbody>
   331|         </Table>
   332|       )}
   333|       <AddConcurrencyLimitDialog
   334|         open={action?.actionType === 'add'}
   335|         onClose={() => setAction(undefined)}
   336|         onComplete={refetch}
   337|       />
   338|       <DeleteConcurrencyLimitDialog
   339|         concurrencyKey={action && action.actionType === 'delete' ? action.concurrencyKey : ''}
   340|         open={action?.actionType === 'delete'}
   341|         onClose={() => setAction(undefined)}
   342|         onComplete={refetch}
   343|       />
   344|       <EditConcurrencyLimitDialog
   345|         open={action?.actionType === 'edit'}
   346|         onClose={() => setAction(undefined)}
   347|         onComplete={refetch}
   348|         concurrencyKey={action?.actionType === 'edit' ? action.concurrencyKey : ''}
   349|       />
   350|       <ConcurrencyStepsDialog
   351|         title={
   352|           <span>
   353|             Concurrency steps for <strong>{selectedKey}</strong>
   354|           </span>
   355|         }
   356|         onClose={onConcurrencyStepsDialogClose}
   357|         concurrencyKey={selectedKey}
   358|         onUpdate={refetch}
   359|       />
   360|     </>
   361|   );
   362| };
   363| const ConcurrencyLimitHeader = ({onAdd}: {onAdd?: () => void}) => (
   364|   <Box
   365|     flex={{justifyContent: 'space-between', alignItems: 'center'}}
   366|     padding={{vertical: 16, horizontal: 24}}
   367|     border="top-and-bottom"
   368|   >
   369|     <Subheading>
   370|       <Box flex={{alignItems: 'center', direction: 'row', gap: 8}}>
   371|         <span>Global op/asset concurrency</span>
   372|         <Tag>Experimental</Tag>
   373|       </Box>
   374|     </Subheading>
   375|     {onAdd ? (
   376|       <Button icon={<Icon name="add_circle" />} onClick={() => onAdd()}>
   377|         Add concurrency limit
   378|       </Button>
   379|     ) : null}
   380|   </Box>
   381| );
   382| const ConcurrencyLimitActionMenu = ({
   383|   concurrencyKey,
   384|   onDelete,
   385|   onEdit,
   386| }: {
   387|   concurrencyKey: string;
   388|   onEdit: (key: string) => void;
   389|   onDelete: (key: string) => void;
   390| }) => {
   391|   return (
   392|     <Popover
   393|       content={
   394|         <Menu>
   395|           <MenuItem icon="edit" text="Edit" onClick={() => onEdit(concurrencyKey)} />
   396|           <MenuItem
   397|             icon="delete"
   398|             intent="danger"
   399|             text="Delete"
   400|             onClick={() => onDelete(concurrencyKey)}
   401|           />

# --- HUNK 3: Lines 747-818 ---
   747|       return a.priority - b.priority;
   748|     }
   749|     return a.enqueuedTimestamp - b.enqueuedTimestamp;
   750|   });
   751|   const assignedSteps = steps.filter((step) => !!step.assignedTimestamp);
   752|   const pendingSteps = steps.filter((step) => !step.assignedTimestamp);
   753|   const tableHeader = (
   754|     <thead>
   755|       <tr>
   756|         <th>Run ID</th>
   757|         <th>Step key</th>
   758|         <th>Assigned</th>
   759|         <th>Queued</th>
   760|         <th>
   761|           <Box flex={{alignItems: 'center', direction: 'row', gap: 4}}>
   762|             Priority
   763|             <Tooltip
   764|               placement="top"
   765|               content="Priority can be set on each op/asset using the 'dagster/priority' tag. Higher priority steps will be assigned slots first."
   766|             >
   767|               <Icon name="info" color={colorAccentGray()} />
   768|             </Tooltip>
   769|           </Box>
   770|         </th>
   771|         <th></th>
   772|       </tr>
   773|     </thead>
   774|   );
   775|   if (!steps.length) {
   776|     return (
   777|       <Table>
   778|         {tableHeader}
   779|         <tbody>
   780|           <tr>
   781|             <td colSpan={6}>
   782|               <Box
   783|                 flex={{alignItems: 'center', justifyContent: 'center'}}
   784|                 style={{color: colorTextLight()}}
   785|                 padding={16}
   786|               >
   787|                 There are no active or pending steps for this concurrency key.
   788|               </Box>
   789|             </td>
   790|           </tr>
   791|         </tbody>
   792|       </Table>
   793|     );
   794|   }
   795|   return (
   796|     <Table>
   797|       {tableHeader}
   798|       <tbody style={{backgroundColor: colorBackgroundYellow()}}>
   799|         {assignedSteps.map((step) => (
   800|           <PendingStepRow
   801|             key={step.runId + step.stepKey}
   802|             step={step}
   803|             statusByRunId={statusByRunId}
   804|             onUpdate={refresh}
   805|           />
   806|         ))}
   807|       </tbody>
   808|       <tbody>
   809|         {pendingSteps.map((step) => (
   810|           <PendingStepRow
   811|             key={step.runId + step.stepKey}
   812|             step={step}
   813|             statusByRunId={statusByRunId}
   814|             onUpdate={refresh}
   815|           />
   816|         ))}
   817|       </tbody>
   818|     </Table>

# --- HUNK 4: Lines 824-864 ---
   824|   onUpdate,
   825| }: {
   826|   step: ConcurrencyStepFragment;
   827|   statusByRunId: {[id: string]: RunStatus};
   828|   onUpdate: () => void;
   829| }) => {
   830|   const runStatus = statusByRunId[step.runId];
   831|   return (
   832|     <tr>
   833|       <td>
   834|         {runStatus ? (
   835|           <Link to={`/runs/${step.runId}`}>
   836|             <Box flex={{direction: 'row', alignItems: 'center', gap: 8}}>
   837|               <RunStatusDot status={runStatus} size={10} />
   838|               <Mono>{titleForRun({id: step.runId})}</Mono>
   839|               {failedStatuses.has(runStatus) ? (
   840|                 <Tooltip
   841|                   placement="top"
   842|                   content="Slots for canceled / failed runs can automatically be freed by configuring a run monitoring setting."
   843|                 >
   844|                   <Icon name="info" color={colorAccentGray()} />
   845|                 </Tooltip>
   846|               ) : null}
   847|             </Box>
   848|           </Link>
   849|         ) : (
   850|           <Mono>{titleForRun({id: step.runId})}</Mono>
   851|         )}
   852|       </td>
   853|       <td>
   854|         <Mono>{step.stepKey}</Mono>
   855|       </td>
   856|       <td>
   857|         {step.assignedTimestamp ? (
   858|           <TimeElapsed startUnix={step.assignedTimestamp} endUnix={null} />
   859|         ) : (
   860|           '-'
   861|         )}
   862|       </td>
   863|       <td>
   864|         {step.enqueuedTimestamp ? (


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instance/InstanceConfig.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-54 ---
     1| import 'codemirror/addon/search/searchcursor';
     2| import {gql, useQuery} from '@apollo/client';
     3| import {
     4|   Box,
     5|   PageHeader,
     6|   Spinner,
     7|   Code,
     8|   Heading,
     9|   StyledRawCodeMirror,
    10|   Subheading,
    11|   colorKeylineDefault,
    12|   colorBackgroundDefault,
    13|   colorTextDefault,
    14|   colorBackgroundLime,
    15| } from '@dagster-io/ui-components';
    16| import CodeMirror from 'codemirror';
    17| import * as React from 'react';
    18| import {createGlobalStyle} from 'styled-components';
    19| import {useQueryRefreshAtInterval, FIFTEEN_SECONDS} from '../app/QueryRefresh';
    20| import {useTrackPageView} from '../app/analytics';
    21| import {useDocumentTitle} from '../hooks/useDocumentTitle';
    22| import {InstancePageContext} from './InstancePageContext';
    23| import {InstanceTabs} from './InstanceTabs';
    24| import {InstanceConfigQuery, InstanceConfigQueryVariables} from './types/InstanceConfig.types';
    25| const InstanceConfigStyle = createGlobalStyle`
    26|   .CodeMirror.cm-s-instance-config {
    27|     background-color: ${colorBackgroundDefault()};
    28|     box-shadow: 0 1px 0 ${colorKeylineDefault()};
    29|     color: ${colorTextDefault()};
    30|     height: 100%;
    31|   }
    32|   .CodeMirror.cm-s-instance-config {
    33|     .config-highlight {
    34|       background-color: ${colorBackgroundLime()};
    35|     }
    36| `;
    37| export const InstanceConfig = React.memo(() => {
    38|   useTrackPageView();
    39|   useDocumentTitle('Configuration');
    40|   const {pageTitle} = React.useContext(InstancePageContext);
    41|   const queryResult = useQuery<InstanceConfigQuery, InstanceConfigQueryVariables>(
    42|     INSTANCE_CONFIG_QUERY,
    43|     {
    44|       notifyOnNetworkStatusChange: true,
    45|     },
    46|   );
    47|   const refreshState = useQueryRefreshAtInterval(queryResult, FIFTEEN_SECONDS);
    48|   const {data} = queryResult;
    49|   const config = data?.instance.info;
    50|   const handlers = React.useMemo(() => {
    51|     return {
    52|       onReady: (editor: CodeMirror.Editor) => {
    53|         const documentHash = document.location.hash;
    54|         if (documentHash) {


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instance/InstanceHealthPage.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-47 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {Box, PageHeader, Heading, Subheading, colorTextLight} from '@dagster-io/ui-components';
     3| import * as React from 'react';
     4| import {FIFTEEN_SECONDS, useQueryRefreshAtInterval} from '../app/QueryRefresh';
     5| import {useTrackPageView} from '../app/analytics';
     6| import {useDocumentTitle} from '../hooks/useDocumentTitle';
     7| import {DaemonList} from './DaemonList';
     8| import {INSTANCE_HEALTH_FRAGMENT} from './InstanceHealthFragment';
     9| import {InstancePageContext} from './InstancePageContext';
    10| import {InstanceTabs} from './InstanceTabs';
    11| import {InstanceHealthQuery, InstanceHealthQueryVariables} from './types/InstanceHealthPage.types';
    12| export const InstanceHealthPage = () => {
    13|   useTrackPageView();
    14|   useDocumentTitle('Daemons');
    15|   const {pageTitle} = React.useContext(InstancePageContext);
    16|   const queryData = useQuery<InstanceHealthQuery, InstanceHealthQueryVariables>(
    17|     INSTANCE_HEALTH_QUERY,
    18|     {
    19|       notifyOnNetworkStatusChange: true,
    20|     },
    21|   );
    22|   const refreshState = useQueryRefreshAtInterval(queryData, FIFTEEN_SECONDS);
    23|   const {loading, data} = queryData;
    24|   const daemonContent = () => {
    25|     if (loading && !data?.instance) {
    26|       return (
    27|         <Box padding={{horizontal: 24}} style={{color: colorTextLight()}}>
    28|           Loading
    29|         </Box>
    30|       );
    31|     }
    32|     return data?.instance ? (
    33|       <DaemonList daemonStatuses={data.instance.daemonHealth.allDaemonStatuses} />
    34|     ) : null;
    35|   };
    36|   return (
    37|     <>
    38|       <PageHeader
    39|         title={<Heading>{pageTitle}</Heading>}
    40|         tabs={<InstanceTabs tab="health" refreshState={refreshState} />}
    41|       />
    42|       <Box padding={{vertical: 16, horizontal: 24}}>
    43|         <Subheading>Daemon statuses</Subheading>
    44|       </Box>
    45|       {daemonContent()}
    46|     </>
    47|   );


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instance/InstanceTabs.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-41 ---
     1| import {QueryResult} from '@apollo/client';
     2| import {Box, Tabs} from '@dagster-io/ui-components';
     3| import * as React from 'react';
     4| import {QueryRefreshCountdown, QueryRefreshState} from '../app/QueryRefresh';
     5| import {InstanceWarningIcon} from '../nav/InstanceWarningIcon';
     6| import {WorkspaceStatus} from '../nav/WorkspaceStatus';
     7| import {TabLink} from '../ui/TabLink';
     8| import {InstancePageContext} from './InstancePageContext';
     9| import {useCanSeeConfig} from './useCanSeeConfig';
    10| interface Props<TData> {
    11|   refreshState?: QueryRefreshState;
    12|   queryData?: QueryResult<TData, any>;
    13|   tab: string;
    14| }
    15| export const InstanceTabs = <TData extends Record<string, any>>(props: Props<TData>) => {
    16|   const {refreshState, tab} = props;
    17|   const {healthTitle} = React.useContext(InstancePageContext);
    18|   const canSeeConfig = useCanSeeConfig();
    19|   return (
    20|     <Box flex={{direction: 'row', justifyContent: 'space-between', alignItems: 'flex-end'}}>
    21|       <Tabs selectedTabId={tab}>
    22|         <TabLink
    23|           id="locations"
    24|           title="Code locations"
    25|           to="/locations"
    26|           icon={<WorkspaceStatus placeholder={false} />}
    27|         />
    28|         <TabLink id="health" title={healthTitle} to="/health" icon={<InstanceWarningIcon />} />
    29|         {canSeeConfig ? (
    30|           <TabLink id="concurrency" title="Concurrency limits" to="/concurrency" />
    31|         ) : null}
    32|         {canSeeConfig ? <TabLink id="config" title="Configuration" to="/config" /> : null}
    33|       </Tabs>
    34|       {refreshState ? (
    35|         <Box padding={{bottom: 8}}>
    36|           <QueryRefreshCountdown refreshState={refreshState} />
    37|         </Box>
    38|       ) : null}
    39|     </Box>
    40|   );
    41| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instance/RepoFilterButton.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 13-42 ---
    13|         isOpen={open}
    14|         style={{width: 'auto'}}
    15|         onClose={() => setOpen(false)}
    16|       >
    17|         <DialogHeader icon="repo" label="Filter code locations" />
    18|         <RepoSelector
    19|           options={allRepos}
    20|           onBrowse={() => setOpen(false)}
    21|           onToggle={toggleVisible}
    22|           selected={visibleRepos}
    23|         />
    24|         <DialogFooter>
    25|           <Box padding={{top: 8}}>
    26|             <Button intent="none" onClick={() => setOpen(false)}>
    27|               Done
    28|             </Button>
    29|           </Box>
    30|         </DialogFooter>
    31|       </Dialog>
    32|       <Button
    33|         outlined
    34|         icon={<Icon name="folder" />}
    35|         rightIcon={<Icon name="expand_more" />}
    36|         onClick={() => setOpen(true)}
    37|       >
    38|         {`${visibleRepos.length} of ${allRepos.length}`}
    39|       </Button>
    40|     </>
    41|   );
    42| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instance/StepSummaryForRun.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-22 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {Caption, colorTextLight} from '@dagster-io/ui-components';
     3| import qs from 'qs';
     4| import * as React from 'react';
     5| import {Link} from 'react-router-dom';
     6| import {StepEventStatus} from '../graphql/types';
     7| import {failedStatuses, inProgressStatuses} from '../runs/RunStatuses';
     8| import {
     9|   StepSummaryForRunQuery,
    10|   StepSummaryForRunQueryVariables,
    11| } from './types/StepSummaryForRun.types';
    12| interface Props {
    13|   runId: string;
    14| }
    15| export const StepSummaryForRun = (props: Props) => {
    16|   const {runId} = props;
    17|   const {data} = useQuery<StepSummaryForRunQuery, StepSummaryForRunQueryVariables>(
    18|     STEP_SUMMARY_FOR_RUN_QUERY,
    19|     {
    20|       variables: {runId},
    21|     },
    22|   );

# --- HUNK 2: Lines 29-93 ---
    29|     const {status} = run;
    30|     if (failedStatuses.has(status)) {
    31|       return run.stepStats.filter((step) => step.status === StepEventStatus.FAILURE);
    32|     }
    33|     if (inProgressStatuses.has(status)) {
    34|       return run.stepStats.filter((step) => step.status === StepEventStatus.IN_PROGRESS);
    35|     }
    36|     return [];
    37|   }, [run]);
    38|   const stepCount = relevantSteps.length;
    39|   if (!stepCount || !status) {
    40|     return null;
    41|   }
    42|   if (failedStatuses.has(status)) {
    43|     if (stepCount === 1) {
    44|       const step = relevantSteps[0]!;
    45|       const query = step.endTime
    46|         ? qs.stringify({focusedTime: Math.floor(step.endTime * 1000)}, {addQueryPrefix: true})
    47|         : '';
    48|       return (
    49|         <Caption color={colorTextLight()}>
    50|           Failed at <Link to={`/runs/${runId}${query}`}>{step.stepKey}</Link>
    51|         </Caption>
    52|       );
    53|     }
    54|     return (
    55|       <Caption color={colorTextLight()}>
    56|         Failed at <Link to={`/runs/${runId}`}>{stepCount} steps</Link>
    57|       </Caption>
    58|     );
    59|   }
    60|   if (inProgressStatuses.has(status)) {
    61|     if (stepCount === 1) {
    62|       const step = relevantSteps[0]!;
    63|       const query = step.endTime
    64|         ? qs.stringify({focusedTime: Math.floor(step.endTime * 1000)}, {addQueryPrefix: true})
    65|         : '';
    66|       return (
    67|         <Caption color={colorTextLight()}>
    68|           In progress at <Link to={`/runs/${runId}${query}`}>{step.stepKey}</Link>
    69|         </Caption>
    70|       );
    71|     }
    72|     return (
    73|       <Caption color={colorTextLight()}>
    74|         In progress at <Link to={`/runs/${runId}`}>{stepCount} steps</Link>
    75|       </Caption>
    76|     );
    77|   }
    78|   return null;
    79| };
    80| const STEP_SUMMARY_FOR_RUN_QUERY = gql`
    81|   query StepSummaryForRunQuery($runId: ID!) {
    82|     pipelineRunOrError(runId: $runId) {
    83|       ... on Run {
    84|         id
    85|         status
    86|         stepStats {
    87|           endTime
    88|           stepKey
    89|           status
    90|         }
    91|       }
    92|     }
    93|   }


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instance/backfill/BackfillPage.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-36 ---
     1| import {gql, useApolloClient, useQuery} from '@apollo/client';
     2| import {
     3|   Box,
     4|   ButtonLink,
     5|   Heading,
     6|   NonIdealState,
     7|   Page,
     8|   PageHeader,
     9|   Spinner,
    10|   Table,
    11|   Tag,
    12|   colorAccentBlue,
    13|   colorAccentGreen,
    14|   colorAccentRed,
    15|   colorBackgroundLight,
    16|   colorTextLight,
    17| } from '@dagster-io/ui-components';
    18| import dayjs from 'dayjs';
    19| import duration from 'dayjs/plugin/duration';
    20| import relativeTime from 'dayjs/plugin/relativeTime';
    21| import React from 'react';
    22| import {Link, useHistory, useParams} from 'react-router-dom';
    23| import styled from 'styled-components';
    24| import {PYTHON_ERROR_FRAGMENT} from '../../app/PythonErrorFragment';
    25| import {PythonErrorInfo} from '../../app/PythonErrorInfo';
    26| import {QueryRefreshCountdown, useQueryRefreshAtInterval} from '../../app/QueryRefresh';
    27| import {useTrackPageView} from '../../app/analytics';
    28| import {Timestamp} from '../../app/time/Timestamp';
    29| import {tokenForAssetKey} from '../../asset-graph/Utils';
    30| import {asAssetKeyInput} from '../../assets/asInput';
    31| import {assetDetailsPathForKey} from '../../assets/assetDetailsPathForKey';
    32| import {AssetViewParams} from '../../assets/types';
    33| import {AssetKey, BulkActionStatus, RunStatus} from '../../graphql/types';
    34| import {useDocumentTitle} from '../../hooks/useDocumentTitle';
    35| import {RunFilterToken, runsPathWithFilters} from '../../runs/RunsFilterInput';
    36| import {testId} from '../../testing/testId';

# --- HUNK 2: Lines 274-314 ---
   274|                           '-'
   275|                         )}
   276|                       </td>
   277|                       <td>{completed ? <Tag intent="success">Completed</Tag> : '-'}</td>
   278|                       <td>{failed ? <Tag intent="danger">Failed</Tag> : '-'}</td>
   279|                     </>
   280|                   )}
   281|                 </tr>
   282|               );
   283|             })}
   284|           </tbody>
   285|         </Table>
   286|       </>
   287|     );
   288|   }
   289|   return (
   290|     <Page>
   291|       <PageHeader
   292|         title={
   293|           <Heading>
   294|             <Link to="/overview/backfills" style={{color: colorTextLight()}}>
   295|               Backfills
   296|             </Link>
   297|             {' / '}
   298|             {backfillId}
   299|           </Heading>
   300|         }
   301|         right={
   302|           <Box flex={{gap: 12, alignItems: 'center'}}>
   303|             {isInProgress ? <QueryRefreshCountdown refreshState={refreshState} /> : null}
   304|             {backfill ? (
   305|               <BackfillActionsMenu
   306|                 backfill={backfill}
   307|                 refetch={queryResult.refetch}
   308|                 canCancelRuns={backfill.status === BulkActionStatus.REQUESTED}
   309|               />
   310|             ) : null}
   311|           </Box>
   312|         }
   313|       />
   314|       {content()}

# --- HUNK 3: Lines 319-377 ---
   319|   <Box flex={{direction: 'column', gap: 4}} style={{minWidth: '280px'}}>
   320|     <Label>{label}</Label>
   321|     <div>{detail}</div>
   322|   </Box>
   323| );
   324| function StatusBar({
   325|   targeted,
   326|   inProgress,
   327|   completed,
   328|   failed,
   329| }: {
   330|   targeted: number;
   331|   inProgress: number;
   332|   completed: number;
   333|   failed: number;
   334| }) {
   335|   return (
   336|     <div
   337|       style={{
   338|         borderRadius: '8px',
   339|         backgroundColor: colorBackgroundLight(),
   340|         display: 'grid',
   341|         gridTemplateColumns: `${(100 * completed) / targeted}% ${(100 * failed) / targeted}% ${
   342|           (100 * inProgress) / targeted
   343|         }%`,
   344|         gridTemplateRows: '100%',
   345|         height: '12px',
   346|         width: '200px',
   347|         overflow: 'hidden',
   348|       }}
   349|     >
   350|       <div style={{background: colorAccentGreen()}} />
   351|       <div style={{background: colorAccentRed()}} />
   352|       <div style={{background: colorAccentBlue()}} />
   353|     </div>
   354|   );
   355| }
   356| const Label = styled.div`
   357|   color: ${colorTextLight()};
   358|   font-size: 12px;
   359|   line-height: 16px;
   360| `;
   361| const Duration = ({start, end}: {start: number; end?: number | null}) => {
   362|   const [_, rerender] = React.useReducer((s: number, _: any) => s + 1, 0);
   363|   React.useEffect(() => {
   364|     if (end) {
   365|       return;
   366|     }
   367|     const intervalId = setInterval(rerender, 60000);
   368|     return () => clearInterval(intervalId);
   369|   }, [start, end]);
   370|   const duration = end ? end - start : Date.now() - start;
   371|   return <span>{formatDuration(duration)}</span>;
   372| };
   373| export const BACKFILL_DETAILS_QUERY = gql`
   374|   query BackfillStatusesByAsset($backfillId: String!) {
   375|     partitionBackfillOrError(backfillId: $backfillId) {
   376|       ...PartitionBackfillFragment
   377|       ...PythonErrorFragment


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instance/backfill/BackfillRow.tsx
# Total hunks: 4
# ====================================================================
# --- HUNK 1: Lines 1-22 ---
     1| import {gql, QueryResult, useLazyQuery} from '@apollo/client';
     2| import {Box, colorTextLight, Icon, Mono, Tag} from '@dagster-io/ui-components';
     3| import countBy from 'lodash/countBy';
     4| import * as React from 'react';
     5| import {Link, useHistory} from 'react-router-dom';
     6| import styled from 'styled-components';
     7| import {showCustomAlert} from '../../app/CustomAlertProvider';
     8| import {PythonErrorInfo} from '../../app/PythonErrorInfo';
     9| import {FIFTEEN_SECONDS, useQueryRefreshAtInterval} from '../../app/QueryRefresh';
    10| import {isHiddenAssetGroupJob} from '../../asset-graph/Utils';
    11| import {BulkActionStatus, RunStatus} from '../../graphql/types';
    12| import {PartitionStatus, PartitionStatusHealthSourceOps} from '../../partitions/PartitionStatus';
    13| import {PipelineReference} from '../../pipelines/PipelineReference';
    14| import {AssetKeyTagCollection} from '../../runs/AssetTagCollections';
    15| import {CreatedByTagCell} from '../../runs/CreatedByTag';
    16| import {inProgressStatuses} from '../../runs/RunStatuses';
    17| import {RunStatusTagsWithCounts} from '../../runs/RunTimeline';
    18| import {runsPathWithFilters} from '../../runs/RunsFilterInput';
    19| import {TimestampDisplay} from '../../schedules/TimestampDisplay';
    20| import {useDelayedRowQuery} from '../../workspace/VirtualizedWorkspaceTable';
    21| import {isThisThingAJob, useRepository} from '../../workspace/WorkspaceContext';
    22| import {buildRepoAddress} from '../../workspace/buildRepoAddress';

# --- HUNK 2: Lines 101-155 ---
   101|   return props.children({counts, statuses, statusQueryResult});
   102| };
   103| export const BackfillRowContent = ({
   104|   backfill,
   105|   allPartitions,
   106|   showBackfillTarget,
   107|   onShowPartitionsRequested,
   108|   refetch,
   109|   counts,
   110|   statuses,
   111|   statusQueryResult,
   112| }: BackfillRowProps & LoadResult) => {
   113|   const repoAddress = backfill.partitionSet
   114|     ? buildRepoAddress(
   115|         backfill.partitionSet.repositoryOrigin.repositoryName,
   116|         backfill.partitionSet.repositoryOrigin.repositoryLocationName,
   117|       )
   118|     : null;
   119|   const renderBackfillStatus = () =>
   120|     statusQueryResult?.loading ? (
   121|       <div style={{color: colorTextLight()}}>Loading</div>
   122|     ) : (
   123|       <BackfillStatusTag backfill={backfill} counts={counts} />
   124|     );
   125|   const renderRunStatus = () => {
   126|     if (!backfill.isValidSerialization) {
   127|       return <p>A partitions definition has changed since this backfill ran.</p>;
   128|     }
   129|     if (statusQueryResult?.loading) {
   130|       return <div style={{color: colorTextLight()}}>Loading</div>;
   131|     }
   132|     return counts ? (
   133|       <BackfillRunStatus backfill={backfill} counts={counts} statuses={statuses} />
   134|     ) : (
   135|       <div style={{color: colorTextLight()}}>{'\u2013'}</div>
   136|     );
   137|   };
   138|   return (
   139|     <tr>
   140|       <td style={{width: 120}}>
   141|         <Mono style={{fontSize: '16px', lineHeight: '18px'}}>
   142|           <Link
   143|             to={
   144|               backfill.isAssetBackfill
   145|                 ? `/overview/backfills/${backfill.id}`
   146|                 : runsPathWithFilters([
   147|                     {
   148|                       token: 'tag',
   149|                       value: `dagster/backfill=${backfill.id}`,
   150|                     },
   151|                   ])
   152|             }
   153|           >
   154|             {backfill.id}
   155|           </Link>

# --- HUNK 3: Lines 251-291 ---
   251|           to={workspacePipelinePath({
   252|             repoName: partitionSet.repositoryOrigin.repositoryName,
   253|             repoLocation: partitionSet.repositoryOrigin.repositoryLocationName,
   254|             pipelineName: partitionSet.pipelineName,
   255|             isJob: isThisThingAJob(repo, partitionSet.pipelineName),
   256|             path: `/partitions?partitionSet=${encodeURIComponent(partitionSet.name)}`,
   257|           })}
   258|         >
   259|           {partitionSet.name}
   260|         </Link>
   261|       );
   262|     }
   263|     if (partitionSetName) {
   264|       return <span style={{fontWeight: 500}}>{partitionSetName}</span>;
   265|     }
   266|     return null;
   267|   };
   268|   const buildRepoLink = () =>
   269|     repoAddress ? (
   270|       <Box flex={{direction: 'row', gap: 8, alignItems: 'center'}} style={{fontSize: '12px'}}>
   271|         <Icon name="repo" color={colorTextLight()} />
   272|         <Link to={workspacePathFromAddress(repoAddress)}>
   273|           {repoAddressAsHumanString(repoAddress)}
   274|         </Link>
   275|       </Box>
   276|     ) : undefined;
   277|   const buildPipelineOrAssets = () => {
   278|     if (assetSelection?.length) {
   279|       return <AssetKeyTagCollection assetKeys={assetSelection} dialogTitle="Assets in backfill" />;
   280|     }
   281|     if (partitionSet && repo) {
   282|       return (
   283|         <PipelineReference
   284|           showIcon
   285|           size="small"
   286|           pipelineName={partitionSet.pipelineName}
   287|           pipelineHrefContext={{
   288|             name: partitionSet.repositoryOrigin.repositoryName,
   289|             location: partitionSet.repositoryOrigin.repositoryLocationName,
   290|           }}
   291|           isJob={isThisThingAJob(repo, partitionSet.pipelineName)}

# --- HUNK 4: Lines 363-403 ---
   363|     case BulkActionStatus.REQUESTED:
   364|       return <Tag>In progress</Tag>;
   365|     case BulkActionStatus.FAILED:
   366|       return (
   367|         <Box margin={{bottom: 12}}>
   368|           <TagButton
   369|             onClick={() =>
   370|               backfill.error &&
   371|               showCustomAlert({title: 'Error', body: <PythonErrorInfo error={backfill.error} />})
   372|             }
   373|           >
   374|             <Tag intent="danger">Failed</Tag>
   375|           </TagButton>
   376|         </Box>
   377|       );
   378|     case BulkActionStatus.COMPLETED:
   379|       if (backfill.partitionNames === null) {
   380|         return <Tag intent="success">Completed</Tag>;
   381|       }
   382|       if (!counts) {
   383|         return <div style={{color: colorTextLight()}}>None</div>;
   384|       }
   385|       if (counts[RunStatus.SUCCESS] === backfill.partitionNames.length) {
   386|         return <Tag intent="success">Completed</Tag>;
   387|       }
   388|       if (Array.from(inProgressStatuses).some((status) => counts[status])) {
   389|         return <Tag intent="primary">In progress</Tag>;
   390|       }
   391|       return <Tag intent="warning">Incomplete</Tag>;
   392|     case BulkActionStatus.CANCELING:
   393|       return <Tag>Canceling</Tag>;
   394|     case BulkActionStatus.CANCELED:
   395|       return <Tag>Canceled</Tag>;
   396|   }
   397|   return <span />;
   398| };
   399| const TagButton = styled.button`
   400|   border: none;
   401|   background: none;
   402|   cursor: pointer;
   403|   padding: 0;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instance/backfill/TargetPartitionsDisplay.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-33 ---
     1| import {Box, Button, ButtonLink, Dialog, DialogFooter, Tag} from '@dagster-io/ui-components';
     2| import React from 'react';
     3| import {AssetBackfillTargetPartitions} from '../../graphql/types';
     4| import {TruncatedTextWithFullTextOnHover} from '../../nav/getLeftNavItemsForOption';
     5| import {VirtualizedItemListForDialog} from '../../ui/VirtualizedItemListForDialog';
     6| import {numberFormatter} from '../../ui/formatters';
     7| const COLLATOR = new Intl.Collator(navigator.language, {sensitivity: 'base', numeric: true});
     8| export const TargetPartitionsDisplay = ({
     9|   targetPartitionCount,
    10|   targetPartitions,
    11| }: {
    12|   targetPartitionCount?: number;
    13|   targetPartitions?: Pick<AssetBackfillTargetPartitions, 'partitionKeys' | 'ranges'> | null;
    14| }) => {
    15|   const [isDialogOpen, setIsDialogOpen] = React.useState(false);
    16|   const {partitionKeys, ranges} = targetPartitions || {};
    17|   if (partitionKeys) {
    18|     if (partitionKeys.length <= 3) {
    19|       return (
    20|         <Box flex={{direction: 'row', gap: 8, wrap: 'wrap'}}>
    21|           {partitionKeys.map((p) => (
    22|             <Tag key={p}>{p}</Tag>
    23|           ))}
    24|         </Box>
    25|       );
    26|     }
    27|     return (
    28|       <>
    29|         <ButtonLink onClick={() => setIsDialogOpen(true)}>
    30|           {numberFormatter.format(partitionKeys.length)} partitions
    31|         </ButtonLink>
    32|         <Dialog
    33|           isOpen={isDialogOpen}

# --- HUNK 2: Lines 69-97 ---
    69|           isOpen={isDialogOpen}
    70|           title={`Partition selection (${ranges?.length})`}
    71|           onClose={() => setIsDialogOpen(false)}
    72|         >
    73|           <div style={{height: '340px', overflow: 'hidden'}}>
    74|             <VirtualizedItemListForDialog
    75|               items={ranges || []}
    76|               renderItem={({start, end}) => {
    77|                 return <div key={`${start}:${end}`}>{`${start}...${end}`}</div>;
    78|               }}
    79|             />
    80|           </div>
    81|           <DialogFooter topBorder>
    82|             <Button onClick={() => setIsDialogOpen(false)}>Close</Button>
    83|           </DialogFooter>
    84|         </Dialog>
    85|       </>
    86|     );
    87|   }
    88|   return (
    89|     <div>
    90|       {targetPartitionCount === 0
    91|         ? '-'
    92|         : targetPartitionCount === 1
    93|         ? '1 partition'
    94|         : `${targetPartitionCount} partitions`}
    95|     </div>
    96|   );
    97| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instance/backfill/types/BackfillPage.types.ts
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 17-57 ---
    17|         hasResumePermission: boolean;
    18|         isAssetBackfill: boolean;
    19|         numCancelable: number;
    20|         partitionNames: Array<string> | null;
    21|         error: {
    22|           __typename: 'PythonError';
    23|           message: string;
    24|           stack: Array<string>;
    25|           errorChain: Array<{
    26|             __typename: 'ErrorChainLink';
    27|             isExplicitLink: boolean;
    28|             error: {__typename: 'PythonError'; message: string; stack: Array<string>};
    29|           }>;
    30|         } | null;
    31|         assetBackfillData: {
    32|           __typename: 'AssetBackfillData';
    33|           rootTargetedPartitions: {
    34|             __typename: 'AssetBackfillTargetPartitions';
    35|             partitionKeys: Array<string> | null;
    36|             ranges: Array<{__typename: 'PartitionKeyRange'; start: string; end: string}> | null;
    37|           } | null;
    38|           assetBackfillStatuses: Array<
    39|             | {
    40|                 __typename: 'AssetPartitionsStatusCounts';
    41|                 numPartitionsTargeted: number;
    42|                 numPartitionsInProgress: number;
    43|                 numPartitionsMaterialized: number;
    44|                 numPartitionsFailed: number;
    45|                 assetKey: {__typename: 'AssetKey'; path: Array<string>};
    46|               }
    47|             | {
    48|                 __typename: 'UnpartitionedAssetStatus';
    49|                 inProgress: boolean;
    50|                 materialized: boolean;
    51|                 failed: boolean;
    52|                 assetKey: {__typename: 'AssetKey'; path: Array<string>};
    53|               }
    54|           >;
    55|         } | null;
    56|         partitionSet: {
    57|           __typename: 'PartitionSet';

# --- HUNK 2: Lines 86-126 ---
    86|   hasResumePermission: boolean;
    87|   isAssetBackfill: boolean;
    88|   numCancelable: number;
    89|   partitionNames: Array<string> | null;
    90|   error: {
    91|     __typename: 'PythonError';
    92|     message: string;
    93|     stack: Array<string>;
    94|     errorChain: Array<{
    95|       __typename: 'ErrorChainLink';
    96|       isExplicitLink: boolean;
    97|       error: {__typename: 'PythonError'; message: string; stack: Array<string>};
    98|     }>;
    99|   } | null;
   100|   assetBackfillData: {
   101|     __typename: 'AssetBackfillData';
   102|     rootTargetedPartitions: {
   103|       __typename: 'AssetBackfillTargetPartitions';
   104|       partitionKeys: Array<string> | null;
   105|       ranges: Array<{__typename: 'PartitionKeyRange'; start: string; end: string}> | null;
   106|     } | null;
   107|     assetBackfillStatuses: Array<
   108|       | {
   109|           __typename: 'AssetPartitionsStatusCounts';
   110|           numPartitionsTargeted: number;
   111|           numPartitionsInProgress: number;
   112|           numPartitionsMaterialized: number;
   113|           numPartitionsFailed: number;
   114|           assetKey: {__typename: 'AssetKey'; path: Array<string>};
   115|         }
   116|       | {
   117|           __typename: 'UnpartitionedAssetStatus';
   118|           inProgress: boolean;
   119|           materialized: boolean;
   120|           failed: boolean;
   121|           assetKey: {__typename: 'AssetKey'; path: Array<string>};
   122|         }
   123|     >;
   124|   } | null;
   125|   partitionSet: {
   126|     __typename: 'PartitionSet';


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instigation/InstigationTick.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-31 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {
     3|   Box,
     4|   Group,
     5|   Icon,
     6|   NonIdealState,
     7|   Spinner,
     8|   Body,
     9|   Tooltip,
    10|   colorTextLighter,
    11|   colorTextLight,
    12| } from '@dagster-io/ui-components';
    13| import * as React from 'react';
    14| import {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';
    15| import {RunTable, RUN_TABLE_RUN_FRAGMENT} from '../runs/RunTable';
    16| import {LaunchedRunListQuery, LaunchedRunListQueryVariables} from './types/InstigationTick.types';
    17| export const RunList = ({runIds}: {runIds: string[]}) => {
    18|   const {data, loading} = useQuery<LaunchedRunListQuery, LaunchedRunListQueryVariables>(
    19|     LAUNCHED_RUN_LIST_QUERY,
    20|     {
    21|       variables: {
    22|         filter: {
    23|           runIds,
    24|         },
    25|       },
    26|     },
    27|   );
    28|   if (loading || !data) {
    29|     return (
    30|       <Box padding={32}>
    31|         <Spinner purpose="section" />

# --- HUNK 2: Lines 38-91 ---
    38|         <NonIdealState
    39|           icon="error"
    40|           title="An error occurred"
    41|           description={data.pipelineRunsOrError.message}
    42|         />
    43|       </Box>
    44|     );
    45|   }
    46|   return (
    47|     <Box padding={{bottom: 8}}>
    48|       <RunTable runs={data.pipelineRunsOrError.results} />
    49|     </Box>
    50|   );
    51| };
    52| export const FailedRunList = ({originRunIds}: {originRunIds?: string[]}) => {
    53|   if (!originRunIds || !originRunIds.length) {
    54|     return null;
    55|   }
    56|   return (
    57|     <Group direction="column" spacing={16}>
    58|       <Box padding={12} border={{side: 'bottom', color: colorTextLighter()}}>
    59|         <Body>
    60|           Failed Runs
    61|           <Tooltip content="Failed runs this tick reacted on and reported back to.">
    62|             <Icon name="info" color={colorTextLight()} />
    63|           </Tooltip>
    64|         </Body>
    65|         <RunList runIds={originRunIds} />
    66|       </Box>
    67|       <Box padding={12} margin={{bottom: 8}}>
    68|         <Body>
    69|           Requested Runs
    70|           <Tooltip content="Runs launched by the run requests in this tick.">
    71|             <Icon name="info" color={colorTextLight()} />
    72|           </Tooltip>
    73|         </Body>
    74|         <NonIdealState
    75|           icon="sensors"
    76|           title="No runs to display"
    77|           description="This sensor does not target a pipeline or job."
    78|         />
    79|       </Box>
    80|     </Group>
    81|   );
    82| };
    83| export const TICK_TAG_FRAGMENT = gql`
    84|   fragment TickTagFragment on InstigationTick {
    85|     id
    86|     status
    87|     timestamp
    88|     skipReason
    89|     runIds
    90|     runKeys
    91|     error {


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instigation/InstigationUtils.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-39 ---
     1| import {gql} from '@apollo/client';
     2| import {Group, Mono, colorTextLight} from '@dagster-io/ui-components';
     3| import * as React from 'react';
     4| import {Link} from 'react-router-dom';
     5| import styled from 'styled-components';
     6| import {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';
     7| import {LastRunSummary} from '../instance/LastRunSummary';
     8| import {RunStatusIndicator} from '../runs/RunStatusDots';
     9| import {RUN_TIME_FRAGMENT, titleForRun} from '../runs/RunUtils';
    10| import {TICK_TAG_FRAGMENT} from './InstigationTick';
    11| import {InstigationStateFragment, RunStatusFragment} from './types/InstigationUtils.types';
    12| export const InstigatedRunStatus = ({
    13|   instigationState,
    14| }: {
    15|   instigationState: InstigationStateFragment;
    16| }) => {
    17|   const [instigationRun] = instigationState.runs;
    18|   if (!instigationRun) {
    19|     return <span style={{color: colorTextLight()}}>None</span>;
    20|   }
    21|   return <LastRunSummary run={instigationRun} name={instigationState.name} />;
    22| };
    23| export const RunStatusLink = ({run}: {run: RunStatusFragment}) => (
    24|   <Group direction="row" spacing={4} alignItems="center">
    25|     <RunStatusIndicator status={run.status} />
    26|     <Link to={`/runs/${run.id}`} target="_blank" rel="noreferrer">
    27|       <Mono>{titleForRun({id: run.id})}</Mono>
    28|     </Link>
    29|   </Group>
    30| );
    31| export const RUN_STATUS_FRAGMENT = gql`
    32|   fragment RunStatusFragment on Run {
    33|     id
    34|     status
    35|   }
    36| `;
    37| export const INSTIGATION_STATE_FRAGMENT = gql`
    38|   fragment InstigationStateFragment on InstigationState {
    39|     id

# --- HUNK 2: Lines 66-120 ---
    66|       ...TickTagFragment
    67|     }
    68|     runningCount
    69|   }
    70|   ${RUN_STATUS_FRAGMENT}
    71|   ${RUN_TIME_FRAGMENT}
    72|   ${TICK_TAG_FRAGMENT}
    73| `;
    74| export const StatusTable = styled.table`
    75|   font-size: 13px;
    76|   border-spacing: 0;
    77|   &&&&& tr {
    78|     box-shadow: none;
    79|   }
    80|   &&&&& tbody > tr > td {
    81|     background: transparent;
    82|     box-shadow: none !important;
    83|     padding: 1px 0;
    84|   }
    85|   &&&&& tbody > tr > td:first-child {
    86|     color: ${colorTextLight()};
    87|   }
    88| `;
    89| export const DYNAMIC_PARTITIONS_REQUEST_RESULT_FRAGMENT = gql`
    90|   fragment DynamicPartitionsRequestResultFragment on DynamicPartitionsRequestResult {
    91|     partitionsDefName
    92|     partitionKeys
    93|     skippedPartitionKeys
    94|     type
    95|   }
    96| `;
    97| export const HISTORY_TICK_FRAGMENT = gql`
    98|   fragment HistoryTick on InstigationTick {
    99|     id
   100|     tickId
   101|     status
   102|     timestamp
   103|     endTimestamp
   104|     cursor
   105|     instigationType
   106|     skipReason
   107|     runIds
   108|     runs {
   109|       id
   110|       status
   111|       ...RunStatusFragment
   112|     }
   113|     originRunIds
   114|     error {
   115|       ...PythonErrorFragment
   116|     }
   117|     logKey
   118|     ...TickTagFragment
   119|     dynamicPartitionsRequestResults {
   120|       ...DynamicPartitionsRequestResultFragment


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instigation/LiveTickTimeline2.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-62 ---
     1| import {
     2|   Caption,
     3|   Tooltip,
     4|   colorAccentCyan,
     5|   colorAccentCyanHover,
     6|   colorAccentGray,
     7|   colorAccentGrayHover,
     8|   colorAccentGreen,
     9|   colorAccentGreenHover,
    10|   colorAccentPrimary,
    11|   colorAccentRed,
    12|   colorAccentRedHover,
    13|   colorAccentReversed,
    14|   colorBackgroundDefault,
    15|   colorKeylineDefault,
    16|   colorTextLight,
    17|   ifPlural,
    18|   useViewport,
    19| } from '@dagster-io/ui-components';
    20| import dayjs from 'dayjs';
    21| import relativeTime from 'dayjs/plugin/relativeTime';
    22| import memoize from 'lodash/memoize';
    23| import * as React from 'react';
    24| import styled from 'styled-components';
    25| import {TimeContext} from '../app/time/TimeContext';
    26| import {browserTimezone} from '../app/time/browserTimezone';
    27| import {AssetDaemonTickFragment} from '../assets/auto-materialization/types/AssetDaemonTicksQuery.types';
    28| import {InstigationTickStatus} from '../graphql/types';
    29| import {HistoryTickFragment} from './types/InstigationUtils.types';
    30| import {isOldTickWithoutEndtimestamp} from './util';
    31| dayjs.extend(relativeTime);
    32| const COLOR_MAP = {
    33|   [InstigationTickStatus.SUCCESS]: colorAccentGreen(),
    34|   [InstigationTickStatus.FAILURE]: colorAccentRed(),
    35|   [InstigationTickStatus.STARTED]: colorAccentCyan(),
    36|   [InstigationTickStatus.SKIPPED]: colorAccentGray(),
    37| };
    38| const HoverColorMap = {
    39|   [InstigationTickStatus.SUCCESS]: colorAccentGreenHover(),
    40|   [InstigationTickStatus.FAILURE]: colorAccentRedHover(),
    41|   [InstigationTickStatus.STARTED]: colorAccentCyanHover(),
    42|   [InstigationTickStatus.SKIPPED]: colorAccentGrayHover(),
    43| };
    44| const REFRESH_INTERVAL = 100;
    45| const MIN_WIDTH = 8; // At least 8px wide
    46| const MINUTE = 60000;
    47| const timestampFormat = memoize((timezone: string) => {
    48|   return new Intl.DateTimeFormat(navigator.language, {
    49|     hour: '2-digit',
    50|     minute: '2-digit',
    51|     second: '2-digit',
    52|     hourCycle: 'h23',
    53|     timeZone: timezone === 'Automatic' ? browserTimezone() : timezone,
    54|     timeZoneName: 'short',
    55|   });
    56| });
    57| export const LiveTickTimeline = <T extends HistoryTickFragment | AssetDaemonTickFragment>({
    58|   ticks,
    59|   onHoverTick,
    60|   onSelectTick,
    61|   exactRange,
    62|   timeRange = MINUTE * 5, // 5 minutes,

# --- HUNK 2: Lines 196-288 ---
   196|     const isAssetDaemonTick = 'requestedAssetMaterializationCount' in tick;
   197|     if (isAssetDaemonTick) {
   198|       return `${tick.requestedAssetMaterializationCount} materialization${ifPlural(
   199|         tick.requestedAssetMaterializationCount,
   200|         '',
   201|         's',
   202|       )} requested`;
   203|     } else {
   204|       return `${tick.runs?.length || 0} run${ifPlural(tick.runs?.length, '', 's')} requested`;
   205|     }
   206|   }, [tick]);
   207|   const startTime = dayjs(1000 * tick.timestamp!);
   208|   const endTime = dayjs(tick.endTimestamp ? 1000 * tick.endTimestamp : Date.now());
   209|   const elapsedTime = startTime.to(endTime, true);
   210|   return (
   211|     <div>
   212|       <Caption as="div">
   213|         {status} ({elapsedTime})
   214|       </Caption>
   215|       {tick.status === InstigationTickStatus.STARTED ? null : (
   216|         <Caption color={colorTextLight()}>Click for details</Caption>
   217|       )}
   218|     </div>
   219|   );
   220| });
   221| const TicksWrapper = styled.div`
   222|   position: relative;
   223|   height: 100px;
   224|   padding: 10px 2px;
   225|   border-bottom: 1px solid ${colorKeylineDefault()};
   226| `;
   227| const TimeAxisWrapper = styled.div`
   228|   height: 24px;
   229| `;
   230| const Tick = styled.div<{status: InstigationTickStatus}>`
   231|   cursor: pointer;
   232|   position: absolute;
   233|   top: 10px;
   234|   height: 80px;
   235|   will-change: transform, width;
   236|   border-radius: 2px;
   237|   div {
   238|     place-content: center;
   239|     display: grid;
   240|   }
   241|   color: ${colorBackgroundDefault()};
   242|   ${({status}) => `
   243|     background: ${COLOR_MAP[status]};
   244|     &:hover {
   245|       background: ${HoverColorMap[status]};
   246|     }
   247|   `}
   248| `;
   249| const GridTick = styled.div`
   250|   position: absolute;
   251|   top: 0;
   252|   height: 124px;
   253|   will-change: transform;
   254| `;
   255| const GridTickLine = styled.div`
   256|   position: absolute;
   257|   top: 0;
   258|   height: 108px;
   259|   width: 1px;
   260|   background: ${colorKeylineDefault()};
   261| `;
   262| const GridTickTime = styled.div`
   263|   height: 16px;
   264|   position: absolute;
   265|   bottom: 0;
   266|   width: 100px;
   267|   margin-left: -24px;
   268| `;
   269| const NowIndicator = styled.div`
   270|   position: absolute;
   271|   top: 0;
   272|   height: 126px;
   273|   width: 2px;
   274|   background: ${colorAccentPrimary()};
   275|   &:after {
   276|     content: 'Now';
   277|     position: absolute;
   278|     left: 0;
   279|     background: ${colorAccentPrimary()};
   280|     color: ${colorAccentReversed()};
   281|     bottom: 0;
   282|     font-size: 12px;
   283|     padding: 3px 4px;
   284|   }
   285| `;
   286| function getX(timestamp: number, viewportWidth: number, minX: number, timeRange: number) {
   287|   return (viewportWidth * (timestamp - minX)) / timeRange;
   288| }


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instigation/TickDetailsDialog.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 14-75 ---
    14|   MiddleTruncate,
    15| } from '@dagster-io/ui-components';
    16| import * as React from 'react';
    17| import {showCustomAlert} from '../app/CustomAlertProvider';
    18| import {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';
    19| import {PythonErrorInfo} from '../app/PythonErrorInfo';
    20| import {formatElapsedTime} from '../app/Util';
    21| import {Timestamp} from '../app/time/Timestamp';
    22| import {AssetDaemonTickFragment} from '../assets/auto-materialization/types/AssetDaemonTicksQuery.types';
    23| import {
    24|   DynamicPartitionsRequestResult,
    25|   DynamicPartitionsRequestType,
    26|   InstigationSelector,
    27|   InstigationTickStatus,
    28| } from '../graphql/types';
    29| import {TimestampDisplay} from '../schedules/TimestampDisplay';
    30| import {FailedRunList, RunList} from './InstigationTick';
    31| import {HISTORY_TICK_FRAGMENT} from './InstigationUtils';
    32| import {HistoryTickFragment} from './types/InstigationUtils.types';
    33| import {SelectedTickQuery, SelectedTickQueryVariables} from './types/TickDetailsDialog.types';
    34| interface DialogProps extends InnerProps {
    35|   onClose: () => void;
    36|   isOpen: boolean;
    37| }
    38| export const TickDetailsDialog = ({tickId, isOpen, instigationSelector, onClose}: DialogProps) => {
    39|   return (
    40|     <Dialog isOpen={isOpen} onClose={onClose} style={{width: '90vw'}}>
    41|       <TickDetailsDialogImpl tickId={tickId} instigationSelector={instigationSelector} />
    42|       <DialogFooter>
    43|         <Button onClick={onClose}>Close</Button>
    44|       </DialogFooter>
    45|     </Dialog>
    46|   );
    47| };
    48| interface InnerProps {
    49|   tickId: number | undefined;
    50|   instigationSelector: InstigationSelector;
    51| }
    52| const TickDetailsDialogImpl = ({tickId, instigationSelector}: InnerProps) => {
    53|   const {data} = useQuery<SelectedTickQuery, SelectedTickQueryVariables>(JOB_SELECTED_TICK_QUERY, {
    54|     variables: {instigationSelector, tickId: tickId || 0},
    55|     skip: !tickId,
    56|   });
    57|   const tick =
    58|     data?.instigationStateOrError.__typename === 'InstigationState'
    59|       ? data?.instigationStateOrError.tick
    60|       : undefined;
    61|   const [addedPartitions, deletedPartitions] = React.useMemo(() => {
    62|     const added = tick?.dynamicPartitionsRequestResults.filter(
    63|       (request) =>
    64|         request.type === DynamicPartitionsRequestType.ADD_PARTITIONS &&
    65|         request.partitionKeys?.length,
    66|     );
    67|     const deleted = tick?.dynamicPartitionsRequestResults.filter(
    68|       (request) =>
    69|         request.type === DynamicPartitionsRequestType.DELETE_PARTITIONS &&
    70|         request.partitionKeys?.length,
    71|     );
    72|     return [added, deleted];
    73|   }, [tick?.dynamicPartitionsRequestResults]);
    74|   if (!tick) {
    75|     return (

# --- HUNK 2: Lines 165-233 ---
   165|                 View error
   166|               </ButtonLink>
   167|             ) : null}
   168|           </Box>
   169|         </Box>
   170|         <Box flex={{direction: 'column', gap: 4}}>
   171|           <Subtitle2>Timestamp</Subtitle2>
   172|           <div>
   173|             {tick ? (
   174|               <Timestamp timestamp={{unix: tick.timestamp}} timeFormat={{showTimezone: true}} />
   175|             ) : (
   176|               ''
   177|             )}
   178|           </div>
   179|         </Box>
   180|         <Box flex={{direction: 'column', gap: 4}}>
   181|           <Subtitle2>Duration</Subtitle2>
   182|           <div>
   183|             {tick?.endTimestamp
   184|               ? formatElapsedTime(tick.endTimestamp * 1000 - tick.timestamp * 1000)
   185|               : '\u2013'}
   186|           </div>
   187|         </Box>
   188|       </div>
   189|     </>
   190|   );
   191| }
   192| function PartitionsTable({partitions}: {partitions: DynamicPartitionsRequestResult[]}) {
   193|   return (
   194|     <Table>
   195|       <thead>
   196|         <tr>
   197|           <th>Partition definition</th>
   198|           <th>Partition</th>
   199|         </tr>
   200|       </thead>
   201|       <tbody>
   202|         {partitions.flatMap(
   203|           (partition) =>
   204|             partition.partitionKeys?.map((key) => (
   205|               <tr key={key}>
   206|                 <td>
   207|                   <MiddleTruncate text={partition.partitionsDefName} />
   208|                 </td>
   209|                 <td>
   210|                   <MiddleTruncate text={key} />
   211|                 </td>
   212|               </tr>
   213|             )),
   214|         )}
   215|       </tbody>
   216|     </Table>
   217|   );
   218| }
   219| const JOB_SELECTED_TICK_QUERY = gql`
   220|   query SelectedTickQuery($instigationSelector: InstigationSelector!, $tickId: Int!) {
   221|     instigationStateOrError(instigationSelector: $instigationSelector) {
   222|       ... on InstigationState {
   223|         id
   224|         tick(tickId: $tickId) {
   225|           id
   226|           ...HistoryTick
   227|         }
   228|       }
   229|     }
   230|   }
   231|   ${PYTHON_ERROR_FRAGMENT}
   232|   ${HISTORY_TICK_FRAGMENT}
   233| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instigation/TickHistory.tsx
# Total hunks: 5
# ====================================================================
# --- HUNK 1: Lines 1-39 ---
     1| import 'chartjs-adapter-date-fns';
     2| import {gql, useQuery} from '@apollo/client';
     3| import {
     4|   Box,
     5|   Checkbox,
     6|   CursorHistoryControls,
     7|   NonIdealState,
     8|   Spinner,
     9|   Table,
    10|   Subheading,
    11|   FontFamily,
    12|   Icon,
    13|   IconWrapper,
    14|   ButtonLink,
    15|   ifPlural,
    16|   Caption,
    17|   colorLinkDefault,
    18|   colorAccentGray,
    19|   colorAccentGrayHover,
    20| } from '@dagster-io/ui-components';
    21| import {Chart} from 'chart.js';
    22| import zoomPlugin from 'chartjs-plugin-zoom';
    23| import * as React from 'react';
    24| import styled from 'styled-components';
    25| import {showSharedToaster} from '../app/DomUtils';
    26| import {useFeatureFlags} from '../app/Flags';
    27| import {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';
    28| import {PythonErrorInfo} from '../app/PythonErrorInfo';
    29| import {FIFTEEN_SECONDS, useQueryRefreshAtInterval} from '../app/QueryRefresh';
    30| import {useCopyToClipboard} from '../app/browser';
    31| import {
    32|   DynamicPartitionsRequestType,
    33|   InstigationSelector,
    34|   InstigationTickStatus,
    35|   InstigationType,
    36| } from '../graphql/types';
    37| import {useQueryPersistedState} from '../hooks/useQueryPersistedState';
    38| import {TimeElapsed} from '../runs/TimeElapsed';
    39| import {useCursorPaginatedQuery} from '../runs/useCursorPaginatedQuery';

# --- HUNK 2: Lines 252-294 ---
   252|         </div>
   253|       ) : null}
   254|     </>
   255|   );
   256| };
   257| export const TickHistoryTimeline = ({
   258|   name,
   259|   repoAddress,
   260|   onHighlightRunIds,
   261|   beforeTimestamp,
   262|   afterTimestamp,
   263|   statuses,
   264| }: {
   265|   name: string;
   266|   repoAddress: RepoAddress;
   267|   onHighlightRunIds?: (runIds: string[]) => void;
   268|   beforeTimestamp?: number;
   269|   afterTimestamp?: number;
   270|   statuses?: InstigationTickStatus[];
   271| }) => {
   272|   const [selectedTickId, setSelectedTickId] = useQueryPersistedState<number | undefined>({
   273|     encode: (tickId) => ({tickId}),
   274|     decode: (qs) => (qs['tickId'] ? Number(qs['tickId']) : undefined),
   275|   });
   276|   const [pollingPaused, pausePolling] = React.useState<boolean>(false);
   277|   const instigationSelector = {...repoAddressToSelector(repoAddress), name};
   278|   const queryResult = useQuery<TickHistoryQuery, TickHistoryQueryVariables>(
   279|     JOB_TICK_HISTORY_QUERY,
   280|     {
   281|       variables: {
   282|         instigationSelector,
   283|         beforeTimestamp,
   284|         afterTimestamp,
   285|         statuses,
   286|         limit: beforeTimestamp ? undefined : 15,
   287|       },
   288|       notifyOnNetworkStatusChange: true,
   289|     },
   290|   );
   291|   useQueryRefreshAtInterval(
   292|     queryResult,
   293|     1000,
   294|     !(pollingPaused || (beforeTimestamp && afterTimestamp)),

# --- HUNK 3: Lines 297-352 ---
   297|   if (!data || error) {
   298|     return (
   299|       <>
   300|         <Box padding={{top: 16, horizontal: 24}} border="bottom">
   301|           <Subheading>Recent ticks</Subheading>
   302|         </Box>
   303|         <Box padding={{vertical: 64}}>
   304|           <Spinner purpose="section" />
   305|         </Box>
   306|       </>
   307|     );
   308|   }
   309|   if (data.instigationStateOrError.__typename === 'PythonError') {
   310|     return <PythonErrorInfo error={data.instigationStateOrError} />;
   311|   }
   312|   if (data.instigationStateOrError.__typename === 'InstigationStateNotFoundError') {
   313|     return null;
   314|   }
   315|   const {ticks = []} = data.instigationStateOrError;
   316|   const onTickClick = (tick?: InstigationTick) => {
   317|     setSelectedTickId(tick ? Number(tick.id) : undefined);
   318|   };
   319|   const onTickHover = (tick?: InstigationTick) => {
   320|     if (!tick) {
   321|       pausePolling(false);
   322|     }
   323|     if (tick?.runIds) {
   324|       onHighlightRunIds && onHighlightRunIds(tick.runIds);
   325|       pausePolling(true);
   326|     }
   327|   };
   328|   return (
   329|     <>
   330|       <TickDetailsDialog
   331|         isOpen={!!selectedTickId}
   332|         tickId={selectedTickId}
   333|         instigationSelector={instigationSelector}
   334|         onClose={() => onTickClick(undefined)}
   335|       />
   336|       <Box padding={{vertical: 16, horizontal: 24}}>
   337|         <Subheading>Recent ticks</Subheading>
   338|       </Box>
   339|       <Box border="top">
   340|         <LiveTickTimeline
   341|           ticks={ticks}
   342|           onHoverTick={onTickHover}
   343|           onSelectTick={onTickClick}
   344|           exactRange={
   345|             beforeTimestamp && afterTimestamp ? [afterTimestamp, beforeTimestamp] : undefined
   346|           }
   347|         />
   348|       </Box>
   349|     </>
   350|   );
   351| };
   352| function TickRow({

# --- HUNK 4: Lines 440-480 ---
   440|             </Box>
   441|             {addedPartitions || deletedPartitions ? (
   442|               <Caption>
   443|                 (
   444|                 {addedPartitions ? (
   445|                   <span>
   446|                     {addedPartitions} partition{ifPlural(addedPartitions, '', 's')} created
   447|                     {deletedPartitions ? ',' : ''}
   448|                   </span>
   449|                 ) : null}
   450|                 {deletedPartitions ? (
   451|                   <span>
   452|                     {deletedPartitions} partition{ifPlural(deletedPartitions, '', 's')} deleted,
   453|                   </span>
   454|                 ) : null}
   455|                 )
   456|               </Caption>
   457|             ) : null}
   458|             <TickDetailsDialog
   459|               isOpen={showResults}
   460|               tickId={Number(tick.tickId)}
   461|               instigationSelector={instigationSelector}
   462|               onClose={() => {
   463|                 setShowResults(false);
   464|               }}
   465|             />
   466|           </Box>
   467|         ) : (
   468|           <>&mdash;</>
   469|         )}
   470|       </td>
   471|       {flagSensorScheduleLogging ? (
   472|         <td>{tick.logKey ? <a onClick={() => setLogTick(tick)}>View logs</a> : <>&mdash;</>}</td>
   473|       ) : null}
   474|     </tr>
   475|   );
   476| }
   477| const JOB_TICK_HISTORY_QUERY = gql`
   478|   query TickHistoryQuery(
   479|     $instigationSelector: InstigationSelector!
   480|     $dayRange: Int

# --- HUNK 5: Lines 499-534 ---
   499|           id
   500|           ...HistoryTick
   501|         }
   502|       }
   503|       ...PythonErrorFragment
   504|     }
   505|   }
   506|   ${RUN_STATUS_FRAGMENT}
   507|   ${PYTHON_ERROR_FRAGMENT}
   508|   ${TICK_TAG_FRAGMENT}
   509|   ${HISTORY_TICK_FRAGMENT}
   510| `;
   511| const CopyButton = styled.button`
   512|   background: transparent;
   513|   border: 0;
   514|   cursor: pointer;
   515|   padding: 8px;
   516|   margin: -6px;
   517|   outline: none;
   518|   ${IconWrapper} {
   519|     background-color: ${colorAccentGray()};
   520|     transition: background-color 100ms;
   521|   }
   522|   :hover ${IconWrapper} {
   523|     background-color: ${colorAccentGrayHover()};
   524|   }
   525|   :focus ${IconWrapper} {
   526|     background-color: ${colorLinkDefault()};
   527|   }
   528| `;
   529| const TableWrapper = styled(Table)`
   530|   th,
   531|   td {
   532|     vertical-align: middle !important;
   533|   }
   534| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instigation/Unloadable.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-30 ---
     1| import {useMutation} from '@apollo/client';
     2| import {
     3|   Alert,
     4|   Box,
     5|   Checkbox,
     6|   Group,
     7|   Table,
     8|   Subheading,
     9|   Tooltip,
    10|   colorTextLight,
    11| } from '@dagster-io/ui-components';
    12| import * as React from 'react';
    13| import {useConfirmation} from '../app/CustomConfirmationProvider';
    14| import {DEFAULT_DISABLED_REASON} from '../app/Permissions';
    15| import {InstigationStatus} from '../graphql/types';
    16| import {
    17|   displayScheduleMutationErrors,
    18|   STOP_SCHEDULE_MUTATION,
    19| } from '../schedules/ScheduleMutations';
    20| import {humanCronString} from '../schedules/humanCronString';
    21| import {
    22|   StopScheduleMutation,
    23|   StopScheduleMutationVariables,
    24| } from '../schedules/types/ScheduleMutations.types';
    25| import {displaySensorMutationErrors, STOP_SENSOR_MUTATION} from '../sensors/SensorMutations';
    26| import {
    27|   StopRunningSensorMutation,
    28|   StopRunningSensorMutationVariables,
    29| } from '../sensors/types/SensorMutations.types';
    30| import {TickStatusTag} from '../ticks/TickStatusTag';

# --- HUNK 2: Lines 169-209 ---
   169|     );
   170|     return lacksPermission ? (
   171|       <Tooltip content={DEFAULT_DISABLED_REASON}>{element}</Tooltip>
   172|     ) : (
   173|       element
   174|     );
   175|   };
   176|   return (
   177|     <tr key={name}>
   178|       <td style={{width: 60}}>{checkbox()}</td>
   179|       <td>
   180|         <Group direction="row" spacing={8} alignItems="center">
   181|           {name}
   182|         </Group>
   183|         <InstigatorSelectorInformation instigatorState={sensorState} />
   184|       </td>
   185|       <td>
   186|         {latestTick ? (
   187|           <TickStatusTag tick={latestTick} />
   188|         ) : (
   189|           <span style={{color: colorTextLight()}}>None</span>
   190|         )}
   191|       </td>
   192|       <td>
   193|         <div style={{display: 'flex'}}>
   194|           <InstigatedRunStatus instigationState={sensorState} />
   195|         </div>
   196|       </td>
   197|     </tr>
   198|   );
   199| };
   200| const ScheduleStateRow = ({scheduleState}: {scheduleState: InstigationStateFragment}) => {
   201|   const [stopSchedule, {loading: toggleOffInFlight}] = useMutation<
   202|     StopScheduleMutation,
   203|     StopScheduleMutationVariables
   204|   >(STOP_SCHEDULE_MUTATION, {
   205|     onCompleted: displayScheduleMutationErrors,
   206|   });
   207|   const confirm = useConfirmation();
   208|   const {id, selectorId, name, ticks, status, typeSpecificData} = scheduleState;
   209|   const latestTick = ticks.length > 0 ? ticks[0] : null;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instigation/types/InstigationUtils.types.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 38-78 ---
    38|       message: string;
    39|       stack: Array<string>;
    40|       errorChain: Array<{
    41|         __typename: 'ErrorChainLink';
    42|         isExplicitLink: boolean;
    43|         error: {__typename: 'PythonError'; message: string; stack: Array<string>};
    44|       }>;
    45|     } | null;
    46|   }>;
    47| };
    48| export type DynamicPartitionsRequestResultFragment = {
    49|   __typename: 'DynamicPartitionsRequestResult';
    50|   partitionsDefName: string;
    51|   partitionKeys: Array<string> | null;
    52|   skippedPartitionKeys: Array<string>;
    53|   type: Types.DynamicPartitionsRequestType;
    54| };
    55| export type HistoryTickFragment = {
    56|   __typename: 'InstigationTick';
    57|   id: string;
    58|   tickId: string;
    59|   status: Types.InstigationTickStatus;
    60|   timestamp: number;
    61|   endTimestamp: number | null;
    62|   cursor: string | null;
    63|   instigationType: Types.InstigationType;
    64|   skipReason: string | null;
    65|   runIds: Array<string>;
    66|   originRunIds: Array<string>;
    67|   logKey: Array<string> | null;
    68|   runKeys: Array<string>;
    69|   runs: Array<{__typename: 'Run'; id: string; status: Types.RunStatus}>;
    70|   error: {
    71|     __typename: 'PythonError';
    72|     message: string;
    73|     stack: Array<string>;
    74|     errorChain: Array<{
    75|       __typename: 'ErrorChainLink';
    76|       isExplicitLink: boolean;
    77|       error: {__typename: 'PythonError'; message: string; stack: Array<string>};
    78|     }>;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instigation/types/TickDetailsDialog.types.ts
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-48 ---
     1| import * as Types from '../../graphql/types';
     2| export type SelectedTickQueryVariables = Types.Exact<{
     3|   instigationSelector: Types.InstigationSelector;
     4|   tickId: Types.Scalars['Int'];
     5| }>;
     6| export type SelectedTickQuery = {
     7|   __typename: 'Query';
     8|   instigationStateOrError:
     9|     | {
    10|         __typename: 'InstigationState';
    11|         id: string;
    12|         tick: {
    13|           __typename: 'InstigationTick';
    14|           id: string;
    15|           tickId: string;
    16|           status: Types.InstigationTickStatus;
    17|           timestamp: number;
    18|           endTimestamp: number | null;
    19|           cursor: string | null;
    20|           instigationType: Types.InstigationType;
    21|           skipReason: string | null;
    22|           runIds: Array<string>;
    23|           originRunIds: Array<string>;
    24|           logKey: Array<string> | null;
    25|           runKeys: Array<string>;
    26|           runs: Array<{__typename: 'Run'; id: string; status: Types.RunStatus}>;
    27|           error: {
    28|             __typename: 'PythonError';
    29|             message: string;
    30|             stack: Array<string>;
    31|             errorChain: Array<{
    32|               __typename: 'ErrorChainLink';
    33|               isExplicitLink: boolean;
    34|               error: {__typename: 'PythonError'; message: string; stack: Array<string>};
    35|             }>;
    36|           } | null;
    37|           dynamicPartitionsRequestResults: Array<{
    38|             __typename: 'DynamicPartitionsRequestResult';
    39|             partitionsDefName: string;
    40|             partitionKeys: Array<string> | null;
    41|             skippedPartitionKeys: Array<string>;
    42|             type: Types.DynamicPartitionsRequestType;
    43|           }>;
    44|         };
    45|       }
    46|     | {__typename: 'InstigationStateNotFoundError'}
    47|     | {__typename: 'PythonError'};
    48| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instigation/types/TickHistory.types.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-41 ---
     1| import * as Types from '../../graphql/types';
     2| export type TickHistoryQueryVariables = Types.Exact<{
     3|   instigationSelector: Types.InstigationSelector;
     4|   dayRange?: Types.InputMaybe<Types.Scalars['Int']>;
     5|   limit?: Types.InputMaybe<Types.Scalars['Int']>;
     6|   cursor?: Types.InputMaybe<Types.Scalars['String']>;
     7|   statuses?: Types.InputMaybe<Array<Types.InstigationTickStatus> | Types.InstigationTickStatus>;
     8|   beforeTimestamp?: Types.InputMaybe<Types.Scalars['Float']>;
     9|   afterTimestamp?: Types.InputMaybe<Types.Scalars['Float']>;
    10| }>;
    11| export type TickHistoryQuery = {
    12|   __typename: 'Query';
    13|   instigationStateOrError:
    14|     | {
    15|         __typename: 'InstigationState';
    16|         id: string;
    17|         instigationType: Types.InstigationType;
    18|         ticks: Array<{
    19|           __typename: 'InstigationTick';
    20|           id: string;
    21|           tickId: string;
    22|           status: Types.InstigationTickStatus;
    23|           timestamp: number;
    24|           endTimestamp: number | null;
    25|           cursor: string | null;
    26|           instigationType: Types.InstigationType;
    27|           skipReason: string | null;
    28|           runIds: Array<string>;
    29|           originRunIds: Array<string>;
    30|           logKey: Array<string> | null;
    31|           runKeys: Array<string>;
    32|           runs: Array<{__typename: 'Run'; id: string; status: Types.RunStatus}>;
    33|           error: {
    34|             __typename: 'PythonError';
    35|             message: string;
    36|             stack: Array<string>;
    37|             errorChain: Array<{
    38|               __typename: 'ErrorChainLink';
    39|               isExplicitLink: boolean;
    40|               error: {__typename: 'PythonError'; message: string; stack: Array<string>};
    41|             }>;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/launchpad/ConfigEditorConfigPicker.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-37 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {HTMLInputProps, InputGroupProps2, Intent} from '@blueprintjs/core';
     3| import {
     4|   Box,
     5|   Button,
     6|   Icon,
     7|   IconWrapper,
     8|   MenuDivider,
     9|   MenuItem,
    10|   Menu,
    11|   Select,
    12|   Spinner,
    13|   Suggest,
    14|   colorAccentGray,
    15|   colorBackgroundLighter,
    16|   colorBackgroundLighterHover,
    17|   colorBackgroundLight,
    18| } from '@dagster-io/ui-components';
    19| import * as React from 'react';
    20| import styled from 'styled-components';
    21| import {AppContext} from '../app/AppContext';
    22| import {showCustomAlert} from '../app/CustomAlertProvider';
    23| import {IExecutionSession} from '../app/ExecutionSessionStorage';
    24| import {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';
    25| import {PythonErrorInfo} from '../app/PythonErrorInfo';
    26| import {ShortcutHandler} from '../app/ShortcutHandler';
    27| import {PartitionDefinitionType, RepositorySelector} from '../graphql/types';
    28| import {useStateWithStorage} from '../hooks/useStateWithStorage';
    29| import {CreatePartitionDialog} from '../partitions/CreatePartitionDialog';
    30| import {repoAddressAsHumanString} from '../workspace/repoAddressAsString';
    31| import {repoAddressToSelector} from '../workspace/repoAddressToSelector';
    32| import {RepoAddress} from '../workspace/types';
    33| import {
    34|   ConfigEditorGeneratorPipelineFragment,
    35|   ConfigEditorPipelinePresetFragment,
    36|   PartitionSetForConfigEditorFragment,
    37|   ConfigPartitionResultFragment,

# --- HUNK 2: Lines 168-208 ---
   168|       data?.partitionSetOrError.partitionsOrError.__typename === 'Partitions'
   169|         ? data.partitionSetOrError.partitionsOrError.results
   170|         : [];
   171|     return sortOrder === 'asc' ? retrieved : [...retrieved].reverse();
   172|   }, [data, sortOrder]);
   173|   const error =
   174|     data?.partitionSetOrError.__typename === 'PartitionSet' &&
   175|     data?.partitionSetOrError.partitionsOrError.__typename !== 'Partitions'
   176|       ? data.partitionSetOrError.partitionsOrError
   177|       : null;
   178|   const selected = partitions.find((p) => p.name === value);
   179|   const onClickSort = React.useCallback(
   180|     (event: React.MouseEvent<HTMLButtonElement>) => {
   181|       event.preventDefault();
   182|       setSortOrder((order) => (order === 'asc' ? 'desc' : 'asc'));
   183|     },
   184|     [setSortOrder],
   185|   );
   186|   const rightElement = partitions.length ? (
   187|     <SortButton onMouseDown={onClickSort}>
   188|       <Icon name="sort_by_alpha" color={colorAccentGray()} />
   189|     </SortButton>
   190|   ) : undefined;
   191|   const inputProps: InputGroupProps2 & HTMLInputProps = {
   192|     placeholder: 'Partition',
   193|     style: {width: 180},
   194|     intent: (loading ? !!value : !!selected) ? Intent.NONE : Intent.DANGER,
   195|     rightElement,
   196|   };
   197|   const {isDynamicPartition, partitionDefinitionName} = React.useMemo(() => {
   198|     const assetNodes = data?.assetNodes;
   199|     const definition = assetNodes?.find((a) => !!a.partitionDefinition)?.partitionDefinition;
   200|     if (
   201|       !definition ||
   202|       assetNodes?.some(
   203|         (node) =>
   204|           node?.partitionDefinition?.name && node?.partitionDefinition?.name !== definition?.name,
   205|       )
   206|     ) {
   207|       return {isDynamicPartition: false, partitionDefinitionName: undefined};
   208|     }

# --- HUNK 3: Lines 362-411 ---
   362|             onItemSelect={onSelect}
   363|           >
   364|             <Button
   365|               ref={button}
   366|               data-test-id="preset-selector-button"
   367|               rightIcon={<Icon name="expand_more" />}
   368|             >
   369|               {label}
   370|             </Button>
   371|           </Select>
   372|         </ShortcutHandler>
   373|       </div>
   374|     );
   375|   },
   376| );
   377| export const SortButton = styled.button`
   378|   border: 0;
   379|   cursor: pointer;
   380|   padding: 4px;
   381|   margin: 3px 3px 0 0;
   382|   background-color: ${colorBackgroundLighter()};
   383|   border-radius: 4px;
   384|   transition: background-color 100ms;
   385|   :focus {
   386|     background-color: ${colorBackgroundLighterHover()};
   387|     outline: none;
   388|   }
   389|   :hover {
   390|     ${IconWrapper} {
   391|       background-color: ${colorBackgroundLight()};
   392|     }
   393|   }
   394| `;
   395| const PickerContainer = styled.div`
   396|   display: flex;
   397|   justify: space-between;
   398|   align-items: center;
   399|   gap: 6px;
   400| `;
   401| const CONFIG_PARTITIONS_QUERY = gql`
   402|   query ConfigPartitionsQuery(
   403|     $repositorySelector: RepositorySelector!
   404|     $partitionSetName: String!
   405|     $assetKeys: [AssetKeyInput!]
   406|   ) {
   407|     partitionSetOrError(
   408|       repositorySelector: $repositorySelector
   409|       partitionSetName: $partitionSetName
   410|     ) {
   411|       ... on PartitionSet {


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/launchpad/LaunchButton.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-31 ---
     1| import {
     2|   Button,
     3|   Icon,
     4|   IconName,
     5|   Menu,
     6|   MenuItem,
     7|   Popover,
     8|   Spinner,
     9|   Tooltip,
    10|   colorAccentReversed,
    11|   colorKeylineDefault,
    12| } from '@dagster-io/ui-components';
    13| import * as React from 'react';
    14| import styled from 'styled-components';
    15| import {useConfirmation} from '../app/CustomConfirmationProvider';
    16| import {ShortcutHandler} from '../app/ShortcutHandler';
    17| export interface LaunchButtonConfiguration {
    18|   title: string;
    19|   disabled: boolean;
    20|   warning?: React.ReactNode;
    21|   scope?: string;
    22|   onClick: () => Promise<any>;
    23|   icon?: IconName | JSX.Element | 'dagster-spinner';
    24|   tooltip?: string | JSX.Element;
    25| }
    26| enum LaunchButtonStatus {
    27|   Ready = 'ready',
    28|   Starting = 'starting',
    29|   Disabled = 'disabled',
    30| }
    31| function useLaunchButtonCommonState({runCount, disabled}: {runCount: number; disabled: boolean}) {

# --- HUNK 2: Lines 197-250 ---
   197|     onClick();
   198|   };
   199|   return (
   200|     <Tooltip
   201|       position="left"
   202|       openOnTargetFocus={false}
   203|       targetTagName="div"
   204|       canShow={!!tooltip}
   205|       content={tooltip || ''}
   206|     >
   207|       <ButtonContainer
   208|         role="button"
   209|         intent="primary"
   210|         style={{...style}}
   211|         status={status}
   212|         onClick={onClickWithWarning}
   213|         joined={joined}
   214|         disabled={disabled}
   215|         icon={
   216|           icon === 'dagster-spinner' ? (
   217|             <Spinner purpose="body-text" fillColor={colorAccentReversed()} />
   218|           ) : typeof icon === 'string' ? (
   219|             <Icon name={icon} size={16} style={{textAlign: 'center', marginRight: 5}} />
   220|           ) : (
   221|             icon
   222|           )
   223|         }
   224|       >
   225|         <MaxwidthText>{title}</MaxwidthText>
   226|       </ButtonContainer>
   227|     </Tooltip>
   228|   );
   229| };
   230| const ButtonContainer = styled(Button)<{
   231|   status: LaunchButtonStatus;
   232|   joined?: 'right' | 'left';
   233| }>`
   234|   border-top-${({joined}) => joined}-radius: 0;
   235|   border-bottom-${({joined}) => joined}-radius: 0;
   236|   border-left: ${({joined}) =>
   237|     joined === 'left' ? `1px solid ${colorKeylineDefault()}` : 'transparent'};
   238|   cursor: ${({status}) => (status !== 'ready' ? 'normal' : 'pointer')};
   239|   margin-left: ${({joined}) => (joined ? '0' : '6px')};
   240|   ${({joined}) => (joined === 'right' ? 'padding-right: 8px;' : null)}
   241| `;
   242| const MaxwidthText = styled.div`
   243|   overflow: hidden;
   244|   text-overflow: ellipsis;
   245|   white-space: nowrap;
   246|   max-width: 350px;
   247| `;
   248| const LaunchMenuItem = styled(MenuItem)`
   249|   max-width: 200px;
   250| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/launchpad/LaunchpadSession.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-41 ---
     1| import {gql, useApolloClient, useQuery} from '@apollo/client';
     2| import {
     3|   Body,
     4|   Box,
     5|   Button,
     6|   ButtonLink,
     7|   Checkbox,
     8|   ConfigEditorHandle,
     9|   ConfigEditorHelp,
    10|   ConfigEditorHelpContext,
    11|   Dialog,
    12|   DialogFooter,
    13|   Group,
    14|   Icon,
    15|   NewConfigEditor,
    16|   SecondPanelToggle,
    17|   SplitPanelContainer,
    18|   TextInput,
    19|   colorAccentYellow,
    20|   colorBorderDefault,
    21|   colorTextDefault,
    22|   isHelpContextEqual,
    23| } from '@dagster-io/ui-components';
    24| import merge from 'deepmerge';
    25| import uniqBy from 'lodash/uniqBy';
    26| import * as React from 'react';
    27| import styled from 'styled-components';
    28| import * as yaml from 'yaml';
    29| import {showCustomAlert} from '../app/CustomAlertProvider';
    30| import {
    31|   IExecutionSession,
    32|   IExecutionSessionChanges,
    33|   PipelineRunTag,
    34|   SessionBase,
    35| } from '../app/ExecutionSessionStorage';
    36| import {usePermissionsForLocation} from '../app/Permissions';
    37| import {PythonErrorInfo} from '../app/PythonErrorInfo';
    38| import {ShortcutHandler} from '../app/ShortcutHandler';
    39| import {displayNameForAssetKey, tokenForAssetKey} from '../asset-graph/Utils';
    40| import {asAssetKeyInput, asAssetCheckHandleInput} from '../assets/asInput';
    41| import {

# --- HUNK 2: Lines 583-623 ---
   583|                 onSaveSession={onSaveSession}
   584|                 onSelectPreset={onSelectPreset}
   585|                 onSelectPartition={onSelectPartition}
   586|                 repoAddress={repoAddress}
   587|                 assetSelection={currentSession.assetSelection}
   588|               />
   589|               <SessionSettingsSpacer />
   590|               {launchpadType === 'asset' ? (
   591|                 <Box flex={{gap: 16, alignItems: 'center'}}>
   592|                   <TextInput
   593|                     readOnly
   594|                     value={
   595|                       currentSession.assetSelection
   596|                         ? currentSession.assetSelection
   597|                             .map((a) => tokenForAssetKey(a.assetKey))
   598|                             .join(', ')
   599|                         : '*'
   600|                     }
   601|                   />
   602|                   {includedChecks.length > 0 ? (
   603|                     <Body color={colorTextDefault()}>
   604|                       {`Including `}
   605|                       <ButtonLink onClick={() => setShowChecks(includedChecks)}>
   606|                         {`${includedChecks.length.toLocaleString()} ${
   607|                           includedChecks.length > 1 ? 'checks' : 'check'
   608|                         }`}
   609|                       </ButtonLink>
   610|                     </Body>
   611|                   ) : undefined}
   612|                   {executableChecks.length > 0 ? (
   613|                     <Checkbox
   614|                       label={
   615|                         <span>
   616|                           {`Include `}
   617|                           <ButtonLink onClick={() => setShowChecks(executableChecks)}>
   618|                             {`${executableChecks.length.toLocaleString()} separately executable ${
   619|                               executableChecks.length > 1 ? 'checks' : 'check'
   620|                             }`}
   621|                           </ButtonLink>
   622|                         </span>
   623|                       }

# --- HUNK 3: Lines 666-721 ---
   666|                 onChange={saveTags}
   667|                 open={tagEditorOpen}
   668|                 onRequestClose={closeTagEditor}
   669|               />
   670|               <div style={{flex: 1}} />
   671|               <ShortcutHandler
   672|                 shortcutLabel="T"
   673|                 shortcutFilter={(e) => e.code === 'KeyT' && e.altKey}
   674|                 onShortcut={openTagEditor}
   675|               >
   676|                 <Button onClick={openTagEditor} icon={<Icon name="edit" />}>
   677|                   Edit tags
   678|                 </Button>
   679|               </ShortcutHandler>
   680|               <SessionSettingsSpacer />
   681|               <SecondPanelToggle axis="horizontal" container={editorSplitPanelContainer} />
   682|             </SessionSettingsBar>
   683|             {pipeline.tags.length || tagsFromSession.length ? (
   684|               <Box
   685|                 padding={{vertical: 8, left: 12, right: 0}}
   686|                 border={{side: 'bottom', color: colorBorderDefault()}}
   687|               >
   688|                 <TagContainer
   689|                   tagsFromDefinition={pipeline.tags}
   690|                   tagsFromSession={tagsFromSession}
   691|                   onRequestEdit={openTagEditor}
   692|                 />
   693|               </Box>
   694|             ) : null}
   695|             {refreshableSessionBase ? (
   696|               <Box
   697|                 padding={{vertical: 8, horizontal: 12}}
   698|                 border={{side: 'bottom', color: colorBorderDefault()}}
   699|               >
   700|                 <Group direction="row" spacing={8} alignItems="center">
   701|                   <Icon name="warning" color={colorAccentYellow()} />
   702|                   <div>
   703|                     {repoAddressAsHumanString(repoAddress)} has been manually refreshed, and this
   704|                     configuration may now be out of date.
   705|                   </div>
   706|                   <Button
   707|                     intent="primary"
   708|                     onClick={() => onRefreshConfig(refreshableSessionBase)}
   709|                     disabled={state.configLoading}
   710|                   >
   711|                     Refresh config
   712|                   </Button>
   713|                   <Button onClick={onDismissRefreshWarning}>Dismiss</Button>
   714|                 </Group>
   715|               </Box>
   716|             ) : null}
   717|             <SplitPanelContainer
   718|               ref={editorSplitPanelContainer}
   719|               axis="horizontal"
   720|               identifier="execution-editor"
   721|               firstMinSize={100}


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/launchpad/LaunchpadTabs.tsx
# Total hunks: 4
# ====================================================================
# --- HUNK 1: Lines 1-35 ---
     1| import {
     2|   Box,
     3|   ButtonLink,
     4|   colorAccentGray,
     5|   colorAccentPrimary,
     6|   colorAccentPrimaryHover,
     7|   colorBackgroundDefault,
     8|   colorBackgroundLight,
     9|   colorBackgroundLighter,
    10|   colorTextLight,
    11|   colorTextLighter,
    12|   colorTextRed,
    13|   Icon,
    14|   IconWrapper,
    15| } from '@dagster-io/ui-components';
    16| import * as React from 'react';
    17| import styled, {css} from 'styled-components';
    18| import {useConfirmation} from '../app/CustomConfirmationProvider';
    19| import {
    20|   applyChangesToSession,
    21|   applyRemoveSession,
    22|   applySelectSession,
    23|   IStorageData,
    24| } from '../app/ExecutionSessionStorage';
    25| interface ExecutationTabProps {
    26|   canRemove?: boolean;
    27|   title: string;
    28|   active?: boolean;
    29|   onChange?: (title: string) => void;
    30|   onRemove?: () => void;
    31|   onClick: () => void;
    32| }
    33| const LaunchpadTab = (props: ExecutationTabProps) => {
    34|   const {canRemove, title, onChange, onClick, onRemove, active} = props;
    35|   const input = React.useRef<HTMLInputElement>(null);

# --- HUNK 2: Lines 62-102 ---
    62|       el.select();
    63|     }
    64|   }, [editing]);
    65|   return (
    66|     <TabContainer $active={active || false} onDoubleClick={onDoubleClick} onClick={onClick}>
    67|       {editing ? (
    68|         <input
    69|           ref={input}
    70|           type="text"
    71|           onKeyDown={(e) => e.key === 'Enter' && e.currentTarget.blur()}
    72|           onChange={handleChange}
    73|           onBlur={handleBlur}
    74|           value={value}
    75|           placeholder="Type a tab name"
    76|         />
    77|       ) : (
    78|         title
    79|       )}
    80|       {canRemove && !editing && onRemove ? (
    81|         <RemoveButton onClick={onClickRemove}>
    82|           <Icon name="close" color={colorAccentPrimary()} />
    83|         </RemoveButton>
    84|       ) : null}
    85|     </TabContainer>
    86|   );
    87| };
    88| const REMOVE_ALL_THRESHOLD = 3;
    89| interface LaunchpadTabsProps {
    90|   data: IStorageData;
    91|   onCreate: () => void;
    92|   onSave: (data: React.SetStateAction<IStorageData>) => void;
    93| }
    94| export const LaunchpadTabs = (props: LaunchpadTabsProps) => {
    95|   const {data, onCreate, onSave} = props;
    96|   const {sessions} = data;
    97|   const sessionKeys = Object.keys(sessions);
    98|   const sessionCount = sessionKeys.length;
    99|   const confirm = useConfirmation();
   100|   const onApply = (mutator: any, ...args: any[]) => {
   101|     onSave(mutator(data, ...args));
   102|   };

# --- HUNK 3: Lines 123-229 ---
   123|       });
   124|       return updatedData;
   125|     });
   126|   };
   127|   return (
   128|     <Box border="bottom" padding={{top: 12}}>
   129|       <LaunchpadTabsContainer>
   130|         {sessionKeys.map((key) => (
   131|           <LaunchpadTab
   132|             canRemove={sessionCount > 1}
   133|             key={key}
   134|             active={key === data.current}
   135|             title={sessions[key]!.name || 'Unnamed'}
   136|             onClick={() => onApply(applySelectSession, key)}
   137|             onChange={(name) => onApply(applyChangesToSession, key, {name})}
   138|             onRemove={() => onRemove(key)}
   139|           />
   140|         ))}
   141|         <LaunchpadTab title="+ Add..." onClick={onCreate} />
   142|         {sessionKeys.length > REMOVE_ALL_THRESHOLD ? (
   143|           <Box
   144|             background={colorBackgroundDefault()}
   145|             padding={{top: 8, left: 8, right: 12}}
   146|             border="bottom"
   147|             style={{position: 'sticky', right: 0}}
   148|           >
   149|             <ButtonLink color={colorTextRed()} onClick={onRemoveAll}>
   150|               <Box
   151|                 flex={{direction: 'row', gap: 4, alignItems: 'center'}}
   152|                 style={{whiteSpace: 'nowrap'}}
   153|               >
   154|                 <Icon name="delete" color={colorTextRed()} />
   155|                 <div>Remove all</div>
   156|               </Box>
   157|             </ButtonLink>
   158|           </Box>
   159|         ) : null}
   160|       </LaunchpadTabsContainer>
   161|     </Box>
   162|   );
   163| };
   164| const LaunchpadTabsContainer = styled.div`
   165|   display: flex;
   166|   flex-direction: row;
   167|   font-size: 13px;
   168|   gap: 8px;
   169|   z-index: 1;
   170|   flex-direction: row;
   171|   padding-left: 12px;
   172|   overflow-x: auto;
   173|   ::-webkit-scrollbar {
   174|     display: none; /* Safari and Chrome */
   175|   }
   176| `;
   177| const TabContainer = styled.div<{$active: boolean}>`
   178|   align-items: center;
   179|   user-select: none;
   180|   padding: 8px 12px;
   181|   display: inline-flex;
   182|   align-items: center;
   183|   gap: 4px;
   184|   border-top-left-radius: 8px;
   185|   border-top-right-radius: 8px;
   186|   white-space: nowrap;
   187|   ${({$active}) =>
   188|     $active
   189|       ? css`
   190|           font-weight: 600;
   191|           background-color: ${colorBackgroundLighter()};
   192|           color: ${colorAccentPrimary()};
   193|           box-shadow: ${colorAccentPrimary()} 0 -2px 0 inset;
   194|         `
   195|       : css`
   196|           font-weight: normal;
   197|           background-color: ${colorBackgroundLight()};
   198|           color: ${colorTextLighter()};
   199|           box-shadow: ${colorAccentGray()} 0 -1px 0 inset;
   200|           &:hover {
   201|             background-color: ${colorBackgroundLight()};
   202|             box-shadow: ${colorAccentGray()} 0 -1px 0 inset;
   203|             color: ${colorTextLight()};
   204|           }
   205|         `}
   206|   &:last-child {
   207|     padding-right: 12px;
   208|   }
   209|   input {
   210|     background-color: transparent;
   211|     font-size: 13px;
   212|     border: 0;
   213|     outline: none;
   214|     padding: 0;
   215|   }
   216|   cursor: ${({$active}) => (!$active ? 'pointer' : 'inherit')};
   217| `;
   218| const RemoveButton = styled.button`
   219|   background-color: transparent;
   220|   border: 0;
   221|   cursor: pointer;
   222|   padding: 0;
   223|   ${IconWrapper} {
   224|     transition: background-color 100ms;
   225|   }
   226|   &:hover ${IconWrapper} {
   227|     background-color: ${colorAccentPrimaryHover()};
   228|   }
   229| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/launchpad/LoadingOverlay.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-26 ---
     1| import {Group, Spinner, colorBackgroundDefault} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| export const LoadingOverlay = ({isLoading, message}: {isLoading: boolean; message: string}) => (
     5|   <LoadingOverlayContainer isLoading={isLoading}>
     6|     <Group direction="row" spacing={8} alignItems="center">
     7|       <Spinner purpose="body-text" />
     8|       <div>{message}</div>
     9|     </Group>
    10|   </LoadingOverlayContainer>
    11| );
    12| const LoadingOverlayContainer = styled.div<{isLoading: boolean}>`
    13|   position: absolute;
    14|   left: 0;
    15|   right: 0;
    16|   top: 0;
    17|   bottom: 0;
    18|   background-color: ${colorBackgroundDefault()};
    19|   z-index: 20;
    20|   display: ${({isLoading}) => (!isLoading ? 'none' : 'flex')};
    21|   align-items: center;
    22|   justify-content: center;
    23|   opacity: ${({isLoading}) => (isLoading ? '0.7' : '0')};
    24|   transition: opacity 150ms linear;
    25|   transition-delay: 300ms;
    26| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/launchpad/OpSelector.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-28 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {
     3|   Box,
     4|   Popover,
     5|   colorAccentRed,
     6|   colorBackgroundRed,
     7|   colorTextRed,
     8| } from '@dagster-io/ui-components';
     9| import * as React from 'react';
    10| import styled from 'styled-components';
    11| import {filterByQuery} from '../app/GraphQueryImpl';
    12| import {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';
    13| import {ShortcutHandler} from '../app/ShortcutHandler';
    14| import {explodeCompositesInHandleGraph} from '../pipelines/CompositeSupport';
    15| import {GRAPH_EXPLORER_SOLID_HANDLE_FRAGMENT} from '../pipelines/GraphExplorer';
    16| import {GraphQueryInput} from '../ui/GraphQueryInput';
    17| import {isThisThingAJob, useRepository} from '../workspace/WorkspaceContext';
    18| import {repoAddressToSelector} from '../workspace/repoAddressToSelector';
    19| import {RepoAddress} from '../workspace/types';
    20| import {OpSelectorQuery, OpSelectorQueryVariables} from './types/OpSelector.types';
    21| interface IOpSelectorProps {
    22|   pipelineName: string;
    23|   serverProvidedSubsetError?: {message: string};
    24|   value: string[] | null;
    25|   query: string | null;
    26|   onChange: (value: string[] | null, query: string | null) => void;
    27|   flattenGraphs: boolean;
    28|   onFlattenGraphsChange: (v: boolean) => void;

# --- HUNK 2: Lines 132-155 ---
   132|             linkToPreview={{
   133|               repoName: repoAddress.name,
   134|               repoLocation: repoAddress.location,
   135|               pipelineName,
   136|               isJob,
   137|             }}
   138|             flattenGraphsEnabled={flattenGraphsEnabled}
   139|             flattenGraphs={flattenGraphs}
   140|             setFlattenGraphs={() => {
   141|               onFlattenGraphsChange(!flattenGraphs);
   142|             }}
   143|           />
   144|         </ShortcutHandler>
   145|       </Popover>
   146|     </Box>
   147|   );
   148| };
   149| const PopoverErrorWrap = styled.div`
   150|   padding: 4px 8px;
   151|   border-radius: 2px;
   152|   border: 1px solid ${colorAccentRed()};
   153|   background: ${colorBackgroundRed()};
   154|   color: ${colorTextRed()};
   155| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/launchpad/RunPreview.tsx
# Total hunks: 9
# ====================================================================
# --- HUNK 1: Lines 1-38 ---
     1| import {gql} from '@apollo/client';
     2| import {Intent} from '@blueprintjs/core';
     3| import {
     4|   Box,
     5|   Button,
     6|   ButtonLink,
     7|   Checkbox,
     8|   Icon,
     9|   SplitPanelContainer,
    10|   Tag,
    11|   Code,
    12|   Tooltip,
    13|   FontFamily,
    14|   colorAccentGreen,
    15|   colorTextLight,
    16|   colorAccentRed,
    17|   colorBackgroundLight,
    18|   colorBackgroundDefault,
    19| } from '@dagster-io/ui-components';
    20| import * as React from 'react';
    21| import styled from 'styled-components';
    22| import {showCustomAlert} from '../app/CustomAlertProvider';
    23| import {useConfirmation} from '../app/CustomConfirmationProvider';
    24| import {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';
    25| import {PythonErrorInfo} from '../app/PythonErrorInfo';
    26| import {errorStackToYamlPath} from '../configeditor/ConfigEditorUtils';
    27| import {
    28|   CompositeConfigTypeForSchemaFragment,
    29|   ConfigEditorRunConfigSchemaFragment,
    30| } from '../configeditor/types/ConfigEditorUtils.types';
    31| import {LaunchpadType} from './types';
    32| import {
    33|   RunPreviewValidationErrorsFragment,
    34|   RunPreviewValidationFragment,
    35| } from './types/RunPreview.types';
    36| type ValidationError = RunPreviewValidationErrorsFragment;
    37| type ValidationErrorOrNode = ValidationError | React.ReactNode;
    38| function isValidationError(e: ValidationErrorOrNode): e is ValidationError {

# --- HUNK 2: Lines 109-149 ---
   109|                 ))}
   110|               </ul>
   111|             </>
   112|           )}
   113|           <p>
   114|             Clicking confirm will automatically remove this extra configuration from your run
   115|             config.
   116|           </p>
   117|         </div>
   118|       ),
   119|     });
   120|     onRemoveExtraPaths(extraNodes);
   121|   };
   122|   return (
   123|     <Box flex={{direction: 'row', gap: 8, alignItems: 'center'}}>
   124|       <Button disabled={disabled} onClick={onClick}>
   125|         Remove extra config
   126|       </Button>
   127|       {disabled ? (
   128|         <Box flex={{direction: 'row', gap: 4, alignItems: 'center'}}>
   129|           <Icon name="check_circle" color={colorAccentGreen()} />
   130|           No extra config to remove
   131|         </Box>
   132|       ) : null}
   133|     </Box>
   134|   );
   135| };
   136| const ScaffoldConfigButton = ({
   137|   onScaffoldMissingConfig,
   138|   missingNodes,
   139|   disabled,
   140| }: {
   141|   missingNodes: string[];
   142|   onScaffoldMissingConfig: () => void;
   143|   disabled: boolean;
   144| }) => {
   145|   const confirm = useConfirmation();
   146|   const confirmationMessage = (
   147|     <div>
   148|       {missingNodes.length > 0 && (
   149|         <>

# --- HUNK 3: Lines 160-234 ---
   160|       <p>
   161|         Clicking confirm will automatically scaffold this missing configuration into your run config
   162|         with default values. You will need to change the values appropriately.
   163|       </p>
   164|     </div>
   165|   );
   166|   const onClick = async () => {
   167|     await confirm({
   168|       title: 'Scaffold missing config',
   169|       description: confirmationMessage,
   170|     });
   171|     onScaffoldMissingConfig();
   172|   };
   173|   return (
   174|     <Box flex={{direction: 'row', gap: 8, alignItems: 'center'}}>
   175|       <Button disabled={disabled} onClick={onClick}>
   176|         Scaffold missing config
   177|       </Button>
   178|       {disabled ? (
   179|         <Box flex={{direction: 'row', gap: 4, alignItems: 'center'}}>
   180|           <Icon name="check_circle" color={colorAccentGreen()} />
   181|           No missing config
   182|         </Box>
   183|       ) : null}
   184|     </Box>
   185|   );
   186| };
   187| const ExpandDefaultButton = ({
   188|   onExpandDefaults,
   189|   disabled,
   190| }: {
   191|   onExpandDefaults: () => void;
   192|   disabled: boolean;
   193| }) => {
   194|   const confirm = useConfirmation();
   195|   const onClick = async () => {
   196|     await confirm({
   197|       title: 'Scaffold all default config',
   198|       description: (
   199|         <div>
   200|           Clicking confirm will automatically scaffold any unspecified configuration fields into
   201|           your run config with default values. You will need to change the values appropriately.
   202|         </div>
   203|       ),
   204|     });
   205|     onExpandDefaults();
   206|   };
   207|   return (
   208|     <Box flex={{direction: 'row', gap: 8, alignItems: 'center'}}>
   209|       <Button disabled={disabled} onClick={onClick}>
   210|         Scaffold all default config
   211|       </Button>
   212|       {disabled ? (
   213|         <Box flex={{direction: 'row', gap: 4, alignItems: 'center'}}>
   214|           <Icon name="check_circle" color={colorAccentGreen()} />
   215|           All defaults expanded
   216|         </Box>
   217|       ) : null}
   218|     </Box>
   219|   );
   220| };
   221| interface RunPreviewProps {
   222|   validation: RunPreviewValidationFragment | null;
   223|   document: any | null;
   224|   launchpadType: LaunchpadType;
   225|   runConfigSchema?: ConfigEditorRunConfigSchemaFragment;
   226|   onHighlightPath: (path: string[]) => void;
   227|   onRemoveExtraPaths: (paths: string[]) => void;
   228|   onScaffoldMissingConfig: () => void;
   229|   onExpandDefaults: () => void;
   230|   anyDefaultsToExpand: boolean;
   231|   solidSelection: string[] | null;
   232| }
   233| export const RunPreview = (props: RunPreviewProps) => {
   234|   const {

# --- HUNK 4: Lines 362-402 ---
   362|       .filter(Boolean);
   363|     if (!boxes.length) {
   364|       return <ItemsEmptyNotice>Nothing to display.</ItemsEmptyNotice>;
   365|     }
   366|     return boxes;
   367|   };
   368|   return (
   369|     <SplitPanelContainer
   370|       identifier="run-preview"
   371|       axis="horizontal"
   372|       first={
   373|         <ErrorListContainer>
   374|           <Section>
   375|             <SectionTitle>Errors</SectionTitle>
   376|             {errorsAndPaths.length ? (
   377|               errorsAndPaths.map((item, idx) => (
   378|                 <ErrorRow key={idx} error={item.error} onHighlight={onHighlightPath} />
   379|               ))
   380|             ) : (
   381|               <Box flex={{direction: 'row', gap: 4, alignItems: 'center'}}>
   382|                 <Icon name="check_circle" color={colorAccentGreen()} />
   383|                 No errors
   384|               </Box>
   385|             )}
   386|           </Section>
   387|           <Section>
   388|             <SectionTitle>Config actions:</SectionTitle>
   389|             <Box flex={{direction: 'column', gap: 8}} padding={{top: 4, bottom: 20}}>
   390|               <ScaffoldConfigButton
   391|                 onScaffoldMissingConfig={onScaffoldMissingConfig}
   392|                 missingNodes={missingNodes}
   393|                 disabled={!missingNodes.length}
   394|               />
   395|               <ExpandDefaultButton
   396|                 onExpandDefaults={onExpandDefaults}
   397|                 disabled={!anyDefaultsToExpand}
   398|               />
   399|               <RemoveExtraConfigButton
   400|                 onRemoveExtraPaths={onRemoveExtraPaths}
   401|                 extraNodes={extraNodes}
   402|                 disabled={!extraNodes.length}

# --- HUNK 5: Lines 427-471 ---
   427|                 </Section>
   428|               )}
   429|             </RuntimeAndResourcesSection>
   430|             <Section>
   431|               <SectionTitle>{launchpadType === 'asset' ? 'Assets (Ops)' : 'Ops'}</SectionTitle>
   432|               <ItemSet>
   433|                 {itemsIn(
   434|                   [hasOps ? 'ops' : 'solids'],
   435|                   (hasOps ? ops?.fields : solids?.fields) || [],
   436|                 )}
   437|               </ItemSet>
   438|             </Section>
   439|             <div style={{height: 50}} />
   440|           </div>
   441|           <div
   442|             style={{
   443|               position: 'absolute',
   444|               top: 0,
   445|               right: 0,
   446|               padding: '12px 15px 0px 10px',
   447|               background: colorBackgroundDefault(),
   448|             }}
   449|           >
   450|             <Checkbox
   451|               label="Errors only"
   452|               checked={errorsOnly}
   453|               onChange={() => setErrorsOnly(!errorsOnly)}
   454|             />
   455|           </div>
   456|         </>
   457|       }
   458|     />
   459|   );
   460| };
   461| export const RUN_PREVIEW_VALIDATION_FRAGMENT = gql`
   462|   fragment RunPreviewValidationFragment on PipelineConfigValidationResult {
   463|     ... on RunConfigValidationInvalid {
   464|       errors {
   465|         ...RunPreviewValidationErrors
   466|       }
   467|     }
   468|     ... on PipelineNotFoundError {
   469|       message
   470|     }
   471|     ... on InvalidSubsetError {

# --- HUNK 6: Lines 495-535 ---
   495|     ... on MissingFieldConfigError {
   496|       field {
   497|         name
   498|       }
   499|     }
   500|     ... on MissingFieldsConfigError {
   501|       fields {
   502|         name
   503|       }
   504|     }
   505|     ... on FieldNotDefinedConfigError {
   506|       fieldName
   507|     }
   508|     ... on FieldsNotDefinedConfigError {
   509|       fieldNames
   510|     }
   511|   }
   512|   ${PYTHON_ERROR_FRAGMENT}
   513| `;
   514| const SectionTitle = styled.div`
   515|   color: ${colorTextLight()};
   516|   text-transform: uppercase;
   517|   font-size: 12px;
   518|   margin-bottom: 8px;
   519| `;
   520| const Section = styled.div`
   521|   margin-top: 14px;
   522|   margin-left: 10px;
   523| `;
   524| const ItemSet = styled.div`
   525|   display: flex;
   526|   flex-direction: row;
   527|   flex-wrap: wrap;
   528|   gap: 4px;
   529| `;
   530| const ItemsEmptyNotice = styled.div`
   531|   font-size: 13px;
   532|   padding-top: 7px;
   533|   padding-bottom: 7px;
   534| `;
   535| const ErrorListContainer = styled.div`

# --- HUNK 7: Lines 540-616 ---
   540| const ErrorRowContainer = styled.div<{hoverable: boolean}>`
   541|   text-align: left;
   542|   font-size: 13px;
   543|   white-space: pre-wrap;
   544|   word-break: break-word;
   545|   font-family: ${FontFamily.monospace};
   546|   cursor: pointer;
   547|   display: flex;
   548|   flex-direction: row;
   549|   align-items: flex-start;
   550|   border-bottom: 1px solid #ccc;
   551|   padding: 8px;
   552|   margin: 8px 12px 0 -8px;
   553|   &:last-child {
   554|     border-bottom: 0;
   555|     margin-bottom: 15px;
   556|   }
   557|   ${({hoverable}) =>
   558|     hoverable &&
   559|     `&:hover {
   560|       background: ${colorBackgroundLight()};
   561|     }
   562|   `}
   563| `;
   564| const RuntimeAndResourcesSection = styled.div`
   565|   display: flex;
   566|   gap: 12px;
   567|   @media (max-width: 800px) {
   568|     flex-direction: column;
   569|   }
   570| `;
   571| const ErrorRow = ({
   572|   error,
   573|   onHighlight,
   574| }: {
   575|   error: ValidationError | React.ReactNode;
   576|   onHighlight: (path: string[]) => void;
   577| }) => {
   578|   let message: React.ReactNode = null;
   579|   let target: ValidationError | null = null;
   580|   if (isValidationError(error)) {
   581|     message = error.message;
   582|     target = error;
   583|   } else {
   584|     message = error;
   585|   }
   586|   let displayed = message;
   587|   if (typeof message === 'string' && message.length > 400) {
   588|     displayed = truncateErrorMessage(message);
   589|   }
   590|   return (
   591|     <ErrorRowContainer
   592|       hoverable={!!target}
   593|       onClick={() => target && onHighlight(errorStackToYamlPath(target.stack.entries))}
   594|     >
   595|       <div style={{paddingRight: 4}}>
   596|         <Icon name="error" color={colorAccentRed()} />
   597|       </div>
   598|       <div>
   599|         {displayed}
   600|         {displayed !== message && (
   601|           <>
   602|             &nbsp;
   603|             <ButtonLink
   604|               onClick={() =>
   605|                 showCustomAlert({
   606|                   body: <div style={{whiteSpace: 'pre-wrap'}}>{message}</div>,
   607|                 })
   608|               }
   609|             >
   610|               View all
   611|             </ButtonLink>
   612|           </>
   613|         )}
   614|       </div>
   615|     </ErrorRowContainer>
   616|   );


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/launchpad/SessionSettingsBar.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-16 ---
     1| import {
     2|   colorAccentReversed,
     3|   colorBackgroundDefault,
     4|   colorBorderDefault,
     5| } from '@dagster-io/ui-components';
     6| import styled from 'styled-components';
     7| export const SessionSettingsBar = styled.div`
     8|   color: ${colorAccentReversed()};
     9|   display: flex;
    10|   position: relative;
    11|   border-bottom: 1px solid ${colorBorderDefault()};
    12|   background: ${colorBackgroundDefault()};
    13|   align-items: center;
    14|   height: 47px;
    15|   padding: 8px 10px;
    16| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/metadata/MetadataEntry.tsx
# Total hunks: 5
# ====================================================================
# --- HUNK 1: Lines 1-40 ---
     1| import {gql} from '@apollo/client';
     2| import {
     3|   Box,
     4|   Button,
     5|   DialogFooter,
     6|   Dialog,
     7|   Group,
     8|   Icon,
     9|   Tooltip,
    10|   FontFamily,
    11|   tryPrettyPrintJSON,
    12|   Table,
    13|   DialogBody,
    14|   CaptionMono,
    15|   colorKeylineDefault,
    16|   colorAccentGray,
    17|   colorBackgroundLight,
    18|   colorBackgroundDefault,
    19|   colorTextLight,
    20|   colorBackgroundLighter,
    21| } from '@dagster-io/ui-components';
    22| import * as React from 'react';
    23| import {Link} from 'react-router-dom';
    24| import styled from 'styled-components';
    25| import {copyValue} from '../app/DomUtils';
    26| import {assertUnreachable} from '../app/Util';
    27| import {displayNameForAssetKey} from '../asset-graph/Utils';
    28| import {assetDetailsPathForKey} from '../assets/assetDetailsPathForKey';
    29| import {TableMetadataEntry} from '../graphql/types';
    30| import {Markdown} from '../ui/Markdown';
    31| import {NotebookButton} from '../ui/NotebookButton';
    32| import {DUNDER_REPO_NAME, buildRepoAddress} from '../workspace/buildRepoAddress';
    33| import {workspacePathFromAddress} from '../workspace/workspacePath';
    34| import {TableSchema, TABLE_SCHEMA_FRAGMENT} from './TableSchema';
    35| import {MetadataEntryFragment} from './types/MetadataEntry.types';
    36| export const LogRowStructuredContentTable = ({
    37|   rows,
    38|   styles,
    39| }: {
    40|   rows: {label: string; item: JSX.Element}[];

# --- HUNK 2: Lines 79-168 ---
    79|     />
    80|   );
    81| };
    82| export const MetadataEntry = ({
    83|   entry,
    84|   expandSmallValues,
    85|   repoLocation,
    86| }: {
    87|   entry: MetadataEntryFragment;
    88|   expandSmallValues?: boolean;
    89|   repoLocation?: string;
    90| }) => {
    91|   switch (entry.__typename) {
    92|     case 'PathMetadataEntry':
    93|       return (
    94|         <Group direction="row" spacing={8} alignItems="center">
    95|           <MetadataEntryAction title="Copy to clipboard" onClick={(e) => copyValue(e, entry.path)}>
    96|             {entry.path}
    97|           </MetadataEntryAction>
    98|           <IconButton onClick={(e) => copyValue(e, entry.path)}>
    99|             <Icon name="assignment" color={colorAccentGray()} />
   100|           </IconButton>
   101|         </Group>
   102|       );
   103|     case 'JsonMetadataEntry':
   104|       return expandSmallValues && entry.jsonString.length < 1000 ? (
   105|         <div style={{whiteSpace: 'pre-wrap'}}>{tryPrettyPrintJSON(entry.jsonString)}</div>
   106|       ) : (
   107|         <MetadataEntryModalAction
   108|           label={entry.label}
   109|           copyContent={() => entry.jsonString}
   110|           content={() => (
   111|             <Box
   112|               background={colorBackgroundLight()}
   113|               margin={{bottom: 12}}
   114|               padding={24}
   115|               border="bottom"
   116|               style={{whiteSpace: 'pre-wrap', fontFamily: FontFamily.monospace, overflow: 'auto'}}
   117|             >
   118|               {tryPrettyPrintJSON(entry.jsonString)}
   119|             </Box>
   120|           )}
   121|         >
   122|           [Show JSON]
   123|         </MetadataEntryModalAction>
   124|       );
   125|     case 'UrlMetadataEntry':
   126|       return (
   127|         <Group direction="row" spacing={8} alignItems="center">
   128|           <MetadataEntryAction href={entry.url} title="Open in a new tab" target="_blank">
   129|             {entry.url}
   130|           </MetadataEntryAction>
   131|           <a href={entry.url} target="_blank" rel="noreferrer">
   132|             <Icon name="link" color={colorAccentGray()} />
   133|           </a>
   134|         </Group>
   135|       );
   136|     case 'TextMetadataEntry':
   137|       return <>{entry.text}</>;
   138|     case 'MarkdownMetadataEntry':
   139|       return expandSmallValues && entry.mdStr.length < 1000 ? (
   140|         <Markdown>{entry.mdStr}</Markdown>
   141|       ) : (
   142|         <MetadataEntryModalAction
   143|           label={entry.label}
   144|           copyContent={() => entry.mdStr}
   145|           content={() => (
   146|             <Box
   147|               padding={{vertical: 16, horizontal: 20}}
   148|               background={colorBackgroundDefault()}
   149|               style={{overflow: 'auto'}}
   150|               margin={{bottom: 12}}
   151|             >
   152|               <Markdown>{entry.mdStr}</Markdown>
   153|             </Box>
   154|           )}
   155|         >
   156|           [Show Markdown]
   157|         </MetadataEntryModalAction>
   158|       );
   159|     case 'PythonArtifactMetadataEntry':
   160|       return (
   161|         <PythonArtifactLink
   162|           name={entry.name}
   163|           module={entry.module}
   164|           description={entry.description || ''}
   165|         />
   166|       );
   167|     case 'FloatMetadataEntry':
   168|       return <>{entry.floatValue}</>;

# --- HUNK 3: Lines 177-254 ---
   177|     case 'AssetMetadataEntry':
   178|       return (
   179|         <MetadataEntryLink to={assetDetailsPathForKey(entry.assetKey)}>
   180|           {displayNameForAssetKey(entry.assetKey)}
   181|         </MetadataEntryLink>
   182|       );
   183|     case 'JobMetadataEntry':
   184|       const repositoryName = entry.repositoryName || DUNDER_REPO_NAME;
   185|       const workspacePath = workspacePathFromAddress(
   186|         buildRepoAddress(repositoryName, entry.locationName),
   187|         `/jobs/${entry.jobName}`,
   188|       );
   189|       return (
   190|         <Box
   191|           flex={{
   192|             direction: 'row',
   193|             gap: 8,
   194|           }}
   195|           style={{maxWidth: '100%'}}
   196|         >
   197|           <Icon name="job" color={colorAccentGray()} />
   198|           <MetadataEntryLink to={workspacePath}>{entry.jobName}</MetadataEntryLink>
   199|         </Box>
   200|       );
   201|     case 'TableMetadataEntry':
   202|       return <TableMetadataEntryComponent entry={entry} />;
   203|     case 'TableSchemaMetadataEntry':
   204|       return expandSmallValues && entry.schema.columns.length < 5 ? (
   205|         <TableSchema schema={entry.schema} />
   206|       ) : (
   207|         <MetadataEntryModalAction
   208|           label={entry.label}
   209|           copyContent={() => JSON.stringify(entry.schema, null, 2)}
   210|           content={() => (
   211|             <Box
   212|               padding={{vertical: 16, horizontal: 20}}
   213|               background={colorBackgroundDefault()}
   214|               style={{overflow: 'auto'}}
   215|               margin={{bottom: 12}}
   216|             >
   217|               <TableSchema schema={entry.schema} />
   218|             </Box>
   219|           )}
   220|         >
   221|           [Show Table Schema]
   222|         </MetadataEntryModalAction>
   223|       );
   224|     case 'NotebookMetadataEntry':
   225|       if (repoLocation) {
   226|         return <NotebookButton path={entry.path} repoLocation={repoLocation} />;
   227|       }
   228|       return (
   229|         <Group direction="row" spacing={8} alignItems="center">
   230|           <MetadataEntryAction title="Copy to clipboard" onClick={(e) => copyValue(e, entry.path)}>
   231|             {entry.path}
   232|           </MetadataEntryAction>
   233|           <IconButton onClick={(e) => copyValue(e, entry.path)}>
   234|             <Icon name="assignment" color={colorAccentGray()} />
   235|           </IconButton>
   236|         </Group>
   237|       );
   238|     default:
   239|       return assertUnreachable(entry);
   240|   }
   241| };
   242| export const METADATA_ENTRY_FRAGMENT = gql`
   243|   fragment MetadataEntryFragment on MetadataEntry {
   244|     label
   245|     description
   246|     ... on PathMetadataEntry {
   247|       path
   248|     }
   249|     ... on NotebookMetadataEntry {
   250|       path
   251|     }
   252|     ... on JsonMetadataEntry {
   253|       jsonString
   254|     }

# --- HUNK 4: Lines 367-407 ---
   367|     </>
   368|   );
   369| };
   370| export const TableMetadataEntryComponent = ({entry}: {entry: TableMetadataEntry}) => {
   371|   const [showSchema, setShowSchema] = React.useState(false);
   372|   const schema = entry.table.schema;
   373|   const invalidRecords: string[] = [];
   374|   const records = entry.table.records
   375|     .map((record) => {
   376|       try {
   377|         return JSON.parse(record);
   378|       } catch (e) {
   379|         invalidRecords.push(record);
   380|         return null;
   381|       }
   382|     })
   383|     .filter((record): record is Record<string, any> => record !== null);
   384|   return (
   385|     <Box flex={{direction: 'column', gap: 8}}>
   386|       <MetadataEntryAction onClick={() => setShowSchema(true)}>Show schema</MetadataEntryAction>
   387|       <Table style={{borderRight: `1px solid ${colorKeylineDefault()}`}}>
   388|         <thead>
   389|           <tr>
   390|             {schema.columns.map((column) => (
   391|               <th key={column.name}>{column.name}</th>
   392|             ))}
   393|           </tr>
   394|         </thead>
   395|         <tbody>
   396|           {records.map((record, idx) => (
   397|             <tr key={idx}>
   398|               {schema.columns.map((column) => (
   399|                 <td key={column.name}>{record[column.name]?.toString()}</td>
   400|               ))}
   401|             </tr>
   402|           ))}
   403|           {invalidRecords.map((record, ii) => (
   404|             <tr key={`invalid-${ii}`}>
   405|               <td colSpan={schema.columns.length}>
   406|                 <Box flex={{direction: 'row', gap: 4, alignItems: 'center'}}>
   407|                   <Icon name="warning" />

# --- HUNK 5: Lines 442-475 ---
   442|   );
   443| };
   444| const MetadataEntryAction = styled.a`
   445|   text-decoration: underline;
   446|   color: inherit;
   447|   &:hover {
   448|     color: inherit;
   449|   }
   450| `;
   451| export const MetadataEntryLink = styled(Link)`
   452|   text-decoration: underline;
   453|   color: inherit;
   454|   &:hover {
   455|     color: inherit;
   456|   }
   457| `;
   458| const StructuredContentTable = styled.table`
   459|   width: 100%;
   460|   padding: 0;
   461|   margin-top: 4px;
   462|   border-top: 1px solid ${colorKeylineDefault()};
   463|   border-left: 1px solid ${colorKeylineDefault()};
   464|   background: ${colorBackgroundLighter()};
   465|   td:first-child {
   466|     color: ${colorTextLight()};
   467|   }
   468|   &&& tbody > tr > td {
   469|     padding: 4px 8px;
   470|     border-bottom: 1px solid ${colorKeylineDefault()};
   471|     border-right: 1px solid ${colorKeylineDefault()};
   472|     vertical-align: top;
   473|     box-shadow: none !important;
   474|   }
   475| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/metadata/TableSchema.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-22 ---
     1| import {gql} from '@apollo/client';
     2| import {Box, Tag, Tooltip, colorKeylineDefault} from '@dagster-io/ui-components';
     3| import {Spacing} from '@dagster-io/ui-components/src/components/types';
     4| import * as React from 'react';
     5| import styled from 'styled-components';
     6| import {TableSchemaFragment, ConstraintsForTableColumnFragment} from './types/TableSchema.types';
     7| type ITableSchema = TableSchemaFragment;
     8| type ColumnConstraints = ConstraintsForTableColumnFragment;
     9| const MAX_CONSTRAINT_TAG_CHARS = 30;
    10| interface ITableSchemaProps {
    11|   schema: ITableSchema;
    12|   itemHorizontalPadding?: Spacing;
    13| }
    14| export const TableSchema = ({schema, itemHorizontalPadding}: ITableSchemaProps) => {
    15|   const multiColumnConstraints = schema.constraints?.other || [];
    16|   return (
    17|     <div>
    18|       {multiColumnConstraints.length > 0 && (
    19|         <Box
    20|           flex={{
    21|             wrap: 'wrap',
    22|             gap: 4,

# --- HUNK 2: Lines 61-101 ---
    61|   return (
    62|     <div className={className}>
    63|       <Box flex={{wrap: 'wrap', gap: 4, alignItems: 'center'}}>
    64|         <ColumnName>{name}</ColumnName>
    65|         <TypeTag type={type} />
    66|         {!constraints.nullable && NonNullableTag}
    67|         {constraints.unique && UniqueTag}
    68|         {constraints.other.map((constraint, i) => (
    69|           <ArbitraryConstraintTag key={i} constraint={constraint} />
    70|         ))}
    71|       </Box>
    72|       {description && <Box>{description}</Box>}
    73|     </div>
    74|   );
    75| };
    76| const ColumnItem = styled(_ColumnItem)`
    77|   display: flex;
    78|   flex-direction: column;
    79|   gap: 4px;
    80|   padding: 12px ${(props) => props.horizontalPadding}px;
    81|   border-top: 1px solid ${colorKeylineDefault()};
    82|   :first-child {
    83|     border-top: none;
    84|   }
    85|   font-size: 12px;
    86| `;
    87| const ColumnName = styled.div`
    88|   font-weight: 600;
    89|   padding-right: 4px;
    90| `;
    91| const TypeTag = ({type}: {type: string}) => <Tag intent="none">{type}</Tag>;
    92| const NonNullableTag = <Tag intent="primary">non-nullable</Tag>;
    93| const UniqueTag = <Tag intent="primary">unique</Tag>;
    94| const ArbitraryConstraintTag = ({constraint}: {constraint: string}) => {
    95|   if (constraint.length > MAX_CONSTRAINT_TAG_CHARS) {
    96|     const content = constraint.substring(0, MAX_CONSTRAINT_TAG_CHARS - 3) + '...';
    97|     return (
    98|       <Tooltip content={<div>{constraint}</div>}>
    99|         <Tag intent="primary">{content}</Tag>
   100|       </Tooltip>
   101|     );


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/nav/DeploymentStatusIcon.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-42 ---
     1| import {
     2|   Box,
     3|   Icon,
     4|   Spinner,
     5|   Tooltip,
     6|   colorAccentGray,
     7|   colorAccentYellow,
     8| } from '@dagster-io/ui-components';
     9| import * as React from 'react';
    10| import {DeploymentStatusContext} from '../instance/DeploymentStatusProvider';
    11| import {WarningTooltip} from './WarningTooltip';
    12| export const DeploymentStatusIcon = React.memo(() => {
    13|   return <CombinedStatusIcon />;
    14| });
    15| const CombinedStatusIcon = React.memo(() => {
    16|   const {codeLocations, daemons} = React.useContext(DeploymentStatusContext);
    17|   if (codeLocations?.type === 'spinner') {
    18|     return (
    19|       <Tooltip content={codeLocations.content} placement="bottom">
    20|         <Spinner purpose="body-text" fillColor={colorAccentGray()} />
    21|       </Tooltip>
    22|     );
    23|   }
    24|   const anyWarning = daemons?.type === 'warning' || codeLocations?.type === 'warning';
    25|   if (anyWarning) {
    26|     return (
    27|       <WarningTooltip
    28|         content={
    29|           <Box flex={{direction: 'column', gap: 4}}>
    30|             {daemons?.content}
    31|             {codeLocations?.content}
    32|           </Box>
    33|         }
    34|         position="bottom"
    35|         modifiers={{offset: {enabled: true, options: {offset: [0, 28]}}}}
    36|       >
    37|         <Icon name="warning" color={colorAccentYellow()} />
    38|       </WarningTooltip>
    39|     );
    40|   }
    41|   return null;
    42| });


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/nav/InstanceWarningIcon.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-19 ---
     1| import {Icon, colorAccentYellow} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import {DeploymentStatusContext} from '../instance/DeploymentStatusProvider';
     4| import {WarningTooltip} from './WarningTooltip';
     5| export const InstanceWarningIcon = React.memo(() => {
     6|   const {daemons} = React.useContext(DeploymentStatusContext);
     7|   if (!daemons) {
     8|     return null;
     9|   }
    10|   return (
    11|     <WarningTooltip
    12|       content={daemons.content}
    13|       position="bottom"
    14|       modifiers={{offset: {enabled: true, options: {offset: [0, 28]}}}}
    15|     >
    16|       <Icon name="warning" color={colorAccentYellow()} />
    17|     </WarningTooltip>
    18|   );
    19| });


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/nav/JobMetadata.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-29 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {
     3|   Box,
     4|   Button,
     5|   ButtonLink,
     6|   DialogFooter,
     7|   Dialog,
     8|   Tag,
     9|   colorLinkDefault,
    10| } from '@dagster-io/ui-components';
    11| import uniq from 'lodash/uniq';
    12| import * as React from 'react';
    13| import {Link} from 'react-router-dom';
    14| import {tokenForAssetKey} from '../asset-graph/Utils';
    15| import {AutomaterializeDaemonStatusTag} from '../assets/AutomaterializeDaemonStatusTag';
    16| import {DagsterTag} from '../runs/RunTag';
    17| import {RUN_TIME_FRAGMENT} from '../runs/RunUtils';
    18| import {SCHEDULE_SWITCH_FRAGMENT} from '../schedules/ScheduleSwitch';
    19| import {SENSOR_SWITCH_FRAGMENT} from '../sensors/SensorSwitch';
    20| import {repoAddressAsTag} from '../workspace/repoAddressAsString';
    21| import {RepoAddress} from '../workspace/types';
    22| import {LatestRunTag} from './LatestRunTag';
    23| import {ScheduleOrSensorTag} from './ScheduleOrSensorTag';
    24| import {
    25|   JobMetadataAssetNodeFragment,
    26|   JobMetadataFragment,
    27|   JobMetadataQuery,
    28|   JobMetadataQueryVariables,
    29|   RunMetadataFragment,

# --- HUNK 2: Lines 123-163 ---
   123|     metadata.runsForAssetScan.flatMap((r) => r.assets.map((a) => tokenForAssetKey(a.key))),
   124|   );
   125| }
   126| const RelatedAssetsTag = ({relatedAssets}: {relatedAssets: string[]}) => {
   127|   const [open, setOpen] = React.useState(false);
   128|   if (relatedAssets.length === 0) {
   129|     return null;
   130|   }
   131|   if (relatedAssets.length === 1) {
   132|     const key = relatedAssets[0];
   133|     return (
   134|       <Tag icon="asset">
   135|         Asset: <Link to={`/assets/${key}`}>{key}</Link>
   136|       </Tag>
   137|     );
   138|   }
   139|   return (
   140|     <>
   141|       <Tag icon="asset">
   142|         <ButtonLink
   143|           color={colorLinkDefault()}
   144|           onClick={() => setOpen(true)}
   145|         >{`View ${relatedAssets.length} assets`}</ButtonLink>
   146|       </Tag>
   147|       <Dialog
   148|         title="Related assets"
   149|         canOutsideClickClose
   150|         canEscapeKeyClose
   151|         isOpen={open}
   152|         onClose={() => setOpen(false)}
   153|         style={{maxWidth: '80%', minWidth: '500px', width: 'auto'}}
   154|       >
   155|         {relatedAssets.map((key, ii) => (
   156|           <Box
   157|             key={key}
   158|             padding={{vertical: 12, horizontal: 20}}
   159|             border={ii < relatedAssets.length - 1 ? 'bottom' : null}
   160|           >
   161|             <Link key={key} to={`/assets/${key}`} style={{wordBreak: 'break-word'}}>
   162|               {key}
   163|             </Link>


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/nav/LeftNav.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-35 ---
     1| import {colorBackgroundDefault, colorKeylineDefault} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| import {LayoutContext} from '../app/LayoutProvider';
     5| import {LeftNavRepositorySection} from './LeftNavRepositorySection';
     6| export const LeftNav = () => {
     7|   const {nav} = React.useContext(LayoutContext);
     8|   return (
     9|     <LeftNavContainer $open={nav.isOpen} $smallScreen={nav.isSmallScreen}>
    10|       <LeftNavRepositorySection />
    11|     </LeftNavContainer>
    12|   );
    13| };
    14| export const LEFT_NAV_WIDTH = 332;
    15| const LeftNavContainer = styled.div<{$open: boolean; $smallScreen: boolean}>`
    16|   position: fixed;
    17|   z-index: 2;
    18|   top: 64px;
    19|   bottom: 0;
    20|   left: 0;
    21|   width: ${LEFT_NAV_WIDTH}px;
    22|   display: ${({$open, $smallScreen}) => ($open || $smallScreen ? 'flex' : 'none')};
    23|   flex-shrink: 0;
    24|   flex-direction: column;
    25|   justify-content: start;
    26|   background: ${colorBackgroundDefault()};
    27|   box-shadow: 1px 0px 0px ${colorKeylineDefault()};
    28|   ${(p) =>
    29|     p.$smallScreen
    30|       ? `
    31|         transform: translateX(${p.$open ? '0' : `-${LEFT_NAV_WIDTH}px`});
    32|         transition: transform 150ms ease-in-out;
    33|       `
    34|       : ``}
    35| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/nav/LeftNavItem.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-28 ---
     1| import {
     2|   Icon,
     3|   Tooltip,
     4|   colorAccentBlue,
     5|   colorAccentGray,
     6|   colorAccentGreen,
     7|   colorTextDefault,
     8| } from '@dagster-io/ui-components';
     9| import * as React from 'react';
    10| import {Link} from 'react-router-dom';
    11| import styled from 'styled-components';
    12| import {InstigationStatus} from '../graphql/types';
    13| import {humanCronString} from '../schedules/humanCronString';
    14| import {workspacePathFromAddress} from '../workspace/workspacePath';
    15| import {LeftNavItemType} from './LeftNavItemType';
    16| import {Item} from './RepositoryContentList';
    17| import {ScheduleAndSensorDialog} from './ScheduleAndSensorDialog';
    18| interface LeftNavItemProps {
    19|   active: boolean;
    20|   item: LeftNavItemType;
    21| }
    22| export const LeftNavItem = React.forwardRef(
    23|   (props: LeftNavItemProps, ref: React.ForwardedRef<HTMLDivElement>) => {
    24|     const {active, item} = props;
    25|     const {label, leftIcon, path, repoAddress, schedules, sensors} = item;
    26|     const [showDialog, setShowDialog] = React.useState(false);
    27|     const rightIcon = () => {
    28|       const scheduleCount = schedules.length;

# --- HUNK 2: Lines 53-129 ---
    53|               <div>
    54|                 Schedule:{' '}
    55|                 <strong>{humanCronString(cronSchedule, executionTimezone || 'UTC')}</strong>
    56|               </div>
    57|             );
    58|           }
    59|           return `${scheduleCount} schedules`;
    60|         }
    61|         return sensorCount === 1 ? (
    62|           <div>
    63|             Sensor: <strong>{sensors[0]!.name}</strong>
    64|           </div>
    65|         ) : (
    66|           `${sensorCount} sensors`
    67|         );
    68|       };
    69|       const link = () => {
    70|         const icon = (
    71|           <Icon
    72|             name={whichIcon}
    73|             color={status() === InstigationStatus.RUNNING ? colorAccentGreen() : colorAccentGray()}
    74|           />
    75|         );
    76|         if (needsDialog) {
    77|           return (
    78|             <SensorScheduleDialogButton onClick={() => setShowDialog(true)}>
    79|               {icon}
    80|             </SensorScheduleDialogButton>
    81|           );
    82|         }
    83|         const path = scheduleCount
    84|           ? `/schedules/${schedules[0]!.name}`
    85|           : sensorCount
    86|           ? `/sensors/${sensors[0]!.name}`
    87|           : null;
    88|         return path ? <Link to={workspacePathFromAddress(repoAddress, path)}>{icon}</Link> : null;
    89|       };
    90|       return (
    91|         <>
    92|           <IconWithTooltip content={tooltipContent()}>{link()}</IconWithTooltip>
    93|           {needsDialog ? (
    94|             <ScheduleAndSensorDialog
    95|               isOpen={showDialog}
    96|               onClose={() => setShowDialog(false)}
    97|               repoAddress={repoAddress}
    98|               schedules={schedules}
    99|               sensors={sensors}
   100|               showSwitch
   101|             />
   102|           ) : null}
   103|         </>
   104|       );
   105|     };
   106|     return (
   107|       <ItemContainer ref={ref}>
   108|         <Item $active={active} to={path}>
   109|           <Icon name={leftIcon} color={active ? colorAccentBlue() : colorTextDefault()} />
   110|           {label}
   111|         </Item>
   112|         {rightIcon()}
   113|       </ItemContainer>
   114|     );
   115|   },
   116| );
   117| const SensorScheduleDialogButton = styled.button`
   118|   background: transparent;
   119|   padding: 0;
   120|   margin: 0;
   121|   border: 0;
   122|   cursor: pointer;
   123|   :focus,
   124|   :active,
   125|   :hover {
   126|     outline: none;
   127|   }
   128| `;
   129| const IconWithTooltip = styled(Tooltip)`


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/nav/LeftNavRepositorySection.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {Body, Box, colorBackgroundLight, colorTextLighter} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| import {SectionedLeftNav} from '../ui/SectionedLeftNav';
     5| import {DagsterRepoOption, WorkspaceContext} from '../workspace/WorkspaceContext';
     6| import {RepoAddress} from '../workspace/types';
     7| import {RepoNavItem} from './RepoNavItem';
     8| import {RepositoryLocationStateObserver} from './RepositoryLocationStateObserver';
     9| const LoadedRepositorySection = ({
    10|   allRepos,
    11|   visibleRepos,
    12|   toggleVisible,
    13| }: {
    14|   allRepos: DagsterRepoOption[];
    15|   visibleRepos: DagsterRepoOption[];
    16|   toggleVisible: (repoAddresses: RepoAddress[]) => void;
    17| }) => {
    18|   const listContent = () => {
    19|     if (visibleRepos.length) {
    20|       return (
    21|         <div style={{overflow: 'hidden'}}>

# --- HUNK 2: Lines 34-84 ---
    34|       );
    35|     }
    36|     return (
    37|       <EmptyState>
    38|         <Box flex={{direction: 'column', gap: 8}} padding={{top: 12}}>
    39|           <span style={{fontSize: '16px', fontWeight: 500}}>No definitions</span>
    40|           <Body>When you add a code location, your definitions will appear here</Body>
    41|         </Box>
    42|       </EmptyState>
    43|     );
    44|   };
    45|   return (
    46|     <Container>
    47|       <ListContainer>{listContent()}</ListContainer>
    48|       <RepositoryLocationStateObserver />
    49|       <RepoNavItem allRepos={allRepos} selected={visibleRepos} onToggle={toggleVisible} />
    50|     </Container>
    51|   );
    52| };
    53| const Container = styled.div`
    54|   background: ${colorBackgroundLight()};
    55|   display: flex;
    56|   flex: 1;
    57|   overflow: none;
    58|   flex-direction: column;
    59|   min-height: 0;
    60| `;
    61| const ListContainer = styled.div`
    62|   display: flex;
    63|   flex: 1;
    64|   flex-direction: column;
    65|   min-height: 0;
    66| `;
    67| const EmptyState = styled.div`
    68|   color: ${colorTextLighter()};
    69|   line-height: 20px;
    70|   padding: 6px 24px 0;
    71| `;
    72| export const LeftNavRepositorySection = React.memo(() => {
    73|   const {allRepos, loading, visibleRepos, toggleVisible} = React.useContext(WorkspaceContext);
    74|   if (loading) {
    75|     return <div style={{flex: 1}} />;
    76|   }
    77|   return (
    78|     <LoadedRepositorySection
    79|       allRepos={allRepos}
    80|       visibleRepos={visibleRepos}
    81|       toggleVisible={toggleVisible}
    82|     />
    83|   );
    84| });


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/nav/RepoNavItem.tsx
# Total hunks: 4
# ====================================================================
# --- HUNK 1: Lines 1-78 ---
     1| import {
     2|   Box,
     3|   Button,
     4|   DialogFooter,
     5|   DialogHeader,
     6|   Dialog,
     7|   Group,
     8|   Icon,
     9|   IconWrapper,
    10|   Spinner,
    11|   Tooltip,
    12|   colorTextLighter,
    13|   colorBackgroundLighter,
    14|   colorTextDisabled,
    15|   colorTextLight,
    16|   colorTextDefault,
    17|   colorAccentBlue,
    18| } from '@dagster-io/ui-components';
    19| import * as React from 'react';
    20| import {Link} from 'react-router-dom';
    21| import styled from 'styled-components';
    22| import {ShortcutHandler} from '../app/ShortcutHandler';
    23| import {buildRepoAddress, DUNDER_REPO_NAME} from '../workspace/buildRepoAddress';
    24| import {repoAddressAsHumanString} from '../workspace/repoAddressAsString';
    25| import {RepoAddress} from '../workspace/types';
    26| import {workspacePathFromAddress} from '../workspace/workspacePath';
    27| import {
    28|   NO_RELOAD_PERMISSION_TEXT,
    29|   ReloadRepositoryLocationButton,
    30| } from './ReloadRepositoryLocationButton';
    31| import {RepoSelector, RepoSelectorOption} from './RepoSelector';
    32| interface Props {
    33|   allRepos: RepoSelectorOption[];
    34|   selected: RepoSelectorOption[];
    35|   onToggle: (repoAddresses: RepoAddress[]) => void;
    36| }
    37| export const RepoNavItem = (props: Props) => {
    38|   const {allRepos, selected, onToggle} = props;
    39|   const [open, setOpen] = React.useState(false);
    40|   const summary = () => {
    41|     if (allRepos.length === 0) {
    42|       return <span style={{color: colorTextLighter()}}>No definitions</span>;
    43|     }
    44|     if (allRepos.length === 1) {
    45|       return <SingleRepoSummary repo={allRepos[0]!} onlyRepo />;
    46|     }
    47|     if (selected.length === 1) {
    48|       const selectedRepo = selected[0]!;
    49|       return <SingleRepoSummary repo={selectedRepo} onlyRepo={false} />;
    50|     }
    51|     return <span>{`${selected.length} of ${allRepos.length} shown`}</span>;
    52|   };
    53|   return (
    54|     <Box
    55|       background={colorBackgroundLighter()}
    56|       padding={{vertical: 12, left: 24, right: 20}}
    57|       border="top"
    58|     >
    59|       <Box flex={{justifyContent: 'space-between', alignItems: 'center'}}>
    60|         <Box flex={{direction: 'row', alignItems: 'center', gap: 8}}>
    61|           <Icon name="folder" />
    62|           <SummaryText>{summary()}</SummaryText>
    63|         </Box>
    64|         {allRepos.length > 1 ? (
    65|           <>
    66|             <Dialog
    67|               canOutsideClickClose
    68|               canEscapeKeyClose
    69|               isOpen={open}
    70|               style={{width: 'auto'}}
    71|               onClose={() => setOpen(false)}
    72|             >
    73|               <DialogHeader icon="repo" label="Definitions" />
    74|               <RepoSelector
    75|                 options={allRepos}
    76|                 onBrowse={() => setOpen(false)}
    77|                 onToggle={onToggle}
    78|                 selected={selected}

# --- HUNK 2: Lines 126-207 ---
   126|                     <Reloading>
   127|                       {reloading ? (
   128|                         'Reloading'
   129|                       ) : (
   130|                         <>
   131|                           Reload location <strong>{codeLocation}</strong>
   132|                         </>
   133|                       )}
   134|                     </Reloading>
   135|                   ) : (
   136|                     NO_RELOAD_PERMISSION_TEXT
   137|                   )
   138|                 }
   139|               >
   140|                 {reloading ? (
   141|                   <Spinner purpose="body-text" />
   142|                 ) : (
   143|                   <ReloadButton disabled={!hasReloadPermission} onClick={tryReload}>
   144|                     <Icon
   145|                       name="refresh"
   146|                       color={hasReloadPermission ? colorTextLight() : colorTextDisabled()}
   147|                     />
   148|                   </ReloadButton>
   149|                 )}
   150|               </ReloadTooltip>
   151|             </ShortcutHandler>
   152|           );
   153|         }}
   154|       />
   155|     </Group>
   156|   );
   157| };
   158| const SummaryText = styled.div`
   159|   user-select: none;
   160|   /* Line-height preserves container height even when no button is visible. */
   161|   line-height: 32px;
   162| `;
   163| const SingleRepoNameLink = styled(Link)<{$onlyRepo: boolean}>`
   164|   color: ${colorTextLight()};
   165|   display: block;
   166|   max-width: ${({$onlyRepo}) => ($onlyRepo ? '248px' : '192px')};
   167|   overflow-x: hidden;
   168|   text-overflow: ellipsis;
   169|   transition: color 100ms linear;
   170|   &&:hover {
   171|     color: ${colorTextDefault()};
   172|   }
   173|   &&:hover,
   174|   &&:active {
   175|     color: ${colorTextDefault()};
   176|     text-decoration: none;
   177|   }
   178| `;
   179| const ReloadTooltip = styled(Tooltip)`
   180|   && {
   181|     display: block;
   182|   }
   183| `;
   184| const ReloadButton = styled.button`
   185|   background-color: transparent;
   186|   border: none;
   187|   cursor: pointer;
   188|   display: block;
   189|   font-size: 12px;
   190|   padding: 8px;
   191|   margin: -8px;
   192|   :focus:not(:focus-visible) {
   193|     outline: none;
   194|   }
   195|   & ${IconWrapper} {
   196|     transition: color 0.1s ease-in-out;
   197|   }
   198|   :hover ${IconWrapper} {
   199|     color: ${colorAccentBlue()};
   200|   }
   201| `;
   202| const Reloading = styled.div`
   203|   overflow-x: hidden;
   204|   text-overflow: ellipsis;
   205|   max-width: 600px;
   206|   white-space: nowrap;
   207| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/nav/RepoSelector.tsx
# Total hunks: 4
# ====================================================================
# --- HUNK 1: Lines 1-35 ---
     1| import {
     2|   Box,
     3|   Checkbox,
     4|   Icon,
     5|   IconWrapper,
     6|   Spinner,
     7|   Table,
     8|   Caption,
     9|   Tooltip,
    10|   colorLinkDefault,
    11|   colorTextLight,
    12|   colorTextLighter,
    13|   colorAccentGray,
    14|   colorAccentGrayHover,
    15|   colorTextDisabled,
    16| } from '@dagster-io/ui-components';
    17| import * as React from 'react';
    18| import {Link} from 'react-router-dom';
    19| import styled from 'styled-components';
    20| import {buildRepoAddress} from '../workspace/buildRepoAddress';
    21| import {repoAddressAsHumanString} from '../workspace/repoAddressAsString';
    22| import {RepoAddress} from '../workspace/types';
    23| import {workspacePathFromAddress} from '../workspace/workspacePath';
    24| import {
    25|   NO_RELOAD_PERMISSION_TEXT,
    26|   ReloadRepositoryLocationButton,
    27| } from './ReloadRepositoryLocationButton';
    28| export interface RepoSelectorOption {
    29|   repositoryLocation: {name: string};
    30|   repository: {
    31|     name: string;
    32|     displayMetadata: {
    33|       key: string;
    34|       value: string;
    35|     }[];

# --- HUNK 2: Lines 74-114 ---
    74|             return (
    75|               <tr key={addressString}>
    76|                 <td>
    77|                   <Checkbox
    78|                     checked={checked}
    79|                     onChange={(e) => {
    80|                       if (e.target instanceof HTMLInputElement) {
    81|                         onToggle([repoAddress]);
    82|                       }
    83|                     }}
    84|                     id={`switch-${addressString}`}
    85|                   />
    86|                 </td>
    87|                 <td>
    88|                   <RepoLabel htmlFor={`switch-${addressString}`}>
    89|                     <Box flex={{direction: 'column', gap: 4}}>
    90|                       <RepoLocation>{addressString}</RepoLocation>
    91|                       <Box flex={{direction: 'column', gap: 2}}>
    92|                         {option.repository.displayMetadata.map(({key, value}) => (
    93|                           <Caption
    94|                             style={{color: colorTextLighter()}}
    95|                             key={key}
    96|                           >{`${key}: ${value}`}</Caption>
    97|                         ))}
    98|                       </Box>
    99|                     </Box>
   100|                   </RepoLabel>
   101|                 </td>
   102|                 <td>
   103|                   <Link to={workspacePathFromAddress(repoAddress)} onClick={() => onBrowse()}>
   104|                     Browse
   105|                   </Link>
   106|                 </td>
   107|                 <td>
   108|                   <ReloadButton repoAddress={repoAddress} />
   109|                 </td>
   110|               </tr>
   111|             );
   112|           })}
   113|         </tbody>
   114|       </Table>

# --- HUNK 3: Lines 117-198 ---
   117| };
   118| const RepoLabel = styled.label`
   119|   cursor: pointer;
   120|   display: block;
   121|   font-weight: 500;
   122|   overflow: hidden;
   123|   position: relative;
   124|   top: 1px;
   125|   transition: filter 50ms linear;
   126|   user-select: none;
   127|   white-space: nowrap;
   128|   :focus,
   129|   :active {
   130|     outline: none;
   131|   }
   132|   :hover {
   133|     filter: opacity(0.8);
   134|   }
   135| `;
   136| const RepoLocation = styled.div`
   137|   color: ${colorTextLight()};
   138| `;
   139| const ReloadButton = ({repoAddress}: {repoAddress: RepoAddress}) => {
   140|   return (
   141|     <ReloadRepositoryLocationButton
   142|       location={repoAddress.location}
   143|       ChildComponent={({codeLocation, tryReload, reloading, hasReloadPermission}) => {
   144|         const tooltipContent = () => {
   145|           if (!hasReloadPermission) {
   146|             return NO_RELOAD_PERMISSION_TEXT;
   147|           }
   148|           return reloading ? (
   149|             'Reloading'
   150|           ) : (
   151|             <>
   152|               Reload <strong>{codeLocation}</strong>
   153|             </>
   154|           );
   155|         };
   156|         return (
   157|           <Tooltip placement="right" content={tooltipContent()} useDisabledButtonTooltipFix>
   158|             <ReloadButtonInner disabled={!hasReloadPermission} onClick={tryReload}>
   159|               {reloading ? (
   160|                 <Spinner purpose="body-text" />
   161|               ) : (
   162|                 <Icon
   163|                   name="refresh"
   164|                   color={hasReloadPermission ? colorAccentGray() : colorAccentGrayHover()}
   165|                 />
   166|               )}
   167|             </ReloadButtonInner>
   168|           </Tooltip>
   169|         );
   170|       }}
   171|     />
   172|   );
   173| };
   174| const ReloadButtonInner = styled.button`
   175|   background: transparent;
   176|   border: 0;
   177|   cursor: pointer;
   178|   padding: 8px;
   179|   margin: -6px;
   180|   outline: none;
   181|   :disabled {
   182|     cursor: default;
   183|   }
   184|   :disabled ${IconWrapper} {
   185|     background-color: ${colorTextDisabled};
   186|     transition: background-color 100ms;
   187|   }
   188|   ${IconWrapper} {
   189|     background-color: ${colorTextLight()};
   190|     transition: background-color 100ms;
   191|   }
   192|   :hover:not(:disabled) ${IconWrapper} {
   193|     background-color: ${colorTextLighter()};
   194|   }
   195|   :focus ${IconWrapper} {
   196|     background-color: ${colorLinkDefault()};
   197|   }
   198| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/nav/RepositoryContentList.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-36 ---
     1| import {
     2|   colorBackgroundBlue,
     3|   colorBackgroundLighter,
     4|   colorBorderDefault,
     5|   colorTextBlue,
     6|   colorTextDefault,
     7| } from '@dagster-io/ui-components';
     8| import {Link} from 'react-router-dom';
     9| import styled from 'styled-components';
    10| export const Item = styled(Link)<{$active: boolean}>`
    11|   background-color: ${({$active}) => ($active ? colorBackgroundBlue() : 'transparent')};
    12|   border-radius: 8px;
    13|   font-size: 14px;
    14|   text-overflow: ellipsis;
    15|   overflow: hidden;
    16|   padding: 6px 12px;
    17|   display: flex;
    18|   gap: 6px;
    19|   align-items: center;
    20|   color: ${({$active}) => ($active ? colorTextBlue() : colorTextDefault())} !important;
    21|   user-select: none;
    22|   transition:
    23|     background 50ms linear,
    24|     color 50ms linear;
    25|   &:hover {
    26|     text-decoration: none;
    27|     background-color: ${({$active}) =>
    28|       $active ? colorBackgroundBlue() : colorBackgroundLighter()};
    29|   }
    30|   &:focus {
    31|     outline: 0;
    32|   }
    33|   &.focused {
    34|     border-left: 4px solid ${colorBorderDefault()};
    35|   }
    36| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/nav/RepositoryLink.tsx
# Total hunks: 4
# ====================================================================
# --- HUNK 1: Lines 1-104 ---
     1| import {
     2|   Box,
     3|   Icon,
     4|   IconWrapper,
     5|   MiddleTruncate,
     6|   Spinner,
     7|   Tooltip,
     8|   colorAccentBlue,
     9|   colorAccentGray,
    10|   colorAccentGrayHover,
    11| } from '@dagster-io/ui-components';
    12| import * as React from 'react';
    13| import {Link} from 'react-router-dom';
    14| import styled from 'styled-components';
    15| import {repoAddressAsHumanString} from '../workspace/repoAddressAsString';
    16| import {RepoAddress} from '../workspace/types';
    17| import {workspacePathFromAddress} from '../workspace/workspacePath';
    18| import {
    19|   NO_RELOAD_PERMISSION_TEXT,
    20|   ReloadRepositoryLocationButton,
    21| } from './ReloadRepositoryLocationButton';
    22| export const RepositoryLink = ({
    23|   repoAddress,
    24|   showIcon = false,
    25|   showRefresh = true,
    26| }: {
    27|   repoAddress: RepoAddress;
    28|   showIcon?: boolean;
    29|   showRefresh?: boolean;
    30| }) => {
    31|   const {location} = repoAddress;
    32|   const repoString = repoAddressAsHumanString(repoAddress);
    33|   return (
    34|     <Box flex={{display: 'inline-flex', direction: 'row', alignItems: 'center'}} title={repoString}>
    35|       {showIcon && <Icon name="folder" style={{marginRight: 8}} color={colorAccentGray()} />}
    36|       <RepositoryName to={workspacePathFromAddress(repoAddress)} style={{flex: 1}}>
    37|         <MiddleTruncate text={repoString} />
    38|       </RepositoryName>
    39|       {showRefresh ? (
    40|         <ReloadRepositoryLocationButton
    41|           location={location}
    42|           ChildComponent={({codeLocation, tryReload, reloading, hasReloadPermission}) => {
    43|             const tooltipContent = () => {
    44|               if (!hasReloadPermission) {
    45|                 return NO_RELOAD_PERMISSION_TEXT;
    46|               }
    47|               return reloading ? (
    48|                 'Reloading'
    49|               ) : (
    50|                 <>
    51|                   Reload location <strong>{codeLocation}</strong>
    52|                 </>
    53|               );
    54|             };
    55|             return (
    56|               <ReloadTooltip content={tooltipContent()}>
    57|                 {reloading ? (
    58|                   <Spinner purpose="body-text" />
    59|                 ) : (
    60|                   <StyledButton disabled={!hasReloadPermission} onClick={tryReload}>
    61|                     <Icon
    62|                       name="refresh"
    63|                       color={hasReloadPermission ? colorAccentGray() : colorAccentGrayHover()}
    64|                     />
    65|                   </StyledButton>
    66|                 )}
    67|               </ReloadTooltip>
    68|             );
    69|           }}
    70|         />
    71|       ) : null}
    72|     </Box>
    73|   );
    74| };
    75| export const RepositoryName = styled(Link)`
    76|   max-width: 280px;
    77| `;
    78| const ReloadTooltip = styled(Tooltip)`
    79|   margin-left: 4px;
    80|   && {
    81|     display: block;
    82|   }
    83| `;
    84| const StyledButton = styled.button`
    85|   background-color: transparent;
    86|   border: 0;
    87|   cursor: pointer;
    88|   display: block;
    89|   padding: 0;
    90|   margin: 0;
    91|   :disabled {
    92|     cursor: default;
    93|   }
    94|   :focus:not(:focus-visible) {
    95|     outline: none;
    96|   }
    97|   & ${IconWrapper} {
    98|     display: block;
    99|     transition: color 100ms linear;
   100|   }
   101|   :hover ${IconWrapper} {
   102|     color: ${colorAccentBlue()};
   103|   }
   104| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/nav/RepositoryLocationStateObserver.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-31 ---
     1| import {gql, useApolloClient, useSubscription} from '@apollo/client';
     2| import {
     3|   ButtonLink,
     4|   Group,
     5|   Icon,
     6|   Caption,
     7|   colorBackgroundLight,
     8|   colorAccentGray,
     9|   colorTextLight,
    10|   colorTextLighter,
    11| } from '@dagster-io/ui-components';
    12| import * as React from 'react';
    13| import {LocationStateChangeEventType} from '../graphql/types';
    14| import {WorkspaceContext} from '../workspace/WorkspaceContext';
    15| import {
    16|   LocationStateChangeSubscription,
    17|   LocationStateChangeSubscriptionVariables,
    18| } from './types/RepositoryLocationStateObserver.types';
    19| const LOCATION_STATE_CHANGE_SUBSCRIPTION = gql`
    20|   subscription LocationStateChangeSubscription {
    21|     locationStateChangeEvents {
    22|       event {
    23|         message
    24|         locationName
    25|         eventType
    26|         serverId
    27|       }
    28|     }
    29|   }
    30| `;
    31| export const RepositoryLocationStateObserver = () => {

# --- HUNK 2: Lines 49-97 ---
    49|             setUpdatedLocations((s) => s.filter((name) => name !== locationName));
    50|             return;
    51|           case LocationStateChangeEventType.LOCATION_UPDATED:
    52|             const matchingRepositoryLocation = locationEntries.find((n) => n.name === locationName);
    53|             if (
    54|               matchingRepositoryLocation &&
    55|               matchingRepositoryLocation.locationOrLoadError?.__typename === 'RepositoryLocation' &&
    56|               matchingRepositoryLocation.locationOrLoadError?.serverId !== serverId
    57|             ) {
    58|               setUpdatedLocations((s) => [...s, locationName]);
    59|             }
    60|             return;
    61|         }
    62|       },
    63|     },
    64|   );
    65|   if (!totalMessages) {
    66|     return null;
    67|   }
    68|   return (
    69|     <Group background={colorBackgroundLight()} direction="column" spacing={0}>
    70|       {updatedLocations.length > 0 ? (
    71|         <Group padding={{vertical: 8, horizontal: 12}} direction="row" spacing={8}>
    72|           <Icon name="warning" color={colorAccentGray()} />
    73|           <Caption color={colorTextLight()}>
    74|             {updatedLocations.length === 1
    75|               ? `Code location ${updatedLocations[0]} has been updated,` // Be specific when there's only one code location updated
    76|               : 'One or more code locations have been updated,'}
    77|             {' and new data is available. '}
    78|             <ButtonLink
    79|               color={{
    80|                 link: colorTextLight(),
    81|                 hover: colorTextLighter(),
    82|                 active: colorTextLighter(),
    83|               }}
    84|               underline="always"
    85|               onClick={() => {
    86|                 setUpdatedLocations([]);
    87|                 client.refetchQueries({include: 'active'});
    88|               }}
    89|             >
    90|               Update data
    91|             </ButtonLink>
    92|           </Caption>
    93|         </Group>
    94|       ) : null}
    95|     </Group>
    96|   );
    97| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/nav/ScheduleOrSensorTag.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-65 ---
     1| import {
     2|   Box,
     3|   ButtonLink,
     4|   Tag,
     5|   Tooltip,
     6|   FontFamily,
     7|   MiddleTruncate,
     8|   colorLinkDefault,
     9| } from '@dagster-io/ui-components';
    10| import * as React from 'react';
    11| import {Link} from 'react-router-dom';
    12| import {ScheduleSwitch} from '../schedules/ScheduleSwitch';
    13| import {humanCronString} from '../schedules/humanCronString';
    14| import {ScheduleSwitchFragment} from '../schedules/types/ScheduleSwitch.types';
    15| import {SensorSwitch} from '../sensors/SensorSwitch';
    16| import {SensorSwitchFragment} from '../sensors/types/SensorSwitch.types';
    17| import {RepoAddress} from '../workspace/types';
    18| import {workspacePathFromAddress} from '../workspace/workspacePath';
    19| import {ScheduleAndSensorDialog} from './ScheduleAndSensorDialog';
    20| export const ScheduleOrSensorTag = ({
    21|   schedules,
    22|   sensors,
    23|   repoAddress,
    24|   showSwitch = true,
    25| }: {
    26|   schedules: ScheduleSwitchFragment[];
    27|   sensors: SensorSwitchFragment[];
    28|   repoAddress: RepoAddress;
    29|   showSwitch?: boolean;
    30| }) => {
    31|   const [open, setOpen] = React.useState(false);
    32|   const scheduleCount = schedules.length;
    33|   const sensorCount = sensors.length;
    34|   if (scheduleCount > 1 || sensorCount > 1 || (scheduleCount && sensorCount)) {
    35|     const buttonText =
    36|       scheduleCount && sensorCount
    37|         ? `${scheduleCount + sensorCount} schedules/sensors`
    38|         : scheduleCount
    39|         ? `${scheduleCount} schedules`
    40|         : `${sensorCount} sensors`;
    41|     const icon = scheduleCount > 1 ? 'schedule' : 'sensors';
    42|     return (
    43|       <>
    44|         <Tag icon={icon}>
    45|           <ButtonLink onClick={() => setOpen(true)} color={colorLinkDefault()}>
    46|             {buttonText}
    47|           </ButtonLink>
    48|         </Tag>
    49|         <ScheduleAndSensorDialog
    50|           isOpen={open}
    51|           onClose={() => setOpen(false)}
    52|           repoAddress={repoAddress}
    53|           schedules={schedules}
    54|           sensors={sensors}
    55|           showSwitch={showSwitch}
    56|         />
    57|       </>
    58|     );
    59|   }
    60|   if (scheduleCount) {
    61|     return (
    62|       <MatchingSchedule
    63|         schedule={schedules[0]!}
    64|         repoAddress={repoAddress}
    65|         showSwitch={showSwitch}


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/nav/WorkspaceStatus.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-32 ---
     1| import {
     2|   Icon,
     3|   Tooltip,
     4|   Spinner,
     5|   colorAccentGray,
     6|   colorAccentYellow,
     7| } from '@dagster-io/ui-components';
     8| import * as React from 'react';
     9| import {DeploymentStatusContext} from '../instance/DeploymentStatusProvider';
    10| import {WarningTooltip} from './WarningTooltip';
    11| export const WorkspaceStatus = React.memo(({placeholder}: {placeholder: boolean}) => {
    12|   const {codeLocations} = React.useContext(DeploymentStatusContext);
    13|   if (!codeLocations) {
    14|     return placeholder ? <div style={{width: '16px'}} /> : null;
    15|   }
    16|   if (codeLocations.type === 'spinner') {
    17|     return (
    18|       <Tooltip content={codeLocations.content} placement="bottom">
    19|         <Spinner purpose="body-text" fillColor={colorAccentGray()} />
    20|       </Tooltip>
    21|     );
    22|   }
    23|   return (
    24|     <WarningTooltip
    25|       content={codeLocations.content}
    26|       position="bottom"
    27|       modifiers={{offset: {enabled: true, options: {offset: [0, 28]}}}}
    28|     >
    29|       <Icon name="warning" color={colorAccentYellow()} />
    30|     </WarningTooltip>
    31|   );
    32| });


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/nav/__stories__/RepoSelector.stories.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {Box, colorAccentPrimary} from '@dagster-io/ui-components';
     2| import {Meta} from '@storybook/react';
     3| import faker from 'faker';
     4| import * as React from 'react';
     5| import {RepoAddress} from '../../workspace/types';
     6| import {RepoSelector, RepoSelectorOption} from '../RepoSelector';
     7| export default {
     8|   title: 'RepoSelector',
     9|   component: RepoSelector,
    10| } as Meta;
    11| const OPTIONS: RepoSelectorOption[] = [
    12|   {
    13|     repositoryLocation: {
    14|       name: faker.random.words(2).toLowerCase().replace(/ /g, '-'),
    15|     },
    16|     repository: {
    17|       name: faker.random.word().toLowerCase(),
    18|       displayMetadata: [
    19|         {key: 'host', value: faker.random.word().toLowerCase()},
    20|         {key: 'port', value: faker.random.number(9999).toString()},
    21|       ],

# --- HUNK 2: Lines 123-147 ---
   123|   const onToggle = React.useCallback(
   124|     (addresses: RepoAddress[]) => {
   125|       addresses.forEach((address) => {
   126|         const option = OPTIONS.find(
   127|           (r) =>
   128|             r.repository.name === address.name && r.repositoryLocation.name === address.location,
   129|         );
   130|         if (!option) {
   131|           return;
   132|         }
   133|         if (selected.includes(option)) {
   134|           setSelected(selected.filter((o) => o !== option));
   135|         } else {
   136|           setSelected([...selected, option]);
   137|         }
   138|       });
   139|     },
   140|     [selected],
   141|   );
   142|   return (
   143|     <Box background={colorAccentPrimary()} padding={16}>
   144|       <RepoSelector options={OPTIONS} onBrowse={() => {}} onToggle={onToggle} selected={selected} />
   145|     </Box>
   146|   );
   147| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/nav/getLeftNavItemsForOption.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {colorBackgroundLight, colorTextDefault} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| import {isHiddenAssetGroupJob} from '../asset-graph/Utils';
     5| import {LegacyPipelineTag} from '../pipelines/LegacyPipelineTag';
     6| import {DagsterRepoOption} from '../workspace/WorkspaceContext';
     7| import {buildRepoAddress} from '../workspace/buildRepoAddress';
     8| import {workspacePathFromAddress} from '../workspace/workspacePath';
     9| import {LeftNavItemType} from './LeftNavItemType';
    10| export const getAssetGroupItemsForOption = (option: DagsterRepoOption) => {
    11|   const items: LeftNavItemType[] = [];
    12|   const {repository, repositoryLocation} = option;
    13|   const address = buildRepoAddress(repository.name, repositoryLocation.name);
    14|   for (const {groupName} of repository.assetGroups) {
    15|     items.push({
    16|       name: groupName || '',
    17|       leftIcon: 'asset_group',
    18|       isJob: false,
    19|       schedules: [],
    20|       sensors: [],
    21|       repoAddress: address,

# --- HUNK 2: Lines 84-126 ---
    84|       path: workspacePathFromAddress(address, `/${isJob ? 'jobs' : 'pipelines'}/${name}`),
    85|       repoAddress: address,
    86|       schedules: schedulesForJob,
    87|       sensors: sensorsForJob,
    88|     });
    89|   }
    90|   return items;
    91| };
    92| const Label = styled.div<{$hasIcon: boolean}>`
    93|   flex: 1;
    94|   min-width: 0;
    95|   display: flex;
    96|   flex-direction: row;
    97|   justify-content: flex-start;
    98|   align-items: center;
    99|   gap: 8px;
   100|   margin-right: ${({$hasIcon}) => ($hasIcon === true ? '20px' : '0px')};
   101|   white-space: nowrap;
   102| `;
   103| export const LabelTooltipStyles = JSON.stringify({
   104|   background: colorBackgroundLight(),
   105|   filter: `brightness(97%)`,
   106|   color: colorTextDefault(),
   107|   border: 'none',
   108|   borderRadius: 7,
   109|   overflow: 'hidden',
   110|   fontSize: 14,
   111|   padding: '5px 10px',
   112|   transform: 'translate(-10px,-5px)',
   113| } as React.CSSProperties);
   114| const TruncatingName = styled.div`
   115|   flex-shrink: 1;
   116|   min-width: 0;
   117|   overflow: hidden;
   118|   text-overflow: ellipsis;
   119| `;
   120| export const TruncatedTextWithFullTextOnHover = React.forwardRef(
   121|   (
   122|     {
   123|       text,
   124|       tooltipStyle,
   125|       tooltipText,
   126|       ...rest


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/nav/useCodeLocationsStatus.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-22 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {Box, ButtonLink, CoreColors} from '@dagster-io/ui-components';
     3| import * as React from 'react';
     4| import {useHistory} from 'react-router-dom';
     5| import styled from 'styled-components';
     6| import {showSharedToaster} from '../app/DomUtils';
     7| import {useQueryRefreshAtInterval} from '../app/QueryRefresh';
     8| import {RepositoryLocationLoadStatus} from '../graphql/types';
     9| import {StatusAndMessage} from '../instance/DeploymentStatusType';
    10| import {WorkspaceContext} from '../workspace/WorkspaceContext';
    11| import {
    12|   CodeLocationStatusQuery,
    13|   CodeLocationStatusQueryVariables,
    14| } from './types/useCodeLocationsStatus.types';
    15| type LocationStatusEntry = {
    16|   loadStatus: RepositoryLocationLoadStatus;
    17|   id: string;
    18|   name: string;
    19| };
    20| const POLL_INTERVAL = 5 * 1000;
    21| type EntriesById = Record<string, LocationStatusEntry>;
    22| export const useCodeLocationsStatus = (skip = false): StatusAndMessage | null => {

# --- HUNK 2: Lines 189-229 ---
   189|     };
   190|   }
   191|   const repoErrors = locationEntries.filter(
   192|     (locationEntry) => locationEntry.locationOrLoadError?.__typename === 'PythonError',
   193|   );
   194|   if (repoErrors.length) {
   195|     return {
   196|       type: 'warning',
   197|       content: (
   198|         <div style={{whiteSpace: 'nowrap'}}>{`${repoErrors.length} ${
   199|           repoErrors.length === 1 ? 'code location failed to load' : 'code locations failed to load'
   200|         }`}</div>
   201|       ),
   202|     };
   203|   }
   204|   return null;
   205| };
   206| const alreadyViewingCodeLocations = () => document.location.pathname.endsWith('/locations');
   207| const ViewCodeLocationsButton = ({onClick}: {onClick: () => void}) => {
   208|   return (
   209|     <ViewButton onClick={onClick} color={CoreColors.White}>
   210|       View
   211|     </ViewButton>
   212|   );
   213| };
   214| const ViewButton = styled(ButtonLink)`
   215|   white-space: nowrap;
   216| `;
   217| const CODE_LOCATION_STATUS_QUERY = gql`
   218|   query CodeLocationStatusQuery {
   219|     locationStatusesOrError {
   220|       ... on WorkspaceLocationStatusEntries {
   221|         entries {
   222|           id
   223|           name
   224|           loadStatus
   225|         }
   226|       }
   227|     }
   228|   }
   229| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/ops/OpTypeSignature.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-23 ---
     1| import {gql} from '@apollo/client';
     2| import {Code} from '@blueprintjs/core';
     3| import {FontFamily, colorBackgroundBlue} from '@dagster-io/ui-components';
     4| import * as React from 'react';
     5| import styled from 'styled-components';
     6| import {breakOnUnderscores} from '../app/Util';
     7| import {DAGSTER_TYPE_WITH_TOOLTIP_FRAGMENT, TypeWithTooltip} from '../typeexplorer/TypeWithTooltip';
     8| import {OpTypeSignatureFragment} from './types/OpTypeSignature.types';
     9| interface IOpTypeSignature {
    10|   definition: OpTypeSignatureFragment;
    11| }
    12| export const OpTypeSignature = (props: IOpTypeSignature) => {
    13|   const {inputDefinitions, outputDefinitions} = props.definition;
    14|   const inputSide = inputDefinitions.map((input, i) => (
    15|     <span key={i}>
    16|       {breakOnUnderscores(input.name)}: <TypeWithTooltip type={input.type} />
    17|       {i < inputDefinitions.length - 1 ? ', ' : ''}
    18|     </span>
    19|   ));
    20|   const outputSide = outputDefinitions.map((output, i) => (
    21|     <span key={i}>
    22|       {breakOnUnderscores(output.name)}: <TypeWithTooltip type={output.type} />
    23|       {i < outputDefinitions.length - 1 ? ', ' : ''}

# --- HUNK 2: Lines 31-58 ---
    31| };
    32| export const OP_TYPE_SIGNATURE_FRAGMENT = gql`
    33|   fragment OpTypeSignatureFragment on ISolidDefinition {
    34|     outputDefinitions {
    35|       name
    36|       type {
    37|         ...DagsterTypeWithTooltipFragment
    38|       }
    39|     }
    40|     inputDefinitions {
    41|       name
    42|       type {
    43|         ...DagsterTypeWithTooltipFragment
    44|       }
    45|     }
    46|   }
    47|   ${DAGSTER_TYPE_WITH_TOOLTIP_FRAGMENT}
    48| `;
    49| const TypeSignature = styled(Code)`
    50|   && {
    51|     background: ${colorBackgroundBlue()};
    52|     font-family: ${FontFamily.monospace};
    53|     font-size: 14px;
    54|     padding: 4px;
    55|     box-shadow: none;
    56|     color: black;
    57|   }
    58| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/ops/OpsRoot.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-36 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {
     3|   Box,
     4|   NonIdealState,
     5|   SplitPanelContainer,
     6|   SuggestionProvider,
     7|   TokenizingField,
     8|   TokenizingFieldValue,
     9|   stringFromValue,
    10|   tokenizedValuesFromString,
    11|   FontFamily,
    12|   colorKeylineDefault,
    13|   colorBackgroundLight,
    14|   colorBackgroundDefault,
    15|   colorAccentLime,
    16|   colorTextLight,
    17| } from '@dagster-io/ui-components';
    18| import qs from 'qs';
    19| import * as React from 'react';
    20| import {useHistory, useLocation, useParams} from 'react-router-dom';
    21| import {
    22|   AutoSizer as _AutoSizer,
    23|   CellMeasurer as _CellMeasurerer,
    24|   CellMeasurerCache,
    25|   List as _List,
    26| } from 'react-virtualized';
    27| import styled from 'styled-components';
    28| import {useTrackPageView} from '../app/analytics';
    29| import {useDocumentTitle} from '../hooks/useDocumentTitle';
    30| import {Loading} from '../ui/Loading';
    31| import {repoAddressToSelector} from '../workspace/repoAddressToSelector';
    32| import {RepoAddress} from '../workspace/types';
    33| import {workspacePathFromAddress} from '../workspace/workspacePath';
    34| import {OpDetailScrollContainer, UsedSolidDetails} from './OpDetailsRoot';
    35| import {OpTypeSignature, OP_TYPE_SIGNATURE_FRAGMENT} from './OpTypeSignature';
    36| import {OpsRootQuery, OpsRootQueryVariables, OpsRootUsedSolidFragment} from './types/OpsRoot.types';

# --- HUNK 2: Lines 303-349 ---
   303|         }
   304|       }
   305|     }
   306|   }
   307|   fragment OpsRootUsedSolid on UsedSolid {
   308|     definition {
   309|       name
   310|       ...OpTypeSignatureFragment
   311|     }
   312|     invocations {
   313|       pipeline {
   314|         id
   315|         isJob
   316|         name
   317|       }
   318|     }
   319|   }
   320|   ${OP_TYPE_SIGNATURE_FRAGMENT}
   321| `;
   322| const OpListItem = styled.div<{selected: boolean}>`
   323|   background: ${({selected}) => (selected ? colorBackgroundLight() : colorBackgroundDefault())};
   324|   box-shadow:
   325|     ${({selected}) => (selected ? colorAccentLime() : 'transparent')} 4px 0 0 inset,
   326|     ${colorKeylineDefault()} 0 -1px 0 inset;
   327|   color: ${colorTextLight()};
   328|   cursor: pointer;
   329|   font-size: 14px;
   330|   display: flex;
   331|   flex-direction: column;
   332|   padding: 12px 24px;
   333|   user-select: none;
   334|   & > code.bp4-code {
   335|     color: ${colorTextLight()};
   336|     background: transparent;
   337|     font-family: ${FontFamily.monospace};
   338|     padding: 5px 0 0 0;
   339|   }
   340| `;
   341| const OpName = styled.div`
   342|   flex: 1;
   343|   font-weight: 600;
   344| `;
   345| const OpListColumnContainer = styled.div`
   346|   display: flex;
   347|   flex-direction: column;
   348|   height: 100%;
   349| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/overview/OverviewAssetsRoot.tsx
# Total hunks: 6
# ====================================================================
# --- HUNK 1: Lines 1-35 ---
     1| import {useQuery} from '@apollo/client';
     2| import {
     3|   Box,
     4|   Caption,
     5|   Icon,
     6|   MenuItem,
     7|   Select,
     8|   Spinner,
     9|   Tag,
    10|   TextInput,
    11|   colorAccentGreen,
    12|   colorBackgroundDefault,
    13|   colorBorderDefault,
    14|   colorTextDefault,
    15|   colorTextLight,
    16|   useViewport,
    17| } from '@dagster-io/ui-components';
    18| import {useVirtualizer} from '@tanstack/react-virtual';
    19| import * as React from 'react';
    20| import {Link} from 'react-router-dom';
    21| import styled from 'styled-components';
    22| import {PythonErrorInfo} from '../app/PythonErrorInfo';
    23| import {FIFTEEN_SECONDS, useQueryRefreshAtInterval} from '../app/QueryRefresh';
    24| import {useTrackPageView} from '../app/analytics';
    25| import {useAssetsLiveData} from '../asset-data/AssetLiveDataProvider';
    26| import {StatusCase, buildAssetNodeStatusContent} from '../asset-graph/AssetNodeStatusContent';
    27| import {displayNameForAssetKey, tokenForAssetKey} from '../asset-graph/Utils';
    28| import {partitionCountString} from '../assets/AssetNodePartitionCounts';
    29| import {ASSET_CATALOG_TABLE_QUERY} from '../assets/AssetsCatalogTable';
    30| import {assetDetailsPathForKey} from '../assets/assetDetailsPathForKey';
    31| import {
    32|   AssetCatalogTableQuery,
    33|   AssetCatalogTableQueryVariables,
    34| } from '../assets/types/AssetsCatalogTable.types';
    35| import {useDocumentTitle} from '../hooks/useDocumentTitle';

# --- HUNK 2: Lines 165-209 ---
   165|     const target = groups[key] || {
   166|       groupName,
   167|       repositoryName,
   168|       assets: [] as Assets,
   169|     };
   170|     target.assets.push(asset);
   171|     groups[key] = target;
   172|   });
   173|   return Object.values(groups);
   174| }
   175| const TEMPLATE_COLUMNS = '5fr 1fr 1fr 1fr 1fr';
   176| function VirtualHeaderRow() {
   177|   return (
   178|     <Box
   179|       border="top-and-bottom"
   180|       style={{
   181|         display: 'grid',
   182|         gridTemplateColumns: TEMPLATE_COLUMNS,
   183|         height: '32px',
   184|         fontSize: '12px',
   185|         color: colorTextLight(),
   186|         position: 'sticky',
   187|         top: 0,
   188|         zIndex: 1,
   189|         background: colorBackgroundDefault(),
   190|       }}
   191|     >
   192|       <HeaderCell>Group name</HeaderCell>
   193|       <HeaderCell>Missing</HeaderCell>
   194|       <HeaderCell>Failed/Overdue</HeaderCell>
   195|       <HeaderCell>In progress</HeaderCell>
   196|       <HeaderCell>Materialized</HeaderCell>
   197|     </Box>
   198|   );
   199| }
   200| const UNGROUPED_ASSETS = 'Ungrouped Assets';
   201| type RowProps = {
   202|   height: number;
   203|   start: number;
   204|   group: ReturnType<typeof groupAssets>[0];
   205| };
   206| function VirtualRow({height, start, group}: RowProps) {
   207|   const assetKeys = React.useMemo(
   208|     () => group.assets.map((asset) => ({path: asset.key.path})),
   209|     [group.assets],

# --- HUNK 3: Lines 313-353 ---
   313|           </Box>
   314|         </Cell>
   315|         <Cell>
   316|           {statuses.missing.length ? (
   317|             <SelectOnHover
   318|               assets={statuses.missing}
   319|               getCount={({status}) => {
   320|                 if (status.case === StatusCase.PARTITIONS_MISSING) {
   321|                   return status.numMissing || 0;
   322|                 }
   323|                 return 0;
   324|               }}
   325|               adjective="missing"
   326|             >
   327|               <Tag intent="none">
   328|                 <Box flex={{direction: 'row', alignItems: 'center', gap: 6}}>
   329|                   <div
   330|                     style={{
   331|                       width: '12px',
   332|                       height: '12px',
   333|                       border: `2px solid ${colorBorderDefault()}`,
   334|                       borderRadius: '50%',
   335|                     }}
   336|                   />
   337|                   {statuses.missing.length}
   338|                 </Box>
   339|               </Tag>
   340|             </SelectOnHover>
   341|           ) : (
   342|             zeroOrBlank
   343|           )}
   344|         </Cell>
   345|         <Cell>
   346|           {statuses.failed.length ? (
   347|             <SelectOnHover
   348|               assets={statuses.failed}
   349|               getCount={({status}) => {
   350|                 if (status.case === StatusCase.PARTITIONS_FAILED) {
   351|                   return status.numFailed || 0;
   352|                 }
   353|                 return 0;

# --- HUNK 4: Lines 393-470 ---
   393|           ) : (
   394|             zeroOrBlank
   395|           )}
   396|         </Cell>
   397|         <Cell>
   398|           {statuses.successful.length ? (
   399|             <SelectOnHover
   400|               assets={statuses.successful}
   401|               getCount={({status}) => {
   402|                 if (status.case === StatusCase.PARTITIONS_MATERIALIZED) {
   403|                   return status.numMaterialized || 0;
   404|                 }
   405|                 return 0;
   406|               }}
   407|               adjective="materialized"
   408|             >
   409|               <Tag intent="success">
   410|                 <Box flex={{direction: 'row', alignItems: 'center', gap: 6}}>
   411|                   <div
   412|                     style={{
   413|                       backgroundColor: colorAccentGreen(),
   414|                       width: '10px',
   415|                       height: '10px',
   416|                       borderRadius: '50%',
   417|                     }}
   418|                   />
   419|                   {statuses.successful.length}
   420|                 </Box>
   421|               </Tag>
   422|             </SelectOnHover>
   423|           ) : (
   424|             zeroOrBlank
   425|           )}
   426|         </Cell>
   427|       </RowGrid>
   428|     </Row>
   429|   );
   430| }
   431| const RowGrid = styled(Box)`
   432|   display: grid;
   433|   grid-template-columns: ${TEMPLATE_COLUMNS};
   434|   height: 100%;
   435|   > * {
   436|     vertical-align: middle;
   437|   }
   438| `;
   439| const Cell = ({children}: {children: React.ReactNode}) => {
   440|   return (
   441|     <RowCell style={{color: colorTextDefault()}}>
   442|       <Box flex={{direction: 'row', alignItems: 'center', grow: 1}}>{children}</Box>
   443|     </RowCell>
   444|   );
   445| };
   446| const RepositoryLinkWrapper = styled.div<{maxWidth?: number}>`
   447|   font-size: 12px;
   448|   pointer-events: none;
   449|   a {
   450|     color: ${colorTextLight()};
   451|     pointer-events: none;
   452|     max-width: ${({maxWidth}) => (maxWidth ? 'unset' : `${maxWidth}px`)};
   453|   }
   454| `;
   455| type AssetWithStatusType = {
   456|   asset: Assets[0];
   457|   status: ReturnType<typeof buildAssetNodeStatusContent>;
   458| };
   459| function SelectOnHover({
   460|   assets,
   461|   children,
   462|   getCount,
   463|   adjective,
   464| }: {
   465|   assets: AssetWithStatusType[];
   466|   children: React.ReactNode;
   467|   getCount: (asset: AssetWithStatusType) => number;
   468|   adjective: string;
   469| }) {
   470|   return (

# --- HUNK 5: Lines 476-516 ---
   476|             .toLocaleLowerCase()
   477|             .includes(query.toLocaleLowerCase())
   478|         }
   479|         itemRenderer={(item) => {
   480|           const count = getCount(item);
   481|           return (
   482|             <LinkWithNoUnderline to={assetDetailsPathForKey(item.asset.key)} target="_blank">
   483|               <MenuItem
   484|                 key={displayNameForAssetKey(item.asset.key)}
   485|                 text={
   486|                   <Box flex={{direction: 'row', alignItems: 'center', gap: 4}}>
   487|                     <div style={{paddingLeft: '4px'}}>
   488|                       <Icon name="asset" />
   489|                     </div>
   490|                     <div
   491|                       style={{overflow: 'hidden', whiteSpace: 'nowrap', textOverflow: 'ellipsis'}}
   492|                     >
   493|                       {displayNameForAssetKey(item.asset.key)}
   494|                     </div>
   495|                     {count && count > 0 ? (
   496|                       <Caption style={{color: colorTextLight()}}>
   497|                         {partitionCountString(count)} {adjective}
   498|                       </Caption>
   499|                     ) : null}
   500|                   </Box>
   501|                 }
   502|               />
   503|             </LinkWithNoUnderline>
   504|           );
   505|         }}
   506|         onItemSelect={() => {}}
   507|       >
   508|         {children}
   509|       </Select>
   510|     </SelectWrapper>
   511|   );
   512| }
   513| const SelectWrapper = styled.div`
   514|   cursor: pointer;
   515|   &:hover {
   516|     font-weight: 600;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/overview/OverviewJobsRoot.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-29 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {
     3|   Box,
     4|   Heading,
     5|   NonIdealState,
     6|   PageHeader,
     7|   Spinner,
     8|   TextInput,
     9|   colorTextLight,
    10| } from '@dagster-io/ui-components';
    11| import * as React from 'react';
    12| import {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';
    13| import {FIFTEEN_SECONDS, useQueryRefreshAtInterval} from '../app/QueryRefresh';
    14| import {useTrackPageView} from '../app/analytics';
    15| import {isHiddenAssetGroupJob} from '../asset-graph/Utils';
    16| import {useDocumentTitle} from '../hooks/useDocumentTitle';
    17| import {useQueryPersistedState} from '../hooks/useQueryPersistedState';
    18| import {RepoFilterButton} from '../instance/RepoFilterButton';
    19| import {SearchInputSpinner} from '../ui/SearchInputSpinner';
    20| import {WorkspaceContext} from '../workspace/WorkspaceContext';
    21| import {buildRepoAddress} from '../workspace/buildRepoAddress';
    22| import {repoAddressAsHumanString} from '../workspace/repoAddressAsString';
    23| import {RepoAddress} from '../workspace/types';
    24| import {OverviewJobsTable} from './OverviewJobsTable';
    25| import {OverviewTabs} from './OverviewTabs';
    26| import {sortRepoBuckets} from './sortRepoBuckets';
    27| import {OverviewJobsQuery, OverviewJobsQueryVariables} from './types/OverviewJobsRoot.types';
    28| import {visibleRepoKeys} from './visibleRepoKeys';
    29| export const OverviewJobsRoot = () => {

# --- HUNK 2: Lines 50-90 ---
    50|       visibleKeys.has(repoAddressAsHumanString(repoAddress)),
    51|     );
    52|   }, [data, visibleRepos]);
    53|   const sanitizedSearch = searchValue.trim().toLocaleLowerCase();
    54|   const anySearch = sanitizedSearch.length > 0;
    55|   const filteredBySearch = React.useMemo(() => {
    56|     const searchToLower = sanitizedSearch.toLocaleLowerCase();
    57|     return repoBuckets
    58|       .map(({repoAddress, jobs}) => ({
    59|         repoAddress,
    60|         jobs: jobs.filter(({name}) => name.toLocaleLowerCase().includes(searchToLower)),
    61|       }))
    62|       .filter(({jobs}) => jobs.length > 0);
    63|   }, [repoBuckets, sanitizedSearch]);
    64|   const content = () => {
    65|     if (loading && !data) {
    66|       return (
    67|         <Box flex={{direction: 'row', justifyContent: 'center'}} style={{paddingTop: '100px'}}>
    68|           <Box flex={{direction: 'row', alignItems: 'center', gap: 16}}>
    69|             <Spinner purpose="body-text" />
    70|             <div style={{color: colorTextLight()}}>Loading jobs</div>
    71|           </Box>
    72|         </Box>
    73|       );
    74|     }
    75|     const anyReposHidden = allRepos.length > visibleRepos.length;
    76|     if (!filteredBySearch.length) {
    77|       if (anySearch) {
    78|         return (
    79|           <Box padding={{top: 20}}>
    80|             <NonIdealState
    81|               icon="search"
    82|               title="No matching jobs"
    83|               description={
    84|                 anyReposHidden ? (
    85|                   <div>
    86|                     No jobs matching <strong>{searchValue}</strong> were found in the selected code
    87|                     locations
    88|                   </div>
    89|                 ) : (
    90|                   <div>


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/overview/OverviewResourcesRoot.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-29 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {
     3|   Box,
     4|   Heading,
     5|   NonIdealState,
     6|   PageHeader,
     7|   Spinner,
     8|   TextInput,
     9|   colorTextLight,
    10| } from '@dagster-io/ui-components';
    11| import * as React from 'react';
    12| import {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';
    13| import {FIFTEEN_SECONDS, useQueryRefreshAtInterval} from '../app/QueryRefresh';
    14| import {useTrackPageView} from '../app/analytics';
    15| import {useDocumentTitle} from '../hooks/useDocumentTitle';
    16| import {useQueryPersistedState} from '../hooks/useQueryPersistedState';
    17| import {RepoFilterButton} from '../instance/RepoFilterButton';
    18| import {RESOURCE_ENTRY_FRAGMENT} from '../resources/WorkspaceResourcesRoot';
    19| import {ResourceEntryFragment} from '../resources/types/WorkspaceResourcesRoot.types';
    20| import {SearchInputSpinner} from '../ui/SearchInputSpinner';
    21| import {WorkspaceContext} from '../workspace/WorkspaceContext';
    22| import {buildRepoAddress} from '../workspace/buildRepoAddress';
    23| import {repoAddressAsHumanString} from '../workspace/repoAddressAsString';
    24| import {RepoAddress} from '../workspace/types';
    25| import {OverviewResourcesTable} from './OverviewResourcesTable';
    26| import {OverviewTabs} from './OverviewTabs';
    27| import {sortRepoBuckets} from './sortRepoBuckets';
    28| import {
    29|   OverviewResourcesQuery,

# --- HUNK 2: Lines 54-94 ---
    54|       visibleKeys.has(repoAddressAsHumanString(repoAddress)),
    55|     );
    56|   }, [data, visibleRepos]);
    57|   const sanitizedSearch = searchValue.trim().toLocaleLowerCase();
    58|   const anySearch = sanitizedSearch.length > 0;
    59|   const filteredBySearch = React.useMemo(() => {
    60|     const searchToLower = sanitizedSearch.toLocaleLowerCase();
    61|     return repoBuckets
    62|       .map(({repoAddress, resources}) => ({
    63|         repoAddress,
    64|         resources: resources.filter(({name}) => name.toLocaleLowerCase().includes(searchToLower)),
    65|       }))
    66|       .filter(({resources}) => resources.length > 0);
    67|   }, [repoBuckets, sanitizedSearch]);
    68|   const content = () => {
    69|     if (loading && !data) {
    70|       return (
    71|         <Box flex={{direction: 'row', justifyContent: 'center'}} style={{paddingTop: '100px'}}>
    72|           <Box flex={{direction: 'row', alignItems: 'center', gap: 16}}>
    73|             <Spinner purpose="body-text" />
    74|             <div style={{color: colorTextLight()}}>Loading resources</div>
    75|           </Box>
    76|         </Box>
    77|       );
    78|     }
    79|     const anyReposHidden = allRepos.length > visibleRepos.length;
    80|     if (!filteredBySearch.length) {
    81|       if (anySearch) {
    82|         return (
    83|           <Box padding={{top: 20}}>
    84|             <NonIdealState
    85|               icon="search"
    86|               title="No matching resources"
    87|               description={
    88|                 anyReposHidden ? (
    89|                   <div>
    90|                     No resources matching <strong>{searchValue}</strong> were found in the selected
    91|                     code locations
    92|                   </div>
    93|                 ) : (
    94|                   <div>

