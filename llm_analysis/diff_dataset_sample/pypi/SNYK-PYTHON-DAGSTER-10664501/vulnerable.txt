# ====================================================================
# FILE: .buildkite/dagster-buildkite/dagster_buildkite/steps/dagster.py
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-33 ---
     1| import os
     2| from glob import glob
     3| from typing import List
     4| from dagster_buildkite.python_packages import PythonPackages
     5| from ..defines import GIT_REPO_ROOT
     6| from ..python_version import AvailablePythonVersion
     7| from ..step_builder import CommandStepBuilder
     8| from ..utils import (
     9|     BuildkiteStep,
    10|     CommandStep,
    11|     is_feature_branch,
    12|     is_release_branch,
    13|     safe_getenv,
    14|     skip_if_no_python_changes,
    15|     skip_if_no_yaml_changes,
    16| )
    17| from .helm import build_helm_steps
    18| from .integration import build_integration_steps
    19| from .packages import build_library_packages_steps
    20| from .test_project import build_test_project_steps
    21| branch_name = safe_getenv("BUILDKITE_BRANCH")
    22| def build_repo_wide_steps() -> List[BuildkiteStep]:
    23|     return [
    24|         *build_check_changelog_steps(),
    25|         *build_repo_wide_check_manifest_steps(),
    26|         *build_repo_wide_pyright_steps(),
    27|         *build_repo_wide_ruff_steps(),
    28|         *build_repo_wide_prettier_steps(),
    29|     ]
    30| def build_dagster_steps() -> List[BuildkiteStep]:
    31|     steps: List[BuildkiteStep] = []
    32|     steps += build_library_packages_steps()
    33|     steps += build_helm_steps()

# --- HUNK 2: Lines 42-82 ---
    42|     return [
    43|         CommandStepBuilder(":zap: ruff")
    44|         .run(
    45|             "pip install -e python_modules/dagster[ruff] -e python_modules/dagster-pipes",
    46|             "make check_ruff",
    47|         )
    48|         .on_test_image(AvailablePythonVersion.get_default())
    49|         .with_skip(skip_if_no_python_changes())
    50|         .build(),
    51|     ]
    52| def build_repo_wide_prettier_steps() -> List[CommandStep]:
    53|     return [
    54|         CommandStepBuilder(":prettier: prettier")
    55|         .run(
    56|             "pushd js_modules/dagster-ui/packages/eslint-config",
    57|             "yarn install",
    58|             "popd",
    59|             "make check_prettier",
    60|         )
    61|         .on_test_image(AvailablePythonVersion.get_default())
    62|         .with_skip(skip_if_no_yaml_changes())
    63|         .build(),
    64|     ]
    65| def build_check_changelog_steps() -> List[CommandStep]:
    66|     branch_name = safe_getenv("BUILDKITE_BRANCH")
    67|     if not is_release_branch(branch_name):
    68|         return []
    69|     release_number = branch_name.split("-", 1)[-1].replace("-", ".")
    70|     return [
    71|         CommandStepBuilder(":memo: changelog")
    72|         .on_test_image(AvailablePythonVersion.get_default())
    73|         .run(f"python scripts/check_changelog.py {release_number}")
    74|         .build()
    75|     ]
    76| def build_repo_wide_pyright_steps() -> List[CommandStep]:
    77|     return [
    78|         CommandStepBuilder(":pyright: pyright")
    79|         .run(
    80|             "curl https://sh.rustup.rs -sSf | sh -s -- --default-toolchain nightly -y",
    81|             "pip install -e python_modules/dagster[pyright] -e python_modules/dagster-pipes",
    82|             "make pyright",


# ====================================================================
# FILE: .buildkite/dagster-buildkite/dagster_buildkite/utils.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 115-154 ---
   115| def parse_package_version(version_str: str) -> packaging.version.Version:
   116|     parsed_version = packaging.version.parse(version_str)
   117|     assert isinstance(
   118|         parsed_version, packaging.version.Version
   119|     ), f"Found LegacyVersion: {version_str}"
   120|     return parsed_version
   121| def get_commit(rev):
   122|     return subprocess.check_output(["git", "rev-parse", "--short", rev]).decode("utf-8").strip()
   123| def skip_if_no_python_changes():
   124|     if not is_feature_branch():
   125|         return None
   126|     if any(path.suffix == ".py" for path in ChangedFiles.all):
   127|         return None
   128|     return "No python changes"
   129| def skip_if_no_yaml_changes():
   130|     if not is_feature_branch():
   131|         return None
   132|     if any(path.suffix in [".yml", ".yaml"] for path in ChangedFiles.all):
   133|         return None
   134|     return "No yaml changes"
   135| @functools.lru_cache(maxsize=None)
   136| def has_helm_changes():
   137|     return any(Path("helm") in path.parents for path in ChangedFiles.all)
   138| def skip_if_no_helm_changes():
   139|     if not is_feature_branch():
   140|         return None
   141|     if has_helm_changes():
   142|         logging.info("Run helm steps because files in the helm directory changed")
   143|         return None
   144|     return "No helm changes"
   145| def message_contains(substring: str) -> bool:
   146|     return any(
   147|         substring in message
   148|         for message in [os.getenv("BUILDKITE_MESSAGE", ""), get_commit_message("HEAD")]
   149|     )
   150| def skip_if_no_docs_changes():
   151|     if not is_feature_branch(os.getenv("BUILDKITE_BRANCH")):
   152|         return None
   153|     if any(Path("docs") in path.parents for path in ChangedFiles.all):
   154|         logging.info("Run docs steps because files in the docs directory changed")


# ====================================================================
# FILE: examples/docs_snippets/docs_snippets/concepts/partitions_schedules_sensors/partitioned_asset.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-8 ---
     1| import urllib.request
     2| from dagster import AssetExecutionContext, DailyPartitionsDefinition, asset
     3| @asset(partitions_def=DailyPartitionsDefinition(start_date="2022-01-01"))
     4| def my_daily_partitioned_asset(context: AssetExecutionContext) -> None:
     5|     partition_date_str = context.asset_partition_key_for_output()
     6|     url = f"coolweatherwebsite.com/weather_obs&date={partition_date_str}"
     7|     target_location = f"weather_observations/{partition_date_str}.csv"
     8|     urllib.request.urlretrieve(url, target_location)


# ====================================================================
# FILE: examples/docs_snippets/docs_snippets/integrations/dbt/dbt.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-30 ---
     1| MANIFEST_PATH = ""
     2| def scope_compile_dbt_manifest(manifest):
     3|     import os
     4|     from pathlib import Path
     5|     from dagster_dbt import DbtCliResource
     6|     dbt_project_dir = Path(__file__).joinpath("..", "..", "..").resolve()
     7|     dbt = DbtCliResource(project_dir=os.fspath(dbt_project_dir))
     8|     if os.getenv("DAGSTER_DBT_PARSE_PROJECT_ON_LOAD"):
     9|         dbt_parse_invocation = dbt.cli(["parse"], target_path=Path("target")).wait()
    10|         dbt_manifest_path = dbt_parse_invocation.target_path.joinpath("manifest.json")
    11|     else:
    12|         dbt_manifest_path = dbt_project_dir.joinpath("target", "manifest.json")
    13| def scope_schedule_assets_dbt_only(manifest):
    14|     from dagster_dbt import build_schedule_from_dbt_selection, dbt_assets
    15|     @dbt_assets(manifest=manifest)
    16|     def my_dbt_assets():
    17|         ...
    18|     daily_dbt_assets_schedule = build_schedule_from_dbt_selection(
    19|         [my_dbt_assets],
    20|         job_name="daily_dbt_models",
    21|         cron_schedule="@daily",
    22|         dbt_select="tag:daily",
    23|     )
    24| def scope_schedule_assets_dbt_and_downstream(manifest):
    25|     from dagster import define_asset_job, ScheduleDefinition
    26|     from dagster_dbt import build_dbt_asset_selection, dbt_assets
    27|     @dbt_assets(manifest=manifest)
    28|     def my_dbt_assets():
    29|         ...
    30|     daily_selection = build_dbt_asset_selection(


# ====================================================================
# FILE: examples/docs_snippets/docs_snippets/integrations/dbt/tutorial/downstream_assets/constants.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-10 ---
     1| import os
     2| from pathlib import Path
     3| from dagster_dbt import DbtCliResource
     4| dbt_project_dir = Path(__file__).joinpath("..", "..", "..").resolve()
     5| dbt = DbtCliResource(project_dir=os.fspath(dbt_project_dir))
     6| if os.getenv("DAGSTER_DBT_PARSE_PROJECT_ON_LOAD"):
     7|     dbt_parse_invocation = dbt.cli(["parse"], target_path=Path("target")).wait()
     8|     dbt_manifest_path = dbt_parse_invocation.target_path.joinpath("manifest.json")
     9| else:
    10|     dbt_manifest_path = dbt_project_dir.joinpath("target", "manifest.json")


# ====================================================================
# FILE: examples/docs_snippets/docs_snippets/integrations/dbt/tutorial/load_dbt_models/constants.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-10 ---
     1| import os
     2| from pathlib import Path
     3| from dagster_dbt import DbtCliResource
     4| dbt_project_dir = Path(__file__).joinpath("..", "..", "..").resolve()
     5| dbt = DbtCliResource(project_dir=os.fspath(dbt_project_dir))
     6| if os.getenv("DAGSTER_DBT_PARSE_PROJECT_ON_LOAD"):
     7|     dbt_parse_invocation = dbt.cli(["parse"], target_path=Path("target")).wait()
     8|     dbt_manifest_path = dbt_parse_invocation.target_path.joinpath("manifest.json")
     9| else:
    10|     dbt_manifest_path = dbt_project_dir.joinpath("target", "manifest.json")


# ====================================================================
# FILE: examples/docs_snippets/docs_snippets/integrations/dbt/tutorial/upstream_assets/constants.py
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-10 ---
     1| import os
     2| from pathlib import Path
     3| from dagster_dbt import DbtCliResource
     4| dbt_project_dir = Path(__file__).joinpath("..", "..", "..").resolve()
     5| dbt = DbtCliResource(project_dir=os.fspath(dbt_project_dir))
     6| if os.getenv("DAGSTER_DBT_PARSE_PROJECT_ON_LOAD"):
     7|     dbt_parse_invocation = dbt.cli(["parse"], target_path=Path("target")).wait()
     8|     dbt_manifest_path = dbt_parse_invocation.target_path.joinpath("manifest.json")
     9| else:
    10|     dbt_manifest_path = dbt_project_dir.joinpath("target", "manifest.json")


# ====================================================================
# FILE: js_modules/dagster-ui/packages/app-oss/src/NUX/CommunityNux.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-33 ---
     1| import {gql, useMutation, useQuery} from '@apollo/client';
     2| import {
     3|   Body,
     4|   Box,
     5|   Button,
     6|   Checkbox,
     7|   Colors,
     8|   Dialog,
     9|   ExternalAnchorButton,
    10|   Heading,
    11|   Icon,
    12|   Spinner,
    13|   TextInput,
    14| } from '@dagster-io/ui-components';
    15| import {useStateWithStorage} from '@dagster-io/ui-core/hooks/useStateWithStorage';
    16| import React from 'react';
    17| import isEmail from 'validator/lib/isEmail';
    18| export const CommunityNux = () => {
    19|   const [didDismissCommunityNux, dissmissInBrowser] = useStateWithStorage(
    20|     'communityNux',
    21|     (data) => data,
    22|   );
    23|   const {data, loading} = useQuery(GET_SHOULD_SHOW_NUX_QUERY);
    24|   const [dismissOnServer] = useMutation(SET_NUX_SEEN_MUTATION);
    25|   if (!isLocalhost()) {
    26|     return null;
    27|   }
    28|   if (didDismissCommunityNux || loading || (data && !data.shouldShowNux)) {
    29|     return null;
    30|   }
    31|   return (
    32|     <CommunityNuxImpl
    33|       dismiss={() => {

# --- HUNK 2: Lines 73-142 ---
    73|   submit: (email: string, newsletter: boolean) => void;
    74| }
    75| const Form = ({dismiss, submit}: FormProps) => {
    76|   const [email, setEmail] = React.useState('');
    77|   const [newsletter, setNewsLetter] = React.useState(false);
    78|   const validEmail = isEmail(email);
    79|   const [emailChanged, setEmailChanged] = React.useState(false);
    80|   const [blurred, setBlurred] = React.useState(false);
    81|   return (
    82|     <Box
    83|       flex={{direction: 'column', gap: 16}}
    84|       style={{padding: '36px', width: '680px', background: 'white'}}
    85|     >
    86|       <Box
    87|         flex={{direction: 'row', gap: 24, alignItems: 'center'}}
    88|         padding={{bottom: 24}}
    89|         border="bottom"
    90|       >
    91|         <Box flex={{direction: 'column', gap: 8, alignItems: 'start', justifyContent: 'start'}}>
    92|           <Heading>Join the Dagster community</Heading>
    93|           <Body style={{color: Colors.Gray700, marginBottom: '4px'}}>
    94|             Connect with thousands of other data practitioners building with Dagster. Share
    95|             knowledge, get help, and contribute to the open-source project.
    96|           </Body>
    97|           <ExternalAnchorButton
    98|             icon={<Icon name="slack" />}
    99|             href="https://www.dagster.io/slack?utm_source=local-nux"
   100|           >
   101|             Join us on Slack
   102|           </ExternalAnchorButton>
   103|         </Box>
   104|         <video autoPlay muted loop playsInline width={120} height={120}>
   105|           <source src={`${process.env.PUBLIC_URL}/Dagster_world.mp4`} type="video/mp4" />
   106|         </video>
   107|       </Box>
   108|       <Box flex={{direction: 'column', justifyContent: 'stretch', gap: 12}}>
   109|         <div>Notify me about Dagster security updates</div>
   110|         <TextInput
   111|           value={email}
   112|           onChange={(e) => {
   113|             setEmail(e.target.value);
   114|             setEmailChanged(true);
   115|           }}
   116|           onBlur={() => setBlurred(true)}
   117|           placeholder="hello@dagster.io"
   118|           strokeColor={!emailChanged || validEmail ? undefined : Colors.Red500}
   119|           style={{width: '100%'}}
   120|         />
   121|         {emailChanged && blurred && !validEmail ? (
   122|           <div style={{paddingBottom: '12px', color: Colors.Red500, fontSize: '12px'}}>
   123|             Add your email to get updates from Dagster.
   124|           </div>
   125|         ) : null}
   126|         <Box as="label" flex={{direction: 'row', gap: 8, alignItems: 'center'}}>
   127|           <Checkbox
   128|             checked={newsletter}
   129|             onChange={(e: React.ChangeEvent<HTMLInputElement>) => {
   130|               setNewsLetter(e.target.checked);
   131|             }}
   132|           />{' '}
   133|           <span>Sign up for the Dagster newsletter</span>
   134|         </Box>
   135|       </Box>
   136|       <Box flex={{direction: 'row', justifyContent: 'space-between', alignItems: 'center'}}>
   137|         <a href="https://dagster.io/privacy" target="_blank" rel="noreferrer">
   138|           Privacy Policy
   139|         </a>
   140|         <Box flex={{direction: 'row', gap: 8}}>
   141|           <Button
   142|             onClick={() => {


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/.storybook/main.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 7-34 ---
     7|   return dirname(require.resolve(join(value, 'package.json')));
     8| }
     9| const config = {
    10|   stories: ['../src/**/*.stories.mdx', '../src/**/*.stories.@(js|jsx|ts|tsx)'],
    11|   addons: [
    12|     getAbsolutePath('@storybook/addon-links'),
    13|     getAbsolutePath('@storybook/addon-essentials'),
    14|     getAbsolutePath('@storybook/addon-mdx-gfm'),
    15|   ],
    16|   framework: {
    17|     name: getAbsolutePath('@storybook/react-webpack5'),
    18|     options: {},
    19|   },
    20|   typescript: {
    21|     reactDocgen: 'react-docgen-typescript-plugin',
    22|   },
    23|   features: {
    24|     storyStoreV7: true,
    25|   },
    26|   docs: {
    27|     autodocs: true,
    28|   },
    29|   env: (config) => ({
    30|     ...config,
    31|     STORYBOOK: true,
    32|   }),
    33| };
    34| export default config;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/.storybook/preview.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-62 ---
     1| import {
     2|   FontFamily,
     3|   GlobalInter,
     4|   GlobalInconsolata,
     5|   GlobalDialogStyle,
     6|   GlobalPopoverStyle,
     7|   GlobalSuggestStyle,
     8|   GlobalToasterStyle,
     9|   GlobalTooltipStyle,
    10|   Colors,
    11| } from '../src';
    12| import {MemoryRouter} from 'react-router-dom';
    13| import * as React from 'react';
    14| import {createGlobalStyle} from 'styled-components/macro';
    15| import './blueprint.css';
    16| const GlobalStyle = createGlobalStyle`
    17|   * {
    18|     box-sizing: border-box;
    19|   }
    20|   html, body {
    21|     color: ${Colors.Gray800};
    22|     -webkit-font-smoothing: antialiased;
    23|     -moz-osx-font-smoothing: grayscale;
    24|   }
    25|   a,
    26|   a:hover,
    27|   a:active {
    28|     color: ${Colors.Link};
    29|   }
    30|   body {
    31|     margin: 0;
    32|     padding: 0;
    33|   }
    34|   body, input, select, textarea {
    35|     font-family: ${FontFamily.default};
    36|   }
    37|   button {
    38|     font-family: inherit;
    39|   }
    40|   code, pre {
    41|     font-family: ${FontFamily.monospace};
    42|     font-size: 16px;
    43|   }
    44| `;
    45| export const decorators = [
    46|   (Story) => (
    47|     <MemoryRouter>
    48|       <GlobalStyle />
    49|       <GlobalInter />
    50|       <GlobalInconsolata />
    51|       <GlobalToasterStyle />
    52|       <GlobalTooltipStyle />
    53|       <GlobalPopoverStyle />
    54|       <GlobalDialogStyle />
    55|       <GlobalSuggestStyle />
    56|       <Story />
    57|     </MemoryRouter>
    58|   ),
    59| ];
    60| export const parameters = {
    61|   parameters: {
    62|     actions: {argTypesRegex: '^on[A-Z].*'},


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Alert.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-70 ---
     1| import * as React from 'react';
     2| import styled from 'styled-components';
     3| import {Box} from './Box';
     4| import {Colors} from './Colors';
     5| import {Group} from './Group';
     6| import {IconName, Icon} from './Icon';
     7| export type AlertIntent = 'info' | 'warning' | 'error' | 'success';
     8| interface Props {
     9|   intent: AlertIntent;
    10|   title: React.ReactNode;
    11|   description?: React.ReactNode;
    12|   icon?: React.ReactNode;
    13|   onClose?: () => void;
    14| }
    15| export const Alert = (props: Props) => {
    16|   const {intent, title, description, onClose} = props;
    17|   const {backgroundColor, borderColor, icon, iconColor, textColor} = React.useMemo(() => {
    18|     switch (intent) {
    19|       case 'warning':
    20|         return {
    21|           backgroundColor: Colors.Yellow50,
    22|           borderColor: Colors.Yellow500,
    23|           icon: 'warning',
    24|           iconColor: Colors.Yellow500,
    25|           textColor: Colors.Yellow700,
    26|         };
    27|       case 'error':
    28|         return {
    29|           backgroundColor: Colors.Red50,
    30|           borderColor: Colors.Red500,
    31|           icon: 'error',
    32|           iconColor: Colors.Red500,
    33|           textColor: Colors.Red700,
    34|         };
    35|       case 'success':
    36|         return {
    37|           backgroundColor: Colors.Green50,
    38|           borderColor: Colors.Green500,
    39|           icon: 'done',
    40|           iconColor: Colors.Green500,
    41|           textColor: Colors.Green700,
    42|         };
    43|       case 'info':
    44|       default:
    45|         return {
    46|           backgroundColor: Colors.Blue50,
    47|           borderColor: Colors.Blue500,
    48|           icon: 'info',
    49|           iconColor: Colors.Blue500,
    50|           textColor: Colors.Blue700,
    51|         };
    52|     }
    53|   }, [intent]);
    54|   return (
    55|     <AlertContainer
    56|       background={backgroundColor}
    57|       $borderColor={borderColor}
    58|       $textColor={textColor}
    59|       padding={{horizontal: 16, vertical: 12}}
    60|     >
    61|       <Box flex={{direction: 'row', justifyContent: 'space-between'}}>
    62|         <Group direction="row" spacing={12} alignItems="flex-start">
    63|           {props.icon || <Icon name={icon as IconName} color={iconColor} />}
    64|           <Group direction="column" spacing={8}>
    65|             <AlertTitle>{title}</AlertTitle>
    66|             {description ? <AlertDescription>{description}</AlertDescription> : null}
    67|           </Group>
    68|         </Group>
    69|         {!!onClose ? (
    70|           <ButtonWrapper onClick={onClose}>


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/BaseButton.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-43 ---
     1| import * as React from 'react';
     2| import {Colors} from './Colors';
     3| import {StyledButton, StyledButtonText} from './StyledButton';
     4| interface CommonButtonProps {
     5|   icon?: React.ReactNode;
     6|   label?: React.ReactNode;
     7|   loading?: boolean;
     8|   rightIcon?: React.ReactNode;
     9|   fillColor?: string;
    10|   strokeColor?: string;
    11|   textColor?: string;
    12| }
    13| interface BaseButtonProps extends CommonButtonProps, React.ComponentPropsWithRef<'button'> {}
    14| export const BaseButton = React.forwardRef(
    15|   (props: BaseButtonProps, ref: React.ForwardedRef<HTMLButtonElement>) => {
    16|     const {
    17|       fillColor = Colors.White,
    18|       disabled,
    19|       icon,
    20|       label,
    21|       loading,
    22|       rightIcon,
    23|       textColor = Colors.Dark,
    24|       strokeColor = Colors.Gray300,
    25|       ...rest
    26|     } = props;
    27|     return (
    28|       <StyledButton
    29|         {...rest}
    30|         as="button"
    31|         disabled={!!(disabled || loading)}
    32|         $fillColor={fillColor}
    33|         $strokeColor={strokeColor}
    34|         $textColor={textColor}
    35|         ref={ref}
    36|       >
    37|         {icon || null}
    38|         {label ? <StyledButtonText>{label}</StyledButtonText> : null}
    39|         {rightIcon || null}
    40|       </StyledButton>
    41|     );
    42|   },
    43| );


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/BaseTag.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-66 ---
     1| import * as React from 'react';
     2| import styled from 'styled-components';
     3| import {Colors} from './Colors';
     4| import {IconWrapper} from './Icon';
     5| import {SpinnerWrapper} from './Spinner';
     6| interface Props {
     7|   fillColor?: string;
     8|   textColor?: string;
     9|   icon?: React.ReactNode;
    10|   interactive?: boolean;
    11|   rightIcon?: React.ReactNode;
    12|   label?: React.ReactNode;
    13|   tooltipText?: string;
    14| }
    15| const BaseTagTooltipStyle: React.CSSProperties = {
    16|   fontSize: 12,
    17|   lineHeight: '16px',
    18|   alignItems: 'center',
    19|   padding: '4px 8px',
    20|   userSelect: 'text',
    21|   pointerEvents: 'none',
    22|   borderRadius: 8,
    23|   border: 'none',
    24|   top: -9,
    25|   left: -13,
    26| };
    27| export const BaseTag = (props: Props) => {
    28|   const {
    29|     fillColor = Colors.Gray10,
    30|     textColor = Colors.Gray900,
    31|     icon,
    32|     interactive = false,
    33|     rightIcon,
    34|     label,
    35|     tooltipText,
    36|   } = props;
    37|   return (
    38|     <StyledTag $fillColor={fillColor} $interactive={interactive} $textColor={textColor}>
    39|       {icon || null}
    40|       {label !== undefined && label !== null ? (
    41|         <span
    42|           data-tooltip={typeof label === 'string' ? label : tooltipText}
    43|           data-tooltip-style={JSON.stringify({
    44|             ...BaseTagTooltipStyle,
    45|             backgroundColor: fillColor,
    46|             color: textColor,
    47|           })}
    48|         >
    49|           {label}
    50|         </span>
    51|       ) : null}
    52|       {rightIcon || null}
    53|     </StyledTag>
    54|   );
    55| };
    56| interface StyledTagProps {
    57|   $fillColor: string;
    58|   $interactive: boolean;
    59|   $textColor: string;
    60| }
    61| export const StyledTag = styled.div<StyledTagProps>`
    62|   background-color: ${({$fillColor}) => $fillColor};
    63|   border-radius: 8px;
    64|   color: ${({$textColor}) => $textColor};
    65|   cursor: ${({$interactive}) => ($interactive ? 'pointer' : 'inherit')};
    66|   display: inline-flex;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Box.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-23 ---
     1| import styled, {css} from 'styled-components';
     2| import {assertUnreachable} from '../util/assertUnreachable';
     3| import {Colors} from './Colors';
     4| import {BorderSetting, BorderSide, DirectionalSpacing, FlexProperties} from './types';
     5| interface Props {
     6|   background?: string | null;
     7|   border?: BorderSide | BorderSetting | null;
     8|   flex?: FlexProperties | null;
     9|   margin?: DirectionalSpacing | null;
    10|   padding?: DirectionalSpacing | null;
    11| }
    12| const flexPropertiesToCSS = (flex: FlexProperties) => {
    13|   return css`
    14|     display: ${flex.display || 'flex'};
    15|     ${flex.alignItems ? `align-items: ${flex.alignItems};` : null}
    16|     ${flex.basis ? `flex-basis: ${flex.basis};` : null}
    17|     ${flex.direction ? `flex-direction: ${flex.direction};` : null}
    18|     ${flex.justifyContent ? `justify-content: ${flex.justifyContent};` : null}
    19|     ${flex.grow ? `flex-grow: ${flex.grow};` : null}
    20|     ${flex.wrap ? `flex-wrap: ${flex.wrap};` : null}
    21|     ${flex.gap ? `gap: ${flex.gap}px;` : null}
    22|     ${flex.shrink !== null && flex.shrink !== undefined ? `flex-shrink: ${flex.shrink};` : null}
    23|   `;

# --- HUNK 2: Lines 26-67 ---
    26|   return css`
    27|     background-color: ${background};
    28|   `;
    29| };
    30| const directionalSpacingToCSS = (property: string, spacing: DirectionalSpacing) => {
    31|   if (typeof spacing === 'number') {
    32|     return css`
    33|       ${property}: ${spacing}px;
    34|     `;
    35|   }
    36|   const top = spacing.vertical || spacing.top || 0;
    37|   const right = spacing.horizontal || spacing.right || 0;
    38|   const bottom = spacing.vertical || spacing.bottom || 0;
    39|   const left = spacing.horizontal || spacing.left || 0;
    40|   return css`
    41|     ${property}: ${top}px ${right}px ${bottom}px ${left}px;
    42|   `;
    43| };
    44| const borderSettingToCSS = (border: BorderSide | BorderSetting) => {
    45|   const borderValue =
    46|     typeof border === 'string' ? {side: border, width: 1, color: Colors.KeylineGray} : border;
    47|   const {side, width = 1, color = Colors.KeylineGray} = borderValue;
    48|   switch (side) {
    49|     case 'all':
    50|       return css`
    51|         box-shadow: inset 0 0 0 ${width}px ${color};
    52|       `;
    53|     case 'top-and-bottom':
    54|       return css`
    55|         box-shadow:
    56|           inset 0 ${width}px ${color},
    57|           inset 0 -${width}px ${color};
    58|       `;
    59|     case 'left-and-right':
    60|       return css`
    61|         box-shadow:
    62|           inset ${width}px 0 ${color},
    63|           inset -${width}px 0 ${color};
    64|       `;
    65|     case 'top':
    66|       return css`
    67|         box-shadow: inset 0 ${width}px ${color};


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Button.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-149 ---
     1| import {AnchorButton as BlueprintAnchorButton, Button as BlueprintButton} from '@blueprintjs/core';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| import {BaseButton} from './BaseButton';
     5| import {Colors} from './Colors';
     6| import {Spinner} from './Spinner';
     7| import {StyledButton, StyledButtonText} from './StyledButton';
     8| type BlueprintIntent = React.ComponentProps<typeof BlueprintButton>['intent'];
     9| type BlueprintOutlined = React.ComponentProps<typeof BlueprintButton>['outlined'];
    10| export const intentToFillColor = (intent: BlueprintIntent, outlined: BlueprintOutlined) => {
    11|   if (outlined) {
    12|     return 'transparent';
    13|   }
    14|   switch (intent) {
    15|     case 'primary':
    16|       return Colors.Gray900;
    17|     case 'danger':
    18|       return Colors.Red500;
    19|     case 'success':
    20|       return Colors.Green500;
    21|     case 'warning':
    22|       return Colors.Yellow500;
    23|     case 'none':
    24|       return Colors.White;
    25|     default:
    26|       return 'transparent';
    27|   }
    28| };
    29| export const intentToTextColor = (intent: BlueprintIntent, outlined: BlueprintOutlined) => {
    30|   if (outlined) {
    31|     switch (intent) {
    32|       case 'primary':
    33|         return Colors.Gray900;
    34|       case 'danger':
    35|         return Colors.Red500;
    36|       case 'success':
    37|         return Colors.Green500;
    38|       case 'warning':
    39|         return Colors.Yellow500;
    40|       case 'none':
    41|       default:
    42|         return Colors.Dark;
    43|     }
    44|   }
    45|   return !intent || intent === 'none' ? Colors.Dark : Colors.White;
    46| };
    47| export const intentToStrokeColor = (intent: BlueprintIntent, outlined: BlueprintOutlined) => {
    48|   if (!intent || intent === 'none' || outlined) {
    49|     switch (intent) {
    50|       case 'primary':
    51|         return Colors.Gray900;
    52|       case 'danger':
    53|         return Colors.Red500;
    54|       case 'success':
    55|         return Colors.Green500;
    56|       case 'warning':
    57|         return Colors.Yellow500;
    58|       case 'none':
    59|       default:
    60|         return Colors.Gray300;
    61|     }
    62|   }
    63|   return 'transparent';
    64| };
    65| export const intentToSpinnerColor = (intent: BlueprintIntent, outlined: BlueprintOutlined) => {
    66|   if (outlined) {
    67|     switch (intent) {
    68|       case 'primary':
    69|         return Colors.Gray600;
    70|       case 'danger':
    71|         return Colors.Red500;
    72|       case 'success':
    73|         return Colors.Green500;
    74|       case 'warning':
    75|         return Colors.Yellow500;
    76|       case 'none':
    77|       default:
    78|         return Colors.Gray600;
    79|     }
    80|   }
    81|   return !intent || intent === 'none' ? Colors.Gray600 : Colors.White;
    82| };
    83| export const Button = React.forwardRef(
    84|   (
    85|     props: React.ComponentProps<typeof BlueprintButton>,
    86|     ref: React.ForwardedRef<HTMLButtonElement>,
    87|   ) => {
    88|     const {children, icon, intent, loading, outlined, rightIcon, ...rest} = props;
    89|     let iconOrSpinner = icon;
    90|     if (loading) {
    91|       const spinnerColor = intentToSpinnerColor(intent, outlined);
    92|       iconOrSpinner = <Spinner purpose="body-text" fillColor={spinnerColor} />;
    93|     }
    94|     return (
    95|       <BaseButton
    96|         {...rest}
    97|         icon={iconOrSpinner}
    98|         rightIcon={rightIcon}
    99|         loading={loading}
   100|         fillColor={intentToFillColor(intent, outlined)}
   101|         textColor={intentToTextColor(intent, outlined)}
   102|         strokeColor={intentToStrokeColor(intent, outlined)}
   103|         label={children}
   104|         ref={ref}
   105|       />
   106|     );
   107|   },
   108| );
   109| Button.displayName = 'Button';
   110| export const JoinedButtons = styled.div`
   111|   display: flex;
   112|   align-items: center;
   113|   ${StyledButton}:not(:last-child),
   114|   & > *:not(:last-child) ${StyledButton} {
   115|     border-top-right-radius: 0;
   116|     border-bottom-right-radius: 0;
   117|   }
   118|   ${StyledButton}:not(:first-child),
   119|   & > *:not(:first-child) ${StyledButton} {
   120|     border-top-left-radius: 0;
   121|     border-bottom-left-radius: 0;
   122|     margin-left: -1px;
   123|   }
   124| `;
   125| export const ExternalAnchorButton = React.forwardRef(
   126|   (
   127|     props: Omit<React.ComponentProps<typeof BlueprintAnchorButton>, 'loading'>,
   128|     ref: React.ForwardedRef<HTMLAnchorElement>,
   129|   ) => {
   130|     const {children, icon, intent, outlined, rightIcon, ...rest} = props;
   131|     return (
   132|       <StyledButton
   133|         {...rest}
   134|         as="a"
   135|         target="_blank"
   136|         rel="noreferrer nofollow"
   137|         $fillColor={intentToFillColor(intent, outlined)}
   138|         $strokeColor={intentToStrokeColor(intent, outlined)}
   139|         $textColor={intentToTextColor(intent, outlined)}
   140|         ref={ref}
   141|       >
   142|         {icon || null}
   143|         {children ? <StyledButtonText>{children}</StyledButtonText> : null}
   144|         {rightIcon || null}
   145|       </StyledButton>
   146|     );
   147|   },
   148| );
   149| ExternalAnchorButton.displayName = 'ExternalAnchorButton';


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/ButtonGroup.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-48 ---
     1| import * as React from 'react';
     2| import {BaseButton} from './BaseButton';
     3| import {JoinedButtons} from './Button';
     4| import {Colors} from './Colors';
     5| import {IconName, Icon} from './Icon';
     6| import {Tooltip} from './Tooltip';
     7| export type ButtonGroupItem<T> = {
     8|   id: T;
     9|   label?: React.ReactNode;
    10|   icon?: IconName;
    11|   tooltip?: string;
    12| };
    13| interface Props<T> {
    14|   activeItems?: Set<T>;
    15|   buttons: ButtonGroupItem<T>[];
    16|   onClick: (id: T, e: React.MouseEvent<HTMLButtonElement>) => void;
    17| }
    18| export const ButtonGroup = <T extends string | number>(props: Props<T>) => {
    19|   const {activeItems, buttons, onClick} = props;
    20|   return (
    21|     <JoinedButtons>
    22|       {buttons.map((button) => {
    23|         const {id, icon, label, tooltip} = button;
    24|         const isActive = activeItems?.has(id);
    25|         const buttonElement = (
    26|           <BaseButton
    27|             key={id}
    28|             fillColor={isActive ? Colors.Gray200 : Colors.White}
    29|             textColor={isActive ? Colors.Gray900 : Colors.Gray700}
    30|             icon={
    31|               icon ? <Icon name={icon} color={isActive ? Colors.Gray900 : Colors.Gray700} /> : null
    32|             }
    33|             label={label}
    34|             onClick={(e) => onClick(id, e)}
    35|           />
    36|         );
    37|         if (tooltip) {
    38|           return (
    39|             <Tooltip content={tooltip} position="top" key={id}>
    40|               {buttonElement}
    41|             </Tooltip>
    42|           );
    43|         }
    44|         return buttonElement;
    45|       })}
    46|     </JoinedButtons>
    47|   );
    48| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/ButtonLink.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-23 ---
     1| import * as React from 'react';
     2| import styled, {css} from 'styled-components';
     3| import {Colors} from './Colors';
     4| type Color =
     5|   | string
     6|   | {
     7|       link: string;
     8|       hover?: string;
     9|       active?: string;
    10|     };
    11| type Underline = 'never' | 'always' | 'hover';
    12| interface Props {
    13|   color: Color;
    14|   disabled?: boolean;
    15|   underline?: Underline;
    16| }
    17| const fontColor = (color: Color) => {
    18|   if (typeof color === 'string') {
    19|     return css`
    20|       color: ${color};
    21|     `;
    22|   }
    23|   const {link, hover, active} = color;

# --- HUNK 2: Lines 26-81 ---
    26|     ${hover ? `&:hover { color: ${hover}; }` : null}
    27|     ${active ? `&:active { color: ${active}; }` : null}
    28|   `;
    29| };
    30| const outlineColor = (color: Color) => {
    31|   if (typeof color === 'string') {
    32|     return color;
    33|   }
    34|   return color.link;
    35| };
    36| const textDecoration = (underline: Underline) => {
    37|   switch (underline) {
    38|     case 'always':
    39|       return css`
    40|         text-decoration: underline;
    41|       `;
    42|     case 'hover':
    43|       return css`
    44|         &:hover {
    45|           text-decoration: underline;
    46|         }
    47|       `;
    48|     case 'never':
    49|     default:
    50|       return null;
    51|   }
    52| };
    53| export const ButtonLink = styled(({color, underline, ...rest}) => <button {...rest} />)<Props>`
    54|   background: transparent;
    55|   border: 0;
    56|   cursor: pointer;
    57|   font-size: inherit;
    58|   line-height: 1;
    59|   padding: 8px;
    60|   margin: -8px;
    61|   text-align: left;
    62|   &:active,
    63|   &:focus {
    64|     outline: none;
    65|   }
    66|   &:focus-visible {
    67|     outline: 1px auto ${({color}) => outlineColor(color)};
    68|     outline-offset: 2px;
    69|   }
    70|   &:disabled {
    71|     cursor: default;
    72|     opacity: 0.7;
    73|   }
    74|   transition: 30ms color linear;
    75|   ${({color}) => fontColor(color)}
    76|   ${({underline}) => textDecoration(underline)}
    77| `;
    78| ButtonLink.defaultProps = {
    79|   color: Colors.Link,
    80|   underline: 'hover',
    81| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Checkbox.tsx
# Total hunks: 5
# ====================================================================
# --- HUNK 1: Lines 1-184 ---
     1| import * as React from 'react';
     2| import {useRef} from 'react';
     3| import styled, {css} from 'styled-components';
     4| import {Colors} from './Colors';
     5| const DISABLED_COLOR = Colors.Gray300;
     6| type Format = 'check' | 'star' | 'switch';
     7| type Size = 'small' | 'large';
     8| type Props = Omit<
     9|   React.DetailedHTMLProps<React.InputHTMLAttributes<HTMLInputElement>, HTMLInputElement>,
    10|   'size'
    11| > & {
    12|   checked: boolean;
    13|   onClick?: (e: React.MouseEvent<HTMLLabelElement>) => void;
    14|   onChange?: (e: React.ChangeEvent<HTMLInputElement>) => void;
    15|   label?: React.ReactNode;
    16|   indeterminate?: boolean;
    17|   format?: Format;
    18|   fillColor?: string;
    19|   size?: Size;
    20| };
    21| interface IconProps {
    22|   checked: boolean;
    23|   disabled: boolean;
    24|   indeterminate: boolean;
    25|   fillColor: string;
    26| }
    27| const StarIcon = ({checked, indeterminate, fillColor, disabled}: IconProps) => (
    28|   <svg width="24px" height="24px" viewBox="-3 -3 24 24">
    29|     <path
    30|       className="interaction-focus-outline"
    31|       d="M8.99983 14.27L13.1498 16.78C13.9098 17.24 14.8398 16.56 14.6398 15.7L13.5398 10.98L17.2098 7.80001C17.8798 7.22001 17.5198 6.12001 16.6398 6.05001L11.8098 5.64001L9.91983 1.18001C9.57983 0.37001 8.41983 0.37001 8.07983 1.18001L6.18983 5.63001L1.35983 6.04001C0.479829 6.11001 0.119828 7.21001 0.789828 7.79001L4.45983 10.97L3.35983 15.69C3.15983 16.55 4.08983 17.23 4.84983 16.77L8.99983 14.27Z"
    32|       fill={Colors.White}
    33|     />
    34|     <path
    35|       d="M16.65 6.04L11.81 5.62L9.92 1.17C9.58 0.36 8.42 0.36 8.08 1.17L6.19 5.63L1.36 6.04C0.48 6.11 0.12 7.21 0.79 7.79L4.46 10.97L3.36 15.69C3.16 16.55 4.09 17.23 4.85 16.77L9 14.27L13.15 16.78C13.91 17.24 14.84 16.56 14.64 15.7L13.54 10.97L17.21 7.79C17.88 7.21 17.53 6.11 16.65 6.04ZM9 12.4L5.24 14.67L6.24 10.39L2.92 7.51L7.3 7.13L9 3.1L10.71 7.14L15.09 7.52L11.77 10.4L12.77 14.68L9 12.4Z"
    36|       className="interaction-darken"
    37|       fill={Colors.Gray300}
    38|       style={{opacity: disabled ? 0.6 : 1}}
    39|     />
    40|     {indeterminate && (
    41|       <path
    42|         d="M11.6490126,5.26286597 L11.8098,5.64001 L16.6398,6.05001 C17.5198,6.12001 17.8798,7.22001 17.2098,7.80001 L17.2098,7.80001 L13.5398,10.98 L14.6398,15.7 C14.8398,16.56 13.9098,17.24 13.1498,16.78 L13.1498,16.78 L8.99983,14.27 L4.84983,16.77 C4.49121528,16.9870563 4.09474951,16.9502879 3.79701262,16.7605538 L11.6490126,5.26286597 Z"
    43|         className="interaction-darken"
    44|         fill={fillColor}
    45|         style={{opacity: disabled ? 0.6 : 1}}
    46|       />
    47|     )}
    48|     <path
    49|       d="M8.99983 14.27L13.1498 16.78C13.9098 17.24 14.8398 16.56 14.6398 15.7L13.5398 10.98L17.2098 7.80001C17.8798 7.22001 17.5198 6.12001 16.6398 6.05001L11.8098 5.64001L9.91983 1.18001C9.57983 0.37001 8.41983 0.37001 8.07983 1.18001L6.18983 5.63001L1.35983 6.04001C0.479829 6.11001 0.119828 7.21001 0.789828 7.79001L4.45983 10.97L3.35983 15.69C3.15983 16.55 4.08983 17.23 4.84983 16.77L8.99983 14.27Z"
    50|       className="interaction-darken"
    51|       fill={fillColor}
    52|       style={{
    53|         transformOrigin: '9px 9px',
    54|         transform: !indeterminate && checked ? 'scale(1,1)' : 'scale(0,0)',
    55|         transition: 'transform 80ms linear',
    56|         opacity: disabled ? 0.4 : 1,
    57|       }}
    58|     />
    59|   </svg>
    60| );
    61| const SwitchIcon = ({checked, indeterminate, fillColor, disabled}: IconProps) => (
    62|   <svg width="36px" height="24px" viewBox="-3 -3 42 28">
    63|     <defs>
    64|       <linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="innerShadow">
    65|         <stop stopColor="#000" stopOpacity="0.2" offset="0%" />
    66|         <stop stopColor="#000" stopOpacity="0.12" offset="15%" />
    67|         <stop stopColor="#000" stopOpacity="0.06" offset="40%" />
    68|         <stop stopColor="#000" stopOpacity="0" offset="100%" />
    69|       </linearGradient>
    70|     </defs>
    71|     <rect
    72|       id="bg"
    73|       x="0"
    74|       y="0"
    75|       width="36"
    76|       height="22"
    77|       rx="11"
    78|       fill={checked && !indeterminate ? fillColor : Colors.Gray400}
    79|       style={{
    80|         transition: 'fill 100ms linear',
    81|         opacity: disabled && checked && !indeterminate ? 0.6 : 1,
    82|       }}
    83|       className="interaction-darken interaction-focus-outline"
    84|     />
    85|     {!disabled && <rect x="0" y="0" width="36" height="22" rx="11" fill="url(#innerShadow)" />}
    86|     <rect
    87|       id="handle"
    88|       style={{transition: 'x 100ms linear'}}
    89|       x={indeterminate ? '8' : checked ? '15' : '1'}
    90|       y="1"
    91|       width="20"
    92|       height="20"
    93|       rx="10"
    94|       fill={disabled ? Colors.Gray200 : Colors.White}
    95|     />
    96|   </svg>
    97| );
    98| const CheckIcon = ({checked, indeterminate, fillColor, disabled}: IconProps) => (
    99|   <svg width="24px" height="24px" viewBox="-3 -3 24 24">
   100|     <path
   101|       d="M16,0 C17.1,0 18,0.9 18,2 L18,2 L18,16 C18,17.1 17.1,18 16,18 L16,18 L2,18 C0.9,18 0,17.1 0,16 L0,16 L0,2 C0,0.9 0.9,0 2,0 L2,0 Z"
   102|       id="Background"
   103|       className=" interaction-focus-outline"
   104|       style={{transition: 'fill 100ms linear'}}
   105|       fill={Colors.White}
   106|     />
   107|     <path
   108|       id="Border"
   109|       className="interaction-darken"
   110|       d="M15 16H3C2.45 16 2 15.55 2 15V3C2 2.45 2.45 2 3 2H15C15.55 2 16 2.45 16 3V15C16 15.55 15.55 16 15 16ZM16 0H2C0.9 0 0 0.9 0 2V16C0 17.1 0.9 18 2 18H16C17.1 18 18 17.1 18 16V2C18 0.9 17.1 0 16 0Z"
   111|       fill={Colors.Gray300}
   112|       style={{opacity: disabled ? (checked ? 0.4 : 0.6) : 1}}
   113|     />
   114|     <path
   115|       d="M16,0 C17.1,0 18,0.9 18,2 L18,2 L18,16 C18,17.1 17.1,18 16,18 L16,18 L2,18 C0.9,18 0,17.1 0,16 L0,16 L0,2 C0,0.9 0.9,0 2,0 L2,0 Z"
   116|       id="Fill"
   117|       className="interaction-darken"
   118|       style={{transition: 'fill 100ms linear', opacity: disabled ? 0.6 : 1}}
   119|       fill={checked || indeterminate ? fillColor : 'transparent'}
   120|     />
   121|     <polyline
   122|       id="Check"
   123|       fill="none"
   124|       stroke={Colors.White}
   125|       strokeWidth="2"
   126|       strokeLinecap="round"
   127|       strokeLinejoin="round"
   128|       strokeDasharray="16"
   129|       style={{
   130|         transition: 'stroke-dashoffset 100ms linear',
   131|         transitionDelay: !(checked && !indeterminate) ? '80ms' : '0',
   132|       }}
   133|       strokeDashoffset={checked && !indeterminate ? '0' : '16'}
   134|       points="3.5 9 7 12.5 14.5 5.0"
   135|     />
   136|     <line
   137|       id="Indeterminate"
   138|       x1="5"
   139|       y1="9"
   140|       x2="13"
   141|       y2="9"
   142|       style={{
   143|         transition: 'stroke-dashoffset 100ms linear',
   144|         transitionDelay: !indeterminate ? '80ms' : '0',
   145|       }}
   146|       stroke={Colors.White}
   147|       strokeWidth="2"
   148|       strokeDasharray="8"
   149|       strokeLinecap="round"
   150|       strokeDashoffset={indeterminate ? '0' : '8'}
   151|     />
   152|   </svg>
   153| );
   154| let counter = 0;
   155| const uniqueId = () => `checkbox-${counter++}`;
   156| const Base = ({
   157|   id,
   158|   checked,
   159|   label,
   160|   className,
   161|   format = 'check',
   162|   disabled = false,
   163|   indeterminate = false,
   164|   fillColor = Colors.Blue500,
   165|   children, // not passed to input
   166|   size,
   167|   onClick,
   168|   ...rest
   169| }: Props) => {
   170|   const uid = useRef(id || uniqueId());
   171|   const Component = React.useMemo(() => {
   172|     switch (format) {
   173|       case 'star':
   174|         return StarIcon;
   175|       case 'check':
   176|         return CheckIcon;
   177|       case 'switch':
   178|         return SwitchIcon;
   179|     }
   180|   }, [format]);
   181|   return (
   182|     <label htmlFor={uid.current} className={className} onClick={onClick}>
   183|       <input
   184|         {...rest}

# --- HUNK 2: Lines 207-263 ---
   207|     return css`
   208|       margin: -3px;
   209|     `;
   210|   }
   211|   if (format === 'switch') {
   212|     return css`
   213|       margin: -3px -9px;
   214|       transform: scale(0.5);
   215|     `;
   216|   }
   217|   return css`
   218|     margin: -3px -6px;
   219|     transform: scale(0.75);
   220|   `;
   221| };
   222| export const Checkbox = styled(Base)`
   223|   display: inline-flex;
   224|   position: relative;
   225|   user-select: none;
   226|   align-items: flex-start;
   227|   color: ${({disabled}) => (disabled ? DISABLED_COLOR : Colors.Gray900)};
   228|   cursor: pointer;
   229|   gap: 8px;
   230|   svg {
   231|     flex-shrink: 0;
   232|     ${svgStyle}
   233|   }
   234|   input[type='checkbox'] {
   235|     position: absolute;
   236|     cursor: pointer;
   237|     opacity: 0;
   238|     height: 0;
   239|     width: 0;
   240|   }
   241|   input:focus + svg {
   242|     .interaction-focus-outline {
   243|       stroke: rgba(58, 151, 212, 0.6);
   244|       stroke-width: 6px;
   245|       paint-order: stroke fill;
   246|     }
   247|   }
   248|   /* Focus outline only when using keyboard, not when focusing via mouse,
   249|      if focus-visible is supported and this rule is understood. */
   250|   input:focus:not(input:focus-visible) + svg {
   251|     .interaction-focus-outline {
   252|       stroke-width: 0;
   253|     }
   254|   }
   255|   ${({disabled}) =>
   256|     !disabled &&
   257|     `
   258|     svg:hover {
   259|       filter: drop-shadow(0 0 5px rgba(0, 0, 0, 0.12));
   260|       &.interaction-darken,
   261|       .interaction-darken {
   262|         filter: brightness(0.8);
   263|       }


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/ConfigTypeSchema.tsx
# Total hunks: 5
# ====================================================================
# --- HUNK 1: Lines 1-74 ---
     1| import * as React from 'react';
     2| import styled from 'styled-components';
     3| import {Colors} from './Colors';
     4| import {Popover} from './Popover';
     5| import {ConfigSchema_allConfigTypes as TypeData} from './configeditor/types/ConfigSchema';
     6| import {FontFamily} from './styles';
     7| type ConfigTypeSchemaTheme = 'dark' | 'light';
     8| export type {TypeData};
     9| interface ConfigTypeSchemaProps {
    10|   type: TypeData;
    11|   typesInScope: TypeData[];
    12|   theme?: ConfigTypeSchemaTheme;
    13|   maxDepth?: number;
    14| }
    15| type renderTypeRecursiveType = ((
    16|   type: TypeData,
    17|   typeLookup: {[typeName: string]: TypeData},
    18|   depth: number,
    19|   props: ConfigTypeSchemaProps,
    20|   typeName?: string,
    21| ) => React.ReactElement<HTMLElement>) &
    22|   ((
    23|     type: TypeData | undefined,
    24|     typeLookup: {[typeName: string]: TypeData},
    25|     depth: number,
    26|     props: ConfigTypeSchemaProps,
    27|     typeName: string,
    28|   ) => React.ReactElement<HTMLElement>);
    29| const renderTypeRecursive: renderTypeRecursiveType = (type, typeLookup, depth, props, typeName) => {
    30|   if (!type) {
    31|     return (
    32|       <span style={{color: Colors.Red500, opacity: 0.6}}>
    33|         type &quot;{typeName}&quot; not found
    34|       </span>
    35|     );
    36|   }
    37|   if (type.__typename === 'CompositeConfigType' && props.maxDepth && depth === props.maxDepth) {
    38|     return <span>...</span>;
    39|   }
    40|   if (type.__typename === 'CompositeConfigType') {
    41|     const innerIndent = '  '.repeat(depth + 1);
    42|     return (
    43|       <>
    44|         {`{`}
    45|         {type.isSelector && (
    46|           <DictBlockComment indent={innerIndent} content="One of the following:" />
    47|         )}
    48|         {type.fields.map((fieldData) => {
    49|           const keyDisplay = (
    50|             <DictKey
    51|               theme={props.theme}
    52|               style={
    53|                 fieldData.defaultValueAsJson
    54|                   ? {borderBottom: `dashed ${Colors.Blue200} 1px`, cursor: 'pointer'}
    55|                   : undefined
    56|               }
    57|             >
    58|               {fieldData.name}
    59|             </DictKey>
    60|           );
    61|           return (
    62|             <DictEntry key={fieldData.name}>
    63|               <DictBlockComment indent={innerIndent} content={fieldData.description} />
    64|               {innerIndent}
    65|               {fieldData.defaultValueAsJson ? (
    66|                 <Popover
    67|                   popoverClassName="config-tooltip"
    68|                   interactionKind="hover"
    69|                   hoverCloseDelay={100}
    70|                   content={<ConfigContent value={fieldData.defaultValueAsJson} />}
    71|                 >
    72|                   {keyDisplay}
    73|                 </Popover>
    74|               ) : (

# --- HUNK 2: Lines 148-195 ---
   148|     );
   149|   }
   150|   return <span>{type.givenName}</span>;
   151| };
   152| export const tryPrettyPrintJSON = (jsonString: string) => {
   153|   try {
   154|     return JSON.stringify(JSON.parse(jsonString), null, 2);
   155|   } catch (err) {
   156|     return jsonString;
   157|   }
   158| };
   159| const ConfigContent = React.memo(({value}: {value: string}) => (
   160|   <>
   161|     <ConfigHeader>
   162|       <strong>Default value</strong>
   163|     </ConfigHeader>
   164|     <ConfigJSON>{tryPrettyPrintJSON(value)}</ConfigJSON>
   165|   </>
   166| ));
   167| const ConfigHeader = styled.div`
   168|   background-color: ${Colors.Gray800};
   169|   color: ${Colors.White};
   170|   font-size: 13px;
   171|   padding: 8px;
   172| `;
   173| const ConfigJSON = styled.pre`
   174|   background-color: ${Colors.Gray900};
   175|   color: ${Colors.White};
   176|   whitespace: pre-wrap;
   177|   font-family: ${FontFamily.monospace};
   178|   font-size: 14px;
   179|   padding: 8px;
   180|   margin: 0;
   181| `;
   182| export const ConfigTypeSchema = React.memo((props: ConfigTypeSchemaProps) => {
   183|   const {type, typesInScope} = props;
   184|   const typeLookup: Record<string, TypeData> = {};
   185|   for (const typeInScope of typesInScope) {
   186|     typeLookup[typeInScope.key] = typeInScope;
   187|   }
   188|   return (
   189|     <HoveredDictEntryContextProvider>
   190|       <TypeSchemaContainer>
   191|         <DictBlockComment content={type.description} indent="" />
   192|         {renderTypeRecursive(type, typeLookup, 0, props)}
   193|       </TypeSchemaContainer>
   194|     </HoveredDictEntryContextProvider>
   195|   );

# --- HUNK 3: Lines 255-305 ---
   255|       React.useContext(HoveredDictEntryContext).useDictEntryHover();
   256|     return (
   257|       <DictEntryDiv2>
   258|         <DictEntryDiv
   259|           {...props}
   260|           $hovered={hovered}
   261|           onMouseEnter={onMouseEnter}
   262|           onMouseLeave={onMouseLeave}
   263|           ref={ref}
   264|         />
   265|       </DictEntryDiv2>
   266|     );
   267|   },
   268| );
   269| const DictEntryDiv2 = styled.div``;
   270| const DictEntryDiv = styled.div<{$hovered: boolean}>`
   271|   border: 1px solid transparent;
   272|   ${({$hovered}) =>
   273|     $hovered
   274|       ? `
   275|       border: 1px solid ${Colors.Gray200};
   276|       background-color: ${Colors.Gray100};
   277|       >${DictEntryDiv2} {
   278|         background-color: ${Colors.Gray50};
   279|       }
   280|     `
   281|       : ``}
   282|   }
   283| `;
   284| const TypeSchemaContainer = styled.code`
   285|   color: ${Colors.Gray400};
   286|   display: block;
   287|   white-space: pre-wrap;
   288|   font-size: 14px;
   289|   line-height: 18px;
   290| `;
   291| const DictKey = styled.span<{theme: ConfigTypeSchemaTheme | undefined}>`
   292|   color: ${({theme}) => (theme === 'dark' ? Colors.White : Colors.Dark)};
   293| `;
   294| const DictComment = styled.div`
   295|   /* This allows long comments to wrap as nice indented blocks, while
   296|      copy/pasting as a single line with space-based indentation. */
   297|   text-indent: -1.85em;
   298|   padding-left: 1.85em;
   299|   white-space: initial;
   300| `;
   301| const DictBlockComment = ({indent = '', content}: {indent: string; content: string | null}) =>
   302|   content !== null && content !== '' ? (
   303|     <DictComment>{`${indent.replace(/ /g, '\u00A0')}/* ${content} */`}</DictComment>
   304|   ) : null;
   305| const Optional = <span style={{fontWeight: 500, color: Colors.Yellow700}}>?</span>;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/CustomTooltipProvider.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-22 ---
     1| import React from 'react';
     2| import styled from 'styled-components';
     3| export const CustomTooltipProvider = () => {
     4|   const [state, setState] = React.useState<null | {
     5|     title: string;
     6|     style: React.CSSProperties;
     7|   }>(null);
     8|   React.useEffect(() => {
     9|     document.addEventListener('mouseover', (ev) => {
    10|       const el = ev.target;
    11|       if (!(el instanceof Element)) {
    12|         return;
    13|       }
    14|       if (el.getAttribute('id') === 'tooltip-container') {
    15|         return;
    16|       }
    17|       const tooltipParentEl = el.closest('[data-tooltip]') as HTMLElement;
    18|       if (!tooltipParentEl) {
    19|         setState(null);
    20|         return;
    21|       }
    22|       const isOverflowing = tooltipParentEl.offsetWidth < tooltipParentEl.scrollWidth;

# --- HUNK 2: Lines 39-69 ---
    39|       }
    40|       setState({
    41|         title: tooltip!,
    42|         style,
    43|       });
    44|     });
    45|   }, []);
    46|   if (!state) {
    47|     return <span />;
    48|   }
    49|   return (
    50|     <TooltipContainer id="tooltip-container" style={state.style}>
    51|       {state.title}
    52|     </TooltipContainer>
    53|   );
    54| };
    55| const TooltipContainer = styled.div`
    56|   position: absolute;
    57|   top: 0;
    58|   left: 0;
    59|   font-size: 11px;
    60|   padding: 3px;
    61|   color: #a88860;
    62|   background: #fffaf5;
    63|   border: 1px solid #dbc5ad;
    64|   transform: translate(5px, 5px);
    65|   box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
    66|   z-index: 100;
    67|   pointer-events: none;
    68|   user-select: none;
    69| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/DagsterCodeMirrorStyle.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-99 ---
     1| import {createGlobalStyle} from 'styled-components';
     2| import {Colors} from './Colors';
     3| import {Icons} from './Icon';
     4| import {FontFamily} from './styles';
     5| export const DagsterCodeMirrorStyle = createGlobalStyle`
     6|   .CodeMirror-gutter-elt {
     7|     .CodeMirror-lint-marker-error {
     8|       background-image: none;
     9|       background: ${Colors.Red500};
    10|       mask-image: url(${Icons.error});
    11|       mask-size: cover;
    12|       margin-bottom: 2px;
    13|     }
    14|   }
    15|   .CodeMirror-hint,
    16|   .CodeMirror-lint-marker-error,
    17|   .CodeMirror-lint-marker-warning,
    18|   .CodeMirror-lint-message-error,
    19|   .CodeMirror-lint-message-warning {
    20|     font-family: ${FontFamily.monospace};
    21|     font-size: 16px;
    22|   }
    23|   .CodeMirror.cm-s-dagster {
    24|     font-family: ${FontFamily.monospace};
    25|     font-size: 16px;
    26|     /* Note: Theme overrides */
    27|     &.cm-s-default .cm-comment {
    28|       color: #999;
    29|     }
    30|     .cm-atom {
    31|       color: ${Colors.Blue700};
    32|     }
    33|     .cm-comment {
    34|       color: ${Colors.Gray400};
    35|     }
    36|     .cm-meta {
    37|       color: ${Colors.Gray700};
    38|     }
    39|     .cm-number {
    40|       color: ${Colors.Red700};
    41|     }
    42|     .cm-string {
    43|       color: ${Colors.Green700};
    44|     }
    45|     .cm-string-2 {
    46|       color: ${Colors.Olive700};
    47|     }
    48|     .cm-variable-2 {
    49|       color: ${Colors.Blue500};
    50|     }
    51|     .cm-keyword {
    52|       color: ${Colors.Yellow700};
    53|     }
    54|     .CodeMirror-selected {
    55|       background-color: ${Colors.Blue50};
    56|     }
    57|     .CodeMirror-gutters {
    58|       background-color: ${Colors.Gray50};
    59|     }
    60|     .cm-indent {
    61|       display: inline-block;
    62|       &.cm-zero {
    63|         box-shadow: -1px 0 0 ${Colors.Green200};
    64|       }
    65|       &.cm-one {
    66|         box-shadow: -1px 0 0 ${Colors.Blue100};
    67|       }
    68|       &.cm-two {
    69|         box-shadow: -1px 0 0 ${Colors.LightPurple};
    70|       }
    71|       &.cm-three {
    72|         box-shadow: -1px 0 0 ${Colors.Red200};
    73|       }
    74|       &.cm-four {
    75|         box-shadow: -1px 0 0 ${Colors.Yellow200};
    76|       }
    77|       &.cm-five {
    78|         box-shadow: -1px 0 0 ${Colors.Olive200};
    79|       }
    80|       &.cm-six {
    81|         box-shadow: -1px 0 0 ${Colors.Gray300};
    82|       }
    83|     }
    84|   }
    85|   div.CodeMirror-lint-tooltip {
    86|     background: rgba(255, 247, 231, 1);
    87|     border: 1px solid ${Colors.Gray200};
    88|   }
    89|   .CodeMirror-lint-message {
    90|     background: transparent;
    91|   }
    92|   .CodeMirror-lint-message.CodeMirror-lint-message-error {
    93|     background: transparent;
    94|   }
    95|   /* Ensure that hints aren't vertically cutoff*/
    96|   .CodeMirror-hint div {
    97|     max-height: none !important;
    98|   }
    99| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Dialog.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-113 ---
     1| import {Dialog as BlueprintDialog} from '@blueprintjs/core';
     2| import * as React from 'react';
     3| import styled, {createGlobalStyle} from 'styled-components';
     4| import {Box} from './Box';
     5| import {Colors} from './Colors';
     6| import {ErrorBoundary} from './ErrorBoundary';
     7| import {Group} from './Group';
     8| import {IconName, Icon} from './Icon';
     9| interface Props
    10|   extends Omit<
    11|     React.ComponentProps<typeof BlueprintDialog>,
    12|     'title' | 'icon' | 'backdropClassName'
    13|   > {
    14|   children: React.ReactNode;
    15|   title?: React.ReactNode;
    16|   icon?: IconName;
    17| }
    18| export const Dialog = (props: Props) => {
    19|   const {icon, title, children, ...rest} = props;
    20|   return (
    21|     <BlueprintDialog
    22|       {...rest}
    23|       portalClassName="dagster-portal"
    24|       backdropClassName="dagster-backdrop"
    25|       className="dagster-dialog"
    26|     >
    27|       {title ? <DialogHeader icon={icon} label={title} /> : null}
    28|       <ErrorBoundary region="dialog">{children}</ErrorBoundary>
    29|     </BlueprintDialog>
    30|   );
    31| };
    32| interface HeaderProps {
    33|   icon?: IconName;
    34|   label: React.ReactNode;
    35| }
    36| export const DialogHeader = (props: HeaderProps) => {
    37|   const {icon, label} = props;
    38|   return (
    39|     <Box background={Colors.White} padding={{vertical: 16, horizontal: 20}} border="bottom">
    40|       <Group direction="row" spacing={8} alignItems="center">
    41|         {icon ? <Icon name={icon} color={Colors.Gray800} /> : null}
    42|         <DialogHeaderText>{label}</DialogHeaderText>
    43|       </Group>
    44|     </Box>
    45|   );
    46| };
    47| interface BodyProps {
    48|   children: React.ReactNode;
    49| }
    50| export const DialogBody = ({children, ...rest}: BodyProps) => {
    51|   return (
    52|     <Box padding={{vertical: 16, horizontal: 20}} background={Colors.White} {...rest}>
    53|       {children}
    54|     </Box>
    55|   );
    56| };
    57| interface DialogFooterProps {
    58|   children: React.ReactNode;
    59|   topBorder?: boolean;
    60|   left?: React.ReactNode;
    61| }
    62| export const DialogFooter = ({children, left, topBorder}: DialogFooterProps) => {
    63|   return (
    64|     <Box
    65|       padding={{bottom: 16, top: topBorder ? 16 : 8, horizontal: 20}}
    66|       border={topBorder ? 'top' : null}
    67|       background={Colors.White}
    68|       flex={{direction: 'row', alignItems: 'center', justifyContent: 'space-between'}}
    69|     >
    70|       <div>{left}</div>
    71|       <Box flex={{direction: 'row', alignItems: 'center', gap: 12}}>{children}</Box>
    72|     </Box>
    73|   );
    74| };
    75| export const DialogHeaderText = styled.div`
    76|   font-size: 16px;
    77|   font-weight: 500;
    78|   overflow: hidden;
    79|   text-overflow: ellipsis;
    80|   white-space: nowrap;
    81|   width: 100%;
    82| `;
    83| export const GlobalDialogStyle = createGlobalStyle`
    84|   .dagster-portal .bp4-overlay-backdrop {
    85|     background-color: ${Colors.WashGray};
    86|   }
    87|   .dagster-portal .bp4-dialog-container {
    88|     display: grid;
    89|     grid-template-rows: minmax(40px, 1fr) auto minmax(40px, 2fr);
    90|     grid-template-columns: 40px 8fr 40px;
    91|   }
    92|   .dagster-portal .bp4-dialog {
    93|     background-color: ${Colors.White};
    94|     border-radius: 4px;
    95|     box-shadow: rgba(0, 0, 0, 0.12) 0px 2px 12px;
    96|     grid-row: 2;
    97|     grid-column: 2;
    98|     margin: 0 auto;
    99|     overflow: hidden;
   100|     padding: 0;
   101|   }
   102|   .dagster-portal .bp4-dialog > :first-child {
   103|     border-top-left-radius: 4px;
   104|     border-top-right-radius: 4px;
   105|   }
   106|   .dagster-portal .bp4-dialog > :last-child {
   107|     border-bottom-right-radius: 4px;
   108|     border-bottom-left-radius: 4px;
   109|   }
   110|   .dagster-portal .bp4-dialog-container.bp4-overlay-enter > .bp4-dialog,
   111|   .dagster-portal .bp4-dialog-container.bp4-overlay-appear > .bp4-dialog {
   112|     opacity: 0;
   113|     transform:scale(0.95);


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/ErrorBoundary.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-24 ---
     1| import React from 'react';
     2| import styled from 'styled-components';
     3| import {Box} from './Box';
     4| import {Colors} from './Colors';
     5| import {Body, Subheading} from './Text';
     6| import {FontFamily} from './styles';
     7| export type ErrorCollectionContextValue = {
     8|   errorStackIncluded: boolean;
     9|   errorCollectionMessage: string;
    10|   onReportError: (error: Error, context: Record<string, any>) => void;
    11| };
    12| export const ErrorCollectionContext = React.createContext<ErrorCollectionContextValue>({
    13|   errorStackIncluded: true,
    14|   errorCollectionMessage:
    15|     `Please report this error to the Dagster team via GitHub or Slack. ` +
    16|     `Refresh the page to try again.`,
    17|   onReportError: (error, context) => {
    18|     console.error(error, context);
    19|   },
    20| });
    21| interface ErrorBoundaryProps {
    22|   children: React.ReactNode;
    23|   region: string;
    24|   resetErrorOnChange?: any[];

# --- HUNK 2: Lines 36-75 ---
    36|       this.state.errorResetPropsValue !== JSON.stringify(this.props.resetErrorOnChange)
    37|     ) {
    38|       this.setState({error: null, errorResetPropsValue: null});
    39|     }
    40|   }
    41|   componentDidCatch(error: Error, info: any) {
    42|     (this.context as ErrorCollectionContextValue).onReportError(error, {
    43|       info,
    44|       region: this.props.region,
    45|     });
    46|     this.setState({error, errorResetPropsValue: JSON.stringify(this.props.resetErrorOnChange)});
    47|   }
    48|   render() {
    49|     const {error} = this.state;
    50|     const {errorCollectionMessage, errorStackIncluded} = this
    51|       .context as ErrorCollectionContextValue;
    52|     if (error) {
    53|       return (
    54|         <Box
    55|           style={{width: '100%', height: '100%', flex: 1, overflow: 'hidden'}}
    56|           border={{side: 'all', color: Colors.HighlightRed}}
    57|           flex={{direction: 'column', gap: 8}}
    58|           padding={16}
    59|         >
    60|           <Subheading>Sorry, {this.props.region} can&apos;t be displayed.</Subheading>
    61|           <Body color={Colors.Gray700}>{errorCollectionMessage}</Body>
    62|           {errorStackIncluded && <Trace>{`${error.message}\n\n${error.stack}`}</Trace>}
    63|         </Box>
    64|       );
    65|     }
    66|     return this.props.children;
    67|   }
    68| }
    69| const Trace = styled.div`
    70|   color: ${Colors.Gray700};
    71|   font-family: ${FontFamily.monospace};
    72|   font-size: 1em;
    73|   white-space: pre;
    74|   padding-bottom: 1em;
    75| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Icon.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 134-174 ---
   134| import toggle_off from '../icon-svgs/toggle_off.svg';
   135| import toggle_on from '../icon-svgs/toggle_on.svg';
   136| import toggle_whitespace from '../icon-svgs/toggle_whitespace.svg';
   137| import tune from '../icon-svgs/tune.svg';
   138| import unfold_less from '../icon-svgs/unfold_less.svg';
   139| import unfold_more from '../icon-svgs/unfold_more.svg';
   140| import vertical_align_bottom from '../icon-svgs/vertical_align_bottom.svg';
   141| import vertical_align_center from '../icon-svgs/vertical_align_center.svg';
   142| import vertical_align_top from '../icon-svgs/vertical_align_top.svg';
   143| import view_list from '../icon-svgs/view_list.svg';
   144| import visibility from '../icon-svgs/visibility.svg';
   145| import visibility_off from '../icon-svgs/visibility_off.svg';
   146| import warning from '../icon-svgs/warning.svg';
   147| import warning_outline from '../icon-svgs/warning_outline.svg';
   148| import waterfall_chart from '../icon-svgs/waterfall_chart.svg';
   149| import workspaces from '../icon-svgs/workspaces.svg';
   150| import wysiwyg from '../icon-svgs/wysiwyg.svg';
   151| import youtube from '../icon-svgs/youtube.svg';
   152| import zoom_in from '../icon-svgs/zoom_in.svg';
   153| import zoom_out from '../icon-svgs/zoom_out.svg';
   154| import {Colors} from './Colors';
   155| export const Icons = {
   156|   auto_materialize_policy,
   157|   auto_observe,
   158|   asset,
   159|   asset_check,
   160|   asset_plot,
   161|   asset_non_sda,
   162|   asset_group,
   163|   backfill,
   164|   badge,
   165|   date,
   166|   expectation,
   167|   execute,
   168|   materialization,
   169|   observation,
   170|   job,
   171|   op,
   172|   op_selector,
   173|   op_dynamic: bolt,
   174|   partition_set: schedule,

# --- HUNK 2: Lines 311-351 ---
   311|   vertical_align_top,
   312|   wysiwyg,
   313|   zoom_in,
   314|   zoom_out,
   315| } as const;
   316| const SVGS_WITH_COLORS = new Set([(slack as any).src]);
   317| export type IconName = keyof typeof Icons;
   318| const rotations: {[key in IconName]?: string} = {
   319|   waterfall_chart: '-90deg',
   320| };
   321| export const IconNames = Object.keys(Icons) as IconName[];
   322| interface Props {
   323|   color?: string;
   324|   name: IconName;
   325|   size?: 12 | 16 | 20 | 24 | 48;
   326|   style?: React.CSSProperties;
   327| }
   328| export const Icon = React.memo((props: Props) => {
   329|   const {name, size = 16, style} = props;
   330|   const img = typeof Icons[name] === 'string' ? (Icons[name] as any) : Icons[name].src;
   331|   const color: string | null = props.color || (SVGS_WITH_COLORS.has(img) ? null : Colors.Dark);
   332|   return (
   333|     <IconWrapper
   334|       role="img"
   335|       $size={size}
   336|       $img={img}
   337|       $color={color}
   338|       $rotation={rotations[name] || null}
   339|       aria-label={name}
   340|       style={style}
   341|     />
   342|   );
   343| });
   344| interface WrapperProps {
   345|   $color: string | null;
   346|   $size: number;
   347|   $img: string;
   348|   $rotation: string | null;
   349| }
   350| export const IconWrapper = styled.div<WrapperProps>`
   351|   width: ${(p) => p.$size}px;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Menu.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-63 ---
     1| /* eslint-disable no-restricted-imports */
     2| import {
     3|   Intent,
     4|   Menu as BlueprintMenu,
     5|   MenuDivider as BlueprintMenuDivider,
     6|   MenuItem as BlueprintMenuItem,
     7| } from '@blueprintjs/core';
     8| import * as React from 'react';
     9| import styled from 'styled-components';
    10| import {Colors} from './Colors';
    11| import {IconName, Icon, IconWrapper} from './Icon';
    12| interface Props extends React.ComponentProps<typeof BlueprintMenu> {}
    13| export const Menu = (props: Props) => {
    14|   return <StyledMenu {...props} />;
    15| };
    16| const intentToTextColor = (intent: React.ComponentProps<typeof BlueprintMenuItem>['intent']) => {
    17|   switch (intent) {
    18|     case 'primary':
    19|       return Colors.Blue500;
    20|     case 'danger':
    21|       return Colors.Red500;
    22|     case 'success':
    23|       return Colors.Green500;
    24|     case 'warning':
    25|       return Colors.Yellow500;
    26|     case 'none':
    27|     default:
    28|       return Colors.Gray900;
    29|   }
    30| };
    31| const intentToIconColor = (intent: React.ComponentProps<typeof BlueprintMenuItem>['intent']) => {
    32|   switch (intent) {
    33|     case 'primary':
    34|       return Colors.Blue500;
    35|     case 'danger':
    36|       return Colors.Red500;
    37|     case 'success':
    38|       return Colors.Green500;
    39|     case 'warning':
    40|       return Colors.Yellow500;
    41|     case 'none':
    42|     default:
    43|       return Colors.Gray900;
    44|   }
    45| };
    46| export const iconWithColor = (icon?: IconName | JSX.Element, intent?: Intent) => {
    47|   if (icon) {
    48|     if (typeof icon === 'string') {
    49|       return <Icon name={icon} color={intentToIconColor(intent)} />;
    50|     }
    51|     return icon;
    52|   }
    53|   return null;
    54| };
    55| export interface CommonMenuItemProps {
    56|   icon?: IconName | JSX.Element;
    57| }
    58| interface ItemProps
    59|   extends CommonMenuItemProps,
    60|     Omit<React.ComponentProps<typeof BlueprintMenuItem>, 'href' | 'icon'> {}
    61| export const MenuItem = (props: ItemProps) => {
    62|   const {icon, intent, ...rest} = props;
    63|   return (

# --- HUNK 2: Lines 73-156 ---
    73|   extends CommonMenuItemProps,
    74|     Omit<React.ComponentProps<typeof BlueprintMenuItem>, 'href' | 'icon'> {
    75|   href: string;
    76| }
    77| /**
    78|  * If you want to use a menu item as a link, use `MenuLink` and provide a `to` prop.
    79|  */
    80| export const MenuExternalLink = (props: MenuExternalLinkProps) => {
    81|   const {icon, intent = 'none', ...rest} = props;
    82|   return (
    83|     <StyledMenuItem
    84|       {...rest}
    85|       target="_blank"
    86|       rel="noreferrer nofollow"
    87|       $textColor={intentToTextColor(intent)}
    88|       icon={iconWithColor(icon, intent)}
    89|     />
    90|   );
    91| };
    92| export const MenuDivider = styled(BlueprintMenuDivider)`
    93|   border-top: 1px solid ${Colors.Gray100};
    94|   margin: 2px 0;
    95|   :focus {
    96|     outline: none;
    97|   }
    98|   && h6 {
    99|     color: ${Colors.Gray500};
   100|     padding: 8px 6px 2px;
   101|     font-size: 12px;
   102|     font-weight: 300;
   103|     user-select: none;
   104|   }
   105| `;
   106| const StyledMenu = styled(BlueprintMenu)`
   107|   border-radius: 4px;
   108|   padding: 8px 4px;
   109| `;
   110| interface StyledMenuItemProps extends React.ComponentProps<typeof BlueprintMenuItem> {
   111|   $textColor: string;
   112| }
   113| const StyledMenuItem = styled(BlueprintMenuItem)<StyledMenuItemProps>`
   114|   border-radius: 4px;
   115|   color: ${({$textColor}) => $textColor};
   116|   line-height: 20px;
   117|   padding: 6px 8px 6px 12px;
   118|   transition:
   119|     background-color 50ms,
   120|     box-shadow 150ms;
   121|   align-items: flex-start;
   122|   font-size: 14px;
   123|   /**
   124|    * Use margin instead of align-items: center because the contents of the menu item may wrap 
   125|    * in unusual circumstances.
   126|    */
   127|   ${IconWrapper} {
   128|     margin-top: 2px;
   129|   }
   130|   &.bp4-active,
   131|   &.bp4-active:hover {
   132|     background-color: ${Colors.Blue500};
   133|     color: ${Colors.White};
   134|     ${IconWrapper} {
   135|       background-color: ${Colors.White};
   136|     }
   137|   }
   138|   &.bp4-disabled ${IconWrapper} {
   139|     opacity: 0.5;
   140|   }
   141|   &.bp4-active ${IconWrapper} {
   142|     color: ${Colors.White};
   143|   }
   144|   ${IconWrapper}:first-child {
   145|     margin-left: -4px;
   146|   }
   147|   &:hover {
   148|     background: ${Colors.Gray100};
   149|     color: ${({$textColor}) => $textColor};
   150|   }
   151|   &:focus {
   152|     color: ${({$textColor}) => $textColor};
   153|     box-shadow: rgba(58, 151, 212, 0.6) 0 0 0 2px;
   154|     outline: none;
   155|   }
   156| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/MetadataTable.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-24 ---
     1| import * as React from 'react';
     2| import styled from 'styled-components';
     3| import {Box} from './Box';
     4| import {Colors} from './Colors';
     5| import {Table, TableProps} from './Table';
     6| export type MetadataTableRow = {key: string; label?: React.ReactNode; value: React.ReactNode};
     7| interface Props {
     8|   dark?: boolean;
     9|   rows: (MetadataTableRow | null | undefined)[];
    10|   spacing: 0 | 2 | 4;
    11| }
    12| export const MetadataTable = (props: Props) => {
    13|   const {rows, spacing, dark = false} = props;
    14|   return (
    15|     <StyledTable>
    16|       <tbody>
    17|         {rows.map((pair: MetadataTableRow | null | undefined) => {
    18|           if (!pair) {
    19|             return null;
    20|           }
    21|           const {key, label, value} = pair;
    22|           return (
    23|             <tr key={key}>
    24|               <td>

# --- HUNK 2: Lines 32-65 ---
    32|             </tr>
    33|           );
    34|         })}
    35|       </tbody>
    36|     </StyledTable>
    37|   );
    38| };
    39| MetadataTable.defaultProps = {
    40|   spacing: 4,
    41| };
    42| export const StyledTable = styled.table`
    43|   border-spacing: 0;
    44|   td {
    45|     vertical-align: top;
    46|   }
    47|   td .bp4-control {
    48|     margin-bottom: 0;
    49|   }
    50| `;
    51| const MetadataKey = styled.div<{$dark: boolean}>`
    52|   color: ${({$dark}) => ($dark ? Colors.Gray200 : Colors.Gray600)};
    53|   font-weight: 400;
    54| `;
    55| export const MetadataTableWIP = styled(Table)<TableProps>`
    56|   td:first-child {
    57|     white-space: nowrap;
    58|     width: 1px;
    59|     max-width: 400px;
    60|     word-break: break-word;
    61|     overflow: hidden;
    62|     padding-right: 24px;
    63|     text-overflow: ellipsis;
    64|   }
    65| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/NewConfigEditor.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-72 ---
     1| import 'codemirror/addon/comment/comment';
     2| import 'codemirror/addon/dialog/dialog';
     3| import 'codemirror/addon/fold/foldgutter';
     4| import 'codemirror/addon/fold/foldgutter.css';
     5| import 'codemirror/addon/fold/indent-fold';
     6| import 'codemirror/addon/hint/show-hint';
     7| import 'codemirror/addon/hint/show-hint.css';
     8| import 'codemirror/addon/lint/lint.css';
     9| import 'codemirror/addon/search/jump-to-line';
    10| import 'codemirror/addon/search/search';
    11| import 'codemirror/addon/search/searchcursor';
    12| import 'codemirror/keymap/sublime';
    13| import debounce from 'lodash/debounce';
    14| import * as React from 'react';
    15| import {createGlobalStyle} from 'styled-components';
    16| import * as yaml from 'yaml';
    17| import {StyledRawCodeMirror} from './StyledRawCodeMirror';
    18| import {patchLint} from './configeditor/codemirror-yaml/lint';
    19| import {
    20|   YamlModeValidateFunction,
    21|   expandAutocompletionContextAtCursor,
    22|   findRangeInDocumentFromPath,
    23|   YamlModeValidationResult,
    24| } from './configeditor/codemirror-yaml/mode';
    25| import {ConfigEditorHelpContext} from './configeditor/types/ConfigEditorHelpContext';
    26| import {ConfigSchema} from './configeditor/types/ConfigSchema';
    27| export {isHelpContextEqual} from './configeditor/isHelpContextEqual';
    28| export {ConfigEditorHelp} from './configeditor/ConfigEditorHelp';
    29| export type {ConfigEditorHelpContext, ConfigSchema, YamlModeValidationResult};
    30| patchLint();
    31| interface ConfigEditorProps {
    32|   configCode: string;
    33|   readOnly: boolean;
    34|   configSchema?: ConfigSchema | null;
    35|   checkConfig: YamlModeValidateFunction;
    36|   onConfigChange: (newValue: string) => void;
    37|   onHelpContextChange: (helpContext: ConfigEditorHelpContext | null) => void;
    38| }
    39| const AUTO_COMPLETE_AFTER_KEY = /^[a-zA-Z0-9_@(]$/;
    40| const performLint = debounce((editor: any) => {
    41|   editor.performLint();
    42| }, 1000);
    43| const performInitialPass = (
    44|   editor: CodeMirror.Editor,
    45|   onHelpContextChange: (helpContext: ConfigEditorHelpContext | null) => void,
    46| ) => {
    47|   performLint(editor);
    48|   const {context} = expandAutocompletionContextAtCursor(editor);
    49|   onHelpContextChange(context ? {type: context.closestMappingType} : null);
    50| };
    51| const ConfigEditorStyle = createGlobalStyle`
    52|   .CodeMirror.cm-s-config-editor {
    53|     height: initial;
    54|     position: absolute;
    55|     inset: 0;
    56|   }
    57| `;
    58| export type ConfigEditorHandle = {
    59|   moveCursor: (line: number, ch: number) => void;
    60|   moveCursorToPath: (path: string[]) => void;
    61| };
    62| export const NewConfigEditor = React.forwardRef<ConfigEditorHandle, ConfigEditorProps>(
    63|   (props, ref) => {
    64|     const {configCode, checkConfig, readOnly, configSchema, onConfigChange, onHelpContextChange} =
    65|       props;
    66|     const editor = React.useRef<CodeMirror.Editor | null>(null);
    67|     React.useImperativeHandle(
    68|       ref,
    69|       () => {
    70|         const moveCursor = (line: number, ch: number) => {
    71|           if (!editor.current) {
    72|             return;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/NonIdealState.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-59 ---
     1| import * as React from 'react';
     2| import {Box} from './Box';
     3| import {Colors} from './Colors';
     4| import {IconName, Icon} from './Icon';
     5| import {Spinner} from './Spinner';
     6| import {Subheading} from './Text';
     7| export type NonIdealStateProps = React.DetailedHTMLProps<
     8|   React.InputHTMLAttributes<HTMLInputElement>,
     9|   HTMLInputElement
    10| > & {
    11|   icon?: 'error' | 'no-results' | 'spinner' | IconName;
    12|   title: string;
    13|   description?: React.ReactNode;
    14|   action?: React.ReactNode;
    15|   shrinkable?: boolean;
    16| };
    17| export const NonIdealState = ({
    18|   title,
    19|   description,
    20|   icon,
    21|   action,
    22|   shrinkable,
    23| }: NonIdealStateProps) => {
    24|   const singleContentElement = [title, description, action].filter(Boolean).length === 1;
    25|   return (
    26|     <Box
    27|       flex={{gap: 20, alignItems: singleContentElement ? 'center' : 'flex-start'}}
    28|       background={Colors.Gray50}
    29|       padding={24}
    30|       style={{
    31|         margin: 'auto',
    32|         borderRadius: 8,
    33|         width: shrinkable ? 'initial' : 'max-content',
    34|         maxWidth: 500,
    35|       }}
    36|     >
    37|       {icon === 'spinner' ? (
    38|         <Spinner purpose="section" />
    39|       ) : icon === 'no-results' ? (
    40|         <Icon name="search" size={48} color={Colors.Gray400} />
    41|       ) : icon ? (
    42|         <Icon name={icon} size={48} color={Colors.Gray400} />
    43|       ) : null}
    44|       <Box
    45|         flex={{
    46|           gap: 8,
    47|           direction: 'column',
    48|           alignItems: 'flex-start',
    49|           shrink: 1,
    50|           grow: 1,
    51|         }}
    52|       >
    53|         {title && <Subheading style={{color: Colors.Gray900}}>{title}</Subheading>}
    54|         {description && <div style={{color: Colors.Gray500}}>{description}</div>}
    55|         {action}
    56|       </Box>
    57|     </Box>
    58|   );
    59| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/PageHeader.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-42 ---
     1| import * as React from 'react';
     2| import styled from 'styled-components';
     3| import {Box} from './Box';
     4| import {Colors} from './Colors';
     5| import {IconName} from './Icon';
     6| interface Props {
     7|   title: React.ReactNode;
     8|   tags?: React.ReactNode;
     9|   icon?: IconName;
    10|   description?: React.ReactNode;
    11|   metadata?: React.ReactNode;
    12|   right?: React.ReactNode;
    13|   tabs?: React.ReactNode;
    14| }
    15| export const PageHeader = (props: Props) => {
    16|   const {title, tags, right, tabs} = props;
    17|   return (
    18|     <PageHeaderContainer
    19|       background={Colors.Gray50}
    20|       padding={{top: 16, left: 24, right: 12}}
    21|       border="bottom"
    22|     >
    23|       <Box flex={{direction: 'row', justifyContent: 'space-between'}} padding={{bottom: 16}}>
    24|         <Box flex={{direction: 'row', alignItems: 'flex-start', gap: 12, wrap: 'wrap'}}>
    25|           {title}
    26|           {tags}
    27|         </Box>
    28|         {right}
    29|       </Box>
    30|       {tabs}
    31|     </PageHeaderContainer>
    32|   );
    33| };
    34| const PageHeaderContainer = styled(Box)`
    35|   width: 100%;
    36|   /**
    37|    * Blueprint breadcrumbs annoyingly have a built-in height.
    38|    */
    39|   .bp4-breadcrumbs {
    40|     height: auto;
    41|   }
    42| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Popover.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-75 ---
     1| /* eslint-disable @typescript-eslint/no-var-requires */
     2| import {Popover2, Popover2Props} from '@blueprintjs/popover2';
     3| import deepmerge from 'deepmerge';
     4| import * as React from 'react';
     5| import {createGlobalStyle} from 'styled-components';
     6| import searchSVG from '../icon-svgs/search.svg';
     7| import {Colors} from './Colors';
     8| import {FontFamily} from './styles';
     9| export const GlobalPopoverStyle = createGlobalStyle`
    10|   .dagster-popover.bp4-popover2,
    11|   .dagster-popover.bp4-popover {
    12|     box-shadow: rgba(0, 0, 0, 0.18) 0px 2px 12px;
    13|   }
    14|   .dagster-popover .bp4-popover2-content,
    15|   .dagster-popover .bp4-popover-content {
    16|     border-radius: 4px;
    17|     .bp4-input-group {
    18|       .bp4-icon.bp4-icon-search {
    19|         width: 16px;
    20|         height: 16px;
    21|         background: ${Colors.Gray900};
    22|         mask-image: url(${searchSVG.src});
    23|         mask-size: cover;
    24|         &::before { 
    25|           content: '';
    26|         }
    27|         svg {
    28|           display: none;
    29|         }
    30|       }
    31|       .bp4-input {
    32|         border: none;
    33|         border-radius: 8px;
    34|         box-shadow: ${Colors.Gray300} inset 0px 0px 0px 1px, ${Colors.KeylineGray} inset 2px 2px 1.5px;
    35|         font-family: ${FontFamily.default};
    36|         ::placeholder {
    37|           color: ${Colors.Gray500};
    38|         }
    39|       }
    40|     }
    41|   }
    42|   .dagster-popover .bp4-popover2-content > :first-child {
    43|     border-top-left-radius: 4px;
    44|     border-top-right-radius: 4px;
    45|   }
    46|   .dagster-popover .bp4-popover2-content > :last-child {
    47|     border-bottom-left-radius: 4px;
    48|     border-bottom-right-radius: 4px;
    49|   }
    50|   .dagster-popover .bp4-popover2-arrow-fill {
    51|     fill: ${Colors.Gray900};
    52|   }
    53|   .dagster-popover .bp4-popover2.bp4-dark .bp4-popover2-content,
    54|   .bp4-dark .dagster-popover .bp4-popover2 .bp4-popover2-content {
    55|     background-color: ${Colors.Gray900};
    56|   }
    57| `;
    58| const overwriteMerge = (destination: any[], source: any[]) => source;
    59| interface Props extends Popover2Props {
    60|   children: React.ReactNode;
    61| }
    62| export const Popover = (props: Props) => {
    63|   return (
    64|     <Popover2
    65|       minimal
    66|       autoFocus={false}
    67|       {...props}
    68|       popoverClassName={`dagster-popover ${props.popoverClassName}`}
    69|       modifiers={deepmerge(
    70|         {offset: {enabled: true, options: {offset: [0, 8]}}},
    71|         props.modifiers || {},
    72|         {arrayMerge: overwriteMerge},
    73|       )}
    74|     />
    75|   );


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/ProductTour.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-26 ---
     1| import {Placement} from '@blueprintjs/popover2';
     2| import React from 'react';
     3| import styled, {CSSProperties} from 'styled-components';
     4| import {Box} from './Box';
     5| import {Button} from './Button';
     6| import {Colors} from './Colors';
     7| import {Popover} from './Popover';
     8| import {Subheading} from './Text';
     9| export enum ProductTourPosition {
    10|   TOP_LEFT = 'top-start',
    11|   TOP_CENTER = 'top',
    12|   TOP_RIGHT = 'top-end',
    13|   BOTTOM_LEFT = 'bottom-start',
    14|   BOTTOM_CENTER = 'bottom',
    15|   BOTTOM_RIGHT = 'bottom-end',
    16| }
    17| type ObjectType =
    18|   | {img: string; video?: undefined; object?: undefined}
    19|   | {video: string; img?: undefined; object?: undefined}
    20|   | {object: React.ReactNode; video?: undefined; img?: undefined}
    21|   | {img?: undefined; video?: undefined; object?: undefined};
    22| type Props = {
    23|   children: React.ReactNode;
    24|   title: React.ReactNode;
    25|   description?: React.ReactNode;
    26|   actions?: {

# --- HUNK 2: Lines 71-119 ---
    71|         <>
    72|           <div />
    73|           <ProductTourContainer flex={{direction: 'column', gap: 4}} padding={16} style={{width}}>
    74|             <Box flex={{direction: 'column', gap: 8}}>
    75|               {media}
    76|               <Subheading style={{fontSize: '16px'}}>{title}</Subheading>
    77|             </Box>
    78|             <div>{description}</div>
    79|             {actionsJsx}
    80|           </ProductTourContainer>
    81|           <div />
    82|         </>
    83|       }
    84|     >
    85|       {children}
    86|     </Popover>
    87|   );
    88| };
    89| const ProductTourContainer = styled(Box)`
    90|   pointer-events: all;
    91|   background: ${Colors.Gray900};
    92|   border-radius: 4px;
    93|   padding: 16px;
    94|   box-shadow: 0px 2px 12px rgba(0, 0, 0, 0.12);
    95|   &,
    96|   button {
    97|     &,
    98|     &:hover,
    99|     &:focus {
   100|       color: ${Colors.White};
   101|     }
   102|   }
   103| `;
   104| const ActionsContainer = styled(Box)`
   105|   > *:not(:first-child) {
   106|     &,
   107|     &:hover,
   108|     &:focus {
   109|       border: none;
   110|       box-shadow: none;
   111|     }
   112|   }
   113|   > * {
   114|     &:hover,
   115|     &:focus {
   116|       opacity: 0.9;
   117|     }
   118|   }
   119| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/ProgressBar.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-28 ---
     1| import {ProgressBar as BlueprintProgressBar, ProgressBarProps} from '@blueprintjs/core';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| import {Colors} from './Colors';
     5| interface Props extends ProgressBarProps {
     6|   fillColor?: string;
     7| }
     8| export const ProgressBar = ({fillColor = Colors.Gray600, ...rest}: Props) => {
     9|   return (
    10|     <StyledProgressBar
    11|       {...rest}
    12|       intent="none"
    13|       $fillColor={fillColor}
    14|       stripes={rest.animate ? true : false}
    15|     />
    16|   );
    17| };
    18| const StyledProgressBar = styled(BlueprintProgressBar)<{$fillColor: string}>`
    19|   &.bp4-progress-bar {
    20|     background: transparent;
    21|     ::before {
    22|       content: '';
    23|       background: ${(p) => p.$fillColor};
    24|       position: absolute;
    25|       inset: 0;
    26|       opacity: 0.25;
    27|     }
    28|     .bp4-progress-meter {


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Radio.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-43 ---
     1| import styled from 'styled-components';
     2| import {Colors} from './Colors';
     3| import {IconWrapper} from './Icon';
     4| export const RadioContainer = styled.div`
     5|   .bp4-control {
     6|     margin-bottom: 0;
     7|     display: flex;
     8|     flex-direction: row;
     9|     align-items: center;
    10|     input {
    11|       display: none;
    12|     }
    13|   }
    14|   .bp4-control.bp4-radio {
    15|     padding: 4px 4px 4px 0;
    16|   }
    17|   .bp4-control.bp4-radio.bp4-disabled {
    18|     cursor: default;
    19|     color: ${Colors.Gray300};
    20|     ${IconWrapper} {
    21|       opacity: 0.3;
    22|     }
    23|   }
    24|   .bp4-control .bp4-control-indicator {
    25|     margin: 0;
    26|     margin-right: 8px;
    27|   }
    28|   .bp4-control input:checked ~ .bp4-control-indicator {
    29|     background-color: ${Colors.Blue500};
    30|   }
    31|   .bp4-control.bp4-radio input:disabled ~ .bp4-control-indicator {
    32|     cursor: default;
    33|     opacity: 0.7;
    34|   }
    35|   .bp4-control.bp4-radio input:disabled:checked ~ .bp4-control-indicator {
    36|     background-color: ${Colors.Blue200};
    37|   }
    38|   .bp4-control .bp4-control-indicator,
    39|   .bp4-control .bp4-control-indicator::before {
    40|     width: 18px;
    41|     height: 18px;
    42|   }
    43| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/RefreshableCountdown.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-51 ---
     1| import * as React from 'react';
     2| import styled from 'styled-components';
     3| import {Colors} from './Colors';
     4| import {Group} from './Group';
     5| import {Icon, IconWrapper} from './Icon';
     6| import {Tooltip} from './Tooltip';
     7| import {secondsToCountdownTime} from './secondsToCountdownTime';
     8| interface Props {
     9|   refreshing: boolean;
    10|   seconds?: number;
    11|   onRefresh: () => void;
    12|   dataDescription?: string;
    13| }
    14| export const RefreshableCountdown = (props: Props) => {
    15|   const {refreshing, seconds, onRefresh, dataDescription = 'data'} = props;
    16|   return (
    17|     <Group direction="row" spacing={8} alignItems="center">
    18|       <span
    19|         style={{color: Colors.Gray400, fontVariantNumeric: 'tabular-nums', whiteSpace: 'nowrap'}}
    20|       >
    21|         {refreshing
    22|           ? `Refreshing ${dataDescription}`
    23|           : seconds === undefined
    24|           ? null
    25|           : secondsToCountdownTime(seconds)}
    26|       </span>
    27|       <Tooltip content={<span style={{whiteSpace: 'nowrap'}}>Refresh now</span>} position="top">
    28|         <RefreshButton onClick={onRefresh}>
    29|           <Icon name="refresh" color={Colors.Gray400} />
    30|         </RefreshButton>
    31|       </Tooltip>
    32|     </Group>
    33|   );
    34| };
    35| export const RefreshButton = styled.button`
    36|   border: none;
    37|   cursor: pointer;
    38|   padding: 8px;
    39|   margin: -8px;
    40|   outline: none;
    41|   background-color: transparent;
    42|   position: relative;
    43|   top: 1px;
    44|   & ${IconWrapper} {
    45|     display: block;
    46|     transition: color 100ms linear;
    47|     &:hover {
    48|       color: ${Colors.Dark};
    49|     }
    50|   }
    51| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Slider.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-70 ---
     1| import {
     2|   Slider as BlueprintSlider,
     3|   MultiSlider as BlueprintMultiSlider,
     4|   SliderProps as BlueprintSliderProps,
     5|   MultiSliderProps as BlueprintMultiSliderProps,
     6| } from '@blueprintjs/core';
     7| import * as React from 'react';
     8| import styled, {css} from 'styled-components';
     9| import {Colors} from './Colors';
    10| interface SliderProps extends BlueprintSliderProps {
    11|   fillColor?: string;
    12| }
    13| export const Slider = ({fillColor = Colors.Gray600, ...rest}: SliderProps) => {
    14|   return <StyledSlider {...rest} intent="none" $fillColor={fillColor} />;
    15| };
    16| interface MultiSliderProps extends BlueprintMultiSliderProps {
    17|   fillColor?: string;
    18|   children: React.ReactNode;
    19| }
    20| export const MultiSlider = ({fillColor = Colors.Gray600, ...rest}: MultiSliderProps) => {
    21|   return <StyledMultiSlider {...rest} intent="none" $fillColor={fillColor} />;
    22| };
    23| MultiSlider.Handle = BlueprintMultiSlider.Handle;
    24| export const SliderStyles = css<{$fillColor: string}>`
    25|   .bp4-slider-track {
    26|     height: 8px;
    27|     .bp4-slider-progress {
    28|       background-color: ${(p) => p.$fillColor};
    29|       opacity: 0.2;
    30|       height: 8px;
    31|     }
    32|     .bp4-slider-progress.bp4-intent-primary {
    33|       background-color: ${(p) => p.$fillColor};
    34|       opacity: 1;
    35|       height: 8px;
    36|     }
    37|   }
    38|   &.bp4-vertical {
    39|     width: 20px;
    40|     min-width: 20px;
    41|   }
    42|   &.bp4-vertical .bp4-slider-track,
    43|   &.bp4-vertical .bp4-slider-track .bp4-slider-progress {
    44|     height: initial;
    45|     width: 8px;
    46|   }
    47|   .bp4-slider-handle {
    48|     width: 18px;
    49|     height: 18px;
    50|     border-radius: 50%;
    51|     border: 2px solid ${Colors.Gray300};
    52|     background: ${Colors.White};
    53|     box-shadow: none;
    54|     &:hover {
    55|       border: 2px solid ${Colors.Gray400};
    56|       box-shadow: rgba(0, 0, 0, 0.12) 0px 2px 12px 0px;
    57|     }
    58|     .bp4-slider-label {
    59|       background: ${Colors.Gray900};
    60|       box-shadow: 0 1px 4px rgba(0,0,0,0.15)
    61|       padding: 4px 8px;
    62|     }
    63|   }
    64| `;
    65| const StyledMultiSlider = styled(BlueprintMultiSlider)<{$fillColor: string}>`
    66|   ${SliderStyles}
    67| `;
    68| const StyledSlider = styled(BlueprintSlider)<{$fillColor: string}>`
    69|   ${SliderStyles}
    70| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Spinner.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-36 ---
     1| import {Spinner as BlueprintSpinner} from '@blueprintjs/core';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| import {Colors} from './Colors';
     5| type SpinnerPurpose = 'page' | 'section' | 'body-text' | 'caption-text';
     6| interface Props {
     7|   purpose: SpinnerPurpose;
     8|   value?: number;
     9|   fillColor?: string;
    10|   stopped?: boolean;
    11|   title?: string;
    12| }
    13| export const Spinner = ({
    14|   purpose,
    15|   value,
    16|   fillColor = Colors.Gray600,
    17|   stopped,
    18|   title = 'Loading',
    19| }: Props) => {
    20|   const size = () => {
    21|     switch (purpose) {
    22|       case 'page':
    23|         return 80;
    24|       case 'section':
    25|         return 32;
    26|       case 'caption-text':
    27|         return 10;
    28|       case 'body-text':
    29|       default:
    30|         return 12;
    31|     }
    32|   };
    33|   const padding = () => {
    34|     switch (purpose) {
    35|       case 'caption-text':
    36|         return 1;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/SplitPanelContainer.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-24 ---
     1| import * as React from 'react';
     2| import styled from 'styled-components';
     3| import {Button} from './Button';
     4| import {Colors} from './Colors';
     5| import {Icon} from './Icon';
     6| const DIVIDER_THICKNESS = 2;
     7| interface SplitPanelContainerProps {
     8|   axis?: 'horizontal' | 'vertical';
     9|   identifier: string;
    10|   first: React.ReactNode;
    11|   firstInitialPercent: number;
    12|   firstMinSize?: number;
    13|   second: React.ReactNode | null; // Note: pass null to hide / animate away the second panel
    14| }
    15| interface SplitPanelContainerState {
    16|   size: number;
    17|   key: string;
    18|   resizing: boolean;
    19| }
    20| export class SplitPanelContainer extends React.Component<
    21|   SplitPanelContainerProps,
    22|   SplitPanelContainerState
    23| > {
    24|   constructor(props: SplitPanelContainerProps) {

# --- HUNK 2: Lines 140-188 ---
   140|         }
   141|         const current = container.current.state.size;
   142|         if (current < 90) {
   143|           setPrevSize(current);
   144|           setOpen(false);
   145|           container.current.onChangeSize(100);
   146|         } else {
   147|           setOpen(true);
   148|           container.current.onChangeSize(
   149|             prevSize === 'unknown' ? container.current.props.firstInitialPercent : prevSize,
   150|           );
   151|         }
   152|       }}
   153|     />
   154|   );
   155| };
   156| const DividerWrapper = {
   157|   horizontal: styled.div<{resizing: boolean}>`
   158|     width: ${DIVIDER_THICKNESS}px;
   159|     z-index: 1;
   160|     background: ${(p) => (p.resizing ? Colors.Gray400 : Colors.KeylineGray)};
   161|     margin-left: -1px;
   162|     overflow: visible;
   163|     position: relative;
   164|   `,
   165|   vertical: styled.div<{resizing: boolean}>`
   166|     height: ${DIVIDER_THICKNESS}px;
   167|     z-index: 1;
   168|     background: ${(p) => (p.resizing ? Colors.Gray400 : Colors.KeylineGray)};
   169|     margin-top: -1px;
   170|     overflow: visible;
   171|     position: relative;
   172|   `,
   173| };
   174| const DividerHitArea = {
   175|   horizontal: styled.div`
   176|     width: 17px;
   177|     height: 100%;
   178|     z-index: 1;
   179|     cursor: ew-resize;
   180|     position: relative;
   181|     left: -8px;
   182|   `,
   183|   vertical: styled.div`
   184|     height: 17px;
   185|     width: 100%;
   186|     z-index: 1;
   187|     cursor: ns-resize;
   188|     position: relative;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/StyledButton.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-81 ---
     1| import styled from 'styled-components';
     2| import {IconWrapper} from './Icon';
     3| import {SpinnerWrapper} from './Spinner';
     4| import {FontFamily} from './styles';
     5| interface StyledButtonProps {
     6|   $fillColor: string;
     7|   $strokeColor: string;
     8|   $textColor: string;
     9| }
    10| export const StyledButton = styled.button<StyledButtonProps>`
    11|   align-items: center;
    12|   background-color: ${({$fillColor}) => $fillColor || 'transparent'};
    13|   border: none;
    14|   border-radius: 8px;
    15|   color: ${({$textColor}) => $textColor};
    16|   cursor: pointer;
    17|   display: inline-flex;
    18|   flex-direction: row;
    19|   font-family: ${FontFamily.default};
    20|   font-size: 14px;
    21|   line-height: 20px;
    22|   padding: 6px 12px;
    23|   transition:
    24|     background 100ms,
    25|     box-shadow 150ms,
    26|     filter 100ms,
    27|     opacity 150ms;
    28|   user-select: none;
    29|   white-space: nowrap;
    30|   box-shadow: ${({$strokeColor}) => `${$strokeColor} inset 0px 0px 0px 1px`};
    31|   :hover {
    32|     box-shadow: ${({$strokeColor}) =>
    33|       `${$strokeColor} inset 0px 0px 0px 1px, rgba(0, 0, 0, 0.12) 0px 2px 12px 0px;`};
    34|     color: ${({$textColor}) => $textColor};
    35|     text-decoration: none;
    36|   }
    37|   :focus {
    38|     box-shadow: rgba(58, 151, 212, 0.6) 0 0 0 3px;
    39|     outline: none;
    40|   }
    41|   :focus:not(:focus-visible) {
    42|     box-shadow: ${({$strokeColor}) =>
    43|       `${$strokeColor} inset 0px 0px 0px 1px, rgba(0, 0, 0, 0.12) 0px 2px 12px 0px;`};
    44|   }
    45|   :active:not(:disabled) {
    46|     filter: brightness(0.95);
    47|   }
    48|   :disabled {
    49|     cursor: default;
    50|     opacity: 0.5;
    51|   }
    52|   :disabled:hover {
    53|     box-shadow: ${({$strokeColor}) => `${$strokeColor} inset 0px 0px 0px 1px`};
    54|   }
    55|   ${SpinnerWrapper} {
    56|     align-self: center;
    57|     display: block;
    58|   }
    59|   ${IconWrapper} {
    60|     color: ${({$textColor}) => $textColor};
    61|     background-color: ${({$textColor}) => $textColor};
    62|     align-self: center;
    63|     display: block;
    64|   }
    65|   ${SpinnerWrapper}:first-child,
    66|   ${IconWrapper}:first-child {
    67|     margin-left: -4px;
    68|     margin-right: 4px;
    69|   }
    70|   ${SpinnerWrapper}:last-child,
    71|   ${IconWrapper}:last-child {
    72|     margin-right: -4px;
    73|     margin-left: 4px;
    74|   }
    75|   ${SpinnerWrapper}:first-child:last-child {
    76|     margin: 2px -4px;
    77|   }
    78|   ${IconWrapper}:first-child:last-child {
    79|     margin: 2px -4px;
    80|   }
    81| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/SubwayDot.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-24 ---
     1| import {Colors} from '@blueprintjs/core';
     2| import memoize from 'lodash/memoize';
     3| import * as React from 'react';
     4| import styled from 'styled-components';
     5| import {Icon, IconName} from './Icon';
     6| const SECONDARY_COLORS = {
     7|   Orchid: '#8982DD',
     8|   Fern: '#508E74',
     9|   Teal: '#0080B6',
    10|   Rose: '#D16FA4',
    11|   Ruby: '#CF4C49',
    12|   Gold: '#CC8430',
    13|   Stone: '#8F988C',
    14|   Sand: '#9E7D56',
    15|   Mustard: '#BDB247',
    16| };
    17| const colors = [
    18|   SECONDARY_COLORS.Orchid,
    19|   SECONDARY_COLORS.Fern,
    20|   SECONDARY_COLORS.Teal,
    21|   SECONDARY_COLORS.Rose,
    22|   SECONDARY_COLORS.Ruby,
    23|   SECONDARY_COLORS.Gold,
    24|   SECONDARY_COLORS.Stone,

# --- HUNK 2: Lines 34-90 ---
    34|       }, 0),
    35|     ) % colors.length;
    36|   return colors[index]!;
    37| });
    38| type IconProps = React.ComponentProps<typeof Icon>;
    39| interface Props {
    40|   label: string;
    41|   fontSize?: number;
    42|   icon?: IconName;
    43|   iconSize?: IconProps['size'];
    44|   blobColor?: string;
    45|   blobSize?: number;
    46| }
    47| export const SubwayDot = React.memo(
    48|   ({label, fontSize = 13, blobColor, icon, iconSize = 16, blobSize = 24}: Props) => (
    49|     <Blob $color={blobColor || colorForString(label)} $blobSize={blobSize} $fontSize={fontSize}>
    50|       {icon ? (
    51|         <Icon
    52|           size={iconSize}
    53|           name={icon}
    54|           color={Colors.WHITE}
    55|           style={{marginLeft: 0, marginTop: 0, opacity: 0.9}}
    56|         />
    57|       ) : (
    58|         label.slice(0, 1)
    59|       )}
    60|     </Blob>
    61|   ),
    62| );
    63| interface BlobProps {
    64|   $color: string;
    65|   $blobSize: number;
    66|   $fontSize: number;
    67| }
    68| const Blob = styled.div<BlobProps>`
    69|   align-items: center;
    70|   background-color: ${({$color}) => $color};
    71|   border-radius: 50%;
    72|   color: ${Colors.WHITE};
    73|   cursor: pointer;
    74|   display: flex;
    75|   flex-shrink: 0;
    76|   font-size: ${({$fontSize}) => `${$fontSize}px`};
    77|   height: ${({$blobSize}) => `${$blobSize}px`};
    78|   justify-content: center;
    79|   outline: none;
    80|   text-transform: uppercase;
    81|   transition:
    82|     background 50ms linear,
    83|     color 50ms linear;
    84|   user-select: none;
    85|   width: ${({$blobSize}) => `${$blobSize}px`};
    86|   :focus,
    87|   :active {
    88|     outline: none;
    89|   }
    90| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Suggest.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-42 ---
     1| import {InputGroupProps2, IPopoverProps} from '@blueprintjs/core';
     2| import {isCreateNewItem, Suggest as BlueprintSuggest, SuggestProps} from '@blueprintjs/select';
     3| import deepmerge from 'deepmerge';
     4| import * as React from 'react';
     5| import {List as _List} from 'react-virtualized';
     6| import {createGlobalStyle} from 'styled-components';
     7| import {Box} from './Box';
     8| import {Colors} from './Colors';
     9| import {IconWrapper} from './Icon';
    10| import {TextInputContainerStyles, TextInputStyles} from './TextInput';
    11| const List: any = _List;
    12| export const GlobalSuggestStyle = createGlobalStyle`
    13|   .dagster-suggest-input.bp4-input-group {
    14|     ${TextInputContainerStyles}
    15|     &:disabled ${IconWrapper}:first-child {
    16|       background-color: ${Colors.Gray400};
    17|     }
    18|     .bp4-input {
    19|       ${TextInputStyles}
    20|       height: auto;
    21|       ::placeholder {
    22|         color: ${Colors.Gray500};
    23|       }
    24|     }
    25|     .bp4-input-action {
    26|       height: auto;
    27|       top: 1px;
    28|       right: 2px;
    29|     }
    30|   }
    31|   .bp4-select-popover.dagster-popover {
    32|     .bp4-popover-content li {
    33|       list-style: none;
    34|       margin: 0;
    35|       padding: 0;
    36|     }
    37|   }
    38| `;
    39| export const MENU_ITEM_HEIGHT = 32;
    40| const MENU_WIDTH = 250; // arbitrary, just looks nice
    41| const VISIBLE_ITEMS = 7.5;
    42| interface Props<T> extends React.PropsWithChildren<SuggestProps<T>> {


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Table.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-50 ---
     1| import {HTMLTable, HTMLTableProps} from '@blueprintjs/core';
     2| import styled from 'styled-components';
     3| import {StyledTag} from './BaseTag';
     4| import {Colors} from './Colors';
     5| import {FontFamily} from './styles';
     6| export interface TableProps extends HTMLTableProps {
     7|   $compact?: boolean;
     8| }
     9| export const Table = styled(HTMLTable)<TableProps>`
    10|   border: none;
    11|   width: 100%;
    12|   & tr th,
    13|   & tr td {
    14|     box-shadow:
    15|       inset 0 1px 0 ${Colors.KeylineGray},
    16|       inset 1px 0 0 ${Colors.KeylineGray} !important;
    17|   }
    18|   & tr th {
    19|     color: ${Colors.Gray500};
    20|     font-family: ${FontFamily.default};
    21|     font-size: 12px;
    22|     font-weight: 400;
    23|     padding: ${({$compact}) => ($compact ? '0 8px' : ' 8px 12px')};
    24|     min-height: 32px;
    25|     white-space: nowrap;
    26|     vertical-align: bottom;
    27|   }
    28|   & tr th:first-child {
    29|     padding-left: ${({$compact}) => ($compact ? '8px' : ' 24px')};
    30|   }
    31|   & tr td {
    32|     color: ${Colors.Gray900};
    33|     font-family: ${FontFamily.default};
    34|     font-size: 14px;
    35|     line-height: 20px;
    36|     padding: ${({$compact}) => ($compact ? '8px' : '12px')};
    37|   }
    38|   & tr td:first-child {
    39|     padding-left: ${({$compact}) => ($compact ? '8px' : ' 24px')};
    40|   }
    41|   & tr:last-child td {
    42|     box-shadow:
    43|       inset 0 1px 0 ${Colors.KeylineGray},
    44|       inset 1px 0 0 ${Colors.KeylineGray},
    45|       inset 0 -1px 0 ${Colors.KeylineGray} !important;
    46|   }
    47|   & tr td ${StyledTag} {
    48|     font-family: ${FontFamily.default};
    49|   }
    50| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Tabs.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-104 ---
     1| import * as React from 'react';
     2| import styled, {css} from 'styled-components';
     3| import {Colors} from './Colors';
     4| import {IconWrapper} from './Icon';
     5| import {FontFamily} from './styles';
     6| export interface TabStyleProps {
     7|   disabled?: boolean;
     8|   selected?: boolean;
     9|   count?: number | 'indeterminate' | null;
    10|   icon?: React.ReactNode;
    11|   title?: React.ReactNode;
    12|   $size?: 'small' | 'large';
    13| }
    14| export const getTabA11yProps = (props: {selected?: boolean; disabled?: boolean}) => {
    15|   const {selected, disabled} = props;
    16|   return {
    17|     role: 'tab',
    18|     tabIndex: disabled ? -1 : 0,
    19|     'aria-disabled': disabled,
    20|     'aria-expanded': selected,
    21|     'aria-selected': selected,
    22|   };
    23| };
    24| export const getTabContent = (props: TabStyleProps & {title?: React.ReactNode}) => {
    25|   const {title, count, icon} = props;
    26|   return (
    27|     <>
    28|       {title}
    29|       {icon}
    30|       {count !== undefined ? <Count>{count === 'indeterminate' ? '' : count}</Count> : null}
    31|     </>
    32|   );
    33| };
    34| const Count = styled.div`
    35|   display: inline;
    36|   font-family: ${FontFamily.monospace};
    37|   font-size: 14px;
    38|   font-weight: 500;
    39|   letter-spacing: -0.02%;
    40|   padding: 0 4px;
    41|   color: ${Colors.Gray900};
    42|   background: ${Colors.Gray100};
    43| `;
    44| export const tabCSS = css<TabStyleProps>`
    45|   background: none;
    46|   border: none;
    47|   font-size: 14px;
    48|   line-height: 20px;
    49|   font-weight: 600;
    50|   padding: ${({$size}) => ($size === 'small' ? '10px 0' : '16px 0')};
    51|   box-shadow: ${({selected}) => (selected ? Colors.Blue500 : 'transparent')} 0 -2px 0 inset;
    52|   display: flex;
    53|   align-items: center;
    54|   cursor: pointer;
    55|   gap: 6px;
    56|   &,
    57|   & a {
    58|     cursor: pointer;
    59|     user-select: none;
    60|     color: ${({selected, disabled}) =>
    61|       selected ? Colors.Blue500 : disabled ? Colors.Gray300 : Colors.Gray700};
    62|   }
    63|   & ${IconWrapper} {
    64|     background: ${({selected, disabled}) =>
    65|       selected ? Colors.Blue500 : disabled ? Colors.Gray300 : ''};
    66|   }
    67|   /* Focus outline only when using keyboard, not when focusing via mouse. */
    68|   &:focus {
    69|     outline: none !important;
    70|     box-shadow: ${({selected, disabled}) =>
    71|         selected ? Colors.Blue500 : disabled ? 'transparent' : Colors.Blue200}
    72|       0 -2px 0 inset;
    73|   }
    74|   &:hover {
    75|     &,
    76|     a {
    77|       text-decoration: none;
    78|       color: ${({selected, disabled}) =>
    79|         selected ? Colors.Blue700 : disabled ? Colors.Gray300 : Colors.Blue700};
    80|     }
    81|     ${IconWrapper} {
    82|       color: ${({selected, disabled}) =>
    83|         selected ? Colors.Blue700 : disabled ? Colors.Gray300 : ''};
    84|     }
    85|   }
    86| `;
    87| interface TabProps extends TabStyleProps, Omit<React.ComponentPropsWithoutRef<'button'>, 'title'> {}
    88| export const Tab = styled((props: TabProps) => {
    89|   const containerProps = getTabA11yProps(props);
    90|   const content = getTabContent(props);
    91|   const titleText = typeof props.title === 'string' ? props.title : undefined;
    92|   return (
    93|     <button {...props} {...containerProps} title={titleText} type="button">
    94|       {content}
    95|     </button>
    96|   );
    97| })<TabStyleProps>`
    98|   ${tabCSS}
    99| `;
   100| interface TabsProps {
   101|   children: Array<React.ReactElement<TabProps>>;
   102|   selectedTabId?: string;
   103|   onChange?: (selectedTabId: string) => void;
   104|   size?: 'small' | 'large';


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Tag.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-69 ---
     1| import {Tag as BlueprintTag} from '@blueprintjs/core';
     2| import * as React from 'react';
     3| import {BaseTag} from './BaseTag';
     4| import {Colors} from './Colors';
     5| import {IconName, Icon} from './Icon';
     6| import {Spinner} from './Spinner';
     7| const intentToFillColor = (intent: React.ComponentProps<typeof BlueprintTag>['intent']) => {
     8|   switch (intent) {
     9|     case 'primary':
    10|       return Colors.Blue50;
    11|     case 'danger':
    12|       return Colors.Red50;
    13|     case 'success':
    14|       return Colors.Green50;
    15|     case 'warning':
    16|       return Colors.Yellow50;
    17|     case 'none':
    18|     default:
    19|       return Colors.Gray100;
    20|   }
    21| };
    22| const intentToTextColor = (intent: React.ComponentProps<typeof BlueprintTag>['intent']) => {
    23|   switch (intent) {
    24|     case 'primary':
    25|       return Colors.Blue700;
    26|     case 'danger':
    27|       return Colors.Red700;
    28|     case 'success':
    29|       return Colors.Green700;
    30|     case 'warning':
    31|       return Colors.Yellow700;
    32|     case 'none':
    33|     default:
    34|       return Colors.Gray900;
    35|   }
    36| };
    37| const intentToIconColor = (intent: React.ComponentProps<typeof BlueprintTag>['intent']) => {
    38|   switch (intent) {
    39|     case 'primary':
    40|       return Colors.Blue500;
    41|     case 'danger':
    42|       return Colors.Red500;
    43|     case 'success':
    44|       return Colors.Green500;
    45|     case 'warning':
    46|       return Colors.Yellow500;
    47|     case 'none':
    48|     default:
    49|       return Colors.Gray900;
    50|   }
    51| };
    52| interface Props extends Omit<React.ComponentProps<typeof BlueprintTag>, 'icon' | 'rightIcon'> {
    53|   children?: React.ReactNode;
    54|   icon?: IconName | 'spinner';
    55|   rightIcon?: IconName | 'spinner';
    56|   tooltipText?: string;
    57| }
    58| interface IconOrSpinnerProps {
    59|   icon: IconName | 'spinner' | null;
    60|   color: string;
    61| }
    62| const IconOrSpinner = React.memo(({icon, color}: IconOrSpinnerProps) => {
    63|   if (icon === 'spinner') {
    64|     return <Spinner fillColor={color} purpose="body-text" />;
    65|   }
    66|   return icon ? <Icon name={icon} color={color} /> : null;
    67| });
    68| export const Tag = (props: Props) => {
    69|   const {children, icon = null, rightIcon = null, intent, ...rest} = props;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/TagSelector.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-26 ---
     1| import {useVirtualizer} from '@tanstack/react-virtual';
     2| import React from 'react';
     3| import styled from 'styled-components';
     4| import {Box} from './Box';
     5| import {Checkbox} from './Checkbox';
     6| import {Colors} from './Colors';
     7| import {Icon} from './Icon';
     8| import {MenuItem, Menu} from './Menu';
     9| import {MiddleTruncate} from './MiddleTruncate';
    10| import {Popover} from './Popover';
    11| import {Tag} from './Tag';
    12| import {TextInput, TextInputStyles} from './TextInput';
    13| import {Container as VirtualContainer, Inner, Row} from './VirtualizedTable';
    14| import {useViewport} from './useViewport';
    15| export type TagSelectorTagProps = {
    16|   remove: (ev: React.SyntheticEvent<HTMLDivElement>) => void;
    17| };
    18| export type TagSelectorDropdownItemProps = {
    19|   toggle: () => void;
    20|   selected: boolean;
    21| };
    22| export type TagSelectorDropdownProps = {
    23|   width: string;
    24|   allTags: string[];
    25| };
    26| type Props = {

# --- HUNK 2: Lines 196-236 ---
   196|         onClick={() => {
   197|           setIsDropdownOpen((isOpen) => !isOpen);
   198|         }}
   199|         {...containerProps}
   200|       >
   201|         <TagsContainer flex={{grow: 1, gap: 6}}>{tagsContent}</TagsContainer>
   202|         <div style={{cursor: 'pointer'}}>
   203|           <Icon name={isDropdownOpen ? 'expand_less' : 'expand_more'} />
   204|         </div>
   205|       </Container>
   206|     </Popover>
   207|   );
   208| };
   209| const Container = styled.div`
   210|   display: flex;
   211|   flex-direction: row;
   212|   align-items: center;
   213|   ${TextInputStyles}
   214| `;
   215| const Placeholder = styled.div`
   216|   color: ${Colors.Gray400};
   217| `;
   218| const TagsContainer = styled(Box)`
   219|   overflow-x: auto;
   220|   &::-webkit-scrollbar {
   221|     display: none;
   222|   }
   223|   scrollbar-width: none;
   224|   -ms-overflow-style: none;
   225| `;
   226| export const TagSelectorWithSearch = (
   227|   props: Props & {
   228|     searchPlaceholder?: string;
   229|   },
   230| ) => {
   231|   const [search, setSearch] = React.useState('');
   232|   const {
   233|     allTags,
   234|     selectedTags,
   235|     setSelectedTags,
   236|     rowHeight,

# --- HUNK 3: Lines 262-285 ---
   262|                     onChange={(e) => setSearch(e.target.value)}
   263|                     placeholder={searchPlaceholder || 'Search'}
   264|                     ref={(input) => {
   265|                       if (input) {
   266|                         input.focus();
   267|                       }
   268|                     }}
   269|                   />
   270|                 </Box>
   271|                 {renderDropdown ? renderDropdown(dropdownContent, dropdownProps) : dropdownContent}
   272|               </Box>
   273|             </Menu>
   274|           );
   275|         },
   276|         [renderDropdown, search, searchPlaceholder],
   277|       )}
   278|     />
   279|   );
   280| };
   281| const DefaultTagTooltipStyle = JSON.stringify({
   282|   background: Colors.Gray100,
   283|   border: `1px solid ${Colors.Gray200}`,
   284|   color: Colors.Dark,
   285| });


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Text.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-22 ---
     1| import styled from 'styled-components';
     2| import {Colors} from './Colors';
     3| import {FontFamily} from './styles';
     4| interface TextProps {
     5|   color?: string;
     6| }
     7| const Text = styled.span<TextProps>`
     8|   ${({color}) => (color ? `color: ${color};` : null)}
     9| `;
    10| export const Title = styled(Text)`
    11|   font-size: 24px;
    12|   font-weight: 600;
    13|   line-height: 30px;
    14|   -webkit-font-smoothing: antialiased;
    15| `;
    16| export const Heading = styled(Text)`
    17|   font-size: 18px;
    18|   font-weight: 600;
    19|   line-height: 24px;
    20|   -webkit-font-smoothing: antialiased;
    21| `;
    22| export const Headline = styled(Text)`

# --- HUNK 2: Lines 51-84 ---
    51|   font-size: 16px;
    52|   font-weight: 400;
    53|   line-height: 24px;
    54| `;
    55| export const Body2 = styled(Text)`
    56|   font-family: ${FontFamily.default};
    57|   line-height: 20px;
    58|   font-size: 14px;
    59|   font-weight: 400;
    60| `;
    61| export const Caption = styled(Text)`
    62|   font-family: ${FontFamily.default};
    63|   font-size: 12px;
    64| `;
    65| export const CaptionSubtitle = styled(Text)`
    66|   font-size: 12px;
    67|   font-weight: 600;
    68|   line-height: 16px;
    69| `;
    70| export const Code = styled(Text)`
    71|   background-color: ${Colors.Blue50};
    72|   border-radius: 2px;
    73|   font-family: ${FontFamily.monospace};
    74|   font-size: 14px;
    75|   padding: 2px 4px;
    76| `;
    77| export const Mono = styled(Text)`
    78|   font-family: ${FontFamily.monospace};
    79|   font-size: 16px;
    80| `;
    81| export const CaptionMono = styled(Text)`
    82|   font-family: ${FontFamily.monospace};
    83|   font-size: 14px;
    84| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/TextInput.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-145 ---
     1| import * as React from 'react';
     2| import styled, {css} from 'styled-components';
     3| import {Colors} from './Colors';
     4| import {IconName, Icon, IconWrapper} from './Icon';
     5| import {FontFamily} from './styles';
     6| interface Props extends Omit<React.ComponentPropsWithRef<'input'>, 'onChange'> {
     7|   icon?: IconName;
     8|   onChange?: (e: React.ChangeEvent<HTMLInputElement>) => void;
     9|   strokeColor?: string;
    10|   rightElement?: JSX.Element;
    11| }
    12| export const TextInput = React.forwardRef(
    13|   (props: Props, ref: React.ForwardedRef<HTMLInputElement>) => {
    14|     const {
    15|       icon,
    16|       disabled,
    17|       strokeColor = Colors.Gray300,
    18|       rightElement,
    19|       type = 'text',
    20|       ...rest
    21|     } = props;
    22|     return (
    23|       <TextInputContainer $disabled={!!disabled}>
    24|         {icon ? <Icon name={icon} color={Colors.Gray900} /> : null}
    25|         <StyledInput
    26|           {...rest}
    27|           $strokeColor={strokeColor}
    28|           disabled={disabled}
    29|           ref={ref}
    30|           $hasIcon={!!icon}
    31|           $hasRightElement={!!rightElement}
    32|           type={type}
    33|         />
    34|         {rightElement ? <RightContainer>{rightElement}</RightContainer> : null}
    35|       </TextInputContainer>
    36|     );
    37|   },
    38| );
    39| TextInput.displayName = 'TextInput';
    40| export const TextInputContainerStyles = css`
    41|   align-items: center;
    42|   color: ${Colors.Gray600};
    43|   display: inline-flex;
    44|   flex-direction: row;
    45|   flex: 1;
    46|   flex-grow: 0;
    47|   font-family: ${FontFamily.default};
    48|   font-size: 14px;
    49|   font-weight: 400;
    50|   position: relative;
    51| `;
    52| export const TextInputContainer = styled.div<{$disabled?: boolean}>`
    53|   ${TextInputContainerStyles}
    54|   > ${IconWrapper}:first-child {
    55|     position: absolute;
    56|     left: 8px;
    57|     top: 8px;
    58|     ${({$disabled}) =>
    59|       $disabled
    60|         ? css`
    61|             background-color: ${Colors.Gray400};
    62|           `
    63|         : null};
    64|   }
    65| `;
    66| const RightContainer = styled.div`
    67|   position: absolute;
    68|   bottom: 0;
    69|   top: 0;
    70|   right: 8px;
    71|   display: flex;
    72|   flex-direction: column;
    73|   justify-content: center;
    74| `;
    75| export const TextInputStyles = css`
    76|   border: none;
    77|   border-radius: 8px;
    78|   box-shadow:
    79|     ${Colors.Gray300} inset 0px 0px 0px 1px,
    80|     ${Colors.KeylineGray} inset 2px 2px 1.5px;
    81|   flex-grow: 1;
    82|   font-size: 14px;
    83|   line-height: 20px;
    84|   padding: 6px 6px 6px 12px;
    85|   margin: 0;
    86|   transition: box-shadow 150ms;
    87|   :disabled {
    88|     box-shadow:
    89|       ${Colors.Gray200} inset 0px 0px 0px 1px,
    90|       ${Colors.KeylineGray} inset 2px 2px 1.5px;
    91|     background-color: ${Colors.Gray50};
    92|     color: ${Colors.Gray400};
    93|   }
    94|   :disabled::placeholder {
    95|     color: ${Colors.Gray400};
    96|   }
    97|   :focus {
    98|     box-shadow:
    99|       ${Colors.Gray300} inset 0px 0px 0px 1px,
   100|       ${Colors.KeylineGray} inset 2px 2px 1.5px,
   101|       rgba(58, 151, 212, 0.6) 0 0 0 3px;
   102|     outline: none;
   103|   }
   104| `;
   105| interface StyledInputProps {
   106|   $hasIcon: boolean;
   107|   $strokeColor: string;
   108|   $hasRightElement: boolean;
   109| }
   110| const StyledInput = styled.input<StyledInputProps>`
   111|   ${TextInputStyles}
   112|   ${({$hasRightElement}) =>
   113|     $hasRightElement
   114|       ? css`
   115|           & {
   116|             padding-right: 28px;
   117|           }
   118|         `
   119|       : null}
   120|   box-shadow: ${({$strokeColor}) => $strokeColor} inset 0px 0px 0px 1px,
   121|     ${Colors.KeylineGray} inset 2px 2px 1.5px;
   122|   padding: ${({$hasIcon}) => ($hasIcon ? '6px 6px 6px 28px' : '6px 6px 6px 12px')};
   123|   :focus {
   124|     box-shadow:
   125|       ${({$strokeColor}) => $strokeColor} inset 0px 0px 0px 1px,
   126|       ${Colors.KeylineGray} inset 2px 2px 1.5px,
   127|       rgba(58, 151, 212, 0.6) 0 0 0 3px;
   128|   }
   129| `;
   130| interface TextAreaProps {
   131|   $resize: React.CSSProperties['resize'];
   132|   $strokeColor?: string;
   133| }
   134| export const TextArea = styled.textarea<TextAreaProps>`
   135|   ${TextInputStyles}
   136|   box-shadow: ${({$strokeColor}) => $strokeColor || Colors.Gray300} inset 0px 0px 0px 1px,
   137|     ${Colors.KeylineGray} inset 2px 2px 1.5px;
   138|   :focus {
   139|     box-shadow:
   140|       ${({$strokeColor}) => $strokeColor || Colors.Gray300} inset 0px 0px 0px 1px,
   141|       ${Colors.KeylineGray} inset 2px 2px 1.5px,
   142|       rgba(58, 151, 212, 0.6) 0 0 0 3px;
   143|   }
   144|   ${({$resize}) => ($resize ? `resize: ${$resize};` : null)}
   145| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Toaster.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-71 ---
     1| import {IToasterProps, ToasterInstance, ToastProps} from '@blueprintjs/core';
     2| import React from 'react';
     3| import {createGlobalStyle} from 'styled-components';
     4| import {Colors} from './Colors';
     5| import {IconName, Icon} from './Icon';
     6| import {createToaster} from './createToaster';
     7| export const GlobalToasterStyle = createGlobalStyle`
     8|   .dagster-toaster {
     9|     .bp4-toast {
    10|       padding: 8px 12px;
    11|       border-radius: 8px;
    12|       font-size: 14px;
    13|       line-height: 22px;
    14|       color: ${Colors.White};
    15|       background-color: ${Colors.Gray700};
    16|     }
    17|     .bp4-button-group {
    18|       padding: 2px;
    19|     }
    20|     .bp4-toast-message {
    21|       display: flex;
    22|       align-items: center;
    23|       padding: 6px;
    24|       gap: 8px;
    25|     }
    26|     .bp4-toast.bp4-intent-primary,
    27|     .bp4-toast.bp4-intent-primary .bp4-button {
    28|       background-color: ${Colors.Gray700} !important;
    29|     }
    30|     .bp4-toast.bp4-intent-success,
    31|     .bp4-toast.bp4-intent-success .bp4-button {
    32|       background-color: ${Colors.Blue500} !important;
    33|     }
    34|     .bp4-toast.bp4-intent-warning,
    35|     .bp4-toast.bp4-intent-warning .bp4-button {
    36|       background-color: ${Colors.Gray700} !important;
    37|       .bp4-icon-cross {
    38|         color: ${Colors.Gray300} !important;
    39|       }
    40|     }
    41|     .bp4-toast.bp4-intent-danger,
    42|     .bp4-toast.bp4-intent-danger .bp4-button {
    43|       background-color: ${Colors.Red500} !important;
    44|     }
    45|   }
    46| `;
    47| export type DToasterShowProps = Omit<ToastProps, 'icon'> & {icon?: IconName};
    48| export type DToasterShowFn = (props: DToasterShowProps, key?: string) => string;
    49| export type DToaster = Omit<ToasterInstance, 'show'> & {show: DToasterShowFn};
    50| const setup = (instance: ToasterInstance): DToaster => {
    51|   const show = instance.show;
    52|   const showWithDagsterIcon: DToasterShowFn = ({icon, ...rest}, key) => {
    53|     if (icon && typeof icon === 'string') {
    54|       rest.message = (
    55|         <>
    56|           <Icon name={icon} color={Colors.White} />
    57|           {rest.message}
    58|         </>
    59|       );
    60|     }
    61|     return show.apply(instance, [rest, key]);
    62|   };
    63|   return Object.assign(instance, {show: showWithDagsterIcon}) as DToaster;
    64| };
    65| const asyncCreate = async (props?: IToasterProps, container?: HTMLElement): Promise<DToaster> => {
    66|   const instance = await createToaster({...props, className: 'dagster-toaster'}, container);
    67|   return setup(instance);
    68| };
    69| export const Toaster = {
    70|   asyncCreate,
    71| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/TokenizingField.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-25 ---
     1| import {TagInput} from '@blueprintjs/core';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| import {Box} from './Box';
     5| import {Colors} from './Colors';
     6| import {MenuItem, Menu} from './Menu';
     7| import {Popover} from './Popover';
     8| import {Spinner} from './Spinner';
     9| const MAX_SUGGESTIONS = 100;
    10| export interface SuggestionProvider {
    11|   token?: string;
    12|   values: () => string[];
    13|   suggestionFilter?: (query: string, suggestion: Suggestion) => boolean;
    14|   textOnly?: boolean;
    15| }
    16| export interface Suggestion {
    17|   text: string;
    18|   final: boolean;
    19| }
    20| interface ActiveSuggestionInfo {
    21|   text: string;
    22|   idx: number;
    23| }
    24| export interface TokenizingFieldValue {
    25|   token?: string;

# --- HUNK 2: Lines 343-427 ---
   343|             setOpen(false);
   344|           },
   345|         }}
   346|         $maxWidth={fullwidth ? '100%' : undefined}
   347|         onAdd={() => false}
   348|         onKeyDown={onKeyDown}
   349|         tagProps={{minimal: true}}
   350|         placeholder={placeholder || 'Filter'}
   351|         rightElement={
   352|           loading && open ? (
   353|             <Box style={{alignSelf: 'center'}} margin={{right: 4}}>
   354|               <Spinner purpose="body-text" />
   355|             </Box>
   356|           ) : undefined
   357|         }
   358|       />
   359|     </Popover>
   360|   );
   361| };
   362| export const StyledTagInput = styled(TagInput)<{$maxWidth?: any}>`
   363|   border: none;
   364|   border-radius: 8px;
   365|   box-shadow:
   366|     ${Colors.Gray300} inset 0px 0px 0px 1px,
   367|     ${Colors.KeylineGray} inset 2px 2px 1.5px;
   368|   min-width: 400px;
   369|   max-width: ${(p) => (p.$maxWidth ? p.$maxWidth : '600px')};
   370|   transition: box-shadow 150ms;
   371|   &.bp4-active {
   372|     box-shadow:
   373|       ${Colors.Gray300} inset 0px 0px 0px 1px,
   374|       ${Colors.KeylineGray} inset 2px 2px 1.5px,
   375|       rgba(58, 151, 212, 0.6) 0 0 0 3px;
   376|   }
   377|   input {
   378|     font-size: 14px;
   379|     font-weight: 400;
   380|     padding-left: 4px;
   381|     padding-bottom: 2px;
   382|     padding-top: 2px;
   383|   }
   384|   && .bp4-tag-input-values:first-child .bp4-input-ghost:first-child {
   385|     padding-left: 8px;
   386|   }
   387|   && .bp4-tag-input-values {
   388|     margin-right: 4px;
   389|     margin-top: 4px;
   390|   }
   391|   && .bp4-tag-input-values > * {
   392|     margin-bottom: 4px;
   393|   }
   394|   .bp4-tag {
   395|     border-radius: 6px;
   396|     display: inline-flex;
   397|     flex-direction: row;
   398|     font-size: 12px;
   399|     line-height: 16px;
   400|     align-items: center;
   401|     max-width: 400px;
   402|     overflow: hidden;
   403|     white-space: nowrap;
   404|     text-overflow: ellipsis;
   405|     padding: 4px 8px;
   406|     user-select: none;
   407|   }
   408|   .bp4-tag.bp4-minimal:not([class*='bp4-intent-']) {
   409|     background-color: ${Colors.Gray100};
   410|     color: ${Colors.Gray900};
   411|   }
   412|   .bp4-tag.bp4-minimal.bp4-intent-success {
   413|     background-color: ${Colors.Green50};
   414|     color: ${Colors.Green700};
   415|   }
   416|   .bp4-tag.bp4-minimal.bp4-intent-warning {
   417|     background-color: ${Colors.Yellow50};
   418|     color: ${Colors.Yellow700};
   419|   }
   420|   .bp4-tag.bp4-minimal.bp4-intent-danger {
   421|     background-color: ${Colors.Red50};
   422|     color: ${Colors.Red700};
   423|   }
   424| `;
   425| const StyledMenu = styled(Menu)`
   426|   width: 400px;
   427| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Tooltip.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-33 ---
     1| import {Tooltip2, Tooltip2Props} from '@blueprintjs/popover2';
     2| import deepmerge from 'deepmerge';
     3| import React from 'react';
     4| import styled, {createGlobalStyle, css} from 'styled-components';
     5| import {Colors} from './Colors';
     6| import {FontFamily} from './styles';
     7| export const GlobalTooltipStyle = createGlobalStyle`
     8|   .dagster-tooltip .bp4-popover2-content {
     9|       font-family: ${FontFamily.default};
    10|       font-size: 12px;
    11|       line-height: 16px;
    12|       background: ${Colors.Gray900};
    13|       color: ${Colors.Gray50};
    14|       padding: 8px 16px;
    15|   }
    16|   .block-tooltip.bp4-popover2-target {
    17|     display: block;
    18|   }
    19|   .dagster-tooltip-bare .bp4-popover2-content {
    20|     padding: 0;
    21|   }
    22| `;
    23| const overwriteMerge = (destination: any[], source: any[]) => source;
    24| interface Props extends Tooltip2Props {
    25|   children: React.ReactNode;
    26|   display?: React.CSSProperties['display'];
    27|   canShow?: boolean;
    28|   useDisabledButtonTooltipFix?: boolean;
    29| }
    30| export const Tooltip = (props: Props) => {
    31|   const {useDisabledButtonTooltipFix = false, children, display, canShow = true, ...rest} = props;
    32|   const [isOpen, setIsOpen] = React.useState<undefined | boolean>(undefined);
    33|   const divRef = React.useRef<HTMLDivElement>(null);


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Trace.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-13 ---
     1| import styled from 'styled-components';
     2| import {Colors} from './Colors';
     3| import {FontFamily} from './styles';
     4| export const Trace = styled.div`
     5|   background-color: ${Colors.Gray200};
     6|   color: rgb(41, 50, 56);
     7|   font-family: ${FontFamily.monospace};
     8|   font-size: 14px;
     9|   max-height: 90vh;
    10|   overflow: auto;
    11|   white-space: pre;
    12|   padding: 16px;
    13| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/UnstyledButton.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-36 ---
     1| import styled, {css} from 'styled-components';
     2| interface Props {
     3|   $expandedClickPx?: number;
     4|   $showFocusOutline?: boolean;
     5| }
     6| export const UnstyledButton = styled.button<Props>`
     7|   border: 0;
     8|   background-color: transparent;
     9|   border-radius: 4px;
    10|   cursor: pointer;
    11|   padding: 0;
    12|   text-align: start;
    13|   transition:
    14|     box-shadow 150ms,
    15|     opacity 150ms;
    16|   user-select: none;
    17|   white-space: nowrap;
    18|   ${({$expandedClickPx}) =>
    19|     $expandedClickPx
    20|       ? css`
    21|           padding: ${$expandedClickPx}px;
    22|           margin: -${$expandedClickPx}px;
    23|         `
    24|       : null}
    25|   :focus,
    26|   :active {
    27|     outline: none;
    28|     ${({$showFocusOutline}) =>
    29|       $showFocusOutline ? `box-shadow: rgba(58, 151, 212, 0.6) 0 0 0 3px;` : null}
    30|   }
    31|   &:disabled {
    32|     color: inherit;
    33|     cursor: default;
    34|     opacity: 0.6;
    35|   }
    36| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/VirtualizedTable.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-38 ---
     1| import * as React from 'react';
     2| import styled from 'styled-components';
     3| import {Box} from './Box';
     4| import {Colors} from './Colors';
     5| export const HeaderCell = ({children}: {children?: React.ReactNode}) => (
     6|   <CellBox
     7|     padding={{vertical: 8, horizontal: 12}}
     8|     border="right"
     9|     style={{whiteSpace: 'nowrap', textOverflow: 'ellipsis', overflow: 'hidden'}}
    10|   >
    11|     {children}
    12|   </CellBox>
    13| );
    14| export const RowCell = ({children}: {children?: React.ReactNode}) => (
    15|   <CellBox
    16|     padding={12}
    17|     flex={{direction: 'column', justifyContent: 'flex-start'}}
    18|     style={{color: Colors.Gray500, overflow: 'hidden'}}
    19|     border="right"
    20|   >
    21|     {children}
    22|   </CellBox>
    23| );
    24| const CellBox = styled(Box)`
    25|   :first-child {
    26|     padding-left: 24px;
    27|   }
    28|   :last-child {
    29|     padding-right: 24px;
    30|   }
    31| `;
    32| export const Container = styled.div`
    33|   height: 100%;
    34|   overflow: auto;
    35| `;
    36| type InnerProps = {
    37|   $totalHeight: number;
    38| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/Warning.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-24 ---
     1| import * as React from 'react';
     2| import styled from 'styled-components';
     3| import {Colors} from './Colors';
     4| import {Icon} from './Icon';
     5| interface Props {
     6|   children: React.ReactNode;
     7|   errorBackground?: boolean;
     8| }
     9| export const Warning = ({errorBackground, children}: Props) => {
    10|   return (
    11|     <ErrorContainer errorBackground={errorBackground}>
    12|       <Icon name="warning" size={16} color={Colors.Gray700} style={{marginRight: 8}} />
    13|       {children}
    14|     </ErrorContainer>
    15|   );
    16| };
    17| const ErrorContainer = styled.div<{errorBackground?: boolean}>`
    18|   border-top: 1px solid ${Colors.KeylineGray};
    19|   background: ${({errorBackground}) => (errorBackground ? Colors.Red100 : Colors.Gray50)};
    20|   padding: 8px 24px 8px 24px;
    21|   display: flex;
    22|   align-items: center;
    23|   font-size: 12px;
    24| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/BaseButton.stories.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-101 ---
     1| import {Meta} from '@storybook/react';
     2| import * as React from 'react';
     3| import {BaseButton} from '../BaseButton';
     4| import {Box} from '../Box';
     5| import {Colors} from '../Colors';
     6| import {Group} from '../Group';
     7| import {Icon} from '../Icon';
     8| export default {
     9|   title: 'BaseButton',
    10|   component: BaseButton,
    11| } as Meta;
    12| export const Default = () => {
    13|   return (
    14|     <Group direction="column" spacing={8}>
    15|       <BaseButton label="Button" />
    16|       <BaseButton label="Button" icon={<Icon name="star" />} />
    17|       <BaseButton label="Button" rightIcon={<Icon name="close" />} />
    18|       <BaseButton
    19|         label="Button"
    20|         icon={<Icon name="source" />}
    21|         rightIcon={<Icon name="expand_more" />}
    22|       />
    23|       <BaseButton icon={<Icon name="cached" />} />
    24|     </Group>
    25|   );
    26| };
    27| export const Fill = () => {
    28|   return (
    29|     <Group direction="column" spacing={8}>
    30|       <BaseButton label="Button" fillColor={Colors.Dark} textColor={Colors.White} />
    31|       <BaseButton
    32|         label="Button"
    33|         fillColor={Colors.Blue500}
    34|         textColor={Colors.White}
    35|         icon={<Icon name="star" />}
    36|       />
    37|       <BaseButton
    38|         label="Button"
    39|         fillColor={Colors.Green500}
    40|         textColor={Colors.White}
    41|         rightIcon={<Icon name="close" />}
    42|       />
    43|       <BaseButton
    44|         label="Button"
    45|         fillColor={Colors.Red500}
    46|         textColor={Colors.White}
    47|         icon={<Icon name="source" />}
    48|         rightIcon={<Icon name="expand_more" />}
    49|       />
    50|       <BaseButton
    51|         label="Button"
    52|         fillColor={Colors.Olive500}
    53|         textColor={Colors.White}
    54|         icon={<Icon name="folder_open" />}
    55|       />
    56|       <BaseButton
    57|         fillColor={Colors.Yellow500}
    58|         textColor={Colors.White}
    59|         icon={<Icon name="cached" />}
    60|       />
    61|     </Group>
    62|   );
    63| };
    64| export const Transparent = () => {
    65|   return (
    66|     <Box padding={12} background={Colors.Gray200}>
    67|       <Group direction="column" spacing={8}>
    68|         <BaseButton textColor={Colors.Dark} label="Button" fillColor="transparent" />
    69|         <BaseButton
    70|           textColor={Colors.Dark}
    71|           label="Button"
    72|           fillColor="transparent"
    73|           icon={<Icon name="star" />}
    74|         />
    75|         <BaseButton
    76|           textColor={Colors.Dark}
    77|           label="Button"
    78|           fillColor="transparent"
    79|           rightIcon={<Icon name="close" />}
    80|         />
    81|         <BaseButton
    82|           textColor={Colors.Dark}
    83|           label="Button"
    84|           fillColor="transparent"
    85|           icon={<Icon name="source" />}
    86|           rightIcon={<Icon name="expand_more" />}
    87|         />
    88|         <BaseButton textColor={Colors.Dark} fillColor="transparent" icon={<Icon name="cached" />} />
    89|       </Group>
    90|     </Box>
    91|   );
    92| };
    93| export const Disabled = () => {
    94|   return (
    95|     <Group direction="column" spacing={8}>
    96|       <BaseButton label="Button" icon={<Icon name="star" />} disabled />
    97|       <BaseButton label="Button" fillColor={Colors.Dark} textColor={Colors.White} disabled />
    98|       <BaseButton textColor={Colors.Dark} label="Button" fillColor="transparent" disabled />
    99|     </Group>
   100|   );
   101| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/BaseTag.stories.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-37 ---
     1| import {Meta} from '@storybook/react';
     2| import * as React from 'react';
     3| import {BaseTag} from '../BaseTag';
     4| import {Colors} from '../Colors';
     5| import {Group} from '../Group';
     6| import {Icon} from '../Icon';
     7| export default {
     8|   title: 'BaseTag',
     9|   component: BaseTag,
    10| } as Meta;
    11| const COLORS = [
    12|   {fillColor: Colors.Gray10, textColor: Colors.Gray900, iconColor: Colors.Gray900},
    13|   {fillColor: Colors.Blue50, textColor: Colors.Blue700, iconColor: Colors.Blue500},
    14|   {fillColor: Colors.Green50, textColor: Colors.Green700, iconColor: Colors.Green500},
    15|   {fillColor: Colors.Yellow50, textColor: Colors.Yellow700, iconColor: Colors.Yellow500},
    16|   {fillColor: Colors.Red50, textColor: Colors.Red700, iconColor: Colors.Red500},
    17|   {fillColor: Colors.Olive50, textColor: Colors.Olive700, iconColor: Colors.Olive500},
    18| ];
    19| export const Basic = () => {
    20|   return (
    21|     <Group direction="column" spacing={8}>
    22|       {COLORS.map(({fillColor, textColor, iconColor}, ii) => (
    23|         <Group direction="row" spacing={8} key={ii}>
    24|           <BaseTag
    25|             fillColor={fillColor}
    26|             textColor={textColor}
    27|             icon={<Icon name="info" color={iconColor} />}
    28|           />
    29|           <BaseTag
    30|             fillColor={fillColor}
    31|             textColor={textColor}
    32|             icon={<Icon name="alternate_email" color={iconColor} />}
    33|             label="Lorem"
    34|           />
    35|           <BaseTag
    36|             fillColor={fillColor}
    37|             textColor={textColor}


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/Box.stories.tsx
# Total hunks: 4
# ====================================================================
# --- HUNK 1: Lines 1-143 ---
     1| import {Meta} from '@storybook/react';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| import {Box} from '../Box';
     5| import {Colors} from '../Colors';
     6| import {Group} from '../Group';
     7| import {
     8|   AlignItems,
     9|   BorderSide,
    10|   BorderWidth,
    11|   FlexDirection,
    12|   JustifyContent as JustifyContentType,
    13|   Spacing,
    14| } from '../types';
    15| export default {
    16|   title: 'Box',
    17|   component: Box,
    18| } as Meta;
    19| export const Padding = () => {
    20|   const spacings: Spacing[] = [0, 2, 4, 8, 12, 16, 20, 24, 32, 48, 64];
    21|   return (
    22|     <Group spacing={2} direction="row">
    23|       {spacings.map((spacing) => (
    24|         <Box key={`${spacing}`} background={Colors.Gray100} padding={spacing}>
    25|           {spacing}
    26|         </Box>
    27|       ))}
    28|     </Group>
    29|   );
    30| };
    31| export const BorderSides = () => {
    32|   const sides: BorderSide[] = [
    33|     'all',
    34|     'top-and-bottom',
    35|     'left-and-right',
    36|     'top',
    37|     'right',
    38|     'bottom',
    39|     'left',
    40|   ];
    41|   const widths: BorderWidth[] = [1, 2];
    42|   return (
    43|     <Group direction="column" spacing={16}>
    44|       {widths.map((width) => (
    45|         <Group spacing={8} direction="column" key={`width-${width}`}>
    46|           <div>{`Width ${width}:`}</div>
    47|           <Group spacing={8} direction="row">
    48|             {sides.map((side) => (
    49|               <Box
    50|                 key={side}
    51|                 background={Colors.Gray50}
    52|                 border={{side, width, color: Colors.Gray200}}
    53|                 padding={24}
    54|                 style={{fontSize: '12px', textTransform: 'uppercase'}}
    55|               >
    56|                 {side}
    57|               </Box>
    58|             ))}
    59|           </Group>
    60|         </Group>
    61|       ))}
    62|     </Group>
    63|   );
    64| };
    65| export const FlexDirections = () => {
    66|   const directions: FlexDirection[] = ['row', 'column', 'row-reverse', 'column-reverse'];
    67|   const alignItems: AlignItems[] = ['stretch', 'center', 'flex-start', 'flex-end'];
    68|   return (
    69|     <Group direction="column" spacing={16}>
    70|       <div>Flex direction:</div>
    71|       <Group spacing={24} direction="row">
    72|         {directions.map((direction) => (
    73|           <Group key={direction} direction="column" spacing={12}>
    74|             <ExampleText>{direction}</ExampleText>
    75|             <Box background={Colors.Gray50} flex={{direction}} padding={8}>
    76|               <Box padding={12} background={Colors.Blue700} />
    77|               <Box padding={12} background={Colors.Blue700} />
    78|               <Box padding={12} background={Colors.Blue500} />
    79|               <Box padding={12} background={Colors.Blue500} />
    80|               <Box padding={12} background={Colors.Blue200} />
    81|             </Box>
    82|           </Group>
    83|         ))}
    84|       </Group>
    85|       <div>Align items:</div>
    86|       <Group spacing={24} direction="row">
    87|         {alignItems.map((alignment) => (
    88|           <Group key={alignment} direction="column" spacing={12}>
    89|             <ExampleText>{alignment}</ExampleText>
    90|             <Box
    91|               background={Colors.Gray50}
    92|               flex={{direction: 'row', alignItems: alignment}}
    93|               padding={8}
    94|             >
    95|               <Box padding={12} background={Colors.Blue700} />
    96|               <Box padding={24} background={Colors.Blue700} />
    97|               <Box padding={32} background={Colors.Blue500} />
    98|               <Box padding={4} background={Colors.Blue500} />
    99|               <Box padding={16} background={Colors.Blue200} />
   100|             </Box>
   101|           </Group>
   102|         ))}
   103|       </Group>
   104|     </Group>
   105|   );
   106| };
   107| export const JustifyContent = () => {
   108|   const justifyContent: JustifyContentType[] = [
   109|     'space-between',
   110|     'space-around',
   111|     'space-evenly',
   112|     'center',
   113|     'flex-start',
   114|     'flex-end',
   115|   ];
   116|   return (
   117|     <Group direction="column" spacing={16}>
   118|       <div>Justify content:</div>
   119|       <Group spacing={24} direction="column">
   120|         {justifyContent.map((option) => (
   121|           <Group key={option} direction="column" spacing={12}>
   122|             <ExampleText>{option}</ExampleText>
   123|             <Box
   124|               background={Colors.Gray50}
   125|               flex={{direction: 'row', justifyContent: option}}
   126|               padding={8}
   127|             >
   128|               <Box padding={12} background={Colors.Blue700} />
   129|               <Box padding={12} background={Colors.Blue700} />
   130|               <Box padding={12} background={Colors.Blue500} />
   131|               <Box padding={12} background={Colors.Blue500} />
   132|               <Box padding={12} background={Colors.Blue200} />
   133|             </Box>
   134|           </Group>
   135|         ))}
   136|       </Group>
   137|     </Group>
   138|   );
   139| };
   140| const ExampleText = styled.span`
   141|   font-size: 12px;
   142|   text-transform: uppercase;
   143| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/Button.stories.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 9-72 ---
     9| export default {
    10|   title: 'Button',
    11|   component: Button,
    12| } as Meta;
    13| export const Default = () => {
    14|   return (
    15|     <Group direction="column" spacing={8}>
    16|       <Button>Button</Button>
    17|       <Button icon={<Icon name="star" />}>Button</Button>
    18|       <Button rightIcon={<Icon name="close" />}>Button</Button>
    19|       <Button icon={<Icon name="source" />} rightIcon={<Icon name="expand_more" />}>
    20|         Button
    21|       </Button>
    22|       <Button icon={<Icon name="cached" />} />
    23|     </Group>
    24|   );
    25| };
    26| export const Intent = () => {
    27|   return (
    28|     <Group direction="column" spacing={8}>
    29|       <Button icon={<Icon name="star" />}>No intent set</Button>
    30|       <Button icon={<Icon name="star" />} intent="primary">
    31|         Primary
    32|       </Button>
    33|       <Button icon={<Icon name="done" />} intent="success">
    34|         Success
    35|       </Button>
    36|       <Button icon={<Icon name="error" />} intent="danger">
    37|         Danger
    38|       </Button>
    39|       <Button icon={<Icon name="warning" />} intent="warning">
    40|         Warning
    41|       </Button>
    42|       <Button icon={<Icon name="star" />} intent="none">
    43|         None
    44|       </Button>
    45|     </Group>
    46|   );
    47| };
    48| export const Outlined = () => {
    49|   return (
    50|     <Group direction="column" spacing={8}>
    51|       <Button outlined icon={<Icon name="star" />}>
    52|         No intent set
    53|       </Button>
    54|       <Button outlined icon={<Icon name="star" />} intent="primary">
    55|         Primary
    56|       </Button>
    57|       <Button outlined icon={<Icon name="done" />} intent="success">
    58|         Success
    59|       </Button>
    60|       <Button outlined icon={<Icon name="error" />} intent="danger">
    61|         Danger
    62|       </Button>
    63|       <Button outlined icon={<Icon name="warning" />} intent="warning">
    64|         Warning
    65|       </Button>
    66|       <Button outlined icon={<Icon name="star" />} intent="none">
    67|         None
    68|       </Button>
    69|     </Group>
    70|   );
    71| };
    72| export const Disabled = () => {

# --- HUNK 2: Lines 148-179 ---
   148|         <Button icon={<Icon name="star" />}>Left</Button>
   149|         <Button icon={<Icon name="star" />}>Center</Button>
   150|         <Button icon={<Icon name="star" />}>Right</Button>
   151|       </JoinedButtons>
   152|       <JoinedButtons>
   153|         <Button rightIcon={<Icon name="wysiwyg" />}>Left</Button>
   154|         <Button rightIcon={<Icon name="wysiwyg" />}>Center</Button>
   155|         <Button rightIcon={<Icon name="wysiwyg" />}>Right</Button>
   156|       </JoinedButtons>
   157|       <JoinedButtons>
   158|         <Button icon={<Icon name="cached" />}></Button>
   159|         <Button icon={<Icon name="wysiwyg" />}></Button>
   160|         <Button icon={<Icon name="close" />}></Button>
   161|       </JoinedButtons>
   162|     </Group>
   163|   );
   164| };
   165| export function LoadingStates() {
   166|   return (
   167|     <Box flex={{direction: 'row', gap: 12}}>
   168|       <Button loading={true} icon={<Icon name="wysiwyg" />}>
   169|         Test
   170|       </Button>
   171|       <Button loading={true} icon={<Icon name="close" />} rightIcon={<Icon name="cached" />}>
   172|         Test
   173|       </Button>
   174|       <Button loading={true} rightIcon={<Icon name="wysiwyg" />}>
   175|         Test
   176|       </Button>
   177|     </Box>
   178|   );
   179| }


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/ButtonLink.stories.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-51 ---
     1| import {Story, Meta} from '@storybook/react';
     2| import * as React from 'react';
     3| import {Box} from '../Box';
     4| import {ButtonLink} from '../ButtonLink';
     5| import {Colors} from '../Colors';
     6| export default {
     7|   title: 'ButtonLink',
     8|   component: ButtonLink,
     9| } as Meta;
    10| type Props = React.ComponentProps<typeof ButtonLink>;
    11| const Template: Story<Props> = (props) => <ButtonLink {...props} />;
    12| export const ColorString = Template.bind({});
    13| ColorString.args = {
    14|   children: 'Hello world',
    15|   color: Colors.Blue500,
    16| };
    17| export const ColorMap = Template.bind({});
    18| ColorMap.args = {
    19|   children: 'Hello world',
    20|   color: {
    21|     link: Colors.Blue500,
    22|     hover: Colors.Blue700,
    23|     active: Colors.Yellow700,
    24|   },
    25| };
    26| export const HoverUnderline = Template.bind({});
    27| HoverUnderline.args = {
    28|   children: 'Hello world',
    29|   color: Colors.Blue500,
    30|   underline: 'hover',
    31| };
    32| export const WhiteLinkOnBlack = () => {
    33|   return (
    34|     <Box background={Colors.Dark} padding={16}>
    35|       <ButtonLink color={{link: Colors.White, hover: Colors.Gray200}} underline="always">
    36|         Hello world
    37|       </ButtonLink>
    38|     </Box>
    39|   );
    40| };
    41| export const WithinText = () => {
    42|   return (
    43|     <div>
    44|       Lorem ipsum{' '}
    45|       <ButtonLink color={{link: Colors.Blue500, hover: Colors.Link}} underline="always">
    46|         dolor sit
    47|       </ButtonLink>{' '}
    48|       amet edipiscing.
    49|     </div>
    50|   );
    51| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/Checkbox.stories.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-37 ---
     1| import {Meta} from '@storybook/react';
     2| import * as React from 'react';
     3| import {useState} from 'react';
     4| import {Checkbox} from '../Checkbox';
     5| import {Colors} from '../Colors';
     6| import {Group} from '../Group';
     7| export default {
     8|   title: 'Checkbox',
     9|   component: Checkbox,
    10| } as Meta;
    11| export const Default = () => {
    12|   const [state, setState] = useState<'true' | 'false' | 'indeterminate'>('false');
    13|   const onChange = () =>
    14|     setState(({true: 'indeterminate', indeterminate: 'false', false: 'true'} as const)[state]);
    15|   return (
    16|     <Group spacing={8} direction="column">
    17|       {[Colors.Blue500, Colors.Olive500, Colors.Gray800].map((fillColor) => (
    18|         <Group spacing={24} direction="row" key={fillColor}>
    19|           <Checkbox
    20|             label="Hello world"
    21|             checked={state === 'false' ? false : true}
    22|             indeterminate={state === 'indeterminate'}
    23|             fillColor={fillColor}
    24|             onChange={onChange}
    25|             format="check"
    26|           />
    27|           <Checkbox
    28|             label="Hello world"
    29|             checked={state === 'false' ? false : true}
    30|             indeterminate={state === 'indeterminate'}
    31|             fillColor={fillColor}
    32|             onChange={onChange}
    33|             format="star"
    34|           />
    35|           <Checkbox
    36|             label="Hello world"
    37|             checked={state === 'false' ? false : true}

# --- HUNK 2: Lines 86-126 ---
    86|           format="star"
    87|         />
    88|         <Checkbox
    89|           disabled
    90|           label="Hello world"
    91|           checked={state === 'false' ? true : false}
    92|           indeterminate={state === 'indeterminate'}
    93|           onChange={onChange}
    94|           format="switch"
    95|         />
    96|       </Group>
    97|     </Group>
    98|   );
    99| };
   100| export const Small = () => {
   101|   const [state, setState] = useState<'true' | 'false' | 'indeterminate'>('false');
   102|   const onChange = () =>
   103|     setState(({true: 'indeterminate', indeterminate: 'false', false: 'true'} as const)[state]);
   104|   return (
   105|     <Group spacing={8} direction="column">
   106|       {[Colors.Blue500, Colors.ForestGreen, Colors.Gray800].map((fillColor) => (
   107|         <Group spacing={24} direction="row" key={fillColor}>
   108|           <Checkbox
   109|             size="small"
   110|             label="Hello world"
   111|             checked={state === 'false' ? false : true}
   112|             indeterminate={state === 'indeterminate'}
   113|             fillColor={fillColor}
   114|             onChange={onChange}
   115|             format="check"
   116|           />
   117|           <Checkbox
   118|             size="small"
   119|             label="Hello world"
   120|             checked={state === 'false' ? false : true}
   121|             indeterminate={state === 'indeterminate'}
   122|             fillColor={fillColor}
   123|             onChange={onChange}
   124|             format="star"
   125|           />
   126|           <Checkbox


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/Group.stories.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-143 ---
     1| import {Meta} from '@storybook/react';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| import {Box} from '../Box';
     5| import {ButtonLink} from '../ButtonLink';
     6| import {Colors} from '../Colors';
     7| import {Group} from '../Group';
     8| import {Body, Code, Heading, Subheading} from '../Text';
     9| import {AlignItems, FlexWrap, Spacing} from '../types';
    10| export default {
    11|   title: 'Group',
    12|   component: Group,
    13| } as Meta;
    14| export const Row = () => {
    15|   const spacings: Spacing[] = [0, 2, 4, 8, 12, 16, 20, 24, 32, 48, 64];
    16|   return (
    17|     <Group spacing={12} direction="column">
    18|       {spacings.map((spacing) => (
    19|         <Box background={Colors.Gray100} padding={8} key={`${spacing}`}>
    20|           <Group direction="row" spacing={spacing}>
    21|             <ExampleText>
    22|               <strong>{spacing}</strong>
    23|             </ExampleText>
    24|             <ExampleText>China</ExampleText>
    25|             <ExampleText>France</ExampleText>
    26|             <ExampleText>Russia</ExampleText>
    27|             <ExampleText>United Kingdom</ExampleText>
    28|             <ExampleText>United States</ExampleText>
    29|           </Group>
    30|         </Box>
    31|       ))}
    32|     </Group>
    33|   );
    34| };
    35| export const Column = () => {
    36|   const spacings: Spacing[] = [4, 8, 12, 16, 32, 48, 64];
    37|   return (
    38|     <Group spacing={12} direction="column">
    39|       {spacings.map((spacing) => (
    40|         <Box background={Colors.Gray100} padding={12} key={`${spacing}`}>
    41|           <Group direction="column" spacing={spacing}>
    42|             <ExampleText>
    43|               <strong>{spacing}</strong>
    44|             </ExampleText>
    45|             <ExampleText>China</ExampleText>
    46|             <ExampleText>France</ExampleText>
    47|             <ExampleText>Russia</ExampleText>
    48|             <ExampleText>United Kingdom</ExampleText>
    49|             <ExampleText>United States</ExampleText>
    50|           </Group>
    51|         </Box>
    52|       ))}
    53|     </Group>
    54|   );
    55| };
    56| export const AlignItemsColumn = () => {
    57|   const alignments: AlignItems[] = ['center', 'flex-start', 'flex-end'];
    58|   return (
    59|     <Group spacing={12} direction="column">
    60|       {alignments.map((alignment) => (
    61|         <Box background={Colors.Gray100} padding={12} key={alignment}>
    62|           <Group direction="column" alignItems={alignment} spacing={8}>
    63|             <ExampleText>
    64|               <strong>{alignment}</strong>
    65|             </ExampleText>
    66|             <ExampleText>France</ExampleText>
    67|             <ExampleText>Russia</ExampleText>
    68|             <ExampleText>United Kingdom</ExampleText>
    69|             <ExampleText>United States</ExampleText>
    70|           </Group>
    71|         </Box>
    72|       ))}
    73|     </Group>
    74|   );
    75| };
    76| export const EmptyChildren = () => {
    77|   const EmptyThing = () => {
    78|     return null;
    79|   };
    80|   return (
    81|     <Group direction="column" spacing={12}>
    82|       <Body>
    83|         In the group below, two children are empty: one inline <Code>null</Code>, and one component
    84|         that renders to <Code>null</Code>. Upon inspection of the DOM, note that both are given{' '}
    85|         <Code>display: none</Code>.
    86|       </Body>
    87|       <Group background={Colors.Gray50} padding={12} direction="column" spacing={8}>
    88|         <ExampleText>China</ExampleText>
    89|         <ExampleText>France</ExampleText>
    90|         {null}
    91|         <EmptyThing />
    92|         <ExampleText>Russia</ExampleText>
    93|         <ExampleText>United Kingdom</ExampleText>
    94|         <ExampleText>United States</ExampleText>
    95|       </Group>
    96|     </Group>
    97|   );
    98| };
    99| export const PointerEventsTest = () => {
   100|   return (
   101|     <div>
   102|       <ButtonLink color={{link: Colors.Blue500, hover: Colors.Yellow500}}>
   103|         <strong>Try to click me!</strong>
   104|       </ButtonLink>
   105|       <Group direction="column" spacing={32}>
   106|         <Group direction="column" spacing={32}>
   107|           <Heading>Heading</Heading>
   108|           <div style={{width: '500px'}}>
   109|             This is a Group within a Group, which results in overlapping negative margins. We want
   110|             to be sure that the user can still interact with elements that are overlapped by the
   111|             relevant margins.
   112|           </div>
   113|         </Group>
   114|         <Subheading>Subheading</Subheading>
   115|       </Group>
   116|     </div>
   117|   );
   118| };
   119| export const Wrap = () => {
   120|   const wraps: FlexWrap[] = ['wrap', 'nowrap'];
   121|   return (
   122|     <Group spacing={12} direction="column">
   123|       {wraps.map((wrap) => (
   124|         <Box background={Colors.Gray100} padding={12} key={wrap} style={{width: '400px'}}>
   125|           <Group direction="row" spacing={8} wrap={wrap}>
   126|             <ExampleText>
   127|               <strong>{wrap}</strong>
   128|             </ExampleText>
   129|             <ExampleText>China</ExampleText>
   130|             <ExampleText>France</ExampleText>
   131|             <ExampleText>Russia</ExampleText>
   132|             <ExampleText>United Kingdom</ExampleText>
   133|             <ExampleText>United States</ExampleText>
   134|           </Group>
   135|         </Box>
   136|       ))}
   137|     </Group>
   138|   );
   139| };
   140| const ExampleText = styled.span`
   141|   font-size: 12px;
   142|   text-transform: uppercase;
   143| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/Icon.stories.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-56 ---
     1| import {Meta} from '@storybook/react';
     2| import * as React from 'react';
     3| import {Box} from '../Box';
     4| import {Colors} from '../Colors';
     5| import {IconNames as _iconNames, Icon} from '../Icon';
     6| import {Tooltip} from '../Tooltip';
     7| const IconNames = _iconNames.slice().sort();
     8| export default {
     9|   title: 'Icon',
    10|   component: Icon,
    11| } as Meta;
    12| export const Size16 = () => {
    13|   return (
    14|     <Box flex={{gap: 6, wrap: 'wrap'}}>
    15|       {IconNames.map((name) => (
    16|         <Tooltip content={name} key={name}>
    17|           <Icon name={name} />
    18|         </Tooltip>
    19|       ))}
    20|     </Box>
    21|   );
    22| };
    23| export const Size24 = () => {
    24|   return (
    25|     <Box flex={{gap: 6, wrap: 'wrap'}}>
    26|       {IconNames.map((name) => (
    27|         <Tooltip content={name} key={name}>
    28|           <Icon name={name} size={24} />
    29|         </Tooltip>
    30|       ))}
    31|     </Box>
    32|   );
    33| };
    34| export const IconColors = () => {
    35|   const colorKeys = Object.keys(Colors);
    36|   const numColors = colorKeys.length;
    37|   const colorAtIndex = (index: number) => {
    38|     const colorKey = colorKeys[index % numColors];
    39|     if (colorKey) {
    40|       const colorAtKey = Colors[colorKey as keyof typeof Colors];
    41|       if (colorAtKey) {
    42|         return colorAtKey;
    43|       }
    44|     }
    45|     return Colors.Gray100;
    46|   };
    47|   return (
    48|     <Box flex={{gap: 6, wrap: 'wrap'}}>
    49|       {IconNames.map((name, idx) => (
    50|         <Tooltip content={name} key={name}>
    51|           <Icon name={name} color={colorAtIndex(idx)} size={24} />
    52|         </Tooltip>
    53|       ))}
    54|     </Box>
    55|   );
    56| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/MiddleTruncate.stories.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-25 ---
     1| import {Meta} from '@storybook/react';
     2| import faker from 'faker';
     3| import * as React from 'react';
     4| import {Box} from '../Box';
     5| import {Colors} from '../Colors';
     6| import {Icon} from '../Icon';
     7| import {MiddleTruncate} from '../MiddleTruncate';
     8| import {Slider} from '../Slider';
     9| import {Tag} from '../Tag';
    10| export default {
    11|   title: 'MiddleTruncate',
    12|   component: MiddleTruncate,
    13| } as Meta;
    14| export const Simple = () => {
    15|   const sizer = React.useRef<HTMLDivElement>(null);
    16|   const [controlledWidth, setControlledWidth] = React.useState(400);
    17|   const sentences = React.useMemo(() => {
    18|     return new Array(30).fill(null).map(() => faker.random.words(20));
    19|   }, []);
    20|   return (
    21|     <>
    22|       <Slider
    23|         min={200}
    24|         max={600}
    25|         stepSize={10}

# --- HUNK 2: Lines 96-202 ---
    96| export const Containers = () => {
    97|   const sizer = React.useRef<HTMLDivElement>(null);
    98|   const [controlledWidth, setControlledWidth] = React.useState(400);
    99|   const LONG_TEXT =
   100|     'Four score and seven years ago our fathers brought forth on this continent, a new nation, conceived in Liberty, and dedicated to the proposition that all men are created equal.';
   101|   const SHORT_TEXT = 'Hello world';
   102|   return (
   103|     <>
   104|       <Slider
   105|         min={200}
   106|         max={600}
   107|         stepSize={10}
   108|         value={controlledWidth}
   109|         labelRenderer={false}
   110|         onChange={(value) => setControlledWidth(value)}
   111|       />
   112|       <div ref={sizer} style={{width: controlledWidth}}>
   113|         <Box flex={{direction: 'row', gap: 24, alignItems: 'center'}} margin={{vertical: 12}}>
   114|           <Box
   115|             flex={{direction: 'column', gap: 8, alignItems: 'flex-start'}}
   116|             background={Colors.Gray100}
   117|             padding={12}
   118|             style={{overflow: 'hidden'}}
   119|           >
   120|             <div style={{width: '100%'}}>
   121|               <MiddleTruncate text={LONG_TEXT} />
   122|             </div>
   123|             <Box
   124|               flex={{direction: 'row', gap: 4}}
   125|               background={Colors.Blue100}
   126|               padding={4}
   127|               style={{maxWidth: '100px'}}
   128|             >
   129|               <Icon name="account_circle" />
   130|               <MiddleTruncate text={LONG_TEXT} />
   131|             </Box>
   132|             <Box
   133|               flex={{direction: 'row', gap: 4}}
   134|               background={Colors.Blue100}
   135|               padding={4}
   136|               style={{maxWidth: '300px'}}
   137|             >
   138|               <Icon name="account_circle" />
   139|               <MiddleTruncate text={LONG_TEXT} />
   140|             </Box>
   141|             <Box
   142|               flex={{direction: 'row', gap: 4}}
   143|               background={Colors.Blue100}
   144|               padding={4}
   145|               style={{width: '100%'}}
   146|             >
   147|               <Icon name="account_circle" />
   148|               <div style={{flex: 1, overflow: 'hidden'}}>
   149|                 <MiddleTruncate text={LONG_TEXT} />
   150|               </div>
   151|             </Box>
   152|             <Box flex={{direction: 'row', gap: 4}} background={Colors.Blue100} padding={4}>
   153|               <Icon name="account_circle" />
   154|               <MiddleTruncate text={LONG_TEXT} />
   155|             </Box>
   156|           </Box>
   157|         </Box>
   158|         <Box margin={{bottom: 12}}>
   159|           <Box
   160|             flex={{direction: 'column', gap: 8, alignItems: 'flex-start'}}
   161|             background={Colors.Gray100}
   162|             padding={12}
   163|             style={{overflow: 'hidden'}}
   164|           >
   165|             <MiddleTruncate text={SHORT_TEXT} />
   166|             <Box
   167|               flex={{direction: 'row', gap: 4}}
   168|               background={Colors.Blue100}
   169|               padding={4}
   170|               style={{maxWidth: '100px'}}
   171|             >
   172|               <Icon name="account_circle" />
   173|               <MiddleTruncate text={SHORT_TEXT} />
   174|             </Box>
   175|             <Box
   176|               flex={{direction: 'row', gap: 4}}
   177|               background={Colors.Blue100}
   178|               padding={4}
   179|               style={{maxWidth: '60px'}}
   180|             >
   181|               <Icon name="account_circle" />
   182|               <MiddleTruncate text={SHORT_TEXT} />
   183|             </Box>
   184|             <Box
   185|               flex={{direction: 'row', gap: 4}}
   186|               background={Colors.Blue100}
   187|               padding={4}
   188|               style={{maxWidth: '100%'}}
   189|             >
   190|               <Icon name="account_circle" />
   191|               <MiddleTruncate text={SHORT_TEXT} />
   192|             </Box>
   193|             <Box flex={{direction: 'row', gap: 4}} background={Colors.Blue100} padding={4}>
   194|               <Icon name="account_circle" />
   195|               <MiddleTruncate text={SHORT_TEXT} />
   196|             </Box>
   197|           </Box>
   198|         </Box>
   199|       </div>
   200|     </>
   201|   );
   202| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/ProgressBar.stories.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-28 ---
     1| import {Meta} from '@storybook/react';
     2| import * as React from 'react';
     3| import {Box} from '../Box';
     4| import {Colors} from '../Colors';
     5| import {Group} from '../Group';
     6| import {ProgressBar} from '../ProgressBar';
     7| export default {
     8|   title: 'ProgressBar',
     9|   component: ProgressBar,
    10| } as Meta;
    11| export const Sizes = () => {
    12|   return (
    13|     <Group direction="column" spacing={32}>
    14|       <Box padding={20} border="all">
    15|         <Group direction="column" spacing={16}>
    16|           <ProgressBar intent="primary" value={0.1} animate={true} />
    17|           <ProgressBar intent="primary" value={0.7} />
    18|         </Group>
    19|       </Box>
    20|       <Box padding={20} border="all">
    21|         <Group direction="column" spacing={16}>
    22|           <ProgressBar intent="primary" value={0.1} animate={true} fillColor={Colors.Blue500} />
    23|           <ProgressBar intent="primary" value={0.7} fillColor={Colors.Blue500} />
    24|         </Group>
    25|       </Box>
    26|     </Group>
    27|   );
    28| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/Slider.stories.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-61 ---
     1| import {Intent} from '@blueprintjs/core';
     2| import {Meta} from '@storybook/react';
     3| import * as React from 'react';
     4| import {Colors} from '../Colors';
     5| import {Group} from '../Group';
     6| import {Slider, MultiSlider} from '../Slider';
     7| export default {
     8|   title: 'Slider',
     9|   component: Slider,
    10| } as Meta;
    11| export const Sizes = () => {
    12|   const [value, setValue] = React.useState(2);
    13|   const [minValue, setMinValue] = React.useState(1);
    14|   return (
    15|     <Group direction="column" spacing={32}>
    16|       <Slider value={value} onChange={setValue} max={10} labelStepSize={2} />
    17|       <Slider
    18|         vertical
    19|         min={0}
    20|         max={10}
    21|         stepSize={1}
    22|         value={value}
    23|         labelRenderer={false}
    24|         onChange={setValue}
    25|       />
    26|       <MultiSlider
    27|         min={0}
    28|         max={10}
    29|         stepSize={0.1}
    30|         labelRenderer={(value: number) => (
    31|           <span style={{whiteSpace: 'nowrap'}}>Value: {value.toFixed(1)}</span>
    32|         )}
    33|         onChange={(values: number[]) => {
    34|           const [first] = values;
    35|           first && setValue(first);
    36|         }}
    37|       >
    38|         <MultiSlider.Handle value={value} type="full" intentAfter={Intent.PRIMARY} />
    39|       </MultiSlider>
    40|       <MultiSlider
    41|         min={0}
    42|         max={10}
    43|         stepSize={0.01}
    44|         fillColor={Colors.Blue500}
    45|         labelRenderer={(value: number) => (
    46|           <span style={{whiteSpace: 'nowrap'}}>Value: {value.toFixed(1)}</span>
    47|         )}
    48|         onChange={(values: number[]) => {
    49|           const [first, second] = values;
    50|           if (typeof first === 'number' && typeof second === 'number') {
    51|             setMinValue(Math.min(first, second));
    52|             setValue(Math.max(first, second));
    53|           }
    54|         }}
    55|       >
    56|         <MultiSlider.Handle value={minValue} type="full" intentAfter={Intent.PRIMARY} />
    57|         <MultiSlider.Handle value={value} type="full" intentBefore={Intent.PRIMARY} />
    58|       </MultiSlider>
    59|     </Group>
    60|   );
    61| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/Spinner.stories.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-53 ---
     1| import {Meta} from '@storybook/react';
     2| import * as React from 'react';
     3| import {Box} from '../Box';
     4| import {Colors} from '../Colors';
     5| import {Group} from '../Group';
     6| import {Spinner} from '../Spinner';
     7| import {Caption, Code} from '../Text';
     8| export default {
     9|   title: 'Spinner',
    10|   component: Spinner,
    11| } as Meta;
    12| export const Sizes = () => {
    13|   return (
    14|     <Group direction="column" spacing={32}>
    15|       <Box padding={20} border="all">
    16|         <Group direction="column" spacing={16}>
    17|           <Code>purpose=&quot;caption-text&quot;</Code>
    18|           <Group direction="row" spacing={8} alignItems="center">
    19|             <Spinner purpose="caption-text" />
    20|             <Caption>Waiting for something to load</Caption>
    21|           </Group>
    22|         </Group>
    23|       </Box>
    24|       <Box padding={20} border="all">
    25|         <Group direction="column" spacing={16}>
    26|           <Code>purpose=&quot;body-text&quot;</Code>
    27|           <Group direction="row" spacing={8} alignItems="center">
    28|             <Spinner purpose="body-text" />
    29|             <div>Waiting for something to load</div>
    30|           </Group>
    31|         </Group>
    32|       </Box>
    33|       <Box padding={20} border="all">
    34|         <Group direction="column" spacing={16}>
    35|           <Code>purpose=&quot;section&quot;</Code>
    36|           <Box flex={{direction: 'row', justifyContent: 'center', gap: 10}} padding={24}>
    37|             <Spinner purpose="section" />
    38|             <Spinner purpose="section" fillColor={Colors.Blue500} />
    39|           </Box>
    40|         </Group>
    41|       </Box>
    42|       <Box padding={20} border="all">
    43|         <Group direction="column" spacing={16}>
    44|           <Code>purpose=&quot;page&quot;</Code>
    45|           <Box flex={{direction: 'row', justifyContent: 'center', gap: 10}} padding={48}>
    46|             <Spinner purpose="page" />
    47|             <Spinner purpose="page" fillColor={Colors.Blue500} />
    48|           </Box>
    49|         </Group>
    50|       </Box>
    51|     </Group>
    52|   );
    53| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/Tabs.stories.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-31 ---
     1| import {Meta} from '@storybook/react';
     2| import * as React from 'react';
     3| import {Colors} from '../Colors';
     4| import {Group} from '../Group';
     5| import {Icon} from '../Icon';
     6| import {Tabs, Tab} from '../Tabs';
     7| export default {
     8|   title: 'Tabs',
     9|   component: Tabs,
    10| } as Meta;
    11| export const Default = () => {
    12|   const [tab, setTab] = React.useState('health');
    13|   return (
    14|     <Group spacing={0} direction="column">
    15|       <Tabs selectedTabId={tab} onChange={setTab}>
    16|         <Tab id="health" title="Health" />
    17|         <Tab id="schedules" title="Schedules" count={2} />
    18|         <Tab id="sensors" title="Sensors" icon={<Icon name="warning" color={Colors.Yellow500} />} />
    19|         <Tab id="backfills" title="Backfills" disabled />
    20|         <Tab id="config" title={<a href="/?path=/story/box">Box Component</a>} />
    21|       </Tabs>
    22|       <Tabs small selectedTabId={tab} onChange={setTab}>
    23|         <Tab id="health" title="Health" />
    24|         <Tab id="schedules" title="Schedules" count={2} />
    25|         <Tab id="sensors" title="Sensors" icon={<Icon name="warning" color={Colors.Yellow500} />} />
    26|         <Tab id="backfills" title="Backfills" disabled />
    27|         <Tab id="config" title={<a href="/?path=/story/box">Box Component</a>} />
    28|       </Tabs>
    29|     </Group>
    30|   );
    31| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/TagSelector.stories.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-26 ---
     1| import {Meta} from '@storybook/react';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| import {Box} from '../Box';
     5| import {Checkbox} from '../Checkbox';
     6| import {Colors} from '../Colors';
     7| import {Icon} from '../Icon';
     8| import {Menu, MenuDivider, MenuItem} from '../Menu';
     9| import {TagSelector, TagSelectorWithSearch} from '../TagSelector';
    10| export default {
    11|   title: 'TagSelector',
    12|   component: TagSelector,
    13| } as Meta;
    14| const allTags = [
    15|   'NY',
    16|   'NJ',
    17|   'VC',
    18|   'FL',
    19|   'AL',
    20|   'CALIFORNIA_SUPER_LONG_TAG',
    21|   'ANOTHER_REALLY_LONG_TAG',
    22|   'LONG_TAGS_ARE_GREAT_FOR_TESTING_DECEMBER_2020',
    23| ];
    24| export const Basic = () => {
    25|   const [selectedTags, setSelectedTags] = React.useState<string[]>(['NY', 'NJ']);
    26|   return (

# --- HUNK 2: Lines 40-80 ---
    40| export const Styled = () => {
    41|   const [selectedTags, setSelectedTags] = React.useState<string[]>(allTags.slice(0, 2));
    42|   const isAllSelected = selectedTags.length === 6;
    43|   return (
    44|     <TagSelector
    45|       allTags={allTags}
    46|       selectedTags={selectedTags}
    47|       setSelectedTags={setSelectedTags}
    48|       placeholder="Select a partition or create one"
    49|       renderDropdownItem={(tag, dropdownItemProps) => {
    50|         return (
    51|           <label>
    52|             <MenuItem
    53|               tagName="div"
    54|               text={
    55|                 <Box flex={{alignItems: 'center', gap: 12}}>
    56|                   <Checkbox
    57|                     checked={dropdownItemProps.selected}
    58|                     onChange={dropdownItemProps.toggle}
    59|                   />
    60|                   <Dot color={Math.random() > 0.5 ? Colors.Green500 : Colors.Gray500} />
    61|                   <span>{tag}</span>
    62|                 </Box>
    63|               }
    64|             />
    65|           </label>
    66|         );
    67|       }}
    68|       renderDropdown={(dropdown) => {
    69|         const toggleAll = () => {
    70|           if (isAllSelected) {
    71|             setSelectedTags([]);
    72|           } else {
    73|             setSelectedTags(allTags);
    74|           }
    75|         };
    76|         return (
    77|           <Menu>
    78|             <Box padding={4}>
    79|               <Box flex={{direction: 'column'}} padding={{horizontal: 8}}>
    80|                 <Box flex={{direction: 'row', alignItems: 'center'}}>


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/TextArea.stories.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-42 ---
     1| import {Meta} from '@storybook/react';
     2| import * as React from 'react';
     3| import {Colors} from '../Colors';
     4| import {TextArea} from '../TextInput';
     5| export default {
     6|   title: 'TextArea',
     7|   component: TextArea,
     8| } as Meta;
     9| export const Default = () => {
    10|   const [value, setValue] = React.useState('');
    11|   return (
    12|     <TextArea
    13|       placeholder="Type anything"
    14|       value={value}
    15|       onChange={(e) => setValue(e.target.value)}
    16|       $resize="none"
    17|     />
    18|   );
    19| };
    20| export const Resize = () => {
    21|   const [value, setValue] = React.useState('');
    22|   return (
    23|     <TextArea
    24|       placeholder="Type anything"
    25|       value={value}
    26|       onChange={(e) => setValue(e.target.value)}
    27|       $resize="vertical"
    28|     />
    29|   );
    30| };
    31| export const StrokeColor = () => {
    32|   const [value, setValue] = React.useState('');
    33|   return (
    34|     <TextArea
    35|       placeholder="Type anything"
    36|       value={value}
    37|       onChange={(e) => setValue(e.target.value)}
    38|       $resize="none"
    39|       $strokeColor={Colors.Red500}
    40|     />
    41|   );
    42| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/TextInput.stories.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-54 ---
     1| import {Meta} from '@storybook/react';
     2| import * as React from 'react';
     3| import {Colors} from '../Colors';
     4| import {Icon} from '../Icon';
     5| import {TextInput} from '../TextInput';
     6| export default {
     7|   title: 'TextInput',
     8|   component: TextInput,
     9| } as Meta;
    10| export const Default = () => {
    11|   const [value, setValue] = React.useState('');
    12|   return (
    13|     <TextInput
    14|       placeholder="Type anything"
    15|       value={value}
    16|       onChange={(e) => setValue(e.target.value)}
    17|     />
    18|   );
    19| };
    20| export const WithIcon = () => {
    21|   const [value, setValue] = React.useState('');
    22|   return (
    23|     <TextInput
    24|       icon="layers"
    25|       placeholder="Type anything"
    26|       value={value}
    27|       onChange={(e) => setValue(e.target.value)}
    28|     />
    29|   );
    30| };
    31| export const StrokeColor = () => {
    32|   const [value, setValue] = React.useState('');
    33|   return (
    34|     <TextInput
    35|       icon="layers"
    36|       placeholder="Type anything"
    37|       value={value}
    38|       onChange={(e) => setValue(e.target.value)}
    39|       strokeColor={Colors.Red500}
    40|     />
    41|   );
    42| };
    43| export const RightElement = () => {
    44|   const [value, setValue] = React.useState('');
    45|   return (
    46|     <TextInput
    47|       icon="layers"
    48|       placeholder="Type anything"
    49|       value={value}
    50|       onChange={(e) => setValue(e.target.value)}
    51|       rightElement={<Icon name="info" color={Colors.Gray500} />}
    52|     />
    53|   );
    54| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/TokenizingField.stories.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-24 ---
     1| import {Meta} from '@storybook/react';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| import {Colors} from '../Colors';
     5| import {Group} from '../Group';
     6| import {
     7|   Suggestion,
     8|   SuggestionProvider,
     9|   TokenizingField,
    10|   TokenizingFieldValue,
    11| } from '../TokenizingField';
    12| export default {
    13|   title: 'TokenizingField',
    14|   component: TokenizingField,
    15| } as Meta;
    16| export const Default = () => {
    17|   const [value, setValue] = React.useState<TokenizingFieldValue[]>([]);
    18|   const suggestions = [
    19|     {
    20|       token: 'pipeline',
    21|       values: () => ['airline_demo_ingest', 'airline_demo_warehouse', 'composition'],
    22|     },
    23|     {
    24|       token: 'status',

# --- HUNK 2: Lines 58-101 ---
    58|       values: () => ['core@dagsterlabs.com', 'cloud@dagsterlabs.com'],
    59|     },
    60|     {
    61|       values: () => Object.keys(users),
    62|       suggestionFilter: (typed: string, s: Suggestion) =>
    63|         s.text.toLowerCase().includes(typed.toLowerCase()) ||
    64|         (users as any)[s.text].toLowerCase().includes(typed.toLowerCase()),
    65|     },
    66|   ];
    67|   return (
    68|     <TokenizingField
    69|       values={value}
    70|       onChange={(values) => setValue(values)}
    71|       suggestionProviders={suggestions}
    72|     />
    73|   );
    74| };
    75| export const CustomSuggestionRenderer = () => {
    76|   const [value, setValue] = React.useState<TokenizingFieldValue[]>([]);
    77|   const colors = {
    78|     Red: Colors.Red500,
    79|     Green: Colors.Green500,
    80|     Blue: Colors.Blue500,
    81|     Yellow: Colors.Yellow500,
    82|   };
    83|   const suggestionProviders: SuggestionProvider[] = [{values: () => Object.keys(colors)}];
    84|   return (
    85|     <TokenizingField
    86|       values={value}
    87|       onChange={(values) => setValue(values)}
    88|       suggestionProviders={suggestionProviders}
    89|       suggestionRenderer={(suggestion) => (
    90|         <Group direction="row" spacing={8} alignItems="center">
    91|           <ColorSwatch $color={suggestion.text} />
    92|           {suggestion.text}
    93|         </Group>
    94|       )}
    95|     />
    96|   );
    97| };
    98| const ColorSwatch = styled.div<{$color: string}>`
    99|   border-radius: 50%;
   100|   background-color: ${(p) => p.$color};
   101|   width: 16px;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/Tooltip.stories.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-92 ---
     1| import {Meta} from '@storybook/react';
     2| import * as React from 'react';
     3| import {Box} from '../Box';
     4| import {Button} from '../Button';
     5| import {Checkbox} from '../Checkbox';
     6| import {Colors} from '../Colors';
     7| import {CustomTooltipProvider} from '../CustomTooltipProvider';
     8| import {Group} from '../Group';
     9| import {Icon} from '../Icon';
    10| import {Tooltip, GlobalTooltipStyle} from '../Tooltip';
    11| const SOLID_STYLES: React.CSSProperties = {
    12|   background: Colors.Yellow200,
    13|   transform: 'translate(0,0)',
    14|   border: `1px solid ${Colors.Yellow500}`,
    15|   color: Colors.Gray900,
    16|   fontSize: '12px',
    17|   padding: 6,
    18| };
    19| const JOB_STYLES: React.CSSProperties = {
    20|   background: Colors.Gray700,
    21|   border: `1px solid ${Colors.Gray900}`,
    22|   color: Colors.White,
    23|   fontSize: '15px',
    24|   padding: 3,
    25| };
    26| export default {
    27|   title: 'Tooltip',
    28|   component: Tooltip,
    29| } as Meta;
    30| export const Default = () => {
    31|   const content = (
    32|     <>
    33|       View snapshot as of <strong>12cad35e</strong>
    34|     </>
    35|   );
    36|   return (
    37|     <Group spacing={8} direction="column">
    38|       <CustomTooltipProvider />
    39|       <GlobalTooltipStyle />
    40|       <p style={{color: Colors.Gray500}}>
    41|         Use the <code>Tooltip</code> component to attach additional explanations, descriptions, and
    42|         context to controls, icons, etc.
    43|       </p>
    44|       <Tooltip content={content} placement="bottom">
    45|         Tooltip Below
    46|       </Tooltip>
    47|       <Tooltip content={content} placement="top">
    48|         Tooltip Above
    49|       </Tooltip>
    50|       <Tooltip
    51|         content={content}
    52|         modifiers={{offset: {enabled: true, options: {offset: [0, 16]}}}}
    53|         placement="right"
    54|       >
    55|         Tooltip After, Custom Offset
    56|       </Tooltip>
    57|       <Tooltip
    58|         content={
    59|           <div style={{display: 'flex', width: 400, gap: 8}}>
    60|             <Icon name="warning" color={Colors.Yellow500} />
    61|             <div>
    62|               Wow, who would have thought you can put an entire paragraph into a tooltip? Just
    63|               don&apos;t try to put interactable content here, they don&apos;t hold focus.
    64|             </div>
    65|           </div>
    66|         }
    67|         placement="top"
    68|       >
    69|         Tooltip with Block Content
    70|       </Tooltip>
    71|       <hr />
    72|       <p style={{color: Colors.Gray500}}>
    73|         Use the <code>data-tooltip</code> attribute to expand truncated job, op names, etc. on
    74|         hover. These are highly stylable via <code>data-tooltip-style</code> so they can look like
    75|         boxes / nodes expanding in place to reveal their full text. There is no per-component render
    76|         cost to these annotations so they can be used in cases when thousands of nodes are rendered.
    77|         <br />
    78|         <br />
    79|         These tooltips automatically appear only when the content is truncated or when content
    80|         contains a <code></code>
    81|       </p>
    82|       {['short_solid', 'long_solid_name_here'].map((name) => (
    83|         <div
    84|           key={name}
    85|           data-tooltip={name}
    86|           data-tooltip-style={JSON.stringify(SOLID_STYLES)}
    87|           style={{
    88|             width: '100px',
    89|             overflow: 'hidden',
    90|             textOverflow: 'ellipsis',
    91|             position: 'relative',
    92|             ...SOLID_STYLES,


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/UnstyledButton.stories.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-48 ---
     1| import {Meta} from '@storybook/react';
     2| import * as React from 'react';
     3| import {Box} from '../Box';
     4| import {Colors} from '../Colors';
     5| import {Icon} from '../Icon';
     6| import {Caption} from '../Text';
     7| import {UnstyledButton} from '../UnstyledButton';
     8| export default {
     9|   title: 'UnstyledButton',
    10|   component: UnstyledButton,
    11| } as Meta;
    12| export const Default = () => {
    13|   return (
    14|     <Box flex={{direction: 'column', gap: 12, alignItems: 'flex-start'}}>
    15|       <UnstyledButton>No style here at all</UnstyledButton>
    16|       <UnstyledButton>
    17|         <Caption>Hey I am a Caption</Caption>
    18|       </UnstyledButton>
    19|       <UnstyledButton>
    20|         <Box flex={{direction: 'row', gap: 8, alignItems: 'center'}}>
    21|           <Icon name="account_tree" />
    22|           <div>A button with icon and text</div>
    23|         </Box>
    24|       </UnstyledButton>
    25|       <UnstyledButton disabled>Disabled button</UnstyledButton>
    26|       <UnstyledButton>
    27|         <span style={{color: Colors.Blue700}}>Button with blue text</span>
    28|       </UnstyledButton>
    29|       <UnstyledButton disabled>
    30|         <span style={{color: Colors.Blue700}}>Disabled button with blue text</span>
    31|       </UnstyledButton>
    32|     </Box>
    33|   );
    34| };
    35| export const UnstyledWithLargerClickArea = () => {
    36|   return (
    37|     <Box padding={24}>
    38|       <UnstyledButton $expandedClickPx={24}>Lots more to click on</UnstyledButton>
    39|     </Box>
    40|   );
    41| };
    42| export const UnstyledWithFocusOutline = () => {
    43|   return (
    44|     <UnstyledButton $showFocusOutline $expandedClickPx={4}>
    45|       Click me to see focus
    46|     </UnstyledButton>
    47|   );
    48| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/__stories__/useSuggestionsForString.stories.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-64 ---
     1| import {Meta} from '@storybook/react';
     2| import * as React from 'react';
     3| import {ButtonLink} from '../ButtonLink';
     4| import {Colors} from '../Colors';
     5| import {Group} from '../Group';
     6| import {useSuggestionsForString} from '../useSuggestionsForString';
     7| export default {
     8|   title: 'useSuggestionsForString',
     9| } as Meta;
    10| const empties = ['query:', 'prez:', 'state:'];
    11| const values = [
    12|   ...empties,
    13|   'prez:washington',
    14|   'prez:adams',
    15|   'prez:jefferson',
    16|   'state:hull',
    17|   'state:rusk',
    18|   'state:shultz',
    19| ];
    20| export const Example = () => {
    21|   const [value, setValue] = React.useState('');
    22|   const buildSuggestions = React.useCallback(
    23|     (queryString: string): string[] =>
    24|       queryString
    25|         ? values.filter((value) => value.toLowerCase().startsWith(queryString))
    26|         : [...empties],
    27|     [],
    28|   );
    29|   const {suggestions, onSelectSuggestion} = useSuggestionsForString(buildSuggestions, value);
    30|   const onChange = React.useCallback(
    31|     (e: React.ChangeEvent<HTMLInputElement>) => setValue(e.target.value),
    32|     [setValue],
    33|   );
    34|   return (
    35|     <Group direction="column" spacing={12}>
    36|       <input
    37|         type="text"
    38|         value={value}
    39|         onChange={onChange}
    40|         style={{
    41|           border: `1px solid ${Colors.Gray400}`,
    42|           borderRadius: '3px',
    43|           padding: '8px',
    44|           fontSize: '14px',
    45|           width: '500px',
    46|         }}
    47|       />
    48|       <div>
    49|         {suggestions.map((suggestion) => (
    50|           <div key={suggestion}>
    51|             <ButtonLink
    52|               onMouseDown={(e: React.MouseEvent<any>) => {
    53|                 e.preventDefault();
    54|                 setValue(onSelectSuggestion(suggestion));
    55|               }}
    56|             >
    57|               {suggestion}
    58|             </ButtonLink>
    59|           </div>
    60|         ))}
    61|       </div>
    62|     </Group>
    63|   );
    64| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/components/configeditor/ConfigEditorHelp.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-49 ---
     1| import * as React from 'react';
     2| import styled from 'styled-components';
     3| import {Colors} from '../Colors';
     4| import {ConfigTypeSchema, TypeData} from '../ConfigTypeSchema';
     5| import {isHelpContextEqual} from '../configeditor/isHelpContextEqual';
     6| import {ConfigEditorHelpContext} from './types/ConfigEditorHelpContext';
     7| interface ConfigEditorHelpProps {
     8|   context: ConfigEditorHelpContext | null;
     9|   allInnerTypes: TypeData[];
    10| }
    11| export const ConfigEditorHelp = React.memo(
    12|   ({context, allInnerTypes}: ConfigEditorHelpProps) => {
    13|     if (!context) {
    14|       return <Container />;
    15|     }
    16|     return (
    17|       <Container>
    18|         <ConfigScrollWrap>
    19|           <ConfigTypeSchema type={context.type} typesInScope={allInnerTypes} maxDepth={2} />
    20|         </ConfigScrollWrap>
    21|         <AutocompletionsNote>Use Ctrl+Space to show auto-completions inline.</AutocompletionsNote>
    22|       </Container>
    23|     );
    24|   },
    25|   (prev, next) => isHelpContextEqual(prev.context, next.context),
    26| );
    27| const AutocompletionsNote = styled.div`
    28|   font-size: 0.75rem;
    29|   text-align: center;
    30|   padding: 4px;
    31|   border-top: 1px solid ${Colors.KeylineGray};
    32|   background: ${Colors.Gray100};
    33|   color: ${Colors.Gray500};
    34| `;
    35| const ConfigScrollWrap = styled.div`
    36|   padding: 8px;
    37|   color: ${Colors.Dark};
    38|   flex: 1;
    39|   pointer-events: initial;
    40|   max-height: 100%;
    41|   overflow-y: auto;
    42| `;
    43| const Container = styled.div`
    44|   position: relative;
    45|   display: flex;
    46|   flex-direction: column;
    47|   background-color: ${Colors.Gray50};
    48|   height: 100%;
    49| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-components/src/index.ts
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-29 ---
     1| export * from './components/Alert';
     2| export * from './components/BaseButton';
     3| export * from './components/BaseTag';
     4| export * from './components/Box';
     5| export * from './components/Button';
     6| export * from './components/ButtonGroup';
     7| export * from './components/ButtonLink';
     8| export * from './components/Checkbox';
     9| export * from './components/Colors';
    10| export * from './components/ConfigEditorDialog';
    11| export * from './components/ConfigEditorWithSchema';
    12| export * from './components/ConfigTypeSchema';
    13| export * from './components/Countdown';
    14| export * from './components/CursorControls';
    15| export * from './components/CustomTooltipProvider';
    16| export * from './components/Icon';
    17| export * from './components/Dialog';
    18| export * from './components/Group';
    19| export * from './components/MainContent';
    20| export * from './components/Menu';
    21| export * from './components/MetadataTable';
    22| export * from './components/MiddleTruncate';
    23| export * from './components/NewConfigEditor';
    24| export * from './components/NonIdealState';
    25| export * from './components/Page';
    26| export * from './components/PageHeader';
    27| export * from './components/Popover';
    28| export * from './components/ProductTour';
    29| export * from './components/Radio';

# --- HUNK 2: Lines 37-58 ---
    37| export * from './components/Suggest';
    38| export * from './components/Table';
    39| export * from './components/Tabs';
    40| export * from './components/Tag';
    41| export * from './components/TagSelector';
    42| export * from './components/Text';
    43| export * from './components/TextInput';
    44| export * from './components/Toaster';
    45| export * from './components/TokenizingField';
    46| export * from './components/Tooltip';
    47| export * from './components/Trace';
    48| export * from './components/Warning';
    49| export * from './components/styles';
    50| export * from './components/useSuggestionsForString';
    51| export * from './components/ErrorBoundary';
    52| export * from './components/useViewport';
    53| export * from './components/UnstyledButton';
    54| export * from './components/StyledRawCodeMirror';
    55| export * from './components/useDelayedState';
    56| export * from './components/ifPlural';
    57| export * from './fonts/GlobalInconsolata';
    58| export * from './fonts/GlobalInter';


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/app/AppError.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-24 ---
     1| import {ServerError} from '@apollo/client';
     2| import {ErrorResponse, onError} from '@apollo/client/link/error';
     3| import {Observable} from '@apollo/client/utilities';
     4| import {FontFamily, Toaster} from '@dagster-io/ui-components';
     5| import {GraphQLError} from 'graphql';
     6| import memoize from 'lodash/memoize';
     7| import * as React from 'react';
     8| import {showCustomAlert} from './CustomAlertProvider';
     9| import {ERROR_CODES_TO_SURFACE, errorCodeToMessage} from './HTTPErrorCodes';
    10| interface DagsterSerializableErrorInfo {
    11|   message: string;
    12|   stack: string[];
    13|   cls_name: string | null;
    14|   cause: DagsterSerializableErrorInfo | null;
    15|   context: DagsterSerializableErrorInfo | null;
    16| }
    17| type DagsterGraphQLError = GraphQLError & {
    18|   extensions:
    19|     | {
    20|         errorInfo?: DagsterSerializableErrorInfo;
    21|       }
    22|     | undefined;
    23| };
    24| const getErrorToaster = memoize(async () => {

# --- HUNK 2: Lines 101-141 ---
   101|       <br />
   102|       If you have a minute, consider reporting this error either by{' '}
   103|       <a href="https://github.com/dagster-io/dagster/issues/" rel="noreferrer" target="_blank">
   104|         filing a Github issue
   105|       </a>{' '}
   106|       or by{' '}
   107|       <a href="https://dagster.slack.com/archives/CCCR6P2UR" rel="noreferrer" target="_blank">
   108|         messaging in the Dagster slack
   109|       </a>
   110|       . Use the <code>&quot;Copy&quot;</code> button below to include error information that is
   111|       helpful for the core development team to diagnose what is happening and to improve Dagster in
   112|       recovering from unexpected errors.
   113|     </div>
   114|   );
   115|   const body = (
   116|     <div>
   117|       {instructions}
   118|       <div
   119|         className="errorInfo"
   120|         style={{
   121|           backgroundColor: 'rgba(206, 17, 38, 0.05)',
   122|           border: '1px solid #d17257',
   123|           borderRadius: 3,
   124|           maxWidth: '90vw',
   125|           maxHeight: '80vh',
   126|           padding: '1em 2em',
   127|           overflow: 'auto',
   128|           color: 'rgb(41, 50, 56)',
   129|           fontFamily: FontFamily.monospace,
   130|           fontSize: '1em',
   131|           whiteSpace: 'pre',
   132|           overflowX: 'auto',
   133|         }}
   134|       >
   135|         {operationName ? `Operation name: ${operationName}\n\n` : null}
   136|         Message: {error.message}
   137|         {'\n\n'}
   138|         Path: {JSON.stringify(error.path)}
   139|         {'\n\n'}
   140|         Locations: {JSON.stringify(error.locations)}
   141|         {stackTraceContent}


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/app/AppProvider.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-97 ---
     1| import {
     2|   ApolloLink,
     3|   ApolloClient,
     4|   ApolloProvider,
     5|   HttpLink,
     6|   InMemoryCache,
     7|   split,
     8| } from '@apollo/client';
     9| import {WebSocketLink} from '@apollo/client/link/ws';
    10| import {getMainDefinition} from '@apollo/client/utilities';
    11| import {
    12|   Colors,
    13|   GlobalDialogStyle,
    14|   GlobalPopoverStyle,
    15|   GlobalSuggestStyle,
    16|   GlobalToasterStyle,
    17|   GlobalTooltipStyle,
    18|   FontFamily,
    19|   CustomTooltipProvider,
    20|   GlobalInter,
    21|   GlobalInconsolata,
    22| } from '@dagster-io/ui-components';
    23| import * as React from 'react';
    24| import {BrowserRouter} from 'react-router-dom';
    25| import {CompatRouter} from 'react-router-dom-v5-compat';
    26| import {createGlobalStyle} from 'styled-components';
    27| import {SubscriptionClient} from 'subscriptions-transport-ws';
    28| import {AssetLiveDataProvider} from '../asset-data/AssetLiveDataProvider';
    29| import {AssetRunLogObserver} from '../asset-graph/AssetRunLogObserver';
    30| import {DeploymentStatusProvider, DeploymentStatusType} from '../instance/DeploymentStatusProvider';
    31| import {InstancePageContext} from '../instance/InstancePageContext';
    32| import {JobFeatureProvider} from '../pipelines/JobFeatureContext';
    33| import {WorkspaceProvider} from '../workspace/WorkspaceContext';
    34| import {AppContext} from './AppContext';
    35| import {CustomAlertProvider} from './CustomAlertProvider';
    36| import {CustomConfirmationProvider} from './CustomConfirmationProvider';
    37| import {LayoutProvider} from './LayoutProvider';
    38| import {PermissionsProvider} from './Permissions';
    39| import {patchCopyToRemoveZeroWidthUnderscores} from './Util';
    40| import {WebSocketProvider} from './WebSocketProvider';
    41| import {AnalyticsContext, dummyAnalytics} from './analytics';
    42| import {migrateLocalStorageKeys} from './migrateLocalStorageKeys';
    43| import {TimeProvider} from './time/TimeContext';
    44| import './blueprint.css';
    45| patchCopyToRemoveZeroWidthUnderscores();
    46| const GlobalStyle = createGlobalStyle`
    47|   * {
    48|     box-sizing: border-box;
    49|   }
    50|   html, body, #root {
    51|     color: ${Colors.Gray800};
    52|     width: 100vw;
    53|     height: 100vh;
    54|     overflow: hidden;
    55|     display: flex;
    56|     flex: 1 1;
    57|     -webkit-font-smoothing: antialiased;
    58|     -moz-osx-font-smoothing: grayscale;
    59|   }
    60|   a,
    61|   a:hover,
    62|   a:active {
    63|     color: ${Colors.Link};
    64|   }
    65|   #root {
    66|     display: flex;
    67|     flex-direction: column;
    68|     align-items: stretch;
    69|   }
    70|   body {
    71|     margin: 0;
    72|     padding: 0;
    73|   }
    74|   body, input, select, textarea {
    75|     font-family: ${FontFamily.default};
    76|   }
    77|   button {
    78|     font-family: inherit;
    79|   }
    80|   code, pre {
    81|     font-family: ${FontFamily.monospace};
    82|     font-size: 16px;
    83|   }
    84| `;
    85| export interface AppProviderProps {
    86|   children: React.ReactNode;
    87|   appCache: InMemoryCache;
    88|   config: {
    89|     apolloLinks: ApolloLink[];
    90|     basePath?: string;
    91|     headers?: {[key: string]: string};
    92|     origin: string;
    93|     telemetryEnabled?: boolean;
    94|     statusPolling: Set<DeploymentStatusType>;
    95|   };
    96| }
    97| export const AppProvider = (props: AppProviderProps) => {


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/app/AppTopNav.tsx
# Total hunks: 4
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {Box, Colors, Icon, IconWrapper, Tooltip} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import {Link, NavLink, useHistory} from 'react-router-dom';
     4| import styled from 'styled-components';
     5| import {DeploymentStatusIcon} from '../nav/DeploymentStatusIcon';
     6| import {VersionNumber} from '../nav/VersionNumber';
     7| import {
     8|   reloadFnForWorkspace,
     9|   useRepositoryLocationReload,
    10| } from '../nav/useRepositoryLocationReload';
    11| import {SearchDialog} from '../search/SearchDialog';
    12| import {LayoutContext} from './LayoutProvider';
    13| import {ShortcutHandler} from './ShortcutHandler';
    14| import {WebSocketStatus} from './WebSocketProvider';
    15| type AppNavLinkType = {
    16|   title: string;
    17|   element: React.ReactNode;
    18| };
    19| interface Props {
    20|   children?: React.ReactNode;
    21|   searchPlaceholder: string;

# --- HUNK 2: Lines 158-198 ---
   158|     navButton.current && navButton.current.focus();
   159|     nav.isOpen ? nav.close() : nav.open();
   160|   }, [nav]);
   161|   const onKeyDown = React.useCallback(
   162|     (e: React.KeyboardEvent<HTMLButtonElement>) => {
   163|       if (e.key === 'Escape' && nav.isOpen) {
   164|         nav.close();
   165|       }
   166|     },
   167|     [nav],
   168|   );
   169|   return (
   170|     <LogoContainer>
   171|       {nav.canOpen ? (
   172|         <ShortcutHandler
   173|           onShortcut={() => onToggle()}
   174|           shortcutLabel="."
   175|           shortcutFilter={(e) => e.key === '.'}
   176|         >
   177|           <NavButton onClick={onToggle} onKeyDown={onKeyDown} ref={navButton}>
   178|             <Icon name="menu" color={Colors.White} size={24} />
   179|           </NavButton>
   180|         </ShortcutHandler>
   181|       ) : null}
   182|       <Box flex={{display: 'inline-flex'}} margin={{left: 8}}>
   183|         <GhostDaggyWithTooltip />
   184|       </Box>
   185|     </LogoContainer>
   186|   );
   187| };
   188| export const GhostDaggyWithTooltip = () => {
   189|   return (
   190|     <DaggyTooltip
   191|       content={
   192|         <Box flex={{direction: 'row', gap: 4}}>
   193|           <WebSocketStatus />
   194|           <VersionNumber />
   195|         </Box>
   196|       }
   197|       placement="bottom"
   198|       modifiers={{offset: {enabled: true, options: {offset: [0, 18]}}}}

# --- HUNK 3: Lines 232-314 ---
   232|     <path
   233|       d="M51.0052 114.84C56.5259 114.84 61.0013 110.363 61.0013 104.84C61.0013 99.317 56.5259 94.8398 51.0052 94.8398C45.4845 94.8398 41.0092 99.317 41.0092 104.84C41.0092 110.363 45.4845 114.84 51.0052 114.84Z"
   234|       fill="#C9C6FA"
   235|     />
   236|     <path
   237|       d="M31.0131 134.84C36.5338 134.84 41.0092 130.363 41.0092 124.84C41.0092 119.317 36.5338 114.84 31.0131 114.84C25.4925 114.84 21.0171 119.317 21.0171 124.84C21.0171 130.363 25.4925 134.84 31.0131 134.84Z"
   238|       fill="#C9C6FA"
   239|     />
   240|     <path
   241|       d="M75.9954 192H77.9946C111.631 192 142.709 168.12 151.226 135.27C152.075 131.86 154.624 130.15 158.033 130.15C159.781 130.22 161.432 130.976 162.627 132.255C163.822 133.533 164.467 135.23 164.421 136.98C164.268 140.47 163.479 143.904 162.091 147.11C162.333 146.738 162.543 146.346 162.721 145.94C165.25 140.157 166.557 133.913 166.56 127.6C166.56 117.79 159.742 111.39 149.956 111.39C132.893 111.39 129.474 126.29 122.277 142.22C114.81 158.76 101.096 176.65 66.5092 176.65C30.5734 176.65 -6.35207 151.48 2.65438 100.3C2.76433 99.66 2.85429 99.0899 2.92426 98.5599C1.60457 105.172 0.934978 111.897 0.925049 118.64C1.02501 159.84 33.2023 191.04 75.9954 192Z"
   242|       fill="#C9C6FA"
   243|     />
   244|   </svg>
   245| );
   246| const DaggyTooltip = styled(Tooltip)`
   247|   &.bp4-popover2-target {
   248|     display: inline-flex;
   249|   }
   250| `;
   251| export const TopNavLink = styled(NavLink)`
   252|   color: ${Colors.Gray400};
   253|   font-weight: 600;
   254|   transition: color 50ms linear;
   255|   padding: 24px 0;
   256|   text-decoration: none;
   257|   :hover {
   258|     color: ${Colors.Gray300};
   259|     text-decoration: none;
   260|   }
   261|   :active,
   262|   &.active {
   263|     color: ${Colors.White};
   264|     text-decoration: none;
   265|   }
   266|   :focus {
   267|     outline: none !important;
   268|     color: ${Colors.White};
   269|   }
   270| `;
   271| export const AppTopNavContainer = styled.div`
   272|   background: ${Colors.Gray900};
   273|   display: flex;
   274|   flex-direction: row;
   275|   justify-content: space-between;
   276|   height: 64px;
   277| `;
   278| const LogoContainer = styled.div`
   279|   cursor: pointer;
   280|   display: flex;
   281|   align-items: center;
   282|   flex-shrink: 0;
   283|   padding-left: 12px;
   284|   svg {
   285|     transition: filter 100ms;
   286|   }
   287|   &:hover {
   288|     svg {
   289|       filter: brightness(90%);
   290|     }
   291|   }
   292| `;
   293| const NavButton = styled.button`
   294|   border-radius: 20px;
   295|   cursor: pointer;
   296|   margin-left: 4px;
   297|   outline: none;
   298|   padding: 6px;
   299|   border: none;
   300|   background: transparent;
   301|   display: block;
   302|   ${IconWrapper} {
   303|     transition: background 100ms linear;
   304|   }
   305|   :hover ${IconWrapper} {
   306|     background: ${Colors.Gray500};
   307|   }
   308|   :active ${IconWrapper} {
   309|     background: ${Colors.Blue200};
   310|   }
   311|   :focus {
   312|     background: ${Colors.Gray700};
   313|   }
   314| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/app/FallthroughRoot.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-46 ---
     1| import {Box, Colors, Spinner} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import {Redirect, Route, Switch} from 'react-router-dom';
     4| import {isHiddenAssetGroupJob} from '../asset-graph/Utils';
     5| import {DagsterRepoOption, WorkspaceContext} from '../workspace/WorkspaceContext';
     6| import {workspacePath, workspacePipelinePath} from '../workspace/workspacePath';
     7| export const FallthroughRoot = () => {
     8|   return (
     9|     <Switch>
    10|       <Route path="*">
    11|         <FinalRedirectOrLoadingRoot />
    12|       </Route>
    13|     </Switch>
    14|   );
    15| };
    16| const getVisibleJobs = (r: DagsterRepoOption) =>
    17|   r.repository.pipelines.filter((j) => !isHiddenAssetGroupJob(j.name));
    18| const FinalRedirectOrLoadingRoot = () => {
    19|   const workspaceContext = React.useContext(WorkspaceContext);
    20|   const {allRepos, loading, locationEntries} = workspaceContext;
    21|   if (loading) {
    22|     return (
    23|       <Box flex={{direction: 'row', justifyContent: 'center'}} style={{paddingTop: '100px'}}>
    24|         <Box flex={{direction: 'row', alignItems: 'center', gap: 16}}>
    25|           <Spinner purpose="section" />
    26|           <div style={{color: Colors.Gray600}}>Loading definitions</div>
    27|         </Box>
    28|       </Box>
    29|     );
    30|   }
    31|   if (locationEntries.length && allRepos.length === 0) {
    32|     return <Redirect to="/locations" />;
    33|   }
    34|   const reposWithVisibleJobs = allRepos.filter((r) => getVisibleJobs(r).length > 0);
    35|   if (reposWithVisibleJobs.length === 0) {
    36|     const repoWithAssetGroup = allRepos.find((r) => r.repository.assetGroups.length);
    37|     if (repoWithAssetGroup) {
    38|       return (
    39|         <Redirect
    40|           to={workspacePath(
    41|             repoWithAssetGroup.repository.name,
    42|             repoWithAssetGroup.repositoryLocation.name,
    43|             `/asset-groups/${repoWithAssetGroup.repository.assetGroups[0]!.groupName}`,
    44|           )}
    45|         />
    46|       );


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/app/Flags.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-28 ---
     1| import memoize from 'lodash/memoize';
     2| import * as React from 'react';
     3| import {getJSONForKey} from '../hooks/useStateWithStorage';
     4| export const DAGSTER_FLAGS_KEY = 'DAGSTER_FLAGS';
     5| export const FeatureFlag = {
     6|   flagDebugConsoleLogging: 'flagDebugConsoleLogging' as const,
     7|   flagDisableWebsockets: 'flagDisableWebsockets' as const,
     8|   flagInstanceConcurrencyLimits: 'flagInstanceConcurrencyLimits' as const,
     9|   flagSensorScheduleLogging: 'flagSensorScheduleLogging' as const,
    10|   flagSidebarResources: 'flagSidebarResources' as const,
    11|   flagDisableAutoLoadDefaults: 'flagDisableAutoLoadDefaults' as const,
    12|   flagDAGSidebar: 'flagDAGSidebar' as const,
    13|   flagDisableDAGCache: 'flagDisableDAGCache' as const,
    14| };
    15| export type FeatureFlagType = keyof typeof FeatureFlag;
    16| export const getFeatureFlags: () => FeatureFlagType[] = memoize(
    17|   () => getJSONForKey(DAGSTER_FLAGS_KEY) || [],
    18| );
    19| export const featureEnabled = memoize((flag: FeatureFlagType) => getFeatureFlags().includes(flag));
    20| type FlagMap = {
    21|   readonly [F in FeatureFlagType]: boolean;
    22| };
    23| export const useFeatureFlags = () => {
    24|   return React.useMemo(() => {
    25|     const flagSet = new Set(getFeatureFlags());
    26|     const all: Record<string, boolean> = {};
    27|     for (const flag in FeatureFlag) {
    28|       all[flag] = flagSet.has(flag as FeatureFlagType);


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/app/PythonErrorInfo.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-22 ---
     1| import {gql} from '@apollo/client';
     2| import {Button, Icon, FontFamily, Colors} from '@dagster-io/ui-components';
     3| import * as React from 'react';
     4| import styled from 'styled-components';
     5| import {ErrorSource} from '../graphql/types';
     6| import {useLaunchPadHooks} from '../launchpad/LaunchpadHooksContext';
     7| import {MetadataEntries} from '../metadata/MetadataEntry';
     8| import {MetadataEntryFragment} from '../metadata/types/MetadataEntry.types';
     9| import {showSharedToaster} from './DomUtils';
    10| import {useCopyToClipboard} from './browser';
    11| import {PythonErrorChainFragment, PythonErrorFragment} from './types/PythonErrorFragment.types';
    12| export type GenericError = {
    13|   message: string;
    14|   stack?: string[];
    15|   errorChain?: PythonErrorChainFragment[];
    16| };
    17| interface IPythonErrorInfoProps {
    18|   showReload?: boolean;
    19|   centered?: boolean;
    20|   error: GenericError | PythonErrorFragment;
    21|   failureMetadata?: {metadataEntries: MetadataEntryFragment[]} | null;
    22|   errorSource?: ErrorSource | null;

# --- HUNK 2: Lines 92-160 ---
    92|         onClick={async () => {
    93|           const message = copy();
    94|           await showSharedToaster({
    95|             message: message ?? <div>Copied value</div>,
    96|             intent: 'success',
    97|           });
    98|         }}
    99|       >
   100|         <Icon name="content_copy" /> Copy
   101|       </CopyErrorButtonWrapper>
   102|     </div>
   103|   );
   104| };
   105| const CopyErrorButtonWrapper = styled.button`
   106|   position: absolute;
   107|   display: flex;
   108|   flex-direction: row;
   109|   gap: 8px;
   110|   top: 0px;
   111|   right: -8px;
   112|   border: 1px solid ${Colors.KeylineGray};
   113|   background: transparent;
   114|   cursor: pointer;
   115|   border: none;
   116|   box-shadow: none;
   117|   outline: none;
   118| `;
   119| const ContextHeader = styled.h4`
   120|   font-weight: 400;
   121|   margin: 0 0 1em;
   122| `;
   123| const CauseHeader = styled.h3`
   124|   font-weight: 400;
   125|   margin: 1em 0 1em;
   126| `;
   127| const ErrorHeader = styled.h3`
   128|   color: #b05c47;
   129|   font-weight: 400;
   130|   margin: 0.5em 0 0.25em;
   131|   white-space: pre-wrap;
   132| `;
   133| const Trace = styled.div`
   134|   color: rgb(41, 50, 56);
   135|   font-family: ${FontFamily.monospace};
   136|   font-size: 1em;
   137|   white-space: pre;
   138|   padding-bottom: 1em;
   139| `;
   140| export const ErrorWrapper = styled.div`
   141|   background-color: #fdf2f4;
   142|   border: 1px solid #d17257;
   143|   border-radius: 3px;
   144|   max-width: 90vw;
   145|   max-height: calc(100vh - 250px);
   146|   padding: 1em 2em;
   147|   overflow: auto;
   148|   ${CopyErrorButtonWrapper} {
   149|     display: none;
   150|   }
   151|   &:hover ${CopyErrorButtonWrapper} {
   152|     display: flex;
   153|   }
   154| `;
   155| export const ErrorWrapperCentered = styled(ErrorWrapper)`
   156|   position: absolute;
   157|   left: 50%;
   158|   top: 100px;
   159|   transform: translate(-50%, 0);
   160| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/app/ShortcutHandler.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {Colors} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import ReactDOM from 'react-dom';
     4| import styled from 'styled-components';
     5| import {getJSONForKey} from '../hooks/useStateWithStorage';
     6| export const SHORTCUTS_STORAGE_KEY = 'keyboard-shortcuts-enabled';
     7| const MODIFIER_KEYS = [
     8|   'ControlLeft',
     9|   'ControlRight',
    10|   'AltLeft',
    11|   'AltRight',
    12|   'MetaLeft',
    13|   'MetaRight',
    14| ];
    15| const SHORTCUT_VISIBILITY_EVENT_TYPE = 'shortcut-visibility';
    16| const SHORTCUT_VISIBLITY_DELAY = 800;
    17| let shortcutsVisible = false;
    18| let shortcutsTimer: NodeJS.Timeout | null = null;
    19| function getShortcutsVisible() {
    20|   return shortcutsVisible;
    21| }

# --- HUNK 2: Lines 137-162 ---
   137|           {children}
   138|           <ShortcutAnnotation style={{top: previewPosition.top, left: previewPosition.left}}>
   139|             {shortcutLabel}
   140|           </ShortcutAnnotation>
   141|         </>
   142|       );
   143|     }
   144|     return <>{children}</>;
   145|   }
   146| }
   147| const ShortcutAnnotation = styled.div`
   148|   position: fixed;
   149|   min-width: 32px;
   150|   font-size: 12px;
   151|   font-weight: 600;
   152|   line-height: 14px;
   153|   text-align: center;
   154|   padding: 2px;
   155|   z-index: 20;
   156|   transform: translate(-90%, -10px);
   157|   color: ${Colors.Gray100};
   158|   background: ${Colors.Gray800};
   159|   border: 1px solid ${Colors.Gray300};
   160|   border-radius: 3px;
   161|   box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
   162| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/app/UserSettingsButton.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-41 ---
     1| import {IconWrapper, Colors, Icon} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| import {UserSettingsDialog} from './UserSettingsDialog';
     5| import {getVisibleFeatureFlagRows} from './getVisibleFeatureFlagRows';
     6| const SettingsButton = styled.button`
     7|   background: transparent;
     8|   border: 0;
     9|   cursor: pointer;
    10|   padding: 24px;
    11|   ${IconWrapper} {
    12|     transition: background 50ms linear;
    13|   }
    14|   &:hover ${IconWrapper} {
    15|     background: ${Colors.White};
    16|   }
    17|   &:active ${IconWrapper} {
    18|     background: ${Colors.White};
    19|   }
    20|   &:focus {
    21|     outline: none;
    22|     ${IconWrapper} {
    23|       background: ${Colors.White};
    24|     }
    25|   }
    26| `;
    27| export const UserSettingsButton = () => {
    28|   const [isOpen, setIsOpen] = React.useState(false);
    29|   return (
    30|     <>
    31|       <SettingsButton onClick={() => setIsOpen(true)} title="User settings">
    32|         <Icon name="settings" color={Colors.Gray200} />
    33|       </SettingsButton>
    34|       <UserSettingsDialog
    35|         isOpen={isOpen}
    36|         onClose={() => setIsOpen(false)}
    37|         visibleFlags={getVisibleFeatureFlagRows()}
    38|       />
    39|     </>
    40|   );
    41| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/app/UserSettingsDialog.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-123 ---
     1| import {
     2|   Box,
     3|   Button,
     4|   ButtonLink,
     5|   Checkbox,
     6|   Dialog,
     7|   DialogBody,
     8|   DialogFooter,
     9|   MetadataTable,
    10|   Subheading,
    11| } from '@dagster-io/ui-components';
    12| import * as React from 'react';
    13| import {useStateWithStorage} from '../hooks/useStateWithStorage';
    14| import {FeatureFlagType, getFeatureFlags, setFeatureFlags} from './Flags';
    15| import {SHORTCUTS_STORAGE_KEY} from './ShortcutHandler';
    16| import {HourCycleSelect} from './time/HourCycleSelect';
    17| import {TimezoneSelect} from './time/TimezoneSelect';
    18| import {automaticLabel} from './time/browserTimezone';
    19| type OnCloseFn = (event: React.SyntheticEvent<HTMLElement>) => void;
    20| type VisibleFlag = {key: string; label?: React.ReactNode; flagType: FeatureFlagType};
    21| interface DialogProps {
    22|   isOpen: boolean;
    23|   onClose: OnCloseFn;
    24|   visibleFlags: VisibleFlag[];
    25| }
    26| export const UserSettingsDialog = ({isOpen, onClose, visibleFlags}: DialogProps) => {
    27|   return (
    28|     <Dialog
    29|       title="User settings"
    30|       isOpen={isOpen}
    31|       canOutsideClickClose={false}
    32|       canEscapeKeyClose={false}
    33|     >
    34|       <UserSettingsDialogContent onClose={onClose} visibleFlags={visibleFlags} />
    35|     </Dialog>
    36|   );
    37| };
    38| interface DialogContentProps {
    39|   onClose: OnCloseFn;
    40|   visibleFlags: {key: string; label?: React.ReactNode; flagType: FeatureFlagType}[];
    41| }
    42| /**
    43|  * Separate the content from the `Dialog` so that we don't prepare its state before
    44|  * we want to render it.
    45|  */
    46| const UserSettingsDialogContent = ({onClose, visibleFlags}: DialogContentProps) => {
    47|   const [flags, setFlags] = React.useState<FeatureFlagType[]>(() => getFeatureFlags());
    48|   const [reloading, setReloading] = React.useState(false);
    49|   const [shortcutsEnabled, setShortcutsEnabled] = useStateWithStorage(
    50|     SHORTCUTS_STORAGE_KEY,
    51|     (value: any) => (typeof value === 'boolean' ? value : true),
    52|   );
    53|   const initialFlagState = React.useRef(JSON.stringify([...getFeatureFlags().sort()]));
    54|   const initialShortcutsEnabled = React.useRef(shortcutsEnabled);
    55|   React.useEffect(() => {
    56|     setFeatureFlags(flags);
    57|   });
    58|   const toggleFlag = (flag: FeatureFlagType) => {
    59|     setFlags(flags.includes(flag) ? flags.filter((f) => f !== flag) : [...flags, flag]);
    60|   };
    61|   const trigger = React.useCallback(
    62|     (timezone: string) => (
    63|       <ButtonLink>{timezone === 'Automatic' ? automaticLabel() : timezone}</ButtonLink>
    64|     ),
    65|     [],
    66|   );
    67|   const toggleKeyboardShortcuts = (e: React.ChangeEvent<HTMLInputElement>) => {
    68|     const {checked} = e.target;
    69|     setShortcutsEnabled(checked);
    70|   };
    71|   const anyChange =
    72|     initialFlagState.current !== JSON.stringify([...flags.sort()]) ||
    73|     initialShortcutsEnabled.current !== shortcutsEnabled;
    74|   const handleClose = (event: React.SyntheticEvent<HTMLElement>) => {
    75|     if (anyChange) {
    76|       setReloading(true);
    77|       window.location.reload();
    78|     } else {
    79|       onClose(event);
    80|     }
    81|   };
    82|   return (
    83|     <>
    84|       <DialogBody>
    85|         <Box padding={{bottom: 8}}>
    86|           <Box padding={{bottom: 8}}>
    87|             <Subheading>Preferences</Subheading>
    88|           </Box>
    89|           <MetadataTable
    90|             rows={[
    91|               {
    92|                 key: 'Timezone',
    93|                 value: (
    94|                   <Box margin={{bottom: 4}}>
    95|                     <TimezoneSelect trigger={trigger} />
    96|                   </Box>
    97|                 ),
    98|               },
    99|               {
   100|                 key: 'Hour format',
   101|                 value: (
   102|                   <Box margin={{bottom: 4}}>
   103|                     <HourCycleSelect />
   104|                   </Box>
   105|                 ),
   106|               },
   107|               {
   108|                 key: 'Enable keyboard shortcuts',
   109|                 value: (
   110|                   <Checkbox
   111|                     checked={shortcutsEnabled}
   112|                     format="switch"
   113|                     onChange={toggleKeyboardShortcuts}
   114|                   />
   115|                 ),
   116|               },
   117|             ]}
   118|           />
   119|         </Box>
   120|         <Box padding={{top: 16}} border="top">
   121|           <Box padding={{bottom: 8}}>
   122|             <Subheading>Experimental features</Subheading>
   123|           </Box>


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/app/WebSocketProvider.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {Colors} from '@dagster-io/ui-components';
     2| import debounce from 'lodash/debounce';
     3| import * as React from 'react';
     4| import styled from 'styled-components';
     5| import {SubscriptionClient} from 'subscriptions-transport-ws';
     6| import {useFeatureFlags} from './Flags';
     7| type Availability = 'attempting-to-connect' | 'unavailable' | 'available';
     8| export type WebSocketContextType = {
     9|   availability: Availability;
    10|   status: number;
    11|   disabled?: boolean;
    12|   websocketClient?: SubscriptionClient;
    13| };
    14| export const WebSocketContext = React.createContext<WebSocketContextType>({
    15|   availability: 'attempting-to-connect',
    16|   status: WebSocket.CONNECTING,
    17|   disabled: false,
    18| });
    19| const WS_EVENTS = [
    20|   'connecting',
    21|   'connected',

# --- HUNK 2: Lines 79-117 ---
    79|   React.useEffect(() => {
    80|     let timeout: ReturnType<typeof setTimeout> | null = null;
    81|     if (availability === 'attempting-to-connect') {
    82|       timeout = setTimeout(() => {
    83|         console.log('[WebSockets] Timed out waiting for WS connection.');
    84|         setAvailability('unavailable');
    85|       }, TIME_TO_WAIT_FOR_ACK);
    86|     }
    87|     return () => {
    88|       timeout && clearTimeout(timeout);
    89|     };
    90|   }, [availability]);
    91|   return <WebSocketContext.Provider value={value}>{children}</WebSocketContext.Provider>;
    92| };
    93| const Circle = styled.div`
    94|   align-self: center;
    95|   width: 12px;
    96|   height: 12px;
    97|   display: inline-block;
    98|   border-radius: 7px;
    99|   border: 1px solid rgba(255, 255, 255, 0.6);
   100| `;
   101| export const WebSocketStatus = (props: React.ComponentProps<typeof Circle>) => (
   102|   <WebSocketContext.Consumer>
   103|     {({status}) =>
   104|       ({
   105|         [WebSocket.CONNECTING]: (
   106|           <Circle style={{background: Colors.Green200}} title="Connecting..." {...props} />
   107|         ),
   108|         [WebSocket.OPEN]: (
   109|           <Circle style={{background: Colors.Green500}} title="Connected" {...props} />
   110|         ),
   111|         [WebSocket.CLOSING]: (
   112|           <Circle style={{background: Colors.Gray400}} title="Closing..." {...props} />
   113|         ),
   114|       })[status] || <Circle style={{background: Colors.Gray400}} title="Disconnected" {...props} />
   115|     }
   116|   </WebSocketContext.Consumer>
   117| );


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/app/getVisibleFeatureFlagRows.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 11-54 ---
    11|       <Box flex={{direction: 'column'}}>
    12|         Experimental asset graph experience
    13|         <div>
    14|           <a
    15|             href="https://github.com/dagster-io/dagster/discussions/16657"
    16|             target="_blank"
    17|             rel="noreferrer"
    18|           >
    19|             Learn more
    20|           </a>
    21|         </div>
    22|       </Box>
    23|     ),
    24|     flagType: FeatureFlag.flagDAGSidebar,
    25|   },
    26|   {
    27|     key: 'Experimental schedule/sensor logging view',
    28|     flagType: FeatureFlag.flagSensorScheduleLogging,
    29|   },
    30|   {
    31|     key: 'Experimental instance-level concurrency limits',
    32|     flagType: FeatureFlag.flagInstanceConcurrencyLimits,
    33|   },
    34|   {
    35|     key: 'Display resources in navigation sidebar',
    36|     flagType: FeatureFlag.flagSidebarResources,
    37|   },
    38|   {
    39|     key: 'Disable Asset Graph caching',
    40|     flagType: FeatureFlag.flagDisableDAGCache,
    41|   },
    42|   {
    43|     key: 'Disable WebSockets',
    44|     flagType: FeatureFlag.flagDisableWebsockets,
    45|   },
    46|   {
    47|     key: 'Disable automatically loading default config in launchpad',
    48|     flagType: FeatureFlag.flagDisableAutoLoadDefaults,
    49|   },
    50|   {
    51|     key: 'Debug console logging',
    52|     flagType: FeatureFlag.flagDebugConsoleLogging,
    53|   },
    54| ];


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-data/AssetDataRefreshButton.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {Box, Button, Colors, Icon, Tooltip} from '@dagster-io/ui-components';
     2| import dayjs from 'dayjs';
     3| import relativeTime from 'dayjs/plugin/relativeTime';
     4| import updateLocale from 'dayjs/plugin/updateLocale';
     5| import React from 'react';
     6| dayjs.extend(relativeTime);
     7| dayjs.extend(updateLocale);
     8| dayjs.updateLocale('en', {
     9|   relativeTime: {
    10|     future: 'in %s',
    11|     past: '%s ago',
    12|     s: '%d seconds',
    13|     m: 'a minute',
    14|     mm: '%d minutes',
    15|     h: 'an hour',
    16|     hh: '%d hours',
    17|     d: 'a day',
    18|     dd: '%d days',
    19|     M: 'a month',
    20|     MM: '%d months',
    21|     y: 'a year',

# --- HUNK 2: Lines 28-68 ---
    28|   oldestDataTimestamp,
    29| }: {
    30|   isRefreshing: boolean;
    31|   onRefresh: () => void;
    32|   oldestDataTimestamp: number;
    33| }) => {
    34|   return (
    35|     <Tooltip
    36|       content={
    37|         isRefreshing ? (
    38|           'Refreshing asset data'
    39|         ) : (
    40|           <Box flex={{direction: 'column', gap: 4}}>
    41|             <TimeFromNowWithSeconds timestamp={oldestDataTimestamp} />
    42|             <div>Click to refresh now</div>
    43|           </Box>
    44|         )
    45|       }
    46|     >
    47|       <Button
    48|         icon={<Icon name="refresh" color={Colors.Gray400} />}
    49|         onClick={() => {
    50|           if (!isRefreshing) {
    51|             onRefresh();
    52|           }
    53|         }}
    54|       />
    55|     </Tooltip>
    56|   );
    57| };
    58| const TimeFromNowWithSeconds = ({timestamp}: {timestamp: number}) => {
    59|   const [text, setText] = React.useState(dayjs(timestamp).fromNow(true));
    60|   React.useEffect(() => {
    61|     const interval = setInterval(() => {
    62|       setText(dayjs(timestamp).fromNow(true));
    63|     }, 1000);
    64|     return () => {
    65|       clearInterval(interval);
    66|     };
    67|   }, [timestamp]);
    68|   return <>{text === '0s' ? 'Refreshing asset data' : `Data is at most ${text} old`}</>;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/AssetEdges.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-56 ---
     1| import {Colors} from '@dagster-io/ui-components';
     2| import React from 'react';
     3| import {buildSVGPath} from './Utils';
     4| import {AssetLayoutEdge} from './layout';
     5| interface AssetEdgesProps {
     6|   edges: AssetLayoutEdge[];
     7|   selected: string[] | null;
     8|   highlighted: string | null;
     9|   strokeWidth?: number;
    10|   baseColor?: string;
    11|   viewportRect: {top: number; left: number; right: number; bottom: number};
    12| }
    13| export const AssetEdges = ({
    14|   edges,
    15|   selected,
    16|   highlighted,
    17|   strokeWidth = 4,
    18|   baseColor = Colors.KeylineGray,
    19|   viewportRect,
    20| }: AssetEdgesProps) => {
    21|   const intersectedEdges = edges.filter((edge) => doesViewportContainEdge(edge, viewportRect));
    22|   const visibleToFromEdges = intersectedEdges.filter(
    23|     (edge) =>
    24|       doesViewportContainPoint(edge.from, viewportRect) ||
    25|       doesViewportContainPoint(edge.to, viewportRect),
    26|   );
    27|   return (
    28|     <React.Fragment>
    29|       <AssetEdgeSet
    30|         color={baseColor}
    31|         edges={intersectedEdges.length > 50 ? visibleToFromEdges : intersectedEdges}
    32|         strokeWidth={strokeWidth}
    33|         viewportRect={viewportRect}
    34|       />
    35|       <AssetEdgeSet
    36|         color={Colors.Blue500}
    37|         edges={edges.filter(
    38|           ({fromId, toId}) =>
    39|             selected?.includes(fromId) ||
    40|             selected?.includes(toId) ||
    41|             highlighted === fromId ||
    42|             highlighted === toId,
    43|         )}
    44|         strokeWidth={strokeWidth}
    45|         viewportRect={viewportRect}
    46|       />
    47|     </React.Fragment>
    48|   );
    49| };
    50| interface AssetEdgeSetProps {
    51|   edges: AssetLayoutEdge[];
    52|   color: string;
    53|   strokeWidth: number;
    54|   viewportRect: {top: number; left: number; right: number; bottom: number};
    55| }
    56| const AssetEdgeSet = React.memo(({edges, color, strokeWidth}: AssetEdgeSetProps) => (


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/AssetGraphExplorer.tsx
# Total hunks: 5
# ====================================================================
# --- HUNK 1: Lines 1-151 ---
     1| import {
     2|   Checkbox,
     3|   Colors,
     4|   NonIdealState,
     5|   SplitPanelContainer,
     6|   ErrorBoundary,
     7|   Button,
     8|   Icon,
     9|   Tooltip,
    10|   TextInputContainer,
    11|   Box,
    12| } from '@dagster-io/ui-components';
    13| import countBy from 'lodash/countBy';
    14| import pickBy from 'lodash/pickBy';
    15| import uniq from 'lodash/uniq';
    16| import without from 'lodash/without';
    17| import React from 'react';
    18| import styled from 'styled-components';
    19| import {useFeatureFlags} from '../app/Flags';
    20| import {ShortcutHandler} from '../app/ShortcutHandler';
    21| import {AssetLiveDataRefresh} from '../asset-data/AssetLiveDataProvider';
    22| import {LaunchAssetExecutionButton} from '../assets/LaunchAssetExecutionButton';
    23| import {LaunchAssetObservationButton} from '../assets/LaunchAssetObservationButton';
    24| import {AssetKey} from '../assets/types';
    25| import {DEFAULT_MAX_ZOOM, SVGViewport} from '../graph/SVGViewport';
    26| import {useAssetLayout} from '../graph/asyncGraphLayout';
    27| import {closestNodeInDirection, isNodeOffscreen} from '../graph/common';
    28| import {useQueryPersistedState} from '../hooks/useQueryPersistedState';
    29| import {
    30|   GraphExplorerOptions,
    31|   OptionsOverlay,
    32|   RightInfoPanel,
    33|   RightInfoPanelContent,
    34| } from '../pipelines/GraphExplorer';
    35| import {EmptyDAGNotice, EntirelyFilteredDAGNotice, LoadingNotice} from '../pipelines/GraphNotices';
    36| import {ExplorerPath} from '../pipelines/PipelinePathUtils';
    37| import {GraphQueryInput} from '../ui/GraphQueryInput';
    38| import {Loading} from '../ui/Loading';
    39| import {AssetEdges} from './AssetEdges';
    40| import {AssetGraphJobSidebar} from './AssetGraphJobSidebar';
    41| import {AssetGroupNode} from './AssetGroupNode';
    42| import {AssetNode, AssetNodeMinimal, AssetNodeContextMenuWrapper} from './AssetNode';
    43| import {CollapsedGroupNode} from './CollapsedGroupNode';
    44| import {ExpandedGroupNode} from './ExpandedGroupNode';
    45| import {AssetNodeLink} from './ForeignNode';
    46| import {SidebarAssetInfo} from './SidebarAssetInfo';
    47| import {TryTheFeatureFlagNotice} from './TryTheFeatureFlagNotice';
    48| import {
    49|   GraphData,
    50|   graphHasCycles,
    51|   GraphNode,
    52|   isGroupId,
    53|   groupIdForNode,
    54|   tokenForAssetKey,
    55| } from './Utils';
    56| import {assetKeyTokensInRange} from './assetKeyTokensInRange';
    57| import {AssetGraphLayout, AssetLayoutEdge} from './layout';
    58| import {AssetGraphExplorerSidebar} from './sidebar/Sidebar';
    59| import {AssetNodeForGraphQueryFragment} from './types/useAssetGraphData.types';
    60| import {AssetGraphFetchScope, AssetGraphQueryItem, useAssetGraphData} from './useAssetGraphData';
    61| import {AssetLocation, useFindAssetLocation} from './useFindAssetLocation';
    62| type AssetNode = AssetNodeForGraphQueryFragment;
    63| interface Props {
    64|   options: GraphExplorerOptions;
    65|   setOptions?: (options: GraphExplorerOptions) => void;
    66|   fetchOptions: AssetGraphFetchScope;
    67|   fetchOptionFilters?: React.ReactNode;
    68|   explorerPath: ExplorerPath;
    69|   onChangeExplorerPath: (path: ExplorerPath, mode: 'replace' | 'push') => void;
    70|   onNavigateToSourceAssetNode: (node: AssetLocation) => void;
    71| }
    72| export const MINIMAL_SCALE = 0.6;
    73| export const GROUPS_ONLY_SCALE = 0.15;
    74| export const AssetGraphExplorer = (props: Props) => {
    75|   const {fetchResult, assetGraphData, fullAssetGraphData, graphQueryItems, allAssetKeys} =
    76|     useAssetGraphData(props.explorerPath.opsQuery, props.fetchOptions);
    77|   return (
    78|     <Loading allowStaleData queryResult={fetchResult}>
    79|       {() => {
    80|         if (!assetGraphData || !allAssetKeys || !fullAssetGraphData) {
    81|           return <NonIdealState icon="error" title="Query Error" />;
    82|         }
    83|         const hasCycles = graphHasCycles(assetGraphData);
    84|         if (hasCycles) {
    85|           return (
    86|             <NonIdealState
    87|               icon="error"
    88|               title="Cycle detected"
    89|               description="Assets dependencies form a cycle"
    90|             />
    91|           );
    92|         }
    93|         return (
    94|           <AssetGraphExplorerWithData
    95|             key={props.explorerPath.pipelineName}
    96|             assetGraphData={assetGraphData}
    97|             fullAssetGraphData={fullAssetGraphData}
    98|             allAssetKeys={allAssetKeys}
    99|             graphQueryItems={graphQueryItems}
   100|             {...props}
   101|           />
   102|         );
   103|       }}
   104|     </Loading>
   105|   );
   106| };
   107| interface WithDataProps extends Props {
   108|   allAssetKeys: AssetKey[];
   109|   assetGraphData: GraphData;
   110|   fullAssetGraphData: GraphData;
   111|   graphQueryItems: AssetGraphQueryItem[];
   112| }
   113| const AssetGraphExplorerWithData = ({
   114|   options,
   115|   setOptions,
   116|   explorerPath,
   117|   onChangeExplorerPath,
   118|   onNavigateToSourceAssetNode: onNavigateToSourceAssetNode,
   119|   assetGraphData,
   120|   fullAssetGraphData,
   121|   graphQueryItems,
   122|   fetchOptions,
   123|   fetchOptionFilters,
   124|   allAssetKeys,
   125| }: WithDataProps) => {
   126|   const findAssetLocation = useFindAssetLocation();
   127|   const {flagDAGSidebar} = useFeatureFlags();
   128|   const [highlighted, setHighlighted] = React.useState<string | null>(null);
   129|   const {allGroups, allGroupCounts} = React.useMemo(() => {
   130|     const counts = countBy(Object.values(assetGraphData.nodes).map(groupIdForNode));
   131|     return {allGroups: Object.keys(counts), allGroupCounts: counts};
   132|   }, [assetGraphData]);
   133|   const [expandedGroups, setExpandedGroups] = useQueryPersistedState<string[]>({
   134|     encode: (arr) => ({expanded: arr.length ? arr.join(',') : undefined}),
   135|     decode: (qs) => (qs.expanded || '').split(',').filter(Boolean),
   136|   });
   137|   const focusGroupIdAfterLayoutRef = React.useRef('');
   138|   const {layout, loading, async} = useAssetLayout(
   139|     assetGraphData,
   140|     flagDAGSidebar ? expandedGroups : allGroups,
   141|   );
   142|   const viewportEl = React.useRef<SVGViewport>();
   143|   const selectedTokens = explorerPath.opNames[explorerPath.opNames.length - 1]!.split(',');
   144|   const selectedGraphNodes = Object.values(assetGraphData.nodes).filter((node) =>
   145|     selectedTokens.includes(tokenForAssetKey(node.definition.assetKey)),
   146|   );
   147|   const lastSelectedNode = selectedGraphNodes[selectedGraphNodes.length - 1]!;
   148|   const selectedDefinitions = selectedGraphNodes.map((a) => a.definition);
   149|   const allDefinitionsForMaterialize = Object.values(assetGraphData.nodes).map((a) => a.definition);
   150|   const onSelectNode = React.useCallback(
   151|     async (

# --- HUNK 2: Lines 291-638 ---
   291|       key="toggle-groups"
   292|       shortcutLabel="E"
   293|       onShortcut={() => setExpandedGroups(expandedGroups.length === 0 ? allGroups : [])}
   294|       shortcutFilter={(e) => e.altKey && e.code === 'KeyE'}
   295|     >
   296|       {expandedGroups.length === 0 ? (
   297|         <Button
   298|           title="Expand all groups"
   299|           icon={<Icon name="unfold_more" />}
   300|           onClick={() => setExpandedGroups(allGroups)}
   301|         />
   302|       ) : (
   303|         <Button
   304|           title="Collapse all groups"
   305|           icon={<Icon name="unfold_less" />}
   306|           onClick={() => setExpandedGroups([])}
   307|         />
   308|       )}
   309|     </ShortcutHandler>
   310|   );
   311|   const explorer = (
   312|     <SplitPanelContainer
   313|       key="explorer"
   314|       identifier="asset-graph-explorer"
   315|       firstInitialPercent={70}
   316|       firstMinSize={400}
   317|       first={
   318|         <ErrorBoundary region="graph">
   319|           {!flagDAGSidebar ? <TryTheFeatureFlagNotice /> : undefined}
   320|           {graphQueryItems.length === 0 ? (
   321|             <EmptyDAGNotice nodeType="asset" isGraph />
   322|           ) : Object.keys(assetGraphData.nodes).length === 0 ? (
   323|             <EntirelyFilteredDAGNotice nodeType="asset" />
   324|           ) : undefined}
   325|           {loading || !layout ? (
   326|             <LoadingNotice async={async} nodeType="asset" />
   327|           ) : (
   328|             <SVGViewport
   329|               ref={(r) => (viewportEl.current = r || undefined)}
   330|               defaultZoom={flagDAGSidebar ? 'zoom-to-fit-width' : 'zoom-to-fit'}
   331|               interactor={SVGViewport.Interactors.PanAndZoom}
   332|               graphWidth={layout.width}
   333|               graphHeight={layout.height}
   334|               graphHasNoMinimumZoom={allowGroupsOnlyZoomLevel || flagDAGSidebar}
   335|               additionalToolbarElements={toggleGroupsButton}
   336|               onClick={onClickBackground}
   337|               onArrowKeyDown={onArrowKeyDown}
   338|               onDoubleClick={(e) => {
   339|                 viewportEl.current?.autocenter(true);
   340|                 e.stopPropagation();
   341|               }}
   342|               maxZoom={DEFAULT_MAX_ZOOM}
   343|               maxAutocenterZoom={1.0}
   344|             >
   345|               {({scale}, viewportRect) => (
   346|                 <SVGContainer width={layout.width} height={layout.height}>
   347|                   {flagDAGSidebar &&
   348|                     Object.values(layout.groups)
   349|                       .filter((node) => !isNodeOffscreen(node.bounds, viewportRect))
   350|                       .filter((group) => group.expanded)
   351|                       .sort((a, b) => a.id.length - b.id.length)
   352|                       .map((group) => (
   353|                         <foreignObject
   354|                           key={group.id}
   355|                           {...group.bounds}
   356|                           className="group"
   357|                           onDoubleClick={(e) => {
   358|                             zoomToGroup(group.id);
   359|                             e.stopPropagation();
   360|                           }}
   361|                         >
   362|                           <ExpandedGroupNode
   363|                             group={group}
   364|                             minimal={scale < MINIMAL_SCALE}
   365|                             onCollapse={() => {
   366|                               focusGroupIdAfterLayoutRef.current = group.id;
   367|                               setExpandedGroups(expandedGroups.filter((g) => g !== group.id));
   368|                             }}
   369|                           />
   370|                         </foreignObject>
   371|                       ))}
   372|                   <AssetEdges
   373|                     viewportRect={viewportRect}
   374|                     selected={selectedGraphNodes.map((n) => n.id)}
   375|                     highlighted={highlighted}
   376|                     edges={
   377|                       flagDAGSidebar
   378|                         ? layout.edges
   379|                         : filterEdges(layout.edges, allowGroupsOnlyZoomLevel, scale, assetGraphData)
   380|                     }
   381|                     strokeWidth={allowGroupsOnlyZoomLevel ? Math.max(4, 3 / scale) : 4}
   382|                     baseColor={
   383|                       allowGroupsOnlyZoomLevel && scale < GROUPS_ONLY_SCALE
   384|                         ? Colors.Gray400
   385|                         : Colors.KeylineGray
   386|                     }
   387|                   />
   388|                   {Object.values(layout.groups)
   389|                     .filter((node) => !isNodeOffscreen(node.bounds, viewportRect))
   390|                     .filter((group) => !flagDAGSidebar || !group.expanded)
   391|                     .sort((a, b) => a.id.length - b.id.length)
   392|                     .map((group) => (
   393|                       <foreignObject
   394|                         key={group.id}
   395|                         {...group.bounds}
   396|                         className="group"
   397|                         onDoubleClick={(e) => {
   398|                           if (!viewportEl.current) {
   399|                             return;
   400|                           }
   401|                           const targetScale = viewportEl.current.scaleForSVGBounds(
   402|                             group.bounds.width,
   403|                             group.bounds.height,
   404|                           );
   405|                           viewportEl.current.zoomToSVGBox(group.bounds, true, targetScale * 0.9);
   406|                           e.stopPropagation();
   407|                         }}
   408|                       >
   409|                         {flagDAGSidebar ? (
   410|                           <CollapsedGroupNode
   411|                             minimal={scale < MINIMAL_SCALE}
   412|                             group={{...group, assetCount: allGroupCounts[group.id] || 0}}
   413|                             onExpand={() => {
   414|                               focusGroupIdAfterLayoutRef.current = group.id;
   415|                               setExpandedGroups([...expandedGroups, group.id]);
   416|                             }}
   417|                           />
   418|                         ) : (
   419|                           <AssetGroupNode group={group} scale={scale} />
   420|                         )}
   421|                       </foreignObject>
   422|                     ))}
   423|                   {Object.values(layout.nodes)
   424|                     .filter((node) => !isNodeOffscreen(node.bounds, viewportRect))
   425|                     .map(({id, bounds}) => {
   426|                       const graphNode = assetGraphData.nodes[id]!;
   427|                       const path = JSON.parse(id);
   428|                       if (allowGroupsOnlyZoomLevel && scale < GROUPS_ONLY_SCALE) {
   429|                         return;
   430|                       }
   431|                       if (bounds.width === 1) {
   432|                         return;
   433|                       }
   434|                       const contextMenuProps = {
   435|                         graphData: fullAssetGraphData,
   436|                         node: graphNode,
   437|                         explorerPath,
   438|                         onChangeExplorerPath,
   439|                         selectNode: selectNodeById,
   440|                       };
   441|                       return (
   442|                         <foreignObject
   443|                           {...bounds}
   444|                           key={id}
   445|                           onMouseEnter={() => setHighlighted(id)}
   446|                           onMouseLeave={() => setHighlighted(null)}
   447|                           onClick={(e) => onSelectNode(e, {path}, graphNode)}
   448|                           onDoubleClick={(e) => {
   449|                             viewportEl.current?.zoomToSVGBox(bounds, true, 1.2);
   450|                             e.stopPropagation();
   451|                           }}
   452|                           style={{overflow: 'visible'}}
   453|                         >
   454|                           {!graphNode ? (
   455|                             <AssetNodeLink assetKey={{path}} />
   456|                           ) : scale < MINIMAL_SCALE ? (
   457|                             <AssetNodeContextMenuWrapper {...contextMenuProps}>
   458|                               <AssetNodeMinimal
   459|                                 definition={graphNode.definition}
   460|                                 selected={selectedGraphNodes.includes(graphNode)}
   461|                               />
   462|                             </AssetNodeContextMenuWrapper>
   463|                           ) : (
   464|                             <AssetNodeContextMenuWrapper {...contextMenuProps}>
   465|                               <AssetNode
   466|                                 definition={graphNode.definition}
   467|                                 selected={selectedGraphNodes.includes(graphNode)}
   468|                               />
   469|                             </AssetNodeContextMenuWrapper>
   470|                           )}
   471|                         </foreignObject>
   472|                       );
   473|                     })}
   474|                 </SVGContainer>
   475|               )}
   476|             </SVGViewport>
   477|           )}
   478|           {setOptions && (
   479|             <OptionsOverlay>
   480|               <Checkbox
   481|                 format="switch"
   482|                 label="View as Asset Graph"
   483|                 checked={options.preferAssetRendering}
   484|                 onChange={() => {
   485|                   onChangeExplorerPath(
   486|                     {...explorerPath, opNames: selectedDefinitions[0]?.opNames || []},
   487|                     'replace',
   488|                   );
   489|                   setOptions({
   490|                     ...options,
   491|                     preferAssetRendering: !options.preferAssetRendering,
   492|                   });
   493|                 }}
   494|               />
   495|             </OptionsOverlay>
   496|           )}
   497|           <TopbarWrapper style={{paddingLeft: showSidebar || !flagDAGSidebar ? 12 : 24}}>
   498|             {showSidebar || !flagDAGSidebar ? undefined : (
   499|               <Tooltip content="Show sidebar">
   500|                 <Button
   501|                   icon={<Icon name="panel_show_left" />}
   502|                   onClick={() => {
   503|                     setShowSidebar(true);
   504|                   }}
   505|                 />
   506|               </Tooltip>
   507|             )}
   508|             <div>{fetchOptionFilters}</div>
   509|             <GraphQueryInputFlexWrap>
   510|               <GraphQueryInput
   511|                 type="asset_graph"
   512|                 items={graphQueryItems}
   513|                 value={explorerPath.opsQuery}
   514|                 placeholder="Type an asset subset"
   515|                 onChange={(opsQuery) =>
   516|                   onChangeExplorerPath({...explorerPath, opsQuery}, 'replace')
   517|                 }
   518|                 popoverPosition="bottom-left"
   519|               />
   520|             </GraphQueryInputFlexWrap>
   521|             <Button
   522|               onClick={() => {
   523|                 onChangeExplorerPath({...explorerPath, opsQuery: ''}, 'push');
   524|               }}
   525|             >
   526|               Clear query
   527|             </Button>
   528|             <AssetLiveDataRefresh />
   529|             <LaunchAssetObservationButton
   530|               preferredJobName={explorerPath.pipelineName}
   531|               scope={
   532|                 selectedDefinitions.length
   533|                   ? {selected: selectedDefinitions.filter((a) => a.isObservable)}
   534|                   : {all: allDefinitionsForMaterialize.filter((a) => a.isObservable)}
   535|               }
   536|             />
   537|             <LaunchAssetExecutionButton
   538|               preferredJobName={explorerPath.pipelineName}
   539|               scope={
   540|                 selectedDefinitions.length
   541|                   ? {selected: selectedDefinitions}
   542|                   : {all: allDefinitionsForMaterialize}
   543|               }
   544|               showChangedAndMissingOption
   545|             />
   546|           </TopbarWrapper>
   547|         </ErrorBoundary>
   548|       }
   549|       second={
   550|         selectedGraphNodes.length === 1 && selectedGraphNodes[0] ? (
   551|           <RightInfoPanel>
   552|             <RightInfoPanelContent>
   553|               <ErrorBoundary region="asset sidebar" resetErrorOnChange={[selectedGraphNodes[0].id]}>
   554|                 <SidebarAssetInfo graphNode={selectedGraphNodes[0]} />
   555|               </ErrorBoundary>
   556|             </RightInfoPanelContent>
   557|           </RightInfoPanel>
   558|         ) : fetchOptions.pipelineSelector ? (
   559|           <RightInfoPanel>
   560|             <RightInfoPanelContent>
   561|               <ErrorBoundary region="asset job sidebar">
   562|                 <AssetGraphJobSidebar pipelineSelector={fetchOptions.pipelineSelector} />
   563|               </ErrorBoundary>
   564|             </RightInfoPanelContent>
   565|           </RightInfoPanel>
   566|         ) : null
   567|       }
   568|     />
   569|   );
   570|   if (showSidebar && flagDAGSidebar) {
   571|     return (
   572|       <SplitPanelContainer
   573|         key="explorer-wrapper"
   574|         identifier="explorer-wrapper"
   575|         firstMinSize={300}
   576|         firstInitialPercent={0}
   577|         first={
   578|           showSidebar ? (
   579|             <AssetGraphExplorerSidebar
   580|               allAssetKeys={allAssetKeys}
   581|               assetGraphData={assetGraphData}
   582|               fullAssetGraphData={fullAssetGraphData}
   583|               lastSelectedNode={lastSelectedNode}
   584|               selectNode={selectNodeById}
   585|               explorerPath={explorerPath}
   586|               onChangeExplorerPath={onChangeExplorerPath}
   587|               expandedGroups={expandedGroups}
   588|               setExpandedGroups={setExpandedGroups}
   589|               hideSidebar={() => {
   590|                 setShowSidebar(false);
   591|               }}
   592|             />
   593|           ) : null
   594|         }
   595|         second={explorer}
   596|       />
   597|     );
   598|   }
   599|   return explorer;
   600| };
   601| const SVGContainer = styled.svg`
   602|   overflow: visible;
   603|   border-radius: 0;
   604|   foreignObject.group {
   605|     transition: opacity 300ms linear;
   606|   }
   607| `;
   608| const TopbarWrapper = styled.div`
   609|   position: absolute;
   610|   top: 0;
   611|   left: 0;
   612|   right: 0;
   613|   display: flex;
   614|   background: white;
   615|   gap: 12px;
   616|   align-items: center;
   617|   padding: 12px;
   618|   border-bottom: 1px solid ${Colors.KeylineGray};
   619| `;
   620| const GraphQueryInputFlexWrap = styled.div`
   621|   flex: 1;
   622|   > ${Box} {
   623|     ${TextInputContainer} {
   624|       width: 100%;
   625|     }
   626|     > * {
   627|       display: block;
   628|       width: 100%;
   629|     }
   630|   }
   631| `;
   632| function filterEdges(
   633|   edges: AssetLayoutEdge[],
   634|   allowGroupsOnlyZoomLevel: boolean,
   635|   scale: number,
   636|   graphData: GraphData,
   637| ) {
   638|   if (allowGroupsOnlyZoomLevel && scale < GROUPS_ONLY_SCALE) {


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/AssetGraphExplorerFilters.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-108 ---
     1| import {Box, Icon} from '@dagster-io/ui-components';
     2| import React from 'react';
     3| import {AssetGroupSelector} from '../graphql/types';
     4| import {TruncatedTextWithFullTextOnHover} from '../nav/getLeftNavItemsForOption';
     5| import {useFilters} from '../ui/Filters';
     6| import {FilterObject} from '../ui/Filters/useFilter';
     7| import {useStaticSetFilter} from '../ui/Filters/useStaticSetFilter';
     8| import {DagsterRepoOption, WorkspaceContext} from '../workspace/WorkspaceContext';
     9| import {buildRepoAddress, buildRepoPathForHuman} from '../workspace/buildRepoAddress';
    10| export const AssetGraphExplorerFilters = React.memo(
    11|   ({
    12|     assetGroups,
    13|     visibleAssetGroups,
    14|     setGroupFilters,
    15|   }:
    16|     | {
    17|         assetGroups: AssetGroupSelector[];
    18|         visibleAssetGroups: AssetGroupSelector[];
    19|         setGroupFilters: (groups: AssetGroupSelector[]) => void;
    20|       }
    21|     | {assetGroups?: null; setGroupFilters?: null; visibleAssetGroups?: null}) => {
    22|     const {allRepos, visibleRepos, toggleVisible} = React.useContext(WorkspaceContext);
    23|     const visibleReposSet = React.useMemo(() => new Set(visibleRepos), [visibleRepos]);
    24|     const reposFilter = useStaticSetFilter<DagsterRepoOption>({
    25|       name: 'Code location',
    26|       icon: 'repo',
    27|       allValues: allRepos.map((repo) => ({
    28|         key: repo.repository.id,
    29|         value: repo,
    30|         match: [buildRepoPathForHuman(repo.repository.name, repo.repositoryLocation.name)],
    31|       })),
    32|       menuWidth: '300px',
    33|       renderLabel: ({value}) => (
    34|         <Box flex={{direction: 'row', gap: 4, alignItems: 'center'}}>
    35|           <Icon name="repo" />
    36|           <TruncatedTextWithFullTextOnHover
    37|             text={buildRepoPathForHuman(value.repository.name, value.repositoryLocation.name)}
    38|           />
    39|         </Box>
    40|       ),
    41|       getStringValue: (value) =>
    42|         buildRepoPathForHuman(value.repository.name, value.repositoryLocation.name),
    43|       initialState: visibleReposSet,
    44|       onStateChanged: (values) => {
    45|         allRepos.forEach((repo) => {
    46|           if (visibleReposSet.has(repo) !== values.has(repo)) {
    47|             toggleVisible([buildRepoAddress(repo.repository.name, repo.repositoryLocation.name)]);
    48|           }
    49|         });
    50|       },
    51|     });
    52|     const groupsFilter = useStaticSetFilter<AssetGroupSelector>({
    53|       name: 'Asset Groups',
    54|       icon: 'asset_group',
    55|       allValues: (assetGroups || []).map((group) => ({
    56|         key: group.groupName,
    57|         value:
    58|           visibleAssetGroups?.find(
    59|             (visibleGroup) =>
    60|               visibleGroup.groupName === group.groupName &&
    61|               visibleGroup.repositoryName === group.repositoryName &&
    62|               visibleGroup.repositoryLocationName === group.repositoryLocationName,
    63|           ) ?? group,
    64|         match: [group.groupName],
    65|       })),
    66|       menuWidth: '300px',
    67|       renderLabel: ({value}) => (
    68|         <Box flex={{direction: 'row', gap: 4, alignItems: 'center'}}>
    69|           <Icon name="repo" />
    70|           <TruncatedTextWithFullTextOnHover
    71|             tooltipText={
    72|               value.groupName +
    73|               ' - ' +
    74|               buildRepoPathForHuman(value.repositoryName, value.repositoryLocationName)
    75|             }
    76|             text={
    77|               <>
    78|                 {value.groupName}
    79|                 <span style={{opacity: 0.5, paddingLeft: '4px'}}>
    80|                   {buildRepoPathForHuman(value.repositoryName, value.repositoryLocationName)}
    81|                 </span>
    82|               </>
    83|             }
    84|           />
    85|         </Box>
    86|       ),
    87|       getStringValue: (group) => group.groupName,
    88|       initialState: React.useMemo(() => new Set(visibleAssetGroups ?? []), [visibleAssetGroups]),
    89|       onStateChanged: (values) => {
    90|         if (setGroupFilters) {
    91|           setGroupFilters(Array.from(values));
    92|         }
    93|       },
    94|     });
    95|     const filters: FilterObject[] = [];
    96|     if (allRepos.length > 1) {
    97|       filters.push(reposFilter);
    98|     }
    99|     if (assetGroups) {
   100|       filters.push(groupsFilter);
   101|     }
   102|     const {button} = useFilters({filters});
   103|     if (allRepos.length <= 1 && !assetGroups) {
   104|       return null;
   105|     }
   106|     return button;
   107|   },
   108| );


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/AssetGroupNode.tsx
# Total hunks: 4
# ====================================================================
# --- HUNK 1: Lines 1-98 ---
     1| import {Box, Colors, FontFamily, Icon, Mono} from '@dagster-io/ui-components';
     2| import React from 'react';
     3| import {Link} from 'react-router-dom';
     4| import styled from 'styled-components';
     5| import {withMiddleTruncation} from '../app/Util';
     6| import {buildRepoPathForHuman} from '../workspace/buildRepoAddress';
     7| import {workspacePath} from '../workspace/workspacePath';
     8| import {MINIMAL_SCALE, GROUPS_ONLY_SCALE} from './AssetGraphExplorer';
     9| import {GroupLayout} from './layout';
    10| interface Props {
    11|   group: GroupLayout;
    12|   scale: number;
    13| }
    14| export const AssetGroupNode = ({group, scale}: Props) => {
    15|   const {repositoryLocationName, repositoryName, groupName} = group;
    16|   return (
    17|     <div style={{position: 'relative', width: '100%', height: '100%'}}>
    18|       {scale > GROUPS_ONLY_SCALE && (
    19|         <Box flex={{alignItems: 'flex-end'}} style={{height: 70}}>
    20|           <Mono
    21|             style={{
    22|               fontWeight: 600,
    23|               userSelect: 'none',
    24|               fontSize: scale > MINIMAL_SCALE ? '16px' : '32px',
    25|               display: 'flex',
    26|               gap: 6,
    27|             }}
    28|           >
    29|             <Icon
    30|               name="asset_group"
    31|               color={Colors.Gray400}
    32|               size={scale > MINIMAL_SCALE ? 20 : 48}
    33|             />
    34|             <Box flex={{direction: 'column'}}>
    35|               <Link
    36|                 style={{color: Colors.Gray400}}
    37|                 onClick={(e) => e.stopPropagation()}
    38|                 to={workspacePath(
    39|                   repositoryName,
    40|                   repositoryLocationName,
    41|                   `/asset-groups/${groupName}`,
    42|                 )}
    43|               >
    44|                 {groupName}
    45|               </Link>
    46|               <GroupRepoName style={{marginBottom: '0.5em'}}>
    47|                 {withMiddleTruncation(
    48|                   buildRepoPathForHuman(repositoryName, repositoryLocationName),
    49|                   {
    50|                     maxLength: 45,
    51|                   },
    52|                 )}
    53|               </GroupRepoName>
    54|             </Box>
    55|           </Mono>
    56|         </Box>
    57|       )}
    58|       <GroupOutline
    59|         style={{
    60|           inset: 0,
    61|           top: 75,
    62|           position: 'absolute',
    63|           background:
    64|             scale < GROUPS_ONLY_SCALE ? `rgba(234, 234, 234, 1)` : `rgba(217, 217, 217, 0.25)`,
    65|         }}
    66|       />
    67|       {scale < GROUPS_ONLY_SCALE ? (
    68|         <Box
    69|           flex={{justifyContent: 'center', alignItems: 'center'}}
    70|           style={{inset: 0, position: 'absolute', fontSize: `${12 / scale}px`, userSelect: 'none'}}
    71|         >
    72|           <Box
    73|             flex={{direction: 'column', alignItems: 'center'}}
    74|             style={{fontWeight: 600, fontFamily: FontFamily.monospace}}
    75|           >
    76|             {groupName}
    77|             <GroupRepoName>
    78|               {withMiddleTruncation(buildRepoPathForHuman(repositoryName, repositoryLocationName), {
    79|                 maxLength: 45,
    80|               })}
    81|             </GroupRepoName>
    82|           </Box>
    83|         </Box>
    84|       ) : undefined}
    85|     </div>
    86|   );
    87| };
    88| const GroupOutline = styled.div`
    89|   width: 100%;
    90|   border-radius: 10px;
    91|   pointer-events: none;
    92| `;
    93| const GroupRepoName = styled.div`
    94|   font-size: 0.8em;
    95|   line-height: 0.6em;
    96|   white-space: nowrap;
    97|   color: ${Colors.Gray400};
    98| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/AssetNode.tsx
# Total hunks: 7
# ====================================================================
# --- HUNK 1: Lines 1-325 ---
     1| import {gql} from '@apollo/client';
     2| import {Box, Colors, FontFamily, Icon, Spinner, Tooltip} from '@dagster-io/ui-components';
     3| import countBy from 'lodash/countBy';
     4| import isEqual from 'lodash/isEqual';
     5| import React from 'react';
     6| import ReactDOM from 'react-dom';
     7| import {Link} from 'react-router-dom';
     8| import styled, {CSSObject} from 'styled-components';
     9| import {withMiddleTruncation} from '../app/Util';
    10| import {useAssetLiveData} from '../asset-data/AssetLiveDataProvider';
    11| import {PartitionCountTags} from '../assets/AssetNodePartitionCounts';
    12| import {StaleReasonsTags} from '../assets/Stale';
    13| import {assetDetailsPathForKey} from '../assets/assetDetailsPathForKey';
    14| import {AssetComputeKindTag} from '../graph/OpTags';
    15| import {AssetCheckExecutionResolvedStatus, AssetCheckSeverity} from '../graphql/types';
    16| import {ExplorerPath} from '../pipelines/PipelinePathUtils';
    17| import {markdownToPlaintext} from '../ui/markdownToPlaintext';
    18| import {useAssetNodeMenu} from './AssetNodeMenu';
    19| import {buildAssetNodeStatusContent} from './AssetNodeStatusContent';
    20| import {AssetLatestRunSpinner} from './AssetRunLinking';
    21| import {GraphData, GraphNode, LiveDataForNode} from './Utils';
    22| import {ASSET_NODE_NAME_MAX_LENGTH} from './layout';
    23| import {AssetNodeFragment} from './types/AssetNode.types';
    24| interface Props {
    25|   definition: AssetNodeFragment;
    26|   selected: boolean;
    27| }
    28| export const AssetNode = React.memo(({definition, selected}: Props) => {
    29|   const displayName = definition.assetKey.path[definition.assetKey.path.length - 1]!;
    30|   const isSource = definition.isSource;
    31|   const {liveData} = useAssetLiveData(definition.assetKey);
    32|   return (
    33|     <AssetInsetForHoverEffect>
    34|       <AssetTopTags definition={definition} liveData={liveData} />
    35|       <AssetNodeContainer $selected={selected}>
    36|         <AssetNodeBox $selected={selected} $isSource={isSource}>
    37|           <AssetName $isSource={isSource}>
    38|             <span style={{marginTop: 1}}>
    39|               <Icon name={isSource ? 'source_asset' : 'asset'} />
    40|             </span>
    41|             <div
    42|               data-tooltip={displayName}
    43|               data-tooltip-style={isSource ? NameTooltipStyleSource : NameTooltipStyle}
    44|               style={{overflow: 'hidden', textOverflow: 'ellipsis'}}
    45|             >
    46|               {withMiddleTruncation(displayName, {
    47|                 maxLength: ASSET_NODE_NAME_MAX_LENGTH,
    48|               })}
    49|             </div>
    50|             <div style={{flex: 1}} />
    51|           </AssetName>
    52|           <Box style={{padding: '6px 8px'}} flex={{direction: 'column', gap: 4}} border="top">
    53|             {definition.description ? (
    54|               <AssetDescription $color={Colors.Gray800}>
    55|                 {markdownToPlaintext(definition.description).split('\n')[0]}
    56|               </AssetDescription>
    57|             ) : (
    58|               <AssetDescription $color={Colors.Gray400}>No description</AssetDescription>
    59|             )}
    60|             {definition.isPartitioned && !definition.isSource && (
    61|               <PartitionCountTags definition={definition} liveData={liveData} />
    62|             )}
    63|             <StaleReasonsTags liveData={liveData} assetKey={definition.assetKey} include="self" />
    64|           </Box>
    65|           {isSource && !definition.isObservable ? null : (
    66|             <AssetNodeStatusRow definition={definition} liveData={liveData} />
    67|           )}
    68|           {(liveData?.assetChecks || []).length > 0 && (
    69|             <AssetNodeChecksRow definition={definition} liveData={liveData} />
    70|           )}
    71|           <AssetComputeKindTag definition={definition} style={{right: -2, paddingTop: 7}} />
    72|         </AssetNodeBox>
    73|       </AssetNodeContainer>
    74|     </AssetInsetForHoverEffect>
    75|   );
    76| }, isEqual);
    77| interface AssetTopTagsProps {
    78|   definition: AssetNodeFragment;
    79|   liveData?: LiveDataForNode;
    80| }
    81| const AssetTopTags = ({definition, liveData}: AssetTopTagsProps) => (
    82|   <Box flex={{gap: 4}} padding={{left: 4}} style={{height: 24}}>
    83|     <StaleReasonsTags liveData={liveData} assetKey={definition.assetKey} include="upstream" />
    84|   </Box>
    85| );
    86| const AssetNodeRowBox = styled(Box)`
    87|   white-space: nowrap;
    88|   line-height: 12px;
    89|   font-size: 12px;
    90|   height: 24px;
    91|   a:hover {
    92|     text-decoration: none;
    93|   }
    94|   &:last-child {
    95|     border-bottom-left-radius: 6px;
    96|     border-bottom-right-radius: 6px;
    97|   }
    98| `;
    99| interface StatusRowProps {
   100|   definition: AssetNodeFragment;
   101|   liveData: LiveDataForNode | undefined;
   102| }
   103| const AssetNodeStatusRow = ({definition, liveData}: StatusRowProps) => {
   104|   const {content, background} = buildAssetNodeStatusContent({
   105|     assetKey: definition.assetKey,
   106|     definition,
   107|     liveData,
   108|   });
   109|   return (
   110|     <AssetNodeRowBox
   111|       background={background}
   112|       padding={{horizontal: 8}}
   113|       flex={{justifyContent: 'space-between', alignItems: 'center', gap: 6}}
   114|     >
   115|       {content}
   116|     </AssetNodeRowBox>
   117|   );
   118| };
   119| type AssetCheckIconType =
   120|   | Exclude<
   121|       AssetCheckExecutionResolvedStatus,
   122|       AssetCheckExecutionResolvedStatus.FAILED | AssetCheckExecutionResolvedStatus.EXECUTION_FAILED
   123|     >
   124|   | 'NOT_EVALUATED'
   125|   | 'WARN'
   126|   | 'ERROR';
   127| const AssetCheckIconsOrdered: {type: AssetCheckIconType; content: React.ReactNode}[] = [
   128|   {
   129|     type: AssetCheckExecutionResolvedStatus.IN_PROGRESS,
   130|     content: <Spinner purpose="caption-text" />,
   131|   },
   132|   {
   133|     type: 'NOT_EVALUATED',
   134|     content: <Icon name="dot" color={Colors.Gray500} />,
   135|   },
   136|   {
   137|     type: 'ERROR',
   138|     content: <Icon name="cancel" color={Colors.Red700} />,
   139|   },
   140|   {
   141|     type: 'WARN',
   142|     content: <Icon name="warning_outline" color={Colors.Yellow700} />,
   143|   },
   144|   {
   145|     type: AssetCheckExecutionResolvedStatus.SKIPPED,
   146|     content: <Icon name="dot" color={Colors.Gray500} />,
   147|   },
   148|   {
   149|     type: AssetCheckExecutionResolvedStatus.SUCCEEDED,
   150|     content: <Icon name="check_circle" color={Colors.Green700} />,
   151|   },
   152| ];
   153| export const AssetNodeContextMenuWrapper = React.memo(
   154|   ({
   155|     children,
   156|     graphData,
   157|     explorerPath,
   158|     onChangeExplorerPath,
   159|     selectNode,
   160|     node,
   161|   }: {
   162|     children: React.ReactNode;
   163|     graphData: GraphData;
   164|     node: GraphNode;
   165|     selectNode?: (e: React.MouseEvent<any> | React.KeyboardEvent<any>, nodeId: string) => void;
   166|     explorerPath?: ExplorerPath;
   167|     onChangeExplorerPath?: (path: ExplorerPath, mode: 'replace' | 'push') => void;
   168|   }) => {
   169|     const [menuVisible, setMenuVisible] = React.useState(false);
   170|     const [menuPosition, setMenuPosition] = React.useState<{top: number; left: number}>({
   171|       top: 0,
   172|       left: 0,
   173|     });
   174|     const showMenu = (e: React.MouseEvent) => {
   175|       e.preventDefault();
   176|       setMenuVisible(true);
   177|       setMenuPosition({top: e.pageY, left: e.pageX});
   178|     };
   179|     const hideMenu = () => {
   180|       setMenuVisible(false);
   181|     };
   182|     const ref = React.useRef<HTMLDivElement | null>(null);
   183|     React.useEffect(() => {
   184|       const node = ref.current;
   185|       const listener = (e: MouseEvent) => {
   186|         if (ref.current && e.target && !ref.current.contains(e.target as Node)) {
   187|           hideMenu();
   188|         }
   189|       };
   190|       const keydownListener = (e: KeyboardEvent) => {
   191|         if (ref.current && e.code === 'Escape') {
   192|           hideMenu();
   193|         }
   194|       };
   195|       if (menuVisible && node) {
   196|         document.body.addEventListener('click', listener);
   197|         document.body.addEventListener('keydown', keydownListener);
   198|       }
   199|       return () => {
   200|         if (node) {
   201|           document.body.removeEventListener('click', listener);
   202|           document.body.removeEventListener('keydown', keydownListener);
   203|         }
   204|       };
   205|     }, [menuVisible]);
   206|     const {dialog, menu} = useAssetNodeMenu({
   207|       graphData,
   208|       explorerPath,
   209|       onChangeExplorerPath,
   210|       selectNode,
   211|       node,
   212|     });
   213|     return (
   214|       <div ref={ref}>
   215|         <div onContextMenu={showMenu} onClick={hideMenu}>
   216|           {children}
   217|         </div>
   218|         {dialog}
   219|         {menuVisible
   220|           ? ReactDOM.createPortal(
   221|               <div
   222|                 style={{
   223|                   position: 'absolute',
   224|                   top: menuPosition.top,
   225|                   left: menuPosition.left,
   226|                   backgroundColor: '#fff',
   227|                   border: '1px solid #ccc',
   228|                   boxShadow: '0 2px 4px rgba(0, 0, 0, 0.1)',
   229|                   zIndex: 10,
   230|                 }}
   231|                 onClick={(e) => {
   232|                   e.stopPropagation();
   233|                 }}
   234|               >
   235|                 {menu}
   236|               </div>,
   237|               document.body,
   238|             )
   239|           : null}
   240|       </div>
   241|     );
   242|   },
   243| );
   244| const AssetNodeChecksRow = ({
   245|   definition,
   246|   liveData,
   247| }: {
   248|   definition: AssetNodeFragment;
   249|   liveData: LiveDataForNode | undefined;
   250| }) => {
   251|   if (!liveData || !liveData.assetChecks.length) {
   252|     return <span />;
   253|   }
   254|   const byIconType = countBy(liveData.assetChecks, (c) => {
   255|     const status = c.executionForLatestMaterialization?.status;
   256|     const value: AssetCheckIconType =
   257|       status === undefined
   258|         ? 'NOT_EVALUATED'
   259|         : status === AssetCheckExecutionResolvedStatus.FAILED
   260|         ? c.executionForLatestMaterialization?.evaluation?.severity === AssetCheckSeverity.WARN
   261|           ? 'WARN'
   262|           : 'ERROR'
   263|         : status === AssetCheckExecutionResolvedStatus.EXECUTION_FAILED
   264|         ? 'ERROR'
   265|         : status;
   266|     return value;
   267|   });
   268|   return (
   269|     <AssetNodeRowBox
   270|       padding={{horizontal: 8}}
   271|       flex={{justifyContent: 'space-between', alignItems: 'center', gap: 6}}
   272|       border="top"
   273|       background={Colors.Gray50}
   274|     >
   275|       Checks
   276|       <Link
   277|         to={assetDetailsPathForKey(definition.assetKey, {view: 'checks'})}
   278|         onClick={(e) => e.stopPropagation()}
   279|       >
   280|         <Box flex={{gap: 6, alignItems: 'center'}}>
   281|           {AssetCheckIconsOrdered.filter((a) => byIconType[a.type]).map((icon) => (
   282|             <Box flex={{gap: 2, alignItems: 'center'}} key={icon.type}>
   283|               {icon.content}
   284|               {byIconType[icon.type]}
   285|             </Box>
   286|           ))}
   287|         </Box>
   288|       </Link>
   289|     </AssetNodeRowBox>
   290|   );
   291| };
   292| export const AssetNodeMinimal = ({
   293|   selected,
   294|   definition,
   295| }: {
   296|   selected: boolean;
   297|   definition: AssetNodeFragment;
   298| }) => {
   299|   const {isSource, assetKey} = definition;
   300|   const {liveData} = useAssetLiveData(assetKey);
   301|   const {border, background} = buildAssetNodeStatusContent({assetKey, definition, liveData});
   302|   const displayName = assetKey.path[assetKey.path.length - 1]!;
   303|   return (
   304|     <AssetInsetForHoverEffect>
   305|       <MinimalAssetNodeContainer $selected={selected}>
   306|         <TooltipStyled
   307|           content={displayName}
   308|           canShow={displayName.length > 14}
   309|           targetTagName="div"
   310|           position="top"
   311|         >
   312|           <MinimalAssetNodeBox
   313|             $selected={selected}
   314|             $isSource={isSource}
   315|             $background={background}
   316|             $border={border}
   317|           >
   318|             <AssetNodeSpinnerContainer>
   319|               <AssetLatestRunSpinner liveData={liveData} purpose="section" />
   320|             </AssetNodeSpinnerContainer>
   321|             <MinimalName style={{fontSize: 30}} $isSource={isSource}>
   322|               {withMiddleTruncation(displayName, {maxLength: 14})}
   323|             </MinimalName>
   324|           </MinimalAssetNodeBox>
   325|         </TooltipStyled>

# --- HUNK 2: Lines 341-468 ---
   341|     isObservable
   342|     isSource
   343|     assetKey {
   344|       ...AssetNodeKey
   345|     }
   346|   }
   347|   fragment AssetNodeKey on AssetKey {
   348|     path
   349|   }
   350| `;
   351| const AssetInsetForHoverEffect = styled.div`
   352|   padding: 10px 4px 2px 4px;
   353|   height: 100%;
   354|   & *:focus {
   355|     outline: 0;
   356|   }
   357| `;
   358| const AssetNodeContainer = styled.div<{$selected: boolean}>`
   359|   user-select: none;
   360|   cursor: pointer;
   361|   padding: 4px;
   362| `;
   363| const AssetNodeShowOnHover = styled.span`
   364|   display: none;
   365| `;
   366| const AssetNodeBox = styled.div<{$isSource: boolean; $selected: boolean}>`
   367|   ${(p) =>
   368|     p.$isSource
   369|       ? `border: 2px dashed ${p.$selected ? Colors.Gray600 : Colors.Gray300}`
   370|       : `border: 2px solid ${p.$selected ? Colors.Blue500 : Colors.Blue200}`};
   371|   ${(p) =>
   372|     p.$isSource
   373|       ? `outline: 3px solid ${p.$selected ? Colors.Gray300 : 'transparent'}`
   374|       : `outline: 3px solid ${p.$selected ? Colors.Blue200 : 'transparent'}`};
   375|   background: ${Colors.White};
   376|   border-radius: 8px;
   377|   position: relative;
   378|   &:hover {
   379|     box-shadow: rgba(0, 0, 0, 0.12) 0px 2px 12px 0px;
   380|     ${AssetNodeShowOnHover} {
   381|       display: initial;
   382|     }
   383|   }
   384| `;
   385| /** Keep in sync with DISPLAY_NAME_PX_PER_CHAR */
   386| const NameCSS: CSSObject = {
   387|   padding: '3px 6px',
   388|   color: Colors.Gray800,
   389|   fontFamily: FontFamily.monospace,
   390|   fontWeight: 600,
   391| };
   392| export const NameTooltipCSS: CSSObject = {
   393|   ...NameCSS,
   394|   top: -9,
   395|   left: -12,
   396|   fontSize: 16.8,
   397| };
   398| export const NameTooltipStyle = JSON.stringify({
   399|   ...NameTooltipCSS,
   400|   background: Colors.Blue50,
   401|   border: `1px solid ${Colors.Blue100}`,
   402| });
   403| const NameTooltipStyleSource = JSON.stringify({
   404|   ...NameTooltipCSS,
   405|   background: Colors.Gray100,
   406|   border: `1px solid ${Colors.Gray200}`,
   407| });
   408| const AssetName = styled.div<{$isSource: boolean}>`
   409|   ${NameCSS};
   410|   display: flex;
   411|   gap: 4px;
   412|   background: ${(p) => (p.$isSource ? Colors.Gray100 : Colors.Blue50)};
   413|   border-top-left-radius: 8px;
   414|   border-top-right-radius: 8px;
   415| `;
   416| const AssetNodeSpinnerContainer = styled.div`
   417|   top: 50%;
   418|   position: absolute;
   419|   transform: translate(8px, -16px);
   420| `;
   421| const MinimalAssetNodeContainer = styled(AssetNodeContainer)`
   422|   padding-top: 30px;
   423|   padding-bottom: 42px;
   424|   height: 100%;
   425| `;
   426| const MinimalAssetNodeBox = styled.div<{
   427|   $isSource: boolean;
   428|   $selected: boolean;
   429|   $background: string;
   430|   $border: string;
   431| }>`
   432|   background: ${(p) => p.$background};
   433|   ${(p) =>
   434|     p.$isSource
   435|       ? `border: 4px dashed ${p.$selected ? Colors.Gray500 : p.$border}`
   436|       : `border: 4px solid ${p.$selected ? Colors.Blue500 : p.$border}`};
   437|   ${(p) =>
   438|     p.$isSource
   439|       ? `outline: 8px solid ${p.$selected ? Colors.Gray300 : 'transparent'}`
   440|       : `outline: 8px solid ${p.$selected ? Colors.Blue200 : 'transparent'}`};
   441|   border-radius: 10px;
   442|   position: relative;
   443|   padding: 4px;
   444|   height: 100%;
   445|   min-height: 46px;
   446|   &:hover {
   447|     box-shadow: rgba(0, 0, 0, 0.12) 0px 2px 12px 0px;
   448|   }
   449| `;
   450| const MinimalName = styled(AssetName)`
   451|   font-weight: 600;
   452|   white-space: nowrap;
   453|   position: absolute;
   454|   background: none;
   455|   top: 50%;
   456|   left: 50%;
   457|   transform: translate(-50%, -50%);
   458| `;
   459| export const AssetDescription = styled.div<{$color: string}>`
   460|   white-space: nowrap;
   461|   overflow: hidden;
   462|   text-overflow: ellipsis;
   463|   color: ${(p) => p.$color};
   464|   font-size: 12px;
   465| `;
   466| const TooltipStyled = styled(Tooltip)`
   467|   height: 100%;
   468| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/AssetNodeStatusContent.tsx
# Total hunks: 7
# ====================================================================
# --- HUNK 1: Lines 1-62 ---
     1| import {Body, Colors, Icon, Spinner} from '@dagster-io/ui-components';
     2| import React from 'react';
     3| import {Link} from 'react-router-dom';
     4| import {
     5|   StyleForAssetPartitionStatus,
     6|   partitionCountString,
     7| } from '../assets/AssetNodePartitionCounts';
     8| import {AssetPartitionStatusDot} from '../assets/AssetPartitionList';
     9| import {AssetPartitionStatus} from '../assets/AssetPartitionStatus';
    10| import {OverdueLineagePopover, isAssetOverdue} from '../assets/OverdueTag';
    11| import {assetDetailsPathForKey} from '../assets/assetDetailsPathForKey';
    12| import {
    13|   AssetCheckExecutionResolvedStatus,
    14|   AssetCheckSeverity,
    15|   AssetKeyInput,
    16| } from '../graphql/types';
    17| import {TimestampDisplay} from '../schedules/TimestampDisplay';
    18| import {AssetLatestRunSpinner, AssetRunLink} from './AssetRunLinking';
    19| import {LiveDataForNode, stepKeyForAsset} from './Utils';
    20| export enum StatusCase {
    21|   LOADING = 'LOADING',
    22|   SOURCE_OBSERVING = 'SOURCE_OBSERVING',
    23|   SOURCE_OBSERVED = 'SOURCE_OBSERVED',
    24|   SOURCE_NEVER_OBSERVED = 'SOURCE_NEVER_OBSERVED',
    25|   SOURCE_NO_STATE = 'SOURCE_NO_STATE',
    26|   MATERIALIZING = 'MATERIALIZING',
    27|   LATE_OR_FAILED = 'LATE_OR_FAILED',
    28|   NEVER_MATERIALIZED = 'NEVER_MATERIALIZED',
    29|   MATERIALIZED = 'MATERIALIZED',
    30|   PARTITIONS_FAILED = 'PARTITIONS_FAILED',
    31|   PARTITIONS_MISSING = 'PARTITIONS_MISSING',
    32|   PARTITIONS_MATERIALIZED = 'PARTITIONS_MATERIALIZED',
    33| }
    34| export type AssetNodeStatusContent = ReturnType<typeof buildAssetNodeStatusContent>;
    35| const LOADING_STATUS_CONTENT = {
    36|   case: StatusCase.LOADING as const,
    37|   background: Colors.Gray100,
    38|   border: Colors.Gray300,
    39|   content: (
    40|     <>
    41|       <Spinner purpose="caption-text" />
    42|       <span style={{flex: 1, color: Colors.Gray800}}>Loading...</span>
    43|     </>
    44|   ),
    45| };
    46| type StatusContentArgs = {
    47|   assetKey: AssetKeyInput;
    48|   definition: {opNames: string[]; isSource: boolean; isObservable: boolean};
    49|   liveData: LiveDataForNode | null | undefined;
    50|   expanded?: boolean;
    51| };
    52| export function buildAssetNodeStatusContent({
    53|   assetKey,
    54|   definition,
    55|   liveData,
    56|   expanded,
    57| }: StatusContentArgs) {
    58|   return definition.isSource
    59|     ? _buildSourceAssetNodeStatusContent({
    60|         assetKey,
    61|         definition,
    62|         liveData,

# --- HUNK 2: Lines 66-209 ---
    66|         assetKey,
    67|         definition,
    68|         liveData,
    69|         expanded,
    70|       });
    71| }
    72| export function _buildSourceAssetNodeStatusContent({
    73|   assetKey,
    74|   definition,
    75|   liveData,
    76|   expanded,
    77| }: StatusContentArgs) {
    78|   if (!liveData) {
    79|     return LOADING_STATUS_CONTENT;
    80|   }
    81|   const {inProgressRunIds, unstartedRunIds} = liveData;
    82|   const materializingRunId = inProgressRunIds[0] || unstartedRunIds[0];
    83|   if (materializingRunId) {
    84|     return {
    85|       case: StatusCase.SOURCE_OBSERVING as const,
    86|       background: Colors.Gray100,
    87|       border: Colors.Gray300,
    88|       content: (
    89|         <>
    90|           <AssetLatestRunSpinner liveData={liveData} purpose="caption-text" />
    91|           <span style={{flex: 1}} color={Colors.Gray800}>
    92|             Observing...
    93|           </span>
    94|           {expanded && <SpacerDot />}
    95|           <AssetRunLink assetKey={assetKey} runId={materializingRunId} />
    96|         </>
    97|       ),
    98|     };
    99|   }
   100|   if (liveData?.lastObservation) {
   101|     return {
   102|       case: StatusCase.SOURCE_OBSERVED as const,
   103|       background: Colors.Gray100,
   104|       border: Colors.Gray300,
   105|       content: (
   106|         <>
   107|           {expanded && <AssetPartitionStatusDot status={[AssetPartitionStatus.MISSING]} />}
   108|           <span>Observed</span>
   109|           {expanded && <SpacerDot />}
   110|           <span style={{textAlign: 'right', overflow: 'hidden'}}>
   111|             <AssetRunLink
   112|               assetKey={assetKey}
   113|               runId={liveData.lastObservation.runId}
   114|               event={{
   115|                 stepKey: stepKeyForAsset(definition),
   116|                 timestamp: liveData.lastObservation.timestamp,
   117|               }}
   118|             >
   119|               <TimestampDisplay
   120|                 timestamp={Number(liveData.lastObservation.timestamp) / 1000}
   121|                 timeFormat={{showSeconds: false, showTimezone: false}}
   122|               />
   123|             </AssetRunLink>
   124|           </span>
   125|         </>
   126|       ),
   127|     };
   128|   }
   129|   if (definition.isObservable) {
   130|     return {
   131|       case: StatusCase.SOURCE_NEVER_OBSERVED as const,
   132|       background: Colors.Gray100,
   133|       border: Colors.Gray300,
   134|       content: (
   135|         <>
   136|           {expanded && (
   137|             <Icon
   138|               name="partition_missing"
   139|               color={Colors.Gray300}
   140|               style={{marginRight: -2}}
   141|               size={12}
   142|             />
   143|           )}
   144|           <span>Never observed</span>
   145|           {!expanded && <span></span>}
   146|         </>
   147|       ),
   148|     };
   149|   }
   150|   return {
   151|     case: StatusCase.SOURCE_NO_STATE as const,
   152|     background: Colors.Gray100,
   153|     border: Colors.Gray300,
   154|     content: <span></span>,
   155|   };
   156| }
   157| export function _buildAssetNodeStatusContent({
   158|   assetKey,
   159|   definition,
   160|   liveData,
   161|   expanded,
   162| }: StatusContentArgs) {
   163|   if (!liveData) {
   164|     return LOADING_STATUS_CONTENT;
   165|   }
   166|   const {lastMaterialization, runWhichFailedToMaterialize, inProgressRunIds, unstartedRunIds} =
   167|     liveData;
   168|   const materializingRunId = inProgressRunIds[0] || unstartedRunIds[0];
   169|   const overdue = isAssetOverdue(liveData);
   170|   const checksFailed = liveData.assetChecks.some(
   171|     (c) =>
   172|       (c.executionForLatestMaterialization?.status === AssetCheckExecutionResolvedStatus.FAILED &&
   173|         c.executionForLatestMaterialization?.evaluation?.severity === AssetCheckSeverity.ERROR) ||
   174|       c.executionForLatestMaterialization?.status ===
   175|         AssetCheckExecutionResolvedStatus.EXECUTION_FAILED,
   176|   );
   177|   if (materializingRunId) {
   178|     const numMaterializing = liveData.partitionStats?.numMaterializing;
   179|     return {
   180|       case: StatusCase.MATERIALIZING as const,
   181|       background: Colors.Blue50,
   182|       border: Colors.Blue500,
   183|       numMaterializing,
   184|       content: (
   185|         <>
   186|           <div style={{marginLeft: -1, marginRight: -1}}>
   187|             <AssetLatestRunSpinner liveData={liveData} purpose="caption-text" />
   188|           </div>
   189|           <span style={{flex: 1}} color={Colors.Gray800}>
   190|             {numMaterializing === 1
   191|               ? `Materializing 1 partition...`
   192|               : numMaterializing
   193|               ? `Materializing ${numMaterializing} partitions...`
   194|               : `Materializing...`}
   195|           </span>
   196|           {expanded && <SpacerDot />}
   197|           {!numMaterializing || numMaterializing === 1 ? (
   198|             <AssetRunLink assetKey={assetKey} runId={materializingRunId} />
   199|           ) : undefined}
   200|         </>
   201|       ),
   202|     };
   203|   }
   204|   if (liveData.partitionStats) {
   205|     const {numPartitions, numMaterialized, numFailed} = liveData.partitionStats;
   206|     const numMissing = numPartitions - numFailed - numMaterialized;
   207|     const {background, foreground, border} =
   208|       StyleForAssetPartitionStatus[
   209|         overdue || numFailed || checksFailed

# --- HUNK 3: Lines 244-346 ---
   244|       ),
   245|     };
   246|   }
   247|   const lastMaterializationLink = lastMaterialization ? (
   248|     <span style={{overflow: 'hidden'}}>
   249|       <AssetRunLink
   250|         assetKey={assetKey}
   251|         runId={lastMaterialization.runId}
   252|         event={{stepKey: stepKeyForAsset(definition), timestamp: lastMaterialization.timestamp}}
   253|       >
   254|         <TimestampDisplay
   255|           timestamp={Number(lastMaterialization.timestamp) / 1000}
   256|           timeFormat={{showSeconds: false, showTimezone: false}}
   257|         />
   258|       </AssetRunLink>
   259|     </span>
   260|   ) : undefined;
   261|   if (runWhichFailedToMaterialize || overdue || checksFailed) {
   262|     return {
   263|       case: StatusCase.LATE_OR_FAILED as const,
   264|       background: Colors.Red50,
   265|       border: Colors.Red500,
   266|       content: (
   267|         <>
   268|           {expanded && (
   269|             <Icon
   270|               name="partition_failure"
   271|               color={Colors.Red500}
   272|               style={{marginRight: -2}}
   273|               size={12}
   274|             />
   275|           )}
   276|           {overdue && runWhichFailedToMaterialize ? (
   277|             <OverdueLineagePopover assetKey={assetKey} liveData={liveData}>
   278|               <span style={{color: Colors.Red700}}>Failed, Overdue</span>
   279|             </OverdueLineagePopover>
   280|           ) : overdue ? (
   281|             <OverdueLineagePopover assetKey={assetKey} liveData={liveData}>
   282|               <span style={{color: Colors.Red700}}>Overdue</span>
   283|             </OverdueLineagePopover>
   284|           ) : runWhichFailedToMaterialize ? (
   285|             <span style={{color: Colors.Red700}}>Failed</span>
   286|           ) : lastMaterialization ? (
   287|             <span style={{color: Colors.Red700}}>Materialized</span>
   288|           ) : (
   289|             <span style={{color: Colors.Red700}}>Never materialized</span>
   290|           )}
   291|           {expanded && <SpacerDot />}
   292|           {runWhichFailedToMaterialize ? (
   293|             <span style={{overflow: 'hidden'}}>
   294|               <AssetRunLink assetKey={assetKey} runId={runWhichFailedToMaterialize.id}>
   295|                 <TimestampDisplay
   296|                   timestamp={Number(runWhichFailedToMaterialize.endTime)}
   297|                   timeFormat={{showSeconds: false, showTimezone: false}}
   298|                 />
   299|               </AssetRunLink>
   300|             </span>
   301|           ) : (
   302|             lastMaterializationLink
   303|           )}
   304|         </>
   305|       ),
   306|     };
   307|   }
   308|   if (!lastMaterialization) {
   309|     return {
   310|       case: StatusCase.NEVER_MATERIALIZED as const,
   311|       background: Colors.Yellow50,
   312|       border: Colors.Yellow500,
   313|       content: (
   314|         <>
   315|           {expanded && (
   316|             <Icon
   317|               name="partition_missing"
   318|               color={Colors.Yellow500}
   319|               style={{marginRight: -2}}
   320|               size={12}
   321|             />
   322|           )}
   323|           <span style={{color: Colors.Yellow700}}>Never materialized</span>
   324|         </>
   325|       ),
   326|     };
   327|   }
   328|   return {
   329|     case: StatusCase.MATERIALIZED as const,
   330|     background: Colors.Green50,
   331|     border: Colors.Green500,
   332|     content: (
   333|       <>
   334|         {expanded && <AssetPartitionStatusDot status={[AssetPartitionStatus.MATERIALIZED]} />}
   335|         <span style={{color: Colors.Green700}}>Materialized</span>
   336|         {expanded && <SpacerDot />}
   337|         {lastMaterializationLink}
   338|       </>
   339|     ),
   340|   };
   341| }
   342| const SpacerDot = () => (
   343|   <Body color={Colors.KeylineGray} style={{marginLeft: -3, marginRight: -3}}>
   344|     
   345|   </Body>
   346| );


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/CollapsedGroupNode.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-109 ---
     1| import {Box, Colors, FontFamily, Icon} from '@dagster-io/ui-components';
     2| import React from 'react';
     3| import styled from 'styled-components';
     4| import {withMiddleTruncation} from '../app/Util';
     5| import {repoAddressAsHumanString} from '../workspace/repoAddressAsString';
     6| import {AssetDescription, NameTooltipCSS} from './AssetNode';
     7| import {GroupLayout} from './layout';
     8| export const GroupNodeNameAndRepo = ({group, minimal}: {minimal: boolean; group: GroupLayout}) => {
     9|   const name = `${group.groupName} `;
    10|   const location = repoAddressAsHumanString({
    11|     name: group.repositoryName,
    12|     location: group.repositoryLocationName,
    13|   });
    14|   if (minimal) {
    15|     return (
    16|       <Box style={{flex: 1, fontFamily: FontFamily.monospace}}>
    17|         <div
    18|           data-tooltip={name}
    19|           data-tooltip-style={GroupNameTooltipStyle}
    20|           style={{fontSize: 30, fontWeight: 600, lineHeight: '30px'}}
    21|         >
    22|           {withMiddleTruncation(name, {maxLength: 14})}
    23|         </div>
    24|         <div style={{fontSize: 20}}>{withMiddleTruncation(location, {maxLength: 21})}</div>
    25|       </Box>
    26|     );
    27|   }
    28|   return (
    29|     <Box style={{flex: 1, fontFamily: FontFamily.monospace}}>
    30|       <Box flex={{direction: 'row', gap: 4}}>
    31|         <div
    32|           data-tooltip={name}
    33|           data-tooltip-style={GroupNameTooltipStyle}
    34|           style={{fontSize: 20, fontWeight: 600, lineHeight: '1.1em'}}
    35|         >
    36|           {withMiddleTruncation(name, {maxLength: 22})}
    37|         </div>
    38|       </Box>
    39|       <Box style={{lineHeight: '1em'}}>{withMiddleTruncation(location, {maxLength: 31})}</Box>
    40|     </Box>
    41|   );
    42| };
    43| export const CollapsedGroupNode = ({
    44|   group,
    45|   minimal,
    46|   onExpand,
    47| }: {
    48|   minimal: boolean;
    49|   onExpand: () => void;
    50|   group: GroupLayout & {assetCount: number};
    51| }) => {
    52|   return (
    53|     <CollapsedGroupNodeContainer
    54|       onClick={(e) => {
    55|         onExpand();
    56|         e.stopPropagation();
    57|       }}
    58|     >
    59|       <CollapsedGroupNodeBox $minimal={minimal}>
    60|         <Box padding={{vertical: 8, left: 12, right: 8}} flex={{}}>
    61|           <GroupNodeNameAndRepo group={group} minimal={minimal} />
    62|           <Box padding={{vertical: 4}}>
    63|             <Icon name="unfold_more" />
    64|           </Box>
    65|         </Box>
    66|         {!minimal && (
    67|           <Box padding={{horizontal: 12, bottom: 4}}>
    68|             <AssetDescription $color={Colors.Gray400}>
    69|               {group.assetCount} {group.assetCount === 1 ? 'asset' : 'assets'}
    70|             </AssetDescription>
    71|           </Box>
    72|         )}
    73|       </CollapsedGroupNodeBox>
    74|       <GroupStackLine style={{width: '94%', marginLeft: '3%'}} />
    75|       <GroupStackLine style={{width: '88%', marginLeft: '6%'}} />
    76|     </CollapsedGroupNodeContainer>
    77|   );
    78| };
    79| export const GroupNameTooltipStyle = JSON.stringify({
    80|   ...NameTooltipCSS,
    81|   background: Colors.Gray100,
    82|   border: `1px solid ${Colors.Gray200}`,
    83| });
    84| const GroupStackLine = styled.div`
    85|   background: ${Colors.Gray200};
    86|   border-top: 2px solid ${Colors.White};
    87|   border-radius: 2px;
    88|   height: 4px;
    89| `;
    90| const CollapsedGroupNodeBox = styled.div<{$minimal: boolean}>`
    91|   border: ${(p) => (p.$minimal ? '4px' : '2px')} solid ${Colors.Gray200};
    92|   background: ${Colors.Gray50};
    93|   border-radius: 8px;
    94|   position: relative;
    95|   outline-bottom: 3px solid gray;
    96|   margin-top: 8px;
    97| `;
    98| const CollapsedGroupNodeContainer = styled.div`
    99|   user-select: none;
   100|   padding: 4px;
   101|   transition: transform linear 120ms;
   102|   cursor: pointer;
   103|   &:hover {
   104|     transform: scale(1.03);
   105|     ${CollapsedGroupNodeBox} {
   106|       background: ${Colors.Gray100};
   107|     }
   108|   }
   109| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/ExpandedGroupNode.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-64 ---
     1| import {Box, Colors, Icon} from '@dagster-io/ui-components';
     2| import React from 'react';
     3| import styled from 'styled-components';
     4| import {GroupNodeNameAndRepo} from './CollapsedGroupNode';
     5| import {GroupLayout} from './layout';
     6| export const ExpandedGroupNode = ({
     7|   group,
     8|   minimal,
     9|   onCollapse,
    10| }: {
    11|   group: GroupLayout;
    12|   minimal: boolean;
    13|   onCollapse?: () => void;
    14| }) => {
    15|   return (
    16|     <div style={{position: 'relative', width: '100%', height: '100%'}}>
    17|       <GroupNodeHeaderBox
    18|         $minimal={minimal}
    19|         onClick={(e) => {
    20|           onCollapse?.();
    21|           e.stopPropagation();
    22|         }}
    23|       >
    24|         <GroupNodeNameAndRepo group={group} minimal={minimal} />
    25|         {onCollapse && (
    26|           <Box padding={{vertical: 4}}>
    27|             <Icon name="unfold_less" />
    28|           </Box>
    29|         )}
    30|       </GroupNodeHeaderBox>
    31|       <GroupOutline $minimal={minimal} />
    32|     </div>
    33|   );
    34| };
    35| const GroupOutline = styled.div<{$minimal: boolean}>`
    36|   inset: 0;
    37|   top: 60px;
    38|   position: absolute;
    39|   background: rgba(255, 255, 255, 0.35);
    40|   width: 100%;
    41|   border-radius: 10px;
    42|   border-top-left-radius: 0;
    43|   border-top-right-radius: 0;
    44|   pointer-events: none;
    45|   border: ${(p) => (p.$minimal ? '4px' : '2px')} solid ${Colors.Gray200};
    46| `;
    47| const GroupNodeHeaderBox = styled.div<{$minimal: boolean}>`
    48|   border: ${(p) => (p.$minimal ? '4px' : '2px')} solid ${Colors.Gray200};
    49|   background: ${Colors.Gray50};
    50|   width: 100%;
    51|   height: 60px;
    52|   display: flex;
    53|   align-items: center;
    54|   cursor: pointer;
    55|   padding: 0 12px 0 16px;
    56|   border-radius: 8px;
    57|   border-bottom-left-radius: 0;
    58|   border-bottom-right-radius: 0;
    59|   border-bottom: 0;
    60|   position: relative;
    61|   &:hover {
    62|     background: ${Colors.Gray100};
    63|   }
    64| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/ForeignNode.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-33 ---
     1| import {Colors, Icon, FontFamily} from '@dagster-io/ui-components';
     2| import React from 'react';
     3| import styled from 'styled-components';
     4| import {withMiddleTruncation} from '../app/Util';
     5| import {ASSET_LINK_NAME_MAX_LENGTH} from './layout';
     6| export const AssetNodeLink = React.memo(({assetKey}: {assetKey: {path: string[]}}) => {
     7|   const label = assetKey.path[assetKey.path.length - 1]!;
     8|   return (
     9|     <AssetNodeLinkContainer>
    10|       <Icon name="open_in_new" color={Colors.Link} />
    11|       <span className="label" title={label}>
    12|         {withMiddleTruncation(label, {
    13|           maxLength: ASSET_LINK_NAME_MAX_LENGTH,
    14|         })}
    15|       </span>
    16|     </AssetNodeLinkContainer>
    17|   );
    18| });
    19| const AssetNodeLinkContainer = styled.div`
    20|   display: flex;
    21|   padding: 4px 8px 6px;
    22|   margin-top: 26px;
    23|   line-height: 30px;
    24|   font-family: ${FontFamily.monospace};
    25|   color: ${Colors.Link};
    26|   align-items: center;
    27|   font-weight: 600;
    28|   gap: 4px;
    29|   &:hover .label {
    30|     color: ${Colors.Link};
    31|     text-decoration: underline;
    32|   }
    33| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/SidebarAssetInfo.tsx
# Total hunks: 4
# ====================================================================
# --- HUNK 1: Lines 1-22 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {Box, Colors, ConfigTypeSchema, Icon, Spinner} from '@dagster-io/ui-components';
     3| import * as React from 'react';
     4| import {Link} from 'react-router-dom';
     5| import styled from 'styled-components';
     6| import {COMMON_COLLATOR} from '../app/Util';
     7| import {useAssetLiveData} from '../asset-data/AssetLiveDataProvider';
     8| import {ASSET_NODE_CONFIG_FRAGMENT} from '../assets/AssetConfig';
     9| import {AssetDefinedInMultipleReposNotice} from '../assets/AssetDefinedInMultipleReposNotice';
    10| import {
    11|   AssetMetadataTable,
    12|   ASSET_NODE_OP_METADATA_FRAGMENT,
    13|   metadataForAssetNode,
    14| } from '../assets/AssetMetadata';
    15| import {AssetSidebarActivitySummary} from '../assets/AssetSidebarActivitySummary';
    16| import {DependsOnSelfBanner} from '../assets/DependsOnSelfBanner';
    17| import {PartitionHealthSummary} from '../assets/PartitionHealthSummary';
    18| import {UnderlyingOpsOrGraph} from '../assets/UnderlyingOpsOrGraph';
    19| import {Version} from '../assets/Version';
    20| import {
    21|   EXECUTE_CHECKS_BUTTON_ASSET_NODE_FRAGMENT,
    22|   EXECUTE_CHECKS_BUTTON_CHECK_FRAGMENT,

# --- HUNK 2: Lines 78-144 ---
    78|       />
    79|       {(asset.description || OpMetadataPlugin?.SidebarComponent || !hasAssetMetadata) && (
    80|         <SidebarSection title="Description">
    81|           <Box padding={{vertical: 16, horizontal: 24}}>
    82|             <Description description={asset.description || 'No description provided'} />
    83|           </Box>
    84|           {asset.op && OpMetadataPlugin?.SidebarComponent && (
    85|             <Box padding={{bottom: 16, horizontal: 24}}>
    86|               <OpMetadataPlugin.SidebarComponent definition={asset.op} repoAddress={repoAddress} />
    87|             </Box>
    88|           )}
    89|         </SidebarSection>
    90|       )}
    91|       <AssetSidebarActivitySummary
    92|         asset={asset}
    93|         assetLastMaterializedAt={lastMaterialization?.timestamp}
    94|         isSourceAsset={definition.isSource}
    95|         stepKey={stepKeyForAsset(definition)}
    96|         liveData={liveData}
    97|       />
    98|       <div style={{borderBottom: `2px solid ${Colors.Gray300}`}} />
    99|       {nodeDependsOnSelf(graphNode) && <DependsOnSelfBanner />}
   100|       {asset.opVersion && (
   101|         <SidebarSection title="Code Version">
   102|           <Box padding={{vertical: 16, horizontal: 24}}>
   103|             <Version>{asset.opVersion}</Version>
   104|           </Box>
   105|         </SidebarSection>
   106|       )}
   107|       {assetConfigSchema && (
   108|         <SidebarSection title="Config">
   109|           <Box padding={{vertical: 16, horizontal: 24}}>
   110|             <ConfigTypeSchema
   111|               type={assetConfigSchema}
   112|               typesInScope={assetConfigSchema.recursiveConfigTypes}
   113|             />
   114|           </Box>
   115|         </SidebarSection>
   116|       )}
   117|       {asset.requiredResources.length > 0 && (
   118|         <SidebarSection title="Required resources">
   119|           <Box padding={{vertical: 16, horizontal: 24}}>
   120|             {[...asset.requiredResources]
   121|               .sort((a, b) => COMMON_COLLATOR.compare(a.resourceKey, b.resourceKey))
   122|               .map((resource) => (
   123|                 <ResourceContainer key={resource.resourceKey}>
   124|                   <Icon name="resource" color={Colors.Gray700} />
   125|                   {repoAddress ? (
   126|                     <Link
   127|                       to={workspacePathFromAddress(
   128|                         repoAddress,
   129|                         `/resources/${resource.resourceKey}`,
   130|                       )}
   131|                     >
   132|                       <ResourceHeader>{resource.resourceKey}</ResourceHeader>
   133|                     </Link>
   134|                   ) : (
   135|                     <ResourceHeader>{resource.resourceKey}</ResourceHeader>
   136|                   )}
   137|                 </ResourceContainer>
   138|               ))}
   139|           </Box>
   140|         </SidebarSection>
   141|       )}
   142|       {assetMetadata.length > 0 && (
   143|         <SidebarSection title="Metadata">
   144|           <AssetMetadataTable assetMetadata={assetMetadata} repoLocation={repoAddress?.location} />

# --- HUNK 3: Lines 168-208 ---
   168|   opName?: string;
   169|   repoAddress?: RepoAddress | null;
   170| }
   171| const Header = ({assetNode, repoAddress}: HeaderProps) => {
   172|   const displayName = displayNameForAssetKey(assetNode.assetKey);
   173|   return (
   174|     <Box flex={{gap: 4, direction: 'column'}} margin={{left: 24, right: 12, vertical: 16}}>
   175|       <SidebarTitle
   176|         style={{
   177|           marginBottom: 0,
   178|           display: 'flex',
   179|           justifyContent: 'space-between',
   180|           flexWrap: 'wrap',
   181|         }}
   182|       >
   183|         <Box>{displayName}</Box>
   184|       </SidebarTitle>
   185|       <Box flex={{direction: 'row', justifyContent: 'space-between', alignItems: 'center'}}>
   186|         <AssetCatalogLink to={assetDetailsPathForKey(assetNode.assetKey)}>
   187|           {'View in Asset Catalog '}
   188|           <Icon name="open_in_new" color={Colors.Link} />
   189|         </AssetCatalogLink>
   190|         {repoAddress && (
   191|           <UnderlyingOpsOrGraph assetNode={assetNode} repoAddress={repoAddress} minimal />
   192|         )}
   193|       </Box>
   194|     </Box>
   195|   );
   196| };
   197| const AssetCatalogLink = styled(Link)`
   198|   display: flex;
   199|   gap: 5px;
   200|   padding: 6px;
   201|   margin: -6px;
   202|   align-items: center;
   203|   white-space: nowrap;
   204| `;
   205| const SIDEBAR_ASSET_FRAGMENT = gql`
   206|   fragment SidebarAssetFragment on AssetNode {
   207|     id
   208|     description


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/TryTheFeatureFlagNotice.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-50 ---
     1| import {Body, Box, Button, Colors, Subtitle1} from '@dagster-io/ui-components';
     2| import uniq from 'lodash/uniq';
     3| import React from 'react';
     4| import styled from 'styled-components';
     5| import {FeatureFlag, getFeatureFlags, setFeatureFlags} from '../app/Flags';
     6| import {useStateWithStorage} from '../hooks/useStateWithStorage';
     7| const TITLE = 'Try the new asset graph';
     8| const MESSAGE =
     9|   "We're building a better asset graph experience with faster rendering, a new sidebar, collapsible groups, and more. You can opt-in to this experimental feature at any time from user settings.";
    10| export const TryTheFeatureFlagNotice = () => {
    11|   const [dismissed, setDismissed] = useStateWithStorage<boolean>(
    12|     'new-graph-feature-flag',
    13|     (val) => !!val,
    14|   );
    15|   if (dismissed) {
    16|     return <span />;
    17|   }
    18|   return (
    19|     <Container>
    20|       <Box flex={{direction: 'column', gap: 4}}>
    21|         <Subtitle1>{TITLE}</Subtitle1>
    22|         <Body color={Colors.Gray700}>{MESSAGE}</Body>
    23|         <Box flex={{gap: 8}} margin={{top: 12}}>
    24|           <Button
    25|             intent="primary"
    26|             onClick={() => {
    27|               setFeatureFlags(uniq([...getFeatureFlags(), FeatureFlag.flagDAGSidebar]));
    28|               window.location.reload();
    29|             }}
    30|           >
    31|             Try it now
    32|           </Button>
    33|           <Button onClick={() => setDismissed(true)}>No thanks</Button>
    34|         </Box>
    35|       </Box>
    36|     </Container>
    37|   );
    38| };
    39| const Container = styled.div`
    40|   position: absolute;
    41|   left: 16px;
    42|   bottom: 16px;
    43|   z-index: 2;
    44|   width: 700px;
    45|   max-width: 50vw;
    46|   border: 1px solid ${Colors.Blue100};
    47|   border-radius: 16px;
    48|   background: ${Colors.Blue50};
    49|   padding: 24px;
    50| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/__stories__/AssetNode.stories.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 22-62 ---
    22|     };
    23|     definitionCopy.assetKey.path = scenario.liveData
    24|       ? [scenario.liveData.stepKey]
    25|       : JSON.parse(scenario.definition.id);
    26|     const dimensions = getAssetNodeDimensions(definitionCopy);
    27|     _setCacheEntryForTest(definitionCopy.assetKey, scenario.liveData);
    28|     return (
    29|       <Box flex={{direction: 'column', gap: 8, alignItems: 'flex-start'}}>
    30|         <div
    31|           style={{
    32|             position: 'relative',
    33|             width: dimensions.width,
    34|             height: dimensions.height,
    35|             overflowY: 'hidden',
    36|           }}
    37|         >
    38|           <AssetNode definition={definitionCopy} selected={false} />
    39|         </div>
    40|         <div style={{position: 'relative', width: dimensions.width, height: 82}}>
    41|           <div style={{position: 'absolute', width: dimensions.width, height: 82}}>
    42|             <AssetNodeMinimal definition={definitionCopy} selected={false} />
    43|           </div>
    44|         </div>
    45|         <code>
    46|           <strong>{scenario.title}</strong>
    47|           <pre>{JSON.stringify(scenario.liveData, null, 2)}</pre>
    48|         </code>
    49|       </Box>
    50|     );
    51|   };
    52|   return (
    53|     <>
    54|       <Box flex={{gap: 20, wrap: 'wrap', alignItems: 'flex-start'}}>
    55|         {Mocks.AssetNodeScenariosBase.map(caseWithLiveData)}
    56|       </Box>
    57|       <Box flex={{gap: 20, wrap: 'wrap', alignItems: 'flex-start'}}>
    58|         {Mocks.AssetNodeScenariosSource.map(caseWithLiveData)}
    59|       </Box>
    60|       <Box flex={{gap: 20, wrap: 'wrap', alignItems: 'flex-start'}}>
    61|         {Mocks.AssetNodeScenariosPartitioned.map(caseWithLiveData)}
    62|       </Box>


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/layout.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 223-258 ---
   223| };
   224| export const extendBounds = (a: IBounds, b: IBounds) => {
   225|   const xmin = Math.min(a.x, b.x);
   226|   const ymin = Math.min(a.y, b.y);
   227|   const xmax = Math.max(a.x + a.width, b.x + b.width);
   228|   const ymax = Math.max(a.y + a.height, b.y + b.height);
   229|   return {x: xmin, y: ymin, width: xmax - xmin, height: ymax - ymin};
   230| };
   231| export const ASSET_NODE_NAME_MAX_LENGTH = 28;
   232| export const getAssetNodeDimensions = (def: {
   233|   assetKey: {path: string[]};
   234|   opNames: string[];
   235|   isSource: boolean;
   236|   isObservable: boolean;
   237|   isPartitioned: boolean;
   238|   graphName: string | null;
   239|   description?: string | null;
   240|   computeKind: string | null;
   241| }) => {
   242|   const width = 265;
   243|   if (def.isSource && !def.isObservable) {
   244|     return {width, height: 102};
   245|   } else {
   246|     let height = 100; // top tags area + name + description
   247|     if (def.isSource) {
   248|       height += 30; // last observed
   249|     } else {
   250|       height += 26; // status row
   251|       if (def.isPartitioned) {
   252|         height += 40;
   253|       }
   254|     }
   255|     height += 30; // tags beneath
   256|     return {width, height};
   257|   }
   258| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/sidebar/AssetSidebarNode.tsx
# Total hunks: 4
# ====================================================================
# --- HUNK 1: Lines 1-117 ---
     1| import {
     2|   Box,
     3|   Colors,
     4|   Icon,
     5|   MiddleTruncate,
     6|   Popover,
     7|   UnstyledButton,
     8| } from '@dagster-io/ui-components';
     9| import React from 'react';
    10| import styled from 'styled-components';
    11| import {ExplorerPath} from '../../pipelines/PipelinePathUtils';
    12| import {useAssetNodeMenu} from '../AssetNodeMenu';
    13| import {GraphData, GraphNode} from '../Utils';
    14| import {StatusDot} from './StatusDot';
    15| import {FolderNodeNonAssetType, getDisplayName} from './util';
    16| export const AssetSidebarNode = ({
    17|   graphData,
    18|   node,
    19|   level,
    20|   toggleOpen,
    21|   selectNode,
    22|   isOpen,
    23|   isSelected,
    24|   selectThisNode,
    25|   explorerPath,
    26|   onChangeExplorerPath,
    27|   viewType,
    28|   fullAssetGraphData,
    29| }: {
    30|   graphData: GraphData;
    31|   fullAssetGraphData: GraphData;
    32|   node: GraphNode | FolderNodeNonAssetType;
    33|   level: number;
    34|   toggleOpen: () => void;
    35|   selectThisNode: (e: React.MouseEvent<any> | React.KeyboardEvent<any>) => void;
    36|   selectNode: (e: React.MouseEvent<any> | React.KeyboardEvent<any>, nodeId: string) => void;
    37|   isOpen: boolean;
    38|   isSelected: boolean;
    39|   explorerPath: ExplorerPath;
    40|   onChangeExplorerPath: (path: ExplorerPath, mode: 'replace' | 'push') => void;
    41|   viewType: 'tree' | 'group';
    42| }) => {
    43|   const isGroupNode = 'groupName' in node;
    44|   const isLocationNode = 'locationName' in node;
    45|   const isAssetNode = !isGroupNode && !isLocationNode;
    46|   const displayName = React.useMemo(() => {
    47|     if (isAssetNode) {
    48|       return getDisplayName(node);
    49|     } else if (isGroupNode) {
    50|       return node.groupName;
    51|     } else {
    52|       return node.locationName;
    53|     }
    54|   }, [isAssetNode, isGroupNode, node]);
    55|   const downstream = Object.keys(graphData.downstream[node.id] ?? {});
    56|   const elementRef = React.useRef<HTMLDivElement | null>(null);
    57|   const showArrow =
    58|     !isAssetNode || (viewType === 'tree' && downstream.filter((id) => graphData.nodes[id]).length);
    59|   const ref = React.useRef<HTMLButtonElement | null>(null);
    60|   React.useLayoutEffect(() => {
    61|     if (ref.current && isSelected && !isElementInsideSVGViewport(document.activeElement)) {
    62|       ref.current.focus();
    63|     }
    64|   }, [isSelected]);
    65|   return (
    66|     <>
    67|       <Box ref={elementRef} onClick={selectThisNode} padding={{left: 8}}>
    68|         <BoxWrapper level={level}>
    69|           <Box padding={{right: 12}} flex={{direction: 'row', alignItems: 'center'}}>
    70|             {showArrow ? (
    71|               <UnstyledButton
    72|                 $showFocusOutline
    73|                 onClick={(e) => {
    74|                   e.stopPropagation();
    75|                   toggleOpen();
    76|                 }}
    77|                 onKeyDown={(e) => {
    78|                   if (e.code === 'Space') {
    79|                     e.preventDefault();
    80|                   }
    81|                 }}
    82|                 style={{cursor: 'pointer', width: 18}}
    83|               >
    84|                 <Icon
    85|                   name="arrow_drop_down"
    86|                   style={{transform: isOpen ? 'rotate(0deg)' : 'rotate(-90deg)'}}
    87|                 />
    88|               </UnstyledButton>
    89|             ) : (
    90|               <div style={{width: 18}} />
    91|             )}
    92|             <GrayOnHoverBox
    93|               onDoubleClick={toggleOpen}
    94|               style={{
    95|                 width: '100%',
    96|                 borderRadius: '8px',
    97|                 ...(isSelected ? {background: Colors.Blue50} : {}),
    98|               }}
    99|               $showFocusOutline={true}
   100|               ref={ref}
   101|             >
   102|               <div
   103|                 style={{
   104|                   display: 'grid',
   105|                   gridTemplateColumns: 'auto minmax(0, 1fr)',
   106|                   gap: '6px',
   107|                   alignItems: 'center',
   108|                 }}
   109|               >
   110|                 {isAssetNode ? <StatusDot node={node} /> : null}
   111|                 {isGroupNode ? <Icon name="asset_group" /> : null}
   112|                 {isLocationNode ? <Icon name="folder_open" /> : null}
   113|                 <MiddleTruncate text={displayName} />
   114|               </div>
   115|               {isAssetNode ? (
   116|                 <AssetNodePopoverMenu
   117|                   graphData={fullAssetGraphData}

# --- HUNK 2: Lines 134-207 ---
   134|     <div
   135|       onClick={(e) => {
   136|         e.stopPropagation();
   137|       }}
   138|       onKeyDown={(e) => {
   139|         if (e.code === 'Space') {
   140|           e.preventDefault();
   141|         }
   142|       }}
   143|     >
   144|       {dialog}
   145|       <Popover
   146|         content={menu}
   147|         hoverOpenDelay={100}
   148|         hoverCloseDelay={100}
   149|         placement="right"
   150|         shouldReturnFocusOnClose
   151|         canEscapeKeyClose
   152|       >
   153|         <ExpandMore tabIndex={0} role="button">
   154|           <Icon name="more_horiz" color={Colors.Gray500} />
   155|         </ExpandMore>
   156|       </Popover>
   157|     </div>
   158|   );
   159| };
   160| const BoxWrapper = ({level, children}: {level: number; children: React.ReactNode}) => {
   161|   const wrapper = React.useMemo(() => {
   162|     let sofar = children;
   163|     for (let i = 0; i < level; i++) {
   164|       sofar = (
   165|         <Box
   166|           padding={{left: 8}}
   167|           margin={{left: 8}}
   168|           border={i < level - 1 ? {side: 'left', width: 1, color: Colors.KeylineGray} : undefined}
   169|           style={{position: 'relative'}}
   170|         >
   171|           {sofar}
   172|         </Box>
   173|       );
   174|     }
   175|     return sofar;
   176|   }, [level, children]);
   177|   return <>{wrapper}</>;
   178| };
   179| const ExpandMore = styled.div``;
   180| const GrayOnHoverBox = styled(UnstyledButton)`
   181|   border-radius: 8px;
   182|   cursor: pointer;
   183|   user-select: none;
   184|   width: 100%;
   185|   display: flex;
   186|   flex-direction: row;
   187|   align-items: center;
   188|   padding: 5px 8px;
   189|   justify-content: space-between;
   190|   gap: 6;
   191|   flex-grow: 1;
   192|   flex-shrink: 1;
   193|   &:hover,
   194|   &:focus-within {
   195|     background: ${Colors.Gray100};
   196|     transition: background 100ms linear;
   197|     ${ExpandMore} {
   198|       visibility: visible;
   199|     }
   200|   }
   201|   ${ExpandMore} {
   202|     visibility: hidden;
   203|   }
   204| `;
   205| function isElementInsideSVGViewport(element: Element | null) {
   206|   return !!element?.closest('[data-svg-viewport]');
   207| }


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/sidebar/SearchFilter.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {MenuItem, useViewport, Suggest} from '@dagster-io/ui-components';
     2| import React from 'react';
     3| import styled from 'styled-components';
     4| import {ShortcutHandler} from '../../app/ShortcutHandler';
     5| export const SearchFilter = <T,>({
     6|   values,
     7|   onSelectValue,
     8| }: {
     9|   values: {label: string; value: T}[];
    10|   onSelectValue: (e: React.MouseEvent<any>, value: T) => void;
    11| }) => {
    12|   const {viewport, containerProps} = useViewport();
    13|   const ref = React.useRef<HTMLDivElement | null>(null);
    14|   return (
    15|     <ShortcutHandler
    16|       key="insights"
    17|       onShortcut={() => {
    18|         if (ref.current) {
    19|           ref.current.querySelector('input')?.focus();
    20|         }
    21|       }}

# --- HUNK 2: Lines 43-64 ---
    43|           popoverProps={{usePortal: false, fill: true}}
    44|           itemRenderer={(item, itemProps) => (
    45|             <MenuItem
    46|               active={itemProps.modifiers.active}
    47|               onClick={(e) => itemProps.handleClick(e)}
    48|               key={item.label}
    49|               text={item.label}
    50|             />
    51|           )}
    52|           noResults={<MenuItem disabled={true} text="No results" />}
    53|           onItemSelect={(item, e) => onSelectValue(e as any, item.value)}
    54|           selectedItem={null}
    55|         />
    56|       </SuggestWrapper>
    57|     </ShortcutHandler>
    58|   );
    59| };
    60| const SuggestWrapper = styled.div`
    61|   .bp4-input-group.dagster-suggest-input {
    62|     width: 100%;
    63|   }
    64| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/sidebar/Sidebar.tsx
# Total hunks: 5
# ====================================================================
# --- HUNK 1: Lines 1-127 ---
     1| import {Box, Button, Colors, Icon, ButtonGroup, Tooltip} from '@dagster-io/ui-components';
     2| import {useVirtualizer} from '@tanstack/react-virtual';
     3| import React from 'react';
     4| import styled from 'styled-components';
     5| import {AssetKey} from '../../assets/types';
     6| import {ExplorerPath} from '../../pipelines/PipelinePathUtils';
     7| import {Container, Inner, Row} from '../../ui/VirtualizedTable';
     8| import {buildRepoPathForHuman} from '../../workspace/buildRepoAddress';
     9| import {GraphData, GraphNode, tokenForAssetKey} from '../Utils';
    10| import {SearchFilter} from '../sidebar/SearchFilter';
    11| import {AssetSidebarNode} from './AssetSidebarNode';
    12| import {FolderNodeType, TreeNodeType, getDisplayName, nodePathKey} from './util';
    13| const COLLATOR = new Intl.Collator(navigator.language, {sensitivity: 'base', numeric: true});
    14| export const AssetGraphExplorerSidebar = React.memo(
    15|   ({
    16|     assetGraphData,
    17|     fullAssetGraphData,
    18|     lastSelectedNode,
    19|     selectNode: _selectNode,
    20|     explorerPath,
    21|     onChangeExplorerPath,
    22|     allAssetKeys,
    23|     hideSidebar,
    24|   }: {
    25|     assetGraphData: GraphData;
    26|     fullAssetGraphData: GraphData;
    27|     lastSelectedNode: GraphNode;
    28|     selectNode: (e: React.MouseEvent<any> | React.KeyboardEvent<any>, nodeId: string) => void;
    29|     explorerPath: ExplorerPath;
    30|     onChangeExplorerPath: (path: ExplorerPath, mode: 'replace' | 'push') => void;
    31|     allAssetKeys: AssetKey[];
    32|     expandedGroups: string[];
    33|     setExpandedGroups: (a: string[]) => void;
    34|     hideSidebar: () => void;
    35|   }) => {
    36|     const graphData = Object.keys(assetGraphData.nodes).length
    37|       ? assetGraphData
    38|       : fullAssetGraphData;
    39|     const [selectWhenDataAvailable, setSelectWhenDataAvailable] = React.useState<
    40|       [React.MouseEvent<any> | React.KeyboardEvent<any>, string] | null
    41|     >(null);
    42|     const selectedNodeHasDataAvailable = selectWhenDataAvailable
    43|       ? !!graphData.nodes[selectWhenDataAvailable[1]]
    44|       : false;
    45|     React.useEffect(() => {
    46|       if (selectWhenDataAvailable) {
    47|         const [e, id] = selectWhenDataAvailable;
    48|         _selectNode(e, id);
    49|       }
    50|     }, [selectWhenDataAvailable, selectedNodeHasDataAvailable]);
    51|     const selectNode: typeof _selectNode = (e, id) => {
    52|       setSelectWhenDataAvailable([e, id]);
    53|       if (!assetGraphData.nodes[id]) {
    54|         try {
    55|           const path = JSON.parse(id);
    56|           const nextOpsQuery = explorerPath.opsQuery.trim()
    57|             ? `\"${tokenForAssetKey({path})}\"`
    58|             : '*';
    59|           onChangeExplorerPath(
    60|             {
    61|               ...explorerPath,
    62|               opsQuery: nextOpsQuery,
    63|             },
    64|             'push',
    65|           );
    66|         } catch (e) {
    67|         }
    68|       }
    69|     };
    70|     const [openNodes, setOpenNodes] = React.useState<Set<string>>(new Set());
    71|     const [selectedNode, setSelectedNode] = React.useState<
    72|       null | {id: string; path: string} | {id: string}
    73|     >(null);
    74|     const [viewType, setViewType] = React.useState<'tree' | 'group'>('group');
    75|     const rootNodes = React.useMemo(
    76|       () =>
    77|         Object.keys(graphData.nodes)
    78|           .filter(
    79|             (id) =>
    80|               !Object.keys(graphData.upstream[id] ?? {}).filter((id) => graphData.nodes[id]).length,
    81|           )
    82|           .sort((a, b) =>
    83|             COLLATOR.compare(
    84|               getDisplayName(graphData.nodes[a]!),
    85|               getDisplayName(graphData.nodes[b]!),
    86|             ),
    87|           ),
    88|       [graphData],
    89|     );
    90|     const treeNodes = React.useMemo(() => {
    91|       const queue = rootNodes.map((id) => ({level: 1, id, path: id}));
    92|       const treeNodes: TreeNodeType[] = [];
    93|       while (queue.length) {
    94|         const node = queue.shift()!;
    95|         treeNodes.push(node);
    96|         if (openNodes.has(node.path)) {
    97|           const downstream = Object.keys(graphData.downstream[node.id] || {}).filter(
    98|             (id) => graphData.nodes[id],
    99|           );
   100|           queue.unshift(
   101|             ...downstream.map((id) => ({level: node.level + 1, id, path: `${node.path}:${id}`})),
   102|           );
   103|         }
   104|       }
   105|       return treeNodes;
   106|     }, [graphData.downstream, graphData.nodes, openNodes, rootNodes]);
   107|     const {folderNodes, codeLocationNodes} = React.useMemo(() => {
   108|       const folderNodes: FolderNodeType[] = [];
   109|       const codeLocationNodes: Record<
   110|         string,
   111|         {
   112|           locationName: string;
   113|           groups: Record<
   114|             string,
   115|             {
   116|               groupName: string;
   117|               assets: string[];
   118|             }
   119|           >;
   120|         }
   121|       > = {};
   122|       Object.entries(graphData.nodes).forEach(([id, node]) => {
   123|         const locationName = node.definition.repository.location.name;
   124|         const repositoryName = node.definition.repository.name;
   125|         const groupName = node.definition.groupName || 'default';
   126|         const codeLocation = buildRepoPathForHuman(repositoryName, locationName);
   127|         codeLocationNodes[codeLocation] = codeLocationNodes[codeLocation] || {

# --- HUNK 2: Lines 140-332 ---
   140|         if (openNodes.has(locationName)) {
   141|           Object.entries(locationNode.groups).forEach(([groupName, groupNode]) => {
   142|             const groupId = locationName + ':' + groupName;
   143|             folderNodes.push({groupName, id: groupId, level: 2});
   144|             if (openNodes.has(groupId)) {
   145|               groupNode.assets
   146|                 .sort((a, b) => COLLATOR.compare(a, b))
   147|                 .forEach((assetKey) => {
   148|                   folderNodes.push({
   149|                     id: assetKey,
   150|                     path: locationName + ':' + groupName + ':' + assetKey,
   151|                     level: 3,
   152|                   });
   153|                 });
   154|             }
   155|           });
   156|         }
   157|       });
   158|       return {folderNodes, codeLocationNodes};
   159|     }, [graphData.nodes, openNodes]);
   160|     const renderedNodes = viewType === 'tree' ? treeNodes : folderNodes;
   161|     const containerRef = React.useRef<HTMLDivElement | null>(null);
   162|     const rowVirtualizer = useVirtualizer({
   163|       count: renderedNodes.length,
   164|       getScrollElement: () => containerRef.current,
   165|       estimateSize: () => 32,
   166|       overscan: 10,
   167|     });
   168|     const totalHeight = rowVirtualizer.getTotalSize();
   169|     const items = rowVirtualizer.getVirtualItems();
   170|     React.useLayoutEffect(() => {
   171|       if (renderedNodes.length === 1 && viewType === 'group') {
   172|         setOpenNodes((prevOpenNodes) => {
   173|           const nextOpenNodes = new Set(prevOpenNodes);
   174|           const locations = Object.keys(codeLocationNodes);
   175|           if (locations.length === 1) {
   176|             const location = codeLocationNodes[locations[0]!]!;
   177|             nextOpenNodes.add(location.locationName);
   178|             const groups = Object.keys(location.groups);
   179|             if (groups.length === 1) {
   180|               nextOpenNodes.add(
   181|                 location.locationName + ':' + location.groups[groups[0]!]!.groupName,
   182|               );
   183|             }
   184|           }
   185|           return nextOpenNodes;
   186|         });
   187|       }
   188|       if (lastSelectedNode) {
   189|         setOpenNodes((prevOpenNodes) => {
   190|           if (viewType === 'group') {
   191|             const nextOpenNodes = new Set(prevOpenNodes);
   192|             const assetNode = graphData.nodes[lastSelectedNode.id];
   193|             if (assetNode) {
   194|               const locationName = buildRepoPathForHuman(
   195|                 assetNode.definition.repository.name,
   196|                 assetNode.definition.repository.location.name,
   197|               );
   198|               const groupName = assetNode.definition.groupName || 'default';
   199|               nextOpenNodes.add(locationName);
   200|               nextOpenNodes.add(locationName + ':' + groupName);
   201|             }
   202|             if (selectedNode?.id !== lastSelectedNode.id) {
   203|               setSelectedNode({id: lastSelectedNode.id});
   204|             }
   205|             return nextOpenNodes;
   206|           }
   207|           let path = lastSelectedNode.id;
   208|           let currentId = lastSelectedNode.id;
   209|           let next: string | undefined;
   210|           while ((next = Object.keys(graphData.upstream[currentId] ?? {})[0])) {
   211|             if (!graphData.nodes[next]) {
   212|               break;
   213|             }
   214|             path = `${next}:${path}`;
   215|             currentId = next;
   216|           }
   217|           const nextOpenNodes = new Set(prevOpenNodes);
   218|           const nodesInPath = path.split(':');
   219|           let currentPath = nodesInPath[0]!;
   220|           nextOpenNodes.add(currentPath);
   221|           for (let i = 1; i < nodesInPath.length; i++) {
   222|             currentPath = `${currentPath}:${nodesInPath[i]}`;
   223|             nextOpenNodes.add(currentPath);
   224|           }
   225|           if (selectedNode?.id !== lastSelectedNode.id) {
   226|             setSelectedNode({id: lastSelectedNode.id, path: currentPath});
   227|           }
   228|           return nextOpenNodes;
   229|         });
   230|       } else {
   231|         setSelectedNode(null);
   232|       }
   233|     }, [
   234|       lastSelectedNode,
   235|       graphData,
   236|       viewType,
   237|       lastSelectedNode &&
   238|         renderedNodes.findIndex((node) => nodePathKey(lastSelectedNode) === nodePathKey(node)),
   239|     ]);
   240|     const indexOfLastSelectedNode = React.useMemo(
   241|       () => {
   242|         if (!selectedNode) {
   243|           return -1;
   244|         }
   245|         if (viewType === 'tree') {
   246|           return 'path' in selectedNode
   247|             ? renderedNodes.findIndex((node) => 'path' in node && node.path === selectedNode.path)
   248|             : -1;
   249|         } else {
   250|           return renderedNodes.findIndex((node) => {
   251|             if (!('path' in selectedNode)) {
   252|               return node.id === selectedNode.id;
   253|             } else {
   254|               return nodePathKey(node) === nodePathKey(selectedNode);
   255|             }
   256|           });
   257|         }
   258|       },
   259|       [viewType, renderedNodes, selectedNode],
   260|     );
   261|     const indexOfLastSelectedNodeRef = React.useRef(indexOfLastSelectedNode);
   262|     indexOfLastSelectedNodeRef.current = indexOfLastSelectedNode;
   263|     React.useLayoutEffect(() => {
   264|       if (indexOfLastSelectedNode !== -1) {
   265|         rowVirtualizer.scrollToIndex(indexOfLastSelectedNode, {
   266|           align: 'center',
   267|           smoothScroll: true,
   268|         });
   269|       }
   270|     }, [selectedNode, rootNodes, rowVirtualizer]);
   271|     React.useLayoutEffect(() => {
   272|       const id = setInterval(rowVirtualizer.measure, 1000);
   273|       return () => clearInterval(id);
   274|     }, [rowVirtualizer.measure]);
   275|     return (
   276|       <div style={{display: 'grid', gridTemplateRows: 'auto auto minmax(0, 1fr)', height: '100%'}}>
   277|         <div
   278|           style={{
   279|             display: 'grid',
   280|             gridTemplateColumns: '1fr auto',
   281|             gap: '6px',
   282|             padding: '12px 24px',
   283|             paddingRight: 12,
   284|             borderBottom: `1px solid ${Colors.KeylineGray}`,
   285|           }}
   286|         >
   287|           <ButtonGroupWrapper>
   288|             <ButtonGroup
   289|               activeItems={new Set([viewType])}
   290|               buttons={[
   291|                 {id: 'group', label: 'Group view', icon: 'asset_group'},
   292|                 {id: 'tree', label: 'Tree view', icon: 'gantt_flat'},
   293|               ]}
   294|               onClick={(id: 'tree' | 'group') => {
   295|                 setViewType(id);
   296|               }}
   297|             />
   298|           </ButtonGroupWrapper>
   299|           <Tooltip content="Hide sidebar">
   300|             <Button icon={<Icon name="panel_show_right" />} onClick={hideSidebar} />
   301|           </Tooltip>
   302|         </div>
   303|         <Box padding={{vertical: 8, left: 24, right: 12}}>
   304|           <SearchFilter
   305|             values={React.useMemo(() => {
   306|               return allAssetKeys.map((key) => ({
   307|                 value: JSON.stringify(key.path),
   308|                 label: key.path[key.path.length - 1]!,
   309|               }));
   310|             }, [allAssetKeys])}
   311|             onSelectValue={selectNode}
   312|           />
   313|         </Box>
   314|         <div>
   315|           <Container
   316|             ref={containerRef}
   317|             onKeyDown={(e) => {
   318|               let nextIndex = 0;
   319|               if (e.code === 'ArrowDown' || e.code === 'ArrowUp') {
   320|                 nextIndex = indexOfLastSelectedNodeRef.current + (e.code === 'ArrowDown' ? 1 : -1);
   321|                 indexOfLastSelectedNodeRef.current = nextIndex;
   322|                 e.preventDefault();
   323|                 const nextNode =
   324|                   renderedNodes[(nextIndex + renderedNodes.length) % renderedNodes.length]!;
   325|                 setSelectedNode(nextNode);
   326|                 selectNode(e, nextNode.id);
   327|               } else if (e.code === 'ArrowLeft' || e.code === 'ArrowRight') {
   328|                 const open = e.code === 'ArrowRight';
   329|                 setOpenNodes((nodes) => {
   330|                   const node = renderedNodes[indexOfLastSelectedNode];
   331|                   if (!node) {
   332|                     return nodes;

# --- HUNK 3: Lines 341-413 ---
   341|                 });
   342|               }
   343|             }}
   344|           >
   345|             <Inner $totalHeight={totalHeight}>
   346|               {items.map(({index, key, size, start, measureElement}) => {
   347|                 const node = renderedNodes[index]!;
   348|                 const isCodelocationNode = 'locationName' in node;
   349|                 const isGroupNode = 'groupName' in node;
   350|                 const row = !isCodelocationNode && !isGroupNode ? graphData.nodes[node.id] : node;
   351|                 return (
   352|                   <Row
   353|                     $height={size}
   354|                     $start={start}
   355|                     key={key}
   356|                     style={{overflow: 'visible'}}
   357|                     ref={measureElement}
   358|                   >
   359|                     {row ? (
   360|                       <AssetSidebarNode
   361|                         viewType={viewType}
   362|                         isOpen={openNodes.has(nodePathKey(node))}
   363|                         graphData={graphData}
   364|                         fullAssetGraphData={fullAssetGraphData}
   365|                         node={row}
   366|                         level={node.level}
   367|                         isSelected={
   368|                           selectedNode && 'path' in node && 'path' in selectedNode
   369|                             ? selectedNode.path === node.path
   370|                             : selectedNode?.id === node.id
   371|                         }
   372|                         toggleOpen={() => {
   373|                           setOpenNodes((nodes) => {
   374|                             const openNodes = new Set(nodes);
   375|                             const isOpen = openNodes.has(nodePathKey(node));
   376|                             if (isOpen) {
   377|                               openNodes.delete(nodePathKey(node));
   378|                             } else {
   379|                               openNodes.add(nodePathKey(node));
   380|                             }
   381|                             return openNodes;
   382|                           });
   383|                         }}
   384|                         selectNode={(e, id) => {
   385|                           selectNode(e, id);
   386|                         }}
   387|                         selectThisNode={(e) => {
   388|                           setSelectedNode(node);
   389|                           selectNode(e, node.id);
   390|                         }}
   391|                         explorerPath={explorerPath}
   392|                         onChangeExplorerPath={onChangeExplorerPath}
   393|                       />
   394|                     ) : null}
   395|                   </Row>
   396|                 );
   397|               })}
   398|             </Inner>
   399|           </Container>
   400|         </div>
   401|       </div>
   402|     );
   403|   },
   404| );
   405| const ButtonGroupWrapper = styled.div`
   406|   > * {
   407|     display: grid;
   408|     grid-template-columns: 1fr 1fr;
   409|     > * {
   410|       place-content: center;
   411|     }
   412|   }
   413| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/sidebar/util.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {Colors, Spinner, Tooltip} from '@dagster-io/ui-components';
     2| import React from 'react';
     3| import styled, {keyframes} from 'styled-components';
     4| import {StatusCase} from '../AssetNodeStatusContent';
     5| import {GraphNode} from '../Utils';
     6| export type FolderNodeNonAssetType =
     7|   | {groupName: string; id: string; level: number}
     8|   | {locationName: string; id: string; level: number};
     9| export type FolderNodeType = FolderNodeNonAssetType | {path: string; id: string; level: number};
    10| export type TreeNodeType = {level: number; id: string; path: string};
    11| export function nodePathKey(node: {path: string; id: string} | {id: string}) {
    12|   return 'path' in node ? node.path : node.id;
    13| }
    14| export function getDisplayName(node: GraphNode) {
    15|   return node.assetKey.path[node.assetKey.path.length - 1]!;
    16| }
    17| export function StatusCaseDot({statusCase}: {statusCase: StatusCase}) {
    18|   const type = React.useMemo(() => {
    19|     switch (statusCase) {
    20|       case StatusCase.LOADING:
    21|         return 'loading' as const;

# --- HUNK 2: Lines 32-86 ---
    32|       case StatusCase.LATE_OR_FAILED:
    33|         return 'failed' as const;
    34|       case StatusCase.NEVER_MATERIALIZED:
    35|         return 'missing' as const;
    36|       case StatusCase.MATERIALIZED:
    37|         return 'successful' as const;
    38|       case StatusCase.PARTITIONS_FAILED:
    39|         return 'failed' as const;
    40|       case StatusCase.PARTITIONS_MISSING:
    41|         return 'missing' as const;
    42|       case StatusCase.PARTITIONS_MATERIALIZED:
    43|         return 'successful' as const;
    44|     }
    45|   }, [statusCase]);
    46|   switch (type) {
    47|     case 'loading':
    48|       return <LoadingDot />;
    49|     case 'missing':
    50|       return (
    51|         <Tooltip content="Missing" position="top">
    52|           <Dot style={{border: `2px solid ${Colors.Gray500}`}} />
    53|         </Tooltip>
    54|       );
    55|     case 'failed':
    56|       return (
    57|         <Tooltip content="Failed" position="top">
    58|           <Dot style={{backgroundColor: Colors.Red500}} />
    59|         </Tooltip>
    60|       );
    61|     case 'inprogress':
    62|       return <Spinner purpose="caption-text" />;
    63|     case 'successful':
    64|       return <Dot style={{backgroundColor: Colors.Green500}} />;
    65|   }
    66| }
    67| const pulse = keyframes`
    68|   from {
    69|     background-color: ${Colors.Gray100}
    70|   }
    71|   50% {
    72|     background-color: ${Colors.Gray300}
    73|   }
    74|   to {
    75|     background-color: ${Colors.Gray100}
    76|   }
    77| `;
    78| const Dot = styled.div`
    79|   width: 10px;
    80|   height: 10px;
    81|   border-radius: 50%;
    82|   margin: 0 1px;
    83| `;
    84| const LoadingDot = styled(Dot)`
    85|   animation: ${pulse} 1s ease-out infinite;
    86| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/asset-graph/useAssetGraphData.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-40 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import groupBy from 'lodash/groupBy';
     3| import keyBy from 'lodash/keyBy';
     4| import reject from 'lodash/reject';
     5| import React from 'react';
     6| import {filterByQuery, GraphQueryItem} from '../app/GraphQueryImpl';
     7| import {AssetKey} from '../assets/types';
     8| import {AssetGroupSelector, PipelineSelector} from '../graphql/types';
     9| import {ASSET_NODE_FRAGMENT} from './AssetNode';
    10| import {buildGraphData, GraphData, toGraphId, tokenForAssetKey} from './Utils';
    11| import {
    12|   AssetGraphQuery,
    13|   AssetGraphQueryVariables,
    14|   AssetNodeForGraphQueryFragment,
    15| } from './types/useAssetGraphData.types';
    16| export interface AssetGraphFetchScope {
    17|   hideEdgesToNodesOutsideQuery?: boolean;
    18|   hideNodesMatching?: (node: AssetNodeForGraphQueryFragment) => boolean;
    19|   pipelineSelector?: PipelineSelector;
    20|   groupSelector?: AssetGroupSelector;
    21| }
    22| export type AssetGraphQueryItem = GraphQueryItem & {
    23|   node: AssetNode;
    24| };
    25| /** Fetches data for rendering an asset graph:
    26|  *
    27|  * @param pipelineSelector: Optionally scope to an asset job, or pass null for the global graph
    28|  *
    29|  * @param opsQuery: filter the returned graph using selector syntax string (eg: asset_name++)
    30|  *
    31|  * @param filterNodes: filter the returned graph using the provided function. The global graph
    32|  * uses this option to implement the "3 of 4 repositories" picker.
    33|  */
    34| export function useAssetGraphData(opsQuery: string, options: AssetGraphFetchScope) {
    35|   const fetchResult = useQuery<AssetGraphQuery, AssetGraphQueryVariables>(ASSET_GRAPH_QUERY, {
    36|     notifyOnNetworkStatusChange: true,
    37|     variables: {
    38|       pipelineSelector: options.pipelineSelector,
    39|       groupSelector: options.groupSelector,
    40|     },

# --- HUNK 2: Lines 50-101 ---
    50|   const graphQueryItems = React.useMemo(
    51|     () => (repoFilteredNodes ? buildGraphQueryItems(repoFilteredNodes) : []),
    52|     [repoFilteredNodes],
    53|   );
    54|   const fullGraphQueryItems = React.useMemo(
    55|     () => (nodes ? buildGraphQueryItems(nodes) : []),
    56|     [nodes],
    57|   );
    58|   const fullAssetGraphData = React.useMemo(
    59|     () => (fullGraphQueryItems ? buildGraphData(fullGraphQueryItems.map((n) => n.node)) : null),
    60|     [fullGraphQueryItems],
    61|   );
    62|   const {assetGraphData, graphAssetKeys, allAssetKeys} = React.useMemo(() => {
    63|     if (repoFilteredNodes === undefined || graphQueryItems === undefined) {
    64|       return {
    65|         graphAssetKeys: [],
    66|         graphQueryItems: [],
    67|         assetGraphData: null,
    68|       };
    69|     }
    70|     const {all} = filterByQuery(graphQueryItems, opsQuery);
    71|     const assetGraphData = buildGraphData(all.map((n) => n.node));
    72|     if (options.hideEdgesToNodesOutsideQuery) {
    73|       removeEdgesToHiddenAssets(assetGraphData, repoFilteredNodes);
    74|     }
    75|     return {
    76|       allAssetKeys: repoFilteredNodes.map((n) => n.assetKey),
    77|       graphAssetKeys: all.map((n) => ({path: n.node.assetKey.path})),
    78|       assetGraphData,
    79|       graphQueryItems,
    80|     };
    81|   }, [repoFilteredNodes, graphQueryItems, opsQuery, options.hideEdgesToNodesOutsideQuery]);
    82|   return {
    83|     fetchResult,
    84|     assetGraphData,
    85|     fullAssetGraphData,
    86|     graphQueryItems,
    87|     graphAssetKeys,
    88|     allAssetKeys,
    89|   };
    90| }
    91| type AssetNode = AssetNodeForGraphQueryFragment;
    92| const buildGraphQueryItems = (nodes: AssetNode[]) => {
    93|   const items: {[name: string]: AssetGraphQueryItem} = {};
    94|   for (const node of nodes) {
    95|     const name = tokenForAssetKey(node.assetKey);
    96|     items[name] = {
    97|       node,
    98|       name,
    99|       inputs: node.dependencyKeys.map((key) => ({
   100|         dependsOn: [{solid: {name: tokenForAssetKey(key)}}],
   101|       })),


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AllIndividualEventsButton.tsx
# Total hunks: 5
# ====================================================================
# --- HUNK 1: Lines 1-31 ---
     1| import {
     2|   Box,
     3|   Button,
     4|   Colors,
     5|   DialogFooter,
     6|   Dialog,
     7|   Group,
     8|   Icon,
     9|   IconWrapper,
    10|   Table,
    11|   Mono,
    12| } from '@dagster-io/ui-components';
    13| import dayjs from 'dayjs';
    14| import * as React from 'react';
    15| import {Link} from 'react-router-dom';
    16| import styled from 'styled-components';
    17| import {Timestamp} from '../app/time/Timestamp';
    18| import {isHiddenAssetGroupJob} from '../asset-graph/Utils';
    19| import {MetadataEntry} from '../metadata/MetadataEntry';
    20| import {PipelineReference} from '../pipelines/PipelineReference';
    21| import {RunStatusWithStats} from '../runs/RunStatusDots';
    22| import {linkToRunEvent, titleForRun} from '../runs/RunUtils';
    23| import {isThisThingAJob, useRepository} from '../workspace/WorkspaceContext';
    24| import {buildRepoAddress} from '../workspace/buildRepoAddress';
    25| import {AssetLineageElements} from './AssetLineageElements';
    26| import {AssetEventGroup} from './groupByPartition';
    27| import {
    28|   AssetMaterializationFragment,
    29|   AssetObservationFragment,
    30| } from './types/useRecentAssetEvents.types';
    31| interface AssetEventsTableProps {

# --- HUNK 2: Lines 62-121 ---
    62|                 }
    63|                 setFocused?.(focused !== group ? group : undefined);
    64|               }}
    65|             >
    66|               <EventGroupRow
    67|                 group={group}
    68|                 hasPartitions={hasPartitions}
    69|                 hasLineage={hasLineage}
    70|                 isFocused={focused === group}
    71|               />
    72|             </HoverableRow>
    73|             {focused === group ? (
    74|               <MetadataEntriesRow hasLineage={hasLineage} group={group} />
    75|             ) : undefined}
    76|           </React.Fragment>
    77|         ))}
    78|       </tbody>
    79|     </Table>
    80|   );
    81| };
    82| const NoneSpan = () => <span style={{color: Colors.Gray400}}>None</span>;
    83| interface MetadataEntriesRowProps {
    84|   group: AssetEventGroup;
    85|   hasLineage: boolean;
    86| }
    87| const MetadataEntriesRow = React.memo(({group, hasLineage}: MetadataEntriesRowProps) => {
    88|   const {latest, timestamp} = group;
    89|   if (!latest) {
    90|     return <tr></tr>;
    91|   }
    92|   const assetLineage = latest.__typename === 'MaterializationEvent' ? latest.assetLineage : [];
    93|   const observationsAboutLatest =
    94|     latest.__typename === 'MaterializationEvent'
    95|       ? group.all.filter(
    96|           (e) =>
    97|             e.__typename === 'ObservationEvent' && Number(e.timestamp) > Number(latest.timestamp),
    98|         )
    99|       : [];
   100|   return (
   101|     <tr style={{background: Colors.Gray50}}>
   102|       <td colSpan={6} style={{fontSize: 14, padding: 0}}>
   103|         {latest.description && (
   104|           <Box padding={{horizontal: 24, vertical: 12}}>{latest.description}</Box>
   105|         )}
   106|         {latest.metadataEntries.length || hasLineage ? (
   107|           <DetailsTable>
   108|             <tbody>
   109|               {latest.metadataEntries.map((entry) => (
   110|                 <tr key={`metadata-${entry.label}`}>
   111|                   <td style={{maxWidth: 300}}>{entry.label}</td>
   112|                   <td>
   113|                     <MetadataEntry entry={entry} expandSmallValues={true} />
   114|                   </td>
   115|                   <td style={{opacity: 0.7}}>{entry.description}</td>
   116|                 </tr>
   117|               ))}
   118|               {observationsAboutLatest.map((obs) => (
   119|                 <React.Fragment key={obs.timestamp}>
   120|                   {obs.metadataEntries.map((entry) => (
   121|                     <tr key={`metadata-${obs.timestamp}-${entry.label}`}>

# --- HUNK 3: Lines 153-278 ---
   153|               ) : null}
   154|             </tbody>
   155|           </DetailsTable>
   156|         ) : (
   157|           <Box padding={{horizontal: 24, vertical: 12}}>No materialization event metadata</Box>
   158|         )}
   159|       </td>
   160|     </tr>
   161|   );
   162| });
   163| interface EventGroupRowProps {
   164|   group: AssetEventGroup;
   165|   hasPartitions: boolean;
   166|   hasLineage: boolean;
   167|   isFocused: boolean;
   168| }
   169| const EventGroupRow = React.memo((props: EventGroupRowProps) => {
   170|   const {group, hasPartitions, hasLineage, isFocused} = props;
   171|   const {latest, partition, timestamp, all} = group;
   172|   const focusCss = isFocused
   173|     ? {paddingLeft: 4, borderLeft: `4px solid ${Colors.HighlightGreen}`}
   174|     : {paddingLeft: 8};
   175|   const run = latest?.runOrError.__typename === 'Run' ? latest.runOrError : undefined;
   176|   const repositoryOrigin = run?.repositoryOrigin;
   177|   const repoAddress = repositoryOrigin
   178|     ? buildRepoAddress(repositoryOrigin.repositoryName, repositoryOrigin.repositoryLocationName)
   179|     : null;
   180|   const repo = useRepository(repoAddress);
   181|   if (!latest) {
   182|     return (
   183|       <>
   184|         <td style={{whiteSpace: 'nowrap', paddingLeft: 24}}>{partition || <NoneSpan />}</td>
   185|         <td colSpan={3} />
   186|       </>
   187|     );
   188|   }
   189|   if (!run) {
   190|     return <span />;
   191|   }
   192|   return (
   193|     <>
   194|       {hasPartitions && (
   195|         <td style={{whiteSpace: 'nowrap', ...focusCss}}>
   196|           <Group direction="row" spacing={2}>
   197|             <DisclosureTriangle open={isFocused} />
   198|             {partition || <NoneSpan />}
   199|           </Group>
   200|         </td>
   201|       )}
   202|       <td style={hasPartitions ? {} : focusCss}>
   203|         <Group direction="row" spacing={4}>
   204|           {!hasPartitions && <DisclosureTriangle open={isFocused} />}
   205|           <Group direction="column" spacing={4}>
   206|             <Timestamp timestamp={{ms: Number(timestamp)}} />
   207|             {all?.length > 1 ? (
   208|               <AllIndividualEventsButton
   209|                 hasPartitions={hasPartitions}
   210|                 hasLineage={hasLineage}
   211|                 events={all}
   212|               >{`View ${all.length} events`}</AllIndividualEventsButton>
   213|             ) : latest.__typename === 'MaterializationEvent' ? (
   214|               <Box flex={{gap: 8, alignItems: 'center'}} style={{color: Colors.Gray600}}>
   215|                 <Icon name="materialization" size={16} color={Colors.Gray600} />
   216|                 Materialization
   217|               </Box>
   218|             ) : (
   219|               <Box flex={{gap: 8, alignItems: 'center'}} style={{color: Colors.Gray600}}>
   220|                 <Icon name="observation" size={16} color={Colors.Gray600} /> Observation
   221|               </Box>
   222|             )}
   223|           </Group>
   224|         </Group>
   225|       </td>
   226|       <td>
   227|         {!isHiddenAssetGroupJob(run.pipelineName) && (
   228|           <Box margin={{bottom: 4}}>
   229|             <Box padding={{left: 8}}>
   230|               <PipelineReference
   231|                 showIcon
   232|                 pipelineName={run.pipelineName}
   233|                 pipelineHrefContext={repoAddress || 'repo-unknown'}
   234|                 snapshotId={run.pipelineSnapshotId}
   235|                 isJob={isThisThingAJob(repo, run.pipelineName)}
   236|               />
   237|             </Box>
   238|             <Group direction="row" padding={{left: 8}} spacing={8} alignItems="center">
   239|               <Icon name="linear_scale" color={Colors.Gray400} />
   240|               <Link to={linkToRunEvent(run, latest)}>{latest.stepKey}</Link>
   241|             </Group>
   242|           </Box>
   243|         )}
   244|       </td>
   245|       <td>
   246|         <Box flex={{direction: 'row', gap: 8, alignItems: 'center'}}>
   247|           <RunStatusWithStats runId={run.id} status={run.status} />
   248|           <Link to={`/runs/${run.id}?timestamp=${timestamp}`}>
   249|             <Mono>{titleForRun(run)}</Mono>
   250|           </Link>
   251|         </Box>
   252|       </td>
   253|     </>
   254|   );
   255| });
   256| const HoverableRow = styled.tr`
   257|   &:hover {
   258|     background: ${Colors.Gray10};
   259|   }
   260| `;
   261| const DetailsTable = styled.table`
   262|   width: 100%;
   263|   margin: -2px -2px -3px;
   264|   tr td {
   265|     font-size: 14px;
   266|   }
   267| `;
   268| interface PredecessorDialogProps {
   269|   hasLineage: boolean;
   270|   hasPartitions: boolean;
   271|   events: (AssetMaterializationFragment | AssetObservationFragment)[];
   272| }
   273| export const AllIndividualEventsButton = ({
   274|   disabled,
   275|   hasLineage,
   276|   hasPartitions,
   277|   events,
   278|   children,

# --- HUNK 4: Lines 337-361 ---
   337| const DisclosureTriangle = ({open, onClick}: {open: boolean; onClick?: () => void}) => (
   338|   <DisclosureTriangleButton onClick={onClick} $open={open}>
   339|     <Icon name="arrow_drop_down" size={24} />
   340|   </DisclosureTriangleButton>
   341| );
   342| const DisclosureTriangleButton = styled.button<{$open: boolean}>`
   343|   padding: 4px;
   344|   margin: -4px;
   345|   cursor: pointer;
   346|   border: 0;
   347|   background: transparent;
   348|   outline: none;
   349|   ${IconWrapper} {
   350|     margin: -2px -5px;
   351|     transform: ${({$open}) => ($open ? 'rotate(0deg)' : 'rotate(-90deg)')};
   352|     opacity: 0.25;
   353|   }
   354|   :focus {
   355|     outline: none;
   356|     ${IconWrapper} {
   357|       background: ${Colors.Dark};
   358|       opacity: 0.5;
   359|     }
   360|   }
   361| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetDefinedInMultipleReposNotice.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-22 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {Alert, Box, ButtonLink, Colors} from '@dagster-io/ui-components';
     3| import React from 'react';
     4| import {showCustomAlert} from '../app/CustomAlertProvider';
     5| import {displayNameForAssetKey} from '../asset-graph/Utils';
     6| import {buildRepoPathForHuman} from '../workspace/buildRepoAddress';
     7| import {repoAddressAsHumanString} from '../workspace/repoAddressAsString';
     8| import {RepoAddress} from '../workspace/types';
     9| import {AssetKey} from './types';
    10| import {
    11|   AssetDefinitionCollisionQuery,
    12|   AssetDefinitionCollisionQueryVariables,
    13| } from './types/AssetDefinedInMultipleReposNotice.types';
    14| export const MULTIPLE_DEFINITIONS_WARNING = 'Multiple asset definitions found';
    15| export const AssetDefinedInMultipleReposNotice = ({
    16|   assetKey,
    17|   loadedFromRepo,
    18|   padded,
    19| }: {
    20|   assetKey: AssetKey;
    21|   loadedFromRepo: RepoAddress;
    22|   padded?: boolean;

# --- HUNK 2: Lines 29-69 ---
    29|   );
    30|   const collision = data?.assetNodeDefinitionCollisions[0];
    31|   if (!collision) {
    32|     return <span />;
    33|   }
    34|   const allReposWithAsset = collision.repositories.map((r) =>
    35|     repoAddressAsHumanString({name: r.name, location: r.location.name}),
    36|   );
    37|   return (
    38|     <Box padding={padded ? {vertical: 16, left: 24, right: 12} : {}} border="bottom">
    39|       <Alert
    40|         intent="warning"
    41|         title={MULTIPLE_DEFINITIONS_WARNING}
    42|         description={
    43|           <>
    44|             This asset was loaded from{' '}
    45|             {buildRepoPathForHuman(loadedFromRepo.name, loadedFromRepo.location)}, but duplicate
    46|             definitions were found in{' '}
    47|             <ButtonLink
    48|               underline="always"
    49|               color={Colors.Yellow700}
    50|               onClick={() =>
    51|                 showCustomAlert({
    52|                   title: MULTIPLE_DEFINITIONS_WARNING,
    53|                   body: (
    54|                     <>
    55|                       Code locations containing an asset definition for{' '}
    56|                       <strong>{displayNameForAssetKey(assetKey)}</strong>:
    57|                       <ul>
    58|                         {allReposWithAsset.map((addr) => (
    59|                           <li key={addr}>{addr}</li>
    60|                         ))}
    61|                       </ul>
    62|                     </>
    63|                   ),
    64|                 })
    65|               }
    66|             >
    67|               {allReposWithAsset.length - 1} other repo{allReposWithAsset.length === 2 ? '' : 's'}
    68|             </ButtonLink>
    69|             . You should rename these assets to avoid collisions.


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetEventDetail.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {Box, Colors, Group, Heading, Icon, Mono, Subheading} from '@dagster-io/ui-components';
     2| import React from 'react';
     3| import {Link} from 'react-router-dom';
     4| import {Timestamp} from '../app/time/Timestamp';
     5| import {isHiddenAssetGroupJob} from '../asset-graph/Utils';
     6| import {AssetKeyInput} from '../graphql/types';
     7| import {Description} from '../pipelines/Description';
     8| import {PipelineReference} from '../pipelines/PipelineReference';
     9| import {RunStatusWithStats} from '../runs/RunStatusDots';
    10| import {titleForRun, linkToRunEvent} from '../runs/RunUtils';
    11| import {isThisThingAJob, useRepository} from '../workspace/WorkspaceContext';
    12| import {buildRepoAddress} from '../workspace/buildRepoAddress';
    13| import {AssetEventMetadataEntriesTable} from './AssetEventMetadataEntriesTable';
    14| import {AssetEventSystemTags} from './AssetEventSystemTags';
    15| import {AssetLineageElements} from './AssetLineageElements';
    16| import {AssetMaterializationUpstreamData} from './AssetMaterializationUpstreamData';
    17| import {RunlessEventTag} from './RunlessEventTag';
    18| import {isRunlessEvent} from './isRunlessEvent';
    19| import {
    20|   AssetMaterializationFragment,
    21|   AssetObservationFragment,

# --- HUNK 2: Lines 77-117 ---
    77|               </Link>
    78|             </Box>
    79|           ) : (
    80|             ''
    81|           )}
    82|         </Box>
    83|         <Box flex={{gap: 4, direction: 'column'}}>
    84|           <Subheading>Job</Subheading>
    85|           {run && !isHiddenAssetGroupJob(run.pipelineName) ? (
    86|             <Box>
    87|               <Box>
    88|                 <PipelineReference
    89|                   showIcon
    90|                   pipelineName={run.pipelineName}
    91|                   pipelineHrefContext={repoAddress || 'repo-unknown'}
    92|                   snapshotId={run.pipelineSnapshotId}
    93|                   isJob={isThisThingAJob(repo, run.pipelineName)}
    94|                 />
    95|               </Box>
    96|               <Group direction="row" spacing={8} alignItems="center">
    97|                 <Icon name="linear_scale" color={Colors.Gray400} />
    98|                 <Link to={linkToRunEvent(run, event)}>{event.stepKey}</Link>
    99|               </Group>
   100|             </Box>
   101|           ) : (
   102|             ''
   103|           )}
   104|         </Box>
   105|       </Box>
   106|       {event.description && (
   107|         <Box padding={{top: 24}} flex={{direction: 'column', gap: 8}}>
   108|           <Subheading>Description</Subheading>
   109|           <Description description={event.description} />
   110|         </Box>
   111|       )}
   112|       <Box padding={{top: 24}} flex={{direction: 'column', gap: 8}}>
   113|         <Subheading>Metadata</Subheading>
   114|         <AssetEventMetadataEntriesTable event={event} />
   115|       </Box>
   116|       {event.__typename === 'MaterializationEvent' && (
   117|         <Box padding={{top: 24}} flex={{direction: 'column', gap: 8}}>

# --- HUNK 3: Lines 122-162 ---
   122|       <Box padding={{top: 24}} flex={{direction: 'column', gap: 8}}>
   123|         <Subheading>System tags</Subheading>
   124|         <AssetEventSystemTags event={event} collapsible />
   125|       </Box>
   126|       {assetLineage.length > 0 && (
   127|         <Box padding={{top: 24}} flex={{direction: 'column', gap: 8}}>
   128|           <Subheading>Parent materializations</Subheading>
   129|           <AssetLineageElements elements={assetLineage} timestamp={event.timestamp} />
   130|         </Box>
   131|       )}
   132|     </Box>
   133|   );
   134| };
   135| export const AssetEventDetailEmpty = () => (
   136|   <Box padding={{horizontal: 24}} style={{flex: 1}}>
   137|     <Box
   138|       padding={{vertical: 24}}
   139|       border="bottom"
   140|       flex={{alignItems: 'center', justifyContent: 'space-between'}}
   141|     >
   142|       <Heading color={Colors.Gray400}>No event selected</Heading>
   143|     </Box>
   144|     <Box
   145|       style={{display: 'grid', gridTemplateColumns: '1fr 1fr 1fr 1fr', gap: 16}}
   146|       border="bottom"
   147|       padding={{vertical: 16}}
   148|     >
   149|       <Box flex={{gap: 4, direction: 'column'}}>
   150|         <Subheading>Event</Subheading>
   151|       </Box>
   152|       <Box flex={{gap: 4, direction: 'column'}} style={{minHeight: 64}}>
   153|         <Subheading>Run</Subheading>
   154|       </Box>
   155|       <Box flex={{gap: 4, direction: 'column'}}>
   156|         <Subheading>Job</Subheading>
   157|       </Box>
   158|     </Box>
   159|     <Box padding={{top: 24}} flex={{direction: 'column', gap: 8}}>
   160|       <Subheading>Metadata</Subheading>
   161|       <AssetEventMetadataEntriesTable event={null} />
   162|     </Box>


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetEventList.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {Box, Caption, Colors, Icon, Tag} from '@dagster-io/ui-components';
     2| import {useVirtualizer} from '@tanstack/react-virtual';
     3| import * as React from 'react';
     4| import styled from 'styled-components';
     5| import {Timestamp} from '../app/time/Timestamp';
     6| import {AssetRunLink} from '../asset-graph/AssetRunLinking';
     7| import {AssetKeyInput} from '../graphql/types';
     8| import {RunStatusWithStats} from '../runs/RunStatusDots';
     9| import {titleForRun} from '../runs/RunUtils';
    10| import {Container, Inner, Row} from '../ui/VirtualizedTable';
    11| import {RunlessEventTag} from './RunlessEventTag';
    12| import {AssetEventGroup} from './groupByPartition';
    13| import {isRunlessEvent} from './isRunlessEvent';
    14| export const AssetEventList = ({
    15|   groups,
    16|   focused,
    17|   setFocused,
    18|   xAxis,
    19|   assetKey,
    20| }: {
    21|   xAxis: 'time' | 'partition';

# --- HUNK 2: Lines 66-137 ---
    66|                 padding={{left: 24, right: 12}}
    67|                 flex={{direction: 'column', justifyContent: 'center', gap: 8}}
    68|                 border="bottom"
    69|               >
    70|                 {xAxis === 'partition' ? (
    71|                   <AssetEventListPartitionRow group={group} />
    72|                 ) : (
    73|                   <AssetEventListEventRow group={group} assetKey={assetKey} />
    74|                 )}
    75|               </Box>
    76|             </AssetListRow>
    77|           );
    78|         })}
    79|       </Inner>
    80|     </AssetListContainer>
    81|   );
    82| };
    83| export const AssetListContainer = styled(Container)`
    84|   outline: none;
    85|   &:focus {
    86|     box-shadow: 0 -1px ${Colors.Blue500};
    87|   }
    88| `;
    89| export const AssetListRow = styled(Row)<{$focused: boolean}>`
    90|   cursor: pointer;
    91|   user-select: none;
    92|   :focus,
    93|   :active,
    94|   :hover {
    95|     outline: none;
    96|     background: ${Colors.Gray100};
    97|   }
    98|   ${(p) =>
    99|     p.$focused &&
   100|     `background: ${Colors.Blue50};
   101|      color: ${Colors.Blue700};
   102|      :hover {
   103|        background: ${Colors.Blue50};
   104|      }
   105|     `}
   106| `;
   107| const AssetEventListPartitionRow = ({group}: {group: AssetEventGroup}) => {
   108|   const {partition, latest, timestamp} = group;
   109|   return (
   110|     <>
   111|       <Box flex={{gap: 4, direction: 'row', alignItems: 'flex-start'}}>
   112|         <Icon name="partition" />
   113|         {partition}
   114|         <div style={{flex: 1}} />
   115|         {!latest ? <Tag intent="none">Missing</Tag> : <Tag intent="success">Materialized</Tag>}
   116|       </Box>
   117|       <Caption color={Colors.Gray600} style={{userSelect: 'none'}}>
   118|         {timestamp ? (
   119|           <span>
   120|             Materialized <Timestamp timestamp={{ms: Number(timestamp)}} />
   121|           </span>
   122|         ) : (
   123|           'Never materialized'
   124|         )}
   125|       </Caption>
   126|     </>
   127|   );
   128| };
   129| const AssetEventListEventRow = ({
   130|   group,
   131|   assetKey,
   132| }: {
   133|   group: AssetEventGroup;
   134|   assetKey: AssetKeyInput;
   135| }) => {
   136|   const {latest, partition, timestamp} = group;
   137|   const run = latest?.runOrError.__typename === 'Run' ? latest.runOrError : null;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetEventMetadataEntriesTable.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-45 ---
     1| import {Box, Caption, Colors, Mono} from '@dagster-io/ui-components';
     2| import dayjs from 'dayjs';
     3| import uniqBy from 'lodash/uniqBy';
     4| import React from 'react';
     5| import {Link} from 'react-router-dom';
     6| import styled from 'styled-components';
     7| import {MetadataEntry} from '../metadata/MetadataEntry';
     8| import {titleForRun} from '../runs/RunUtils';
     9| import {
    10|   AssetObservationFragment,
    11|   AssetMaterializationFragment,
    12| } from './types/useRecentAssetEvents.types';
    13| /**
    14|  * This component shows the metadata entries attached to an Asset Materialization or Observation event.
    15|  * AssetNodes also have definition-time metadata, which is unrelated to this event metadata.
    16|  */
    17| export const AssetEventMetadataEntriesTable = ({
    18|   event,
    19|   observations,
    20| }: {
    21|   event: AssetObservationFragment | AssetMaterializationFragment | null;
    22|   observations?: (AssetObservationFragment | AssetMaterializationFragment)[];
    23| }) => {
    24|   if (!event || (!event.metadataEntries.length && !observations?.length)) {
    25|     return <Caption color={Colors.Gray500}>No metadata entries</Caption>;
    26|   }
    27|   const {metadataEntries, timestamp} = event;
    28|   const observationEntries = uniqBy(
    29|     (observations || []).flatMap((o) =>
    30|       o.metadataEntries.map((entry) => ({timestamp: o.timestamp, runId: o.runId, entry})),
    31|     ),
    32|     (e) => e.entry.label,
    33|   );
    34|   return (
    35|     <AssetEventMetadataScrollContainer>
    36|       <AssetEventMetadataTable>
    37|         <tbody>
    38|           {metadataEntries.map((entry) => (
    39|             <tr key={`metadata-${entry.label}`}>
    40|               <td>
    41|                 <Mono>{entry.label}</Mono>
    42|               </td>
    43|               <td>
    44|                 <Mono>
    45|                   <MetadataEntry entry={entry} expandSmallValues={true} />

# --- HUNK 2: Lines 77-102 ---
    77|           ))}
    78|         </tbody>
    79|       </AssetEventMetadataTable>
    80|     </AssetEventMetadataScrollContainer>
    81|   );
    82| };
    83| const AssetEventMetadataScrollContainer = styled.div`
    84|   width: 100%;
    85|   overflow-x: auto;
    86| `;
    87| const AssetEventMetadataTable = styled.table`
    88|   width: 100%;
    89|   border-spacing: 0;
    90|   border-collapse: collapse;
    91|   tr td:first-child {
    92|     max-width: 300px;
    93|     word-wrap: break-word;
    94|     width: 25%;
    95|   }
    96|   tr td {
    97|     border: 1px solid ${Colors.KeylineGray};
    98|     padding: 8px 12px;
    99|     font-size: 14px;
   100|     vertical-align: top;
   101|   }
   102| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetEventSystemTags.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {Box, ButtonLink, Caption, Colors, Icon, Mono} from '@dagster-io/ui-components';
     2| import React from 'react';
     3| import styled from 'styled-components';
     4| import {useStateWithStorage} from '../hooks/useStateWithStorage';
     5| import {DagsterTag} from '../runs/RunTag';
     6| import {AssetEventGroup} from './groupByPartition';
     7| const ORDER = [
     8|   DagsterTag.AssetEventDataVersion.valueOf(),
     9|   DagsterTag.AssetEventDataVersionDeprecated.valueOf(),
    10|   DagsterTag.AssetEventCodeVersion.valueOf(),
    11| ];
    12| export const AssetEventSystemTags = ({
    13|   event,
    14|   paddingLeft,
    15|   collapsible,
    16| }: {
    17|   event: AssetEventGroup['latest'] | null;
    18|   paddingLeft?: number;
    19|   collapsible?: boolean;
    20| }) => {
    21|   const [shown, setShown] = useStateWithStorage('show-asset-system-tags', Boolean);

# --- HUNK 2: Lines 59-84 ---
    59|             <Box flex={{alignItems: 'center'}}>
    60|               <span>Hide tags</span>
    61|               <Icon name="arrow_drop_down" style={{transform: 'rotate(180deg)'}} />
    62|             </Box>
    63|           </ButtonLink>
    64|         </Caption>
    65|       )}
    66|     </>
    67|   );
    68| };
    69| const AssetEventSystemTagsTable = styled.table`
    70|   width: 100%;
    71|   border-spacing: 0;
    72|   border-collapse: collapse;
    73|   tr td:first-child {
    74|     max-width: 300px;
    75|     word-wrap: break-word;
    76|     width: 25%;
    77|   }
    78|   tr td {
    79|     border: 1px solid ${Colors.KeylineGray};
    80|     padding: 8px 12px;
    81|     font-size: 14px;
    82|     vertical-align: top;
    83|   }
    84| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetEvents.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-33 ---
     1| import {
     2|   Box,
     3|   ButtonGroup,
     4|   Colors,
     5|   Spinner,
     6|   Subheading,
     7|   ErrorBoundary,
     8|   Checkbox,
     9|   Popover,
    10|   Menu,
    11|   MenuItem,
    12|   Button,
    13|   Icon,
    14| } from '@dagster-io/ui-components';
    15| import * as React from 'react';
    16| import {LiveDataForNode, stepKeyForAsset} from '../asset-graph/Utils';
    17| import {RepositorySelector} from '../graphql/types';
    18| import {useStateWithStorage} from '../hooks/useStateWithStorage';
    19| import {AssetEventDetail, AssetEventDetailEmpty} from './AssetEventDetail';
    20| import {AssetEventList} from './AssetEventList';
    21| import {AssetPartitionDetail, AssetPartitionDetailEmpty} from './AssetPartitionDetail';
    22| import {CurrentRunsBanner} from './CurrentRunsBanner';
    23| import {FailedRunSinceMaterializationBanner} from './FailedRunSinceMaterializationBanner';
    24| import {AssetEventGroup, useGroupedEvents} from './groupByPartition';
    25| import {AssetKey, AssetViewParams} from './types';
    26| import {AssetViewDefinitionNodeFragment} from './types/AssetView.types';
    27| import {useRecentAssetEvents} from './useRecentAssetEvents';
    28| interface Props {
    29|   assetKey: AssetKey;
    30|   assetNode: AssetViewDefinitionNodeFragment | null;
    31|   liveData?: LiveDataForNode;
    32|   params: AssetViewParams;
    33|   paramsTimeWindowOnly: boolean;

# --- HUNK 2: Lines 126-166 ---
   126|             stepKey={stepKeyForAsset(assetNode)}
   127|             border="bottom"
   128|             run={liveData?.runWhichFailedToMaterialize || null}
   129|           />
   130|           <CurrentRunsBanner
   131|             stepKey={stepKeyForAsset(assetNode)}
   132|             border="bottom"
   133|             liveData={liveData}
   134|           />
   135|         </>
   136|       )}
   137|       <Box
   138|         style={{flex: 1, minHeight: 0, outline: 'none'}}
   139|         flex={{direction: 'row'}}
   140|         onKeyDown={onKeyDown}
   141|         tabIndex={-1}
   142|       >
   143|         <Box
   144|           style={{display: 'flex', flex: 1, minWidth: 200}}
   145|           flex={{direction: 'column'}}
   146|           background={Colors.Gray50}
   147|         >
   148|           {hideFilters ? undefined : (
   149|             <Box
   150|               flex={{alignItems: 'center', gap: 16}}
   151|               padding={{vertical: 12, horizontal: 24}}
   152|               border="bottom"
   153|             >
   154|               <EventTypeSelect
   155|                 value={filters.types}
   156|                 onChange={(types) => setFilters({...filters, types})}
   157|               />
   158|             </Box>
   159|           )}
   160|           {loading ? (
   161|             <Box flex={{alignItems: 'center', justifyContent: 'center'}} style={{flex: 1}}>
   162|               <Spinner purpose="section" />
   163|             </Box>
   164|           ) : (
   165|             <AssetEventList
   166|               xAxis={xAxis}


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetLink.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-37 ---
     1| import {Box, Colors, Icon, MiddleTruncate} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import {Link} from 'react-router-dom';
     4| import {assetDetailsPathForKey} from './assetDetailsPathForKey';
     5| export const AssetLink = (props: {
     6|   path: string[];
     7|   icon?: 'asset' | 'asset_non_sda' | 'folder';
     8|   textStyle?: 'break-word' | 'middle-truncate';
     9|   url?: string;
    10|   isGroup?: boolean;
    11| }) => {
    12|   const {path, icon, url, isGroup, textStyle = 'break-word'} = props;
    13|   const linkUrl = url ? url : assetDetailsPathForKey({path});
    14|   const assetPath =
    15|     path
    16|       .reduce((accum, elem, ii) => [...accum, ii > 0 ? ' / ' : '', elem], [] as string[])
    17|       .join('') + (isGroup ? '/' : '');
    18|   return (
    19|     <Box
    20|       flex={{direction: 'row', alignItems: 'flex-start', display: 'inline-flex'}}
    21|       style={{maxWidth: '100%'}}
    22|     >
    23|       {icon ? (
    24|         <Box margin={{right: 8, top: 2}}>
    25|           <Icon name={icon} color={Colors.Gray400} />
    26|         </Box>
    27|       ) : null}
    28|       <Link to={linkUrl} style={{overflow: 'hidden'}}>
    29|         {textStyle === 'break-word' ? (
    30|           <span style={{wordBreak: 'break-word'}}>{assetPath}</span>
    31|         ) : (
    32|           <MiddleTruncate text={assetPath} />
    33|         )}
    34|       </Link>
    35|     </Box>
    36|   );
    37| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetMaterializationGraphs.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-27 ---
     1| import {
     2|   Box,
     3|   Colors,
     4|   NonIdealState,
     5|   Caption,
     6|   Subheading,
     7|   ExternalAnchorButton,
     8| } from '@dagster-io/ui-components';
     9| import flatMap from 'lodash/flatMap';
    10| import uniq from 'lodash/uniq';
    11| import * as React from 'react';
    12| import {AssetValueGraph, AssetValueGraphData} from './AssetValueGraph';
    13| import {AssetEventGroup} from './groupByPartition';
    14| export const AssetMaterializationGraphs = (props: {
    15|   groups: AssetEventGroup[];
    16|   xAxis: 'partition' | 'time';
    17|   asSidebarSection?: boolean;
    18|   columnCount?: number;
    19| }) => {
    20|   const [xHover, setXHover] = React.useState<string | number | null>(null);
    21|   const reversed = React.useMemo(() => {
    22|     return [...props.groups].reverse();
    23|   }, [props.groups]);
    24|   const graphDataByMetadataLabel = extractNumericData(reversed, props.xAxis);
    25|   const graphLabels = Object.keys(graphDataByMetadataLabel).slice(0, 20).sort();
    26|   if (process.env.NODE_ENV === 'test') {
    27|     return <span />; // chartjs and our useViewport hook don't play nicely with jest

# --- HUNK 2: Lines 51-112 ---
    51|                   <Subheading>{label}</Subheading>
    52|                 </Box>
    53|               )}
    54|               <Box padding={{horizontal: 24, vertical: 16}}>
    55|                 <AssetValueGraph
    56|                   label={label}
    57|                   width="100%"
    58|                   data={graphDataByMetadataLabel[label]!}
    59|                   xHover={xHover}
    60|                   onHoverX={(x) => x !== xHover && setXHover(x)}
    61|                 />
    62|               </Box>
    63|             </Box>
    64|           </Box>
    65|         ))}
    66|       </div>
    67|       {graphLabels.length === 0 ? (
    68|         props.asSidebarSection ? (
    69|           <Box
    70|             margin={{horizontal: 24, vertical: 12}}
    71|             style={{color: Colors.Gray500, fontSize: '0.8rem'}}
    72|           >
    73|             No numeric metadata entries available to be graphed.
    74|           </Box>
    75|         ) : (
    76|           <Box padding={{horizontal: 24, top: 64}}>
    77|             <NonIdealState
    78|               shrinkable
    79|               icon="asset_plot"
    80|               title="Asset plots are automatically generated by metadata"
    81|               description="Include numeric metadata entries in your materializations and observations to see data graphed by time or partition."
    82|               action={
    83|                 <ExternalAnchorButton href="https://docs.dagster.io/concepts/assets/software-defined-assets#recording-materialization-metadata">
    84|                   View documentation
    85|                 </ExternalAnchorButton>
    86|               }
    87|             />
    88|           </Box>
    89|         )
    90|       ) : (
    91|         props.xAxis === 'partition' && (
    92|           <Box padding={{vertical: 16, horizontal: 24}} style={{color: Colors.Gray400}}>
    93|             When graphing values by partition, the highest data point for each materialized event
    94|             label is displayed.
    95|           </Box>
    96|         )
    97|       )}
    98|     </>
    99|   );
   100| };
   101| /**
   102|  * Helper function that iterates over the asset materializations and assembles time series data
   103|  * and stats for all numeric metadata entries. This function makes the following guaruntees:
   104|  *
   105|  * - If a metadata entry is sparsely emitted, points are still included for missing x values
   106|  *   with y = NaN. (For compatiblity with react-chartjs-2)
   107|  * - If a metadata entry is generated many times for the same partition, and xAxis = partition,
   108|  *   the MAX value emitted is used as the data point.
   109|  *
   110|  * Assumes that the data is pre-sorted in ascending partition order if using xAxis = partition.
   111|  */
   112| const extractNumericData = (datapoints: AssetEventGroup[], xAxis: 'time' | 'partition') => {


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetMaterializationUpstreamData.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-22 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {Box, Caption, Colors, Icon, MiddleTruncate} from '@dagster-io/ui-components';
     3| import dayjs from 'dayjs';
     4| import relativeTime from 'dayjs/plugin/relativeTime';
     5| import React from 'react';
     6| import {Link} from 'react-router-dom';
     7| import styled from 'styled-components';
     8| import {Timestamp} from '../app/time/Timestamp';
     9| import {displayNameForAssetKey} from '../asset-graph/Utils';
    10| import {AssetKeyInput} from '../graphql/types';
    11| import {assetDetailsPathForKey} from './assetDetailsPathForKey';
    12| import {
    13|   AssetMaterializationUpstreamTableFragment,
    14|   AssetMaterializationUpstreamQuery,
    15|   AssetMaterializationUpstreamQueryVariables,
    16|   MaterializationUpstreamDataVersionFragment,
    17| } from './types/AssetMaterializationUpstreamData.types';
    18| dayjs.extend(relativeTime);
    19| export const AssetMaterializationUpstreamTable = ({
    20|   data,
    21|   assetKey,
    22|   maximumLagMinutes,

# --- HUNK 2: Lines 123-199 ---
   123|     downstreamAssetKey {
   124|       path
   125|     }
   126|   }
   127| `;
   128| export const AssetMaterializationUpstreamData = ({
   129|   assetKey,
   130|   timestamp = '',
   131| }: {
   132|   assetKey: AssetKeyInput;
   133|   timestamp?: string;
   134| }) => {
   135|   const result = useQuery<
   136|     AssetMaterializationUpstreamQuery,
   137|     AssetMaterializationUpstreamQueryVariables
   138|   >(ASSET_MATERIALIZATION_UPSTREAM_QUERY, {
   139|     variables: {assetKey: {path: assetKey.path}, timestamp},
   140|     skip: !timestamp,
   141|   });
   142|   if (!timestamp) {
   143|     return <Caption color={Colors.Gray500}>None</Caption>;
   144|   }
   145|   const data =
   146|     result.data?.assetNodeOrError.__typename === 'AssetNode'
   147|       ? result.data.assetNodeOrError
   148|       : undefined;
   149|   return (
   150|     <AssetMaterializationUpstreamTable
   151|       relativeTo={Number(timestamp)}
   152|       assetKey={assetKey}
   153|       data={data}
   154|     />
   155|   );
   156| };
   157| export const TimeSinceWithOverdueColor = ({
   158|   timestamp,
   159|   maximumLagMinutes,
   160|   relativeTo = Date.now(),
   161| }: {
   162|   timestamp: number;
   163|   maximumLagMinutes?: number;
   164|   relativeTo?: number | 'now';
   165| }) => {
   166|   const lagMinutes = ((relativeTo === 'now' ? Date.now() : relativeTo) - timestamp) / (60 * 1000);
   167|   const isOverdue = maximumLagMinutes && lagMinutes > maximumLagMinutes;
   168|   return relativeTo === 'now' ? (
   169|     <span style={{color: isOverdue ? Colors.Red700 : Colors.Gray700}}>
   170|       ({dayjs(timestamp).fromNow()})
   171|     </span>
   172|   ) : (
   173|     <span style={{color: isOverdue ? Colors.Red700 : Colors.Gray700}}>
   174|       ({dayjs(Number(timestamp)).from(relativeTo, true)} earlier)
   175|     </span>
   176|   );
   177| };
   178| export const ASSET_MATERIALIZATION_UPSTREAM_QUERY = gql`
   179|   query AssetMaterializationUpstreamQuery($assetKey: AssetKeyInput!, $timestamp: String!) {
   180|     assetNodeOrError(assetKey: $assetKey) {
   181|       ... on AssetNode {
   182|         id
   183|         ...AssetMaterializationUpstreamTableFragment
   184|       }
   185|     }
   186|   }
   187|   ${ASSET_MATERIALIZATION_UPSTREAM_TABLE_FRAGMENT}
   188| `;
   189| const TableContainer = styled.table`
   190|   width: 100%;
   191|   border-spacing: 0;
   192|   border-collapse: collapse;
   193|   tr td {
   194|     border: 1px solid ${Colors.KeylineGray};
   195|     padding: 8px 12px;
   196|     font-size: 14px;
   197|     vertical-align: top;
   198|   }
   199| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetNodeDefinition.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-30 ---
     1| import {gql} from '@apollo/client';
     2| import {
     3|   Body,
     4|   Box,
     5|   Caption,
     6|   Colors,
     7|   ConfigTypeSchema,
     8|   Icon,
     9|   Mono,
    10|   Subheading,
    11| } from '@dagster-io/ui-components';
    12| import * as React from 'react';
    13| import {Link} from 'react-router-dom';
    14| import {COMMON_COLLATOR} from '../app/Util';
    15| import {ASSET_NODE_FRAGMENT} from '../asset-graph/AssetNode';
    16| import {isHiddenAssetGroupJob} from '../asset-graph/Utils';
    17| import {AssetNodeForGraphQueryFragment} from '../asset-graph/types/useAssetGraphData.types';
    18| import {DagsterTypeSummary} from '../dagstertype/DagsterType';
    19| import {Description} from '../pipelines/Description';
    20| import {PipelineReference} from '../pipelines/PipelineReference';
    21| import {ResourceContainer, ResourceHeader} from '../pipelines/SidebarOpHelpers';
    22| import {buildRepoAddress} from '../workspace/buildRepoAddress';
    23| import {RepoAddress} from '../workspace/types';
    24| import {workspacePathFromAddress} from '../workspace/workspacePath';
    25| import {ASSET_NODE_CONFIG_FRAGMENT} from './AssetConfig';
    26| import {AssetDefinedInMultipleReposNotice} from './AssetDefinedInMultipleReposNotice';
    27| import {
    28|   AssetMetadataTable,
    29|   ASSET_NODE_OP_METADATA_FRAGMENT,
    30|   metadataForAssetNode,

# --- HUNK 2: Lines 133-208 ---
   133|               </Box>
   134|               <Box
   135|                 padding={{vertical: 16, horizontal: 24}}
   136|                 flex={{gap: 12, alignItems: 'flex-start'}}
   137|               >
   138|                 <Body style={{flex: 1}}>{assetNode.backfillPolicy.description}</Body>
   139|               </Box>
   140|             </>
   141|           )}
   142|           <Box
   143|             padding={{vertical: 16, horizontal: 24}}
   144|             border="top-and-bottom"
   145|             flex={{justifyContent: 'space-between', gap: 8}}
   146|           >
   147|             <Subheading>
   148|               Upstream assets{upstream?.length ? ` (${upstream.length})` : ''}
   149|             </Subheading>
   150|             <Link to="?view=lineage&lineageScope=upstream">
   151|               <Box flex={{gap: 4, alignItems: 'center'}}>
   152|                 View upstream graph
   153|                 <Icon name="open_in_new" color={Colors.Link} />
   154|               </Box>
   155|             </Link>
   156|           </Box>
   157|           {dependsOnSelf && <DependsOnSelfBanner />}
   158|           <AssetNodeList items={upstream} />
   159|           <Box
   160|             padding={{vertical: 16, horizontal: 24}}
   161|             border="top-and-bottom"
   162|             flex={{justifyContent: 'space-between', gap: 8}}
   163|           >
   164|             <Subheading>
   165|               Downstream assets{downstream?.length ? ` (${downstream.length})` : ''}
   166|             </Subheading>
   167|             <Link to="?view=lineage&lineageScope=downstream">
   168|               <Box flex={{gap: 4, alignItems: 'center'}}>
   169|                 View downstream graph
   170|                 <Icon name="open_in_new" color={Colors.Link} />
   171|               </Box>
   172|             </Link>
   173|           </Box>
   174|           <AssetNodeList items={downstream} />
   175|           {/** Ensures the line between the left and right columns goes to the bottom of the page */}
   176|           <div style={{flex: 1}} />
   177|         </Box>
   178|         <Box border="left-and-right" style={{flex: 0.5, minWidth: 0}} flex={{direction: 'column'}}>
   179|           <>
   180|             <Box padding={{vertical: 16, horizontal: 24}} border="bottom">
   181|               <Subheading>Required resources</Subheading>
   182|             </Box>
   183|             <Box padding={{vertical: 16, horizontal: 24}} border="bottom">
   184|               {[...assetNode.requiredResources]
   185|                 .sort((a, b) => COMMON_COLLATOR.compare(a.resourceKey, b.resourceKey))
   186|                 .map((resource) => (
   187|                   <ResourceContainer key={resource.resourceKey}>
   188|                     <Icon name="resource" color={Colors.Gray700} />
   189|                     {repoAddress ? (
   190|                       <Link
   191|                         to={workspacePathFromAddress(
   192|                           repoAddress,
   193|                           `/resources/${resource.resourceKey}`,
   194|                         )}
   195|                       >
   196|                         <ResourceHeader>{resource.resourceKey}</ResourceHeader>
   197|                       </Link>
   198|                     ) : (
   199|                       <ResourceHeader>{resource.resourceKey}</ResourceHeader>
   200|                     )}
   201|                   </ResourceContainer>
   202|                 ))}
   203|               {assetNode.requiredResources.length === 0 && (
   204|                 <Body>
   205|                   No required resources to display
   206|                   <Box padding={{top: 4}}>
   207|                     <a href="https://docs.dagster.io/concepts/resources#using-software-defined-assets">
   208|                       View documentation


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetNodeLineage.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-28 ---
     1| import {
     2|   Box,
     3|   Button,
     4|   ButtonGroup,
     5|   Colors,
     6|   Icon,
     7|   JoinedButtons,
     8|   TextInput,
     9| } from '@dagster-io/ui-components';
    10| import * as React from 'react';
    11| import styled from 'styled-components';
    12| import {GraphData} from '../asset-graph/Utils';
    13| import {AssetGraphQueryItem, calculateGraphDistances} from '../asset-graph/useAssetGraphData';
    14| import {AssetKeyInput} from '../graphql/types';
    15| import {AssetNodeLineageGraph} from './AssetNodeLineageGraph';
    16| import {LaunchAssetExecutionButton} from './LaunchAssetExecutionButton';
    17| import {AssetLineageScope, AssetViewParams} from './types';
    18| export const AssetNodeLineage = ({
    19|   params,
    20|   setParams,
    21|   assetKey,
    22|   assetGraphData,
    23|   graphQueryItems,
    24|   requestedDepth,
    25| }: {
    26|   params: AssetViewParams;
    27|   setParams: (params: AssetViewParams) => void;
    28|   assetKey: AssetKeyInput;

# --- HUNK 2: Lines 71-113 ---
    71|             intent="none"
    72|             scope={{all: Object.values(assetGraphData.nodes).map((n) => n.definition)}}
    73|             showChangedAndMissingOption
    74|           />
    75|         ) : (
    76|           <Button icon={<Icon name="materialization" />} disabled>
    77|             Materialize all
    78|           </Button>
    79|         )}
    80|       </Box>
    81|       {currentDepth < maxDepth && (
    82|         <DepthHidesAssetsNotice>
    83|           Not all upstream/downstream assets shown. Increase the depth to show more.
    84|         </DepthHidesAssetsNotice>
    85|       )}
    86|       <AssetNodeLineageGraph assetKey={assetKey} assetGraphData={assetGraphData} params={params} />
    87|     </Box>
    88|   );
    89| };
    90| const DepthHidesAssetsNotice = styled.div`
    91|   background: ${Colors.Gray100};
    92|   border-radius: 8px;
    93|   color: ${Colors.Gray500};
    94|   align-items: center;
    95|   display: flex;
    96|   padding: 4px 8px;
    97|   gap: 4px;
    98|   position: absolute;
    99|   right: 12px;
   100|   top: 70px;
   101|   z-index: 2;
   102| `;
   103| const LineageDepthControl = ({
   104|   value,
   105|   max,
   106|   onChange,
   107| }: {
   108|   value: number;
   109|   max: number;
   110|   onChange: (v: number) => void;
   111| }) => {
   112|   const [text, setText] = React.useState(`${value}`);
   113|   React.useEffect(() => {

# --- HUNK 3: Lines 122-161 ---
   122|       Graph depth
   123|       <JoinedButtons>
   124|         <Button
   125|           disabled={value <= 1}
   126|           onClick={() => onChange(value - 1)}
   127|           icon={<Icon name="subtract" />}
   128|         />
   129|         <TextInput
   130|           min={1}
   131|           max={max}
   132|           disabled={max <= 1}
   133|           inputMode="numeric"
   134|           style={{
   135|             width: 40,
   136|             marginLeft: -1,
   137|             textAlign: 'center',
   138|             height: 32,
   139|             padding: 6,
   140|             borderRadius: 0,
   141|             boxShadow: 'none',
   142|             border: `1px solid ${Colors.Gray300}`,
   143|           }}
   144|           key={value}
   145|           value={text}
   146|           onChange={(e) => setText(e.target.value)}
   147|           onKeyDown={(e) => (e.key === 'Enter' || e.key === 'Return' ? commitText() : undefined)}
   148|           onBlur={() => commitText()}
   149|         />
   150|         <Button
   151|           disabled={value >= max}
   152|           onClick={() => onChange(value + 1)}
   153|           icon={<Icon name="add" />}
   154|         />
   155|         <Button disabled={value >= max} onClick={() => onChange(max)}>
   156|           All
   157|         </Button>
   158|       </JoinedButtons>
   159|     </Box>
   160|   );
   161| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetNodeLineageGraph.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-56 ---
     1| import {Box, Spinner} from '@dagster-io/ui-components';
     2| import uniq from 'lodash/uniq';
     3| import React from 'react';
     4| import {useHistory} from 'react-router-dom';
     5| import styled from 'styled-components';
     6| import {useFeatureFlags} from '../app/Flags';
     7| import {AssetEdges} from '../asset-graph/AssetEdges';
     8| import {MINIMAL_SCALE} from '../asset-graph/AssetGraphExplorer';
     9| import {AssetGroupNode} from '../asset-graph/AssetGroupNode';
    10| import {AssetNodeMinimal, AssetNode, AssetNodeContextMenuWrapper} from '../asset-graph/AssetNode';
    11| import {ExpandedGroupNode} from '../asset-graph/ExpandedGroupNode';
    12| import {AssetNodeLink} from '../asset-graph/ForeignNode';
    13| import {GraphData, groupIdForNode, toGraphId} from '../asset-graph/Utils';
    14| import {DEFAULT_MAX_ZOOM, SVGViewport} from '../graph/SVGViewport';
    15| import {useAssetLayout} from '../graph/asyncGraphLayout';
    16| import {isNodeOffscreen} from '../graph/common';
    17| import {AssetKeyInput} from '../graphql/types';
    18| import {getJSONForKey} from '../hooks/useStateWithStorage';
    19| import {assetDetailsPathForKey} from './assetDetailsPathForKey';
    20| import {AssetKey, AssetViewParams} from './types';
    21| const LINEAGE_GRAPH_ZOOM_LEVEL = 'lineageGraphZoomLevel';
    22| export const AssetNodeLineageGraph = ({
    23|   assetKey,
    24|   assetGraphData,
    25|   params,
    26| }: {
    27|   assetKey: AssetKeyInput;
    28|   assetGraphData: GraphData;
    29|   params: AssetViewParams;
    30| }) => {
    31|   const {flagDAGSidebar} = useFeatureFlags();
    32|   const assetGraphId = toGraphId(assetKey);
    33|   const allGroups = React.useMemo(
    34|     () => uniq(Object.values(assetGraphData.nodes).map((g) => groupIdForNode(g))),
    35|     [assetGraphData],
    36|   );
    37|   const [highlighted, setHighlighted] = React.useState<string | null>(null);
    38|   const {layout, loading} = useAssetLayout(assetGraphData, allGroups);
    39|   const viewportEl = React.useRef<SVGViewport>();
    40|   const history = useHistory();
    41|   const onClickAsset = (key: AssetKey) => {
    42|     history.push(assetDetailsPathForKey(key, {...params, lineageScope: 'neighbors'}));
    43|   };
    44|   React.useEffect(() => {
    45|     if (viewportEl.current && layout) {
    46|       const lastZoomLevel = Number(getJSONForKey(LINEAGE_GRAPH_ZOOM_LEVEL));
    47|       viewportEl.current.autocenter(false, lastZoomLevel);
    48|       viewportEl.current.focus();
    49|     }
    50|   }, [viewportEl, layout, assetGraphId]);
    51|   if (!layout || loading) {
    52|     return (
    53|       <Box style={{flex: 1}} flex={{alignItems: 'center', justifyContent: 'center'}}>
    54|         <Spinner purpose="page" />
    55|       </Box>
    56|     );

# --- HUNK 2: Lines 61-141 ---
    61|       interactor={SVGViewport.Interactors.PanAndZoom}
    62|       defaultZoom="zoom-to-fit"
    63|       graphWidth={layout.width}
    64|       graphHeight={layout.height}
    65|       onDoubleClick={(e) => {
    66|         viewportEl.current?.autocenter(true);
    67|         e.stopPropagation();
    68|       }}
    69|       maxZoom={DEFAULT_MAX_ZOOM}
    70|       maxAutocenterZoom={DEFAULT_MAX_ZOOM}
    71|     >
    72|       {({scale}, viewportRect) => (
    73|         <SVGContainer width={layout.width} height={layout.height}>
    74|           {viewportEl.current && <SVGSaveZoomLevel scale={scale} />}
    75|           {Object.values(layout.groups)
    76|             .filter((node) => !isNodeOffscreen(node.bounds, viewportRect))
    77|             .sort((a, b) => a.id.length - b.id.length)
    78|             .map((group) => (
    79|               <foreignObject {...group.bounds} key={group.id}>
    80|                 {flagDAGSidebar ? (
    81|                   <ExpandedGroupNode group={group} minimal={scale < MINIMAL_SCALE} />
    82|                 ) : (
    83|                   <AssetGroupNode group={group} scale={scale} />
    84|                 )}
    85|               </foreignObject>
    86|             ))}
    87|           <AssetEdges
    88|             selected={null}
    89|             highlighted={highlighted}
    90|             edges={layout.edges}
    91|             viewportRect={viewportRect}
    92|           />
    93|           {Object.values(layout.nodes)
    94|             .filter((node) => !isNodeOffscreen(node.bounds, viewportRect))
    95|             .map(({id, bounds}) => {
    96|               const graphNode = assetGraphData.nodes[id];
    97|               const path = JSON.parse(id);
    98|               const contextMenuProps = {
    99|                 graphData: assetGraphData,
   100|                 node: graphNode!,
   101|               };
   102|               return (
   103|                 <foreignObject
   104|                   {...bounds}
   105|                   key={id}
   106|                   style={{overflow: 'visible'}}
   107|                   onMouseEnter={() => setHighlighted(id)}
   108|                   onMouseLeave={() => setHighlighted(null)}
   109|                   onClick={() => onClickAsset({path})}
   110|                   onDoubleClick={(e) => {
   111|                     viewportEl.current?.zoomToSVGBox(bounds, true, 1.2);
   112|                     e.stopPropagation();
   113|                   }}
   114|                 >
   115|                   {!graphNode ? (
   116|                     <AssetNodeLink assetKey={{path}} />
   117|                   ) : scale < MINIMAL_SCALE ? (
   118|                     <AssetNodeContextMenuWrapper {...contextMenuProps}>
   119|                       <AssetNodeMinimal
   120|                         definition={graphNode.definition}
   121|                         selected={graphNode.id === assetGraphId}
   122|                       />
   123|                     </AssetNodeContextMenuWrapper>
   124|                   ) : (
   125|                     <AssetNodeContextMenuWrapper {...contextMenuProps}>
   126|                       <AssetNode
   127|                         definition={graphNode.definition}
   128|                         selected={graphNode.id === assetGraphId}
   129|                       />
   130|                     </AssetNodeContextMenuWrapper>
   131|                   )}
   132|                 </foreignObject>
   133|               );
   134|             })}
   135|         </SVGContainer>
   136|       )}
   137|     </SVGViewport>
   138|   );
   139| };
   140| const SVGSaveZoomLevel = ({scale}: {scale: number}) => {
   141|   React.useEffect(() => {


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetNodePartitionCounts.tsx
# Total hunks: 4
# ====================================================================
# --- HUNK 1: Lines 1-113 ---
     1| import {Colors, Icon, Box, Tooltip, IconName} from '@dagster-io/ui-components';
     2| import React from 'react';
     3| import styled from 'styled-components';
     4| import {LiveDataForNode} from '../asset-graph/Utils';
     5| import {AssetNodeFragment} from '../asset-graph/types/AssetNode.types';
     6| import {AssetPartitionStatus} from '../assets/AssetPartitionStatus';
     7| export const partitionCountString = (count: number | undefined, adjective = '') =>
     8|   `${count === undefined ? '-' : count.toLocaleString()} ${adjective}${adjective ? ' ' : ''}${
     9|     count === 1 ? 'partition' : 'partitions'
    10|   }`;
    11| const countMissing = (partitionStats: LiveDataForNode['partitionStats'] | null | undefined) =>
    12|   partitionStats
    13|     ? partitionStats.numPartitions -
    14|       partitionStats.numFailed -
    15|       partitionStats.numMaterializing -
    16|       partitionStats.numMaterialized
    17|     : undefined;
    18| export const StyleForAssetPartitionStatus: Record<
    19|   AssetPartitionStatus,
    20|   {
    21|     background: string;
    22|     foreground: string;
    23|     border: string;
    24|     icon: IconName;
    25|     adjective: string;
    26|   }
    27| > = {
    28|   [AssetPartitionStatus.FAILED]: {
    29|     background: Colors.Red50,
    30|     foreground: Colors.Red700,
    31|     border: Colors.Red500,
    32|     icon: 'partition_failure',
    33|     adjective: 'failed',
    34|   },
    35|   [AssetPartitionStatus.MATERIALIZED]: {
    36|     background: Colors.Green50,
    37|     foreground: Colors.Green700,
    38|     border: Colors.Green500,
    39|     icon: 'partition_success',
    40|     adjective: 'materialized',
    41|   },
    42|   [AssetPartitionStatus.MATERIALIZING]: {
    43|     background: Colors.Blue50,
    44|     foreground: Colors.Blue700,
    45|     border: Colors.Blue500,
    46|     icon: 'partition_success',
    47|     adjective: 'materializing',
    48|   },
    49|   [AssetPartitionStatus.MISSING]: {
    50|     background: Colors.Gray100,
    51|     foreground: Colors.Gray900,
    52|     border: Colors.Gray500,
    53|     icon: 'partition_missing',
    54|     adjective: 'missing',
    55|   },
    56| };
    57| export const PartitionCountTags = (props: {
    58|   definition: AssetNodeFragment;
    59|   liveData: LiveDataForNode | undefined;
    60| }) => {
    61|   const data = props.liveData?.partitionStats;
    62|   return (
    63|     <Box style={{display: 'grid', gridTemplateColumns: '1fr 1fr 1fr', gap: 2}}>
    64|       <PartitionCountTag
    65|         status={AssetPartitionStatus.MATERIALIZED}
    66|         value={data?.numMaterialized}
    67|         total={data?.numPartitions}
    68|       />
    69|       <PartitionCountTag
    70|         status={AssetPartitionStatus.MISSING}
    71|         value={countMissing(data)}
    72|         total={data?.numPartitions}
    73|       />
    74|       <PartitionCountTag
    75|         status={AssetPartitionStatus.FAILED}
    76|         value={data?.numFailed}
    77|         total={data?.numPartitions}
    78|       />
    79|     </Box>
    80|   );
    81| };
    82| const PartitionCountTag = ({
    83|   status,
    84|   value,
    85|   total,
    86| }: {
    87|   status: AssetPartitionStatus;
    88|   value: number | undefined;
    89|   total: number | undefined;
    90| }) => {
    91|   const style = StyleForAssetPartitionStatus[status];
    92|   const foreground = value ? style.foreground : Colors.Gray500;
    93|   const background = value ? style.background : Colors.Gray50;
    94|   return (
    95|     <Tooltip
    96|       display="block"
    97|       position="top"
    98|       canShow={value !== undefined}
    99|       content={partitionCountString(value, style.adjective)}
   100|     >
   101|       <PartitionCountContainer style={{color: foreground, background}}>
   102|         <Icon name={style.icon} color={foreground} size={12} />
   103|         {value === undefined ? '' : value === total ? 'All' : value > 1000 ? '999+' : value}
   104|       </PartitionCountContainer>
   105|     </Tooltip>
   106|   );
   107| };
   108| export const PartitionCountLabels = ({
   109|   partitionStats,
   110| }: {
   111|   partitionStats: LiveDataForNode['partitionStats'] | null | undefined;
   112| }) => {
   113|   return (

# --- HUNK 2: Lines 137-174 ---
   137| };
   138| const PartitionCountLabel = ({
   139|   status,
   140|   value,
   141|   total,
   142| }: {
   143|   status: AssetPartitionStatus;
   144|   value: number | undefined;
   145|   total: number | undefined;
   146| }) => {
   147|   const style = StyleForAssetPartitionStatus[status];
   148|   return (
   149|     <Tooltip
   150|       display="block"
   151|       position="top"
   152|       canShow={value !== undefined}
   153|       content={partitionCountString(value, style.adjective)}
   154|     >
   155|       <Box
   156|         flex={{gap: 4, alignItems: 'center'}}
   157|         style={{color: value === undefined || value === 0 ? Colors.Gray300 : Colors.Dark}}
   158|       >
   159|         <Icon name={style.icon} color={value ? style.border : Colors.Gray300} size={12} />
   160|         {value === undefined ? '' : value === total ? 'All' : value.toLocaleString()}
   161|       </Box>
   162|     </Tooltip>
   163|   );
   164| };
   165| const PartitionCountContainer = styled.div`
   166|   width: 100%;
   167|   border-radius: 6px;
   168|   font-size: 12px;
   169|   gap: 4px;
   170|   display: flex;
   171|   align-items: center;
   172|   justify-content: center;
   173|   padding: 4px;
   174| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetPageHeader.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-29 ---
     1| import {BreadcrumbProps, Breadcrumbs} from '@blueprintjs/core';
     2| import {
     3|   Box,
     4|   Colors,
     5|   PageHeader,
     6|   Heading,
     7|   Icon,
     8|   Tooltip,
     9|   IconWrapper,
    10| } from '@dagster-io/ui-components';
    11| import React from 'react';
    12| import {Link} from 'react-router-dom';
    13| import styled from 'styled-components';
    14| import {showSharedToaster} from '../app/DomUtils';
    15| import {useCopyToClipboard} from '../app/browser';
    16| type Props = {assetKey: {path: string[]}} & Partial<React.ComponentProps<typeof PageHeader>>;
    17| export const AssetPageHeader = ({assetKey, ...extra}: Props) => {
    18|   const copy = useCopyToClipboard();
    19|   const copyableString = assetKey.path.join('/');
    20|   const [didCopy, setDidCopy] = React.useState(false);
    21|   const iconTimeout = React.useRef<NodeJS.Timeout>();
    22|   const performCopy = React.useCallback(async () => {
    23|     if (iconTimeout.current) {
    24|       clearTimeout(iconTimeout.current);
    25|     }
    26|     copy(copyableString);
    27|     setDidCopy(true);
    28|     await showSharedToaster({
    29|       icon: 'done',

# --- HUNK 2: Lines 46-117 ---
    46|   return (
    47|     <PageHeader
    48|       title={
    49|         <Box
    50|           flex={{alignItems: 'center', gap: 4}}
    51|           style={{maxWidth: '600px', overflow: 'hidden', marginBottom: 4}}
    52|         >
    53|           <BreadcrumbsWithSlashes
    54|             items={breadcrumbs}
    55|             currentBreadcrumbRenderer={({text}) => <Heading>{text}</Heading>}
    56|             breadcrumbRenderer={({text, href}) => (
    57|               <Heading>
    58|                 <BreadcrumbLink to={href || '#'}>{text}</BreadcrumbLink>
    59|               </Heading>
    60|             )}
    61|           />
    62|           <Tooltip placement="bottom" content="Copy asset key">
    63|             <CopyButton onClick={performCopy}>
    64|               <Icon
    65|                 name={didCopy ? 'copy_to_clipboard_done' : 'copy_to_clipboard'}
    66|                 color={Colors.Gray400}
    67|               />
    68|             </CopyButton>
    69|           </Tooltip>
    70|         </Box>
    71|       }
    72|       {...extra}
    73|     />
    74|   );
    75| };
    76| const CopyButton = styled.button`
    77|   border: none;
    78|   background: transparent;
    79|   cursor: pointer;
    80|   padding: 3px;
    81|   margin-top: 2px;
    82|   :focus {
    83|     outline: none;
    84|   }
    85|   ${IconWrapper} {
    86|     transition: background-color 100ms linear;
    87|   }
    88|   :hover ${IconWrapper} {
    89|     background-color: ${Colors.Gray800};
    90|   }
    91| `;
    92| export const AssetGlobalLineageLink = () => (
    93|   <Link to="/asset-groups">
    94|     <Box flex={{gap: 4}}>
    95|       <Icon color={Colors.Link} name="schema" />
    96|       View global asset lineage
    97|     </Box>
    98|   </Link>
    99| );
   100| const BreadcrumbsWithSlashes = styled(Breadcrumbs)`
   101|   & li:not(:first-child)::after {
   102|     background: none;
   103|     font-size: 20px;
   104|     font-weight: bold;
   105|     color: #5c7080;
   106|     content: '/';
   107|     width: 8px;
   108|     line-height: 16px;
   109|   }
   110| `;
   111| const BreadcrumbLink = styled(Link)`
   112|   color: ${Colors.Gray800};
   113|   :hover,
   114|   :active {
   115|     color: ${Colors.Gray800};
   116|   }
   117| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetPartitionDetail.tsx
# Total hunks: 4
# ====================================================================
# --- HUNK 1: Lines 1-33 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {
     3|   Alert,
     4|   Box,
     5|   Colors,
     6|   Group,
     7|   Heading,
     8|   Icon,
     9|   MiddleTruncate,
    10|   Mono,
    11|   Spinner,
    12|   Subheading,
    13|   Tag,
    14| } from '@dagster-io/ui-components';
    15| import React from 'react';
    16| import {Link} from 'react-router-dom';
    17| import {Timestamp} from '../app/time/Timestamp';
    18| import {LiveDataForNode, isHiddenAssetGroupJob, stepKeyForAsset} from '../asset-graph/Utils';
    19| import {RunStatus, StaleStatus} from '../graphql/types';
    20| import {PipelineReference} from '../pipelines/PipelineReference';
    21| import {RunStatusWithStats} from '../runs/RunStatusDots';
    22| import {titleForRun, linkToRunEvent} from '../runs/RunUtils';
    23| import {isThisThingAJob, useRepository} from '../workspace/WorkspaceContext';
    24| import {buildRepoAddress} from '../workspace/buildRepoAddress';
    25| import {AllIndividualEventsButton} from './AllIndividualEventsButton';
    26| import {AssetEventMetadataEntriesTable} from './AssetEventMetadataEntriesTable';
    27| import {AssetEventSystemTags} from './AssetEventSystemTags';
    28| import {AssetMaterializationUpstreamData} from './AssetMaterializationUpstreamData';
    29| import {FailedRunSinceMaterializationBanner} from './FailedRunSinceMaterializationBanner';
    30| import {StaleReasonsTags} from './Stale';
    31| import {AssetEventGroup} from './groupByPartition';
    32| import {AssetKey} from './types';
    33| import {

# --- HUNK 2: Lines 219-259 ---
   219|           >
   220|             <Heading>
   221|               <MiddleTruncate text={partition} />
   222|             </Heading>
   223|             {hasLoadingState ? (
   224|               <Spinner purpose="body-text" />
   225|             ) : latest ? (
   226|               <Tag intent="success">Materialized</Tag>
   227|             ) : undefined}
   228|             {hasStaleLoadingState ? (
   229|               <Spinner purpose="body-text" />
   230|             ) : staleCauses && staleStatus ? (
   231|               <StaleReasonsTags
   232|                 liveData={{staleCauses, staleStatus}}
   233|                 assetKey={assetKey}
   234|                 include="all"
   235|               />
   236|             ) : undefined}
   237|           </div>
   238|         ) : (
   239|           <Heading color={Colors.Gray400}>No partition selected</Heading>
   240|         )}
   241|         <div style={{flex: 1}} />
   242|       </Box>
   243|       {currentRun?.status === RunStatus.FAILURE && (
   244|         <FailedRunSinceMaterializationBanner
   245|           run={currentRun}
   246|           stepKey={stepKey}
   247|           padding={{horizontal: 0, vertical: 16}}
   248|           border="bottom"
   249|         />
   250|       )}
   251|       {currentRun && currentRunStatusMessage && (
   252|         <Alert
   253|           intent="info"
   254|           icon={<Spinner purpose="body-text" />}
   255|           title={
   256|             <div style={{fontWeight: 400}}>
   257|               Run <Link to={`/runs/${currentRun.id}`}>{titleForRun(currentRun)}</Link>{' '}
   258|               {currentRunStatusMessage}
   259|             </div>

# --- HUNK 3: Lines 300-340 ---
   300|               </Link>
   301|             </Box>
   302|           ) : (
   303|             'None'
   304|           )}
   305|         </Box>
   306|         <Box flex={{gap: 4, direction: 'column'}}>
   307|           <Subheading>Job</Subheading>
   308|           {latest && latestEventRun && !isHiddenAssetGroupJob(latestEventRun.pipelineName) ? (
   309|             <Box>
   310|               <Box>
   311|                 <PipelineReference
   312|                   showIcon
   313|                   pipelineName={latestEventRun.pipelineName}
   314|                   pipelineHrefContext={repoAddress || 'repo-unknown'}
   315|                   snapshotId={latestEventRun.pipelineSnapshotId}
   316|                   isJob={isThisThingAJob(repo, latestEventRun.pipelineName)}
   317|                 />
   318|               </Box>
   319|               <Group direction="row" spacing={8} alignItems="center">
   320|                 <Icon name="linear_scale" color={Colors.Gray400} />
   321|                 <Link to={linkToRunEvent(latestEventRun, latest)}>{latest.stepKey}</Link>
   322|               </Group>
   323|             </Box>
   324|           ) : (
   325|             'None'
   326|           )}
   327|         </Box>
   328|         <Box style={{textAlign: 'right'}}>
   329|           <AllIndividualEventsButton
   330|             hasPartitions
   331|             hasLineage={hasLineage}
   332|             events={all}
   333|             disabled={all.length === 0}
   334|           >
   335|             {`View all historical events (${all.length})`}
   336|           </AllIndividualEventsButton>
   337|         </Box>
   338|       </Box>
   339|       <Box padding={{top: 24}} flex={{direction: 'column', gap: 8}}>
   340|         <Subheading>Metadata</Subheading>

# --- HUNK 4: Lines 344-369 ---
   344|         <Subheading>Source data</Subheading>
   345|         <AssetMaterializationUpstreamData timestamp={latest?.timestamp} assetKey={assetKey} />
   346|       </Box>
   347|       <Box padding={{top: 24}} flex={{direction: 'column', gap: 8}}>
   348|         <Subheading>System tags</Subheading>
   349|         <AssetEventSystemTags event={latest} collapsible />
   350|       </Box>
   351|     </Box>
   352|   );
   353| };
   354| export const AssetPartitionDetailEmpty = ({partitionKey}: {partitionKey?: string}) => (
   355|   <AssetPartitionDetail
   356|     assetKey={{path: ['']}}
   357|     group={{all: [], latest: null, timestamp: '0', partition: partitionKey}}
   358|     latestRunForPartition={null}
   359|     hasLineage={false}
   360|     hasLoadingState
   361|   />
   362| );
   363| const PartitionHeadingTooltipStyle = JSON.stringify({
   364|   background: Colors.Gray100,
   365|   border: `1px solid ${Colors.Gray200}`,
   366|   fontSize: '18px',
   367|   fontWeight: '600',
   368|   color: Colors.Dark,
   369| });


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetPartitionList.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {Box, Colors, MiddleTruncate} from '@dagster-io/ui-components';
     2| import {useVirtualizer} from '@tanstack/react-virtual';
     3| import * as React from 'react';
     4| import {Inner} from '../ui/VirtualizedTable';
     5| import {AssetListRow, AssetListContainer} from './AssetEventList';
     6| import {AssetPartitionStatus, assetPartitionStatusesToStyle} from './AssetPartitionStatus';
     7| export interface AssetPartitionListProps {
     8|   partitions: string[];
     9|   statusForPartition: (dimensionKey: string) => AssetPartitionStatus[];
    10|   focusedDimensionKey?: string;
    11|   setFocusedDimensionKey?: (dimensionKey: string | undefined) => void;
    12| }
    13| export const AssetPartitionList = ({
    14|   focusedDimensionKey,
    15|   setFocusedDimensionKey,
    16|   statusForPartition,
    17|   partitions,
    18| }: AssetPartitionListProps) => {
    19|   const parentRef = React.useRef<HTMLDivElement | null>(null);
    20|   const rowVirtualizer = useVirtualizer({
    21|     count: partitions.length,

# --- HUNK 2: Lines 104-130 ---
   104|               </Box>
   105|             </AssetListRow>
   106|           );
   107|         })}
   108|       </Inner>
   109|     </AssetListContainer>
   110|   );
   111| };
   112| export const AssetPartitionStatusDot = ({status}: {status: AssetPartitionStatus[]}) => (
   113|   <div
   114|     style={{
   115|       width: 10,
   116|       height: 10,
   117|       borderRadius: '100%',
   118|       flexShrink: 0,
   119|       ...assetPartitionStatusesToStyle(status),
   120|     }}
   121|   />
   122| );
   123| const PartitionTooltipStyle = JSON.stringify({
   124|   background: Colors.Gray100,
   125|   border: `1px solid ${Colors.Gray200}`,
   126|   color: Colors.Dark,
   127|   fontSize: '14px',
   128|   top: 0,
   129|   left: 0,
   130| });


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetPartitionStatus.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-57 ---
     1| import {Colors} from '@dagster-io/ui-components';
     2| import {CSSProperties} from 'react';
     3| import {assertUnreachable} from '../app/Util';
     4| export enum AssetPartitionStatus {
     5|   FAILED = 'FAILED',
     6|   MATERIALIZED = 'MATERIALIZED',
     7|   MATERIALIZING = 'MATERIALIZING',
     8|   MISSING = 'MISSING',
     9| }
    10| export const emptyAssetPartitionStatusCounts = () => ({
    11|   [AssetPartitionStatus.MISSING]: 0,
    12|   [AssetPartitionStatus.MATERIALIZED]: 0,
    13|   [AssetPartitionStatus.MATERIALIZING]: 0,
    14|   [AssetPartitionStatus.FAILED]: 0,
    15| });
    16| export const assetPartitionStatusToText = (status: AssetPartitionStatus) => {
    17|   switch (status) {
    18|     case AssetPartitionStatus.MATERIALIZED:
    19|       return 'Materialized';
    20|     case AssetPartitionStatus.MATERIALIZING:
    21|       return 'Materializing';
    22|     case AssetPartitionStatus.FAILED:
    23|       return 'Failed';
    24|     case AssetPartitionStatus.MISSING:
    25|       return 'Missing';
    26|     default:
    27|       assertUnreachable(status);
    28|   }
    29| };
    30| const assetPartitionStatusToColor = (status: AssetPartitionStatus) => {
    31|   switch (status) {
    32|     case AssetPartitionStatus.MATERIALIZED:
    33|       return Colors.Green500;
    34|     case AssetPartitionStatus.MATERIALIZING:
    35|       return Colors.Blue500;
    36|     case AssetPartitionStatus.FAILED:
    37|       return Colors.Red500;
    38|     case AssetPartitionStatus.MISSING:
    39|       return Colors.Gray200;
    40|     default:
    41|       assertUnreachable(status);
    42|   }
    43| };
    44| export const assetPartitionStatusesToStyle = (status: AssetPartitionStatus[]): CSSProperties => {
    45|   if (status.length === 0) {
    46|     return {background: Colors.Gray200};
    47|   }
    48|   if (status.length === 1) {
    49|     return {background: assetPartitionStatusToColor(status[0]!)};
    50|   }
    51|   const a = assetPartitionStatusToColor(status[0]!);
    52|   const b = assetPartitionStatusToColor(status[1]!);
    53|   return {
    54|     backgroundImage: `linear-gradient(135deg, ${a} 25%, ${b} 25%, ${b} 50%, ${a} 50%, ${a} 75%, ${b} 75%, ${b} 100%)`,
    55|     backgroundSize: '8.49px 8.49px',
    56|   };
    57| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetPartitions.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-30 ---
     1| import {
     2|   Box,
     3|   Colors,
     4|   Icon,
     5|   Menu,
     6|   MenuItem,
     7|   Popover,
     8|   Spinner,
     9|   Subheading,
    10|   Tooltip,
    11| } from '@dagster-io/ui-components';
    12| import isEqual from 'lodash/isEqual';
    13| import uniq from 'lodash/uniq';
    14| import * as React from 'react';
    15| import {LiveDataForNode} from '../asset-graph/Utils';
    16| import {PartitionDefinitionType, RepositorySelector} from '../graphql/types';
    17| import {useQueryPersistedState} from '../hooks/useQueryPersistedState';
    18| import {SortButton} from '../launchpad/ConfigEditorConfigPicker';
    19| import {DimensionRangeWizard} from '../partitions/DimensionRangeWizard';
    20| import {testId} from '../testing/testId';
    21| import {AssetPartitionDetailEmpty, AssetPartitionDetailLoader} from './AssetPartitionDetail';
    22| import {AssetPartitionList} from './AssetPartitionList';
    23| import {AssetPartitionStatus} from './AssetPartitionStatus';
    24| import {AssetPartitionStatusCheckboxes} from './AssetPartitionStatusCheckboxes';
    25| import {isTimeseriesDimension} from './MultipartitioningSupport';
    26| import {AssetViewParams, AssetKey} from './types';
    27| import {usePartitionDimensionSelections} from './usePartitionDimensionSelections';
    28| import {
    29|   usePartitionHealthData,
    30|   rangesClippedToSelection,

# --- HUNK 2: Lines 173-218 ---
   173|       >
   174|         <div data-testid={testId('partitions-selected')}>
   175|           {countsFiltered.toLocaleString()} Partitions Selected
   176|         </div>
   177|         <AssetPartitionStatusCheckboxes
   178|           counts={countsByStateInSelection}
   179|           allowed={DISPLAYED_STATUSES}
   180|           value={statusFilters}
   181|           onChange={setStatusFilters}
   182|         />
   183|       </Box>
   184|       <Box style={{flex: 1, minHeight: 0, outline: 'none'}} flex={{direction: 'row'}} tabIndex={-1}>
   185|         {selections.map((selection, idx) => {
   186|           const sortType = getSort(sortTypes, idx, selection.dimension.type);
   187|           return (
   188|             <Box
   189|               key={selection.dimension.name}
   190|               style={{display: 'flex', flex: 1, paddingRight: 1, minWidth: 200}}
   191|               flex={{direction: 'column'}}
   192|               border="right"
   193|               background={Colors.Gray50}
   194|               data-testid={testId(`partitions-${selection.dimension.name}`)}
   195|             >
   196|               <Box
   197|                 flex={{direction: 'row', justifyContent: 'space-between', alignItems: 'center'}}
   198|                 background={Colors.White}
   199|                 border="bottom"
   200|                 padding={{horizontal: 24, vertical: 8}}
   201|               >
   202|                 <div>
   203|                   {selection.dimension.name !== 'default' && (
   204|                     <Box flex={{gap: 8, alignItems: 'center'}}>
   205|                       <Icon name="partition" />
   206|                       <Subheading>{selection.dimension.name}</Subheading>
   207|                     </Box>
   208|                   )}
   209|                 </div>
   210|                 <Popover
   211|                   content={
   212|                     <Menu>
   213|                       <MenuItem
   214|                         text={
   215|                           <Tooltip content="The order in which partitions were created">
   216|                             <Box flex={{direction: 'row', alignItems: 'center', gap: 8}}>
   217|                               <span>Creation sort</span>
   218|                               <Icon name="info" />

# --- HUNK 3: Lines 260-300 ---
   260|                         }}
   261|                         data-testId={testId('sort-alphabetical')}
   262|                       />
   263|                       <MenuItem
   264|                         text="Reverse alphabetical sort"
   265|                         active={SortType.REVERSE_ALPHABETICAL === sortType}
   266|                         onClick={() => {
   267|                           setSortTypes((sorts) => {
   268|                             const copy = [...sorts];
   269|                             copy[idx] = SortType.REVERSE_ALPHABETICAL;
   270|                             return [...copy];
   271|                           });
   272|                         }}
   273|                         data-testId={testId('sort-reverse-alphabetical')}
   274|                       />
   275|                     </Menu>
   276|                   }
   277|                   position="bottom-left"
   278|                 >
   279|                   <SortButton style={{marginRight: '-16px'}} data-testid={`sort-${idx}`}>
   280|                     <Icon name="sort_by_alpha" color={Colors.Gray400} />
   281|                   </SortButton>
   282|                 </Popover>
   283|               </Box>
   284|               {!assetHealth ? (
   285|                 <Box flex={{alignItems: 'center', justifyContent: 'center'}} style={{flex: 1}}>
   286|                   <Spinner purpose="section" />
   287|                 </Box>
   288|               ) : (
   289|                 <AssetPartitionList
   290|                   partitions={dimensionKeysInSelection(idx)}
   291|                   statusForPartition={(dimensionKey) => {
   292|                     if (idx === 1 && focusedDimensionKeys[0]) {
   293|                       return [assetHealth.stateForKey([focusedDimensionKeys[0], dimensionKey])];
   294|                     }
   295|                     const dimensionKeyIdx = selection.dimension.partitionKeys.indexOf(dimensionKey);
   296|                     return partitionStatusAtIndex(
   297|                       rangesForEachDimension[idx]!,
   298|                       dimensionKeyIdx,
   299|                     ).filter((s) => statusFilters.includes(s));
   300|                   }}


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetSidebarActivitySummary.tsx
# Total hunks: 4
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {Body, Box, Colors, Icon, MiddleTruncate, Spinner} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import {Link} from 'react-router-dom';
     4| import {LiveDataForNode} from '../asset-graph/Utils';
     5| import {SidebarAssetFragment} from '../asset-graph/types/SidebarAssetInfo.types';
     6| import {SidebarSection} from '../pipelines/SidebarComponents';
     7| import {AssetEventSystemTags} from './AssetEventSystemTags';
     8| import {AssetMaterializationGraphs} from './AssetMaterializationGraphs';
     9| import {
    10|   AutomaterializePolicyTag,
    11|   automaterializePolicyDescription,
    12| } from './AutomaterializePolicyTag';
    13| import {CurrentRunsBanner} from './CurrentRunsBanner';
    14| import {FailedRunSinceMaterializationBanner} from './FailedRunSinceMaterializationBanner';
    15| import {LatestMaterializationMetadata} from './LastMaterializationMetadata';
    16| import {OverdueTag, freshnessPolicyDescription} from './OverdueTag';
    17| import {AssetCheckStatusTag} from './asset-checks/AssetCheckStatusTag';
    18| import {ExecuteChecksButton} from './asset-checks/ExecuteChecksButton';
    19| import {assetDetailsPathForKey} from './assetDetailsPathForKey';
    20| import {useGroupedEvents} from './groupByPartition';
    21| import {isRunlessEvent} from './isRunlessEvent';

# --- HUNK 2: Lines 57-97 ---
    57|           <CurrentRunsBanner stepKey={stepKey} border="top" liveData={liveData} />
    58|         </>
    59|       )}
    60|       {asset.freshnessPolicy && (
    61|         <SidebarSection title="Freshness policy">
    62|           <Box margin={{horizontal: 24, vertical: 12}} flex={{gap: 12, alignItems: 'flex-start'}}>
    63|             <Body style={{flex: 1}}>{freshnessPolicyDescription(asset.freshnessPolicy)}</Body>
    64|             <OverdueTag policy={asset.freshnessPolicy} assetKey={asset.assetKey} />
    65|           </Box>
    66|         </SidebarSection>
    67|       )}
    68|       {asset.autoMaterializePolicy && (
    69|         <SidebarSection title="Auto-materialize policy">
    70|           <Box
    71|             padding={{horizontal: 24, vertical: 12}}
    72|             flex={{direction: 'row', gap: 4, alignItems: 'center'}}
    73|           >
    74|             <Link to={assetDetailsPathForKey(asset.assetKey, {view: 'auto-materialize-history'})}>
    75|               View auto-materialize history
    76|             </Link>
    77|             <Icon name="open_in_new" color={Colors.Link} />
    78|           </Box>
    79|           <Box margin={{horizontal: 24}} flex={{gap: 12, alignItems: 'flex-start'}}>
    80|             <Body style={{flex: 1, marginBottom: 12}}>
    81|               {automaterializePolicyDescription(asset.autoMaterializePolicy)}
    82|             </Body>
    83|             <AutomaterializePolicyTag policy={asset.autoMaterializePolicy} />
    84|           </Box>
    85|         </SidebarSection>
    86|       )}
    87|       {asset.backfillPolicy && (
    88|         <SidebarSection title="Backfill policy">
    89|           <Box margin={{horizontal: 24, vertical: 12}} flex={{gap: 12, alignItems: 'flex-start'}}>
    90|             <Body style={{flex: 1}}>{asset.backfillPolicy.description}</Body>
    91|           </Box>
    92|         </SidebarSection>
    93|       )}
    94|       {loadedPartitionKeys.length > 1 ? null : (
    95|         <>
    96|           <SidebarSection
    97|             title={

# --- HUNK 3: Lines 100-207 ---
   100|                   ? 'Last reported materialization'
   101|                   : 'Materialization in last run'
   102|                 : 'Observation in last run'
   103|             }
   104|           >
   105|             {displayedEvent ? (
   106|               <div style={{margin: -1, maxWidth: '100%', overflowX: 'auto'}}>
   107|                 <LatestMaterializationMetadata
   108|                   assetKey={asset.assetKey}
   109|                   latest={displayedEvent}
   110|                   liveData={liveData}
   111|                 />
   112|               </div>
   113|             ) : loading ? (
   114|               <Box padding={{vertical: 20}}>
   115|                 <Spinner purpose="section" />
   116|               </Box>
   117|             ) : (
   118|               <Box
   119|                 margin={{horizontal: 24, vertical: 12}}
   120|                 style={{color: Colors.Gray500, fontSize: '0.8rem'}}
   121|               >
   122|                 {!isSourceAsset ? `No materializations found` : `No observations found`}
   123|               </Box>
   124|             )}
   125|           </SidebarSection>
   126|           <SidebarSection
   127|             title={!isSourceAsset ? 'Materialization system tags' : 'Observation system tags'}
   128|             collapsedByDefault
   129|           >
   130|             {displayedEvent ? (
   131|               <div style={{margin: -1, maxWidth: '100%', overflowX: 'auto'}}>
   132|                 <AssetEventSystemTags event={displayedEvent} paddingLeft={24} />
   133|               </div>
   134|             ) : loading ? (
   135|               <Box padding={{vertical: 20}}>
   136|                 <Spinner purpose="section" />
   137|               </Box>
   138|             ) : (
   139|               <Box
   140|                 margin={{horizontal: 24, vertical: 12}}
   141|                 style={{color: Colors.Gray500, fontSize: '0.8rem'}}
   142|               >
   143|                 {!isSourceAsset ? `No materializations found` : `No observations found`}
   144|               </Box>
   145|             )}
   146|           </SidebarSection>
   147|         </>
   148|       )}
   149|       <SidebarSection title="Metadata plots">
   150|         <AssetMaterializationGraphs
   151|           xAxis={xAxis}
   152|           asSidebarSection
   153|           groups={grouped}
   154|           columnCount={1}
   155|         />
   156|       </SidebarSection>
   157|       {asset.assetChecksOrError.__typename === 'AssetChecks' &&
   158|         asset.assetChecksOrError.checks.length > 0 && (
   159|           <SidebarSection title="Checks">
   160|             <Box padding={{horizontal: 24, vertical: 12}} flex={{gap: 12, alignItems: 'center'}}>
   161|               <ExecuteChecksButton assetNode={asset} checks={asset.assetChecksOrError.checks} />
   162|               <Link to={assetDetailsPathForKey(asset.assetKey, {view: 'checks'})}>
   163|                 View all check details
   164|               </Link>
   165|             </Box>
   166|             {asset.assetChecksOrError.checks.slice(0, 10).map((check) => {
   167|               const execution =
   168|                 liveData &&
   169|                 liveData.assetChecks?.find((c) => c.name === check.name)
   170|                   ?.executionForLatestMaterialization;
   171|               return (
   172|                 <Box
   173|                   key={check.name}
   174|                   style={{minHeight: 40}}
   175|                   border={{side: 'top', width: 1, color: Colors.KeylineGray}}
   176|                   padding={{vertical: 8, right: 12, left: 24}}
   177|                   flex={{
   178|                     gap: 8,
   179|                     direction: 'row',
   180|                     alignItems: 'center',
   181|                     justifyContent: 'space-between',
   182|                   }}
   183|                 >
   184|                   <MiddleTruncate text={`${check.name}`} />
   185|                   {execution ? (
   186|                     <AssetCheckStatusTag execution={execution} />
   187|                   ) : (
   188|                     <Spinner purpose="caption-text" />
   189|                   )}
   190|                 </Box>
   191|               );
   192|             })}
   193|             {asset.assetChecksOrError.checks.length > 10 && (
   194|               <Box
   195|                 padding={{vertical: 12, right: 12, left: 24}}
   196|                 border={{side: 'top', width: 1, color: Colors.KeylineGray}}
   197|               >
   198|                 <Link to={assetDetailsPathForKey(asset.assetKey, {view: 'checks'})}>
   199|                   View {asset.assetChecksOrError.checks.length - 10} more
   200|                 </Link>
   201|               </Box>
   202|             )}
   203|           </SidebarSection>
   204|         )}
   205|     </>
   206|   );
   207| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetTable.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-32 ---
     1| import {RefetchQueriesFunction} from '@apollo/client';
     2| import {
     3|   Box,
     4|   Button,
     5|   Colors,
     6|   Icon,
     7|   MenuItem,
     8|   Menu,
     9|   Popover,
    10|   Tooltip,
    11|   Checkbox,
    12|   NonIdealState,
    13| } from '@dagster-io/ui-components';
    14| import groupBy from 'lodash/groupBy';
    15| import * as React from 'react';
    16| import {useUnscopedPermissions} from '../app/Permissions';
    17| import {QueryRefreshCountdown, QueryRefreshState} from '../app/QueryRefresh';
    18| import {AssetGroupSelector, AssetKeyInput} from '../graphql/types';
    19| import {useSelectionReducer} from '../hooks/useSelectionReducer';
    20| import {testId} from '../testing/testId';
    21| import {VirtualizedAssetTable} from '../workspace/VirtualizedAssetTable';
    22| import {AssetWipeDialog} from './AssetWipeDialog';
    23| import {LaunchAssetExecutionButton} from './LaunchAssetExecutionButton';
    24| import {AssetTableFragment} from './types/AssetTableFragment.types';
    25| import {AssetViewType} from './useAssetView';
    26| type Asset = AssetTableFragment;
    27| interface Props {
    28|   view: AssetViewType;
    29|   assets: Asset[];
    30|   refreshState: QueryRefreshState;
    31|   actionBarComponents: React.ReactNode;
    32|   prefixPath: string[];

# --- HUNK 2: Lines 120-160 ---
   120|               if (e.target instanceof HTMLInputElement) {
   121|                 onToggleAll(checkedDisplayKeys.size !== displayKeys.length);
   122|               }
   123|             }}
   124|           />
   125|         }
   126|         prefixPath={prefixPath}
   127|         groups={groupedByDisplayKey}
   128|         checkedDisplayKeys={checkedDisplayKeys}
   129|         onToggleFactory={onToggleFactory}
   130|         showRepoColumn
   131|         view={view}
   132|         onWipe={(assetKeys: AssetKeyInput[]) => setToWipe(assetKeys)}
   133|       />
   134|     );
   135|   };
   136|   return (
   137|     <>
   138|       <Box flex={{direction: 'column'}} style={{height: '100%', overflow: 'hidden'}}>
   139|         <Box
   140|           background={Colors.White}
   141|           flex={{alignItems: 'center', gap: 12}}
   142|           padding={{vertical: 8, left: 24, right: 12}}
   143|           style={{position: 'sticky', top: 0, zIndex: 1}}
   144|         >
   145|           {actionBarComponents}
   146|           <div style={{flex: 1}} />
   147|           <QueryRefreshCountdown refreshState={refreshState} />
   148|           <Box flex={{alignItems: 'center', gap: 8}}>
   149|             {checkedAssets.some((c) => !c.definition) ? (
   150|               <Tooltip content="One or more selected assets are not software-defined and cannot be launched directly.">
   151|                 <Button
   152|                   intent="primary"
   153|                   data-testid={testId('materialize-button')}
   154|                   icon={<Icon name="materialization" />}
   155|                   disabled
   156|                 >
   157|                   {checkedAssets.length > 1
   158|                     ? `Materialize (${checkedAssets.length.toLocaleString()})`
   159|                     : 'Materialize'}
   160|                 </Button>

# --- HUNK 3: Lines 189-229 ---
   189| }
   190| const MoreActionsDropdown = React.memo((props: MoreActionsDropdownProps) => {
   191|   const {selected, clearSelection, requery} = props;
   192|   const [showBulkWipeDialog, setShowBulkWipeDialog] = React.useState<boolean>(false);
   193|   const {
   194|     permissions: {canWipeAssets},
   195|   } = useUnscopedPermissions();
   196|   if (!canWipeAssets) {
   197|     return null;
   198|   }
   199|   const disabled = selected.length === 0;
   200|   return (
   201|     <>
   202|       <Popover
   203|         position="bottom-right"
   204|         content={
   205|           <Menu>
   206|             <MenuItem
   207|               text="Wipe materializations"
   208|               onClick={() => setShowBulkWipeDialog(true)}
   209|               icon={<Icon name="delete" color={disabled ? Colors.Gray600 : Colors.Red500} />}
   210|               disabled={disabled}
   211|               intent="danger"
   212|             />
   213|           </Menu>
   214|         }
   215|       >
   216|         <Button icon={<Icon name="expand_more" />} />
   217|       </Popover>
   218|       <AssetWipeDialog
   219|         assetKeys={selected.map((asset) => asset.key)}
   220|         isOpen={showBulkWipeDialog}
   221|         onClose={() => setShowBulkWipeDialog(false)}
   222|         onComplete={() => {
   223|           setShowBulkWipeDialog(false);
   224|           clearSelection();
   225|         }}
   226|         requery={requery}
   227|       />
   228|     </>
   229|   );


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetValueGraph.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-67 ---
     1| import {Colors} from '@dagster-io/ui-components';
     2| import {ActiveElement, ChartEvent} from 'chart.js';
     3| import 'chartjs-adapter-date-fns';
     4| import * as React from 'react';
     5| import {Line} from 'react-chartjs-2';
     6| export interface AssetValueGraphData {
     7|   minY: number;
     8|   maxY: number;
     9|   minXNumeric: number;
    10|   maxXNumeric: number;
    11|   xAxis: 'time' | 'partition';
    12|   values: {
    13|     x: number | string; // time or partition
    14|     xNumeric: number; // time or partition index
    15|     y: number;
    16|   }[];
    17| }
    18| export const AssetValueGraph = (props: {
    19|   label: string;
    20|   width: string;
    21|   yAxisLabel?: string;
    22|   data: AssetValueGraphData;
    23|   xHover: string | number | null;
    24|   onHoverX: (value: string | number | null) => void;
    25| }) => {
    26|   if (!props.data) {
    27|     return <span />;
    28|   }
    29|   let labels: React.ReactText[] | undefined = undefined;
    30|   let xHover = props.xHover;
    31|   if (props.data.xAxis === 'partition') {
    32|     labels = props.data.values.map((v) => v.x);
    33|     xHover = xHover ? labels.indexOf(xHover) : null;
    34|   }
    35|   const graphData = {
    36|     labels,
    37|     datasets: [
    38|       {
    39|         label: props.label,
    40|         lineTension: 0,
    41|         data: props.data.values.map((v) => ({x: v.xNumeric, y: v.y})),
    42|         borderColor: Colors.Blue500,
    43|         backgroundColor: 'rgba(0,0,0,0)',
    44|         pointBorderWidth: 2,
    45|         pointHoverBorderWidth: 2,
    46|         pointHoverRadius: 13,
    47|         pointHoverBorderColor: Colors.Blue500,
    48|       },
    49|     ],
    50|   };
    51|   const options = {
    52|     animation: {
    53|       duration: 0,
    54|     },
    55|     elements: {
    56|       point: {
    57|         radius: ((context: any) =>
    58|           context.dataset.data[context.dataIndex]?.x === xHover ? 13 : 2) as any,
    59|       },
    60|     },
    61|     scales: {
    62|       x: {
    63|         id: 'x',
    64|         display: true,
    65|         ...(props.data.xAxis === 'time'
    66|           ? {
    67|               type: 'time',


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetsCatalogRoot.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-22 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {Box, Colors, Page, Spinner} from '@dagster-io/ui-components';
     3| import * as React from 'react';
     4| import {useHistory, useParams} from 'react-router-dom';
     5| import {useTrackPageView} from '../app/analytics';
     6| import {displayNameForAssetKey} from '../asset-graph/Utils';
     7| import {useDocumentTitle} from '../hooks/useDocumentTitle';
     8| import {ReloadAllButton} from '../workspace/ReloadAllButton';
     9| import {AssetGlobalLineageLink, AssetPageHeader} from './AssetPageHeader';
    10| import {AssetView} from './AssetView';
    11| import {AssetsCatalogTable} from './AssetsCatalogTable';
    12| import {assetDetailsPathForKey} from './assetDetailsPathForKey';
    13| import {
    14|   AssetsCatalogRootQuery,
    15|   AssetsCatalogRootQueryVariables,
    16| } from './types/AssetsCatalogRoot.types';
    17| export const AssetsCatalogRoot = () => {
    18|   useTrackPageView();
    19|   const params = useParams();
    20|   const history = useHistory();
    21|   const currentPath: string[] = ((params as any)['0'] || '')
    22|     .split('/')

# --- HUNK 2: Lines 24-64 ---
    24|     .map(decodeURIComponent);
    25|   const queryResult = useQuery<AssetsCatalogRootQuery, AssetsCatalogRootQueryVariables>(
    26|     ASSETS_CATALOG_ROOT_QUERY,
    27|     {
    28|       skip: currentPath.length === 0,
    29|       variables: {assetKey: {path: currentPath}},
    30|     },
    31|   );
    32|   useDocumentTitle(
    33|     currentPath && currentPath.length
    34|       ? `Assets: ${displayNameForAssetKey({path: currentPath})}`
    35|       : 'Assets',
    36|   );
    37|   if (queryResult.loading) {
    38|     return (
    39|       <Page>
    40|         <AssetPageHeader assetKey={{path: currentPath}} />
    41|         <Box flex={{direction: 'row', justifyContent: 'center'}} style={{paddingTop: '100px'}}>
    42|           <Box flex={{direction: 'row', alignItems: 'center', gap: 16}}>
    43|             <Spinner purpose="body-text" />
    44|             <div style={{color: Colors.Gray600}}>Loading assets</div>
    45|           </Box>
    46|         </Box>
    47|       </Page>
    48|     );
    49|   }
    50|   if (
    51|     currentPath.length === 0 ||
    52|     queryResult.data?.assetOrError.__typename === 'AssetNotFoundError'
    53|   ) {
    54|     return (
    55|       <Box flex={{direction: 'column'}} style={{height: '100%', overflow: 'hidden'}}>
    56|         <AssetPageHeader
    57|           assetKey={{path: currentPath}}
    58|           right={
    59|             <Box flex={{gap: 12, alignItems: 'center'}}>
    60|               <AssetGlobalLineageLink />
    61|               <ReloadAllButton label="Reload definitions" />
    62|             </Box>
    63|           }
    64|         />


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AssetsGroupsGlobalGraphRoot.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-50 ---
     1| import {Page, PageHeader, Heading} from '@dagster-io/ui-components';
     2| import isEqual from 'lodash/isEqual';
     3| import * as React from 'react';
     4| import {useHistory, useParams} from 'react-router-dom';
     5| import {AssetGraphExplorer} from '../asset-graph/AssetGraphExplorer';
     6| import {AssetGraphExplorerFilters} from '../asset-graph/AssetGraphExplorerFilters';
     7| import {AssetGraphFetchScope} from '../asset-graph/useAssetGraphData';
     8| import {AssetLocation} from '../asset-graph/useFindAssetLocation';
     9| import {AssetGroupSelector} from '../graphql/types';
    10| import {useDocumentTitle} from '../hooks/useDocumentTitle';
    11| import {useQueryPersistedState} from '../hooks/useQueryPersistedState';
    12| import {ExplorerPath} from '../pipelines/PipelinePathUtils';
    13| import {ReloadAllButton} from '../workspace/ReloadAllButton';
    14| import {WorkspaceContext} from '../workspace/WorkspaceContext';
    15| import {buildAssetGroupSelector} from './AssetGroupSuggest';
    16| import {assetDetailsPathForKey} from './assetDetailsPathForKey';
    17| import {
    18|   globalAssetGraphPathFromString,
    19|   globalAssetGraphPathToString,
    20| } from './globalAssetGraphPathToString';
    21| interface AssetGroupRootParams {
    22|   0: string;
    23| }
    24| export const AssetsGroupsGlobalGraphRoot = () => {
    25|   const {0: path} = useParams<AssetGroupRootParams>();
    26|   const {visibleRepos} = React.useContext(WorkspaceContext);
    27|   const history = useHistory();
    28|   const [filters, setFilters] = useQueryPersistedState<{groups: AssetGroupSelector[]}>({
    29|     encode: ({groups}) => ({groups: groups.length ? JSON.stringify(groups) : undefined}),
    30|     decode: (qs) => ({groups: qs.groups ? JSON.parse(qs.groups) : []}),
    31|   });
    32|   useDocumentTitle(`Global Asset Lineage`);
    33|   const onChangeExplorerPath = React.useCallback(
    34|     (path: ExplorerPath, mode: 'push' | 'replace') => {
    35|       history[mode]({
    36|         pathname: globalAssetGraphPathToString(path),
    37|         search: history.location.search,
    38|       });
    39|     },
    40|     [history],
    41|   );
    42|   const onNavigateToSourceAssetNode = React.useCallback(
    43|     (node: AssetLocation) => {
    44|       history.push(assetDetailsPathForKey(node.assetKey, {view: 'definition'}));
    45|     },
    46|     [history],
    47|   );
    48|   const fetchOptions = React.useMemo(() => {
    49|     const options: AssetGraphFetchScope = {
    50|       hideEdgesToNodesOutsideQuery: false,

# --- HUNK 2: Lines 52-107 ---
    52|         if (
    53|           !visibleRepos.some(
    54|             (repo) =>
    55|               repo.repositoryLocation.name === node.repository.location.name &&
    56|               repo.repository.name === node.repository.name,
    57|           )
    58|         ) {
    59|           return true;
    60|         }
    61|         if (filters.groups?.length) {
    62|           const nodeGroup = buildAssetGroupSelector({definition: node});
    63|           if (!filters.groups.some((g) => isEqual(g, nodeGroup))) {
    64|             return true;
    65|           }
    66|         }
    67|         return false;
    68|       },
    69|     };
    70|     return options;
    71|   }, [filters.groups, visibleRepos]);
    72|   const assetGroups: AssetGroupSelector[] = React.useMemo(() => {
    73|     return visibleRepos.flatMap((repo) =>
    74|       repo.repository.assetGroups.map((g) => ({
    75|         groupName: g.groupName,
    76|         repositoryLocationName: repo.repositoryLocation.name,
    77|         repositoryName: repo.repository.name,
    78|       })),
    79|     );
    80|   }, [visibleRepos]);
    81|   return (
    82|     <Page style={{display: 'flex', flexDirection: 'column', paddingBottom: 0}}>
    83|       <PageHeader
    84|         title={<Heading>Global Asset Lineage</Heading>}
    85|         right={<ReloadAllButton label="Reload definitions" />}
    86|       />
    87|       <AssetGraphExplorer
    88|         fetchOptions={fetchOptions}
    89|         fetchOptionFilters={
    90|           <AssetGraphExplorerFilters
    91|             assetGroups={assetGroups}
    92|             visibleAssetGroups={React.useMemo(() => filters.groups || [], [filters.groups])}
    93|             setGroupFilters={React.useCallback(
    94|               (groups) => setFilters({...filters, groups}),
    95|               [filters, setFilters],
    96|             )}
    97|           />
    98|         }
    99|         options={{preferAssetRendering: true, explodeComposites: true}}
   100|         explorerPath={globalAssetGraphPathFromString(path)}
   101|         onChangeExplorerPath={onChangeExplorerPath}
   102|         onNavigateToSourceAssetNode={onNavigateToSourceAssetNode}
   103|       />
   104|     </Page>
   105|   );
   106| };
   107| export default AssetsGroupsGlobalGraphRoot;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AutoMaterializePolicyPage/AssetAutomaterializePolicyPage.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {Box, Colors, Subheading} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| import {FIFTEEN_SECONDS, useQueryRefreshAtInterval} from '../../app/QueryRefresh';
     5| import {useQueryPersistedState} from '../../hooks/useQueryPersistedState';
     6| import {AssetKey} from '../types';
     7| import {AutoMaterializeExperimentalBanner} from './AutoMaterializeExperimentalBanner';
     8| import {AutomaterializeLeftPanel} from './AutomaterializeLeftPanel';
     9| import {AutomaterializeMiddlePanel} from './AutomaterializeMiddlePanel';
    10| import {AutomaterializeRightPanel} from './AutomaterializeRightPanel';
    11| import {useEvaluationsQueryResult} from './useEvaluationsQueryResult';
    12| export const AssetAutomaterializePolicyPage = ({
    13|   assetKey,
    14|   assetHasDefinedPartitions,
    15| }: {
    16|   assetKey: AssetKey;
    17|   assetHasDefinedPartitions: boolean;
    18| }) => {
    19|   const {queryResult, paginationProps} = useEvaluationsQueryResult({assetKey});
    20|   useQueryRefreshAtInterval(queryResult, FIFTEEN_SECONDS);
    21|   const {evaluations} = React.useMemo(() => {

# --- HUNK 2: Lines 36-76 ---
    36|     queryResult.data?.assetNodeOrError,
    37|   ]);
    38|   const isFirstPage = !paginationProps.hasPrevCursor;
    39|   const [selectedEvaluationId, setSelectedEvaluationId] = useQueryPersistedState<
    40|     number | undefined
    41|   >({
    42|     queryKey: 'evaluation',
    43|     decode: (raw) => {
    44|       const value = parseInt(raw.evaluation);
    45|       return isNaN(value) ? undefined : value;
    46|     },
    47|   });
    48|   const selectedEvaluation = React.useMemo(() => {
    49|     if (selectedEvaluationId === undefined && isFirstPage) {
    50|       return evaluations[0];
    51|     }
    52|     return evaluations.find((evaluation) => evaluation.evaluationId === selectedEvaluationId);
    53|   }, [selectedEvaluationId, isFirstPage, evaluations]);
    54|   return (
    55|     <AutomaterializePage
    56|       style={{flex: 1, minHeight: 0, color: Colors.Gray700, overflow: 'hidden'}}
    57|       flex={{direction: 'column'}}
    58|     >
    59|       <Box padding={{horizontal: 24, vertical: 12}} border="bottom">
    60|         <AutoMaterializeExperimentalBanner />
    61|       </Box>
    62|       <Box flex={{direction: 'row'}} style={{minHeight: 0, flex: 1}}>
    63|         <Box flex={{direction: 'column', grow: 1}}>
    64|           <Box
    65|             flex={{alignItems: 'center'}}
    66|             padding={{vertical: 16, horizontal: 24}}
    67|             border="bottom"
    68|           >
    69|             <Subheading>Evaluation history</Subheading>
    70|           </Box>
    71|           <Box flex={{direction: 'row'}} style={{flex: 1, minHeight: 0}}>
    72|             <Box border="right" flex={{grow: 0, direction: 'column'}} style={{flex: '0 0 296px'}}>
    73|               <AutomaterializeLeftPanel
    74|                 assetHasDefinedPartitions={assetHasDefinedPartitions}
    75|                 evaluations={evaluations}
    76|                 paginationProps={paginationProps}


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AutoMaterializePolicyPage/AutoMaterializeExperimentalBanner.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-30 ---
     1| import {Alert, Colors, Icon, Tag, Tooltip} from '@dagster-io/ui-components';
     2| import React from 'react';
     3| const LearnMoreLink =
     4|   'https://docs.dagster.io/concepts/assets/asset-auto-execution#auto-materializing-assets-';
     5| export const AutoMaterializeExperimentalBanner = () => {
     6|   return (
     7|     <Alert
     8|       intent="info"
     9|       title="Auto-materialize policies are experimental"
    10|       icon={<Icon name="info" color={Colors.Blue700} />}
    11|       description={
    12|         <span>
    13|           You can learn more about this new feature and provide feedback{' '}
    14|           <a target="_blank" href={LearnMoreLink} rel="noreferrer">
    15|             here
    16|           </a>
    17|           .
    18|         </span>
    19|       }
    20|     />
    21|   );
    22| };
    23| export const AutoMaterializeExperimentalTag = () => {
    24|   return (
    25|     <Tooltip content="Click to learn more about this new feature and provide feedback">
    26|       <a target="_blank" href={LearnMoreLink} rel="noreferrer">
    27|         <Tag intent="primary">Experimental</Tag>
    28|       </a>
    29|     </Tooltip>
    30|   );


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AutoMaterializePolicyPage/AutomaterializeLeftPanel.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {Box, Caption, Colors, CursorPaginationControls} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| import {TimestampDisplay} from '../../schedules/TimestampDisplay';
     5| import {EvaluationCounts} from './EvaluationCounts';
     6| import {AutoMaterializeEvaluationRecordItemFragment} from './types/GetEvaluationsQuery.types';
     7| import {useEvaluationsQueryResult} from './useEvaluationsQueryResult';
     8| interface Props extends ListProps {
     9|   evaluations: AutoMaterializeEvaluationRecordItemFragment[];
    10|   paginationProps: ReturnType<typeof useEvaluationsQueryResult>['paginationProps'];
    11| }
    12| export const AutomaterializeLeftPanel = ({
    13|   assetHasDefinedPartitions,
    14|   evaluations,
    15|   paginationProps,
    16|   onSelectEvaluation,
    17|   selectedEvaluation,
    18| }: Props) => {
    19|   return (
    20|     <Box flex={{direction: 'column', grow: 1}} style={{overflowY: 'auto'}}>
    21|       <AutomaterializeLeftList

# --- HUNK 2: Lines 62-115 ---
    62|               <EvaluationCounts
    63|                 numRequested={numRequested}
    64|                 numSkipped={numSkipped}
    65|                 numDiscarded={numDiscarded}
    66|                 isPartitionedAsset={assetHasDefinedPartitions}
    67|                 selected={isSelected}
    68|               />
    69|             </Box>
    70|           </EvaluationListItem>
    71|         );
    72|       })}
    73|       <Box border="top" padding={{vertical: 20, horizontal: 12}} margin={{top: 12}}>
    74|         <Caption>Evaluations are retained for 30 days</Caption>
    75|       </Box>
    76|     </Box>
    77|   );
    78| };
    79| const PaginationWrapper = styled.div`
    80|   position: sticky;
    81|   bottom: 0;
    82|   background: ${Colors.White};
    83|   border-right: 1px solid ${Colors.KeylineGray};
    84|   box-shadow: inset 0 1px ${Colors.KeylineGray};
    85|   margin-top: -1px;
    86|   padding-bottom: 16px;
    87|   padding-top: 16px;
    88|   > * {
    89|     margin-top: 0;
    90|   }
    91| `;
    92| interface EvaluationListItemProps {
    93|   $selected: boolean;
    94| }
    95| const EvaluationListItem = styled.button<EvaluationListItemProps>`
    96|   background-color: ${({$selected}) => ($selected ? Colors.Blue50 : Colors.White)};
    97|   border: none;
    98|   border-radius: 8px;
    99|   color: ${({$selected}) => ($selected ? Colors.Blue700 : Colors.Dark)};
   100|   cursor: pointer;
   101|   margin: 2px 0;
   102|   text-align: left;
   103|   transition:
   104|     100ms background-color linear,
   105|     100ms color linear;
   106|   user-select: none;
   107|   &:hover {
   108|     background-color: ${({$selected}) => ($selected ? Colors.Blue50 : Colors.Gray10)};
   109|   }
   110|   &:focus,
   111|   &:active {
   112|     outline: none;
   113|   }
   114|   padding: 8px 12px;
   115| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AutoMaterializePolicyPage/CollapsibleSection.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-73 ---
     1| import {Box, Colors, Icon, Subheading, Tooltip} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| interface Props {
     5|   header: React.ReactNode;
     6|   details: JSX.Element | string;
     7|   headerRightSide?: React.ReactNode;
     8|   children: React.ReactNode;
     9| }
    10| export const CollapsibleSection = ({header, details, headerRightSide, children}: Props) => {
    11|   return (
    12|     <Collapsible
    13|       header={
    14|         <Box
    15|           flex={{
    16|             justifyContent: 'space-between',
    17|             gap: 12,
    18|             grow: 1,
    19|           }}
    20|         >
    21|           <Box flex={{direction: 'row', alignItems: 'center', gap: 8, grow: 1}}>
    22|             <Subheading>{header}</Subheading>
    23|             {details ? (
    24|               <Tooltip content={details} placement="top">
    25|                 <Icon color={Colors.Gray500} name="info" />
    26|               </Tooltip>
    27|             ) : null}
    28|           </Box>
    29|           {headerRightSide}
    30|         </Box>
    31|       }
    32|     >
    33|       <Box padding={{vertical: 12, left: 32, right: 16}}>{children}</Box>
    34|     </Collapsible>
    35|   );
    36| };
    37| export const Collapsible = ({
    38|   header,
    39|   children,
    40| }: {
    41|   header: React.ReactNode;
    42|   children: React.ReactNode;
    43| }) => {
    44|   const [isCollapsed, setIsCollapsed] = React.useState(false);
    45|   return (
    46|     <Box flex={{direction: 'column'}} border="bottom">
    47|       <SectionHeader onClick={() => setIsCollapsed(!isCollapsed)}>
    48|         <Box
    49|           flex={{direction: 'row', alignItems: 'center', gap: 6}}
    50|           padding={{vertical: 8, horizontal: 12}}
    51|           border="bottom"
    52|         >
    53|           <Icon
    54|             name="arrow_drop_down"
    55|             style={{transform: isCollapsed ? 'rotate(-90deg)' : 'rotate(0deg)'}}
    56|           />
    57|           <div>{header}</div>
    58|         </Box>
    59|       </SectionHeader>
    60|       {isCollapsed ? null : children}
    61|     </Box>
    62|   );
    63| };
    64| const SectionHeader = styled.button`
    65|   background-color: ${Colors.White};
    66|   border: 0;
    67|   cursor: pointer;
    68|   padding: 0;
    69|   margin: 0;
    70|   :focus {
    71|     outline: none;
    72|   }
    73| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AutoMaterializePolicyPage/EvaluationCounts.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-56 ---
     1| import {Box, Caption, Colors} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import {compactNumber} from '../../ui/formatters';
     4| interface Props {
     5|   numRequested: number;
     6|   numSkipped: number;
     7|   numDiscarded: number;
     8|   isPartitionedAsset: boolean;
     9|   selected: boolean;
    10| }
    11| export const EvaluationCounts = React.memo((props: Props) => {
    12|   const {numRequested, numSkipped, numDiscarded, isPartitionedAsset, selected} = props;
    13|   const requested =
    14|     numRequested || isPartitionedAsset ? (
    15|       <Caption
    16|         key="requested"
    17|         color={selected ? Colors.Blue700 : numRequested ? Colors.Green700 : Colors.Gray700}
    18|       >
    19|         {isPartitionedAsset ? `${compactNumber(numRequested)} launched` : 'Launched'}
    20|       </Caption>
    21|     ) : null;
    22|   const skipped =
    23|     numSkipped || isPartitionedAsset ? (
    24|       <Caption
    25|         key="skipped"
    26|         color={selected ? Colors.Blue700 : numSkipped ? Colors.Yellow700 : Colors.Gray700}
    27|       >
    28|         {isPartitionedAsset ? `${compactNumber(numSkipped)} skipped` : 'Skipped'}
    29|       </Caption>
    30|     ) : null;
    31|   const discarded =
    32|     numDiscarded || isPartitionedAsset ? (
    33|       <Caption
    34|         key="discarded"
    35|         color={selected ? Colors.Blue700 : numDiscarded ? Colors.Red700 : Colors.Gray700}
    36|       >
    37|         {isPartitionedAsset ? `${compactNumber(numDiscarded)} discarded` : 'Discarded'}
    38|       </Caption>
    39|     ) : null;
    40|   const filtered = [requested, skipped, discarded].filter(
    41|     (element): element is React.ReactElement => !!element,
    42|   );
    43|   return (
    44|     <Box flex={{direction: 'row', gap: 2, alignItems: 'center'}} style={{whiteSpace: 'nowrap'}}>
    45|       {filtered
    46|         .map((element, ii) => [
    47|           element,
    48|           <Caption key={`spacer-${ii}`} color={selected ? Colors.Blue200 : Colors.Gray200}>
    49|             /
    50|           </Caption>,
    51|         ])
    52|         .flat()
    53|         .slice(0, -1)}
    54|     </Box>
    55|   );
    56| });


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/AutoMaterializePolicyPage/RuleEvaluationOutcomes.tsx
# Total hunks: 4
# ====================================================================
# --- HUNK 1: Lines 1-50 ---
     1| import {Box, Colors, Icon, Tag} from '@dagster-io/ui-components';
     2| import groupBy from 'lodash/groupBy';
     3| import * as React from 'react';
     4| import {assertUnreachable} from '../../app/Util';
     5| import {
     6|   AutoMaterializeDecisionType,
     7|   AutoMaterializeRule,
     8|   AutoMaterializeRuleEvaluation,
     9| } from '../../graphql/types';
    10| import {AutomaterializeRequestedPartitionsLink} from './AutomaterializeRequestedPartitionsLink';
    11| import {CollapsibleSection} from './CollapsibleSection';
    12| import {ParentUpdatedLink} from './ParentUpdatedLink';
    13| import {ParentUpdatedPartitionLink} from './ParentUpdatedPartitionLink';
    14| import {WaitingOnAssetKeysLink} from './WaitingOnAssetKeysLink';
    15| import {WaitingOnAssetKeysPartitionLink} from './WaitingOnAssetKeysPartitionLink';
    16| import {RuleWithEvaluationsFragment} from './types/GetEvaluationsQuery.types';
    17| interface RuleEvaluationOutcomeProps {
    18|   text: string;
    19|   met: boolean;
    20|   rightElement?: React.ReactNode;
    21| }
    22| const RuleEvaluationOutcome = ({text, met, rightElement}: RuleEvaluationOutcomeProps) => {
    23|   return (
    24|     <Box
    25|       flex={{direction: 'row', alignItems: 'center', justifyContent: 'space-between'}}
    26|       style={{height: 24}}
    27|     >
    28|       <Box flex={{direction: 'row', alignItems: 'center', gap: 8}}>
    29|         <Icon name={met ? 'done' : 'close'} color={met ? Colors.Dark : Colors.Gray500} />
    30|         <div style={{color: met ? Colors.Dark : Colors.Gray500}}>
    31|           {text.slice(0, 1).toUpperCase()}
    32|           {text.slice(1)}
    33|         </div>
    34|       </Box>
    35|       {rightElement}
    36|     </Box>
    37|   );
    38| };
    39| const SECTIONS: {
    40|   decisionType: AutoMaterializeDecisionType;
    41|   header: string;
    42|   details: string;
    43|   intent?: React.ComponentProps<typeof Tag>['intent'];
    44|   partitionedOnly?: boolean;
    45| }[] = [
    46|   {
    47|     decisionType: AutoMaterializeDecisionType.MATERIALIZE,
    48|     header: 'Materialization conditions met',
    49|     details:
    50|       'These conditions trigger a materialization, unless they are blocked by a skip or discard condition.',

# --- HUNK 2: Lines 109-186 ---
   109|                       />
   110|                     )
   111|                   }
   112|                 />
   113|               );
   114|             })}
   115|           </Box>
   116|         </CollapsibleSection>
   117|       ))}
   118|     </>
   119|   );
   120| };
   121| const RightElementForEvaluations = ({
   122|   evaluations,
   123| }: {
   124|   evaluations: AutoMaterializeRuleEvaluation[];
   125|   intent?: React.ComponentProps<typeof Tag>['intent'];
   126| }) => {
   127|   const first = evaluations.map((e) => e.evaluationData!).find(Boolean);
   128|   if (!first) {
   129|     return <div style={{color: Colors.Gray400}}>&ndash;</div>;
   130|   }
   131|   switch (first.__typename) {
   132|     case 'ParentMaterializedRuleEvaluationData':
   133|       return (
   134|         <ParentUpdatedLink
   135|           updatedAssetKeys={first.updatedAssetKeys || []}
   136|           willUpdateAssetKeys={first.willUpdateAssetKeys || []}
   137|         />
   138|       );
   139|     case 'WaitingOnKeysRuleEvaluationData':
   140|       return <WaitingOnAssetKeysLink assetKeys={first.waitingOnAssetKeys || []} />;
   141|     case 'TextRuleEvaluationData':
   142|       return <span>{first.text}</span>;
   143|     default:
   144|       assertUnreachable(first);
   145|   }
   146|   return <span />;
   147| };
   148| const partitionKeysOf = (e: AutoMaterializeRuleEvaluation) =>
   149|   e.partitionKeysOrError?.__typename === 'PartitionKeys'
   150|     ? e.partitionKeysOrError.partitionKeys
   151|     : [];
   152| const RightElementForPartitionedEvaluations = ({
   153|   evaluations,
   154|   intent,
   155| }: {
   156|   evaluations: AutoMaterializeRuleEvaluation[];
   157|   intent?: React.ComponentProps<typeof Tag>['intent'];
   158| }) => {
   159|   const evaluationsWithData = evaluations.filter((e) => !!e.evaluationData);
   160|   const first = evaluationsWithData[0]?.evaluationData;
   161|   if (!first) {
   162|     const partitionKeys = evaluations.flatMap(partitionKeysOf);
   163|     return partitionKeys.length ? (
   164|       <AutomaterializeRequestedPartitionsLink partitionKeys={partitionKeys} intent={intent} />
   165|     ) : (
   166|       <div style={{color: Colors.Gray400}}>&ndash;</div>
   167|     );
   168|   }
   169|   const typename = first.__typename;
   170|   switch (typename) {
   171|     case 'ParentMaterializedRuleEvaluationData':
   172|       const updatedAssetKeys = Object.fromEntries(
   173|         evaluationsWithData.flatMap((e) =>
   174|           partitionKeysOf(e).map((key) => [
   175|             key,
   176|             (e.evaluationData?.__typename === 'ParentMaterializedRuleEvaluationData' &&
   177|               e.evaluationData.updatedAssetKeys) ||
   178|               [],
   179|           ]),
   180|         ),
   181|       );
   182|       const willUpdateAssetKeys = Object.fromEntries(
   183|         evaluationsWithData.flatMap((e) =>
   184|           partitionKeysOf(e).map((key) => [
   185|             key,
   186|             (e.evaluationData?.__typename === 'ParentMaterializedRuleEvaluationData' &&


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/BackfillPreviewModal.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-22 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {Box, Button, Colors, Dialog, DialogFooter, Spinner} from '@dagster-io/ui-components';
     3| import {useVirtualizer} from '@tanstack/react-virtual';
     4| import React from 'react';
     5| import styled from 'styled-components';
     6| import {tokenForAssetKey} from '../asset-graph/Utils';
     7| import {TargetPartitionsDisplay} from '../instance/backfill/TargetPartitionsDisplay';
     8| import {testId} from '../testing/testId';
     9| import {Container, HeaderCell, Inner, Row, RowCell} from '../ui/VirtualizedTable';
    10| import {AssetLink} from './AssetLink';
    11| import {asAssetKeyInput} from './asInput';
    12| import {AssetKey} from './types';
    13| import {
    14|   BackfillPreviewQuery,
    15|   BackfillPreviewQueryVariables,
    16| } from './types/BackfillPreviewModal.types';
    17| import {
    18|   BackfillPolicyForLaunchAssetFragment,
    19|   PartitionDefinitionForLaunchAssetFragment,
    20| } from './types/LaunchAssetExecutionButton.types';
    21| interface BackfillPreviewModalProps {
    22|   isOpen: boolean;

# --- HUNK 2: Lines 65-151 ---
    65|       style={{width: '90vw', maxWidth: 1100, transform: 'scale(1)'}}
    66|     >
    67|       <Container
    68|         ref={parentRef}
    69|         style={{maxHeight: '50vh'}}
    70|         data-testid={testId('backfill-preview-modal-content')}
    71|       >
    72|         <BackfillPreviewTableHeader />
    73|         <Inner $totalHeight={totalHeight}>
    74|           {items.map(({index, size, start}) => {
    75|             const {assetKey, partitionDefinition, backfillPolicy} = assets[index]!;
    76|             const token = tokenForAssetKey(assetKey);
    77|             const partitions = partitionsByAssetToken[token];
    78|             return (
    79|               <Row key={token} $height={size} $start={start}>
    80|                 <RowGrid border={index < assets.length - 1 ? 'bottom' : undefined}>
    81|                   <RowCell>
    82|                     <AssetLink path={assetKey.path} textStyle="middle-truncate" icon="asset" />
    83|                   </RowCell>
    84|                   {backfillPolicy ? (
    85|                     <RowCell style={{color: Colors.Dark}}>{backfillPolicy?.description}</RowCell>
    86|                   ) : (
    87|                     <RowCell>{'\u2013'}</RowCell>
    88|                   )}
    89|                   {partitionDefinition ? (
    90|                     <RowCell style={{color: Colors.Dark}}>
    91|                       {partitionDefinition?.description}
    92|                     </RowCell>
    93|                   ) : (
    94|                     <RowCell>{'\u2013'}</RowCell>
    95|                   )}
    96|                   <RowCell style={{color: Colors.Dark, alignItems: 'flex-start'}}>
    97|                     {partitions ? (
    98|                       <TargetPartitionsDisplay targetPartitions={partitions} />
    99|                     ) : (
   100|                       <Spinner purpose="body-text" />
   101|                     )}
   102|                   </RowCell>
   103|                 </RowGrid>
   104|               </Row>
   105|             );
   106|           })}
   107|         </Inner>
   108|       </Container>
   109|       <DialogFooter topBorder>
   110|         <Button intent="primary" autoFocus={true} onClick={() => setOpen(false)}>
   111|           OK
   112|         </Button>
   113|       </DialogFooter>
   114|     </Dialog>
   115|   );
   116| };
   117| const RowGrid = styled(Box)`
   118|   display: grid;
   119|   grid-template-columns: ${TEMPLATE_COLUMNS};
   120|   height: 100%;
   121| `;
   122| export const BackfillPreviewTableHeader = () => {
   123|   return (
   124|     <Box
   125|       border="bottom"
   126|       style={{
   127|         display: 'grid',
   128|         gridTemplateColumns: TEMPLATE_COLUMNS,
   129|         height: '32px',
   130|         fontSize: '12px',
   131|         color: Colors.Gray600,
   132|       }}
   133|     >
   134|       <HeaderCell>Asset key</HeaderCell>
   135|       <HeaderCell>Backfill policy</HeaderCell>
   136|       <HeaderCell>Partition definition</HeaderCell>
   137|       <HeaderCell>Partitions to launch</HeaderCell>
   138|     </Box>
   139|   );
   140| };
   141| export const BACKFILL_PREVIEW_QUERY = gql`
   142|   query BackfillPreviewQuery($partitionNames: [String!]!, $assetKeys: [AssetKeyInput!]!) {
   143|     assetBackfillPreview(params: {partitionNames: $partitionNames, assetSelection: $assetKeys}) {
   144|       assetKey {
   145|         path
   146|       }
   147|       partitions {
   148|         partitionKeys
   149|         ranges {
   150|           start
   151|           end


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/CalculateChangedAndMissingDialog.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-32 ---
     1| import {useQuery, gql} from '@apollo/client';
     2| import {
     3|   Spinner,
     4|   Dialog,
     5|   DialogBody,
     6|   DialogFooter,
     7|   Button,
     8|   Box,
     9|   Icon,
    10|   Colors,
    11|   Checkbox,
    12|   MiddleTruncate,
    13| } from '@dagster-io/ui-components';
    14| import {useVirtualizer} from '@tanstack/react-virtual';
    15| import React from 'react';
    16| import {Link} from 'react-router-dom';
    17| import styled from 'styled-components';
    18| import {showCustomAlert} from '../app/CustomAlertProvider';
    19| import {displayNameForAssetKey} from '../asset-graph/Utils';
    20| import {Container, Inner, Row} from '../ui/VirtualizedTable';
    21| import {isAssetStale, isAssetMissing} from './Stale';
    22| import {asAssetKeyInput} from './asInput';
    23| import {assetDetailsPathForKey} from './assetDetailsPathForKey';
    24| import {AssetKey} from './types';
    25| import {
    26|   AssetStaleStatusQuery,
    27|   AssetStaleStatusQueryVariables,
    28| } from './types/CalculateChangedAndMissingDialog.types';
    29| export const CalculateChangedAndMissingDialog = React.memo(
    30|   ({
    31|     isOpen,
    32|     onClose,

# --- HUNK 2: Lines 88-178 ---
    88|           </Box>
    89|         );
    90|       }
    91|       if (staleOrMissing?.length) {
    92|         return (
    93|           <>
    94|             <RowGrid border="bottom" padding={{bottom: 8}}>
    95|               <Checkbox
    96|                 id="check-all"
    97|                 checked={checked.size === staleOrMissing.length}
    98|                 onChange={() => {
    99|                   setChecked((checked) => {
   100|                     if (checked.size === staleOrMissing.length) {
   101|                       return new Set();
   102|                     } else {
   103|                       return new Set(staleOrMissing);
   104|                     }
   105|                   });
   106|                 }}
   107|               />
   108|               <label htmlFor="check-all" style={{color: Colors.Gray500, cursor: 'pointer'}}>
   109|                 Asset Name
   110|               </label>
   111|             </RowGrid>
   112|             <Container ref={containerRef} style={{maxHeight: '400px'}}>
   113|               <Inner $totalHeight={totalHeight}>
   114|                 {items.map(({index, key, size, start, measureElement}) => {
   115|                   const item = staleOrMissing[index]!;
   116|                   return (
   117|                     <Row $height={size} $start={start} key={key} ref={measureElement}>
   118|                       <RowGrid border="bottom">
   119|                         <Checkbox
   120|                           id={`checkbox-${key}`}
   121|                           checked={checked.has(item)}
   122|                           onChange={() => {
   123|                             setChecked((checked) => {
   124|                               const copy = new Set(checked);
   125|                               if (copy.has(item)) {
   126|                                 copy.delete(item);
   127|                               } else {
   128|                                 copy.add(item);
   129|                               }
   130|                               return copy;
   131|                             });
   132|                           }}
   133|                         />
   134|                         <Box
   135|                           as="label"
   136|                           htmlFor={`checkbox-${key}`}
   137|                           flex={{alignItems: 'center', gap: 4}}
   138|                           style={{cursor: 'pointer'}}
   139|                         >
   140|                           <Box style={{overflow: 'hidden'}}>
   141|                             <MiddleTruncate text={displayNameForAssetKey(item)} />
   142|                           </Box>
   143|                           <Link to={assetDetailsPathForKey(item)} target="_blank">
   144|                             <Icon name="open_in_new" color={Colors.Link} />
   145|                           </Link>
   146|                         </Box>
   147|                       </RowGrid>
   148|                     </Row>
   149|                   );
   150|                 })}
   151|               </Inner>
   152|             </Container>
   153|           </>
   154|         );
   155|       }
   156|       return (
   157|         <Box flex={{alignItems: 'center', gap: 8}}>
   158|           <Icon name="check_circle" color={Colors.Green500} />
   159|           <div>All assets are up to date</div>
   160|         </Box>
   161|       );
   162|     };
   163|     return (
   164|       <>
   165|         <Dialog isOpen={isOpen} onClose={onClose} title="Materialize changed and missing assets">
   166|           <DialogBody>{content()}</DialogBody>
   167|           <DialogFooter topBorder>
   168|             {loading ? (
   169|               <Button onClick={onClose}>Cancel</Button>
   170|             ) : staleOrMissing?.length ? (
   171|               <Button
   172|                 intent="primary"
   173|                 onClick={(e) => {
   174|                   onMaterializeAssets(Array.from(checked), e);
   175|                   onClose();
   176|                 }}
   177|                 disabled={checked.size === 0}
   178|               >


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/DependsOnSelfBanner.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-17 ---
     1| import {Alert, Box, Colors, Icon} from '@dagster-io/ui-components';
     2| import React from 'react';
     3| export const DependsOnSelfBanner = () => {
     4|   return (
     5|     <Box padding={{vertical: 16, left: 24, right: 12}} border="bottom">
     6|       <Alert
     7|         intent="info"
     8|         icon={
     9|           <Icon name="history_toggle_off" size={16} color={Colors.Blue700} style={{marginTop: 1}} />
    10|         }
    11|         title={
    12|           <div style={{fontWeight: 400}}>This asset depends on earlier partitions of itself. </div>
    13|         }
    14|       />
    15|     </Box>
    16|   );
    17| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/LastMaterializationMetadata.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {Box, Colors, Group, Icon, Mono, NonIdealState, Table} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import {Link} from 'react-router-dom';
     4| import styled from 'styled-components';
     5| import {Timestamp} from '../app/time/Timestamp';
     6| import {isHiddenAssetGroupJob, LiveDataForNode} from '../asset-graph/Utils';
     7| import {AssetKeyInput} from '../graphql/types';
     8| import {MetadataEntry} from '../metadata/MetadataEntry';
     9| import {Description} from '../pipelines/Description';
    10| import {PipelineReference} from '../pipelines/PipelineReference';
    11| import {linkToRunEvent, titleForRun} from '../runs/RunUtils';
    12| import {useStepLogs} from '../runs/StepLogsDialog';
    13| import {isThisThingAJob, useRepository} from '../workspace/WorkspaceContext';
    14| import {buildRepoAddress} from '../workspace/buildRepoAddress';
    15| import {AssetLineageElements} from './AssetLineageElements';
    16| import {StaleReasonsTags} from './Stale';
    17| import {isRunlessEvent} from './isRunlessEvent';
    18| import {
    19|   AssetObservationFragment,
    20|   AssetMaterializationFragment,
    21| } from './types/useRecentAssetEvents.types';

# --- HUNK 2: Lines 72-146 ---
    72|                         </Box>
    73|                         {stepLogs.button}
    74|                       </Box>
    75|                       {!isHiddenAssetGroupJob(latestRun.pipelineName) && (
    76|                         <>
    77|                           <Box padding={{left: 8, top: 4}}>
    78|                             <PipelineReference
    79|                               showIcon
    80|                               pipelineName={latestRun.pipelineName}
    81|                               pipelineHrefContext={repoAddress || 'repo-unknown'}
    82|                               snapshotId={latestRun.pipelineSnapshotId}
    83|                               isJob={isThisThingAJob(repo, latestRun.pipelineName)}
    84|                             />
    85|                           </Box>
    86|                           <Group
    87|                             direction="row"
    88|                             padding={{left: 8}}
    89|                             spacing={8}
    90|                             alignItems="center"
    91|                           >
    92|                             <Icon name="linear_scale" color={Colors.Gray400} />
    93|                             <Link to={linkToRunEvent(latestRun, latestEvent)}>
    94|                               {latestEvent.stepKey}
    95|                             </Link>
    96|                           </Group>
    97|                         </>
    98|                       )}
    99|                     </div>
   100|                   ) : (
   101|                     'No materialization events'
   102|                   )}
   103|                 </td>
   104|               </tr>
   105|             ) : null}
   106|             {latestEvent.partition ? (
   107|               <tr>
   108|                 <td>Partition</td>
   109|                 <td>{latestEvent.partition}</td>
   110|               </tr>
   111|             ) : null}
   112|             <tr>
   113|               <td>Timestamp</td>
   114|               <td>
   115|                 <Box flex={{gap: 8, alignItems: 'center'}}>
   116|                   <Timestamp timestamp={{ms: Number(latestEvent.timestamp)}} />
   117|                   {liveData && (
   118|                     <StaleReasonsTags assetKey={assetKey} liveData={liveData} include="all" />
   119|                   )}
   120|                 </Box>
   121|               </td>
   122|             </tr>
   123|             {isRunlessEvent(latestEvent) ? (
   124|               <tr>
   125|                 <td>Description</td>
   126|                 <td style={{color: Colors.Gray800}}>
   127|                   <Description
   128|                     description={latestEvent.description}
   129|                     fontSize={14}
   130|                     maxHeight={150}
   131|                   />
   132|                 </td>
   133|               </tr>
   134|             ) : null}
   135|             {latestAssetLineage?.length ? (
   136|               <tr>
   137|                 <td>Parent assets</td>
   138|                 <td>
   139|                   <AssetLineageElements
   140|                     elements={latestAssetLineage}
   141|                     timestamp={latestEvent.timestamp}
   142|                   />
   143|                 </td>
   144|               </tr>
   145|             ) : null}
   146|             {latestEvent.metadataEntries.map((entry) => (


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/LaunchAssetChoosePartitionsDialog.tsx
# Total hunks: 5
# ====================================================================
# --- HUNK 1: Lines 1-36 ---
     1| import {gql, useApolloClient, useQuery} from '@apollo/client';
     2| import {Radio} from '@blueprintjs/core';
     3| import {
     4|   Alert,
     5|   Box,
     6|   Button,
     7|   ButtonLink,
     8|   Checkbox,
     9|   Colors,
    10|   Dialog,
    11|   DialogFooter,
    12|   DialogHeader,
    13|   Icon,
    14|   RadioContainer,
    15|   Subheading,
    16|   Tooltip,
    17| } from '@dagster-io/ui-components';
    18| import reject from 'lodash/reject';
    19| import React from 'react';
    20| import {useHistory} from 'react-router-dom';
    21| import {showCustomAlert} from '../app/CustomAlertProvider';
    22| import {PipelineRunTag} from '../app/ExecutionSessionStorage';
    23| import {usePermissionsForLocation} from '../app/Permissions';
    24| import {PythonErrorInfo} from '../app/PythonErrorInfo';
    25| import {
    26|   displayNameForAssetKey,
    27|   isHiddenAssetGroupJob,
    28|   itemWithAssetKey,
    29| } from '../asset-graph/Utils';
    30| import {AssetKey} from '../assets/types';
    31| import {LaunchBackfillParams, PartitionDefinitionType} from '../graphql/types';
    32| import {LAUNCH_PARTITION_BACKFILL_MUTATION} from '../instance/backfill/BackfillUtils';
    33| import {
    34|   LaunchPartitionBackfillMutation,
    35|   LaunchPartitionBackfillMutationVariables,
    36| } from '../instance/backfill/types/BackfillUtils.types';

# --- HUNK 2: Lines 348-387 ---
   348|     }
   349|     if (!launchAsBackfill && !canLaunchPipelineExecution) {
   350|       return (
   351|         <Tooltip content={disabledReasons.canLaunchPipelineExecution}>
   352|           <Button disabled>Launch 1 run</Button>
   353|         </Tooltip>
   354|       );
   355|     }
   356|     return (
   357|       <Button
   358|         data-testid={testId('launch-button')}
   359|         intent="primary"
   360|         onClick={onLaunch}
   361|         disabled={target.type === 'pureAll' ? false : keysFiltered.length === 0}
   362|         loading={launching}
   363|       >
   364|         {launching ? 'Launching...' : launchAsBackfill ? 'Launch backfill' : `Launch 1 run`}
   365|       </Button>
   366|     );
   367|   };
   368|   return (
   369|     <>
   370|       <div data-testid={testId('choose-partitions-dialog')}>
   371|         <Warnings
   372|           displayedPartitionDefinition={displayedPartitionDefinition}
   373|           launchAsBackfill={launchAsBackfill}
   374|           upstreamAssetKeys={upstreamAssetKeys}
   375|           selections={selections}
   376|           setSelections={setSelections}
   377|         />
   378|         {target.type === 'pureAll' ? (
   379|           <ToggleableSection
   380|             isInitiallyOpen={true}
   381|             title={
   382|               <Box flex={{direction: 'row', justifyContent: 'space-between'}}>
   383|                 <Subheading>Partition selection</Subheading>
   384|                 <span>All partitions</span>
   385|               </Box>
   386|             }
   387|           >

# --- HUNK 3: Lines 447-512 ---
   447|                   dimensionType={range.dimension.type}
   448|                   selected={range.selectedKeys}
   449|                   setSelected={(selectedKeys) =>
   450|                     setSelections((selections) =>
   451|                       selections.map((r) =>
   452|                         r.dimension === range.dimension ? {...r, selectedKeys} : r,
   453|                       ),
   454|                     )
   455|                   }
   456|                   partitionDefinitionName={
   457|                     displayedPartitionDefinition?.name ||
   458|                     displayedBaseAsset?.partitionDefinition?.dimensionTypes.find(
   459|                       (d) => d.name === range.dimension.name,
   460|                     )?.dynamicPartitionsDefinitionName
   461|                   }
   462|                   repoAddress={repoAddress}
   463|                   refetch={refetch}
   464|                 />
   465|               </Box>
   466|             ))}
   467|             <BackfillPreviewModal
   468|               assets={assets}
   469|               keysFiltered={keysFiltered}
   470|               isOpen={previewOpen}
   471|               setOpen={setPreviewOpen}
   472|             />
   473|             {target.type === 'pureWithAnchorAsset' ? (
   474|               <PartitionSelectionNotice
   475|                 onShowPreview={() => setPreviewOpen(true)}
   476|                 text={
   477|                   `Dagster will materialize all partitions downstream of the ` +
   478|                   `selected partitions for the selected assets, using separate runs 
   479|                   ${backfillPolicyVaries ? `and obeying backfill policies.` : `as needed.`}`
   480|                 }
   481|               />
   482|             ) : backfillPolicyVaries ? (
   483|               <PartitionSelectionNotice
   484|                 onShowPreview={() => setPreviewOpen(true)}
   485|                 text={
   486|                   `Dagster will materialize the selected partitions for the ` +
   487|                   `selected assets using varying backfill policies.`
   488|                 }
   489|               />
   490|             ) : assets[0]?.backfillPolicy ? (
   491|               <PartitionSelectionNotice text={assets[0].backfillPolicy.description} />
   492|             ) : undefined}
   493|           </ToggleableSection>
   494|         )}
   495|         <ToggleableSection
   496|           title={
   497|             <Box flex={{direction: 'row', justifyContent: 'space-between'}}>
   498|               <Subheading>Tags</Subheading>
   499|               <span>{tags.length} tags</span>
   500|             </Box>
   501|           }
   502|           isInitiallyOpen={false}
   503|         >
   504|           <Box padding={{vertical: 16, horizontal: 20}} flex={{direction: 'column', gap: 12}}>
   505|             <TagEditor
   506|               tagsFromSession={tags}
   507|               onChange={setTags}
   508|               open={tagEditorOpen}
   509|               onRequestClose={() => setTagEditorOpen(false)}
   510|             />
   511|             <div>Tags will be applied to all backfill runs</div>
   512|             {tags.length ? (

# --- HUNK 4: Lines 548-607 ---
   548|                   <Subheading>Launch as...</Subheading>
   549|                   <Radio
   550|                     data-testid={testId('ranges-as-tags-true-radio')}
   551|                     checked={canLaunchWithRangesAsTags && launchWithRangesAsTags}
   552|                     disabled={!canLaunchWithRangesAsTags}
   553|                     onChange={() => setLaunchWithRangesAsTags(!launchWithRangesAsTags)}
   554|                   >
   555|                     <Box flex={{direction: 'row', alignItems: 'center', gap: 8}}>
   556|                       <span>Single run</span>
   557|                       <Tooltip
   558|                         targetTagName="div"
   559|                         position="top-left"
   560|                         content={
   561|                           <div style={{maxWidth: 300}}>
   562|                             This option requires that your assets are written to operate on a
   563|                             partition key range via context.asset_partition_key_range_for_output or
   564|                             context.asset_partitions_time_window_for_output.
   565|                           </div>
   566|                         }
   567|                       >
   568|                         <Icon name="info" color={Colors.Gray500} />
   569|                       </Tooltip>
   570|                     </Box>
   571|                   </Radio>
   572|                   <Radio
   573|                     data-testid={testId('ranges-as-tags-false-radio')}
   574|                     checked={!canLaunchWithRangesAsTags || !launchWithRangesAsTags}
   575|                     disabled={!canLaunchWithRangesAsTags}
   576|                     onChange={() => setLaunchWithRangesAsTags(!launchWithRangesAsTags)}
   577|                   >
   578|                     Multiple runs (One per selected partition)
   579|                   </Radio>
   580|                 </RadioContainer>
   581|               ) : null}
   582|             </Box>
   583|           </ToggleableSection>
   584|         )}
   585|       </div>
   586|       <DialogFooter
   587|         topBorder
   588|         left={
   589|           'partitionSetName' in target && (
   590|             <RunningBackfillsNotice partitionSetName={target.partitionSetName} />
   591|           )
   592|         }
   593|       >
   594|         <Button intent="none" onClick={() => setOpen(false)}>
   595|           Cancel
   596|         </Button>
   597|         {launchButton()}
   598|       </DialogFooter>
   599|     </>
   600|   );
   601| };
   602| const UpstreamUnavailableWarning = ({
   603|   upstreamAssetKeys,
   604|   selections,
   605|   setSelections,
   606| }: {
   607|   upstreamAssetKeys: AssetKey[];

# --- HUNK 5: Lines 715-780 ---
   715|         )
   716|         .map((a) => a.assetKey),
   717|     [upstreamAssets, displayedPartitionDefinition],
   718|   );
   719|   const alerts = [
   720|     UpstreamUnavailableWarning({
   721|       upstreamAssetKeys: upstreamAssetKeysSamePartitioning,
   722|       selections,
   723|       setSelections,
   724|     }),
   725|     instance && launchAsBackfill && DaemonNotRunningAlert({instance}),
   726|     instance && launchAsBackfill && UsingDefaultLauncherAlert({instance}),
   727|   ]
   728|     .filter((a) => !!a)
   729|     .map((a, index) => <Box key={index}>{a}</Box>);
   730|   if (!instance || !alerts.length) {
   731|     return null;
   732|   }
   733|   return (
   734|     <ToggleableSection
   735|       background={Colors.Yellow50}
   736|       isInitiallyOpen={false}
   737|       title={
   738|         <Box
   739|           flex={{direction: 'row', justifyContent: 'space-between', alignItems: 'center'}}
   740|           style={{color: Colors.Yellow700}}
   741|         >
   742|           <Box flex={{alignItems: 'center', gap: 12}}>
   743|             <Icon name="warning" color={Colors.Yellow700} />
   744|             <Subheading>Warnings</Subheading>
   745|           </Box>
   746|           <span>{alerts.length > 1 ? `${alerts.length} warnings` : `1 warning`}</span>
   747|         </Box>
   748|       }
   749|     >
   750|       <Box flex={{direction: 'column', gap: 16}} padding={{vertical: 12, horizontal: 20}}>
   751|         {alerts}
   752|       </Box>
   753|     </ToggleableSection>
   754|   );
   755| };
   756| const PartitionSelectionNotice = ({
   757|   text,
   758|   onShowPreview,
   759| }: {
   760|   text: string;
   761|   onShowPreview?: () => void;
   762| }) => {
   763|   return (
   764|     <Box padding={{horizontal: 16, bottom: 16}} border="bottom">
   765|       <Alert
   766|         intent="info"
   767|         title={
   768|           <Box flex={{gap: 12, alignItems: 'flex-start'}}>
   769|             <span>{text}</span>
   770|             {onShowPreview && (
   771|               <Button data-testid={testId('backfill-preview-button')} onClick={onShowPreview}>
   772|                 Preview
   773|               </Button>
   774|             )}
   775|           </Box>
   776|         }
   777|       />
   778|     </Box>
   779|   );
   780| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/PartitionHealthSummary.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-63 ---
     1| import {Spinner, Box, Colors, Caption} from '@dagster-io/ui-components';
     2| import React from 'react';
     3| import {displayNameForAssetKey} from '../asset-graph/Utils';
     4| import {PartitionStatus} from '../partitions/PartitionStatus';
     5| import {AssetPartitionStatus} from './AssetPartitionStatus';
     6| import {isTimeseriesDimension} from './MultipartitioningSupport';
     7| import {AssetKey} from './types';
     8| import {PartitionHealthData, PartitionDimensionSelection} from './usePartitionHealthData';
     9| interface Props {
    10|   assetKey: AssetKey;
    11|   showAssetKey?: boolean;
    12|   data: PartitionHealthData[];
    13|   selections?: PartitionDimensionSelection[];
    14| }
    15| export const PartitionHealthSummary = React.memo((props: Props) => {
    16|   const {showAssetKey, assetKey, data, selections} = props;
    17|   const assetData = data.find((d) => JSON.stringify(d.assetKey) === JSON.stringify(assetKey));
    18|   if (!assetData) {
    19|     return (
    20|       <div style={{minHeight: 55, position: 'relative'}}>
    21|         <Spinner purpose="section" />
    22|       </div>
    23|     );
    24|   }
    25|   const keysForTotals = selections
    26|     ? selections.map((r) => r.selectedKeys)
    27|     : assetData.dimensions.map((d) => d.partitionKeys);
    28|   const total = keysForTotals.reduce((total, d) => d.length * total, 1);
    29|   const success = keysForTotals
    30|     .reduce(
    31|       (combinations, d) =>
    32|         combinations.length
    33|           ? combinations.flatMap((keys) => d.map((key) => [...keys, key]))
    34|           : d.map((key) => [key]),
    35|       [] as string[][],
    36|     )
    37|     .filter((dkeys) => assetData.stateForKey(dkeys) === AssetPartitionStatus.MATERIALIZED).length;
    38|   return (
    39|     <Box color={Colors.Gray500}>
    40|       <Box flex={{justifyContent: 'space-between'}} style={{fontWeight: 600}} margin={{bottom: 4}}>
    41|         <Caption>{showAssetKey ? displayNameForAssetKey(assetKey) : 'Materialized'}</Caption>
    42|         <Caption>{`${success.toLocaleString()}/${total.toLocaleString()}`}</Caption>
    43|       </Box>
    44|       {assetData.dimensions.map((dimension, dimensionIdx) => (
    45|         <Box key={dimensionIdx} margin={{bottom: 4}}>
    46|           {assetData.dimensions.length > 1 && <Caption>{dimension.name}</Caption>}
    47|           <PartitionStatus
    48|             small
    49|             partitionNames={dimension.partitionKeys}
    50|             splitPartitions={!isTimeseriesDimension(dimension)}
    51|             selected={selections ? selections[dimensionIdx]!.selectedKeys : undefined}
    52|             health={{
    53|               ranges: assetData.rangesForSingleDimension(
    54|                 dimensionIdx,
    55|                 selections?.length === 2 ? selections[1 - dimensionIdx]!.selectedRanges : undefined,
    56|               ),
    57|             }}
    58|           />
    59|         </Box>
    60|       ))}
    61|     </Box>
    62|   );
    63| });


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/RunningBackfillsNotice.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-47 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {Box, Colors, Icon} from '@dagster-io/ui-components';
     3| import React from 'react';
     4| import {Link} from 'react-router-dom';
     5| import {
     6|   RunningBackfillsNoticeQuery,
     7|   RunningBackfillsNoticeQueryVariables,
     8| } from './types/RunningBackfillsNotice.types';
     9| export const RunningBackfillsNotice = ({partitionSetName}: {partitionSetName: string}) => {
    10|   const {data} = useQuery<RunningBackfillsNoticeQuery, RunningBackfillsNoticeQueryVariables>(
    11|     RUNNING_BACKFILLS_NOTICE_QUERY,
    12|   );
    13|   const runningBackfills =
    14|     data?.partitionBackfillsOrError.__typename === 'PartitionBackfills'
    15|       ? data.partitionBackfillsOrError.results
    16|       : [];
    17|   const runningBackfillCount = runningBackfills.filter(
    18|     (r) => r.partitionSetName === partitionSetName,
    19|   ).length;
    20|   if (runningBackfillCount === 0) {
    21|     return <span />;
    22|   }
    23|   return (
    24|     <div style={{color: Colors.Gray400, maxWidth: 350}}>
    25|       {runningBackfillCount === 1
    26|         ? 'Note: A backfill has been requested for this job and may be refreshing displayed assets. '
    27|         : `Note: ${runningBackfillCount} backfills have been requested for this job and may be refreshing displayed assets. `}
    28|       <Link to="/overview/backfills" target="_blank">
    29|         <Box flex={{gap: 4, display: 'inline-flex', alignItems: 'center'}}>
    30|           View <Icon name="open_in_new" color={Colors.Link} />
    31|         </Box>
    32|       </Link>
    33|     </div>
    34|   );
    35| };
    36| export const RUNNING_BACKFILLS_NOTICE_QUERY = gql`
    37|   query RunningBackfillsNoticeQuery {
    38|     partitionBackfillsOrError(status: REQUESTED) {
    39|       ... on PartitionBackfills {
    40|         results {
    41|           id
    42|           partitionSetName
    43|         }
    44|       }
    45|     }
    46|   }
    47| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/Stale.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-113 ---
     1| import {
     2|   BaseTag,
     3|   Body,
     4|   Box,
     5|   ButtonLink,
     6|   Caption,
     7|   CaptionMono,
     8|   Colors,
     9|   Icon,
    10|   Popover,
    11| } from '@dagster-io/ui-components';
    12| import groupBy from 'lodash/groupBy';
    13| import isEqual from 'lodash/isEqual';
    14| import React from 'react';
    15| import {Link} from 'react-router-dom';
    16| import {displayNameForAssetKey, LiveDataForNode} from '../asset-graph/Utils';
    17| import {AssetNodeKeyFragment} from '../asset-graph/types/AssetNode.types';
    18| import {AssetKeyInput, StaleCauseCategory, StaleStatus} from '../graphql/types';
    19| import {assetDetailsPathForKey} from './assetDetailsPathForKey';
    20| type StaleDataForNode = Pick<LiveDataForNode, 'staleCauses' | 'staleStatus'>;
    21| export const isAssetMissing = (liveData?: Pick<StaleDataForNode, 'staleStatus'>) =>
    22|   liveData && liveData.staleStatus === StaleStatus.MISSING;
    23| export const isAssetStale = (liveData?: Pick<StaleDataForNode, 'staleStatus'>) =>
    24|   liveData && liveData.staleStatus === StaleStatus.STALE;
    25| const LABELS = {
    26|   self: {
    27|     [StaleCauseCategory.CODE]: 'Code version',
    28|     [StaleCauseCategory.DATA]: 'Data version',
    29|     [StaleCauseCategory.DEPENDENCIES]: 'Dependencies',
    30|   },
    31|   upstream: {
    32|     [StaleCauseCategory.CODE]: 'Upstream code version',
    33|     [StaleCauseCategory.DATA]: 'Upstream data',
    34|     [StaleCauseCategory.DEPENDENCIES]: 'Upstream dependencies',
    35|   },
    36| };
    37| export const StaleReasonsLabel = ({
    38|   liveData,
    39|   include,
    40|   assetKey,
    41| }: {
    42|   assetKey: AssetKeyInput;
    43|   include: 'all' | 'upstream' | 'self';
    44|   liveData?: StaleDataForNode;
    45| }) => {
    46|   if (!isAssetStale(liveData) || !liveData?.staleCauses.length) {
    47|     return null;
    48|   }
    49|   return (
    50|     <Body color={Colors.Yellow700}>
    51|       <Popover
    52|         position="top"
    53|         content={<StaleCausesPopoverSummary causes={liveData.staleCauses} />}
    54|         interactionKind="hover"
    55|         className="chunk-popover-target"
    56|       >
    57|         {Object.keys(groupedCauses(assetKey, include, liveData)).join(', ')}
    58|       </Popover>
    59|     </Body>
    60|   );
    61| };
    62| export const StaleReasonsTags = ({
    63|   liveData,
    64|   include,
    65|   assetKey,
    66|   onClick,
    67| }: {
    68|   assetKey: AssetKeyInput;
    69|   include: 'all' | 'upstream' | 'self';
    70|   liveData?: StaleDataForNode;
    71|   onClick?: () => void;
    72| }) => {
    73|   if (!isAssetStale(liveData) || !liveData?.staleCauses.length) {
    74|     return null;
    75|   }
    76|   return (
    77|     <>
    78|       {Object.entries(groupedCauses(assetKey, include, liveData)).map(([label, causes]) => (
    79|         <Popover
    80|           key={label}
    81|           content={<StaleCausesPopoverSummary causes={causes} />}
    82|           position="top"
    83|           interactionKind="hover"
    84|           className="chunk-popover-target"
    85|         >
    86|           <BaseTag
    87|             fillColor={Colors.Yellow50}
    88|             textColor={Colors.Yellow700}
    89|             interactive={!!onClick}
    90|             icon={<Icon name="changes_present" color={Colors.Yellow700} />}
    91|             label={
    92|               onClick ? (
    93|                 <ButtonLink underline="never" onClick={onClick} color={Colors.Yellow700}>
    94|                   {label}
    95|                 </ButtonLink>
    96|               ) : (
    97|                 label
    98|               )
    99|             }
   100|           />
   101|         </Popover>
   102|       ))}
   103|     </>
   104|   );
   105| };
   106| function groupedCauses(
   107|   assetKey: AssetKeyInput,
   108|   include: 'all' | 'upstream' | 'self',
   109|   liveData?: StaleDataForNode,
   110| ) {
   111|   const all = (liveData?.staleCauses || [])
   112|     .map((cause) => {
   113|       const target = isEqual(assetKey.path, cause.key.path) ? 'self' : 'upstream';


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/asset-checks/AssetCheckDetailModal.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-34 ---
     1| import {gql} from '@apollo/client';
     2| import {
     3|   Body2,
     4|   Box,
     5|   Button,
     6|   Colors,
     7|   CursorHistoryControls,
     8|   Dialog,
     9|   DialogBody,
    10|   DialogFooter,
    11|   Mono,
    12|   NonIdealState,
    13|   Spinner,
    14|   Table,
    15| } from '@dagster-io/ui-components';
    16| import React from 'react';
    17| import {Link} from 'react-router-dom';
    18| import {FIFTEEN_SECONDS, useQueryRefreshAtInterval} from '../../app/QueryRefresh';
    19| import {useTrackPageView} from '../../app/analytics';
    20| import {AssetKeyInput} from '../../graphql/types';
    21| import {useDocumentTitle} from '../../hooks/useDocumentTitle';
    22| import {METADATA_ENTRY_FRAGMENT, MetadataEntries} from '../../metadata/MetadataEntry';
    23| import {MetadataEntryFragment} from '../../metadata/types/MetadataEntry.types';
    24| import {linkToRunEvent} from '../../runs/RunUtils';
    25| import {useCursorPaginatedQuery} from '../../runs/useCursorPaginatedQuery';
    26| import {TimestampDisplay} from '../../schedules/TimestampDisplay';
    27| import {AssetCheckStatusTag} from './AssetCheckStatusTag';
    28| import {
    29|   AssetCheckDetailsQuery,
    30|   AssetCheckDetailsQueryVariables,
    31| } from './types/AssetCheckDetailModal.types';
    32| export const AssetCheckDetailModal = ({
    33|   assetKey,
    34|   checkName,

# --- HUNK 2: Lines 226-357 ---
   226|     assetCheckExecutions(
   227|       assetKey: $assetKey
   228|       checkName: $checkName
   229|       limit: $limit
   230|       cursor: $cursor
   231|     ) {
   232|       id
   233|       ...AssetCheckExecutionFragment
   234|     }
   235|   }
   236|   ${ASSET_CHECK_EXECUTION_FRAGMENT}
   237| `;
   238| export function MigrationRequired() {
   239|   return (
   240|     <Box padding={24}>
   241|       <NonIdealState
   242|         icon="warning"
   243|         title="Migration required"
   244|         description={
   245|           <Box flex={{direction: 'column'}}>
   246|             <Body2 color={Colors.Gray700} style={{padding: '6px 0'}}>
   247|               A database schema migration is required to use asset checks. Run{' '}
   248|               <Mono>dagster instance migrate</Mono>.
   249|             </Body2>
   250|           </Box>
   251|         }
   252|       />
   253|     </Box>
   254|   );
   255| }
   256| export function AgentUpgradeRequired() {
   257|   return (
   258|     <Box padding={24}>
   259|       <NonIdealState
   260|         icon="warning"
   261|         title="Agent upgrade required"
   262|         description={
   263|           <Box flex={{direction: 'column'}}>
   264|             <Body2 color={Colors.Gray700} style={{padding: '6px 0'}}>
   265|               Checks require Dagster Cloud Agent version 1.5 or higher. Upgrade your agent(s) to use
   266|               checks.
   267|             </Body2>
   268|           </Box>
   269|         }
   270|       />
   271|     </Box>
   272|   );
   273| }
   274| export function NeedsUserCodeUpgrade() {
   275|   return (
   276|     <Box padding={24}>
   277|       <NonIdealState
   278|         icon="warning"
   279|         title="Upgrade required"
   280|         description={
   281|           <Box flex={{direction: 'column'}}>
   282|             <Body2 color={Colors.Gray700} style={{padding: '6px 0'}}>
   283|               Checks aren&apos;t supported with dagster versions before 1.5. Upgrade the dagster
   284|               library in this code location to use them.
   285|             </Body2>
   286|           </Box>
   287|         }
   288|       />
   289|     </Box>
   290|   );
   291| }
   292| export function NoChecks() {
   293|   return (
   294|     <Box padding={24}>
   295|       <NonIdealState
   296|         icon="asset_check"
   297|         title="No checks found for this asset"
   298|         description={
   299|           <Box flex={{direction: 'column'}}>
   300|             <Body2 color={Colors.Gray700} style={{padding: '6px 0'}}>
   301|               Asset Checks run after a materialization and can verify a particular property of a
   302|               data asset. Checks can help ensure that the contents of each data asset is correct.
   303|             </Body2>
   304|             {/* <Box
   305|               as="a"
   306|               href="https://docs.dagster.io/concepts/assets/asset-checks"
   307|               target="_blank"
   308|               flex={{direction: 'row', alignItems: 'end', gap: 4}}
   309|             >
   310|               Learn more about Asset Checks
   311|               <Icon name="open_in_new" color={Colors.Link} />
   312|             </Box> */}
   313|           </Box>
   314|         }
   315|       />
   316|     </Box>
   317|   );
   318| }
   319| function NoExecutions() {
   320|   return (
   321|     <Box padding={24}>
   322|       <NonIdealState
   323|         icon="asset_check"
   324|         title="No executions found for this check"
   325|         description={
   326|           <Box flex={{direction: 'column'}}>
   327|             <Body2 color={Colors.Gray700} style={{padding: '6px 0'}}>
   328|               No executions found. Materialize this asset and the check will run automatically.
   329|             </Body2>
   330|             {/* <Box
   331|               as="a"
   332|               href="https://docs.dagster.io/concepts/assets/asset-checks"
   333|               target="_blank"
   334|               flex={{direction: 'row', alignItems: 'end', gap: 4}}
   335|             >
   336|               Learn more about Asset Checks
   337|               <Icon name="open_in_new" color={Colors.Link} />
   338|             </Box> */}
   339|           </Box>
   340|         }
   341|       />
   342|     </Box>
   343|   );
   344| }
   345| const InlineableTypenames: MetadataEntryFragment['__typename'][] = [
   346|   'BoolMetadataEntry',
   347|   'FloatMetadataEntry',
   348|   'IntMetadataEntry',
   349|   'TextMetadataEntry',
   350|   'UrlMetadataEntry',
   351|   'PathMetadataEntry',
   352|   'NullMetadataEntry',
   353|   'TableSchemaMetadataEntry',
   354| ];
   355| function canShowMetadataInline(entries: MetadataEntryFragment[]) {
   356|   if (entries.length > 1) {
   357|     return false;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/asset-checks/AssetCheckStatusTag.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-46 ---
     1| import {BaseTag, Box, Colors, Icon, Spinner, Tag} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import {assertUnreachable} from '../../app/Util';
     4| import {
     5|   AssetCheckEvaluation,
     6|   AssetCheckExecution,
     7|   AssetCheckExecutionResolvedStatus,
     8|   AssetCheckSeverity,
     9| } from '../../graphql/types';
    10| import {linkToRunEvent} from '../../runs/RunUtils';
    11| import {TagActionsPopover} from '../../ui/TagActions';
    12| export const AssetCheckStatusTag = ({
    13|   execution,
    14| }: {
    15|   execution:
    16|     | (Pick<AssetCheckExecution, 'runId' | 'status' | 'timestamp' | 'stepKey'> & {
    17|         evaluation: Pick<AssetCheckEvaluation, 'severity'> | null;
    18|       })
    19|     | null;
    20| }) => {
    21|   if (!execution) {
    22|     return (
    23|       <BaseTag
    24|         textColor={Colors.Gray700}
    25|         fillColor={Colors.Gray100}
    26|         icon={<Icon name="dot" color={Colors.Gray500} />}
    27|         label="Not evaluated"
    28|       />
    29|     );
    30|   }
    31|   const {status, runId, evaluation} = execution;
    32|   if (!status) {
    33|     return null;
    34|   }
    35|   console.log(status, evaluation);
    36|   const renderTag = () => {
    37|     const isWarn = evaluation?.severity === AssetCheckSeverity.WARN;
    38|     switch (status) {
    39|       case AssetCheckExecutionResolvedStatus.IN_PROGRESS:
    40|         return (
    41|           <Tag intent="primary">
    42|             <Box flex={{direction: 'row', alignItems: 'center', gap: 4}}>
    43|               <Spinner purpose="body-text" />
    44|               Running
    45|             </Box>
    46|           </Tag>


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/asset-checks/AssetChecksBanner.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-17 ---
     1| import {Alert, Colors, Icon} from '@dagster-io/ui-components';
     2| import React from 'react';
     3| export const AssetChecksBanner = () => {
     4|   return (
     5|     <Alert
     6|       intent="info"
     7|       title="Asset Checks are experimental"
     8|       icon={<Icon name="info" color={Colors.Blue700} />}
     9|       description={
    10|         <span>
    11|           You can learn more about this new feature and provide feedback{' '}
    12|           <a href="https://github.com/dagster-io/dagster/discussions/16266">here</a>.
    13|         </span>
    14|       }
    15|     />
    16|   );
    17| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/asset-checks/VirtualizedAssetCheckTable.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-22 ---
     1| import {gql} from '@apollo/client';
     2| import {Body2, Box, Caption, Colors} from '@dagster-io/ui-components';
     3| import {useVirtualizer} from '@tanstack/react-virtual';
     4| import * as React from 'react';
     5| import {Link} from 'react-router-dom';
     6| import styled from 'styled-components';
     7| import {linkToRunEvent} from '../../runs/RunUtils';
     8| import {TimestampDisplay} from '../../schedules/TimestampDisplay';
     9| import {testId} from '../../testing/testId';
    10| import {HeaderCell, Row, RowCell, Container, Inner} from '../../ui/VirtualizedTable';
    11| import {assetDetailsPathForAssetCheck} from '../assetDetailsPathForKey';
    12| import {ASSET_CHECK_EXECUTION_FRAGMENT, MetadataCell} from './AssetCheckDetailModal';
    13| import {AssetCheckStatusTag} from './AssetCheckStatusTag';
    14| import {ExecuteChecksButton} from './ExecuteChecksButton';
    15| import {ExecuteChecksButtonAssetNodeFragment} from './types/ExecuteChecksButton.types';
    16| import {AssetCheckTableFragment} from './types/VirtualizedAssetCheckTable.types';
    17| type Props = {
    18|   assetNode: ExecuteChecksButtonAssetNodeFragment;
    19|   rows: AssetCheckTableFragment[];
    20| };
    21| export const VirtualizedAssetCheckTable = ({assetNode, rows}: Props) => {
    22|   const parentRef = React.useRef<HTMLDivElement | null>(null);

# --- HUNK 2: Lines 108-148 ---
   108|         </RowCell>
   109|       </RowGrid>
   110|     </Row>
   111|   );
   112| };
   113| const CaptionEllipsed = styled(Caption)`
   114|   text-overflow: ellipsis;
   115|   max-width: 100%;
   116|   overflow: hidden;
   117|   white-space: nowrap;
   118| `;
   119| export const VirtualizedAssetCheckHeader = () => {
   120|   return (
   121|     <Box
   122|       border="top-and-bottom"
   123|       style={{
   124|         display: 'grid',
   125|         gridTemplateColumns: TEMPLATE_COLUMNS,
   126|         height: '32px',
   127|         fontSize: '12px',
   128|         color: Colors.Gray600,
   129|       }}
   130|     >
   131|       <HeaderCell>Check name</HeaderCell>
   132|       <HeaderCell>Status</HeaderCell>
   133|       <HeaderCell>Evaluation timestamp</HeaderCell>
   134|       <HeaderCell>Evaluation metadata</HeaderCell>
   135|       <HeaderCell>Actions</HeaderCell>
   136|     </Box>
   137|   );
   138| };
   139| const RowGrid = styled(Box)`
   140|   display: grid;
   141|   grid-template-columns: ${TEMPLATE_COLUMNS};
   142|   height: 100%;
   143| `;
   144| export const ASSET_CHECK_TABLE_FRAGMENT = gql`
   145|   fragment AssetCheckTableFragment on AssetCheck {
   146|     name
   147|     description
   148|     canExecuteIndividually


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/auto-materialization/AutomaterializationRoot.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-26 ---
     1| import {useLazyQuery} from '@apollo/client';
     2| import {
     3|   Alert,
     4|   Box,
     5|   Page,
     6|   Colors,
     7|   Checkbox,
     8|   Spinner,
     9|   Subtitle2,
    10|   Heading,
    11|   PageHeader,
    12|   Table,
    13| } from '@dagster-io/ui-components';
    14| import React, {useLayoutEffect} from 'react';
    15| import {useConfirmation} from '../../app/CustomConfirmationProvider';
    16| import {useUnscopedPermissions} from '../../app/Permissions';
    17| import {useQueryRefreshAtInterval} from '../../app/QueryRefresh';
    18| import {useTrackPageView} from '../../app/analytics';
    19| import {InstigationTickStatus} from '../../graphql/types';
    20| import {useQueryPersistedState} from '../../hooks/useQueryPersistedState';
    21| import {LiveTickTimeline} from '../../instigation/LiveTickTimeline2';
    22| import {isOldTickWithoutEndtimestamp} from '../../instigation/util';
    23| import {OverviewTabs} from '../../overview/OverviewTabs';
    24| import {useAutomaterializeDaemonStatus} from '../AutomaterializeDaemonStatusTag';
    25| import {ASSET_DAEMON_TICKS_QUERY} from './AssetDaemonTicksQuery';
    26| import {AutomaterializationEvaluationHistoryTable} from './AutomaterializationEvaluationHistoryTable';

# --- HUNK 2: Lines 92-136 ---
    92|             const copy = {...tick};
    93|             copy.endTimestamp = ticks[index - 1]!.timestamp;
    94|             copy.status = InstigationTickStatus.FAILURE;
    95|             return copy;
    96|           }
    97|           return tick;
    98|         }) ?? []
    99|       );
   100|     },
   101|     [...ids.slice(0, 100)],
   102|   );
   103|   const onHoverTick = React.useCallback(
   104|     (tick: AssetDaemonTickFragment | undefined) => {
   105|       setIsPaused(!!tick);
   106|     },
   107|     [setIsPaused],
   108|   );
   109|   return (
   110|     <Page>
   111|       <PageHeader title={<Heading>Overview</Heading>} tabs={<OverviewTabs tab="amp" />} />
   112|       <Box
   113|         padding={{vertical: 12, horizontal: 24}}
   114|         flex={{direction: 'column', gap: 12}}
   115|         background={Colors.Gray50}
   116|       >
   117|         <Alert
   118|           intent="info"
   119|           title="[Experimental] Dagster can automatically materialize assets when criteria are met."
   120|           description={
   121|             <>
   122|               Auto-materialization enables a declarative approach to asset scheduling  instead of
   123|               defining imperative workflows to materialize your assets, you just describe the
   124|               conditions under which they should be materialized.{' '}
   125|               <a
   126|                 href="https://docs.dagster.io/concepts/assets/asset-auto-execution"
   127|                 target="_blank"
   128|                 rel="noreferrer"
   129|               >
   130|                 Learn more about auto-materialization here
   131|               </a>
   132|               .
   133|             </>
   134|           }
   135|         />
   136|       </Box>


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/assets/auto-materialization/AutomaterializationTickDetailDialog.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-22 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {Box, Colors, Subtitle2, Caption, Icon, Spinner} from '@dagster-io/ui-components';
     3| import {useVirtualizer} from '@tanstack/react-virtual';
     4| import React from 'react';
     5| import {Link} from 'react-router-dom';
     6| import styled from 'styled-components';
     7| import {Timestamp} from '../../app/time/Timestamp';
     8| import {tokenForAssetKey} from '../../asset-graph/Utils';
     9| import {AssetKeyInput, InstigationTickStatus} from '../../graphql/types';
    10| import {TickDetailSummary} from '../../instigation/TickDetailsDialog';
    11| import {HeaderCell, Inner, Row, RowCell} from '../../ui/VirtualizedTable';
    12| import {buildRepoAddress} from '../../workspace/buildRepoAddress';
    13| import {workspacePathFromAddress} from '../../workspace/workspacePath';
    14| import {AssetLink} from '../AssetLink';
    15| import {
    16|   AssetKeysDialog,
    17|   AssetKeysDialogHeader,
    18|   AssetKeysDialogEmptyState,
    19| } from '../AutoMaterializePolicyPage/AssetKeysDialog';
    20| import {assetDetailsPathForKey} from '../assetDetailsPathForKey';
    21| import {AssetDaemonTickFragment} from './types/AssetDaemonTicksQuery.types';
    22| import {

# --- HUNK 2: Lines 60-117 ---
    60|         map[tokenForAssetKey(assetKey)] = partitionKeys;
    61|       });
    62|       return map;
    63|     }, [tick?.requestedMaterializationsForAssets]);
    64|     const content = React.useMemo(() => {
    65|       if (queryString && !filteredAssetKeys.length) {
    66|         return (
    67|           <AssetKeysDialogEmptyState
    68|             title="No matching asset keys"
    69|             description={
    70|               <>
    71|                 No matching asset keys for <strong>{queryString}</strong>
    72|               </>
    73|             }
    74|           />
    75|         );
    76|       }
    77|       if (!tick?.requestedAssetKeys.length) {
    78|         return (
    79|           <Box padding={{vertical: 12, horizontal: 24}}>
    80|             <Caption color={Colors.Gray700}>None</Caption>
    81|           </Box>
    82|         );
    83|       }
    84|       return (
    85|         <div style={{overflow: 'scroll'}} ref={parentRef}>
    86|           <Box
    87|             border="top-and-bottom"
    88|             style={{
    89|               display: 'grid',
    90|               gridTemplateColumns: TEMPLATE_COLUMNS,
    91|               height: '32px',
    92|               fontSize: '12px',
    93|               color: Colors.Gray600,
    94|               position: 'sticky',
    95|               top: 0,
    96|               zIndex: 1,
    97|               background: Colors.White,
    98|             }}
    99|           >
   100|             <HeaderCell>Asset</HeaderCell>
   101|             <HeaderCell>Group</HeaderCell>
   102|             <HeaderCell>Result</HeaderCell>
   103|           </Box>
   104|           <Inner $totalHeight={totalHeight}>
   105|             {items.map(({index, key, size, start}) => {
   106|               const assetKey = filteredAssetKeys[index]!;
   107|               return (
   108|                 <AssetDetailRow
   109|                   key={key}
   110|                   $height={size}
   111|                   $start={start}
   112|                   assetKey={assetKey}
   113|                   partitionKeys={assetKeyToPartitionsMap[tokenForAssetKey(assetKey)]}
   114|                   evaluationId={tick.autoMaterializeAssetEvaluationId!}
   115|                 />
   116|               );
   117|             })}

# --- HUNK 3: Lines 193-238 ---
   193|     },
   194|   );
   195|   const asset = data?.assetOrError.__typename === 'Asset' ? data.assetOrError : null;
   196|   const definition = asset?.definition;
   197|   const repoAddress = definition
   198|     ? buildRepoAddress(definition.repository.name, definition.repository.location.name)
   199|     : null;
   200|   return (
   201|     <Row $start={$start} $height={$height}>
   202|       <RowGrid border="bottom">
   203|         <RowCell>
   204|           <AssetLink path={assetKey.path} icon="asset" textStyle="middle-truncate" />
   205|         </RowCell>
   206|         <RowCell>
   207|           {data ? (
   208|             definition && definition.groupName && repoAddress ? (
   209|               <Link
   210|                 to={workspacePathFromAddress(repoAddress, `/asset-groups/${definition.groupName}`)}
   211|               >
   212|                 <Box flex={{direction: 'row', gap: 8, alignItems: 'center'}}>
   213|                   <Icon color={Colors.Gray400} name="asset_group" />
   214|                   {definition.groupName}
   215|                 </Box>
   216|               </Link>
   217|             ) : (
   218|               <Caption color={Colors.Gray400}>Asset not found</Caption>
   219|             )
   220|           ) : (
   221|             <Spinner purpose="body-text" />
   222|           )}
   223|         </RowCell>
   224|         <RowCell>
   225|           <Link
   226|             to={assetDetailsPathForKey(assetKey, {
   227|               view: 'auto-materialize-history',
   228|               evaluation: `${evaluationId}`,
   229|             })}
   230|           >
   231|             {numMaterializations} materialization{numMaterializations === 1 ? '' : 's'} requested
   232|           </Link>
   233|         </RowCell>
   234|       </RowGrid>
   235|     </Row>
   236|   );
   237| };
   238| const RowGrid = styled(Box)`


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/gantt/GanttChart.tsx
# Total hunks: 4
# ====================================================================
# --- HUNK 1: Lines 1-24 ---
     1| import {
     2|   Box,
     3|   Checkbox,
     4|   Colors,
     5|   FontFamily,
     6|   Group,
     7|   Icon,
     8|   NonIdealState,
     9|   Spinner,
    10|   SpinnerWrapper,
    11|   SplitPanelContainer,
    12|   useViewport,
    13| } from '@dagster-io/ui-components';
    14| import isEqual from 'lodash/isEqual';
    15| import * as React from 'react';
    16| import {Link} from 'react-router-dom';
    17| import styled from 'styled-components';
    18| import {AppContext} from '../app/AppContext';
    19| import {filterByQuery, GraphQueryItem} from '../app/GraphQueryImpl';
    20| import {withMiddleTruncation} from '../app/Util';
    21| import {WebSocketContext} from '../app/WebSocketProvider';
    22| import {CancelRunButton} from '../runs/RunActionButtons';
    23| import {
    24|   EMPTY_RUN_METADATA,

# --- HUNK 2: Lines 307-351 ---
   307|               options={options}
   308|               metadata={metadata || EMPTY_RUN_METADATA}
   309|               layout={layout}
   310|               hoveredStep={hoveredStep}
   311|               focusedSteps={selection.keys}
   312|               viewport={viewport}
   313|               setHoveredNodeName={setHoveredNodeName}
   314|               onClickStep={props.onClickStep}
   315|               onDoubleClickStep={props.onDoubleClickStep}
   316|             />
   317|           )}
   318|         </div>
   319|       </div>
   320|       <GraphQueryInputContainer>
   321|         {lostWebsocket ? (
   322|           <WebsocketWarning>
   323|             <Box flex={{justifyContent: 'space-around'}} margin={{bottom: 12}}>
   324|               <Group
   325|                 direction="row"
   326|                 spacing={8}
   327|                 background={`${Colors.Yellow500}26`}
   328|                 padding={{vertical: 8, horizontal: 12}}
   329|                 alignItems="flex-start"
   330|               >
   331|                 <Icon name="warning" color={Colors.Yellow700} />
   332|                 <div style={{maxWidth: '400px', whiteSpace: 'normal', overflow: 'hidden'}}>
   333|                   <strong>Lost connection to Dagster webserver.</strong>
   334|                   <span>
   335|                     {` Verify that your instance is responding to requests at ${rootServerURI} and reload the page.`}
   336|                   </span>
   337|                 </div>
   338|               </Group>
   339|             </Box>
   340|           </WebsocketWarning>
   341|         ) : null}
   342|         <FilterInputsBackgroundBox flex={{direction: 'row', alignItems: 'center', gap: 12}}>
   343|           <GraphQueryInput
   344|             items={props.graph}
   345|             value={props.selection.query}
   346|             placeholder="Type a step subset"
   347|             onChange={props.onUpdateQuery}
   348|             presets={metadata ? interestingQueriesFor(metadata, layout) : undefined}
   349|             className={selection.keys.length > 0 ? 'has-step' : ''}
   350|           />
   351|           <Checkbox

# --- HUNK 3: Lines 528-568 ---
   528|  * Renders a line on the Gantt visualization using a thin horizontal <div> and
   529|  * a thin vertical <div> as necessary.
   530|  */
   531| const GanttLine = React.memo(
   532|   ({
   533|     minX,
   534|     minY,
   535|     maxX,
   536|     maxY,
   537|     dotted,
   538|     darkened,
   539|     depIdx,
   540|     depNotDrawn,
   541|   }: {
   542|     dotted: boolean;
   543|     darkened: boolean;
   544|     depIdx: number;
   545|     depNotDrawn: boolean;
   546|   } & Bounds) => {
   547|     const border = `${LINE_SIZE}px ${dotted ? 'dotted' : 'solid'} ${
   548|       darkened ? Colors.Gray700 : Colors.Gray300
   549|     }`;
   550|     const maxXAvoidingOverlap = maxX + (depIdx % 10) * LINE_SIZE;
   551|     return (
   552|       <>
   553|         <div
   554|           className="line"
   555|           style={{
   556|             height: 1,
   557|             left: minX,
   558|             width: depNotDrawn ? 50 : maxXAvoidingOverlap - minX,
   559|             top: minY - 1,
   560|             borderTop: border,
   561|             zIndex: darkened ? 100 : 1,
   562|           }}
   563|         />
   564|         {minY !== maxY && !depNotDrawn && (
   565|           <div
   566|             className="line"
   567|             style={{
   568|               width: 1,

# --- HUNK 4: Lines 577-722 ---
   577|       </>
   578|     );
   579|   },
   580|   isEqual,
   581| );
   582| function truncatedBoxLabel(box: GanttChartBox) {
   583|   if (box.width <= BOX_SHOW_LABEL_WIDTH_CUTOFF) {
   584|     return undefined;
   585|   }
   586|   const totalPadding = 7 + (box.state === IStepState.RUNNING ? 16 : 0);
   587|   const maxLength = (box.width - totalPadding) / 6.2;
   588|   return withMiddleTruncation(box.node.name, {maxLength});
   589| }
   590| const GanttChartContainer = styled.div`
   591|   height: 100%;
   592|   position: relative;
   593|   display: flex;
   594|   flex-direction: column;
   595|   z-index: 2;
   596|   user-select: none;
   597|   background: ${Colors.White};
   598|   .line {
   599|     position: absolute;
   600|     user-select: none;
   601|     pointer-events: none;
   602|     transition:
   603|       top ${CSS_DURATION}ms linear,
   604|       left ${CSS_DURATION}ms linear,
   605|       width ${CSS_DURATION}ms linear,
   606|       height ${CSS_DURATION}ms linear;
   607|   }
   608|   .chart-element {
   609|     font-size: 12px;
   610|     transition:
   611|       top ${CSS_DURATION}ms linear,
   612|       left ${CSS_DURATION}ms linear;
   613|     display: inline-block;
   614|     position: absolute;
   615|     color: white;
   616|     overflow: hidden;
   617|     user-select: text;
   618|     z-index: 2;
   619|     user-select: none;
   620|     -webkit-user-select: none;
   621|     -moz-user-select: none;
   622|     -ms-user-select: none;
   623|   }
   624|   .dot {
   625|     width: ${BOX_DOT_SIZE}px;
   626|     height: ${BOX_DOT_SIZE}px;
   627|     border: 1px solid transparent;
   628|     border-radius: ${BOX_DOT_SIZE / 2}px;
   629|   }
   630|   .box {
   631|     /* Note: padding + font changes may also impact truncatedBoxLabel */
   632|     height: ${BOX_HEIGHT - BOX_MARGIN_Y * 2}px;
   633|     padding: 3px;
   634|     padding-right: 1px;
   635|     border: 1px solid transparent;
   636|     border-radius: 2px;
   637|     white-space: nowrap;
   638|     font-family: ${FontFamily.monospace};
   639|     font-size: 12.5px;
   640|     font-weight: 700;
   641|     line-height: 15px;
   642|     transition:
   643|       top ${CSS_DURATION}ms linear,
   644|       left ${CSS_DURATION}ms linear,
   645|       width ${CSS_DURATION}ms linear,
   646|       height ${CSS_DURATION}ms linear;
   647|     &.focused {
   648|       border: 1px solid ${Colors.Gray900};
   649|       box-shadow: 0 0 0 2px ${Colors.Yellow500};
   650|     }
   651|     &.hovered {
   652|       border: 1px solid ${Colors.Gray800};
   653|     }
   654|     &.dynamic {
   655|       filter: brightness(115%);
   656|     }
   657|     ${SpinnerWrapper} {
   658|       display: inline-block;
   659|       vertical-align: text-bottom;
   660|       padding-right: 4px;
   661|     }
   662|   }
   663|   .marker-dot {
   664|     width: ${BOX_DOT_SIZE}px;
   665|     height: ${BOX_DOT_SIZE}px;
   666|     border: 1px solid rgb(27, 164, 206);
   667|     border-radius: ${BOX_DOT_SIZE / 2}px;
   668|   }
   669|   .marker-whiskers {
   670|     display: inline-block;
   671|     position: absolute;
   672|     height: ${BOX_HEIGHT - BOX_MARGIN_Y * 2}px;
   673|     background: rgba(27, 164, 206, 0.09);
   674|     border-left: 1px solid rgba(27, 164, 206, 0.6);
   675|     border-right: 1px solid rgba(27, 164, 206, 0.6);
   676|     transition:
   677|       top ${CSS_DURATION}ms linear,
   678|       left ${CSS_DURATION}ms linear,
   679|       width ${CSS_DURATION}ms linear;
   680|     & > div {
   681|       border-bottom: 1px dashed rgba(27, 164, 206, 0.6);
   682|       height: ${(BOX_HEIGHT - BOX_MARGIN_Y * 2) / 2}px;
   683|     }
   684|   }
   685| `;
   686| const WebsocketWarning = styled.div`
   687|   position: absolute;
   688|   bottom: 100%;
   689|   color: ${Colors.Yellow700};
   690|   width: 100%;
   691| `;
   692| const GraphQueryInputContainer = styled.div`
   693|   z-index: 2;
   694|   position: absolute;
   695|   bottom: 20px;
   696|   left: 50%;
   697|   transform: translateX(-50%);
   698|   white-space: nowrap;
   699| `;
   700| const FilterInputsBackgroundBox = styled(Box)`
   701|   background: radial-gradient(${Colors.Gray50} 0%, rgba(255, 255, 255, 0) 100%);
   702|   padding: 15px 15px 0px 15px;
   703| `;
   704| export const GanttChartLoadingState = ({runId}: {runId: string}) => (
   705|   <GanttChartContainer>
   706|     <OptionsContainer />
   707|     <SplitPanelContainer
   708|       identifier="gantt-split"
   709|       axis="horizontal"
   710|       first={
   711|         <div style={{margin: 'auto', marginTop: 100}}>
   712|           <Spinner purpose="section" />
   713|         </div>
   714|       }
   715|       firstInitialPercent={70}
   716|       second={
   717|         <GanttStatusPanel
   718|           graph={[]}
   719|           metadata={EMPTY_RUN_METADATA}
   720|           selection={{keys: [], query: '*'}}
   721|           runId={runId}
   722|           nowMs={0}


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/gantt/GanttChartLayout.ts
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {Colors} from '@dagster-io/ui-components';
     2| import {IRunMetadataDict, IStepAttempt, IStepState} from '../runs/RunMetadataProvider';
     3| import {
     4|   BOX_DOT_WIDTH_CUTOFF,
     5|   BOX_SPACING_X,
     6|   BOX_WIDTH,
     7|   FLAT_INSET_FROM_PARENT,
     8|   GanttChartBox,
     9|   GanttChartLayout,
    10|   GanttChartLayoutOptions,
    11|   GanttChartMarker,
    12|   GanttChartMode,
    13|   IGanttNode,
    14|   LEFT_INSET,
    15| } from './Constants';
    16| import {isDynamicStep, isPlannedDynamicStep, dynamicKeyWithoutIndex} from './DynamicStepSupport';
    17| export interface BuildLayoutParams {
    18|   nodes: IGanttNode[];
    19|   mode: GanttChartMode;
    20| }
    21| export const buildLayout = (params: BuildLayoutParams) => {

# --- HUNK 2: Lines 176-253 ---
   176|           state: undefined,
   177|           width: BOX_WIDTH,
   178|           root: false,
   179|           x: 0,
   180|           y: -1,
   181|         };
   182|         boxes.push(depBox);
   183|         added.push(depBox);
   184|       } else {
   185|         depBox = boxes[depBoxIdx]!;
   186|         ensureSubtreeAfterParentInArray(boxes, box, depBox);
   187|       }
   188|       box.children.push(depBox);
   189|     }
   190|   }
   191|   for (const depBox of added) {
   192|     addChildren(boxes, depBox, params);
   193|   }
   194| };
   195| const TextColorForStates = {
   196|   [IStepState.RUNNING]: Colors.Blue700,
   197|   [IStepState.RETRY_REQUESTED]: Colors.White,
   198|   [IStepState.SUCCEEDED]: Colors.White,
   199|   [IStepState.FAILED]: Colors.White,
   200|   [IStepState.SKIPPED]: Colors.White,
   201|   [IStepState.UNKNOWN]: Colors.White,
   202| };
   203| const BackgroundColorForStates = {
   204|   [IStepState.RUNNING]: Colors.Blue100,
   205|   [IStepState.RETRY_REQUESTED]: Colors.Yellow500,
   206|   [IStepState.SUCCEEDED]: Colors.Green500,
   207|   [IStepState.FAILED]: Colors.Red500,
   208|   [IStepState.SKIPPED]: Colors.Gray500,
   209|   [IStepState.UNKNOWN]: Colors.Gray400,
   210| };
   211| export const boxStyleFor = (
   212|   state: IStepState | undefined,
   213|   context: {
   214|     metadata: IRunMetadataDict;
   215|     options: {mode: GanttChartMode};
   216|   },
   217| ) => {
   218|   if (
   219|     !context.metadata.startedPipelineAt &&
   220|     context.options.mode !== GanttChartMode.WATERFALL_TIMED
   221|   ) {
   222|     return {background: `#2491eb`};
   223|   }
   224|   if (state && state !== IStepState.PREPARING) {
   225|     return {
   226|       color: TextColorForStates[state] || Colors.White,
   227|       background: BackgroundColorForStates[state] || Colors.Gray400,
   228|     };
   229|   }
   230|   return {
   231|     color: Colors.Gray600,
   232|     background: Colors.White,
   233|     border: `1.5px dotted ${Colors.Gray500}`,
   234|   };
   235| };
   236| const cloneLayout = ({boxes, markers}: GanttChartLayout): GanttChartLayout => {
   237|   const map = new WeakMap();
   238|   const nextMarkers = markers.map((m) => ({...m}));
   239|   const nextBoxes: GanttChartBox[] = [];
   240|   for (const box of boxes) {
   241|     const next = {...box};
   242|     nextBoxes.push(next);
   243|     map.set(box, next);
   244|   }
   245|   boxes.forEach((box, ii) => {
   246|     nextBoxes[ii]!.children = box.children.map((c) => map.get(c));
   247|   });
   248|   return {boxes: nextBoxes, markers: nextMarkers};
   249| };
   250| const positionAndSplitBoxes = (
   251|   boxes: GanttChartBox[],
   252|   metadata: IRunMetadataDict,
   253|   positionFor: (


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/gantt/GanttChartTimescale.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {Colors, FontFamily} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| import {formatElapsedTime} from '../app/Util';
     5| import {CSS_DURATION, GanttViewport, LEFT_INSET} from './Constants';
     6| const ONE_MIN = 60 * 1000;
     7| const ONE_HOUR = 60 * 60 * 1000;
     8| const subsecondResolutionLabel = (ms: number) =>
     9|   ms > 5 * ONE_MIN ? formatElapsedTime(ms) : `${(ms / 1000).toFixed(1)}s`;
    10| const secondResolutionLabel = (ms: number) =>
    11|   ms > 5 * ONE_MIN ? formatElapsedTime(ms) : `${(ms / 1000).toFixed(0)}s`;
    12| const minuteResolutionLabel = (ms: number) =>
    13|   ms > 59 * ONE_MIN ? formatElapsedTime(ms) : `${Math.round(ms / ONE_MIN)}m`;
    14| const hourResolutionLabel = (ms: number) => `${Math.round(ms / ONE_HOUR)}h`;
    15| const TICK_CONFIG = [
    16|   {
    17|     tickIntervalMs: 0.5 * 1000,
    18|     tickLabels: subsecondResolutionLabel,
    19|   },
    20|   {
    21|     tickIntervalMs: 1 * 1000,

# --- HUNK 2: Lines 167-236 ---
   167|           ></div>
   168|         )}
   169|       </TimescaleLinesContainer>
   170|     </TimescaleContainer>
   171|   );
   172| };
   173| const TimescaleContainer = styled.div`
   174|   width: 100%;
   175|   & .tick {
   176|     position: absolute;
   177|     padding-top: 7px;
   178|     width: ${TICK_LABEL_WIDTH}px;
   179|     height: ${TICKS_ROW_HEIGHT}px;
   180|     box-sizing: border-box;
   181|     transition:
   182|       left ${CSS_DURATION}ms linear,
   183|       width ${CSS_DURATION}ms linear;
   184|     text-align: center;
   185|   }
   186|   & .tick.duration {
   187|     color: ${Colors.Gray500};
   188|     background: ${Colors.Gray100};
   189|     box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
   190|   }
   191|   & .tick.highlight {
   192|     color: white;
   193|     height: ${TICKS_ROW_HEIGHT + 2}px;
   194|     background: ${Colors.Gray900};
   195|   }
   196|   & .line {
   197|     position: absolute;
   198|     border-left: 1px solid #f0f0f0;
   199|     transition: left ${CSS_DURATION}ms linear;
   200|     top: 0px;
   201|     bottom: 0px;
   202|   }
   203|   & .line.highlight {
   204|     border-left: 2px solid ${Colors.Gray900};
   205|     z-index: 1111;
   206|     top: -1px;
   207|   }
   208|   & .fog-of-war {
   209|     position: absolute;
   210|     background: ${Colors.Gray50};
   211|     transition: left ${CSS_DURATION}ms linear;
   212|     top: 0px;
   213|     bottom: 0px;
   214|     width: 100%;
   215|   }
   216| `;
   217| const TimescaleTicksContainer = styled.div`
   218|   height: ${TICKS_ROW_HEIGHT}px;
   219|   z-index: 4;
   220|   position: relative;
   221|   background: ${Colors.White};
   222|   display: flex;
   223|   color: ${Colors.Gray500};
   224|   font-size: 13px;
   225|   font-family: ${FontFamily.monospace};
   226|   box-shadow: inset 0 -1px ${Colors.KeylineGray};
   227|   overflow: hidden;
   228| `;
   229| const TimescaleLinesContainer = styled.div`
   230|   z-index: 0;
   231|   top: ${TICKS_ROW_HEIGHT}px;
   232|   left: 0;
   233|   position: absolute;
   234|   pointer-events: none;
   235|   overflow: hidden;
   236| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/gantt/GanttStatusPanel.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {Colors, Spinner, Tooltip} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| import {GraphQueryItem} from '../app/GraphQueryImpl';
     5| import {formatElapsedTime} from '../app/Util';
     6| import {SidebarSection} from '../pipelines/SidebarComponents';
     7| import {IRunMetadataDict, IStepState} from '../runs/RunMetadataProvider';
     8| import {StepSelection} from '../runs/StepSelection';
     9| import {GanttChartMode} from './Constants';
    10| import {isPlannedDynamicStep} from './DynamicStepSupport';
    11| import {boxStyleFor} from './GanttChartLayout';
    12| import {RunGroupPanel} from './RunGroupPanel';
    13| interface GanttStatusPanelProps {
    14|   graph: GraphQueryItem[];
    15|   metadata: IRunMetadataDict;
    16|   selection: StepSelection;
    17|   runId: string;
    18|   nowMs: number;
    19|   onClickStep?: (step: string, evt: React.MouseEvent<any>) => void;
    20|   onHighlightStep?: (step: string | null) => void;
    21|   onDoubleClickStep?: (step: string) => void;

# --- HUNK 2: Lines 178-222 ---
   178|           }}
   179|         />
   180|       )}
   181|       <StepLabel>{name}</StepLabel>
   182|       {step?.start && <Elapsed>{formatElapsedTime(end - step.start)}</Elapsed>}
   183|     </StepItemContainer>
   184|   );
   185| };
   186| const StepLabel = styled.div`
   187|   overflow: hidden;
   188|   text-overflow: ellipsis;
   189|   flex: 1;
   190| `;
   191| const StepItemContainer = styled.div<{selected: boolean}>`
   192|   display: flex;
   193|   line-height: 32px;
   194|   height: 32px;
   195|   padding: 0 14px 0 6px;
   196|   gap: 6px;
   197|   align-items: center;
   198|   border-bottom: 1px solid ${Colors.KeylineGray};
   199|   font-size: 12px;
   200|   ${({selected}) => selected && `background: ${Colors.Gray100};`}
   201|   &:hover {
   202|     background: ${Colors.Gray100};
   203|   }
   204| `;
   205| export const StepStatusDot = styled.div`
   206|   width: 12px;
   207|   height: 12px;
   208|   flex-shrink: 0;
   209|   border-radius: 50%;
   210|   text-align: center;
   211|   line-height: 12px;
   212| `;
   213| const Elapsed = styled.div`
   214|   color: ${Colors.Gray400};
   215|   font-variant-numeric: tabular-nums;
   216| `;
   217| const EmptyNotice = styled.div`
   218|   min-height: 32px;
   219|   font-size: 12px;
   220|   padding: 8px 24px;
   221|   color: ${Colors.Gray400};
   222| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/gantt/RunGroupPanel.tsx
# Total hunks: 4
# ====================================================================
# --- HUNK 1: Lines 1-22 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {Box, ButtonLink, Colors, Group, Icon, FontFamily} from '@dagster-io/ui-components';
     3| import React from 'react';
     4| import {Link} from 'react-router-dom';
     5| import styled from 'styled-components';
     6| import {showCustomAlert} from '../app/CustomAlertProvider';
     7| import {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';
     8| import {FIFTEEN_SECONDS, useQueryRefreshAtInterval} from '../app/QueryRefresh';
     9| import {SidebarSection} from '../pipelines/SidebarComponents';
    10| import {RunStatusIndicator} from '../runs/RunStatusDots';
    11| import {DagsterTag} from '../runs/RunTag';
    12| import {RunStateSummary, RunTime, RUN_TIME_FRAGMENT} from '../runs/RunUtils';
    13| import {
    14|   RunGroupPanelQuery,
    15|   RunGroupPanelQueryVariables,
    16|   RunGroupPanelRunFragment,
    17| } from './types/RunGroupPanel.types';
    18| type Run = RunGroupPanelRunFragment;
    19| function subsetTitleForRun(run: {tags: {key: string; value: string}[]}) {
    20|   const stepsTag = run.tags.find((t) => t.key === DagsterTag.StepSelection);
    21|   return stepsTag ? stepsTag.value : '*';
    22| }

# --- HUNK 2: Lines 31-75 ---
    31|     RUN_GROUP_PANEL_QUERY,
    32|     {
    33|       variables: {runId},
    34|       notifyOnNetworkStatusChange: true,
    35|     },
    36|   );
    37|   const {data, refetch} = queryResult;
    38|   useQueryRefreshAtInterval(queryResult, FIFTEEN_SECONDS);
    39|   React.useEffect(() => {
    40|     if (runStatusLastChangedAt) {
    41|       refetch();
    42|     }
    43|   }, [refetch, runStatusLastChangedAt]);
    44|   const group = data?.runGroupOrError;
    45|   if (!group || group.__typename === 'RunGroupNotFoundError') {
    46|     return null;
    47|   }
    48|   if (group.__typename === 'PythonError') {
    49|     return (
    50|       <Group direction="row" spacing={8} padding={8}>
    51|         <Icon name="warning" color={Colors.Yellow500} />
    52|         <div style={{fontSize: '13px'}}>
    53|           The run group for this run could not be loaded.{' '}
    54|           <ButtonLink
    55|             color={Colors.Blue500}
    56|             underline="always"
    57|             onClick={() => {
    58|               showCustomAlert({
    59|                 title: 'Python error',
    60|                 body: group.message,
    61|               });
    62|             }}
    63|           >
    64|             View error
    65|           </ButtonLink>
    66|         </div>
    67|       </Group>
    68|     );
    69|   }
    70|   if (group.runs?.length === 1) {
    71|     return null;
    72|   }
    73|   const unsorted: Run[] = [];
    74|   (group.runs || []).forEach((run: Run | null) => {
    75|     if (run && typeof run.startTime === 'number') {

# --- HUNK 3: Lines 77-130 ---
    77|     }
    78|   });
    79|   const runs: Run[] = unsorted.sort((a: Run, b: Run) => {
    80|     return (a.startTime || 0) - (b.startTime || 0);
    81|   });
    82|   return (
    83|     <SidebarSection title={runs[0] ? `${runs[0].pipelineName} (${runs.length})` : ''}>
    84|       <>
    85|         {runs.map((g, idx) =>
    86|           g ? (
    87|             <RunGroupRun key={g.id} to={`/runs/${g.id}`} selected={g.id === runId}>
    88|               {idx < runs.length - 1 && <ThinLine style={{height: 36}} />}
    89|               <Box padding={{top: 4}}>
    90|                 <RunStatusIndicator status={g.status} />
    91|               </Box>
    92|               <div
    93|                 style={{
    94|                   flex: 1,
    95|                   marginLeft: 5,
    96|                   minWidth: 0,
    97|                   color: Colors.Gray700,
    98|                 }}
    99|               >
   100|                 <div style={{display: 'flex', justifyContent: 'space-between'}}>
   101|                   <RunTitle>
   102|                     {g.id.split('-')[0]}
   103|                     {idx === 0 && RootTag}
   104|                   </RunTitle>
   105|                   <RunTime run={g} />
   106|                 </div>
   107|                 <div
   108|                   style={{
   109|                     display: 'flex',
   110|                     color: Colors.Gray700,
   111|                     justifyContent: 'space-between',
   112|                   }}
   113|                 >
   114|                   {subsetTitleForRun(g)}
   115|                   <RunStateSummary run={g} />
   116|                 </div>
   117|               </div>
   118|             </RunGroupRun>
   119|           ) : null,
   120|         )}
   121|       </>
   122|     </SidebarSection>
   123|   );
   124| };
   125| export const RUN_GROUP_PANEL_QUERY = gql`
   126|   query RunGroupPanelQuery($runId: ID!) {
   127|     runGroupOrError(runId: $runId) {
   128|       ... on RunGroup {
   129|         rootRunId
   130|         runs {

# --- HUNK 4: Lines 135-199 ---
   135|       ...PythonErrorFragment
   136|     }
   137|   }
   138|   fragment RunGroupPanelRun on Run {
   139|     id
   140|     parentRunId
   141|     status
   142|     stepKeysToExecute
   143|     pipelineName
   144|     tags {
   145|       key
   146|       value
   147|     }
   148|     ...RunTimeFragment
   149|   }
   150|   ${PYTHON_ERROR_FRAGMENT}
   151|   ${RUN_TIME_FRAGMENT}
   152| `;
   153| const RunGroupRun = styled(Link)<{selected: boolean}>`
   154|   align-items: flex-start;
   155|   background: ${({selected}) => (selected ? Colors.Gray100 : Colors.White)};
   156|   padding: 4px 6px 4px 24px;
   157|   font-family: ${FontFamily.monospace};
   158|   font-size: 14px;
   159|   line-height: 20px;
   160|   display: flex;
   161|   position: relative;
   162|   &:hover {
   163|     text-decoration: none;
   164|     background: ${({selected}) => (selected ? Colors.Gray100 : Colors.Gray50)};
   165|   }
   166| `;
   167| const ThinLine = styled.div`
   168|   position: absolute;
   169|   top: 20px;
   170|   width: 1px;
   171|   background: ${Colors.Gray200};
   172|   left: 29px;
   173|   z-index: 2;
   174| `;
   175| const RunTitle = styled.span`
   176|   color: ${Colors.Dark};
   177|   font-weight: 500;
   178|   overflow: hidden;
   179|   text-overflow: ellipsis;
   180|   user-select: text;
   181|   flex: 1;
   182| `;
   183| const RootTag = (
   184|   <span
   185|     style={{
   186|       borderRadius: 2,
   187|       fontSize: 12,
   188|       lineHeight: '14px',
   189|       background: Colors.Gray300,
   190|       color: Colors.White,
   191|       padding: '0 4px',
   192|       fontWeight: 400,
   193|       userSelect: 'none',
   194|       marginLeft: 12,
   195|     }}
   196|   >
   197|     ROOT
   198|   </span>
   199| );


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/gantt/VizComponents.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-29 ---
     1| import {Colors, CursorControlsContainer} from '@dagster-io/ui-components';
     2| import styled from 'styled-components';
     3| export const OptionsContainer = styled.div`
     4|   min-height: 56px;
     5|   display: flex;
     6|   align-items: center;
     7|   padding: 5px 12px 5px 24px;
     8|   border-bottom: 1px solid ${Colors.KeylineGray};
     9|   background: ${Colors.White};
    10|   flex-shrink: 0;
    11|   flex-wrap: wrap;
    12|   z-index: 3;
    13|   ${CursorControlsContainer} {
    14|     margin-top: 0;
    15|     gap: 8px;
    16|     @media (max-width: 1100px) {
    17|       & .hideable-button-text {
    18|         display: none;
    19|       }
    20|       & div[role='img'] {
    21|         margin: 0;
    22|       }
    23|     }
    24|   }
    25| `;
    26| export const OptionsDivider = styled.div`
    27|   width: 30px;
    28|   height: 25px;
    29| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/gantt/ZoomSlider.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-32 ---
     1| import {Colors, SliderStyles} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| /**
     5|  * Renders a horizontal slider that lets you adjust the graph's relative zoom from 1-100.
     6|  * It uses Blueprint CSS but not the Slider component, because that renders twice and
     7|  * forces a DOM layout to determine it's size (I think for tick marks, which we aren't using)
     8|  */
     9| export const ZoomSlider = React.memo((props: {value: number; onChange: (v: number) => void}) => {
    10|   return (
    11|     <ZoomSliderContainer
    12|       $fillColor={Colors.Gray600}
    13|       className="bp4-slider bp4-slider-unlabeled"
    14|       onMouseDown={(e: React.MouseEvent) => {
    15|         const rect = e.currentTarget.closest('.bp4-slider')!.getBoundingClientRect();
    16|         let initialX: number;
    17|         if (e.target instanceof HTMLElement && e.target.classList.contains('bp4-slider-handle')) {
    18|           initialX = e.pageX;
    19|         } else {
    20|           initialX = rect.left + (props.value / 100) * rect.width;
    21|         }
    22|         const onUpdate = (e: MouseEvent) => {
    23|           const nextValue = props.value + (e.pageX - initialX) * (100 / rect.width);
    24|           props.onChange(Math.max(0, Math.min(100, nextValue)));
    25|         };
    26|         const onRelease = (e: MouseEvent) => {
    27|           onUpdate(e);
    28|           document.removeEventListener('mousemove', onUpdate);
    29|           document.removeEventListener('mouseup', onRelease);
    30|         };
    31|         document.addEventListener('mousemove', onUpdate);
    32|         document.addEventListener('mouseup', onRelease);


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/graph/ExternalConnectionNode.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {Colors} from '@dagster-io/ui-components';
     2| import {LinkVertical as Link} from '@vx/shape';
     3| import * as React from 'react';
     4| import styled from 'styled-components';
     5| import {Edge} from './OpEdges';
     6| import {SVGMonospaceText} from './SVGComponents';
     7| import {IPoint, isHighlighted} from './common';
     8| interface ExternalConnectionNodeProps {
     9|   layout: IPoint;
    10|   target: IPoint;
    11|   labelAttachment: 'top' | 'bottom';
    12|   label: string;
    13|   minified: boolean;
    14|   edges: Edge[];
    15|   highlightedEdges: Edge[];
    16|   onHighlightEdges: (edges: Edge[]) => void;
    17|   onDoubleClickLabel: () => void;
    18| }
    19| export const ExternalConnectionNode = ({
    20|   layout,
    21|   target,

# --- HUNK 2: Lines 40-66 ---
    40|   };
    41|   return (
    42|     <g onMouseEnter={() => onHighlightEdges(edges)} onMouseLeave={() => onHighlightEdges([])}>
    43|       <BackingRect
    44|         {...textSize}
    45|         {...textOrigin}
    46|         onClick={(e) => e.stopPropagation()}
    47|         onDoubleClick={(e) => {
    48|           e.stopPropagation();
    49|           onDoubleClickLabel();
    50|         }}
    51|       />
    52|       <ellipse cx={layout.x} cy={layout.y} rx={7} ry={7} fill={color} />
    53|       <SVGMonospaceText {...textProps} {...textSize} {...textOrigin} />
    54|       <Link style={{stroke: color, strokeWidth: 6, fill: 'none'}} data={{source: layout, target}} />
    55|     </g>
    56|   );
    57| };
    58| const BackingRect = styled('rect')`
    59|   stroke-width: 10px;
    60|   fill: ${Colors.Gray100};
    61|   stroke: ${Colors.Gray100};
    62|   &:hover {
    63|     fill: ${Colors.Gray200};
    64|     stroke: ${Colors.Gray200};
    65|   }
    66| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/graph/OpGraph.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-22 ---
     1| import {gql} from '@apollo/client';
     2| import {Colors} from '@dagster-io/ui-components';
     3| import * as React from 'react';
     4| import styled from 'styled-components';
     5| import {OpNameOrPath} from '../ops/OpNameOrPath';
     6| import {OpEdges} from './OpEdges';
     7| import {OpNode, OP_NODE_DEFINITION_FRAGMENT, OP_NODE_INVOCATION_FRAGMENT} from './OpNode';
     8| import {ParentOpNode, SVGLabeledParentRect} from './ParentOpNode';
     9| import {DEFAULT_MAX_ZOOM, DETAIL_ZOOM, SVGViewport, SVGViewportInteractor} from './SVGViewport';
    10| import {OpGraphLayout} from './asyncGraphLayout';
    11| import {
    12|   Edge,
    13|   closestNodeInDirection,
    14|   computeNodeKeyPrefixBoundingBoxes,
    15|   isHighlighted,
    16|   isNodeOffscreen,
    17|   isOpHighlighted,
    18| } from './common';
    19| import {OpGraphOpFragment} from './types/OpGraph.types';
    20| const NoOp = () => {};
    21| interface OpGraphProps {
    22|   jobName: string;

# --- HUNK 2: Lines 46-123 ---
    46|     layout,
    47|     minified,
    48|     ops,
    49|     viewportRect,
    50|     focusOps,
    51|     parentOp,
    52|     parentHandleID,
    53|     onClickOp = NoOp,
    54|     onDoubleClickOp = NoOp,
    55|     onEnterSubgraph = NoOp,
    56|     highlightedOps,
    57|     selectedOp,
    58|   } = props;
    59|   return (
    60|     <>
    61|       {parentOp && layout.parent && layout.parent.invocationBoundingBox.width > 0 && (
    62|         <SVGLabeledParentRect
    63|           {...layout.parent.invocationBoundingBox}
    64|           key={`composite-rect-${parentHandleID}`}
    65|           label=""
    66|           fill={Colors.Yellow50}
    67|           minified={minified}
    68|         />
    69|       )}
    70|       {parentOp && (
    71|         <ParentOpNode
    72|           onClickOp={onClickOp}
    73|           onDoubleClick={(name) => onDoubleClickOp({name})}
    74|           onHighlightEdges={setHighlighted}
    75|           highlightedEdges={highlighted}
    76|           key={`composite-rect-${parentHandleID}-definition`}
    77|           minified={minified}
    78|           op={parentOp}
    79|           layout={layout}
    80|         />
    81|       )}
    82|       <OpEdges
    83|         ops={ops}
    84|         layout={layout}
    85|         color={Colors.KeylineGray}
    86|         edges={layout.edges}
    87|         onHighlight={setHighlighted}
    88|       />
    89|       <OpEdges
    90|         ops={ops}
    91|         layout={layout}
    92|         color={Colors.Blue500}
    93|         onHighlight={setHighlighted}
    94|         edges={layout.edges.filter(({from, to}) =>
    95|           isHighlighted(highlighted, {a: from.opName, b: to.opName}),
    96|         )}
    97|       />
    98|       {computeNodeKeyPrefixBoundingBoxes(layout).map((box, idx) => (
    99|         <rect
   100|           key={idx}
   101|           {...box}
   102|           stroke="rgb(230, 219, 238)"
   103|           fill="rgba(230, 219, 238, 0.2)"
   104|           strokeWidth={2}
   105|         />
   106|       ))}
   107|       <foreignObject width={layout.width} height={layout.height} style={{pointerEvents: 'none'}}>
   108|         {ops
   109|           .filter((op) => !isNodeOffscreen(layout.nodes[op.name]!.bounds, viewportRect))
   110|           .map((op) => (
   111|             <OpNode
   112|               key={op.name}
   113|               invocation={op}
   114|               definition={op.definition}
   115|               minified={minified}
   116|               onClick={() => onClickOp({name: op.name})}
   117|               onDoubleClick={() => onDoubleClickOp({name: op.name})}
   118|               onEnterComposite={() => onEnterSubgraph({name: op.name})}
   119|               onHighlightEdges={setHighlighted}
   120|               layout={layout.nodes[op.name]!}
   121|               selected={selectedOp === op}
   122|               focused={focusOps.includes(op)}
   123|               highlightedEdges={


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/graph/OpIOBox.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {Colors, FontFamily} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| import {DEFAULT_RESULT_NAME, titleOfIO} from '../app/titleOfIO';
     5| import {Edge, isHighlighted, position} from './common';
     6| import {OpLayoutIO} from './layout';
     7| import {
     8|   OpNodeInputDefinitionFragment,
     9|   OpNodeOutputDefinitionFragment,
    10|   OpNodeDefinitionFragment,
    11|   OpNodeInvocationFragment,
    12| } from './types/OpNode.types';
    13| export const PARENT_IN = 'PARENT_IN';
    14| export const PARENT_OUT = 'PARENT_OUT';
    15| interface OpIORenderMetadata {
    16|   edges: Edge[];
    17|   jumpTargetOp: string | null;
    18|   title: string;
    19| }
    20| interface OpIOBoxProps extends OpIORenderMetadata {
    21|   colorKey: 'input' | 'output';

# --- HUNK 2: Lines 62-133 ---
    62|       ) : (
    63|         <>
    64|           <div className="circle" />
    65|           {name !== DEFAULT_RESULT_NAME && <div className="label">{name}</div>}
    66|           {type.displayName && type.displayName !== 'Nothing' && (
    67|             <div className="type">{type.displayName}</div>
    68|           )}
    69|         </>
    70|       )}
    71|       {layoutInfo.collapsed.length > 0 && (
    72|         <div className="collapsedCount">+ {layoutInfo.collapsed.length}</div>
    73|       )}
    74|     </OpIOContainer>
    75|   );
    76| };
    77| const OpIOContainer = styled.div<{$colorKey: string; $highlighted: boolean}>`
    78|   display: inline-flex;
    79|   align-items: center;
    80|   border-top-right-radius: 8px;
    81|   border-bottom-right-radius: 8px;
    82|   background: ${(p) => (p.$highlighted ? 'rgba(255, 255, 255, 1)' : 'rgba(255, 255, 255, 0.75)')};
    83|   font-size: 12px;
    84|   &:last-child {
    85|     border-bottom-left-radius: 8px;
    86|   }
    87|   .circle {
    88|     width: 14px;
    89|     height: 14px;
    90|     border-radius: 50%;
    91|     background: ${(p) => (p.$highlighted ? Colors.Blue500 : Colors.Gray500)};
    92|     display: inline-block;
    93|     margin: 6px;
    94|   }
    95|   .label {
    96|     line-height: 26px;
    97|     font-family: ${FontFamily.monospace};
    98|     font-weight: 500;
    99|     height: 26px;
   100|     padding-left: 2px;
   101|     padding-right: 6px;
   102|   }
   103|   .type {
   104|     padding: 1px 6px;
   105|     background: #e7e6f0;
   106|     margin-right: 4px;
   107|     color: ${Colors.Blue500};
   108|     font-family: ${FontFamily.monospace};
   109|     font-weight: 700;
   110|     border-radius: 4px;
   111|   }
   112|   .collapsedCount {
   113|     color: ${(p) => (p.$highlighted ? Colors.Blue500 : Colors.Gray500)};
   114|     font-weight: 600;
   115|     margin-left: -3px;
   116|     padding-right: 4px;
   117|   }
   118| `;
   119| export function metadataForCompositeParentIO(
   120|   parentDefinition: OpNodeDefinitionFragment,
   121|   item: OpNodeInputDefinitionFragment | OpNodeOutputDefinitionFragment,
   122| ): OpIORenderMetadata {
   123|   const edges: Edge[] = [];
   124|   let title = `${item.name}: ${item.type.displayName}`;
   125|   if (parentDefinition.__typename !== 'CompositeSolidDefinition') {
   126|     throw new Error('Parent solid is not a composite - how did this happen?');
   127|   }
   128|   if (item.__typename === 'InputDefinition') {
   129|     const others = parentDefinition.inputMappings
   130|       .filter((i) => i.definition.name === item.name)
   131|       .map((i) => i.mappedInput);
   132|     title += `\n\nConnected to: ${others.map(titleOfIO).join('\n')}`;
   133|     edges.push(


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/graph/OpNode.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-22 ---
     1| import {gql} from '@apollo/client';
     2| import {Colors, Icon, FontFamily} from '@dagster-io/ui-components';
     3| import * as React from 'react';
     4| import styled from 'styled-components';
     5| import {withMiddleTruncation} from '../app/Util';
     6| import {displayNameForAssetKey} from '../asset-graph/Utils';
     7| import {AssetKey} from '../assets/types';
     8| import {testId} from '../testing/testId';
     9| import {OpIOBox, metadataForIO} from './OpIOBox';
    10| import {OpTags, IOpTag} from './OpTags';
    11| import {OpLayout} from './asyncGraphLayout';
    12| import {Edge, position} from './common';
    13| import {OpNodeInvocationFragment, OpNodeDefinitionFragment} from './types/OpNode.types';
    14| interface IOpNodeProps {
    15|   layout: OpLayout;
    16|   invocation?: OpNodeInvocationFragment;
    17|   definition: OpNodeDefinitionFragment;
    18|   highlightedEdges: Edge[];
    19|   minified: boolean;
    20|   selected: boolean;
    21|   focused: boolean;
    22|   dim: boolean;

# --- HUNK 2: Lines 274-383 ---
   274|           }
   275|         }
   276|       }
   277|     }
   278|   }
   279|   fragment OpNodeInputDefinition on InputDefinition {
   280|     name
   281|     type {
   282|       displayName
   283|     }
   284|   }
   285|   fragment OpNodeOutputDefinition on OutputDefinition {
   286|     name
   287|     isDynamic
   288|     type {
   289|       displayName
   290|     }
   291|   }
   292| `;
   293| const NodeHighlightColors = {
   294|   Border: Colors.Blue500,
   295|   Background: Colors.Blue50,
   296| };
   297| const NodeContainer = styled.div<{
   298|   $minified: boolean;
   299|   $selected: boolean;
   300|   $secondaryHighlight: boolean;
   301|   $dim: boolean;
   302| }>`
   303|   opacity: ${({$dim}) => ($dim ? 0.3 : 1)};
   304|   pointer-events: auto;
   305|   user-select: none;
   306|   cursor: default;
   307|   .highlight-box {
   308|     border-radius: 13px;
   309|     background: ${(p) => (p.$selected ? NodeHighlightColors.Background : 'transparent')};
   310|   }
   311|   .node-box {
   312|     border: ${(p) =>
   313|       p.$selected
   314|         ? `2px dashed ${NodeHighlightColors.Border}`
   315|         : p.$secondaryHighlight
   316|         ? `2px solid ${Colors.Blue500}55`
   317|         : '2px solid #dcd5ca'};
   318|     border-width: ${(p) => (p.$minified ? '3px' : '2px')};
   319|     border-radius: 8px;
   320|     background: ${(p) => (p.$minified ? Colors.Gray50 : Colors.White)};
   321|   }
   322|   .composite-marker {
   323|     outline: ${(p) => (p.$minified ? '3px' : '2px')} solid
   324|       ${(p) => (p.$selected ? 'transparent' : Colors.Yellow200)};
   325|     outline-offset: ${(p) => (p.$minified ? '5px' : '3px')};
   326|     border-radius: 3px;
   327|   }
   328|   .dynamic-marker {
   329|     transform: translate(-5px, -5px);
   330|     border: ${(p) => (p.$minified ? '3px' : '2px')} solid #dcd5ca;
   331|     border-radius: 3px;
   332|   }
   333|   .config-marker {
   334|     position: absolute;
   335|     transform: ${(p) => (p.$minified ? ' translate(-100%, -28px)' : ' translate(-100%, -21px)')};
   336|     font-size: ${(p) => (p.$minified ? '24px' : '12px')};
   337|     font-family: ${FontFamily.monospace};
   338|     font-weight: 700;
   339|     opacity: 0.5;
   340|   }
   341|   .name {
   342|     display: flex;
   343|     gap: 5px;
   344|     padding: 4px ${(p) => (p.$minified ? '8px' : '3px')};
   345|     font-size: ${(p) => (p.$minified ? '32px' : '14px')};
   346|     font-family: ${FontFamily.monospace};
   347|     border-top-left-radius: 8px;
   348|     border-top-right-radius: 8px;
   349|     align-items: center;
   350|     font-weight: 600;
   351|     .label {
   352|       white-space: nowrap;
   353|       overflow: hidden;
   354|       text-overflow: ellipsis;
   355|     }
   356|   }
   357|   .assets {
   358|     padding: 0 4px;
   359|     white-space: nowrap;
   360|     line-height: 22px;
   361|     height: 22px;
   362|     overflow: hidden;
   363|     text-overflow: ellipsis;
   364|     background: #f5f3ef;
   365|     font-size: 12px;
   366|     display: flex;
   367|     gap: 4px;
   368|     align-items: center;
   369|   }
   370|   .description {
   371|     padding: 0 8px;
   372|     white-space: nowrap;
   373|     line-height: 22px;
   374|     height: 22px;
   375|     overflow: hidden;
   376|     text-overflow: ellipsis;
   377|     background: #f5f3ef;
   378|     border-top: 1px solid #e6e1d8;
   379|     border-bottom-left-radius: 8px;
   380|     border-bottom-right-radius: 8px;
   381|     font-size: 12px;
   382|   }
   383| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/graph/OpTags.tsx
# Total hunks: 6
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {Box, Colors, FontFamily, IconWrapper} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| import airbyte from './optag-images/airbyte.svg';
     5| import airflow from './optag-images/airflow.svg';
     6| import aws from './optag-images/aws.svg';
     7| import azure from './optag-images/azure.svg';
     8| import azureml from './optag-images/azureml.svg';
     9| import bigquery from './optag-images/bigquery.svg';
    10| import census from './optag-images/census.svg';
    11| import databricks from './optag-images/databricks.svg';
    12| import datadog from './optag-images/datadog.svg';
    13| import dbt from './optag-images/dbt.svg';
    14| import duckdb from './optag-images/duckdb.svg';
    15| import fivetran from './optag-images/fivetran.svg';
    16| import github from './optag-images/github.svg';
    17| import gitlab from './optag-images/gitlab.svg';
    18| import googlecloud from './optag-images/googlecloud.svg';
    19| import googlesheets from './optag-images/googlesheets.svg';
    20| import great_expectations from './optag-images/great_expectations.svg';
    21| import hex from './optag-images/hex.svg';

# --- HUNK 2: Lines 50-224 ---
    50| import sql from './optag-images/sql.svg';
    51| import stitch from './optag-images/stitch.svg';
    52| import stripe from './optag-images/stripe.svg';
    53| import tableau from './optag-images/tableau.svg';
    54| import tensorflow from './optag-images/tensorflow.svg';
    55| import vercel from './optag-images/vercel.svg';
    56| import weights_and_biases from './optag-images/weights_and_biases.svg';
    57| export interface IOpTag {
    58|   label: string;
    59|   onClick: (e: React.MouseEvent) => void;
    60| }
    61| interface OpTagsProps {
    62|   style: React.CSSProperties;
    63|   tags: IOpTag[];
    64|   reduceColor?: boolean;
    65|   reduceText?: boolean;
    66|   reversed?: boolean;
    67| }
    68| export const KNOWN_TAGS = {
    69|   jupyter: {
    70|     color: '#4E4E4E',
    71|     icon: jupyter,
    72|     content: 'Jupyter',
    73|   },
    74|   ipynb: {
    75|     color: '#4E4E4E',
    76|     icon: jupyter,
    77|     content: 'Jupyter',
    78|   },
    79|   noteable: {
    80|     color: '#00D2D2',
    81|     icon: noteable,
    82|     content: 'Noteable',
    83|     reversed: true,
    84|   },
    85|   airbyte: {
    86|     color: '#655CFC',
    87|     icon: airbyte,
    88|     content: 'Airbyte',
    89|   },
    90|   sling: {
    91|     color: '#2176EA',
    92|     icon: sling,
    93|     content: 'Sling',
    94|   },
    95|   snowflake: {
    96|     color: '#29B5E8',
    97|     icon: snowflake,
    98|     content: 'Snowflake',
    99|   },
   100|   python: {
   101|     color: '#35668F',
   102|     icon: python,
   103|     content: 'Python',
   104|   },
   105|   fivetran: {
   106|     color: '#0073FF',
   107|     icon: fivetran,
   108|     content: 'Fivetran',
   109|   },
   110|   dbt: {
   111|     color: '#FF6B4C',
   112|     icon: dbt,
   113|     content: 'dbt',
   114|   },
   115|   slack: {
   116|     color: '#4A144A',
   117|     icon: slack,
   118|     content: 'Slack',
   119|   },
   120|   pytorch: {
   121|     color: '#EE4C2C',
   122|     icon: pytorch,
   123|     content: 'PyTorch',
   124|   },
   125|   pyspark: {
   126|     color: '#C74D15',
   127|     icon: pyspark,
   128|     content: 'PySpark',
   129|   },
   130|   spark: {
   131|     color: '#C74D15',
   132|     icon: pyspark,
   133|     content: 'Spark',
   134|   },
   135|   duckdb: {
   136|     color: '#FCBC41',
   137|     icon: duckdb,
   138|     content: 'DuckDB',
   139|     reversed: true,
   140|   },
   141|   tensorflow: {
   142|     color: '#FE9413',
   143|     icon: tensorflow,
   144|     content: 'TensorFlow',
   145|     reversed: true,
   146|   },
   147|   pandas: {
   148|     color: '#130754',
   149|     icon: pandas,
   150|     content: 'pandas',
   151|   },
   152|   googlesheets: {
   153|     color: '#23A566',
   154|     icon: googlesheets,
   155|     content: 'Google Sheets',
   156|   },
   157|   sql: {
   158|     color: '#B821FF',
   159|     icon: sql,
   160|     content: 'SQL',
   161|   },
   162|   wandb: {
   163|     color: '#FCB119',
   164|     icon: weights_and_biases,
   165|     content: 'Weights & Biases',
   166|     reversed: true,
   167|   },
   168|   databricks: {
   169|     color: '#FD3820',
   170|     icon: databricks,
   171|     content: 'Databricks',
   172|   },
   173|   airflow: {
   174|     color: '#017CEE',
   175|     icon: airflow,
   176|     content: 'Airflow',
   177|   },
   178|   datadog: {
   179|     color: '#632CA6',
   180|     icon: datadog,
   181|     content: 'Datadog',
   182|   },
   183|   postgres: {
   184|     color: '#336791',
   185|     icon: postgres,
   186|     content: 'Postgres',
   187|   },
   188|   stripe: {
   189|     color: '#635BFF',
   190|     icon: stripe,
   191|     content: 'Stripe',
   192|   },
   193|   hightouch: {
   194|     color: '#07484D',
   195|     icon: hightouch,
   196|     content: 'Hightouch',
   197|   },
   198|   census: {
   199|     color: '#EF54AC',
   200|     icon: census,
   201|     content: 'Census',
   202|   },
   203|   hex: {
   204|     color: '#F5C0C0',
   205|     icon: hex,
   206|     content: 'Hex',
   207|     reversed: true,
   208|   },
   209|   azure: {
   210|     color: '#39C3F1',
   211|     icon: azure,
   212|     content: 'Azure',
   213|   },
   214|   azureml: {
   215|     color: '#39C3F1',
   216|     icon: azureml,
   217|     content: 'Azure ML',
   218|   },
   219|   sagemaker: {
   220|     color: '#A164FD',
   221|     icon: sagemaker,
   222|     content: 'Sagemaker',
   223|   },
   224|   bigquery: {

# --- HUNK 3: Lines 228-356 ---
   228|   },
   229|   teams: {
   230|     color: '#5255A9',
   231|     icon: teams,
   232|     content: 'Teams',
   233|   },
   234|   mlflow: {
   235|     color: '#0194E2',
   236|     icon: mlflow,
   237|     content: 'ML Flow',
   238|   },
   239|   greatexpectations: {
   240|     color: '#FF6310',
   241|     icon: great_expectations,
   242|     content: 'Great Expectations',
   243|   },
   244|   powerbi: {
   245|     color: '#EDC947',
   246|     icon: powerbi,
   247|     content: 'Power BI',
   248|     reversed: true,
   249|   },
   250|   gcp: {
   251|     color: '#4285F4',
   252|     icon: googlecloud,
   253|     content: 'GCP',
   254|   },
   255|   googlecloud: {
   256|     color: '#4285F4',
   257|     icon: googlecloud,
   258|     content: 'Google Cloud',
   259|   },
   260|   looker: {
   261|     color: '#5F6368',
   262|     icon: looker,
   263|     content: 'Looker',
   264|   },
   265|   tableau: {
   266|     color: '#25447A',
   267|     icon: tableau,
   268|     content: 'Tableau',
   269|   },
   270|   segment: {
   271|     color: '#43AF79',
   272|     icon: segment,
   273|     content: 'Segment',
   274|   },
   275|   athena: {
   276|     color: '#FF9900',
   277|     icon: aws,
   278|     content: 'Athena',
   279|     reversed: true,
   280|   },
   281|   s3: {
   282|     color: '#FF9900',
   283|     icon: aws,
   284|     content: 'S3',
   285|     reversed: true,
   286|   },
   287|   aws: {
   288|     color: '#FF9900',
   289|     icon: aws,
   290|     content: 'AWS',
   291|     reversed: true,
   292|   },
   293|   stitch: {
   294|     color: '#FFD201',
   295|     icon: stitch,
   296|     content: 'Stitch',
   297|     reversed: true,
   298|   },
   299|   openai: {
   300|     color: '#4AA081',
   301|     icon: openai,
   302|     content: 'Open AI',
   303|   },
   304|   vercel: {
   305|     color: '#171615',
   306|     icon: vercel,
   307|     content: 'Vercel',
   308|   },
   309|   github: {
   310|     color: '#171615',
   311|     icon: github,
   312|     content: 'Github',
   313|   },
   314|   gitlab: {
   315|     color: '#E24329',
   316|     icon: gitlab,
   317|     content: 'Gitlab',
   318|   },
   319|   plotly: {
   320|     color: '#787AF7',
   321|     icon: plotly,
   322|     content: 'plotly',
   323|   },
   324|   modal: {
   325|     color: '#9AEE86',
   326|     icon: modal,
   327|     content: 'Modal',
   328|     reversed: true,
   329|   },
   330|   meltano: {
   331|     color: '#311772',
   332|     icon: meltano,
   333|     content: 'Meltano',
   334|   },
   335|   matplotlib: {
   336|     color: '#2B597C',
   337|     icon: matplotlib,
   338|     content: 'matplotlib',
   339|   },
   340|   numpy: {
   341|     color: '#4D77CF',
   342|     icon: numpy,
   343|     content: 'NumPy',
   344|   },
   345|   scipy: {
   346|     color: '#0054A6',
   347|     icon: scipy,
   348|     content: 'SciPy',
   349|   },
   350|   scikitlearn: {
   351|     color: '#F7931E',
   352|     icon: scikitlearn,
   353|     content: 'Scikit Learn',
   354|   },
   355|   keras: {
   356|     color: '#D00000',

# --- HUNK 4: Lines 393-468 ---
   393|   return (
   394|     <OpTags
   395|       {...rest}
   396|       tags={[
   397|         {
   398|           label: definition.computeKind,
   399|           onClick: () => {
   400|             window.requestAnimationFrame(() => document.dispatchEvent(new Event('show-kind-info')));
   401|           },
   402|         },
   403|       ]}
   404|     />
   405|   );
   406| };
   407| export const OpTags = React.memo(({tags, style, reduceColor, reduceText}: OpTagsProps) => {
   408|   return (
   409|     <OpTagsContainer style={style}>
   410|       {tags.map((tag) => {
   411|         const known = KNOWN_TAGS[coerceToStandardLabel(tag.label) as keyof typeof KNOWN_TAGS];
   412|         const text = known?.content || tag.label;
   413|         const color = known?.color || Colors.Gray600;
   414|         const textcolor = known && 'reversed' in known ? Colors.Gray900 : Colors.White;
   415|         return (
   416|           <Box
   417|             key={tag.label}
   418|             flex={{gap: 4, alignItems: 'center'}}
   419|             data-tooltip={reduceText ? text : undefined}
   420|             onClick={tag.onClick}
   421|             style={{
   422|               background:
   423|                 reduceColor && reduceText ? Colors.White : reduceColor ? Colors.Gray100 : color,
   424|               color: reduceColor ? Colors.Gray700 : textcolor,
   425|               fontWeight: reduceColor ? 500 : 700,
   426|             }}
   427|           >
   428|             {known && 'icon' in known && (
   429|               <OpTagIconWrapper
   430|                 role="img"
   431|                 $size={16}
   432|                 $img={known.icon.src}
   433|                 $color={
   434|                   reduceColor ? (known && 'reversed' in known ? Colors.Gray900 : color) : textcolor
   435|                 }
   436|                 $rotation={null}
   437|                 aria-label={tag.label}
   438|               />
   439|             )}
   440|             {known && 'icon' in known && reduceText ? undefined : text}
   441|           </Box>
   442|         );
   443|       })}
   444|     </OpTagsContainer>
   445|   );
   446| });
   447| const OpTagIconWrapper = styled(IconWrapper)`
   448|   mask-size: contain;
   449|   mask-repeat: no-repeat;
   450|   mask-position: center;
   451|   -webkit-mask-size: contain;
   452|   -webkit-mask-repeat: no-repeat;
   453|   -webkit-mask-position: center;
   454| `;
   455| const OpTagsContainer = styled.div`
   456|   gap: 6px;
   457|   position: absolute;
   458|   display: flex;
   459|   & > div {
   460|     padding: 0 8px;
   461|     min-height: 24px;
   462|     display: flex;
   463|     align-items: center;
   464|     font-family: ${FontFamily.default};
   465|     font-size: 12px;
   466|     border-radius: 8px;
   467|   }
   468| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/graph/ParentOpNode.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {Colors} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| import {titleOfIO} from '../app/titleOfIO';
     5| import {OpNameOrPath} from '../ops/OpNameOrPath';
     6| import {ExternalConnectionNode} from './ExternalConnectionNode';
     7| import {MappingLine} from './MappingLine';
     8| import {metadataForCompositeParentIO, PARENT_IN, PARENT_OUT, OpIOBox} from './OpIOBox';
     9| import {SVGLabeledRect} from './SVGComponents';
    10| import {OpGraphLayout} from './asyncGraphLayout';
    11| import {Edge} from './common';
    12| import {OpGraphOpFragment} from './types/OpGraph.types';
    13| interface ParentOpNodeProps {
    14|   layout: OpGraphLayout;
    15|   op: OpGraphOpFragment;
    16|   minified: boolean;
    17|   highlightedEdges: Edge[];
    18|   onDoubleClick: (opName: string) => void;
    19|   onClickOp: (arg: OpNameOrPath) => void;
    20|   onHighlightEdges: (edges: Edge[]) => void;
    21| }

# --- HUNK 2: Lines 27-67 ---
    27|   }
    28|   const parentLayout = layout.parent;
    29|   if (!parentLayout) {
    30|     throw new Error('Parent op rendered when no parent layout is present.');
    31|   }
    32|   const {bounds, mappingLeftEdge, mappingLeftSpacing} = parentLayout;
    33|   const highlightingProps = {
    34|     highlightedEdges: props.highlightedEdges,
    35|     onHighlightEdges: props.onHighlightEdges,
    36|     onDoubleClick: props.onDoubleClick,
    37|     onClickOp: props.onClickOp,
    38|   };
    39|   if (bounds.height < 0 || bounds.width < 0) {
    40|     return <g />;
    41|   }
    42|   return (
    43|     <>
    44|       <SVGLabeledParentRect
    45|         {...bounds}
    46|         label={op.definition.name}
    47|         fill={Colors.Gray50}
    48|         minified={minified}
    49|       />
    50|       {def.inputMappings.map(({definition, mappedInput}, idx) => {
    51|         const parentIO = parentLayout.inputs[definition.name];
    52|         const destinationNode = layout.nodes[mappedInput.solid.name];
    53|         if (!destinationNode || !parentIO) {
    54|           console.warn(
    55|             `Assertion failure - Unable to find ${mappedInput.solid.name} in the layout ` +
    56|               `or ${definition.name} in the parent layout`,
    57|           );
    58|           return <g key={mappedInput.solid.name} />;
    59|         }
    60|         const destinationIOFull = destinationNode.inputs[mappedInput.definition.name];
    61|         const destinationIOCollapsed = Object.values(destinationNode.inputs).find((o) =>
    62|           o.collapsed.includes(mappedInput.definition.name),
    63|         );
    64|         const destinationIO = destinationIOFull || destinationIOCollapsed;
    65|         if (!destinationIO) {
    66|           console.warn(
    67|             `Assertion failure - Unable to find port for ${mappedInput.definition.name}`,


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/graph/SVGViewport.tsx
# Total hunks: 6
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {Box, Colors, FontFamily, Icon, IconWrapper, Slider} from '@dagster-io/ui-components';
     2| import animate from 'amator';
     3| import * as React from 'react';
     4| import ReactDOM from 'react-dom';
     5| import {MemoryRouter} from 'react-router-dom';
     6| import styled from 'styled-components';
     7| import {IBounds} from './common';
     8| import {makeSVGPortable} from './makeSVGPortable';
     9| export interface SVGViewportInteractor {
    10|   onMouseDown(viewport: SVGViewport, event: React.MouseEvent<HTMLDivElement>): void;
    11|   onWheel(viewport: SVGViewport, event: WheelEvent): void;
    12|   render?(viewport: SVGViewport): React.ReactElement<any> | null;
    13| }
    14| interface SVGViewportProps {
    15|   graphWidth: number;
    16|   graphHeight: number;
    17|   graphHasNoMinimumZoom?: boolean;
    18|   interactor: SVGViewportInteractor;
    19|   defaultZoom: 'zoom-to-fit' | 'zoom-to-fit-width';
    20|   maxZoom: number;
    21|   maxAutocenterZoom: number;

# --- HUNK 2: Lines 140-183 ---
   140|       >
   141|         <WheelInstructionTooltip />
   142|         <Box flex={{direction: 'column', alignItems: 'center'}}>
   143|           <IconButton
   144|             onClick={() => {
   145|               const x = viewport.element.current!.clientWidth / 2;
   146|               const y = viewport.element.current!.clientHeight / 2;
   147|               const scale = Math.min(
   148|                 viewport.getMaxZoom(),
   149|                 viewport.state.scale + BUTTON_INCREMENT,
   150|               );
   151|               const adjusted = Math.round((scale + Number.EPSILON) * 100) / 100;
   152|               viewport.adjustZoomRelativeToScreenPoint(adjusted, {x, y});
   153|             }}
   154|           >
   155|             <Icon size={24} name="zoom_in" />
   156|           </IconButton>
   157|           <Box
   158|             style={{width: 32}}
   159|             padding={{vertical: 12}}
   160|             background={Colors.White}
   161|             data-zoom-control={true}
   162|             flex={{alignItems: 'center', direction: 'column'}}
   163|             border={{side: 'left-and-right', color: Colors.Gray300}}
   164|           >
   165|             <Slider
   166|               vertical
   167|               min={viewport.getMinZoom()}
   168|               max={viewport.getMaxZoom()}
   169|               stepSize={0.001}
   170|               value={viewport.state.scale}
   171|               labelRenderer={false}
   172|               onChange={(scale: number) => {
   173|                 const x = viewport.element.current!.clientWidth / 2;
   174|                 const y = viewport.element.current!.clientHeight / 2;
   175|                 viewport.adjustZoomRelativeToScreenPoint(scale, {x, y});
   176|               }}
   177|             />
   178|           </Box>
   179|           <IconButton
   180|             onClick={() => {
   181|               const x = viewport.element.current!.clientWidth / 2;
   182|               const y = viewport.element.current!.clientHeight / 2;
   183|               const scale = Math.max(

# --- HUNK 3: Lines 186-246 ---
   186|               );
   187|               viewport.adjustZoomRelativeToScreenPoint(scale, {x, y});
   188|             }}
   189|           >
   190|             <Icon size={24} name="zoom_out" />
   191|           </IconButton>
   192|         </Box>
   193|         <Box flex={{direction: 'column', alignItems: 'center', gap: 8}} margin={{top: 8}}>
   194|           {viewport.props.additionalToolbarElements}
   195|           <Box>
   196|             <IconButton onClick={() => viewport.onExportToSVG()}>
   197|               <Icon size={24} name="download_for_offline" />
   198|             </IconButton>
   199|           </Box>
   200|         </Box>
   201|       </ZoomSliderContainer>
   202|     );
   203|   },
   204| };
   205| const IconButton = styled.button`
   206|   background: ${Colors.White};
   207|   border: 1px solid ${Colors.Gray300};
   208|   cursor: pointer;
   209|   padding: 3px;
   210|   position: relative;
   211|   :focus {
   212|     outline: none;
   213|   }
   214|   ${IconWrapper} {
   215|     transition: background 100ms;
   216|   }
   217|   &:first-child {
   218|     border-top-left-radius: 8px;
   219|     border-top-right-radius: 8px;
   220|   }
   221|   &:last-child {
   222|     border-bottom-left-radius: 8px;
   223|     border-bottom-right-radius: 8px;
   224|   }
   225|   :active {
   226|     background-color: ${Colors.Gray100};
   227|   }
   228| `;
   229| const NoneInteractor: SVGViewportInteractor = {
   230|   onMouseDown(_viewport: SVGViewport, event: React.MouseEvent<HTMLDivElement>) {
   231|     event.preventDefault();
   232|     event.stopPropagation();
   233|   },
   234|   onWheel() {
   235|     return;
   236|   },
   237|   render() {
   238|     return <span />;
   239|   },
   240| };
   241| export class SVGViewport extends React.Component<SVGViewportProps, SVGViewportState> {
   242|   static Interactors = {
   243|     PanAndZoom: PanAndZoomInteractor,
   244|     None: NoneInteractor,
   245|   };
   246|   static defaultProps = {

# --- HUNK 4: Lines 478-566 ---
   478|     ReactDOM.render(
   479|       <MemoryRouter>{this.props.children(this.state, unclippedViewport)}</MemoryRouter>,
   480|       div,
   481|     );
   482|     const svg = div.querySelector('svg') as SVGElement;
   483|     await makeSVGPortable(svg);
   484|     const text = new XMLSerializer().serializeToString(svg);
   485|     const blob = new Blob([text], {type: 'image/svg+xml'});
   486|     const a = document.createElement('a');
   487|     a.setAttribute(
   488|       'download',
   489|       `${document.title.replace(/[: \/]/g, '_').replace(/__+/g, '_')}.svg`,
   490|     );
   491|     a.setAttribute('href', URL.createObjectURL(blob));
   492|     a.click();
   493|     div.remove();
   494|   };
   495|   render() {
   496|     const {children, onClick, interactor} = this.props;
   497|     const {x, y, scale, isClickHeld} = this.state;
   498|     const dotsize = Math.max(7, 30 * scale);
   499|     return (
   500|       <div
   501|         ref={this.element}
   502|         style={Object.assign({}, SVGViewportStyles, {
   503|           backgroundPosition: `${x}px ${y}px`,
   504|           backgroundSize: `${dotsize}px`,
   505|           cursor: isClickHeld ? 'grabbing' : 'grab',
   506|         })}
   507|         data-svg-viewport="1"
   508|         onMouseDown={(e) => interactor.onMouseDown(this, e)}
   509|         onDoubleClick={this.onDoubleClick}
   510|         onKeyDown={this.onKeyDown}
   511|         onDragStart={(e) => e.preventDefault()}
   512|         onClick={onClick}
   513|         tabIndex={-1}
   514|       >
   515|         <div
   516|           style={{
   517|             transformOrigin: `top left`,
   518|             transform: `matrix(${scale}, 0, 0, ${scale}, ${x}, ${y})`,
   519|           }}
   520|         >
   521|           {children(this.state, this.getViewport())}
   522|         </div>
   523|         {interactor.render && interactor.render(this)}
   524|       </div>
   525|     );
   526|   }
   527| }
   528| /*
   529| BG: Not using styled-components here because I need a `ref` to an actual DOM element.
   530| Styled-component with a ref returns a React component we need to findDOMNode to use.
   531| */
   532| const SVGViewportStyles: React.CSSProperties = {
   533|   width: '100%',
   534|   height: '100%',
   535|   position: 'relative',
   536|   overflow: 'hidden',
   537|   userSelect: 'none',
   538|   outline: 'none',
   539|   background: `url("data:image/svg+xml;utf8,<svg width='30px' height='30px' viewBox='0 0 80 80' xmlns='http://www.w3.org/2000/svg'><circle fill='rgba(236, 236, 236, 1)' cx='5' cy='5' r='5' /></svg>") repeat`,
   540| };
   541| const ZoomSliderContainer = styled.div`
   542|   position: absolute;
   543|   bottom: 12px;
   544|   right: 12px;
   545|   width: 30px;
   546|   background: rgba(245, 248, 250, 0.4);
   547| `;
   548| const WheelInstructionTooltip = () => {
   549|   const [usedMeta, setUsedMeta] = React.useState(false);
   550|   const [wheeling, setWheeling] = React.useState(false);
   551|   const timeout = React.useRef<NodeJS.Timeout>();
   552|   React.useEffect(() => {
   553|     const listener = (e: WheelEvent) => {
   554|       clearTimeout(timeout.current);
   555|       if (e.metaKey || e.shiftKey || e.ctrlKey) {
   556|         setUsedMeta(true);
   557|         setWheeling(false);
   558|         return;
   559|       }
   560|       setWheeling(true);
   561|       timeout.current = setTimeout(() => {
   562|         setWheeling(false);
   563|       }, 2000);
   564|     };
   565|     document.addEventListener('wheel', listener);
   566|     return () => {

# --- HUNK 5: Lines 569-592 ---
   569|     };
   570|   }, []);
   571|   const zoomKey = navigator.userAgent.includes('Mac') ? '' : 'Ctrl';
   572|   const visible = wheeling && !usedMeta;
   573|   return (
   574|     <WheelInstructionTooltipContainer style={{opacity: visible ? 1 : 0}}>
   575|       {`Hold ${zoomKey} to zoom`}
   576|     </WheelInstructionTooltipContainer>
   577|   );
   578| };
   579| const WheelInstructionTooltipContainer = styled.div`
   580|   position: absolute;
   581|   bottom: 42px;
   582|   right: 40px;
   583|   white-space: nowrap;
   584|   transition: opacity 300ms ease-in-out;
   585|   font-family: ${FontFamily.default};
   586|   font-size: 12px;
   587|   line-height: 16px;
   588|   border-radius: 2px;
   589|   background: ${Colors.Gray900};
   590|   color: ${Colors.Gray50};
   591|   padding: 8px 16px;
   592| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/graphql/types.ts
# Total hunks: 6
# ====================================================================
# --- HUNK 1: Lines 79-119 ---
    79|   key: AssetKey;
    80| };
    81| export type AssetAssetMaterializationsArgs = {
    82|   afterTimestampMillis?: InputMaybe<Scalars['String']>;
    83|   beforeTimestampMillis?: InputMaybe<Scalars['String']>;
    84|   limit?: InputMaybe<Scalars['Int']>;
    85|   partitionInLast?: InputMaybe<Scalars['Int']>;
    86|   partitions?: InputMaybe<Array<Scalars['String']>>;
    87|   tags?: InputMaybe<Array<InputTag>>;
    88| };
    89| export type AssetAssetObservationsArgs = {
    90|   afterTimestampMillis?: InputMaybe<Scalars['String']>;
    91|   beforeTimestampMillis?: InputMaybe<Scalars['String']>;
    92|   limit?: InputMaybe<Scalars['Int']>;
    93|   partitionInLast?: InputMaybe<Scalars['Int']>;
    94|   partitions?: InputMaybe<Array<Scalars['String']>>;
    95| };
    96| export type AssetBackfillData = {
    97|   __typename: 'AssetBackfillData';
    98|   assetBackfillStatuses: Array<AssetBackfillStatus>;
    99|   rootTargetedPartitions: AssetBackfillTargetPartitions;
   100| };
   101| export type AssetBackfillPreviewParams = {
   102|   assetSelection: Array<AssetKeyInput>;
   103|   partitionNames: Array<Scalars['String']>;
   104| };
   105| export type AssetBackfillStatus = AssetPartitionsStatusCounts | UnpartitionedAssetStatus;
   106| export type AssetBackfillTargetPartitions = {
   107|   __typename: 'AssetBackfillTargetPartitions';
   108|   partitionKeys: Maybe<Array<Scalars['String']>>;
   109|   ranges: Maybe<Array<PartitionKeyRange>>;
   110| };
   111| export type AssetCheck = {
   112|   __typename: 'AssetCheck';
   113|   assetKey: AssetKey;
   114|   canExecuteIndividually: AssetCheckCanExecuteIndividually;
   115|   description: Maybe<Scalars['String']>;
   116|   executionForLatestMaterialization: Maybe<AssetCheckExecution>;
   117|   jobNames: Array<Scalars['String']>;
   118|   name: Scalars['String'];
   119| };

# --- HUNK 2: Lines 1337-1385 ---
  1337|   name: Scalars['String'];
  1338|   repositoryLocationName: Scalars['String'];
  1339|   repositoryName: Scalars['String'];
  1340| };
  1341| export type InstigationState = {
  1342|   __typename: 'InstigationState';
  1343|   hasStartPermission: Scalars['Boolean'];
  1344|   hasStopPermission: Scalars['Boolean'];
  1345|   id: Scalars['ID'];
  1346|   instigationType: InstigationType;
  1347|   name: Scalars['String'];
  1348|   nextTick: Maybe<DryRunInstigationTick>;
  1349|   repositoryLocationName: Scalars['String'];
  1350|   repositoryName: Scalars['String'];
  1351|   repositoryOrigin: RepositoryOrigin;
  1352|   runningCount: Scalars['Int'];
  1353|   runs: Array<Run>;
  1354|   runsCount: Scalars['Int'];
  1355|   selectorId: Scalars['String'];
  1356|   status: InstigationStatus;
  1357|   tick: Maybe<InstigationTick>;
  1358|   ticks: Array<InstigationTick>;
  1359|   typeSpecificData: Maybe<InstigationTypeSpecificData>;
  1360| };
  1361| export type InstigationStateRunsArgs = {
  1362|   limit?: InputMaybe<Scalars['Int']>;
  1363| };
  1364| export type InstigationStateTickArgs = {
  1365|   timestamp?: InputMaybe<Scalars['Float']>;
  1366| };
  1367| export type InstigationStateTicksArgs = {
  1368|   afterTimestamp?: InputMaybe<Scalars['Float']>;
  1369|   beforeTimestamp?: InputMaybe<Scalars['Float']>;
  1370|   cursor?: InputMaybe<Scalars['String']>;
  1371|   dayOffset?: InputMaybe<Scalars['Int']>;
  1372|   dayRange?: InputMaybe<Scalars['Int']>;
  1373|   limit?: InputMaybe<Scalars['Int']>;
  1374|   statuses?: InputMaybe<Array<InstigationTickStatus>>;
  1375| };
  1376| export type InstigationStateNotFoundError = Error & {
  1377|   __typename: 'InstigationStateNotFoundError';
  1378|   message: Scalars['String'];
  1379|   name: Scalars['String'];
  1380| };
  1381| export type InstigationStateOrError =
  1382|   | InstigationState
  1383|   | InstigationStateNotFoundError
  1384|   | PythonError;
  1385| export type InstigationStates = {

# --- HUNK 3: Lines 1394-1433 ---
  1394| export type InstigationTick = {
  1395|   __typename: 'InstigationTick';
  1396|   autoMaterializeAssetEvaluationId: Maybe<Scalars['Int']>;
  1397|   cursor: Maybe<Scalars['String']>;
  1398|   dynamicPartitionsRequestResults: Array<DynamicPartitionsRequestResult>;
  1399|   endTimestamp: Maybe<Scalars['Float']>;
  1400|   error: Maybe<PythonError>;
  1401|   id: Scalars['ID'];
  1402|   instigationType: InstigationType;
  1403|   logEvents: InstigationEventConnection;
  1404|   logKey: Maybe<Array<Scalars['String']>>;
  1405|   originRunIds: Array<Scalars['String']>;
  1406|   requestedAssetKeys: Array<AssetKey>;
  1407|   requestedAssetMaterializationCount: Scalars['Int'];
  1408|   requestedMaterializationsForAssets: Array<RequestedMaterializationsForAsset>;
  1409|   runIds: Array<Scalars['String']>;
  1410|   runKeys: Array<Scalars['String']>;
  1411|   runs: Array<Run>;
  1412|   skipReason: Maybe<Scalars['String']>;
  1413|   status: InstigationTickStatus;
  1414|   timestamp: Scalars['Float'];
  1415| };
  1416| export enum InstigationTickStatus {
  1417|   FAILURE = 'FAILURE',
  1418|   SKIPPED = 'SKIPPED',
  1419|   STARTED = 'STARTED',
  1420|   SUCCESS = 'SUCCESS',
  1421| }
  1422| export enum InstigationType {
  1423|   AUTO_MATERIALIZE = 'AUTO_MATERIALIZE',
  1424|   SCHEDULE = 'SCHEDULE',
  1425|   SENSOR = 'SENSOR',
  1426| }
  1427| export type InstigationTypeSpecificData = ScheduleData | SensorData;
  1428| export type IntMetadataEntry = MetadataEntry & {
  1429|   __typename: 'IntMetadataEntry';
  1430|   description: Maybe<Scalars['String']>;
  1431|   intRepr: Scalars['String'];
  1432|   intValue: Maybe<Scalars['Int']>;
  1433|   label: Scalars['String'];

# --- HUNK 4: Lines 3719-3758 ---
  3719|   SAFE_TERMINATE = 'SAFE_TERMINATE',
  3720| }
  3721| export type TerminateRunResult =
  3722|   | PythonError
  3723|   | RunNotFoundError
  3724|   | TerminateRunFailure
  3725|   | TerminateRunSuccess
  3726|   | UnauthorizedError;
  3727| export type TerminateRunSuccess = TerminatePipelineExecutionSuccess & {
  3728|   __typename: 'TerminateRunSuccess';
  3729|   run: Run;
  3730| };
  3731| export type TerminateRunsResult = {
  3732|   __typename: 'TerminateRunsResult';
  3733|   terminateRunResults: Array<TerminateRunResult>;
  3734| };
  3735| export type TerminateRunsResultOrError = PythonError | TerminateRunsResult;
  3736| export type TestFields = {
  3737|   __typename: 'TestFields';
  3738|   alwaysException: Maybe<Scalars['String']>;
  3739| };
  3740| export type TextMetadataEntry = MetadataEntry & {
  3741|   __typename: 'TextMetadataEntry';
  3742|   description: Maybe<Scalars['String']>;
  3743|   label: Scalars['String'];
  3744|   text: Scalars['String'];
  3745| };
  3746| export type TextRuleEvaluationData = {
  3747|   __typename: 'TextRuleEvaluationData';
  3748|   text: Maybe<Scalars['String']>;
  3749| };
  3750| export type TickEvaluation = {
  3751|   __typename: 'TickEvaluation';
  3752|   cursor: Maybe<Scalars['String']>;
  3753|   dynamicPartitionsRequests: Maybe<Array<DynamicPartitionRequest>>;
  3754|   error: Maybe<PythonError>;
  3755|   runRequests: Maybe<Array<RunRequest>>;
  3756|   skipReason: Maybe<Scalars['String']>;
  3757| };
  3758| export type TimePartitionRangeStatus = {

# --- HUNK 5: Lines 6786-6825 ---
  6786|       overrides && overrides.hasOwnProperty('requestedAssetKeys')
  6787|         ? overrides.requestedAssetKeys!
  6788|         : [],
  6789|     requestedAssetMaterializationCount:
  6790|       overrides && overrides.hasOwnProperty('requestedAssetMaterializationCount')
  6791|         ? overrides.requestedAssetMaterializationCount!
  6792|         : 412,
  6793|     requestedMaterializationsForAssets:
  6794|       overrides && overrides.hasOwnProperty('requestedMaterializationsForAssets')
  6795|         ? overrides.requestedMaterializationsForAssets!
  6796|         : [],
  6797|     runIds: overrides && overrides.hasOwnProperty('runIds') ? overrides.runIds! : [],
  6798|     runKeys: overrides && overrides.hasOwnProperty('runKeys') ? overrides.runKeys! : [],
  6799|     runs: overrides && overrides.hasOwnProperty('runs') ? overrides.runs! : [],
  6800|     skipReason:
  6801|       overrides && overrides.hasOwnProperty('skipReason') ? overrides.skipReason! : 'maxime',
  6802|     status:
  6803|       overrides && overrides.hasOwnProperty('status')
  6804|         ? overrides.status!
  6805|         : InstigationTickStatus.FAILURE,
  6806|     timestamp: overrides && overrides.hasOwnProperty('timestamp') ? overrides.timestamp! : 6.06,
  6807|   };
  6808| };
  6809| export const buildIntMetadataEntry = (
  6810|   overrides?: Partial<IntMetadataEntry>,
  6811|   _relationshipsToOmit: Set<string> = new Set(),
  6812| ): {__typename: 'IntMetadataEntry'} & IntMetadataEntry => {
  6813|   const relationshipsToOmit: Set<string> = new Set(_relationshipsToOmit);
  6814|   relationshipsToOmit.add('IntMetadataEntry');
  6815|   return {
  6816|     __typename: 'IntMetadataEntry',
  6817|     description:
  6818|       overrides && overrides.hasOwnProperty('description') ? overrides.description! : 'et',
  6819|     intRepr: overrides && overrides.hasOwnProperty('intRepr') ? overrides.intRepr! : 'omnis',
  6820|     intValue: overrides && overrides.hasOwnProperty('intValue') ? overrides.intValue! : 9039,
  6821|     label: overrides && overrides.hasOwnProperty('label') ? overrides.label! : 'enim',
  6822|   };
  6823| };
  6824| export const buildInvalidOutputError = (
  6825|   overrides?: Partial<InvalidOutputError>,

# --- HUNK 6: Lines 11771-11810 ---
 11771|   return {
 11772|     __typename: 'TerminateRunsResult',
 11773|     terminateRunResults:
 11774|       overrides && overrides.hasOwnProperty('terminateRunResults')
 11775|         ? overrides.terminateRunResults!
 11776|         : [],
 11777|   };
 11778| };
 11779| export const buildTestFields = (
 11780|   overrides?: Partial<TestFields>,
 11781|   _relationshipsToOmit: Set<string> = new Set(),
 11782| ): {__typename: 'TestFields'} & TestFields => {
 11783|   const relationshipsToOmit: Set<string> = new Set(_relationshipsToOmit);
 11784|   relationshipsToOmit.add('TestFields');
 11785|   return {
 11786|     __typename: 'TestFields',
 11787|     alwaysException:
 11788|       overrides && overrides.hasOwnProperty('alwaysException')
 11789|         ? overrides.alwaysException!
 11790|         : 'quibusdam',
 11791|   };
 11792| };
 11793| export const buildTextMetadataEntry = (
 11794|   overrides?: Partial<TextMetadataEntry>,
 11795|   _relationshipsToOmit: Set<string> = new Set(),
 11796| ): {__typename: 'TextMetadataEntry'} & TextMetadataEntry => {
 11797|   const relationshipsToOmit: Set<string> = new Set(_relationshipsToOmit);
 11798|   relationshipsToOmit.add('TextMetadataEntry');
 11799|   return {
 11800|     __typename: 'TextMetadataEntry',
 11801|     description:
 11802|       overrides && overrides.hasOwnProperty('description') ? overrides.description! : 'illum',
 11803|     label: overrides && overrides.hasOwnProperty('label') ? overrides.label! : 'quae',
 11804|     text: overrides && overrides.hasOwnProperty('text') ? overrides.text! : 'dignissimos',
 11805|   };
 11806| };
 11807| export const buildTextRuleEvaluationData = (
 11808|   overrides?: Partial<TextRuleEvaluationData>,
 11809|   _relationshipsToOmit: Set<string> = new Set(),
 11810| ): {__typename: 'TextRuleEvaluationData'} & TextRuleEvaluationData => {


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instance/DaemonHealth.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-30 ---
     1| import {
     2|   Button,
     3|   ButtonLink,
     4|   Colors,
     5|   DialogBody,
     6|   DialogFooter,
     7|   Dialog,
     8|   Group,
     9|   Tag,
    10|   Trace,
    11| } from '@dagster-io/ui-components';
    12| import * as React from 'react';
    13| import {DaemonStatusForListFragment} from './types/DaemonList.types';
    14| interface Props {
    15|   daemon: DaemonStatusForListFragment;
    16| }
    17| const DaemonHealthTag = (props: Props) => {
    18|   const {daemon} = props;
    19|   if (daemon.healthy) {
    20|     return <Tag intent="success">Running</Tag>;
    21|   }
    22|   if (daemon.required) {
    23|     return <Tag intent="danger">Not running</Tag>;
    24|   }
    25|   return <Tag intent="none">Not enabled</Tag>;
    26| };
    27| type State = {
    28|   shown: boolean;
    29|   page: number;
    30| };

# --- HUNK 2: Lines 39-79 ---
    39|       return {...state, page: action.page};
    40|     default:
    41|       return state;
    42|   }
    43| };
    44| const initialState = {shown: false, page: 0};
    45| export const DaemonHealth = (props: Props) => {
    46|   const {daemon} = props;
    47|   const [state, dispatch] = React.useReducer(reducer, initialState);
    48|   const {shown, page} = state;
    49|   const errors = daemon.lastHeartbeatErrors;
    50|   const errorCount = errors.length;
    51|   const show = () => dispatch({type: 'show'});
    52|   const hide = () => dispatch({type: 'hide'});
    53|   const prev = () => dispatch({type: 'page', page: page === 0 ? errorCount - 1 : page - 1});
    54|   const next = () => dispatch({type: 'page', page: page === errorCount - 1 ? 0 : page + 1});
    55|   const metadata = () => {
    56|     if (errorCount > 0) {
    57|       return (
    58|         <>
    59|           <ButtonLink color={Colors.Link} underline="hover" onClick={show}>
    60|             {errorCount > 1 ? `View errors (${errorCount})` : 'View error'}
    61|           </ButtonLink>
    62|           <Dialog
    63|             isOpen={shown}
    64|             title="Daemon error"
    65|             onClose={hide}
    66|             style={{maxWidth: '80%', minWidth: '70%'}}
    67|           >
    68|             <DialogBody>
    69|               <Group direction="column" spacing={12}>
    70|                 {errorCount === 1 ? (
    71|                   <div>
    72|                     <strong>{daemon.daemonType}</strong> daemon logged an error.
    73|                   </div>
    74|                 ) : (
    75|                   <div>
    76|                     <strong>{daemon.daemonType}</strong> daemon logged {errorCount} errors.
    77|                   </div>
    78|                 )}
    79|                 <Trace>

# --- HUNK 3: Lines 89-119 ---
    89|                 errorCount > 1 ? (
    90|                   <Group direction="row" spacing={12} alignItems="center">
    91|                     <ButtonLink onClick={prev}>&larr; Previous</ButtonLink>
    92|                     <span>{`${page + 1} of ${errorCount}`}</span>
    93|                     <ButtonLink onClick={next}>Next &rarr;</ButtonLink>
    94|                   </Group>
    95|                 ) : (
    96|                   <div />
    97|                 )
    98|               }
    99|             >
   100|               <Button intent="primary" onClick={hide}>
   101|                 OK
   102|               </Button>
   103|             </DialogFooter>
   104|           </Dialog>
   105|         </>
   106|       );
   107|     }
   108|     if (!daemon.healthy) {
   109|       return <div style={{color: Colors.Gray500}}>No recent heartbeat</div>;
   110|     }
   111|     return null;
   112|   };
   113|   return (
   114|     <Group direction="row" spacing={8} alignItems="center">
   115|       <DaemonHealthTag daemon={daemon} />
   116|       {metadata()}
   117|     </Group>
   118|   );
   119| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instance/InstanceBackfills.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-30 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {
     3|   Box,
     4|   CursorPaginationControls,
     5|   NonIdealState,
     6|   PageHeader,
     7|   Heading,
     8|   Page,
     9|   Spinner,
    10|   Colors,
    11| } from '@dagster-io/ui-components';
    12| import * as React from 'react';
    13| import {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';
    14| import {PythonErrorInfo} from '../app/PythonErrorInfo';
    15| import {FIFTEEN_SECONDS, useQueryRefreshAtInterval} from '../app/QueryRefresh';
    16| import {useTrackPageView} from '../app/analytics';
    17| import {BulkActionStatus} from '../graphql/types';
    18| import {useDocumentTitle} from '../hooks/useDocumentTitle';
    19| import {OverviewTabs} from '../overview/OverviewTabs';
    20| import {DaemonNotRunningAlertBody} from '../partitions/BackfillMessaging';
    21| import {useCursorPaginatedQuery} from '../runs/useCursorPaginatedQuery';
    22| import {useFilters} from '../ui/Filters';
    23| import {useStaticSetFilter} from '../ui/Filters/useStaticSetFilter';
    24| import {INSTANCE_HEALTH_FRAGMENT} from './InstanceHealthFragment';
    25| import {BackfillTable, BACKFILL_TABLE_FRAGMENT} from './backfill/BackfillTable';
    26| import {
    27|   InstanceBackfillsQuery,
    28|   InstanceBackfillsQueryVariables,
    29|   InstanceHealthForBackfillsQuery,
    30|   InstanceHealthForBackfillsQueryVariables,

# --- HUNK 2: Lines 80-120 ---
    80|       status: statusState.size > 0 ? Array.from(statusState)[0]! : undefined,
    81|     },
    82|     pageSize: PAGE_SIZE,
    83|     nextCursorForResult: (result) =>
    84|       result.partitionBackfillsOrError.__typename === 'PartitionBackfills'
    85|         ? result.partitionBackfillsOrError.results[PAGE_SIZE - 1]?.id
    86|         : undefined,
    87|     getResultArray: (result) =>
    88|       result?.partitionBackfillsOrError.__typename === 'PartitionBackfills'
    89|         ? result.partitionBackfillsOrError.results
    90|         : [],
    91|   });
    92|   const refreshState = useQueryRefreshAtInterval(queryResult, FIFTEEN_SECONDS);
    93|   const {loading, data} = queryResult;
    94|   const content = () => {
    95|     if (loading && !data) {
    96|       return (
    97|         <Box padding={{vertical: 64}} flex={{direction: 'column', alignItems: 'center'}}>
    98|           <Box flex={{direction: 'row', alignItems: 'center', gap: 8}}>
    99|             <Spinner purpose="body-text" />
   100|             <div style={{color: Colors.Gray600}}>Loading backfills</div>
   101|           </Box>
   102|         </Box>
   103|       );
   104|     }
   105|     const partitionBackfillsOrError = data?.partitionBackfillsOrError;
   106|     if (partitionBackfillsOrError?.__typename === 'PythonError') {
   107|       return <PythonErrorInfo error={partitionBackfillsOrError} />;
   108|     }
   109|     if (!partitionBackfillsOrError || !partitionBackfillsOrError?.results.length) {
   110|       if (statusState.size > 0) {
   111|         return (
   112|           <Box padding={{vertical: 64}}>
   113|             <NonIdealState
   114|               icon="no-results"
   115|               title="No matching backfills"
   116|               description="No backfills were found for this filter."
   117|             />
   118|           </Box>
   119|         );
   120|       }


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instance/InstanceConcurrency.tsx
# Total hunks: 6
# ====================================================================
# --- HUNK 1: Lines 1-152 ---
     1| import {gql, useQuery, useMutation} from '@apollo/client';
     2| import {
     3|   Subheading,
     4|   MetadataTableWIP,
     5|   StyledRawCodeMirror,
     6|   PageHeader,
     7|   Heading,
     8|   Box,
     9|   Colors,
    10|   Dialog,
    11|   DialogBody,
    12|   DialogFooter,
    13|   Icon,
    14|   Menu,
    15|   MenuItem,
    16|   Mono,
    17|   Popover,
    18|   Spinner,
    19|   ButtonLink,
    20|   Table,
    21|   Tag,
    22|   TextInput,
    23|   Button,
    24|   NonIdealState,
    25|   Page,
    26|   Tooltip,
    27| } from '@dagster-io/ui-components';
    28| import * as React from 'react';
    29| import {Link, Redirect} from 'react-router-dom';
    30| import {showSharedToaster} from '../app/DomUtils';
    31| import {useFeatureFlags} from '../app/Flags';
    32| import {useQueryRefreshAtInterval, FIFTEEN_SECONDS} from '../app/QueryRefresh';
    33| import {useTrackPageView} from '../app/analytics';
    34| import {RunStatus} from '../graphql/types';
    35| import {useDocumentTitle} from '../hooks/useDocumentTitle';
    36| import {RunStatusDot} from '../runs/RunStatusDots';
    37| import {failedStatuses} from '../runs/RunStatuses';
    38| import {titleForRun} from '../runs/RunUtils';
    39| import {TimeElapsed} from '../runs/TimeElapsed';
    40| import {InstancePageContext} from './InstancePageContext';
    41| import {InstanceTabs} from './InstanceTabs';
    42| import {
    43|   ConcurrencyKeyDetailsQuery,
    44|   ConcurrencyKeyDetailsQueryVariables,
    45|   ConcurrencyLimitFragment,
    46|   ConcurrencyStepFragment,
    47|   FreeConcurrencySlotsMutation,
    48|   FreeConcurrencySlotsMutationVariables,
    49|   InstanceConcurrencyLimitsQuery,
    50|   InstanceConcurrencyLimitsQueryVariables,
    51|   RunsForConcurrencyKeyQuery,
    52|   RunsForConcurrencyKeyQueryVariables,
    53|   RunQueueConfigFragment,
    54|   SetConcurrencyLimitMutation,
    55|   SetConcurrencyLimitMutationVariables,
    56| } from './types/InstanceConcurrency.types';
    57| const InstanceConcurrencyPage = React.memo(() => {
    58|   useTrackPageView();
    59|   useDocumentTitle('Concurrency');
    60|   const {flagInstanceConcurrencyLimits} = useFeatureFlags();
    61|   const {pageTitle} = React.useContext(InstancePageContext);
    62|   const queryResult = useQuery<
    63|     InstanceConcurrencyLimitsQuery,
    64|     InstanceConcurrencyLimitsQueryVariables
    65|   >(INSTANCE_CONCURRENCY_LIMITS_QUERY, {
    66|     notifyOnNetworkStatusChange: true,
    67|   });
    68|   const refreshState = useQueryRefreshAtInterval(queryResult, FIFTEEN_SECONDS);
    69|   const {data} = queryResult;
    70|   const opConcurrencyContent = data ? (
    71|     flagInstanceConcurrencyLimits ? (
    72|       <ConcurrencyLimits
    73|         instanceConfig={data.instance.info}
    74|         limits={data.instance.concurrencyLimits}
    75|         hasSupport={data.instance.supportsConcurrencyLimits}
    76|         refetch={queryResult.refetch}
    77|       />
    78|     ) : (
    79|       <Redirect to="/config" />
    80|     )
    81|   ) : (
    82|     <Box padding={{vertical: 64}}>
    83|       <Spinner purpose="section" />
    84|     </Box>
    85|   );
    86|   return (
    87|     <Page>
    88|       <PageHeader
    89|         title={<Heading>{pageTitle}</Heading>}
    90|         tabs={<InstanceTabs tab="concurrency" refreshState={refreshState} />}
    91|       />
    92|       <Box margin={{bottom: 64}}>
    93|         <RunConcurrencyContent
    94|           hasRunQueue={!!data?.instance.runQueuingSupported}
    95|           runQueueConfig={data?.instance.runQueueConfig}
    96|         />
    97|       </Box>
    98|       <Box>
    99|         <Box padding={{vertical: 16, horizontal: 24}} border="top-and-bottom">
   100|           <Subheading>
   101|             <Box flex={{alignItems: 'center', direction: 'row', gap: 8}}>
   102|               <span>Global op/asset concurrency</span>
   103|               <Tag>Experimental</Tag>
   104|             </Box>
   105|           </Subheading>
   106|         </Box>
   107|         {opConcurrencyContent}
   108|       </Box>
   109|     </Page>
   110|   );
   111| });
   112| export default InstanceConcurrencyPage;
   113| type DialogAction =
   114|   | {
   115|       actionType: 'add';
   116|     }
   117|   | {
   118|       actionType: 'edit';
   119|       concurrencyKey: string;
   120|       concurrencyLimit: number;
   121|     }
   122|   | {
   123|       actionType: 'delete';
   124|       concurrencyKey: string;
   125|     }
   126|   | undefined;
   127| const RunConcurrencyContent = ({
   128|   hasRunQueue,
   129|   runQueueConfig,
   130| }: {
   131|   hasRunQueue: boolean;
   132|   runQueueConfig: RunQueueConfigFragment | null | undefined;
   133| }) => {
   134|   if (!hasRunQueue) {
   135|     return (
   136|       <>
   137|         <Box padding={{vertical: 16, horizontal: 24}} border="bottom">
   138|           <Subheading>Run concurrency</Subheading>
   139|         </Box>
   140|         <div>
   141|           Run concurrency is not supported with this run coordinator. To enable run concurrency
   142|           limits, configure your instance to use the <Mono>QueuedRunCoordinator</Mono> in your{' '}
   143|           <Mono>dagster.yaml</Mono>. See the{' '}
   144|           <a
   145|             target="_blank"
   146|             rel="noreferrer"
   147|             href="https://docs.dagster.io/deployment/dagster-instance#queuedruncoordinator"
   148|           >
   149|             QueuedRunCoordinator documentation
   150|           </a>{' '}
   151|           for more information.
   152|         </div>

# --- HUNK 2: Lines 176-373 ---
   176|           </td>
   177|         </tr>
   178|         <tr>
   179|           <td>Tag concurrency limits:</td>
   180|           <td>
   181|             {runQueueConfig.tagConcurrencyLimitsYaml ? (
   182|               <StyledRawCodeMirror
   183|                 value={runQueueConfig.tagConcurrencyLimitsYaml}
   184|                 options={{readOnly: true, lineNumbers: true, mode: 'yaml'}}
   185|               />
   186|             ) : (
   187|               '-'
   188|             )}
   189|           </td>
   190|         </tr>
   191|       </tbody>
   192|     </MetadataTableWIP>
   193|   ) : null;
   194|   return (
   195|     <>
   196|       <Box padding={{vertical: 16, horizontal: 24}} border="bottom">
   197|         <Subheading>Run concurrency</Subheading>
   198|       </Box>
   199|       {info_content}
   200|       {settings_content}
   201|     </>
   202|   );
   203| };
   204| export const ConcurrencyLimits = ({
   205|   instanceConfig,
   206|   hasSupport,
   207|   limits,
   208|   refetch,
   209| }: {
   210|   limits: ConcurrencyLimitFragment[];
   211|   refetch: () => void;
   212|   instanceConfig?: string | null;
   213|   hasSupport?: boolean;
   214| }) => {
   215|   const [action, setAction] = React.useState<DialogAction>();
   216|   const [selectedKey, setSelectedKey] = React.useState<string | undefined>(undefined);
   217|   const onConcurrencyStepsDialogClose = React.useCallback(() => {
   218|     setSelectedKey(undefined);
   219|   }, [setSelectedKey]);
   220|   const limitsByKey = Object.fromEntries(
   221|     limits.map(({concurrencyKey, slotCount}) => [concurrencyKey, slotCount]),
   222|   );
   223|   const onAdd = () => {
   224|     setAction({actionType: 'add'});
   225|   };
   226|   const onEdit = (concurrencyKey: string) => {
   227|     setAction({actionType: 'edit', concurrencyKey, concurrencyLimit: limitsByKey[concurrencyKey]!});
   228|   };
   229|   const onDelete = (concurrencyKey: string) => {
   230|     setAction({actionType: 'delete', concurrencyKey});
   231|   };
   232|   if (!hasSupport && instanceConfig && instanceConfig.includes('SqliteEventLogStorage')) {
   233|     return (
   234|       <Box margin={24}>
   235|         <NonIdealState
   236|           icon="error"
   237|           title="No concurrency support"
   238|           description={
   239|             'This instance does not support global concurrency limits. You will need to ' +
   240|             'configure a different storage implementation (e.g. Postgres/MySQL) to use this ' +
   241|             'feature.'
   242|           }
   243|         />
   244|       </Box>
   245|     );
   246|   } else if (hasSupport === false) {
   247|     return (
   248|       <Box margin={24}>
   249|         <NonIdealState
   250|           icon="error"
   251|           title="No concurrency support"
   252|           description={
   253|             'This instance does not currently support global concurrency limits. You may need to ' +
   254|             'run `dagster instance migrate` to add the necessary tables to your dagster storage ' +
   255|             'to support this feature.'
   256|           }
   257|         />
   258|       </Box>
   259|     );
   260|   }
   261|   return (
   262|     <>
   263|       <Box>
   264|         <Box flex={{justifyContent: 'flex-end'}} padding={16}>
   265|           <Button intent="primary" icon={<Icon name="add_circle" />} onClick={() => onAdd()}>
   266|             Add concurrency limit
   267|           </Button>
   268|         </Box>
   269|         {limits.length === 0 ? (
   270|           <NonIdealState
   271|             icon="error"
   272|             title="No concurrency limits"
   273|             description={
   274|               <>
   275|                 No concurrency limits have been configured for this instance.&nbsp;
   276|                 <ButtonLink onClick={() => onAdd()}>Add a concurrency limit</ButtonLink>.
   277|               </>
   278|             }
   279|           />
   280|         ) : (
   281|           <Table>
   282|             <thead>
   283|               <tr>
   284|                 <th style={{width: '260px'}}>Concurrency key</th>
   285|                 <th style={{width: '20%'}}>Total slots</th>
   286|                 <th style={{width: '20%'}}>Assigned steps</th>
   287|                 <th style={{width: '20%'}}>Pending steps</th>
   288|                 <th style={{width: '20%'}}>All steps</th>
   289|                 <th></th>
   290|               </tr>
   291|             </thead>
   292|             <tbody>
   293|               {limits.map((limit) => (
   294|                 <tr key={limit.concurrencyKey}>
   295|                   <td>{limit.concurrencyKey}</td>
   296|                   <td>{limit.slotCount}</td>
   297|                   <td>{limit.pendingSteps.filter((x) => !!x.assignedTimestamp).length}</td>
   298|                   <td>{limit.pendingSteps.filter((x) => !x.assignedTimestamp).length}</td>
   299|                   <td>
   300|                     <span style={{marginRight: 16}}>{limit.pendingSteps.length}</span>
   301|                     <Tag intent="primary" interactive>
   302|                       <ButtonLink
   303|                         onClick={() => {
   304|                           setSelectedKey(limit.concurrencyKey);
   305|                         }}
   306|                       >
   307|                         View all
   308|                       </ButtonLink>
   309|                     </Tag>
   310|                   </td>
   311|                   <td>
   312|                     <ConcurrencyLimitActionMenu
   313|                       concurrencyKey={limit.concurrencyKey}
   314|                       onEdit={onEdit}
   315|                       onDelete={onDelete}
   316|                     />
   317|                   </td>
   318|                 </tr>
   319|               ))}
   320|             </tbody>
   321|           </Table>
   322|         )}
   323|       </Box>
   324|       <AddConcurrencyLimitDialog
   325|         open={action?.actionType === 'add'}
   326|         onClose={() => setAction(undefined)}
   327|         onComplete={refetch}
   328|       />
   329|       <DeleteConcurrencyLimitDialog
   330|         concurrencyKey={action && action.actionType === 'delete' ? action.concurrencyKey : ''}
   331|         open={action?.actionType === 'delete'}
   332|         onClose={() => setAction(undefined)}
   333|         onComplete={refetch}
   334|       />
   335|       <EditConcurrencyLimitDialog
   336|         open={action?.actionType === 'edit'}
   337|         onClose={() => setAction(undefined)}
   338|         onComplete={refetch}
   339|         concurrencyKey={action?.actionType === 'edit' ? action.concurrencyKey : ''}
   340|       />
   341|       <ConcurrencyStepsDialog
   342|         title={
   343|           <span>
   344|             Concurrency steps for <strong>{selectedKey}</strong>
   345|           </span>
   346|         }
   347|         onClose={onConcurrencyStepsDialogClose}
   348|         concurrencyKey={selectedKey}
   349|         onUpdate={refetch}
   350|       />
   351|     </>
   352|   );
   353| };
   354| const ConcurrencyLimitActionMenu = ({
   355|   concurrencyKey,
   356|   onDelete,
   357|   onEdit,
   358| }: {
   359|   concurrencyKey: string;
   360|   onEdit: (key: string) => void;
   361|   onDelete: (key: string) => void;
   362| }) => {
   363|   return (
   364|     <Popover
   365|       content={
   366|         <Menu>
   367|           <MenuItem icon="edit" text="Edit" onClick={() => onEdit(concurrencyKey)} />
   368|           <MenuItem
   369|             icon="delete"
   370|             intent="danger"
   371|             text="Delete"
   372|             onClick={() => onDelete(concurrencyKey)}
   373|           />

# --- HUNK 3: Lines 719-790 ---
   719|       return a.priority - b.priority;
   720|     }
   721|     return a.enqueuedTimestamp - b.enqueuedTimestamp;
   722|   });
   723|   const assignedSteps = steps.filter((step) => !!step.assignedTimestamp);
   724|   const pendingSteps = steps.filter((step) => !step.assignedTimestamp);
   725|   const tableHeader = (
   726|     <thead>
   727|       <tr>
   728|         <th>Run ID</th>
   729|         <th>Step key</th>
   730|         <th>Assigned</th>
   731|         <th>Queued</th>
   732|         <th>
   733|           <Box flex={{alignItems: 'center', direction: 'row', gap: 4}}>
   734|             Priority
   735|             <Tooltip
   736|               placement="top"
   737|               content="Priority can be set on each op/asset using the 'dagster/priority' tag. Higher priority steps will be assigned slots first."
   738|             >
   739|               <Icon name="info" color={Colors.Gray500} />
   740|             </Tooltip>
   741|           </Box>
   742|         </th>
   743|         <th></th>
   744|       </tr>
   745|     </thead>
   746|   );
   747|   if (!steps.length) {
   748|     return (
   749|       <Table>
   750|         {tableHeader}
   751|         <tbody>
   752|           <tr>
   753|             <td colSpan={6}>
   754|               <Box
   755|                 flex={{alignItems: 'center', justifyContent: 'center'}}
   756|                 style={{color: Colors.Gray500}}
   757|                 padding={16}
   758|               >
   759|                 There are no active or pending steps for this concurrency key.
   760|               </Box>
   761|             </td>
   762|           </tr>
   763|         </tbody>
   764|       </Table>
   765|     );
   766|   }
   767|   return (
   768|     <Table>
   769|       {tableHeader}
   770|       <tbody style={{backgroundColor: Colors.Yellow50}}>
   771|         {assignedSteps.map((step) => (
   772|           <PendingStepRow
   773|             key={step.runId + step.stepKey}
   774|             step={step}
   775|             statusByRunId={statusByRunId}
   776|             onUpdate={refresh}
   777|           />
   778|         ))}
   779|       </tbody>
   780|       <tbody>
   781|         {pendingSteps.map((step) => (
   782|           <PendingStepRow
   783|             key={step.runId + step.stepKey}
   784|             step={step}
   785|             statusByRunId={statusByRunId}
   786|             onUpdate={refresh}
   787|           />
   788|         ))}
   789|       </tbody>
   790|     </Table>

# --- HUNK 4: Lines 796-836 ---
   796|   onUpdate,
   797| }: {
   798|   step: ConcurrencyStepFragment;
   799|   statusByRunId: {[id: string]: RunStatus};
   800|   onUpdate: () => void;
   801| }) => {
   802|   const runStatus = statusByRunId[step.runId];
   803|   return (
   804|     <tr>
   805|       <td>
   806|         {runStatus ? (
   807|           <Link to={`/runs/${step.runId}`}>
   808|             <Box flex={{direction: 'row', alignItems: 'center', gap: 8}}>
   809|               <RunStatusDot status={runStatus} size={10} />
   810|               <Mono>{titleForRun({id: step.runId})}</Mono>
   811|               {failedStatuses.has(runStatus) ? (
   812|                 <Tooltip
   813|                   placement="top"
   814|                   content="Slots for canceled / failed runs can automatically be freed by configuring a run monitoring setting."
   815|                 >
   816|                   <Icon name="info" color={Colors.Gray500} />
   817|                 </Tooltip>
   818|               ) : null}
   819|             </Box>
   820|           </Link>
   821|         ) : (
   822|           <Mono>{titleForRun({id: step.runId})}</Mono>
   823|         )}
   824|       </td>
   825|       <td>
   826|         <Mono>{step.stepKey}</Mono>
   827|       </td>
   828|       <td>
   829|         {step.assignedTimestamp ? (
   830|           <TimeElapsed startUnix={step.assignedTimestamp} endUnix={null} />
   831|         ) : (
   832|           '-'
   833|         )}
   834|       </td>
   835|       <td>
   836|         {step.enqueuedTimestamp ? (


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instance/InstanceConfig.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-49 ---
     1| import 'codemirror/addon/search/searchcursor';
     2| import {gql, useQuery} from '@apollo/client';
     3| import {
     4|   Box,
     5|   Colors,
     6|   PageHeader,
     7|   Spinner,
     8|   Code,
     9|   Heading,
    10|   StyledRawCodeMirror,
    11|   Subheading,
    12| } from '@dagster-io/ui-components';
    13| import CodeMirror from 'codemirror';
    14| import * as React from 'react';
    15| import {createGlobalStyle} from 'styled-components';
    16| import {useQueryRefreshAtInterval, FIFTEEN_SECONDS} from '../app/QueryRefresh';
    17| import {useTrackPageView} from '../app/analytics';
    18| import {useDocumentTitle} from '../hooks/useDocumentTitle';
    19| import {InstancePageContext} from './InstancePageContext';
    20| import {InstanceTabs} from './InstanceTabs';
    21| import {InstanceConfigQuery, InstanceConfigQueryVariables} from './types/InstanceConfig.types';
    22| const InstanceConfigStyle = createGlobalStyle`
    23|   .CodeMirror.cm-s-instance-config {
    24|     box-shadow: 0 1px 0 ${Colors.KeylineGray};
    25|     height: 100%;
    26|   }
    27|   .CodeMirror.cm-s-instance-config {
    28|     .config-highlight {
    29|       background-color: ${Colors.Yellow200};
    30|     }
    31| `;
    32| export const InstanceConfig = React.memo(() => {
    33|   useTrackPageView();
    34|   useDocumentTitle('Configuration');
    35|   const {pageTitle} = React.useContext(InstancePageContext);
    36|   const queryResult = useQuery<InstanceConfigQuery, InstanceConfigQueryVariables>(
    37|     INSTANCE_CONFIG_QUERY,
    38|     {
    39|       notifyOnNetworkStatusChange: true,
    40|     },
    41|   );
    42|   const refreshState = useQueryRefreshAtInterval(queryResult, FIFTEEN_SECONDS);
    43|   const {data} = queryResult;
    44|   const config = data?.instance.info;
    45|   const handlers = React.useMemo(() => {
    46|     return {
    47|       onReady: (editor: CodeMirror.Editor) => {
    48|         const documentHash = document.location.hash;
    49|         if (documentHash) {


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instance/InstanceHealthPage.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-47 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {Box, Colors, PageHeader, Heading, Subheading} from '@dagster-io/ui-components';
     3| import * as React from 'react';
     4| import {FIFTEEN_SECONDS, useQueryRefreshAtInterval} from '../app/QueryRefresh';
     5| import {useTrackPageView} from '../app/analytics';
     6| import {useDocumentTitle} from '../hooks/useDocumentTitle';
     7| import {DaemonList} from './DaemonList';
     8| import {INSTANCE_HEALTH_FRAGMENT} from './InstanceHealthFragment';
     9| import {InstancePageContext} from './InstancePageContext';
    10| import {InstanceTabs} from './InstanceTabs';
    11| import {InstanceHealthQuery, InstanceHealthQueryVariables} from './types/InstanceHealthPage.types';
    12| export const InstanceHealthPage = () => {
    13|   useTrackPageView();
    14|   useDocumentTitle('Daemons');
    15|   const {pageTitle} = React.useContext(InstancePageContext);
    16|   const queryData = useQuery<InstanceHealthQuery, InstanceHealthQueryVariables>(
    17|     INSTANCE_HEALTH_QUERY,
    18|     {
    19|       notifyOnNetworkStatusChange: true,
    20|     },
    21|   );
    22|   const refreshState = useQueryRefreshAtInterval(queryData, FIFTEEN_SECONDS);
    23|   const {loading, data} = queryData;
    24|   const daemonContent = () => {
    25|     if (loading && !data?.instance) {
    26|       return (
    27|         <Box padding={{horizontal: 24}} style={{color: Colors.Gray400}}>
    28|           Loading
    29|         </Box>
    30|       );
    31|     }
    32|     return data?.instance ? (
    33|       <DaemonList daemonStatuses={data.instance.daemonHealth.allDaemonStatuses} />
    34|     ) : null;
    35|   };
    36|   return (
    37|     <>
    38|       <PageHeader
    39|         title={<Heading>{pageTitle}</Heading>}
    40|         tabs={<InstanceTabs tab="health" refreshState={refreshState} />}
    41|       />
    42|       <Box padding={{vertical: 16, horizontal: 24}}>
    43|         <Subheading>Daemon statuses</Subheading>
    44|       </Box>
    45|       {daemonContent()}
    46|     </>
    47|   );


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instance/InstanceTabs.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-43 ---
     1| import {QueryResult} from '@apollo/client';
     2| import {Box, Tabs} from '@dagster-io/ui-components';
     3| import * as React from 'react';
     4| import {useFeatureFlags} from '../app/Flags';
     5| import {QueryRefreshCountdown, QueryRefreshState} from '../app/QueryRefresh';
     6| import {InstanceWarningIcon} from '../nav/InstanceWarningIcon';
     7| import {WorkspaceStatus} from '../nav/WorkspaceStatus';
     8| import {TabLink} from '../ui/TabLink';
     9| import {InstancePageContext} from './InstancePageContext';
    10| import {useCanSeeConfig} from './useCanSeeConfig';
    11| interface Props<TData> {
    12|   refreshState?: QueryRefreshState;
    13|   queryData?: QueryResult<TData, any>;
    14|   tab: string;
    15| }
    16| export const InstanceTabs = <TData extends Record<string, any>>(props: Props<TData>) => {
    17|   const {refreshState, tab} = props;
    18|   const {healthTitle} = React.useContext(InstancePageContext);
    19|   const canSeeConfig = useCanSeeConfig();
    20|   const {flagInstanceConcurrencyLimits} = useFeatureFlags();
    21|   return (
    22|     <Box flex={{direction: 'row', justifyContent: 'space-between', alignItems: 'flex-end'}}>
    23|       <Tabs selectedTabId={tab}>
    24|         <TabLink
    25|           id="locations"
    26|           title="Code locations"
    27|           to="/locations"
    28|           icon={<WorkspaceStatus placeholder={false} />}
    29|         />
    30|         <TabLink id="health" title={healthTitle} to="/health" icon={<InstanceWarningIcon />} />
    31|         {canSeeConfig && flagInstanceConcurrencyLimits ? (
    32|           <TabLink id="concurrency" title="Concurrency limits" to="/concurrency" />
    33|         ) : null}
    34|         {canSeeConfig ? <TabLink id="config" title="Configuration" to="/config" /> : null}
    35|       </Tabs>
    36|       {refreshState ? (
    37|         <Box padding={{bottom: 8}}>
    38|           <QueryRefreshCountdown refreshState={refreshState} />
    39|         </Box>
    40|       ) : null}
    41|     </Box>
    42|   );
    43| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instance/RepoFilterButton.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 13-42 ---
    13|         isOpen={open}
    14|         style={{width: 'auto'}}
    15|         onClose={() => setOpen(false)}
    16|       >
    17|         <DialogHeader icon="repo" label="Filter code locations" />
    18|         <RepoSelector
    19|           options={allRepos}
    20|           onBrowse={() => setOpen(false)}
    21|           onToggle={toggleVisible}
    22|           selected={visibleRepos}
    23|         />
    24|         <DialogFooter>
    25|           <Box padding={{top: 8}}>
    26|             <Button intent="none" onClick={() => setOpen(false)}>
    27|               Done
    28|             </Button>
    29|           </Box>
    30|         </DialogFooter>
    31|       </Dialog>
    32|       <Button
    33|         intent="none"
    34|         icon={<Icon name="folder" />}
    35|         rightIcon={<Icon name="expand_more" />}
    36|         onClick={() => setOpen(true)}
    37|       >
    38|         {`${visibleRepos.length} of ${allRepos.length}`}
    39|       </Button>
    40|     </>
    41|   );
    42| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instance/StepSummaryForRun.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-22 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {Colors, Caption} from '@dagster-io/ui-components';
     3| import qs from 'qs';
     4| import * as React from 'react';
     5| import {Link} from 'react-router-dom';
     6| import {StepEventStatus} from '../graphql/types';
     7| import {failedStatuses, inProgressStatuses} from '../runs/RunStatuses';
     8| import {
     9|   StepSummaryForRunQuery,
    10|   StepSummaryForRunQueryVariables,
    11| } from './types/StepSummaryForRun.types';
    12| interface Props {
    13|   runId: string;
    14| }
    15| export const StepSummaryForRun = (props: Props) => {
    16|   const {runId} = props;
    17|   const {data} = useQuery<StepSummaryForRunQuery, StepSummaryForRunQueryVariables>(
    18|     STEP_SUMMARY_FOR_RUN_QUERY,
    19|     {
    20|       variables: {runId},
    21|     },
    22|   );

# --- HUNK 2: Lines 29-93 ---
    29|     const {status} = run;
    30|     if (failedStatuses.has(status)) {
    31|       return run.stepStats.filter((step) => step.status === StepEventStatus.FAILURE);
    32|     }
    33|     if (inProgressStatuses.has(status)) {
    34|       return run.stepStats.filter((step) => step.status === StepEventStatus.IN_PROGRESS);
    35|     }
    36|     return [];
    37|   }, [run]);
    38|   const stepCount = relevantSteps.length;
    39|   if (!stepCount || !status) {
    40|     return null;
    41|   }
    42|   if (failedStatuses.has(status)) {
    43|     if (stepCount === 1) {
    44|       const step = relevantSteps[0]!;
    45|       const query = step.endTime
    46|         ? qs.stringify({focusedTime: Math.floor(step.endTime * 1000)}, {addQueryPrefix: true})
    47|         : '';
    48|       return (
    49|         <Caption color={Colors.Gray500}>
    50|           Failed at <Link to={`/runs/${runId}${query}`}>{step.stepKey}</Link>
    51|         </Caption>
    52|       );
    53|     }
    54|     return (
    55|       <Caption color={Colors.Gray500}>
    56|         Failed at <Link to={`/runs/${runId}`}>{stepCount} steps</Link>
    57|       </Caption>
    58|     );
    59|   }
    60|   if (inProgressStatuses.has(status)) {
    61|     if (stepCount === 1) {
    62|       const step = relevantSteps[0]!;
    63|       const query = step.endTime
    64|         ? qs.stringify({focusedTime: Math.floor(step.endTime * 1000)}, {addQueryPrefix: true})
    65|         : '';
    66|       return (
    67|         <Caption color={Colors.Gray500}>
    68|           In progress at <Link to={`/runs/${runId}${query}`}>{step.stepKey}</Link>
    69|         </Caption>
    70|       );
    71|     }
    72|     return (
    73|       <Caption color={Colors.Gray500}>
    74|         In progress at <Link to={`/runs/${runId}`}>{stepCount} steps</Link>
    75|       </Caption>
    76|     );
    77|   }
    78|   return null;
    79| };
    80| const STEP_SUMMARY_FOR_RUN_QUERY = gql`
    81|   query StepSummaryForRunQuery($runId: ID!) {
    82|     pipelineRunOrError(runId: $runId) {
    83|       ... on Run {
    84|         id
    85|         status
    86|         stepStats {
    87|           endTime
    88|           stepKey
    89|           status
    90|         }
    91|       }
    92|     }
    93|   }


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instance/backfill/BackfillPage.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-32 ---
     1| import {gql, useApolloClient, useQuery} from '@apollo/client';
     2| import {
     3|   Box,
     4|   ButtonLink,
     5|   Colors,
     6|   Heading,
     7|   NonIdealState,
     8|   Page,
     9|   PageHeader,
    10|   Spinner,
    11|   Table,
    12|   Tag,
    13| } from '@dagster-io/ui-components';
    14| import dayjs from 'dayjs';
    15| import duration from 'dayjs/plugin/duration';
    16| import relativeTime from 'dayjs/plugin/relativeTime';
    17| import React from 'react';
    18| import {Link, useHistory, useParams} from 'react-router-dom';
    19| import styled from 'styled-components';
    20| import {PYTHON_ERROR_FRAGMENT} from '../../app/PythonErrorFragment';
    21| import {PythonErrorInfo} from '../../app/PythonErrorInfo';
    22| import {QueryRefreshCountdown, useQueryRefreshAtInterval} from '../../app/QueryRefresh';
    23| import {useTrackPageView} from '../../app/analytics';
    24| import {Timestamp} from '../../app/time/Timestamp';
    25| import {tokenForAssetKey} from '../../asset-graph/Utils';
    26| import {asAssetKeyInput} from '../../assets/asInput';
    27| import {assetDetailsPathForKey} from '../../assets/assetDetailsPathForKey';
    28| import {AssetViewParams} from '../../assets/types';
    29| import {AssetKey, BulkActionStatus, RunStatus} from '../../graphql/types';
    30| import {useDocumentTitle} from '../../hooks/useDocumentTitle';
    31| import {RunFilterToken, runsPathWithFilters} from '../../runs/RunsFilterInput';
    32| import {testId} from '../../testing/testId';

# --- HUNK 2: Lines 270-310 ---
   270|                           '-'
   271|                         )}
   272|                       </td>
   273|                       <td>{completed ? <Tag intent="success">Completed</Tag> : '-'}</td>
   274|                       <td>{failed ? <Tag intent="danger">Failed</Tag> : '-'}</td>
   275|                     </>
   276|                   )}
   277|                 </tr>
   278|               );
   279|             })}
   280|           </tbody>
   281|         </Table>
   282|       </>
   283|     );
   284|   }
   285|   return (
   286|     <Page>
   287|       <PageHeader
   288|         title={
   289|           <Heading>
   290|             <Link to="/overview/backfills" style={{color: Colors.Gray700}}>
   291|               Backfills
   292|             </Link>
   293|             {' / '}
   294|             {backfillId}
   295|           </Heading>
   296|         }
   297|         right={
   298|           <Box flex={{gap: 12, alignItems: 'center'}}>
   299|             {isInProgress ? <QueryRefreshCountdown refreshState={refreshState} /> : null}
   300|             {backfill ? (
   301|               <BackfillActionsMenu
   302|                 backfill={backfill}
   303|                 refetch={queryResult.refetch}
   304|                 canCancelRuns={backfill.status === BulkActionStatus.REQUESTED}
   305|               />
   306|             ) : null}
   307|           </Box>
   308|         }
   309|       />
   310|       {content()}

# --- HUNK 3: Lines 315-373 ---
   315|   <Box flex={{direction: 'column', gap: 4}} style={{minWidth: '280px'}}>
   316|     <Label>{label}</Label>
   317|     <div>{detail}</div>
   318|   </Box>
   319| );
   320| function StatusBar({
   321|   targeted,
   322|   inProgress,
   323|   completed,
   324|   failed,
   325| }: {
   326|   targeted: number;
   327|   inProgress: number;
   328|   completed: number;
   329|   failed: number;
   330| }) {
   331|   return (
   332|     <div
   333|       style={{
   334|         borderRadius: '8px',
   335|         backgroundColor: Colors.Gray100,
   336|         display: 'grid',
   337|         gridTemplateColumns: `${(100 * completed) / targeted}% ${(100 * failed) / targeted}% ${
   338|           (100 * inProgress) / targeted
   339|         }%`,
   340|         gridTemplateRows: '100%',
   341|         height: '12px',
   342|         width: '200px',
   343|         overflow: 'hidden',
   344|       }}
   345|     >
   346|       <div style={{background: Colors.Green500}} />
   347|       <div style={{background: Colors.Red500}} />
   348|       <div style={{background: Colors.Blue200}} />
   349|     </div>
   350|   );
   351| }
   352| const Label = styled.div`
   353|   color: ${Colors.Gray700};
   354|   font-size: 12px;
   355|   line-height: 16px;
   356| `;
   357| const Duration = ({start, end}: {start: number; end?: number | null}) => {
   358|   const [_, rerender] = React.useReducer((s: number, _: any) => s + 1, 0);
   359|   React.useEffect(() => {
   360|     if (end) {
   361|       return;
   362|     }
   363|     const intervalId = setInterval(rerender, 60000);
   364|     return () => clearInterval(intervalId);
   365|   }, [start, end]);
   366|   const duration = end ? end - start : Date.now() - start;
   367|   return <span>{formatDuration(duration)}</span>;
   368| };
   369| export const BACKFILL_DETAILS_QUERY = gql`
   370|   query BackfillStatusesByAsset($backfillId: String!) {
   371|     partitionBackfillOrError(backfillId: $backfillId) {
   372|       ...PartitionBackfillFragment
   373|       ...PythonErrorFragment


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instance/backfill/BackfillRow.tsx
# Total hunks: 4
# ====================================================================
# --- HUNK 1: Lines 1-22 ---
     1| import {gql, QueryResult, useLazyQuery} from '@apollo/client';
     2| import {Box, Colors, Icon, Mono, Tag} from '@dagster-io/ui-components';
     3| import countBy from 'lodash/countBy';
     4| import * as React from 'react';
     5| import {Link, useHistory} from 'react-router-dom';
     6| import styled from 'styled-components';
     7| import {showCustomAlert} from '../../app/CustomAlertProvider';
     8| import {PythonErrorInfo} from '../../app/PythonErrorInfo';
     9| import {FIFTEEN_SECONDS, useQueryRefreshAtInterval} from '../../app/QueryRefresh';
    10| import {isHiddenAssetGroupJob} from '../../asset-graph/Utils';
    11| import {BulkActionStatus, RunStatus} from '../../graphql/types';
    12| import {PartitionStatus, PartitionStatusHealthSourceOps} from '../../partitions/PartitionStatus';
    13| import {PipelineReference} from '../../pipelines/PipelineReference';
    14| import {AssetKeyTagCollection} from '../../runs/AssetTagCollections';
    15| import {CreatedByTagCell} from '../../runs/CreatedByTag';
    16| import {inProgressStatuses} from '../../runs/RunStatuses';
    17| import {RunStatusTagsWithCounts} from '../../runs/RunTimeline';
    18| import {runsPathWithFilters} from '../../runs/RunsFilterInput';
    19| import {TimestampDisplay} from '../../schedules/TimestampDisplay';
    20| import {useDelayedRowQuery} from '../../workspace/VirtualizedWorkspaceTable';
    21| import {isThisThingAJob, useRepository} from '../../workspace/WorkspaceContext';
    22| import {buildRepoAddress} from '../../workspace/buildRepoAddress';

# --- HUNK 2: Lines 101-155 ---
   101|   return props.children({counts, statuses, statusQueryResult});
   102| };
   103| export const BackfillRowContent = ({
   104|   backfill,
   105|   allPartitions,
   106|   showBackfillTarget,
   107|   onShowPartitionsRequested,
   108|   refetch,
   109|   counts,
   110|   statuses,
   111|   statusQueryResult,
   112| }: BackfillRowProps & LoadResult) => {
   113|   const repoAddress = backfill.partitionSet
   114|     ? buildRepoAddress(
   115|         backfill.partitionSet.repositoryOrigin.repositoryName,
   116|         backfill.partitionSet.repositoryOrigin.repositoryLocationName,
   117|       )
   118|     : null;
   119|   const renderBackfillStatus = () =>
   120|     statusQueryResult?.loading ? (
   121|       <div style={{color: Colors.Gray500}}>Loading</div>
   122|     ) : (
   123|       <BackfillStatusTag backfill={backfill} counts={counts} />
   124|     );
   125|   const renderRunStatus = () => {
   126|     if (!backfill.isValidSerialization) {
   127|       return <p>A partitions definition has changed since this backfill ran.</p>;
   128|     }
   129|     if (statusQueryResult?.loading) {
   130|       return <div style={{color: Colors.Gray500}}>Loading</div>;
   131|     }
   132|     return counts ? (
   133|       <BackfillRunStatus backfill={backfill} counts={counts} statuses={statuses} />
   134|     ) : (
   135|       <div style={{color: Colors.Gray500}}>{'\u2013'}</div>
   136|     );
   137|   };
   138|   return (
   139|     <tr>
   140|       <td style={{width: 120}}>
   141|         <Mono style={{fontSize: '16px', lineHeight: '18px'}}>
   142|           <Link
   143|             to={
   144|               backfill.isAssetBackfill
   145|                 ? `/overview/backfills/${backfill.id}`
   146|                 : runsPathWithFilters([
   147|                     {
   148|                       token: 'tag',
   149|                       value: `dagster/backfill=${backfill.id}`,
   150|                     },
   151|                   ])
   152|             }
   153|           >
   154|             {backfill.id}
   155|           </Link>

# --- HUNK 3: Lines 251-291 ---
   251|           to={workspacePipelinePath({
   252|             repoName: partitionSet.repositoryOrigin.repositoryName,
   253|             repoLocation: partitionSet.repositoryOrigin.repositoryLocationName,
   254|             pipelineName: partitionSet.pipelineName,
   255|             isJob: isThisThingAJob(repo, partitionSet.pipelineName),
   256|             path: `/partitions?partitionSet=${encodeURIComponent(partitionSet.name)}`,
   257|           })}
   258|         >
   259|           {partitionSet.name}
   260|         </Link>
   261|       );
   262|     }
   263|     if (partitionSetName) {
   264|       return <span style={{fontWeight: 500}}>{partitionSetName}</span>;
   265|     }
   266|     return null;
   267|   };
   268|   const buildRepoLink = () =>
   269|     repoAddress ? (
   270|       <Box flex={{direction: 'row', gap: 8, alignItems: 'center'}} style={{fontSize: '12px'}}>
   271|         <Icon name="repo" color={Colors.Gray400} />
   272|         <Link to={workspacePathFromAddress(repoAddress)}>
   273|           {repoAddressAsHumanString(repoAddress)}
   274|         </Link>
   275|       </Box>
   276|     ) : undefined;
   277|   const buildPipelineOrAssets = () => {
   278|     if (assetSelection?.length) {
   279|       return <AssetKeyTagCollection assetKeys={assetSelection} dialogTitle="Assets in backfill" />;
   280|     }
   281|     if (partitionSet && repo) {
   282|       return (
   283|         <PipelineReference
   284|           showIcon
   285|           size="small"
   286|           pipelineName={partitionSet.pipelineName}
   287|           pipelineHrefContext={{
   288|             name: partitionSet.repositoryOrigin.repositoryName,
   289|             location: partitionSet.repositoryOrigin.repositoryLocationName,
   290|           }}
   291|           isJob={isThisThingAJob(repo, partitionSet.pipelineName)}

# --- HUNK 4: Lines 363-403 ---
   363|     case BulkActionStatus.REQUESTED:
   364|       return <Tag>In progress</Tag>;
   365|     case BulkActionStatus.FAILED:
   366|       return (
   367|         <Box margin={{bottom: 12}}>
   368|           <TagButton
   369|             onClick={() =>
   370|               backfill.error &&
   371|               showCustomAlert({title: 'Error', body: <PythonErrorInfo error={backfill.error} />})
   372|             }
   373|           >
   374|             <Tag intent="danger">Failed</Tag>
   375|           </TagButton>
   376|         </Box>
   377|       );
   378|     case BulkActionStatus.COMPLETED:
   379|       if (backfill.partitionNames === null) {
   380|         return <Tag intent="success">Completed</Tag>;
   381|       }
   382|       if (!counts) {
   383|         return <div style={{color: Colors.Gray500}}>None</div>;
   384|       }
   385|       if (counts[RunStatus.SUCCESS] === backfill.partitionNames.length) {
   386|         return <Tag intent="success">Completed</Tag>;
   387|       }
   388|       if (Array.from(inProgressStatuses).some((status) => counts[status])) {
   389|         return <Tag intent="primary">In progress</Tag>;
   390|       }
   391|       return <Tag intent="warning">Incomplete</Tag>;
   392|     case BulkActionStatus.CANCELING:
   393|       return <Tag>Canceling</Tag>;
   394|     case BulkActionStatus.CANCELED:
   395|       return <Tag>Canceled</Tag>;
   396|   }
   397|   return <span />;
   398| };
   399| const TagButton = styled.button`
   400|   border: none;
   401|   background: none;
   402|   cursor: pointer;
   403|   padding: 0;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instance/backfill/TargetPartitionsDisplay.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-33 ---
     1| import {Box, Button, ButtonLink, Dialog, DialogFooter, Tag} from '@dagster-io/ui-components';
     2| import React from 'react';
     3| import {AssetBackfillTargetPartitions} from '../../graphql/types';
     4| import {TruncatedTextWithFullTextOnHover} from '../../nav/getLeftNavItemsForOption';
     5| import {VirtualizedItemListForDialog} from '../../ui/VirtualizedItemListForDialog';
     6| import {numberFormatter} from '../../ui/formatters';
     7| const COLLATOR = new Intl.Collator(navigator.language, {sensitivity: 'base', numeric: true});
     8| export const TargetPartitionsDisplay = ({
     9|   targetPartitionCount,
    10|   targetPartitions,
    11| }: {
    12|   targetPartitionCount?: number;
    13|   targetPartitions?: Pick<AssetBackfillTargetPartitions, 'partitionKeys' | 'ranges'>;
    14| }) => {
    15|   const [isDialogOpen, setIsDialogOpen] = React.useState(false);
    16|   const {partitionKeys, ranges} = targetPartitions || {};
    17|   if (partitionKeys) {
    18|     if (partitionKeys.length <= 3) {
    19|       return (
    20|         <Box flex={{direction: 'row', gap: 8, wrap: 'wrap'}}>
    21|           {partitionKeys.map((p) => (
    22|             <Tag key={p}>{p}</Tag>
    23|           ))}
    24|         </Box>
    25|       );
    26|     }
    27|     return (
    28|       <>
    29|         <ButtonLink onClick={() => setIsDialogOpen(true)}>
    30|           {numberFormatter.format(partitionKeys.length)} partitions
    31|         </ButtonLink>
    32|         <Dialog
    33|           isOpen={isDialogOpen}

# --- HUNK 2: Lines 69-91 ---
    69|           isOpen={isDialogOpen}
    70|           title={`Partition selection (${ranges?.length})`}
    71|           onClose={() => setIsDialogOpen(false)}
    72|         >
    73|           <div style={{height: '340px', overflow: 'hidden'}}>
    74|             <VirtualizedItemListForDialog
    75|               items={ranges || []}
    76|               renderItem={({start, end}) => {
    77|                 return <div key={`${start}:${end}`}>{`${start}...${end}`}</div>;
    78|               }}
    79|             />
    80|           </div>
    81|           <DialogFooter topBorder>
    82|             <Button onClick={() => setIsDialogOpen(false)}>Close</Button>
    83|           </DialogFooter>
    84|         </Dialog>
    85|       </>
    86|     );
    87|   }
    88|   return (
    89|     <div>{targetPartitionCount === 1 ? '1 partition' : `${targetPartitionCount} partitions`}</div>
    90|   );
    91| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instance/backfill/types/BackfillPage.types.ts
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 17-57 ---
    17|         hasResumePermission: boolean;
    18|         isAssetBackfill: boolean;
    19|         numCancelable: number;
    20|         partitionNames: Array<string> | null;
    21|         error: {
    22|           __typename: 'PythonError';
    23|           message: string;
    24|           stack: Array<string>;
    25|           errorChain: Array<{
    26|             __typename: 'ErrorChainLink';
    27|             isExplicitLink: boolean;
    28|             error: {__typename: 'PythonError'; message: string; stack: Array<string>};
    29|           }>;
    30|         } | null;
    31|         assetBackfillData: {
    32|           __typename: 'AssetBackfillData';
    33|           rootTargetedPartitions: {
    34|             __typename: 'AssetBackfillTargetPartitions';
    35|             partitionKeys: Array<string> | null;
    36|             ranges: Array<{__typename: 'PartitionKeyRange'; start: string; end: string}> | null;
    37|           };
    38|           assetBackfillStatuses: Array<
    39|             | {
    40|                 __typename: 'AssetPartitionsStatusCounts';
    41|                 numPartitionsTargeted: number;
    42|                 numPartitionsInProgress: number;
    43|                 numPartitionsMaterialized: number;
    44|                 numPartitionsFailed: number;
    45|                 assetKey: {__typename: 'AssetKey'; path: Array<string>};
    46|               }
    47|             | {
    48|                 __typename: 'UnpartitionedAssetStatus';
    49|                 inProgress: boolean;
    50|                 materialized: boolean;
    51|                 failed: boolean;
    52|                 assetKey: {__typename: 'AssetKey'; path: Array<string>};
    53|               }
    54|           >;
    55|         } | null;
    56|         partitionSet: {
    57|           __typename: 'PartitionSet';

# --- HUNK 2: Lines 86-126 ---
    86|   hasResumePermission: boolean;
    87|   isAssetBackfill: boolean;
    88|   numCancelable: number;
    89|   partitionNames: Array<string> | null;
    90|   error: {
    91|     __typename: 'PythonError';
    92|     message: string;
    93|     stack: Array<string>;
    94|     errorChain: Array<{
    95|       __typename: 'ErrorChainLink';
    96|       isExplicitLink: boolean;
    97|       error: {__typename: 'PythonError'; message: string; stack: Array<string>};
    98|     }>;
    99|   } | null;
   100|   assetBackfillData: {
   101|     __typename: 'AssetBackfillData';
   102|     rootTargetedPartitions: {
   103|       __typename: 'AssetBackfillTargetPartitions';
   104|       partitionKeys: Array<string> | null;
   105|       ranges: Array<{__typename: 'PartitionKeyRange'; start: string; end: string}> | null;
   106|     };
   107|     assetBackfillStatuses: Array<
   108|       | {
   109|           __typename: 'AssetPartitionsStatusCounts';
   110|           numPartitionsTargeted: number;
   111|           numPartitionsInProgress: number;
   112|           numPartitionsMaterialized: number;
   113|           numPartitionsFailed: number;
   114|           assetKey: {__typename: 'AssetKey'; path: Array<string>};
   115|         }
   116|       | {
   117|           __typename: 'UnpartitionedAssetStatus';
   118|           inProgress: boolean;
   119|           materialized: boolean;
   120|           failed: boolean;
   121|           assetKey: {__typename: 'AssetKey'; path: Array<string>};
   122|         }
   123|     >;
   124|   } | null;
   125|   partitionSet: {
   126|     __typename: 'PartitionSet';


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instigation/InstigationTick.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-30 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {
     3|   Box,
     4|   Colors,
     5|   Group,
     6|   Icon,
     7|   NonIdealState,
     8|   Spinner,
     9|   Body,
    10|   Tooltip,
    11| } from '@dagster-io/ui-components';
    12| import * as React from 'react';
    13| import {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';
    14| import {RunTable, RUN_TABLE_RUN_FRAGMENT} from '../runs/RunTable';
    15| import {LaunchedRunListQuery, LaunchedRunListQueryVariables} from './types/InstigationTick.types';
    16| export const RunList = ({runIds}: {runIds: string[]}) => {
    17|   const {data, loading} = useQuery<LaunchedRunListQuery, LaunchedRunListQueryVariables>(
    18|     LAUNCHED_RUN_LIST_QUERY,
    19|     {
    20|       variables: {
    21|         filter: {
    22|           runIds,
    23|         },
    24|       },
    25|     },
    26|   );
    27|   if (loading || !data) {
    28|     return (
    29|       <Box padding={32}>
    30|         <Spinner purpose="section" />

# --- HUNK 2: Lines 37-90 ---
    37|         <NonIdealState
    38|           icon="error"
    39|           title="An error occurred"
    40|           description={data.pipelineRunsOrError.message}
    41|         />
    42|       </Box>
    43|     );
    44|   }
    45|   return (
    46|     <Box padding={{bottom: 8}}>
    47|       <RunTable runs={data.pipelineRunsOrError.results} />
    48|     </Box>
    49|   );
    50| };
    51| export const FailedRunList = ({originRunIds}: {originRunIds?: string[]}) => {
    52|   if (!originRunIds || !originRunIds.length) {
    53|     return null;
    54|   }
    55|   return (
    56|     <Group direction="column" spacing={16}>
    57|       <Box padding={12} border={{side: 'bottom', color: Colors.Gray200}}>
    58|         <Body>
    59|           Failed Runs
    60|           <Tooltip content="Failed runs this tick reacted on and reported back to.">
    61|             <Icon name="info" color={Colors.Gray500} />
    62|           </Tooltip>
    63|         </Body>
    64|         <RunList runIds={originRunIds} />
    65|       </Box>
    66|       <Box padding={12} margin={{bottom: 8}}>
    67|         <Body>
    68|           Requested Runs
    69|           <Tooltip content="Runs launched by the run requests in this tick.">
    70|             <Icon name="info" color={Colors.Gray500} />
    71|           </Tooltip>
    72|         </Body>
    73|         <NonIdealState
    74|           icon="sensors"
    75|           title="No runs to display"
    76|           description="This sensor does not target a pipeline or job."
    77|         />
    78|       </Box>
    79|     </Group>
    80|   );
    81| };
    82| export const TICK_TAG_FRAGMENT = gql`
    83|   fragment TickTagFragment on InstigationTick {
    84|     id
    85|     status
    86|     timestamp
    87|     skipReason
    88|     runIds
    89|     runKeys
    90|     error {


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instigation/InstigationUtils.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-39 ---
     1| import {gql} from '@apollo/client';
     2| import {Colors, Group, Mono} from '@dagster-io/ui-components';
     3| import * as React from 'react';
     4| import {Link} from 'react-router-dom';
     5| import styled from 'styled-components';
     6| import {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';
     7| import {LastRunSummary} from '../instance/LastRunSummary';
     8| import {RunStatusIndicator} from '../runs/RunStatusDots';
     9| import {RUN_TIME_FRAGMENT, titleForRun} from '../runs/RunUtils';
    10| import {TICK_TAG_FRAGMENT} from './InstigationTick';
    11| import {InstigationStateFragment, RunStatusFragment} from './types/InstigationUtils.types';
    12| export const InstigatedRunStatus = ({
    13|   instigationState,
    14| }: {
    15|   instigationState: InstigationStateFragment;
    16| }) => {
    17|   const [instigationRun] = instigationState.runs;
    18|   if (!instigationRun) {
    19|     return <span style={{color: Colors.Gray300}}>None</span>;
    20|   }
    21|   return <LastRunSummary run={instigationRun} name={instigationState.name} />;
    22| };
    23| export const RunStatusLink = ({run}: {run: RunStatusFragment}) => (
    24|   <Group direction="row" spacing={4} alignItems="center">
    25|     <RunStatusIndicator status={run.status} />
    26|     <Link to={`/runs/${run.id}`} target="_blank" rel="noreferrer">
    27|       <Mono>{titleForRun({id: run.id})}</Mono>
    28|     </Link>
    29|   </Group>
    30| );
    31| export const RUN_STATUS_FRAGMENT = gql`
    32|   fragment RunStatusFragment on Run {
    33|     id
    34|     status
    35|   }
    36| `;
    37| export const INSTIGATION_STATE_FRAGMENT = gql`
    38|   fragment InstigationStateFragment on InstigationState {
    39|     id

# --- HUNK 2: Lines 66-119 ---
    66|       ...TickTagFragment
    67|     }
    68|     runningCount
    69|   }
    70|   ${RUN_STATUS_FRAGMENT}
    71|   ${RUN_TIME_FRAGMENT}
    72|   ${TICK_TAG_FRAGMENT}
    73| `;
    74| export const StatusTable = styled.table`
    75|   font-size: 13px;
    76|   border-spacing: 0;
    77|   &&&&& tr {
    78|     box-shadow: none;
    79|   }
    80|   &&&&& tbody > tr > td {
    81|     background: transparent;
    82|     box-shadow: none !important;
    83|     padding: 1px 0;
    84|   }
    85|   &&&&& tbody > tr > td:first-child {
    86|     color: ${Colors.Gray500};
    87|   }
    88| `;
    89| export const DYNAMIC_PARTITIONS_REQUEST_RESULT_FRAGMENT = gql`
    90|   fragment DynamicPartitionsRequestResultFragment on DynamicPartitionsRequestResult {
    91|     partitionsDefName
    92|     partitionKeys
    93|     skippedPartitionKeys
    94|     type
    95|   }
    96| `;
    97| export const HISTORY_TICK_FRAGMENT = gql`
    98|   fragment HistoryTick on InstigationTick {
    99|     id
   100|     status
   101|     timestamp
   102|     endTimestamp
   103|     cursor
   104|     instigationType
   105|     skipReason
   106|     runIds
   107|     runs {
   108|       id
   109|       status
   110|       ...RunStatusFragment
   111|     }
   112|     originRunIds
   113|     error {
   114|       ...PythonErrorFragment
   115|     }
   116|     logKey
   117|     ...TickTagFragment
   118|     dynamicPartitionsRequestResults {
   119|       ...DynamicPartitionsRequestResultFragment


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instigation/LiveTickTimeline2.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-44 ---
     1| import {Caption, Colors, Tooltip, ifPlural, useViewport} from '@dagster-io/ui-components';
     2| import dayjs from 'dayjs';
     3| import relativeTime from 'dayjs/plugin/relativeTime';
     4| import memoize from 'lodash/memoize';
     5| import * as React from 'react';
     6| import styled from 'styled-components';
     7| import {TimeContext} from '../app/time/TimeContext';
     8| import {browserTimezone} from '../app/time/browserTimezone';
     9| import {AssetDaemonTickFragment} from '../assets/auto-materialization/types/AssetDaemonTicksQuery.types';
    10| import {InstigationTickStatus} from '../graphql/types';
    11| import {HistoryTickFragment} from './types/InstigationUtils.types';
    12| import {isOldTickWithoutEndtimestamp} from './util';
    13| dayjs.extend(relativeTime);
    14| const COLOR_MAP = {
    15|   [InstigationTickStatus.SUCCESS]: Colors.Green500,
    16|   [InstigationTickStatus.FAILURE]: Colors.Red500,
    17|   [InstigationTickStatus.STARTED]: Colors.LightPurple,
    18|   [InstigationTickStatus.SKIPPED]: Colors.Olive200,
    19| };
    20| const HoverColorMap = {
    21|   [InstigationTickStatus.SUCCESS]: Colors.Green700,
    22|   [InstigationTickStatus.FAILURE]: Colors.Red700,
    23|   [InstigationTickStatus.STARTED]: Colors.Blue500,
    24|   [InstigationTickStatus.SKIPPED]: Colors.Olive500,
    25| };
    26| const REFRESH_INTERVAL = 100;
    27| const MIN_WIDTH = 8; // At least 8px wide
    28| const MINUTE = 60000;
    29| const timestampFormat = memoize((timezone: string) => {
    30|   return new Intl.DateTimeFormat(navigator.language, {
    31|     hour: '2-digit',
    32|     minute: '2-digit',
    33|     second: '2-digit',
    34|     hourCycle: 'h23',
    35|     timeZone: timezone === 'Automatic' ? browserTimezone() : timezone,
    36|     timeZoneName: 'short',
    37|   });
    38| });
    39| export const LiveTickTimeline = <T extends HistoryTickFragment | AssetDaemonTickFragment>({
    40|   ticks,
    41|   onHoverTick,
    42|   onSelectTick,
    43|   exactRange,
    44|   timeRange = MINUTE * 5, // 5 minutes,

# --- HUNK 2: Lines 178-270 ---
   178|     const isAssetDaemonTick = 'requestedAssetMaterializationCount' in tick;
   179|     if (isAssetDaemonTick) {
   180|       return `${tick.requestedAssetMaterializationCount} materialization${ifPlural(
   181|         tick.requestedAssetMaterializationCount,
   182|         '',
   183|         's',
   184|       )} requested`;
   185|     } else {
   186|       return `${tick.runs?.length || 0} run${ifPlural(tick.runs?.length, '', 's')} requested`;
   187|     }
   188|   }, [tick]);
   189|   const startTime = dayjs(1000 * tick.timestamp!);
   190|   const endTime = dayjs(tick.endTimestamp ? 1000 * tick.endTimestamp : Date.now());
   191|   const elapsedTime = startTime.to(endTime, true);
   192|   return (
   193|     <div>
   194|       <Caption as="div">
   195|         {status} ({elapsedTime})
   196|       </Caption>
   197|       {tick.status === InstigationTickStatus.STARTED ? null : (
   198|         <Caption color={Colors.Gray300}>Click for details</Caption>
   199|       )}
   200|     </div>
   201|   );
   202| });
   203| const TicksWrapper = styled.div`
   204|   position: relative;
   205|   height: 100px;
   206|   padding: 10px 2px;
   207|   border-bottom: 1px solid ${Colors.KeylineGray};
   208| `;
   209| const TimeAxisWrapper = styled.div`
   210|   height: 24px;
   211| `;
   212| const Tick = styled.div<{status: InstigationTickStatus}>`
   213|   cursor: pointer;
   214|   position: absolute;
   215|   top: 10px;
   216|   height: 80px;
   217|   will-change: transform, width;
   218|   border-radius: 2px;
   219|   div {
   220|     place-content: center;
   221|     display: grid;
   222|   }
   223|   color: ${Colors.White};
   224|   ${({status}) => `
   225|     background: ${COLOR_MAP[status]};
   226|     &:hover {
   227|       background: ${HoverColorMap[status]};
   228|     }
   229|   `}
   230| `;
   231| const GridTick = styled.div`
   232|   position: absolute;
   233|   top: 0;
   234|   height: 124px;
   235|   will-change: transform;
   236| `;
   237| const GridTickLine = styled.div`
   238|   position: absolute;
   239|   top: 0;
   240|   height: 108px;
   241|   width: 1px;
   242|   background: ${Colors.KeylineGray};
   243| `;
   244| const GridTickTime = styled.div`
   245|   height: 16px;
   246|   position: absolute;
   247|   bottom: 0;
   248|   width: 100px;
   249|   margin-left: -24px;
   250| `;
   251| const NowIndicator = styled.div`
   252|   position: absolute;
   253|   top: 0;
   254|   height: 126px;
   255|   width: 2px;
   256|   background: ${Colors.Dark};
   257|   &:after {
   258|     content: 'Now';
   259|     position: absolute;
   260|     left: 0;
   261|     background: ${Colors.Dark};
   262|     color: white;
   263|     bottom: 0;
   264|     font-size: 12px;
   265|     padding: 3px 4px;
   266|   }
   267| `;
   268| function getX(timestamp: number, viewportWidth: number, minX: number, timeRange: number) {
   269|   return (viewportWidth * (timestamp - minX)) / timeRange;
   270| }


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instigation/TickDetailsDialog.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 14-76 ---
    14|   MiddleTruncate,
    15| } from '@dagster-io/ui-components';
    16| import * as React from 'react';
    17| import {showCustomAlert} from '../app/CustomAlertProvider';
    18| import {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';
    19| import {PythonErrorInfo} from '../app/PythonErrorInfo';
    20| import {formatElapsedTime} from '../app/Util';
    21| import {Timestamp} from '../app/time/Timestamp';
    22| import {AssetDaemonTickFragment} from '../assets/auto-materialization/types/AssetDaemonTicksQuery.types';
    23| import {
    24|   DynamicPartitionsRequestResult,
    25|   DynamicPartitionsRequestType,
    26|   InstigationSelector,
    27|   InstigationTickStatus,
    28| } from '../graphql/types';
    29| import {TimestampDisplay} from '../schedules/TimestampDisplay';
    30| import {FailedRunList, RunList} from './InstigationTick';
    31| import {HISTORY_TICK_FRAGMENT} from './InstigationUtils';
    32| import {HistoryTickFragment} from './types/InstigationUtils.types';
    33| import {SelectedTickQuery, SelectedTickQueryVariables} from './types/TickDetailsDialog.types';
    34| type Props = {
    35|   timestamp: number | undefined;
    36|   instigationSelector: InstigationSelector;
    37|   onClose: () => void;
    38|   isOpen: boolean;
    39| };
    40| export const TickDetailsDialog = ({timestamp, isOpen, instigationSelector, onClose}: Props) => {
    41|   return (
    42|     <Dialog isOpen={isOpen} onClose={onClose} style={{width: '90vw'}}>
    43|       <TickDetailsDialogImpl timestamp={timestamp} instigationSelector={instigationSelector} />
    44|       <DialogFooter>
    45|         <Button onClick={onClose}>Close</Button>
    46|       </DialogFooter>
    47|     </Dialog>
    48|   );
    49| };
    50| const TickDetailsDialogImpl = ({
    51|   timestamp,
    52|   instigationSelector,
    53| }: Omit<Props, 'isOpen' | 'onClose'>) => {
    54|   const {data} = useQuery<SelectedTickQuery, SelectedTickQueryVariables>(JOB_SELECTED_TICK_QUERY, {
    55|     variables: {instigationSelector, timestamp: timestamp || 0},
    56|     skip: !timestamp,
    57|   });
    58|   const tick =
    59|     data?.instigationStateOrError.__typename === 'InstigationState'
    60|       ? data?.instigationStateOrError.tick
    61|       : undefined;
    62|   const [addedPartitions, deletedPartitions] = React.useMemo(() => {
    63|     const added = tick?.dynamicPartitionsRequestResults.filter(
    64|       (request) =>
    65|         request.type === DynamicPartitionsRequestType.ADD_PARTITIONS &&
    66|         request.partitionKeys?.length,
    67|     );
    68|     const deleted = tick?.dynamicPartitionsRequestResults.filter(
    69|       (request) =>
    70|         request.type === DynamicPartitionsRequestType.DELETE_PARTITIONS &&
    71|         request.partitionKeys?.length,
    72|     );
    73|     return [added, deleted];
    74|   }, [tick?.dynamicPartitionsRequestResults]);
    75|   if (!tick) {
    76|     return (

# --- HUNK 2: Lines 166-234 ---
   166|                 View error
   167|               </ButtonLink>
   168|             ) : null}
   169|           </Box>
   170|         </Box>
   171|         <Box flex={{direction: 'column', gap: 4}}>
   172|           <Subtitle2>Timestamp</Subtitle2>
   173|           <div>
   174|             {tick ? (
   175|               <Timestamp timestamp={{unix: tick.timestamp}} timeFormat={{showTimezone: true}} />
   176|             ) : (
   177|               ''
   178|             )}
   179|           </div>
   180|         </Box>
   181|         <Box flex={{direction: 'column', gap: 4}}>
   182|           <Subtitle2>Duration</Subtitle2>
   183|           <div>
   184|             {tick?.endTimestamp
   185|               ? formatElapsedTime(tick.endTimestamp * 1000 - tick.timestamp * 1000)
   186|               : ''}
   187|           </div>
   188|         </Box>
   189|       </div>
   190|     </>
   191|   );
   192| }
   193| function PartitionsTable({partitions}: {partitions: DynamicPartitionsRequestResult[]}) {
   194|   return (
   195|     <Table>
   196|       <thead>
   197|         <tr>
   198|           <th>Partition Definition</th>
   199|           <th>Partition</th>
   200|         </tr>
   201|       </thead>
   202|       <tbody>
   203|         {partitions.flatMap(
   204|           (partition) =>
   205|             partition.partitionKeys?.map((key) => (
   206|               <tr key={key}>
   207|                 <td>
   208|                   <MiddleTruncate text={partition.partitionsDefName} />
   209|                 </td>
   210|                 <td>
   211|                   <MiddleTruncate text={key} />
   212|                 </td>
   213|               </tr>
   214|             )),
   215|         )}
   216|       </tbody>
   217|     </Table>
   218|   );
   219| }
   220| const JOB_SELECTED_TICK_QUERY = gql`
   221|   query SelectedTickQuery($instigationSelector: InstigationSelector!, $timestamp: Float!) {
   222|     instigationStateOrError(instigationSelector: $instigationSelector) {
   223|       ... on InstigationState {
   224|         id
   225|         tick(timestamp: $timestamp) {
   226|           id
   227|           ...HistoryTick
   228|         }
   229|       }
   230|     }
   231|   }
   232|   ${PYTHON_ERROR_FRAGMENT}
   233|   ${HISTORY_TICK_FRAGMENT}
   234| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instigation/TickHistory.tsx
# Total hunks: 5
# ====================================================================
# --- HUNK 1: Lines 1-37 ---
     1| import 'chartjs-adapter-date-fns';
     2| import {gql, useQuery} from '@apollo/client';
     3| import {
     4|   Box,
     5|   Checkbox,
     6|   Colors,
     7|   CursorHistoryControls,
     8|   NonIdealState,
     9|   Spinner,
    10|   Table,
    11|   Subheading,
    12|   FontFamily,
    13|   Icon,
    14|   IconWrapper,
    15|   ButtonLink,
    16|   ifPlural,
    17|   Caption,
    18| } from '@dagster-io/ui-components';
    19| import {Chart} from 'chart.js';
    20| import zoomPlugin from 'chartjs-plugin-zoom';
    21| import * as React from 'react';
    22| import styled from 'styled-components';
    23| import {showSharedToaster} from '../app/DomUtils';
    24| import {useFeatureFlags} from '../app/Flags';
    25| import {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';
    26| import {PythonErrorInfo} from '../app/PythonErrorInfo';
    27| import {FIFTEEN_SECONDS, useQueryRefreshAtInterval} from '../app/QueryRefresh';
    28| import {useCopyToClipboard} from '../app/browser';
    29| import {
    30|   DynamicPartitionsRequestType,
    31|   InstigationSelector,
    32|   InstigationTickStatus,
    33|   InstigationType,
    34| } from '../graphql/types';
    35| import {useQueryPersistedState} from '../hooks/useQueryPersistedState';
    36| import {TimeElapsed} from '../runs/TimeElapsed';
    37| import {useCursorPaginatedQuery} from '../runs/useCursorPaginatedQuery';

# --- HUNK 2: Lines 250-292 ---
   250|         </div>
   251|       ) : null}
   252|     </>
   253|   );
   254| };
   255| export const TickHistoryTimeline = ({
   256|   name,
   257|   repoAddress,
   258|   onHighlightRunIds,
   259|   beforeTimestamp,
   260|   afterTimestamp,
   261|   statuses,
   262| }: {
   263|   name: string;
   264|   repoAddress: RepoAddress;
   265|   onHighlightRunIds?: (runIds: string[]) => void;
   266|   beforeTimestamp?: number;
   267|   afterTimestamp?: number;
   268|   statuses?: InstigationTickStatus[];
   269| }) => {
   270|   const [selectedTime, setSelectedTime] = useQueryPersistedState<number | undefined>({
   271|     encode: (timestamp) => ({time: timestamp}),
   272|     decode: (qs) => (qs['time'] ? Number(qs['time']) : undefined),
   273|   });
   274|   const [pollingPaused, pausePolling] = React.useState<boolean>(false);
   275|   const instigationSelector = {...repoAddressToSelector(repoAddress), name};
   276|   const queryResult = useQuery<TickHistoryQuery, TickHistoryQueryVariables>(
   277|     JOB_TICK_HISTORY_QUERY,
   278|     {
   279|       variables: {
   280|         instigationSelector,
   281|         beforeTimestamp,
   282|         afterTimestamp,
   283|         statuses,
   284|         limit: beforeTimestamp ? undefined : 15,
   285|       },
   286|       notifyOnNetworkStatusChange: true,
   287|     },
   288|   );
   289|   useQueryRefreshAtInterval(
   290|     queryResult,
   291|     1000,
   292|     !(pollingPaused || (beforeTimestamp && afterTimestamp)),

# --- HUNK 3: Lines 295-350 ---
   295|   if (!data || error) {
   296|     return (
   297|       <>
   298|         <Box padding={{top: 16, horizontal: 24}} border="bottom">
   299|           <Subheading>Recent ticks</Subheading>
   300|         </Box>
   301|         <Box padding={{vertical: 64}}>
   302|           <Spinner purpose="section" />
   303|         </Box>
   304|       </>
   305|     );
   306|   }
   307|   if (data.instigationStateOrError.__typename === 'PythonError') {
   308|     return <PythonErrorInfo error={data.instigationStateOrError} />;
   309|   }
   310|   if (data.instigationStateOrError.__typename === 'InstigationStateNotFoundError') {
   311|     return null;
   312|   }
   313|   const {ticks = []} = data.instigationStateOrError;
   314|   const onTickClick = (tick?: InstigationTick) => {
   315|     setSelectedTime(tick ? tick.timestamp : undefined);
   316|   };
   317|   const onTickHover = (tick?: InstigationTick) => {
   318|     if (!tick) {
   319|       pausePolling(false);
   320|     }
   321|     if (tick?.runIds) {
   322|       onHighlightRunIds && onHighlightRunIds(tick.runIds);
   323|       pausePolling(true);
   324|     }
   325|   };
   326|   return (
   327|     <>
   328|       <TickDetailsDialog
   329|         isOpen={!!selectedTime}
   330|         timestamp={selectedTime}
   331|         instigationSelector={instigationSelector}
   332|         onClose={() => onTickClick(undefined)}
   333|       />
   334|       <Box padding={{vertical: 16, horizontal: 24}}>
   335|         <Subheading>Recent ticks</Subheading>
   336|       </Box>
   337|       <Box border="top">
   338|         <LiveTickTimeline
   339|           ticks={ticks}
   340|           onHoverTick={onTickHover}
   341|           onSelectTick={onTickClick}
   342|           exactRange={
   343|             beforeTimestamp && afterTimestamp ? [afterTimestamp, beforeTimestamp] : undefined
   344|           }
   345|         />
   346|       </Box>
   347|     </>
   348|   );
   349| };
   350| function TickRow({

# --- HUNK 4: Lines 438-478 ---
   438|             </Box>
   439|             {addedPartitions || deletedPartitions ? (
   440|               <Caption>
   441|                 (
   442|                 {addedPartitions ? (
   443|                   <span>
   444|                     {addedPartitions} partition{ifPlural(addedPartitions, '', 's')} created
   445|                     {deletedPartitions ? ',' : ''}
   446|                   </span>
   447|                 ) : null}
   448|                 {deletedPartitions ? (
   449|                   <span>
   450|                     {deletedPartitions} partition{ifPlural(deletedPartitions, '', 's')} deleted,
   451|                   </span>
   452|                 ) : null}
   453|                 )
   454|               </Caption>
   455|             ) : null}
   456|             <TickDetailsDialog
   457|               isOpen={showResults}
   458|               timestamp={tick.timestamp}
   459|               instigationSelector={instigationSelector}
   460|               onClose={() => {
   461|                 setShowResults(false);
   462|               }}
   463|             />
   464|           </Box>
   465|         ) : (
   466|           <>&mdash;</>
   467|         )}
   468|       </td>
   469|       {flagSensorScheduleLogging ? (
   470|         <td>{tick.logKey ? <a onClick={() => setLogTick(tick)}>View logs</a> : <>&mdash;</>}</td>
   471|       ) : null}
   472|     </tr>
   473|   );
   474| }
   475| const JOB_TICK_HISTORY_QUERY = gql`
   476|   query TickHistoryQuery(
   477|     $instigationSelector: InstigationSelector!
   478|     $dayRange: Int

# --- HUNK 5: Lines 497-532 ---
   497|           id
   498|           ...HistoryTick
   499|         }
   500|       }
   501|       ...PythonErrorFragment
   502|     }
   503|   }
   504|   ${RUN_STATUS_FRAGMENT}
   505|   ${PYTHON_ERROR_FRAGMENT}
   506|   ${TICK_TAG_FRAGMENT}
   507|   ${HISTORY_TICK_FRAGMENT}
   508| `;
   509| const CopyButton = styled.button`
   510|   background: transparent;
   511|   border: 0;
   512|   cursor: pointer;
   513|   padding: 8px;
   514|   margin: -6px;
   515|   outline: none;
   516|   ${IconWrapper} {
   517|     background-color: ${Colors.Gray600};
   518|     transition: background-color 100ms;
   519|   }
   520|   :hover ${IconWrapper} {
   521|     background-color: ${Colors.Gray800};
   522|   }
   523|   :focus ${IconWrapper} {
   524|     background-color: ${Colors.Link};
   525|   }
   526| `;
   527| const TableWrapper = styled(Table)`
   528|   th,
   529|   td {
   530|     vertical-align: middle !important;
   531|   }
   532| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instigation/Unloadable.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-30 ---
     1| import {useMutation} from '@apollo/client';
     2| import {
     3|   Alert,
     4|   Box,
     5|   Checkbox,
     6|   Colors,
     7|   Group,
     8|   Table,
     9|   Subheading,
    10|   Tooltip,
    11| } from '@dagster-io/ui-components';
    12| import * as React from 'react';
    13| import {useConfirmation} from '../app/CustomConfirmationProvider';
    14| import {DEFAULT_DISABLED_REASON} from '../app/Permissions';
    15| import {InstigationStatus} from '../graphql/types';
    16| import {
    17|   displayScheduleMutationErrors,
    18|   STOP_SCHEDULE_MUTATION,
    19| } from '../schedules/ScheduleMutations';
    20| import {humanCronString} from '../schedules/humanCronString';
    21| import {
    22|   StopScheduleMutation,
    23|   StopScheduleMutationVariables,
    24| } from '../schedules/types/ScheduleMutations.types';
    25| import {displaySensorMutationErrors, STOP_SENSOR_MUTATION} from '../sensors/SensorMutations';
    26| import {
    27|   StopRunningSensorMutation,
    28|   StopRunningSensorMutationVariables,
    29| } from '../sensors/types/SensorMutations.types';
    30| import {TickStatusTag} from '../ticks/TickStatusTag';

# --- HUNK 2: Lines 169-209 ---
   169|     );
   170|     return lacksPermission ? (
   171|       <Tooltip content={DEFAULT_DISABLED_REASON}>{element}</Tooltip>
   172|     ) : (
   173|       element
   174|     );
   175|   };
   176|   return (
   177|     <tr key={name}>
   178|       <td style={{width: 60}}>{checkbox()}</td>
   179|       <td>
   180|         <Group direction="row" spacing={8} alignItems="center">
   181|           {name}
   182|         </Group>
   183|         <InstigatorSelectorInformation instigatorState={sensorState} />
   184|       </td>
   185|       <td>
   186|         {latestTick ? (
   187|           <TickStatusTag tick={latestTick} />
   188|         ) : (
   189|           <span style={{color: Colors.Gray300}}>None</span>
   190|         )}
   191|       </td>
   192|       <td>
   193|         <div style={{display: 'flex'}}>
   194|           <InstigatedRunStatus instigationState={sensorState} />
   195|         </div>
   196|       </td>
   197|     </tr>
   198|   );
   199| };
   200| const ScheduleStateRow = ({scheduleState}: {scheduleState: InstigationStateFragment}) => {
   201|   const [stopSchedule, {loading: toggleOffInFlight}] = useMutation<
   202|     StopScheduleMutation,
   203|     StopScheduleMutationVariables
   204|   >(STOP_SCHEDULE_MUTATION, {
   205|     onCompleted: displayScheduleMutationErrors,
   206|   });
   207|   const confirm = useConfirmation();
   208|   const {id, selectorId, name, ticks, status, typeSpecificData} = scheduleState;
   209|   const latestTick = ticks.length > 0 ? ticks[0] : null;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instigation/types/InstigationUtils.types.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 38-77 ---
    38|       message: string;
    39|       stack: Array<string>;
    40|       errorChain: Array<{
    41|         __typename: 'ErrorChainLink';
    42|         isExplicitLink: boolean;
    43|         error: {__typename: 'PythonError'; message: string; stack: Array<string>};
    44|       }>;
    45|     } | null;
    46|   }>;
    47| };
    48| export type DynamicPartitionsRequestResultFragment = {
    49|   __typename: 'DynamicPartitionsRequestResult';
    50|   partitionsDefName: string;
    51|   partitionKeys: Array<string> | null;
    52|   skippedPartitionKeys: Array<string>;
    53|   type: Types.DynamicPartitionsRequestType;
    54| };
    55| export type HistoryTickFragment = {
    56|   __typename: 'InstigationTick';
    57|   id: string;
    58|   status: Types.InstigationTickStatus;
    59|   timestamp: number;
    60|   endTimestamp: number | null;
    61|   cursor: string | null;
    62|   instigationType: Types.InstigationType;
    63|   skipReason: string | null;
    64|   runIds: Array<string>;
    65|   originRunIds: Array<string>;
    66|   logKey: Array<string> | null;
    67|   runKeys: Array<string>;
    68|   runs: Array<{__typename: 'Run'; id: string; status: Types.RunStatus}>;
    69|   error: {
    70|     __typename: 'PythonError';
    71|     message: string;
    72|     stack: Array<string>;
    73|     errorChain: Array<{
    74|       __typename: 'ErrorChainLink';
    75|       isExplicitLink: boolean;
    76|       error: {__typename: 'PythonError'; message: string; stack: Array<string>};
    77|     }>;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instigation/types/TickDetailsDialog.types.ts
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-47 ---
     1| import * as Types from '../../graphql/types';
     2| export type SelectedTickQueryVariables = Types.Exact<{
     3|   instigationSelector: Types.InstigationSelector;
     4|   timestamp: Types.Scalars['Float'];
     5| }>;
     6| export type SelectedTickQuery = {
     7|   __typename: 'Query';
     8|   instigationStateOrError:
     9|     | {
    10|         __typename: 'InstigationState';
    11|         id: string;
    12|         tick: {
    13|           __typename: 'InstigationTick';
    14|           id: string;
    15|           status: Types.InstigationTickStatus;
    16|           timestamp: number;
    17|           endTimestamp: number | null;
    18|           cursor: string | null;
    19|           instigationType: Types.InstigationType;
    20|           skipReason: string | null;
    21|           runIds: Array<string>;
    22|           originRunIds: Array<string>;
    23|           logKey: Array<string> | null;
    24|           runKeys: Array<string>;
    25|           runs: Array<{__typename: 'Run'; id: string; status: Types.RunStatus}>;
    26|           error: {
    27|             __typename: 'PythonError';
    28|             message: string;
    29|             stack: Array<string>;
    30|             errorChain: Array<{
    31|               __typename: 'ErrorChainLink';
    32|               isExplicitLink: boolean;
    33|               error: {__typename: 'PythonError'; message: string; stack: Array<string>};
    34|             }>;
    35|           } | null;
    36|           dynamicPartitionsRequestResults: Array<{
    37|             __typename: 'DynamicPartitionsRequestResult';
    38|             partitionsDefName: string;
    39|             partitionKeys: Array<string> | null;
    40|             skippedPartitionKeys: Array<string>;
    41|             type: Types.DynamicPartitionsRequestType;
    42|           }>;
    43|         } | null;
    44|       }
    45|     | {__typename: 'InstigationStateNotFoundError'}
    46|     | {__typename: 'PythonError'};
    47| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/instigation/types/TickHistory.types.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-40 ---
     1| import * as Types from '../../graphql/types';
     2| export type TickHistoryQueryVariables = Types.Exact<{
     3|   instigationSelector: Types.InstigationSelector;
     4|   dayRange?: Types.InputMaybe<Types.Scalars['Int']>;
     5|   limit?: Types.InputMaybe<Types.Scalars['Int']>;
     6|   cursor?: Types.InputMaybe<Types.Scalars['String']>;
     7|   statuses?: Types.InputMaybe<Array<Types.InstigationTickStatus> | Types.InstigationTickStatus>;
     8|   beforeTimestamp?: Types.InputMaybe<Types.Scalars['Float']>;
     9|   afterTimestamp?: Types.InputMaybe<Types.Scalars['Float']>;
    10| }>;
    11| export type TickHistoryQuery = {
    12|   __typename: 'Query';
    13|   instigationStateOrError:
    14|     | {
    15|         __typename: 'InstigationState';
    16|         id: string;
    17|         instigationType: Types.InstigationType;
    18|         ticks: Array<{
    19|           __typename: 'InstigationTick';
    20|           id: string;
    21|           status: Types.InstigationTickStatus;
    22|           timestamp: number;
    23|           endTimestamp: number | null;
    24|           cursor: string | null;
    25|           instigationType: Types.InstigationType;
    26|           skipReason: string | null;
    27|           runIds: Array<string>;
    28|           originRunIds: Array<string>;
    29|           logKey: Array<string> | null;
    30|           runKeys: Array<string>;
    31|           runs: Array<{__typename: 'Run'; id: string; status: Types.RunStatus}>;
    32|           error: {
    33|             __typename: 'PythonError';
    34|             message: string;
    35|             stack: Array<string>;
    36|             errorChain: Array<{
    37|               __typename: 'ErrorChainLink';
    38|               isExplicitLink: boolean;
    39|               error: {__typename: 'PythonError'; message: string; stack: Array<string>};
    40|             }>;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/launchpad/ConfigEditorConfigPicker.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-34 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {HTMLInputProps, InputGroupProps2, Intent} from '@blueprintjs/core';
     3| import {
     4|   Box,
     5|   Button,
     6|   Colors,
     7|   Icon,
     8|   IconWrapper,
     9|   MenuDivider,
    10|   MenuItem,
    11|   Menu,
    12|   Select,
    13|   Spinner,
    14|   Suggest,
    15| } from '@dagster-io/ui-components';
    16| import * as React from 'react';
    17| import styled from 'styled-components';
    18| import {AppContext} from '../app/AppContext';
    19| import {showCustomAlert} from '../app/CustomAlertProvider';
    20| import {IExecutionSession} from '../app/ExecutionSessionStorage';
    21| import {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';
    22| import {PythonErrorInfo} from '../app/PythonErrorInfo';
    23| import {ShortcutHandler} from '../app/ShortcutHandler';
    24| import {PartitionDefinitionType, RepositorySelector} from '../graphql/types';
    25| import {useStateWithStorage} from '../hooks/useStateWithStorage';
    26| import {CreatePartitionDialog} from '../partitions/CreatePartitionDialog';
    27| import {repoAddressAsHumanString} from '../workspace/repoAddressAsString';
    28| import {repoAddressToSelector} from '../workspace/repoAddressToSelector';
    29| import {RepoAddress} from '../workspace/types';
    30| import {
    31|   ConfigEditorGeneratorPipelineFragment,
    32|   ConfigEditorPipelinePresetFragment,
    33|   PartitionSetForConfigEditorFragment,
    34|   ConfigPartitionResultFragment,

# --- HUNK 2: Lines 165-205 ---
   165|       data?.partitionSetOrError.partitionsOrError.__typename === 'Partitions'
   166|         ? data.partitionSetOrError.partitionsOrError.results
   167|         : [];
   168|     return sortOrder === 'asc' ? retrieved : [...retrieved].reverse();
   169|   }, [data, sortOrder]);
   170|   const error =
   171|     data?.partitionSetOrError.__typename === 'PartitionSet' &&
   172|     data?.partitionSetOrError.partitionsOrError.__typename !== 'Partitions'
   173|       ? data.partitionSetOrError.partitionsOrError
   174|       : null;
   175|   const selected = partitions.find((p) => p.name === value);
   176|   const onClickSort = React.useCallback(
   177|     (event: React.MouseEvent<HTMLButtonElement>) => {
   178|       event.preventDefault();
   179|       setSortOrder((order) => (order === 'asc' ? 'desc' : 'asc'));
   180|     },
   181|     [setSortOrder],
   182|   );
   183|   const rightElement = partitions.length ? (
   184|     <SortButton onMouseDown={onClickSort}>
   185|       <Icon name="sort_by_alpha" color={Colors.Gray400} />
   186|     </SortButton>
   187|   ) : undefined;
   188|   const inputProps: InputGroupProps2 & HTMLInputProps = {
   189|     placeholder: 'Partition',
   190|     style: {width: 180},
   191|     intent: (loading ? !!value : !!selected) ? Intent.NONE : Intent.DANGER,
   192|     rightElement,
   193|   };
   194|   const {isDynamicPartition, partitionDefinitionName} = React.useMemo(() => {
   195|     const assetNodes = data?.assetNodes;
   196|     const definition = assetNodes?.find((a) => !!a.partitionDefinition)?.partitionDefinition;
   197|     if (
   198|       !definition ||
   199|       assetNodes?.some(
   200|         (node) =>
   201|           node?.partitionDefinition?.name && node?.partitionDefinition?.name !== definition?.name,
   202|       )
   203|     ) {
   204|       return {isDynamicPartition: false, partitionDefinitionName: undefined};
   205|     }

# --- HUNK 3: Lines 359-408 ---
   359|             onItemSelect={onSelect}
   360|           >
   361|             <Button
   362|               ref={button}
   363|               data-test-id="preset-selector-button"
   364|               rightIcon={<Icon name="expand_more" />}
   365|             >
   366|               {label}
   367|             </Button>
   368|           </Select>
   369|         </ShortcutHandler>
   370|       </div>
   371|     );
   372|   },
   373| );
   374| export const SortButton = styled.button`
   375|   border: 0;
   376|   cursor: pointer;
   377|   padding: 4px;
   378|   margin: 3px 3px 0 0;
   379|   background-color: ${Colors.White};
   380|   border-radius: 4px;
   381|   transition: background-color 100ms;
   382|   :focus {
   383|     background-color: ${Colors.Gray100};
   384|     outline: none;
   385|   }
   386|   :hover {
   387|     ${IconWrapper} {
   388|       background-color: ${Colors.Gray700};
   389|     }
   390|   }
   391| `;
   392| const PickerContainer = styled.div`
   393|   display: flex;
   394|   justify: space-between;
   395|   align-items: center;
   396|   gap: 6px;
   397| `;
   398| const CONFIG_PARTITIONS_QUERY = gql`
   399|   query ConfigPartitionsQuery(
   400|     $repositorySelector: RepositorySelector!
   401|     $partitionSetName: String!
   402|     $assetKeys: [AssetKeyInput!]
   403|   ) {
   404|     partitionSetOrError(
   405|       repositorySelector: $repositorySelector
   406|       partitionSetName: $partitionSetName
   407|     ) {
   408|       ... on PartitionSet {


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/launchpad/LaunchButton.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-30 ---
     1| import {
     2|   Button,
     3|   Colors,
     4|   Icon,
     5|   IconName,
     6|   Menu,
     7|   MenuItem,
     8|   Popover,
     9|   Spinner,
    10|   Tooltip,
    11| } from '@dagster-io/ui-components';
    12| import * as React from 'react';
    13| import styled from 'styled-components';
    14| import {useConfirmation} from '../app/CustomConfirmationProvider';
    15| import {ShortcutHandler} from '../app/ShortcutHandler';
    16| export interface LaunchButtonConfiguration {
    17|   title: string;
    18|   disabled: boolean;
    19|   warning?: React.ReactNode;
    20|   scope?: string;
    21|   onClick: () => Promise<any>;
    22|   icon?: IconName | JSX.Element | 'dagster-spinner';
    23|   tooltip?: string | JSX.Element;
    24| }
    25| enum LaunchButtonStatus {
    26|   Ready = 'ready',
    27|   Starting = 'starting',
    28|   Disabled = 'disabled',
    29| }
    30| function useLaunchButtonCommonState({runCount, disabled}: {runCount: number; disabled: boolean}) {

# --- HUNK 2: Lines 196-249 ---
   196|     onClick();
   197|   };
   198|   return (
   199|     <Tooltip
   200|       position="left"
   201|       openOnTargetFocus={false}
   202|       targetTagName="div"
   203|       canShow={!!tooltip}
   204|       content={tooltip || ''}
   205|     >
   206|       <ButtonContainer
   207|         role="button"
   208|         intent="primary"
   209|         style={{...style}}
   210|         status={status}
   211|         onClick={onClickWithWarning}
   212|         joined={joined}
   213|         disabled={disabled}
   214|         icon={
   215|           icon === 'dagster-spinner' ? (
   216|             <Spinner purpose="body-text" fillColor={Colors.White} />
   217|           ) : typeof icon === 'string' ? (
   218|             <Icon name={icon} size={16} style={{textAlign: 'center', marginRight: 5}} />
   219|           ) : (
   220|             icon
   221|           )
   222|         }
   223|       >
   224|         <MaxwidthText>{title}</MaxwidthText>
   225|       </ButtonContainer>
   226|     </Tooltip>
   227|   );
   228| };
   229| const ButtonContainer = styled(Button)<{
   230|   status: LaunchButtonStatus;
   231|   joined?: 'right' | 'left';
   232| }>`
   233|   border-top-${({joined}) => joined}-radius: 0;
   234|   border-bottom-${({joined}) => joined}-radius: 0;
   235|   border-left: ${({joined}) =>
   236|     joined === 'left' ? `1px solid rgba(255,255,255,0.2)` : 'transparent'};
   237|   cursor: ${({status}) => (status !== 'ready' ? 'normal' : 'pointer')};
   238|   margin-left: ${({joined}) => (joined ? '0' : '6px')};
   239|   ${({joined}) => (joined === 'right' ? 'padding-right: 8px;' : null)}
   240| `;
   241| const MaxwidthText = styled.div`
   242|   overflow: hidden;
   243|   text-overflow: ellipsis;
   244|   white-space: nowrap;
   245|   max-width: 350px;
   246| `;
   247| const LaunchMenuItem = styled(MenuItem)`
   248|   max-width: 200px;
   249| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/launchpad/LaunchpadSession.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-39 ---
     1| import {gql, useApolloClient, useQuery} from '@apollo/client';
     2| import {
     3|   Body,
     4|   Box,
     5|   Button,
     6|   ButtonLink,
     7|   Checkbox,
     8|   Colors,
     9|   ConfigEditorHandle,
    10|   ConfigEditorHelp,
    11|   ConfigEditorHelpContext,
    12|   Dialog,
    13|   DialogFooter,
    14|   Group,
    15|   Icon,
    16|   NewConfigEditor,
    17|   SecondPanelToggle,
    18|   SplitPanelContainer,
    19|   TextInput,
    20|   isHelpContextEqual,
    21| } from '@dagster-io/ui-components';
    22| import merge from 'deepmerge';
    23| import uniqBy from 'lodash/uniqBy';
    24| import * as React from 'react';
    25| import styled from 'styled-components';
    26| import * as yaml from 'yaml';
    27| import {showCustomAlert} from '../app/CustomAlertProvider';
    28| import {
    29|   IExecutionSession,
    30|   IExecutionSessionChanges,
    31|   PipelineRunTag,
    32|   SessionBase,
    33| } from '../app/ExecutionSessionStorage';
    34| import {usePermissionsForLocation} from '../app/Permissions';
    35| import {PythonErrorInfo} from '../app/PythonErrorInfo';
    36| import {ShortcutHandler} from '../app/ShortcutHandler';
    37| import {displayNameForAssetKey, tokenForAssetKey} from '../asset-graph/Utils';
    38| import {asAssetKeyInput, asAssetCheckHandleInput} from '../assets/asInput';
    39| import {

# --- HUNK 2: Lines 581-621 ---
   581|                 onSaveSession={onSaveSession}
   582|                 onSelectPreset={onSelectPreset}
   583|                 onSelectPartition={onSelectPartition}
   584|                 repoAddress={repoAddress}
   585|                 assetSelection={currentSession.assetSelection}
   586|               />
   587|               <SessionSettingsSpacer />
   588|               {launchpadType === 'asset' ? (
   589|                 <Box flex={{gap: 16, alignItems: 'center'}}>
   590|                   <TextInput
   591|                     readOnly
   592|                     value={
   593|                       currentSession.assetSelection
   594|                         ? currentSession.assetSelection
   595|                             .map((a) => tokenForAssetKey(a.assetKey))
   596|                             .join(', ')
   597|                         : '*'
   598|                     }
   599|                   />
   600|                   {includedChecks.length > 0 ? (
   601|                     <Body color={Colors.Dark}>
   602|                       {`Including `}
   603|                       <ButtonLink onClick={() => setShowChecks(includedChecks)}>
   604|                         {`${includedChecks.length.toLocaleString()} ${
   605|                           includedChecks.length > 1 ? 'checks' : 'check'
   606|                         }`}
   607|                       </ButtonLink>
   608|                     </Body>
   609|                   ) : undefined}
   610|                   {executableChecks.length > 0 ? (
   611|                     <Checkbox
   612|                       label={
   613|                         <span>
   614|                           {`Include `}
   615|                           <ButtonLink onClick={() => setShowChecks(executableChecks)}>
   616|                             {`${executableChecks.length.toLocaleString()} separately executable ${
   617|                               executableChecks.length > 1 ? 'checks' : 'check'
   618|                             }`}
   619|                           </ButtonLink>
   620|                         </span>
   621|                       }

# --- HUNK 3: Lines 664-719 ---
   664|                 onChange={saveTags}
   665|                 open={tagEditorOpen}
   666|                 onRequestClose={closeTagEditor}
   667|               />
   668|               <div style={{flex: 1}} />
   669|               <ShortcutHandler
   670|                 shortcutLabel="T"
   671|                 shortcutFilter={(e) => e.code === 'KeyT' && e.altKey}
   672|                 onShortcut={openTagEditor}
   673|               >
   674|                 <Button onClick={openTagEditor} icon={<Icon name="edit" />}>
   675|                   Edit tags
   676|                 </Button>
   677|               </ShortcutHandler>
   678|               <SessionSettingsSpacer />
   679|               <SecondPanelToggle axis="horizontal" container={editorSplitPanelContainer} />
   680|             </SessionSettingsBar>
   681|             {pipeline.tags.length || tagsFromSession.length ? (
   682|               <Box
   683|                 padding={{vertical: 8, left: 12, right: 0}}
   684|                 border={{side: 'bottom', color: Colors.Gray200}}
   685|               >
   686|                 <TagContainer
   687|                   tagsFromDefinition={pipeline.tags}
   688|                   tagsFromSession={tagsFromSession}
   689|                   onRequestEdit={openTagEditor}
   690|                 />
   691|               </Box>
   692|             ) : null}
   693|             {refreshableSessionBase ? (
   694|               <Box
   695|                 padding={{vertical: 8, horizontal: 12}}
   696|                 border={{side: 'bottom', color: Colors.Gray200}}
   697|               >
   698|                 <Group direction="row" spacing={8} alignItems="center">
   699|                   <Icon name="warning" color={Colors.Yellow500} />
   700|                   <div>
   701|                     {repoAddressAsHumanString(repoAddress)} has been manually refreshed, and this
   702|                     configuration may now be out of date.
   703|                   </div>
   704|                   <Button
   705|                     intent="primary"
   706|                     onClick={() => onRefreshConfig(refreshableSessionBase)}
   707|                     disabled={state.configLoading}
   708|                   >
   709|                     Refresh config
   710|                   </Button>
   711|                   <Button onClick={onDismissRefreshWarning}>Dismiss</Button>
   712|                 </Group>
   713|               </Box>
   714|             ) : null}
   715|             <SplitPanelContainer
   716|               ref={editorSplitPanelContainer}
   717|               axis="horizontal"
   718|               identifier="execution-editor"
   719|               firstMinSize={100}


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/launchpad/LaunchpadTabs.tsx
# Total hunks: 4
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {Box, ButtonLink, Colors, Icon, IconWrapper} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import styled, {css} from 'styled-components';
     4| import {useConfirmation} from '../app/CustomConfirmationProvider';
     5| import {
     6|   applyChangesToSession,
     7|   applyRemoveSession,
     8|   applySelectSession,
     9|   IStorageData,
    10| } from '../app/ExecutionSessionStorage';
    11| interface ExecutationTabProps {
    12|   canRemove?: boolean;
    13|   title: string;
    14|   active?: boolean;
    15|   onChange?: (title: string) => void;
    16|   onRemove?: () => void;
    17|   onClick: () => void;
    18| }
    19| const LaunchpadTab = (props: ExecutationTabProps) => {
    20|   const {canRemove, title, onChange, onClick, onRemove, active} = props;
    21|   const input = React.useRef<HTMLInputElement>(null);

# --- HUNK 2: Lines 48-88 ---
    48|       el.select();
    49|     }
    50|   }, [editing]);
    51|   return (
    52|     <TabContainer $active={active || false} onDoubleClick={onDoubleClick} onClick={onClick}>
    53|       {editing ? (
    54|         <input
    55|           ref={input}
    56|           type="text"
    57|           onKeyDown={(e) => e.key === 'Enter' && e.currentTarget.blur()}
    58|           onChange={handleChange}
    59|           onBlur={handleBlur}
    60|           value={value}
    61|           placeholder="Type a tab name"
    62|         />
    63|       ) : (
    64|         title
    65|       )}
    66|       {canRemove && !editing && onRemove ? (
    67|         <RemoveButton onClick={onClickRemove}>
    68|           <Icon name="close" color={Colors.Olive500} />
    69|         </RemoveButton>
    70|       ) : null}
    71|     </TabContainer>
    72|   );
    73| };
    74| const REMOVE_ALL_THRESHOLD = 3;
    75| interface LaunchpadTabsProps {
    76|   data: IStorageData;
    77|   onCreate: () => void;
    78|   onSave: (data: React.SetStateAction<IStorageData>) => void;
    79| }
    80| export const LaunchpadTabs = (props: LaunchpadTabsProps) => {
    81|   const {data, onCreate, onSave} = props;
    82|   const {sessions} = data;
    83|   const sessionKeys = Object.keys(sessions);
    84|   const sessionCount = sessionKeys.length;
    85|   const confirm = useConfirmation();
    86|   const onApply = (mutator: any, ...args: any[]) => {
    87|     onSave(mutator(data, ...args));
    88|   };

# --- HUNK 3: Lines 109-205 ---
   109|       });
   110|       return updatedData;
   111|     });
   112|   };
   113|   return (
   114|     <Box border="bottom" padding={{top: 12}}>
   115|       <LaunchpadTabsContainer>
   116|         {sessionKeys.map((key) => (
   117|           <LaunchpadTab
   118|             canRemove={sessionCount > 1}
   119|             key={key}
   120|             active={key === data.current}
   121|             title={sessions[key]!.name || 'Unnamed'}
   122|             onClick={() => onApply(applySelectSession, key)}
   123|             onChange={(name) => onApply(applyChangesToSession, key, {name})}
   124|             onRemove={() => onRemove(key)}
   125|           />
   126|         ))}
   127|         <LaunchpadTab title="+ Add..." onClick={onCreate} />
   128|         {sessionKeys.length > REMOVE_ALL_THRESHOLD ? (
   129|           <ButtonLink color={Colors.Red500} onClick={onRemoveAll}>
   130|             <Box
   131|               flex={{direction: 'row', gap: 4, alignItems: 'center'}}
   132|               style={{whiteSpace: 'nowrap'}}
   133|             >
   134|               <Icon name="delete" color={Colors.Red500} />
   135|               <div>Remove all</div>
   136|             </Box>
   137|           </ButtonLink>
   138|         ) : null}
   139|       </LaunchpadTabsContainer>
   140|     </Box>
   141|   );
   142| };
   143| const LaunchpadTabsContainer = styled.div`
   144|   display: flex;
   145|   flex-direction: row;
   146|   font-size: 13px;
   147|   gap: 8px;
   148|   z-index: 1;
   149|   flex-direction: row;
   150|   padding-left: 12px;
   151|   overflow-x: auto;
   152| `;
   153| const TabContainer = styled.div<{$active: boolean}>`
   154|   align-items: center;
   155|   user-select: none;
   156|   padding: 8px 12px;
   157|   display: inline-flex;
   158|   align-items: center;
   159|   gap: 4px;
   160|   border-top-left-radius: 8px;
   161|   border-top-right-radius: 8px;
   162|   white-space: nowrap;
   163|   ${({$active}) =>
   164|     $active
   165|       ? css`
   166|           font-weight: 600;
   167|           background-color: ${Colors.Gray100};
   168|           color: ${Colors.ForestGreen};
   169|           box-shadow: ${Colors.ForestGreen} 0 -2px 0 inset;
   170|         `
   171|       : css`
   172|           font-weight: normal;
   173|           background-color: ${Colors.Gray50};
   174|           color: ${Colors.Gray300};
   175|           box-shadow: ${Colors.Olive200} 0 -1px 0 inset;
   176|           &:hover {
   177|             background-color: ${Colors.Gray100};
   178|             box-shadow: ${Colors.Olive500} 0 -1px 0 inset;
   179|             color: ${Colors.Olive500};
   180|           }
   181|         `}
   182|   &:last-child {
   183|     padding-right: 12px;
   184|   }
   185|   input {
   186|     background-color: transparent;
   187|     font-size: 13px;
   188|     border: 0;
   189|     outline: none;
   190|     padding: 0;
   191|   }
   192|   cursor: ${({$active}) => (!$active ? 'pointer' : 'inherit')};
   193| `;
   194| const RemoveButton = styled.button`
   195|   background-color: transparent;
   196|   border: 0;
   197|   cursor: pointer;
   198|   padding: 0;
   199|   ${IconWrapper} {
   200|     transition: background-color 100ms;
   201|   }
   202|   &:hover ${IconWrapper} {
   203|     background-color: ${Colors.Olive700};
   204|   }
   205| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/launchpad/LoadingOverlay.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-26 ---
     1| import {Group, Spinner} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| export const LoadingOverlay = ({isLoading, message}: {isLoading: boolean; message: string}) => (
     5|   <LoadingOverlayContainer isLoading={isLoading}>
     6|     <Group direction="row" spacing={8} alignItems="center">
     7|       <Spinner purpose="body-text" />
     8|       <div>{message}</div>
     9|     </Group>
    10|   </LoadingOverlayContainer>
    11| );
    12| const LoadingOverlayContainer = styled.div<{isLoading: boolean}>`
    13|   position: absolute;
    14|   left: 0;
    15|   right: 0;
    16|   top: 0;
    17|   bottom: 0;
    18|   background-color: #fff;
    19|   z-index: 20;
    20|   display: ${({isLoading}) => (!isLoading ? 'none' : 'flex')};
    21|   align-items: center;
    22|   justify-content: center;
    23|   opacity: ${({isLoading}) => (isLoading ? '0.7' : '0')};
    24|   transition: opacity 150ms linear;
    25|   transition-delay: 300ms;
    26| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/launchpad/OpSelector.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-22 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {Box, Colors, Popover} from '@dagster-io/ui-components';
     3| import * as React from 'react';
     4| import styled from 'styled-components';
     5| import {filterByQuery} from '../app/GraphQueryImpl';
     6| import {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';
     7| import {ShortcutHandler} from '../app/ShortcutHandler';
     8| import {explodeCompositesInHandleGraph} from '../pipelines/CompositeSupport';
     9| import {GRAPH_EXPLORER_SOLID_HANDLE_FRAGMENT} from '../pipelines/GraphExplorer';
    10| import {GraphQueryInput} from '../ui/GraphQueryInput';
    11| import {isThisThingAJob, useRepository} from '../workspace/WorkspaceContext';
    12| import {repoAddressToSelector} from '../workspace/repoAddressToSelector';
    13| import {RepoAddress} from '../workspace/types';
    14| import {OpSelectorQuery, OpSelectorQueryVariables} from './types/OpSelector.types';
    15| interface IOpSelectorProps {
    16|   pipelineName: string;
    17|   serverProvidedSubsetError?: {message: string};
    18|   value: string[] | null;
    19|   query: string | null;
    20|   onChange: (value: string[] | null, query: string | null) => void;
    21|   flattenGraphs: boolean;
    22|   onFlattenGraphsChange: (v: boolean) => void;

# --- HUNK 2: Lines 126-149 ---
   126|             linkToPreview={{
   127|               repoName: repoAddress.name,
   128|               repoLocation: repoAddress.location,
   129|               pipelineName,
   130|               isJob,
   131|             }}
   132|             flattenGraphsEnabled={flattenGraphsEnabled}
   133|             flattenGraphs={flattenGraphs}
   134|             setFlattenGraphs={() => {
   135|               onFlattenGraphsChange(!flattenGraphs);
   136|             }}
   137|           />
   138|         </ShortcutHandler>
   139|       </Popover>
   140|     </Box>
   141|   );
   142| };
   143| const PopoverErrorWrap = styled.div`
   144|   padding: 4px 8px;
   145|   border-radius: 2px;
   146|   border: 1px solid ${Colors.Red500};
   147|   background: ${Colors.Red200};
   148|   color: ${Colors.Red700};
   149| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/launchpad/RunPreview.tsx
# Total hunks: 9
# ====================================================================
# --- HUNK 1: Lines 1-34 ---
     1| import {gql} from '@apollo/client';
     2| import {Intent} from '@blueprintjs/core';
     3| import {
     4|   Box,
     5|   Button,
     6|   ButtonLink,
     7|   Checkbox,
     8|   Colors,
     9|   Icon,
    10|   SplitPanelContainer,
    11|   Tag,
    12|   Code,
    13|   Tooltip,
    14|   FontFamily,
    15| } from '@dagster-io/ui-components';
    16| import * as React from 'react';
    17| import styled from 'styled-components';
    18| import {showCustomAlert} from '../app/CustomAlertProvider';
    19| import {useConfirmation} from '../app/CustomConfirmationProvider';
    20| import {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';
    21| import {PythonErrorInfo} from '../app/PythonErrorInfo';
    22| import {errorStackToYamlPath} from '../configeditor/ConfigEditorUtils';
    23| import {
    24|   CompositeConfigTypeForSchemaFragment,
    25|   ConfigEditorRunConfigSchemaFragment,
    26| } from '../configeditor/types/ConfigEditorUtils.types';
    27| import {LaunchpadType} from './types';
    28| import {
    29|   RunPreviewValidationErrorsFragment,
    30|   RunPreviewValidationFragment,
    31| } from './types/RunPreview.types';
    32| type ValidationError = RunPreviewValidationErrorsFragment;
    33| type ValidationErrorOrNode = ValidationError | React.ReactNode;
    34| function isValidationError(e: ValidationErrorOrNode): e is ValidationError {

# --- HUNK 2: Lines 105-145 ---
   105|                 ))}
   106|               </ul>
   107|             </>
   108|           )}
   109|           <p>
   110|             Clicking confirm will automatically remove this extra configuration from your run
   111|             config.
   112|           </p>
   113|         </div>
   114|       ),
   115|     });
   116|     onRemoveExtraPaths(extraNodes);
   117|   };
   118|   return (
   119|     <Box flex={{direction: 'row', gap: 8, alignItems: 'center'}}>
   120|       <Button disabled={disabled} onClick={onClick}>
   121|         Remove extra config
   122|       </Button>
   123|       {disabled ? (
   124|         <Box flex={{direction: 'row', gap: 4, alignItems: 'center'}}>
   125|           <Icon name="check_circle" color={Colors.Green500} />
   126|           No extra config to remove
   127|         </Box>
   128|       ) : null}
   129|     </Box>
   130|   );
   131| };
   132| const ScaffoldConfigButton = ({
   133|   onScaffoldMissingConfig,
   134|   missingNodes,
   135|   disabled,
   136| }: {
   137|   missingNodes: string[];
   138|   onScaffoldMissingConfig: () => void;
   139|   disabled: boolean;
   140| }) => {
   141|   const confirm = useConfirmation();
   142|   const confirmationMessage = (
   143|     <div>
   144|       {missingNodes.length > 0 && (
   145|         <>

# --- HUNK 3: Lines 156-230 ---
   156|       <p>
   157|         Clicking confirm will automatically scaffold this missing configuration into your run config
   158|         with default values. You will need to change the values appropriately.
   159|       </p>
   160|     </div>
   161|   );
   162|   const onClick = async () => {
   163|     await confirm({
   164|       title: 'Scaffold missing config',
   165|       description: confirmationMessage,
   166|     });
   167|     onScaffoldMissingConfig();
   168|   };
   169|   return (
   170|     <Box flex={{direction: 'row', gap: 8, alignItems: 'center'}}>
   171|       <Button disabled={disabled} onClick={onClick}>
   172|         Scaffold missing config
   173|       </Button>
   174|       {disabled ? (
   175|         <Box flex={{direction: 'row', gap: 4, alignItems: 'center'}}>
   176|           <Icon name="check_circle" color={Colors.Green500} />
   177|           No missing config
   178|         </Box>
   179|       ) : null}
   180|     </Box>
   181|   );
   182| };
   183| const ExpandDefaultButton = ({
   184|   onExpandDefaults,
   185|   disabled,
   186| }: {
   187|   onExpandDefaults: () => void;
   188|   disabled: boolean;
   189| }) => {
   190|   const confirm = useConfirmation();
   191|   const onClick = async () => {
   192|     await confirm({
   193|       title: 'Scaffold all default config',
   194|       description: (
   195|         <div>
   196|           Clicking confirm will automatically scaffold any unspecified configuration fields into
   197|           your run config with default values. You will need to change the values appropriately.
   198|         </div>
   199|       ),
   200|     });
   201|     onExpandDefaults();
   202|   };
   203|   return (
   204|     <Box flex={{direction: 'row', gap: 8, alignItems: 'center'}}>
   205|       <Button disabled={disabled} onClick={onClick}>
   206|         Scaffold all default config
   207|       </Button>
   208|       {disabled ? (
   209|         <Box flex={{direction: 'row', gap: 4, alignItems: 'center'}}>
   210|           <Icon name="check_circle" color={Colors.Green500} />
   211|           All defaults expanded
   212|         </Box>
   213|       ) : null}
   214|     </Box>
   215|   );
   216| };
   217| interface RunPreviewProps {
   218|   validation: RunPreviewValidationFragment | null;
   219|   document: any | null;
   220|   launchpadType: LaunchpadType;
   221|   runConfigSchema?: ConfigEditorRunConfigSchemaFragment;
   222|   onHighlightPath: (path: string[]) => void;
   223|   onRemoveExtraPaths: (paths: string[]) => void;
   224|   onScaffoldMissingConfig: () => void;
   225|   onExpandDefaults: () => void;
   226|   anyDefaultsToExpand: boolean;
   227|   solidSelection: string[] | null;
   228| }
   229| export const RunPreview = (props: RunPreviewProps) => {
   230|   const {

# --- HUNK 4: Lines 358-398 ---
   358|       .filter(Boolean);
   359|     if (!boxes.length) {
   360|       return <ItemsEmptyNotice>Nothing to display.</ItemsEmptyNotice>;
   361|     }
   362|     return boxes;
   363|   };
   364|   return (
   365|     <SplitPanelContainer
   366|       identifier="run-preview"
   367|       axis="horizontal"
   368|       first={
   369|         <ErrorListContainer>
   370|           <Section>
   371|             <SectionTitle>Errors</SectionTitle>
   372|             {errorsAndPaths.length ? (
   373|               errorsAndPaths.map((item, idx) => (
   374|                 <ErrorRow key={idx} error={item.error} onHighlight={onHighlightPath} />
   375|               ))
   376|             ) : (
   377|               <Box flex={{direction: 'row', gap: 4, alignItems: 'center'}}>
   378|                 <Icon name="check_circle" color={Colors.Green500} />
   379|                 No errors
   380|               </Box>
   381|             )}
   382|           </Section>
   383|           <Section>
   384|             <SectionTitle>Config actions:</SectionTitle>
   385|             <Box flex={{direction: 'column', gap: 8}} padding={{top: 4, bottom: 20}}>
   386|               <ScaffoldConfigButton
   387|                 onScaffoldMissingConfig={onScaffoldMissingConfig}
   388|                 missingNodes={missingNodes}
   389|                 disabled={!missingNodes.length}
   390|               />
   391|               <ExpandDefaultButton
   392|                 onExpandDefaults={onExpandDefaults}
   393|                 disabled={!anyDefaultsToExpand}
   394|               />
   395|               <RemoveExtraConfigButton
   396|                 onRemoveExtraPaths={onRemoveExtraPaths}
   397|                 extraNodes={extraNodes}
   398|                 disabled={!extraNodes.length}

# --- HUNK 5: Lines 423-467 ---
   423|                 </Section>
   424|               )}
   425|             </RuntimeAndResourcesSection>
   426|             <Section>
   427|               <SectionTitle>{launchpadType === 'asset' ? 'Assets (Ops)' : 'Ops'}</SectionTitle>
   428|               <ItemSet>
   429|                 {itemsIn(
   430|                   [hasOps ? 'ops' : 'solids'],
   431|                   (hasOps ? ops?.fields : solids?.fields) || [],
   432|                 )}
   433|               </ItemSet>
   434|             </Section>
   435|             <div style={{height: 50}} />
   436|           </div>
   437|           <div
   438|             style={{
   439|               position: 'absolute',
   440|               top: 0,
   441|               right: 0,
   442|               padding: '12px 15px 0px 10px',
   443|               background: 'rgba(255,255,255,0.7)',
   444|             }}
   445|           >
   446|             <Checkbox
   447|               label="Errors Only"
   448|               checked={errorsOnly}
   449|               onChange={() => setErrorsOnly(!errorsOnly)}
   450|             />
   451|           </div>
   452|         </>
   453|       }
   454|     />
   455|   );
   456| };
   457| export const RUN_PREVIEW_VALIDATION_FRAGMENT = gql`
   458|   fragment RunPreviewValidationFragment on PipelineConfigValidationResult {
   459|     ... on RunConfigValidationInvalid {
   460|       errors {
   461|         ...RunPreviewValidationErrors
   462|       }
   463|     }
   464|     ... on PipelineNotFoundError {
   465|       message
   466|     }
   467|     ... on InvalidSubsetError {

# --- HUNK 6: Lines 491-531 ---
   491|     ... on MissingFieldConfigError {
   492|       field {
   493|         name
   494|       }
   495|     }
   496|     ... on MissingFieldsConfigError {
   497|       fields {
   498|         name
   499|       }
   500|     }
   501|     ... on FieldNotDefinedConfigError {
   502|       fieldName
   503|     }
   504|     ... on FieldsNotDefinedConfigError {
   505|       fieldNames
   506|     }
   507|   }
   508|   ${PYTHON_ERROR_FRAGMENT}
   509| `;
   510| const SectionTitle = styled.div`
   511|   color: ${Colors.Gray400};
   512|   text-transform: uppercase;
   513|   font-size: 12px;
   514|   margin-bottom: 8px;
   515| `;
   516| const Section = styled.div`
   517|   margin-top: 14px;
   518|   margin-left: 10px;
   519| `;
   520| const ItemSet = styled.div`
   521|   display: flex;
   522|   flex-direction: row;
   523|   flex-wrap: wrap;
   524|   gap: 4px;
   525| `;
   526| const ItemsEmptyNotice = styled.div`
   527|   font-size: 13px;
   528|   padding-top: 7px;
   529|   padding-bottom: 7px;
   530| `;
   531| const ErrorListContainer = styled.div`

# --- HUNK 7: Lines 536-612 ---
   536| const ErrorRowContainer = styled.div<{hoverable: boolean}>`
   537|   text-align: left;
   538|   font-size: 13px;
   539|   white-space: pre-wrap;
   540|   word-break: break-word;
   541|   font-family: ${FontFamily.monospace};
   542|   cursor: pointer;
   543|   display: flex;
   544|   flex-direction: row;
   545|   align-items: flex-start;
   546|   border-bottom: 1px solid #ccc;
   547|   padding: 8px;
   548|   margin: 8px 12px 0 -8px;
   549|   &:last-child {
   550|     border-bottom: 0;
   551|     margin-bottom: 15px;
   552|   }
   553|   ${({hoverable}) =>
   554|     hoverable &&
   555|     `&:hover {
   556|       background: ${Colors.Gray50};
   557|     }
   558|   `}
   559| `;
   560| const RuntimeAndResourcesSection = styled.div`
   561|   display: flex;
   562|   gap: 12px;
   563|   @media (max-width: 800px) {
   564|     flex-direction: column;
   565|   }
   566| `;
   567| const ErrorRow = ({
   568|   error,
   569|   onHighlight,
   570| }: {
   571|   error: ValidationError | React.ReactNode;
   572|   onHighlight: (path: string[]) => void;
   573| }) => {
   574|   let message: React.ReactNode = null;
   575|   let target: ValidationError | null = null;
   576|   if (isValidationError(error)) {
   577|     message = error.message;
   578|     target = error;
   579|   } else {
   580|     message = error;
   581|   }
   582|   let displayed = message;
   583|   if (typeof message === 'string' && message.length > 400) {
   584|     displayed = truncateErrorMessage(message);
   585|   }
   586|   return (
   587|     <ErrorRowContainer
   588|       hoverable={!!target}
   589|       onClick={() => target && onHighlight(errorStackToYamlPath(target.stack.entries))}
   590|     >
   591|       <div style={{paddingRight: 4}}>
   592|         <Icon name="error" color={Colors.Red500} />
   593|       </div>
   594|       <div>
   595|         {displayed}
   596|         {displayed !== message && (
   597|           <>
   598|             &nbsp;
   599|             <ButtonLink
   600|               onClick={() =>
   601|                 showCustomAlert({
   602|                   body: <div style={{whiteSpace: 'pre-wrap'}}>{message}</div>,
   603|                 })
   604|               }
   605|             >
   606|               View all
   607|             </ButtonLink>
   608|           </>
   609|         )}
   610|       </div>
   611|     </ErrorRowContainer>
   612|   );


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/launchpad/SessionSettingsBar.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-12 ---
     1| import {Colors} from '@dagster-io/ui-components';
     2| import styled from 'styled-components';
     3| export const SessionSettingsBar = styled.div`
     4|   color: white;
     5|   display: flex;
     6|   position: relative;
     7|   border-bottom: 1px solid ${Colors.Gray200};
     8|   background: ${Colors.White};
     9|   align-items: center;
    10|   height: 47px;
    11|   padding: 8px 10px;
    12| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/metadata/MetadataEntry.tsx
# Total hunks: 5
# ====================================================================
# --- HUNK 1: Lines 1-35 ---
     1| import {gql} from '@apollo/client';
     2| import {
     3|   Box,
     4|   Button,
     5|   Colors,
     6|   DialogFooter,
     7|   Dialog,
     8|   Group,
     9|   Icon,
    10|   Tooltip,
    11|   FontFamily,
    12|   tryPrettyPrintJSON,
    13|   Table,
    14|   DialogBody,
    15|   CaptionMono,
    16| } from '@dagster-io/ui-components';
    17| import * as React from 'react';
    18| import {Link} from 'react-router-dom';
    19| import styled from 'styled-components';
    20| import {copyValue} from '../app/DomUtils';
    21| import {assertUnreachable} from '../app/Util';
    22| import {displayNameForAssetKey} from '../asset-graph/Utils';
    23| import {assetDetailsPathForKey} from '../assets/assetDetailsPathForKey';
    24| import {TableMetadataEntry} from '../graphql/types';
    25| import {Markdown} from '../ui/Markdown';
    26| import {NotebookButton} from '../ui/NotebookButton';
    27| import {DUNDER_REPO_NAME, buildRepoAddress} from '../workspace/buildRepoAddress';
    28| import {workspacePathFromAddress} from '../workspace/workspacePath';
    29| import {TableSchema, TABLE_SCHEMA_FRAGMENT} from './TableSchema';
    30| import {MetadataEntryFragment} from './types/MetadataEntry.types';
    31| export const LogRowStructuredContentTable = ({
    32|   rows,
    33|   styles,
    34| }: {
    35|   rows: {label: string; item: JSX.Element}[];

# --- HUNK 2: Lines 74-163 ---
    74|     />
    75|   );
    76| };
    77| export const MetadataEntry = ({
    78|   entry,
    79|   expandSmallValues,
    80|   repoLocation,
    81| }: {
    82|   entry: MetadataEntryFragment;
    83|   expandSmallValues?: boolean;
    84|   repoLocation?: string;
    85| }) => {
    86|   switch (entry.__typename) {
    87|     case 'PathMetadataEntry':
    88|       return (
    89|         <Group direction="row" spacing={8} alignItems="center">
    90|           <MetadataEntryAction title="Copy to clipboard" onClick={(e) => copyValue(e, entry.path)}>
    91|             {entry.path}
    92|           </MetadataEntryAction>
    93|           <IconButton onClick={(e) => copyValue(e, entry.path)}>
    94|             <Icon name="assignment" color={Colors.Gray500} />
    95|           </IconButton>
    96|         </Group>
    97|       );
    98|     case 'JsonMetadataEntry':
    99|       return expandSmallValues && entry.jsonString.length < 1000 ? (
   100|         <div style={{whiteSpace: 'pre-wrap'}}>{tryPrettyPrintJSON(entry.jsonString)}</div>
   101|       ) : (
   102|         <MetadataEntryModalAction
   103|           label={entry.label}
   104|           copyContent={() => entry.jsonString}
   105|           content={() => (
   106|             <Box
   107|               background={Colors.Gray100}
   108|               margin={{bottom: 12}}
   109|               padding={24}
   110|               border="bottom"
   111|               style={{whiteSpace: 'pre-wrap', fontFamily: FontFamily.monospace, overflow: 'auto'}}
   112|             >
   113|               {tryPrettyPrintJSON(entry.jsonString)}
   114|             </Box>
   115|           )}
   116|         >
   117|           [Show JSON]
   118|         </MetadataEntryModalAction>
   119|       );
   120|     case 'UrlMetadataEntry':
   121|       return (
   122|         <Group direction="row" spacing={8} alignItems="center">
   123|           <MetadataEntryAction href={entry.url} title="Open in a new tab" target="_blank">
   124|             {entry.url}
   125|           </MetadataEntryAction>
   126|           <a href={entry.url} target="_blank" rel="noreferrer">
   127|             <Icon name="link" color={Colors.Gray500} />
   128|           </a>
   129|         </Group>
   130|       );
   131|     case 'TextMetadataEntry':
   132|       return <>{entry.text}</>;
   133|     case 'MarkdownMetadataEntry':
   134|       return expandSmallValues && entry.mdStr.length < 1000 ? (
   135|         <Markdown>{entry.mdStr}</Markdown>
   136|       ) : (
   137|         <MetadataEntryModalAction
   138|           label={entry.label}
   139|           copyContent={() => entry.mdStr}
   140|           content={() => (
   141|             <Box
   142|               padding={{vertical: 16, horizontal: 20}}
   143|               background={Colors.White}
   144|               style={{overflow: 'auto'}}
   145|               margin={{bottom: 12}}
   146|             >
   147|               <Markdown>{entry.mdStr}</Markdown>
   148|             </Box>
   149|           )}
   150|         >
   151|           [Show Markdown]
   152|         </MetadataEntryModalAction>
   153|       );
   154|     case 'PythonArtifactMetadataEntry':
   155|       return (
   156|         <PythonArtifactLink
   157|           name={entry.name}
   158|           module={entry.module}
   159|           description={entry.description || ''}
   160|         />
   161|       );
   162|     case 'FloatMetadataEntry':
   163|       return <>{entry.floatValue}</>;

# --- HUNK 3: Lines 172-249 ---
   172|     case 'AssetMetadataEntry':
   173|       return (
   174|         <MetadataEntryLink to={assetDetailsPathForKey(entry.assetKey)}>
   175|           {displayNameForAssetKey(entry.assetKey)}
   176|         </MetadataEntryLink>
   177|       );
   178|     case 'JobMetadataEntry':
   179|       const repositoryName = entry.repositoryName || DUNDER_REPO_NAME;
   180|       const workspacePath = workspacePathFromAddress(
   181|         buildRepoAddress(repositoryName, entry.locationName),
   182|         `/jobs/${entry.jobName}`,
   183|       );
   184|       return (
   185|         <Box
   186|           flex={{
   187|             direction: 'row',
   188|             gap: 8,
   189|           }}
   190|           style={{maxWidth: '100%'}}
   191|         >
   192|           <Icon name="job" color={Colors.Gray400} />
   193|           <MetadataEntryLink to={workspacePath}>{entry.jobName}</MetadataEntryLink>
   194|         </Box>
   195|       );
   196|     case 'TableMetadataEntry':
   197|       return <TableMetadataEntryComponent entry={entry} />;
   198|     case 'TableSchemaMetadataEntry':
   199|       return expandSmallValues && entry.schema.columns.length < 5 ? (
   200|         <TableSchema schema={entry.schema} />
   201|       ) : (
   202|         <MetadataEntryModalAction
   203|           label={entry.label}
   204|           copyContent={() => JSON.stringify(entry.schema, null, 2)}
   205|           content={() => (
   206|             <Box
   207|               padding={{vertical: 16, horizontal: 20}}
   208|               background={Colors.White}
   209|               style={{overflow: 'auto'}}
   210|               margin={{bottom: 12}}
   211|             >
   212|               <TableSchema schema={entry.schema} />
   213|             </Box>
   214|           )}
   215|         >
   216|           [Show Table Schema]
   217|         </MetadataEntryModalAction>
   218|       );
   219|     case 'NotebookMetadataEntry':
   220|       if (repoLocation) {
   221|         return <NotebookButton path={entry.path} repoLocation={repoLocation} />;
   222|       }
   223|       return (
   224|         <Group direction="row" spacing={8} alignItems="center">
   225|           <MetadataEntryAction title="Copy to clipboard" onClick={(e) => copyValue(e, entry.path)}>
   226|             {entry.path}
   227|           </MetadataEntryAction>
   228|           <IconButton onClick={(e) => copyValue(e, entry.path)}>
   229|             <Icon name="assignment" color={Colors.Gray500} />
   230|           </IconButton>
   231|         </Group>
   232|       );
   233|     default:
   234|       return assertUnreachable(entry);
   235|   }
   236| };
   237| export const METADATA_ENTRY_FRAGMENT = gql`
   238|   fragment MetadataEntryFragment on MetadataEntry {
   239|     label
   240|     description
   241|     ... on PathMetadataEntry {
   242|       path
   243|     }
   244|     ... on NotebookMetadataEntry {
   245|       path
   246|     }
   247|     ... on JsonMetadataEntry {
   248|       jsonString
   249|     }

# --- HUNK 4: Lines 362-402 ---
   362|     </>
   363|   );
   364| };
   365| export const TableMetadataEntryComponent = ({entry}: {entry: TableMetadataEntry}) => {
   366|   const [showSchema, setShowSchema] = React.useState(false);
   367|   const schema = entry.table.schema;
   368|   const invalidRecords: string[] = [];
   369|   const records = entry.table.records
   370|     .map((record) => {
   371|       try {
   372|         return JSON.parse(record);
   373|       } catch (e) {
   374|         invalidRecords.push(record);
   375|         return null;
   376|       }
   377|     })
   378|     .filter((record): record is Record<string, any> => record !== null);
   379|   return (
   380|     <Box flex={{direction: 'column', gap: 8}}>
   381|       <MetadataEntryAction onClick={() => setShowSchema(true)}>Show schema</MetadataEntryAction>
   382|       <Table style={{borderRight: `1px solid ${Colors.KeylineGray}`}}>
   383|         <thead>
   384|           <tr>
   385|             {schema.columns.map((column) => (
   386|               <th key={column.name}>{column.name}</th>
   387|             ))}
   388|           </tr>
   389|         </thead>
   390|         <tbody>
   391|           {records.map((record, idx) => (
   392|             <tr key={idx}>
   393|               {schema.columns.map((column) => (
   394|                 <td key={column.name}>{record[column.name]?.toString()}</td>
   395|               ))}
   396|             </tr>
   397|           ))}
   398|           {invalidRecords.map((record, ii) => (
   399|             <tr key={`invalid-${ii}`}>
   400|               <td colSpan={schema.columns.length}>
   401|                 <Box flex={{direction: 'row', gap: 4, alignItems: 'center'}}>
   402|                   <Icon name="warning" />

# --- HUNK 5: Lines 437-470 ---
   437|   );
   438| };
   439| const MetadataEntryAction = styled.a`
   440|   text-decoration: underline;
   441|   color: inherit;
   442|   &:hover {
   443|     color: inherit;
   444|   }
   445| `;
   446| export const MetadataEntryLink = styled(Link)`
   447|   text-decoration: underline;
   448|   color: inherit;
   449|   &:hover {
   450|     color: inherit;
   451|   }
   452| `;
   453| const StructuredContentTable = styled.table`
   454|   width: 100%;
   455|   padding: 0;
   456|   margin-top: 4px;
   457|   border-top: 1px solid ${Colors.KeylineGray};
   458|   border-left: 1px solid ${Colors.KeylineGray};
   459|   background: ${Colors.Gray50};
   460|   td:first-child {
   461|     color: ${Colors.Gray400};
   462|   }
   463|   &&& tbody > tr > td {
   464|     padding: 4px 8px;
   465|     border-bottom: 1px solid ${Colors.KeylineGray};
   466|     border-right: 1px solid ${Colors.KeylineGray};
   467|     vertical-align: top;
   468|     box-shadow: none !important;
   469|   }
   470| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/metadata/TableSchema.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-22 ---
     1| import {gql} from '@apollo/client';
     2| import {Box, Colors, Tag, Tooltip} from '@dagster-io/ui-components';
     3| import {Spacing} from '@dagster-io/ui-components/src/components/types';
     4| import * as React from 'react';
     5| import styled from 'styled-components';
     6| import {TableSchemaFragment, ConstraintsForTableColumnFragment} from './types/TableSchema.types';
     7| type ITableSchema = TableSchemaFragment;
     8| type ColumnConstraints = ConstraintsForTableColumnFragment;
     9| const MAX_CONSTRAINT_TAG_CHARS = 30;
    10| interface ITableSchemaProps {
    11|   schema: ITableSchema;
    12|   itemHorizontalPadding?: Spacing;
    13| }
    14| export const TableSchema = ({schema, itemHorizontalPadding}: ITableSchemaProps) => {
    15|   const multiColumnConstraints = schema.constraints?.other || [];
    16|   return (
    17|     <div>
    18|       {multiColumnConstraints.length > 0 && (
    19|         <Box
    20|           flex={{
    21|             wrap: 'wrap',
    22|             gap: 4,

# --- HUNK 2: Lines 61-101 ---
    61|   return (
    62|     <div className={className}>
    63|       <Box flex={{wrap: 'wrap', gap: 4, alignItems: 'center'}}>
    64|         <ColumnName>{name}</ColumnName>
    65|         <TypeTag type={type} />
    66|         {!constraints.nullable && NonNullableTag}
    67|         {constraints.unique && UniqueTag}
    68|         {constraints.other.map((constraint, i) => (
    69|           <ArbitraryConstraintTag key={i} constraint={constraint} />
    70|         ))}
    71|       </Box>
    72|       {description && <Box>{description}</Box>}
    73|     </div>
    74|   );
    75| };
    76| const ColumnItem = styled(_ColumnItem)`
    77|   display: flex;
    78|   flex-direction: column;
    79|   gap: 4px;
    80|   padding: 12px ${(props) => props.horizontalPadding}px;
    81|   border-top: 1px solid ${Colors.KeylineGray};
    82|   :first-child {
    83|     border-top: none;
    84|   }
    85|   font-size: 12px;
    86| `;
    87| const ColumnName = styled.div`
    88|   font-weight: 600;
    89|   padding-right: 4px;
    90| `;
    91| const TypeTag = ({type}: {type: string}) => <Tag intent="none">{type}</Tag>;
    92| const NonNullableTag = <Tag intent="primary">non-nullable</Tag>;
    93| const UniqueTag = <Tag intent="primary">unique</Tag>;
    94| const ArbitraryConstraintTag = ({constraint}: {constraint: string}) => {
    95|   if (constraint.length > MAX_CONSTRAINT_TAG_CHARS) {
    96|     const content = constraint.substring(0, MAX_CONSTRAINT_TAG_CHARS - 3) + '...';
    97|     return (
    98|       <Tooltip content={<div>{constraint}</div>}>
    99|         <Tag intent="primary">{content}</Tag>
   100|       </Tooltip>
   101|     );


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/nav/DeploymentStatusIcon.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-35 ---
     1| import {Box, Colors, Icon, Spinner, Tooltip} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import {DeploymentStatusContext} from '../instance/DeploymentStatusProvider';
     4| import {WarningTooltip} from './WarningTooltip';
     5| export const DeploymentStatusIcon = React.memo(() => {
     6|   return <CombinedStatusIcon />;
     7| });
     8| const CombinedStatusIcon = React.memo(() => {
     9|   const {codeLocations, daemons} = React.useContext(DeploymentStatusContext);
    10|   if (codeLocations?.type === 'spinner') {
    11|     return (
    12|       <Tooltip content={codeLocations.content} placement="bottom">
    13|         <Spinner purpose="body-text" fillColor={Colors.Gray300} />
    14|       </Tooltip>
    15|     );
    16|   }
    17|   const anyWarning = daemons?.type === 'warning' || codeLocations?.type === 'warning';
    18|   if (anyWarning) {
    19|     return (
    20|       <WarningTooltip
    21|         content={
    22|           <Box flex={{direction: 'column', gap: 4}}>
    23|             {daemons?.content}
    24|             {codeLocations?.content}
    25|           </Box>
    26|         }
    27|         position="bottom"
    28|         modifiers={{offset: {enabled: true, options: {offset: [0, 28]}}}}
    29|       >
    30|         <Icon name="warning" color={Colors.Yellow500} />
    31|       </WarningTooltip>
    32|     );
    33|   }
    34|   return null;
    35| });


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/nav/InstanceWarningIcon.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-19 ---
     1| import {Colors, Icon} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import {DeploymentStatusContext} from '../instance/DeploymentStatusProvider';
     4| import {WarningTooltip} from './WarningTooltip';
     5| export const InstanceWarningIcon = React.memo(() => {
     6|   const {daemons} = React.useContext(DeploymentStatusContext);
     7|   if (!daemons) {
     8|     return null;
     9|   }
    10|   return (
    11|     <WarningTooltip
    12|       content={daemons.content}
    13|       position="bottom"
    14|       modifiers={{offset: {enabled: true, options: {offset: [0, 28]}}}}
    15|     >
    16|       <Icon name="warning" color={Colors.Yellow500} />
    17|     </WarningTooltip>
    18|   );
    19| });


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/nav/JobMetadata.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-29 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {
     3|   Box,
     4|   Button,
     5|   ButtonLink,
     6|   Colors,
     7|   DialogFooter,
     8|   Dialog,
     9|   Tag,
    10| } from '@dagster-io/ui-components';
    11| import uniq from 'lodash/uniq';
    12| import * as React from 'react';
    13| import {Link} from 'react-router-dom';
    14| import {tokenForAssetKey} from '../asset-graph/Utils';
    15| import {AutomaterializeDaemonStatusTag} from '../assets/AutomaterializeDaemonStatusTag';
    16| import {DagsterTag} from '../runs/RunTag';
    17| import {RUN_TIME_FRAGMENT} from '../runs/RunUtils';
    18| import {SCHEDULE_SWITCH_FRAGMENT} from '../schedules/ScheduleSwitch';
    19| import {SENSOR_SWITCH_FRAGMENT} from '../sensors/SensorSwitch';
    20| import {repoAddressAsTag} from '../workspace/repoAddressAsString';
    21| import {RepoAddress} from '../workspace/types';
    22| import {LatestRunTag} from './LatestRunTag';
    23| import {ScheduleOrSensorTag} from './ScheduleOrSensorTag';
    24| import {
    25|   JobMetadataAssetNodeFragment,
    26|   JobMetadataFragment,
    27|   JobMetadataQuery,
    28|   JobMetadataQueryVariables,
    29|   RunMetadataFragment,

# --- HUNK 2: Lines 123-163 ---
   123|     metadata.runsForAssetScan.flatMap((r) => r.assets.map((a) => tokenForAssetKey(a.key))),
   124|   );
   125| }
   126| const RelatedAssetsTag = ({relatedAssets}: {relatedAssets: string[]}) => {
   127|   const [open, setOpen] = React.useState(false);
   128|   if (relatedAssets.length === 0) {
   129|     return null;
   130|   }
   131|   if (relatedAssets.length === 1) {
   132|     const key = relatedAssets[0];
   133|     return (
   134|       <Tag icon="asset">
   135|         Asset: <Link to={`/assets/${key}`}>{key}</Link>
   136|       </Tag>
   137|     );
   138|   }
   139|   return (
   140|     <>
   141|       <Tag icon="asset">
   142|         <ButtonLink
   143|           color={Colors.Link}
   144|           onClick={() => setOpen(true)}
   145|         >{`View ${relatedAssets.length} assets`}</ButtonLink>
   146|       </Tag>
   147|       <Dialog
   148|         title="Related assets"
   149|         canOutsideClickClose
   150|         canEscapeKeyClose
   151|         isOpen={open}
   152|         onClose={() => setOpen(false)}
   153|         style={{maxWidth: '80%', minWidth: '500px', width: 'auto'}}
   154|       >
   155|         {relatedAssets.map((key, ii) => (
   156|           <Box
   157|             key={key}
   158|             padding={{vertical: 12, horizontal: 20}}
   159|             border={ii < relatedAssets.length - 1 ? 'bottom' : null}
   160|           >
   161|             <Link key={key} to={`/assets/${key}`} style={{wordBreak: 'break-word'}}>
   162|               {key}
   163|             </Link>


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/nav/LeftNav.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-35 ---
     1| import {Colors} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| import {LayoutContext} from '../app/LayoutProvider';
     5| import {LeftNavRepositorySection} from './LeftNavRepositorySection';
     6| export const LeftNav = () => {
     7|   const {nav} = React.useContext(LayoutContext);
     8|   return (
     9|     <LeftNavContainer $open={nav.isOpen} $smallScreen={nav.isSmallScreen}>
    10|       <LeftNavRepositorySection />
    11|     </LeftNavContainer>
    12|   );
    13| };
    14| export const LEFT_NAV_WIDTH = 332;
    15| const LeftNavContainer = styled.div<{$open: boolean; $smallScreen: boolean}>`
    16|   position: fixed;
    17|   z-index: 2;
    18|   top: 64px;
    19|   bottom: 0;
    20|   left: 0;
    21|   width: ${LEFT_NAV_WIDTH}px;
    22|   display: ${({$open, $smallScreen}) => ($open || $smallScreen ? 'flex' : 'none')};
    23|   flex-shrink: 0;
    24|   flex-direction: column;
    25|   justify-content: start;
    26|   background: ${Colors.Gray100};
    27|   box-shadow: 1px 0px 0px ${Colors.KeylineGray};
    28|   ${(p) =>
    29|     p.$smallScreen
    30|       ? `
    31|         transform: translateX(${p.$open ? '0' : `-${LEFT_NAV_WIDTH}px`});
    32|         transition: transform 150ms ease-in-out;
    33|       `
    34|       : ``}
    35| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/nav/LeftNavItem.tsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {Colors, Icon, Tooltip} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import {Link} from 'react-router-dom';
     4| import styled from 'styled-components';
     5| import {InstigationStatus} from '../graphql/types';
     6| import {humanCronString} from '../schedules/humanCronString';
     7| import {workspacePathFromAddress} from '../workspace/workspacePath';
     8| import {LeftNavItemType} from './LeftNavItemType';
     9| import {Item} from './RepositoryContentList';
    10| import {ScheduleAndSensorDialog} from './ScheduleAndSensorDialog';
    11| interface LeftNavItemProps {
    12|   active: boolean;
    13|   item: LeftNavItemType;
    14| }
    15| export const LeftNavItem = React.forwardRef(
    16|   (props: LeftNavItemProps, ref: React.ForwardedRef<HTMLDivElement>) => {
    17|     const {active, item} = props;
    18|     const {label, leftIcon, path, repoAddress, schedules, sensors} = item;
    19|     const [showDialog, setShowDialog] = React.useState(false);
    20|     const rightIcon = () => {
    21|       const scheduleCount = schedules.length;

# --- HUNK 2: Lines 46-122 ---
    46|               <div>
    47|                 Schedule:{' '}
    48|                 <strong>{humanCronString(cronSchedule, executionTimezone || 'UTC')}</strong>
    49|               </div>
    50|             );
    51|           }
    52|           return `${scheduleCount} schedules`;
    53|         }
    54|         return sensorCount === 1 ? (
    55|           <div>
    56|             Sensor: <strong>{sensors[0]!.name}</strong>
    57|           </div>
    58|         ) : (
    59|           `${sensorCount} sensors`
    60|         );
    61|       };
    62|       const link = () => {
    63|         const icon = (
    64|           <Icon
    65|             name={whichIcon}
    66|             color={status() === InstigationStatus.RUNNING ? Colors.Green500 : Colors.Gray600}
    67|           />
    68|         );
    69|         if (needsDialog) {
    70|           return (
    71|             <SensorScheduleDialogButton onClick={() => setShowDialog(true)}>
    72|               {icon}
    73|             </SensorScheduleDialogButton>
    74|           );
    75|         }
    76|         const path = scheduleCount
    77|           ? `/schedules/${schedules[0]!.name}`
    78|           : sensorCount
    79|           ? `/sensors/${sensors[0]!.name}`
    80|           : null;
    81|         return path ? <Link to={workspacePathFromAddress(repoAddress, path)}>{icon}</Link> : null;
    82|       };
    83|       return (
    84|         <>
    85|           <IconWithTooltip content={tooltipContent()}>{link()}</IconWithTooltip>
    86|           {needsDialog ? (
    87|             <ScheduleAndSensorDialog
    88|               isOpen={showDialog}
    89|               onClose={() => setShowDialog(false)}
    90|               repoAddress={repoAddress}
    91|               schedules={schedules}
    92|               sensors={sensors}
    93|               showSwitch
    94|             />
    95|           ) : null}
    96|         </>
    97|       );
    98|     };
    99|     return (
   100|       <ItemContainer ref={ref}>
   101|         <Item $active={active} to={path}>
   102|           <Icon name={leftIcon} color={active ? Colors.Blue700 : Colors.Dark} />
   103|           {label}
   104|         </Item>
   105|         {rightIcon()}
   106|       </ItemContainer>
   107|     );
   108|   },
   109| );
   110| const SensorScheduleDialogButton = styled.button`
   111|   background: transparent;
   112|   padding: 0;
   113|   margin: 0;
   114|   border: 0;
   115|   cursor: pointer;
   116|   :focus,
   117|   :active,
   118|   :hover {
   119|     outline: none;
   120|   }
   121| `;
   122| const IconWithTooltip = styled(Tooltip)`


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/nav/LeftNavRepositorySection.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {Body, Box, Colors} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| import {SectionedLeftNav} from '../ui/SectionedLeftNav';
     5| import {DagsterRepoOption, WorkspaceContext} from '../workspace/WorkspaceContext';
     6| import {RepoAddress} from '../workspace/types';
     7| import {RepoNavItem} from './RepoNavItem';
     8| import {RepositoryLocationStateObserver} from './RepositoryLocationStateObserver';
     9| const LoadedRepositorySection = ({
    10|   allRepos,
    11|   visibleRepos,
    12|   toggleVisible,
    13| }: {
    14|   allRepos: DagsterRepoOption[];
    15|   visibleRepos: DagsterRepoOption[];
    16|   toggleVisible: (repoAddresses: RepoAddress[]) => void;
    17| }) => {
    18|   const listContent = () => {
    19|     if (visibleRepos.length) {
    20|       return (
    21|         <div style={{overflow: 'hidden'}}>

# --- HUNK 2: Lines 34-84 ---
    34|       );
    35|     }
    36|     return (
    37|       <EmptyState>
    38|         <Box flex={{direction: 'column', gap: 8}} padding={{top: 12}}>
    39|           <span style={{fontSize: '16px', fontWeight: 500}}>No definitions</span>
    40|           <Body>When you add a code location, your definitions will appear here</Body>
    41|         </Box>
    42|       </EmptyState>
    43|     );
    44|   };
    45|   return (
    46|     <Container>
    47|       <ListContainer>{listContent()}</ListContainer>
    48|       <RepositoryLocationStateObserver />
    49|       <RepoNavItem allRepos={allRepos} selected={visibleRepos} onToggle={toggleVisible} />
    50|     </Container>
    51|   );
    52| };
    53| const Container = styled.div`
    54|   background: ${Colors.Gray100};
    55|   display: flex;
    56|   flex: 1;
    57|   overflow: none;
    58|   flex-direction: column;
    59|   min-height: 0;
    60| `;
    61| const ListContainer = styled.div`
    62|   display: flex;
    63|   flex: 1;
    64|   flex-direction: column;
    65|   min-height: 0;
    66| `;
    67| const EmptyState = styled.div`
    68|   color: ${Colors.Gray400};
    69|   line-height: 20px;
    70|   padding: 6px 24px 0;
    71| `;
    72| export const LeftNavRepositorySection = React.memo(() => {
    73|   const {allRepos, loading, visibleRepos, toggleVisible} = React.useContext(WorkspaceContext);
    74|   if (loading) {
    75|     return <div style={{flex: 1}} />;
    76|   }
    77|   return (
    78|     <LoadedRepositorySection
    79|       allRepos={allRepos}
    80|       visibleRepos={visibleRepos}
    81|       toggleVisible={toggleVisible}
    82|     />
    83|   );
    84| });


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/nav/RepoNavItem.tsx
# Total hunks: 4
# ====================================================================
# --- HUNK 1: Lines 1-69 ---
     1| import {
     2|   Box,
     3|   Button,
     4|   Colors,
     5|   DialogFooter,
     6|   DialogHeader,
     7|   Dialog,
     8|   Group,
     9|   Icon,
    10|   IconWrapper,
    11|   Spinner,
    12|   Tooltip,
    13| } from '@dagster-io/ui-components';
    14| import * as React from 'react';
    15| import {Link} from 'react-router-dom';
    16| import styled from 'styled-components';
    17| import {ShortcutHandler} from '../app/ShortcutHandler';
    18| import {buildRepoAddress, DUNDER_REPO_NAME} from '../workspace/buildRepoAddress';
    19| import {repoAddressAsHumanString} from '../workspace/repoAddressAsString';
    20| import {RepoAddress} from '../workspace/types';
    21| import {workspacePathFromAddress} from '../workspace/workspacePath';
    22| import {
    23|   NO_RELOAD_PERMISSION_TEXT,
    24|   ReloadRepositoryLocationButton,
    25| } from './ReloadRepositoryLocationButton';
    26| import {RepoSelector, RepoSelectorOption} from './RepoSelector';
    27| interface Props {
    28|   allRepos: RepoSelectorOption[];
    29|   selected: RepoSelectorOption[];
    30|   onToggle: (repoAddresses: RepoAddress[]) => void;
    31| }
    32| export const RepoNavItem = (props: Props) => {
    33|   const {allRepos, selected, onToggle} = props;
    34|   const [open, setOpen] = React.useState(false);
    35|   const summary = () => {
    36|     if (allRepos.length === 0) {
    37|       return <span style={{color: Colors.Gray700}}>No definitions</span>;
    38|     }
    39|     if (allRepos.length === 1) {
    40|       return <SingleRepoSummary repo={allRepos[0]!} onlyRepo />;
    41|     }
    42|     if (selected.length === 1) {
    43|       const selectedRepo = selected[0]!;
    44|       return <SingleRepoSummary repo={selectedRepo} onlyRepo={false} />;
    45|     }
    46|     return <span>{`${selected.length} of ${allRepos.length} shown`}</span>;
    47|   };
    48|   return (
    49|     <Box background={Colors.Gray50} padding={{vertical: 12, left: 24, right: 20}} border="top">
    50|       <Box flex={{justifyContent: 'space-between', alignItems: 'center'}}>
    51|         <Box flex={{direction: 'row', alignItems: 'center', gap: 8}}>
    52|           <Icon name="folder" />
    53|           <SummaryText>{summary()}</SummaryText>
    54|         </Box>
    55|         {allRepos.length > 1 ? (
    56|           <>
    57|             <Dialog
    58|               canOutsideClickClose
    59|               canEscapeKeyClose
    60|               isOpen={open}
    61|               style={{width: 'auto'}}
    62|               onClose={() => setOpen(false)}
    63|             >
    64|               <DialogHeader icon="repo" label="Definitions" />
    65|               <RepoSelector
    66|                 options={allRepos}
    67|                 onBrowse={() => setOpen(false)}
    68|                 onToggle={onToggle}
    69|                 selected={selected}

# --- HUNK 2: Lines 117-198 ---
   117|                     <Reloading>
   118|                       {reloading ? (
   119|                         'Reloading'
   120|                       ) : (
   121|                         <>
   122|                           Reload location <strong>{codeLocation}</strong>
   123|                         </>
   124|                       )}
   125|                     </Reloading>
   126|                   ) : (
   127|                     NO_RELOAD_PERMISSION_TEXT
   128|                   )
   129|                 }
   130|               >
   131|                 {reloading ? (
   132|                   <Spinner purpose="body-text" />
   133|                 ) : (
   134|                   <ReloadButton disabled={!hasReloadPermission} onClick={tryReload}>
   135|                     <Icon
   136|                       name="refresh"
   137|                       color={hasReloadPermission ? Colors.Gray900 : Colors.Gray400}
   138|                     />
   139|                   </ReloadButton>
   140|                 )}
   141|               </ReloadTooltip>
   142|             </ShortcutHandler>
   143|           );
   144|         }}
   145|       />
   146|     </Group>
   147|   );
   148| };
   149| const SummaryText = styled.div`
   150|   user-select: none;
   151|   /* Line-height preserves container height even when no button is visible. */
   152|   line-height: 32px;
   153| `;
   154| const SingleRepoNameLink = styled(Link)<{$onlyRepo: boolean}>`
   155|   color: ${Colors.Gray900};
   156|   display: block;
   157|   max-width: ${({$onlyRepo}) => ($onlyRepo ? '248px' : '192px')};
   158|   overflow-x: hidden;
   159|   text-overflow: ellipsis;
   160|   transition: color 100ms linear;
   161|   && {
   162|     color: ${Colors.Gray900};
   163|   }
   164|   &&:hover,
   165|   &&:active {
   166|     color: ${Colors.Gray800};
   167|     text-decoration: none;
   168|   }
   169| `;
   170| const ReloadTooltip = styled(Tooltip)`
   171|   && {
   172|     display: block;
   173|   }
   174| `;
   175| const ReloadButton = styled.button`
   176|   background-color: transparent;
   177|   border: none;
   178|   cursor: pointer;
   179|   display: block;
   180|   font-size: 12px;
   181|   padding: 8px;
   182|   margin: -8px;
   183|   :focus:not(:focus-visible) {
   184|     outline: none;
   185|   }
   186|   & ${IconWrapper} {
   187|     transition: color 0.1s ease-in-out;
   188|   }
   189|   :hover ${IconWrapper} {
   190|     color: ${Colors.Blue200};
   191|   }
   192| `;
   193| const Reloading = styled.div`
   194|   overflow-x: hidden;
   195|   text-overflow: ellipsis;
   196|   max-width: 600px;
   197|   white-space: nowrap;
   198| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/nav/RepoSelector.tsx
# Total hunks: 4
# ====================================================================
# --- HUNK 1: Lines 1-30 ---
     1| import {
     2|   Box,
     3|   Checkbox,
     4|   Colors,
     5|   Icon,
     6|   IconWrapper,
     7|   Spinner,
     8|   Table,
     9|   Caption,
    10|   Tooltip,
    11| } from '@dagster-io/ui-components';
    12| import * as React from 'react';
    13| import {Link} from 'react-router-dom';
    14| import styled from 'styled-components';
    15| import {buildRepoAddress} from '../workspace/buildRepoAddress';
    16| import {repoAddressAsHumanString} from '../workspace/repoAddressAsString';
    17| import {RepoAddress} from '../workspace/types';
    18| import {workspacePathFromAddress} from '../workspace/workspacePath';
    19| import {
    20|   NO_RELOAD_PERMISSION_TEXT,
    21|   ReloadRepositoryLocationButton,
    22| } from './ReloadRepositoryLocationButton';
    23| export interface RepoSelectorOption {
    24|   repositoryLocation: {name: string};
    25|   repository: {
    26|     name: string;
    27|     displayMetadata: {
    28|       key: string;
    29|       value: string;
    30|     }[];

# --- HUNK 2: Lines 69-109 ---
    69|             return (
    70|               <tr key={addressString}>
    71|                 <td>
    72|                   <Checkbox
    73|                     checked={checked}
    74|                     onChange={(e) => {
    75|                       if (e.target instanceof HTMLInputElement) {
    76|                         onToggle([repoAddress]);
    77|                       }
    78|                     }}
    79|                     id={`switch-${addressString}`}
    80|                   />
    81|                 </td>
    82|                 <td>
    83|                   <RepoLabel htmlFor={`switch-${addressString}`}>
    84|                     <Box flex={{direction: 'column', gap: 4}}>
    85|                       <RepoLocation>{addressString}</RepoLocation>
    86|                       <Box flex={{direction: 'column', gap: 2}}>
    87|                         {option.repository.displayMetadata.map(({key, value}) => (
    88|                           <Caption
    89|                             style={{color: Colors.Gray400}}
    90|                             key={key}
    91|                           >{`${key}: ${value}`}</Caption>
    92|                         ))}
    93|                       </Box>
    94|                     </Box>
    95|                   </RepoLabel>
    96|                 </td>
    97|                 <td>
    98|                   <Link to={workspacePathFromAddress(repoAddress)} onClick={() => onBrowse()}>
    99|                     Browse
   100|                   </Link>
   101|                 </td>
   102|                 <td>
   103|                   <ReloadButton repoAddress={repoAddress} />
   104|                 </td>
   105|               </tr>
   106|             );
   107|           })}
   108|         </tbody>
   109|       </Table>

# --- HUNK 3: Lines 112-193 ---
   112| };
   113| const RepoLabel = styled.label`
   114|   cursor: pointer;
   115|   display: block;
   116|   font-weight: 500;
   117|   overflow: hidden;
   118|   position: relative;
   119|   top: 1px;
   120|   transition: filter 50ms linear;
   121|   user-select: none;
   122|   white-space: nowrap;
   123|   :focus,
   124|   :active {
   125|     outline: none;
   126|   }
   127|   :hover {
   128|     filter: opacity(0.8);
   129|   }
   130| `;
   131| const RepoLocation = styled.div`
   132|   color: ${Colors.Gray700};
   133| `;
   134| const ReloadButton = ({repoAddress}: {repoAddress: RepoAddress}) => {
   135|   return (
   136|     <ReloadRepositoryLocationButton
   137|       location={repoAddress.location}
   138|       ChildComponent={({codeLocation, tryReload, reloading, hasReloadPermission}) => {
   139|         const tooltipContent = () => {
   140|           if (!hasReloadPermission) {
   141|             return NO_RELOAD_PERMISSION_TEXT;
   142|           }
   143|           return reloading ? (
   144|             'Reloading'
   145|           ) : (
   146|             <>
   147|               Reload <strong>{codeLocation}</strong>
   148|             </>
   149|           );
   150|         };
   151|         return (
   152|           <Tooltip placement="right" content={tooltipContent()} useDisabledButtonTooltipFix>
   153|             <ReloadButtonInner disabled={!hasReloadPermission} onClick={tryReload}>
   154|               {reloading ? (
   155|                 <Spinner purpose="body-text" />
   156|               ) : (
   157|                 <Icon
   158|                   name="refresh"
   159|                   color={hasReloadPermission ? Colors.Gray200 : Colors.Gray100}
   160|                 />
   161|               )}
   162|             </ReloadButtonInner>
   163|           </Tooltip>
   164|         );
   165|       }}
   166|     />
   167|   );
   168| };
   169| const ReloadButtonInner = styled.button`
   170|   background: transparent;
   171|   border: 0;
   172|   cursor: pointer;
   173|   padding: 8px;
   174|   margin: -6px;
   175|   outline: none;
   176|   :disabled {
   177|     cursor: default;
   178|   }
   179|   :disabled ${IconWrapper} {
   180|     background-color: ${Colors.Gray300};
   181|     transition: background-color 100ms;
   182|   }
   183|   ${IconWrapper} {
   184|     background-color: ${Colors.Gray600};
   185|     transition: background-color 100ms;
   186|   }
   187|   :hover:not(:disabled) ${IconWrapper} {
   188|     background-color: ${Colors.Gray800};
   189|   }
   190|   :focus ${IconWrapper} {
   191|     background-color: ${Colors.Link};
   192|   }
   193| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/nav/RepositoryContentList.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-29 ---
     1| import {Colors} from '@dagster-io/ui-components';
     2| import {Link} from 'react-router-dom';
     3| import styled from 'styled-components';
     4| export const Item = styled(Link)<{$active: boolean}>`
     5|   background-color: ${({$active}) => ($active ? Colors.Blue50 : 'transparent')};
     6|   border-radius: 8px;
     7|   font-size: 14px;
     8|   text-overflow: ellipsis;
     9|   overflow: hidden;
    10|   padding: 6px 12px;
    11|   display: flex;
    12|   gap: 6px;
    13|   align-items: center;
    14|   color: ${({$active}) => ($active ? Colors.Blue700 : Colors.Dark)} !important;
    15|   user-select: none;
    16|   transition:
    17|     background 50ms linear,
    18|     color 50ms linear;
    19|   &:hover {
    20|     text-decoration: none;
    21|     background-color: ${({$active}) => ($active ? Colors.Blue50 : Colors.Gray10)};
    22|   }
    23|   &:focus {
    24|     outline: 0;
    25|   }
    26|   &.focused {
    27|     border-left: 4px solid ${Colors.Gray400};
    28|   }
    29| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/nav/RepositoryLink.tsx
# Total hunks: 4
# ====================================================================
# --- HUNK 1: Lines 1-102 ---
     1| import {
     2|   Box,
     3|   Colors,
     4|   Icon,
     5|   IconWrapper,
     6|   MiddleTruncate,
     7|   Spinner,
     8|   Tooltip,
     9| } from '@dagster-io/ui-components';
    10| import * as React from 'react';
    11| import {Link} from 'react-router-dom';
    12| import styled from 'styled-components';
    13| import {repoAddressAsHumanString} from '../workspace/repoAddressAsString';
    14| import {RepoAddress} from '../workspace/types';
    15| import {workspacePathFromAddress} from '../workspace/workspacePath';
    16| import {
    17|   NO_RELOAD_PERMISSION_TEXT,
    18|   ReloadRepositoryLocationButton,
    19| } from './ReloadRepositoryLocationButton';
    20| export const RepositoryLink = ({
    21|   repoAddress,
    22|   showIcon = false,
    23|   showRefresh = true,
    24| }: {
    25|   repoAddress: RepoAddress;
    26|   showIcon?: boolean;
    27|   showRefresh?: boolean;
    28| }) => {
    29|   const {location} = repoAddress;
    30|   const repoString = repoAddressAsHumanString(repoAddress);
    31|   return (
    32|     <Box flex={{display: 'inline-flex', direction: 'row', alignItems: 'center'}} title={repoString}>
    33|       {showIcon && <Icon name="folder" style={{marginRight: 8}} color={Colors.Gray400} />}
    34|       <RepositoryName to={workspacePathFromAddress(repoAddress)} style={{flex: 1}}>
    35|         <MiddleTruncate text={repoString} />
    36|       </RepositoryName>
    37|       {showRefresh ? (
    38|         <ReloadRepositoryLocationButton
    39|           location={location}
    40|           ChildComponent={({codeLocation, tryReload, reloading, hasReloadPermission}) => {
    41|             const tooltipContent = () => {
    42|               if (!hasReloadPermission) {
    43|                 return NO_RELOAD_PERMISSION_TEXT;
    44|               }
    45|               return reloading ? (
    46|                 'Reloading'
    47|               ) : (
    48|                 <>
    49|                   Reload location <strong>{codeLocation}</strong>
    50|                 </>
    51|               );
    52|             };
    53|             return (
    54|               <ReloadTooltip content={tooltipContent()}>
    55|                 {reloading ? (
    56|                   <Spinner purpose="body-text" />
    57|                 ) : (
    58|                   <StyledButton disabled={!hasReloadPermission} onClick={tryReload}>
    59|                     <Icon
    60|                       name="refresh"
    61|                       color={hasReloadPermission ? Colors.Gray400 : Colors.Gray300}
    62|                     />
    63|                   </StyledButton>
    64|                 )}
    65|               </ReloadTooltip>
    66|             );
    67|           }}
    68|         />
    69|       ) : null}
    70|     </Box>
    71|   );
    72| };
    73| export const RepositoryName = styled(Link)`
    74|   max-width: 280px;
    75| `;
    76| const ReloadTooltip = styled(Tooltip)`
    77|   margin-left: 4px;
    78|   && {
    79|     display: block;
    80|   }
    81| `;
    82| const StyledButton = styled.button`
    83|   background-color: transparent;
    84|   border: 0;
    85|   cursor: pointer;
    86|   display: block;
    87|   padding: 0;
    88|   margin: 0;
    89|   :disabled {
    90|     cursor: default;
    91|   }
    92|   :focus:not(:focus-visible) {
    93|     outline: none;
    94|   }
    95|   & ${IconWrapper} {
    96|     display: block;
    97|     transition: color 100ms linear;
    98|   }
    99|   :hover ${IconWrapper} {
   100|     color: ${Colors.Blue500};
   101|   }
   102| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/nav/RepositoryLocationStateObserver.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-22 ---
     1| import {gql, useApolloClient, useSubscription} from '@apollo/client';
     2| import {ButtonLink, Colors, Group, Icon, Caption} from '@dagster-io/ui-components';
     3| import * as React from 'react';
     4| import {LocationStateChangeEventType} from '../graphql/types';
     5| import {WorkspaceContext} from '../workspace/WorkspaceContext';
     6| import {
     7|   LocationStateChangeSubscription,
     8|   LocationStateChangeSubscriptionVariables,
     9| } from './types/RepositoryLocationStateObserver.types';
    10| const LOCATION_STATE_CHANGE_SUBSCRIPTION = gql`
    11|   subscription LocationStateChangeSubscription {
    12|     locationStateChangeEvents {
    13|       event {
    14|         message
    15|         locationName
    16|         eventType
    17|         serverId
    18|       }
    19|     }
    20|   }
    21| `;
    22| export const RepositoryLocationStateObserver = () => {

# --- HUNK 2: Lines 40-88 ---
    40|             setUpdatedLocations((s) => s.filter((name) => name !== locationName));
    41|             return;
    42|           case LocationStateChangeEventType.LOCATION_UPDATED:
    43|             const matchingRepositoryLocation = locationEntries.find((n) => n.name === locationName);
    44|             if (
    45|               matchingRepositoryLocation &&
    46|               matchingRepositoryLocation.locationOrLoadError?.__typename === 'RepositoryLocation' &&
    47|               matchingRepositoryLocation.locationOrLoadError?.serverId !== serverId
    48|             ) {
    49|               setUpdatedLocations((s) => [...s, locationName]);
    50|             }
    51|             return;
    52|         }
    53|       },
    54|     },
    55|   );
    56|   if (!totalMessages) {
    57|     return null;
    58|   }
    59|   return (
    60|     <Group background={Colors.Gray200} direction="column" spacing={0}>
    61|       {updatedLocations.length > 0 ? (
    62|         <Group padding={{vertical: 8, horizontal: 12}} direction="row" spacing={8}>
    63|           <Icon name="warning" color={Colors.Gray700} />
    64|           <Caption color={Colors.Gray800}>
    65|             {updatedLocations.length === 1
    66|               ? `Code location ${updatedLocations[0]} has been updated,` // Be specific when there's only one code location updated
    67|               : 'One or more code locations have been updated,'}
    68|             {' and new data is available. '}
    69|             <ButtonLink
    70|               color={{
    71|                 link: Colors.Gray800,
    72|                 hover: Colors.Gray900,
    73|                 active: Colors.Gray900,
    74|               }}
    75|               underline="always"
    76|               onClick={() => {
    77|                 setUpdatedLocations([]);
    78|                 client.refetchQueries({include: 'active'});
    79|               }}
    80|             >
    81|               Update data
    82|             </ButtonLink>
    83|           </Caption>
    84|         </Group>
    85|       ) : null}
    86|     </Group>
    87|   );
    88| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/nav/ScheduleOrSensorTag.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-65 ---
     1| import {
     2|   Box,
     3|   ButtonLink,
     4|   Colors,
     5|   Tag,
     6|   Tooltip,
     7|   FontFamily,
     8|   MiddleTruncate,
     9| } from '@dagster-io/ui-components';
    10| import * as React from 'react';
    11| import {Link} from 'react-router-dom';
    12| import {ScheduleSwitch} from '../schedules/ScheduleSwitch';
    13| import {humanCronString} from '../schedules/humanCronString';
    14| import {ScheduleSwitchFragment} from '../schedules/types/ScheduleSwitch.types';
    15| import {SensorSwitch} from '../sensors/SensorSwitch';
    16| import {SensorSwitchFragment} from '../sensors/types/SensorSwitch.types';
    17| import {RepoAddress} from '../workspace/types';
    18| import {workspacePathFromAddress} from '../workspace/workspacePath';
    19| import {ScheduleAndSensorDialog} from './ScheduleAndSensorDialog';
    20| export const ScheduleOrSensorTag = ({
    21|   schedules,
    22|   sensors,
    23|   repoAddress,
    24|   showSwitch = true,
    25| }: {
    26|   schedules: ScheduleSwitchFragment[];
    27|   sensors: SensorSwitchFragment[];
    28|   repoAddress: RepoAddress;
    29|   showSwitch?: boolean;
    30| }) => {
    31|   const [open, setOpen] = React.useState(false);
    32|   const scheduleCount = schedules.length;
    33|   const sensorCount = sensors.length;
    34|   if (scheduleCount > 1 || sensorCount > 1 || (scheduleCount && sensorCount)) {
    35|     const buttonText =
    36|       scheduleCount && sensorCount
    37|         ? `${scheduleCount + sensorCount} schedules/sensors`
    38|         : scheduleCount
    39|         ? `${scheduleCount} schedules`
    40|         : `${sensorCount} sensors`;
    41|     const icon = scheduleCount > 1 ? 'schedule' : 'sensors';
    42|     return (
    43|       <>
    44|         <Tag icon={icon}>
    45|           <ButtonLink onClick={() => setOpen(true)} color={Colors.Link}>
    46|             {buttonText}
    47|           </ButtonLink>
    48|         </Tag>
    49|         <ScheduleAndSensorDialog
    50|           isOpen={open}
    51|           onClose={() => setOpen(false)}
    52|           repoAddress={repoAddress}
    53|           schedules={schedules}
    54|           sensors={sensors}
    55|           showSwitch={showSwitch}
    56|         />
    57|       </>
    58|     );
    59|   }
    60|   if (scheduleCount) {
    61|     return (
    62|       <MatchingSchedule
    63|         schedule={schedules[0]!}
    64|         repoAddress={repoAddress}
    65|         showSwitch={showSwitch}


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/nav/WorkspaceStatus.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-26 ---
     1| import {Colors, Icon, Tooltip, Spinner} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import {DeploymentStatusContext} from '../instance/DeploymentStatusProvider';
     4| import {WarningTooltip} from './WarningTooltip';
     5| export const WorkspaceStatus = React.memo(({placeholder}: {placeholder: boolean}) => {
     6|   const {codeLocations} = React.useContext(DeploymentStatusContext);
     7|   if (!codeLocations) {
     8|     return placeholder ? <div style={{width: '16px'}} /> : null;
     9|   }
    10|   if (codeLocations.type === 'spinner') {
    11|     return (
    12|       <Tooltip content={codeLocations.content} placement="bottom">
    13|         <Spinner purpose="body-text" fillColor={Colors.Gray300} />
    14|       </Tooltip>
    15|     );
    16|   }
    17|   return (
    18|     <WarningTooltip
    19|       content={codeLocations.content}
    20|       position="bottom"
    21|       modifiers={{offset: {enabled: true, options: {offset: [0, 28]}}}}
    22|     >
    23|       <Icon name="warning" color={Colors.Yellow500} />
    24|     </WarningTooltip>
    25|   );
    26| });


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/nav/__stories__/RepoSelector.stories.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {Box, Colors} from '@dagster-io/ui-components';
     2| import {Meta} from '@storybook/react';
     3| import faker from 'faker';
     4| import * as React from 'react';
     5| import {RepoAddress} from '../../workspace/types';
     6| import {RepoSelector, RepoSelectorOption} from '../RepoSelector';
     7| export default {
     8|   title: 'RepoSelector',
     9|   component: RepoSelector,
    10| } as Meta;
    11| const OPTIONS: RepoSelectorOption[] = [
    12|   {
    13|     repositoryLocation: {
    14|       name: faker.random.words(2).toLowerCase().replace(/ /g, '-'),
    15|     },
    16|     repository: {
    17|       name: faker.random.word().toLowerCase(),
    18|       displayMetadata: [
    19|         {key: 'host', value: faker.random.word().toLowerCase()},
    20|         {key: 'port', value: faker.random.number(9999).toString()},
    21|       ],

# --- HUNK 2: Lines 123-147 ---
   123|   const onToggle = React.useCallback(
   124|     (addresses: RepoAddress[]) => {
   125|       addresses.forEach((address) => {
   126|         const option = OPTIONS.find(
   127|           (r) =>
   128|             r.repository.name === address.name && r.repositoryLocation.name === address.location,
   129|         );
   130|         if (!option) {
   131|           return;
   132|         }
   133|         if (selected.includes(option)) {
   134|           setSelected(selected.filter((o) => o !== option));
   135|         } else {
   136|           setSelected([...selected, option]);
   137|         }
   138|       });
   139|     },
   140|     [selected],
   141|   );
   142|   return (
   143|     <Box background={Colors.Gray800} padding={16}>
   144|       <RepoSelector options={OPTIONS} onBrowse={() => {}} onToggle={onToggle} selected={selected} />
   145|     </Box>
   146|   );
   147| };


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/nav/getLeftNavItemsForOption.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| import {Colors} from '@dagster-io/ui-components';
     2| import * as React from 'react';
     3| import styled from 'styled-components';
     4| import {isHiddenAssetGroupJob} from '../asset-graph/Utils';
     5| import {LegacyPipelineTag} from '../pipelines/LegacyPipelineTag';
     6| import {DagsterRepoOption} from '../workspace/WorkspaceContext';
     7| import {buildRepoAddress} from '../workspace/buildRepoAddress';
     8| import {workspacePathFromAddress} from '../workspace/workspacePath';
     9| import {LeftNavItemType} from './LeftNavItemType';
    10| export const getAssetGroupItemsForOption = (option: DagsterRepoOption) => {
    11|   const items: LeftNavItemType[] = [];
    12|   const {repository, repositoryLocation} = option;
    13|   const address = buildRepoAddress(repository.name, repositoryLocation.name);
    14|   for (const {groupName} of repository.assetGroups) {
    15|     items.push({
    16|       name: groupName || '',
    17|       leftIcon: 'asset_group',
    18|       isJob: false,
    19|       schedules: [],
    20|       sensors: [],
    21|       repoAddress: address,

# --- HUNK 2: Lines 84-126 ---
    84|       path: workspacePathFromAddress(address, `/${isJob ? 'jobs' : 'pipelines'}/${name}`),
    85|       repoAddress: address,
    86|       schedules: schedulesForJob,
    87|       sensors: sensorsForJob,
    88|     });
    89|   }
    90|   return items;
    91| };
    92| const Label = styled.div<{$hasIcon: boolean}>`
    93|   flex: 1;
    94|   min-width: 0;
    95|   display: flex;
    96|   flex-direction: row;
    97|   justify-content: flex-start;
    98|   align-items: center;
    99|   gap: 8px;
   100|   margin-right: ${({$hasIcon}) => ($hasIcon === true ? '20px' : '0px')};
   101|   white-space: nowrap;
   102| `;
   103| export const LabelTooltipStyles = JSON.stringify({
   104|   background: Colors.Gray100,
   105|   filter: `brightness(97%)`,
   106|   color: Colors.Gray900,
   107|   border: 'none',
   108|   borderRadius: 7,
   109|   overflow: 'hidden',
   110|   fontSize: 14,
   111|   padding: '5px 10px',
   112|   transform: 'translate(-10px,-5px)',
   113| } as React.CSSProperties);
   114| const TruncatingName = styled.div`
   115|   flex-shrink: 1;
   116|   min-width: 0;
   117|   overflow: hidden;
   118|   text-overflow: ellipsis;
   119| `;
   120| export const TruncatedTextWithFullTextOnHover = React.forwardRef(
   121|   (
   122|     {
   123|       text,
   124|       tooltipStyle,
   125|       tooltipText,
   126|       ...rest


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/nav/useCodeLocationsStatus.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-22 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {Box, ButtonLink, Colors} from '@dagster-io/ui-components';
     3| import * as React from 'react';
     4| import {useHistory} from 'react-router-dom';
     5| import styled from 'styled-components';
     6| import {showSharedToaster} from '../app/DomUtils';
     7| import {useQueryRefreshAtInterval} from '../app/QueryRefresh';
     8| import {RepositoryLocationLoadStatus} from '../graphql/types';
     9| import {StatusAndMessage} from '../instance/DeploymentStatusType';
    10| import {WorkspaceContext} from '../workspace/WorkspaceContext';
    11| import {
    12|   CodeLocationStatusQuery,
    13|   CodeLocationStatusQueryVariables,
    14| } from './types/useCodeLocationsStatus.types';
    15| type LocationStatusEntry = {
    16|   loadStatus: RepositoryLocationLoadStatus;
    17|   id: string;
    18|   name: string;
    19| };
    20| const POLL_INTERVAL = 5 * 1000;
    21| type EntriesById = Record<string, LocationStatusEntry>;
    22| export const useCodeLocationsStatus = (skip = false): StatusAndMessage | null => {

# --- HUNK 2: Lines 189-229 ---
   189|     };
   190|   }
   191|   const repoErrors = locationEntries.filter(
   192|     (locationEntry) => locationEntry.locationOrLoadError?.__typename === 'PythonError',
   193|   );
   194|   if (repoErrors.length) {
   195|     return {
   196|       type: 'warning',
   197|       content: (
   198|         <div style={{whiteSpace: 'nowrap'}}>{`${repoErrors.length} ${
   199|           repoErrors.length === 1 ? 'code location failed to load' : 'code locations failed to load'
   200|         }`}</div>
   201|       ),
   202|     };
   203|   }
   204|   return null;
   205| };
   206| const alreadyViewingCodeLocations = () => document.location.pathname.endsWith('/locations');
   207| const ViewCodeLocationsButton = ({onClick}: {onClick: () => void}) => {
   208|   return (
   209|     <ViewButton onClick={onClick} color={Colors.White}>
   210|       View
   211|     </ViewButton>
   212|   );
   213| };
   214| const ViewButton = styled(ButtonLink)`
   215|   white-space: nowrap;
   216| `;
   217| const CODE_LOCATION_STATUS_QUERY = gql`
   218|   query CodeLocationStatusQuery {
   219|     locationStatusesOrError {
   220|       ... on WorkspaceLocationStatusEntries {
   221|         entries {
   222|           id
   223|           name
   224|           loadStatus
   225|         }
   226|       }
   227|     }
   228|   }
   229| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/ops/OpTypeSignature.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-23 ---
     1| import {gql} from '@apollo/client';
     2| import {Code} from '@blueprintjs/core';
     3| import {Colors, FontFamily} from '@dagster-io/ui-components';
     4| import * as React from 'react';
     5| import styled from 'styled-components';
     6| import {breakOnUnderscores} from '../app/Util';
     7| import {DAGSTER_TYPE_WITH_TOOLTIP_FRAGMENT, TypeWithTooltip} from '../typeexplorer/TypeWithTooltip';
     8| import {OpTypeSignatureFragment} from './types/OpTypeSignature.types';
     9| interface IOpTypeSignature {
    10|   definition: OpTypeSignatureFragment;
    11| }
    12| export const OpTypeSignature = (props: IOpTypeSignature) => {
    13|   const {inputDefinitions, outputDefinitions} = props.definition;
    14|   const inputSide = inputDefinitions.map((input, i) => (
    15|     <span key={i}>
    16|       {breakOnUnderscores(input.name)}: <TypeWithTooltip type={input.type} />
    17|       {i < inputDefinitions.length - 1 ? ', ' : ''}
    18|     </span>
    19|   ));
    20|   const outputSide = outputDefinitions.map((output, i) => (
    21|     <span key={i}>
    22|       {breakOnUnderscores(output.name)}: <TypeWithTooltip type={output.type} />
    23|       {i < outputDefinitions.length - 1 ? ', ' : ''}

# --- HUNK 2: Lines 31-58 ---
    31| };
    32| export const OP_TYPE_SIGNATURE_FRAGMENT = gql`
    33|   fragment OpTypeSignatureFragment on ISolidDefinition {
    34|     outputDefinitions {
    35|       name
    36|       type {
    37|         ...DagsterTypeWithTooltipFragment
    38|       }
    39|     }
    40|     inputDefinitions {
    41|       name
    42|       type {
    43|         ...DagsterTypeWithTooltipFragment
    44|       }
    45|     }
    46|   }
    47|   ${DAGSTER_TYPE_WITH_TOOLTIP_FRAGMENT}
    48| `;
    49| const TypeSignature = styled(Code)`
    50|   && {
    51|     background: ${Colors.Blue50};
    52|     font-family: ${FontFamily.monospace};
    53|     font-size: 14px;
    54|     padding: 4px;
    55|     box-shadow: none;
    56|     color: black;
    57|   }
    58| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/ops/OpsRoot.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-32 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {
     3|   Box,
     4|   Colors,
     5|   NonIdealState,
     6|   SplitPanelContainer,
     7|   SuggestionProvider,
     8|   TokenizingField,
     9|   TokenizingFieldValue,
    10|   stringFromValue,
    11|   tokenizedValuesFromString,
    12|   FontFamily,
    13| } from '@dagster-io/ui-components';
    14| import qs from 'qs';
    15| import * as React from 'react';
    16| import {useHistory, useLocation, useParams} from 'react-router-dom';
    17| import {
    18|   AutoSizer as _AutoSizer,
    19|   CellMeasurer as _CellMeasurerer,
    20|   CellMeasurerCache,
    21|   List as _List,
    22| } from 'react-virtualized';
    23| import styled from 'styled-components';
    24| import {useTrackPageView} from '../app/analytics';
    25| import {useDocumentTitle} from '../hooks/useDocumentTitle';
    26| import {Loading} from '../ui/Loading';
    27| import {repoAddressToSelector} from '../workspace/repoAddressToSelector';
    28| import {RepoAddress} from '../workspace/types';
    29| import {workspacePathFromAddress} from '../workspace/workspacePath';
    30| import {OpDetailScrollContainer, UsedSolidDetails} from './OpDetailsRoot';
    31| import {OpTypeSignature, OP_TYPE_SIGNATURE_FRAGMENT} from './OpTypeSignature';
    32| import {OpsRootQuery, OpsRootQueryVariables, OpsRootUsedSolidFragment} from './types/OpsRoot.types';

# --- HUNK 2: Lines 299-345 ---
   299|         }
   300|       }
   301|     }
   302|   }
   303|   fragment OpsRootUsedSolid on UsedSolid {
   304|     definition {
   305|       name
   306|       ...OpTypeSignatureFragment
   307|     }
   308|     invocations {
   309|       pipeline {
   310|         id
   311|         isJob
   312|         name
   313|       }
   314|     }
   315|   }
   316|   ${OP_TYPE_SIGNATURE_FRAGMENT}
   317| `;
   318| const OpListItem = styled.div<{selected: boolean}>`
   319|   background: ${({selected}) => (selected ? Colors.Gray100 : Colors.White)};
   320|   box-shadow:
   321|     ${({selected}) => (selected ? Colors.HighlightGreen : 'transparent')} 4px 0 0 inset,
   322|     ${Colors.KeylineGray} 0 -1px 0 inset;
   323|   color: ${Colors.Gray800};
   324|   cursor: pointer;
   325|   font-size: 14px;
   326|   display: flex;
   327|   flex-direction: column;
   328|   padding: 12px 24px;
   329|   user-select: none;
   330|   & > code.bp4-code {
   331|     color: ${Colors.Gray800};
   332|     background: transparent;
   333|     font-family: ${FontFamily.monospace};
   334|     padding: 5px 0 0 0;
   335|   }
   336| `;
   337| const OpName = styled.div`
   338|   flex: 1;
   339|   font-weight: 600;
   340| `;
   341| const OpListColumnContainer = styled.div`
   342|   display: flex;
   343|   flex-direction: column;
   344|   height: 100%;
   345| `;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/overview/OverviewAssetsRoot.tsx
# Total hunks: 6
# ====================================================================
# --- HUNK 1: Lines 1-31 ---
     1| import {useQuery} from '@apollo/client';
     2| import {
     3|   Box,
     4|   Caption,
     5|   Colors,
     6|   Icon,
     7|   MenuItem,
     8|   Select,
     9|   Spinner,
    10|   Tag,
    11|   TextInput,
    12|   useViewport,
    13| } from '@dagster-io/ui-components';
    14| import {useVirtualizer} from '@tanstack/react-virtual';
    15| import * as React from 'react';
    16| import {Link} from 'react-router-dom';
    17| import styled from 'styled-components';
    18| import {PythonErrorInfo} from '../app/PythonErrorInfo';
    19| import {FIFTEEN_SECONDS, useQueryRefreshAtInterval} from '../app/QueryRefresh';
    20| import {useTrackPageView} from '../app/analytics';
    21| import {useAssetsLiveData} from '../asset-data/AssetLiveDataProvider';
    22| import {StatusCase, buildAssetNodeStatusContent} from '../asset-graph/AssetNodeStatusContent';
    23| import {displayNameForAssetKey, tokenForAssetKey} from '../asset-graph/Utils';
    24| import {partitionCountString} from '../assets/AssetNodePartitionCounts';
    25| import {ASSET_CATALOG_TABLE_QUERY} from '../assets/AssetsCatalogTable';
    26| import {assetDetailsPathForKey} from '../assets/assetDetailsPathForKey';
    27| import {
    28|   AssetCatalogTableQuery,
    29|   AssetCatalogTableQueryVariables,
    30| } from '../assets/types/AssetsCatalogTable.types';
    31| import {useDocumentTitle} from '../hooks/useDocumentTitle';

# --- HUNK 2: Lines 161-205 ---
   161|     const target = groups[key] || {
   162|       groupName,
   163|       repositoryName,
   164|       assets: [] as Assets,
   165|     };
   166|     target.assets.push(asset);
   167|     groups[key] = target;
   168|   });
   169|   return Object.values(groups);
   170| }
   171| const TEMPLATE_COLUMNS = '5fr 1fr 1fr 1fr 1fr';
   172| function VirtualHeaderRow() {
   173|   return (
   174|     <Box
   175|       border="top-and-bottom"
   176|       style={{
   177|         display: 'grid',
   178|         gridTemplateColumns: TEMPLATE_COLUMNS,
   179|         height: '32px',
   180|         fontSize: '12px',
   181|         color: Colors.Gray600,
   182|         position: 'sticky',
   183|         top: 0,
   184|         zIndex: 1,
   185|         background: Colors.White,
   186|       }}
   187|     >
   188|       <HeaderCell>Group name</HeaderCell>
   189|       <HeaderCell>Missing</HeaderCell>
   190|       <HeaderCell>Failed/Overdue</HeaderCell>
   191|       <HeaderCell>In progress</HeaderCell>
   192|       <HeaderCell>Materialized</HeaderCell>
   193|     </Box>
   194|   );
   195| }
   196| const UNGROUPED_ASSETS = 'Ungrouped Assets';
   197| type RowProps = {
   198|   height: number;
   199|   start: number;
   200|   group: ReturnType<typeof groupAssets>[0];
   201| };
   202| function VirtualRow({height, start, group}: RowProps) {
   203|   const assetKeys = React.useMemo(
   204|     () => group.assets.map((asset) => ({path: asset.key.path})),
   205|     [group.assets],

# --- HUNK 3: Lines 309-349 ---
   309|           </Box>
   310|         </Cell>
   311|         <Cell>
   312|           {statuses.missing.length ? (
   313|             <SelectOnHover
   314|               assets={statuses.missing}
   315|               getCount={({status}) => {
   316|                 if (status.case === StatusCase.PARTITIONS_MISSING) {
   317|                   return status.numMissing || 0;
   318|                 }
   319|                 return 0;
   320|               }}
   321|               adjective="missing"
   322|             >
   323|               <Tag intent="none">
   324|                 <Box flex={{direction: 'row', alignItems: 'center', gap: 6}}>
   325|                   <div
   326|                     style={{
   327|                       width: '12px',
   328|                       height: '12px',
   329|                       border: `2px solid ${Colors.Gray500}`,
   330|                       borderRadius: '50%',
   331|                     }}
   332|                   />
   333|                   {statuses.missing.length}
   334|                 </Box>
   335|               </Tag>
   336|             </SelectOnHover>
   337|           ) : (
   338|             zeroOrBlank
   339|           )}
   340|         </Cell>
   341|         <Cell>
   342|           {statuses.failed.length ? (
   343|             <SelectOnHover
   344|               assets={statuses.failed}
   345|               getCount={({status}) => {
   346|                 if (status.case === StatusCase.PARTITIONS_FAILED) {
   347|                   return status.numFailed || 0;
   348|                 }
   349|                 return 0;

# --- HUNK 4: Lines 389-466 ---
   389|           ) : (
   390|             zeroOrBlank
   391|           )}
   392|         </Cell>
   393|         <Cell>
   394|           {statuses.successful.length ? (
   395|             <SelectOnHover
   396|               assets={statuses.successful}
   397|               getCount={({status}) => {
   398|                 if (status.case === StatusCase.PARTITIONS_MATERIALIZED) {
   399|                   return status.numMaterialized || 0;
   400|                 }
   401|                 return 0;
   402|               }}
   403|               adjective="materialized"
   404|             >
   405|               <Tag intent="success">
   406|                 <Box flex={{direction: 'row', alignItems: 'center', gap: 6}}>
   407|                   <div
   408|                     style={{
   409|                       backgroundColor: Colors.Green500,
   410|                       width: '10px',
   411|                       height: '10px',
   412|                       borderRadius: '50%',
   413|                     }}
   414|                   />
   415|                   {statuses.successful.length}
   416|                 </Box>
   417|               </Tag>
   418|             </SelectOnHover>
   419|           ) : (
   420|             zeroOrBlank
   421|           )}
   422|         </Cell>
   423|       </RowGrid>
   424|     </Row>
   425|   );
   426| }
   427| const RowGrid = styled(Box)`
   428|   display: grid;
   429|   grid-template-columns: ${TEMPLATE_COLUMNS};
   430|   height: 100%;
   431|   > * {
   432|     vertical-align: middle;
   433|   }
   434| `;
   435| const Cell = ({children}: {children: React.ReactNode}) => {
   436|   return (
   437|     <RowCell style={{color: Colors.Gray900}}>
   438|       <Box flex={{direction: 'row', alignItems: 'center', grow: 1}}>{children}</Box>
   439|     </RowCell>
   440|   );
   441| };
   442| const RepositoryLinkWrapper = styled.div<{maxWidth?: number}>`
   443|   font-size: 12px;
   444|   pointer-events: none;
   445|   a {
   446|     color: ${Colors.Gray600};
   447|     pointer-events: none;
   448|     max-width: ${({maxWidth}) => (maxWidth ? 'unset' : `${maxWidth}px`)};
   449|   }
   450| `;
   451| type AssetWithStatusType = {
   452|   asset: Assets[0];
   453|   status: ReturnType<typeof buildAssetNodeStatusContent>;
   454| };
   455| function SelectOnHover({
   456|   assets,
   457|   children,
   458|   getCount,
   459|   adjective,
   460| }: {
   461|   assets: AssetWithStatusType[];
   462|   children: React.ReactNode;
   463|   getCount: (asset: AssetWithStatusType) => number;
   464|   adjective: string;
   465| }) {
   466|   return (

# --- HUNK 5: Lines 472-512 ---
   472|             .toLocaleLowerCase()
   473|             .includes(query.toLocaleLowerCase())
   474|         }
   475|         itemRenderer={(item) => {
   476|           const count = getCount(item);
   477|           return (
   478|             <LinkWithNoUnderline to={assetDetailsPathForKey(item.asset.key)} target="_blank">
   479|               <MenuItem
   480|                 key={displayNameForAssetKey(item.asset.key)}
   481|                 text={
   482|                   <Box flex={{direction: 'row', alignItems: 'center', gap: 4}}>
   483|                     <div style={{paddingLeft: '4px'}}>
   484|                       <Icon name="asset" />
   485|                     </div>
   486|                     <div
   487|                       style={{overflow: 'hidden', whiteSpace: 'nowrap', textOverflow: 'ellipsis'}}
   488|                     >
   489|                       {displayNameForAssetKey(item.asset.key)}
   490|                     </div>
   491|                     {count && count > 0 ? (
   492|                       <Caption style={{color: Colors.Gray700}}>
   493|                         {partitionCountString(count)} {adjective}
   494|                       </Caption>
   495|                     ) : null}
   496|                   </Box>
   497|                 }
   498|               />
   499|             </LinkWithNoUnderline>
   500|           );
   501|         }}
   502|         onItemSelect={() => {}}
   503|       >
   504|         {children}
   505|       </Select>
   506|     </SelectWrapper>
   507|   );
   508| }
   509| const SelectWrapper = styled.div`
   510|   cursor: pointer;
   511|   &:hover {
   512|     font-weight: 600;


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/overview/OverviewJobsRoot.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-29 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {
     3|   Box,
     4|   Colors,
     5|   Heading,
     6|   NonIdealState,
     7|   PageHeader,
     8|   Spinner,
     9|   TextInput,
    10| } from '@dagster-io/ui-components';
    11| import * as React from 'react';
    12| import {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';
    13| import {FIFTEEN_SECONDS, useQueryRefreshAtInterval} from '../app/QueryRefresh';
    14| import {useTrackPageView} from '../app/analytics';
    15| import {isHiddenAssetGroupJob} from '../asset-graph/Utils';
    16| import {useDocumentTitle} from '../hooks/useDocumentTitle';
    17| import {useQueryPersistedState} from '../hooks/useQueryPersistedState';
    18| import {RepoFilterButton} from '../instance/RepoFilterButton';
    19| import {SearchInputSpinner} from '../ui/SearchInputSpinner';
    20| import {WorkspaceContext} from '../workspace/WorkspaceContext';
    21| import {buildRepoAddress} from '../workspace/buildRepoAddress';
    22| import {repoAddressAsHumanString} from '../workspace/repoAddressAsString';
    23| import {RepoAddress} from '../workspace/types';
    24| import {OverviewJobsTable} from './OverviewJobsTable';
    25| import {OverviewTabs} from './OverviewTabs';
    26| import {sortRepoBuckets} from './sortRepoBuckets';
    27| import {OverviewJobsQuery, OverviewJobsQueryVariables} from './types/OverviewJobsRoot.types';
    28| import {visibleRepoKeys} from './visibleRepoKeys';
    29| export const OverviewJobsRoot = () => {

# --- HUNK 2: Lines 50-90 ---
    50|       visibleKeys.has(repoAddressAsHumanString(repoAddress)),
    51|     );
    52|   }, [data, visibleRepos]);
    53|   const sanitizedSearch = searchValue.trim().toLocaleLowerCase();
    54|   const anySearch = sanitizedSearch.length > 0;
    55|   const filteredBySearch = React.useMemo(() => {
    56|     const searchToLower = sanitizedSearch.toLocaleLowerCase();
    57|     return repoBuckets
    58|       .map(({repoAddress, jobs}) => ({
    59|         repoAddress,
    60|         jobs: jobs.filter(({name}) => name.toLocaleLowerCase().includes(searchToLower)),
    61|       }))
    62|       .filter(({jobs}) => jobs.length > 0);
    63|   }, [repoBuckets, sanitizedSearch]);
    64|   const content = () => {
    65|     if (loading && !data) {
    66|       return (
    67|         <Box flex={{direction: 'row', justifyContent: 'center'}} style={{paddingTop: '100px'}}>
    68|           <Box flex={{direction: 'row', alignItems: 'center', gap: 16}}>
    69|             <Spinner purpose="body-text" />
    70|             <div style={{color: Colors.Gray600}}>Loading jobs</div>
    71|           </Box>
    72|         </Box>
    73|       );
    74|     }
    75|     const anyReposHidden = allRepos.length > visibleRepos.length;
    76|     if (!filteredBySearch.length) {
    77|       if (anySearch) {
    78|         return (
    79|           <Box padding={{top: 20}}>
    80|             <NonIdealState
    81|               icon="search"
    82|               title="No matching jobs"
    83|               description={
    84|                 anyReposHidden ? (
    85|                   <div>
    86|                     No jobs matching <strong>{searchValue}</strong> were found in the selected code
    87|                     locations
    88|                   </div>
    89|                 ) : (
    90|                   <div>


# ====================================================================
# FILE: js_modules/dagster-ui/packages/ui-core/src/overview/OverviewResourcesRoot.tsx
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-29 ---
     1| import {gql, useQuery} from '@apollo/client';
     2| import {
     3|   Box,
     4|   Colors,
     5|   Heading,
     6|   NonIdealState,
     7|   PageHeader,
     8|   Spinner,
     9|   TextInput,
    10| } from '@dagster-io/ui-components';
    11| import * as React from 'react';
    12| import {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';
    13| import {FIFTEEN_SECONDS, useQueryRefreshAtInterval} from '../app/QueryRefresh';
    14| import {useTrackPageView} from '../app/analytics';
    15| import {useDocumentTitle} from '../hooks/useDocumentTitle';
    16| import {useQueryPersistedState} from '../hooks/useQueryPersistedState';
    17| import {RepoFilterButton} from '../instance/RepoFilterButton';
    18| import {RESOURCE_ENTRY_FRAGMENT} from '../resources/WorkspaceResourcesRoot';
    19| import {ResourceEntryFragment} from '../resources/types/WorkspaceResourcesRoot.types';
    20| import {SearchInputSpinner} from '../ui/SearchInputSpinner';
    21| import {WorkspaceContext} from '../workspace/WorkspaceContext';
    22| import {buildRepoAddress} from '../workspace/buildRepoAddress';
    23| import {repoAddressAsHumanString} from '../workspace/repoAddressAsString';
    24| import {RepoAddress} from '../workspace/types';
    25| import {OverviewResourcesTable} from './OverviewResourcesTable';
    26| import {OverviewTabs} from './OverviewTabs';
    27| import {sortRepoBuckets} from './sortRepoBuckets';
    28| import {
    29|   OverviewResourcesQuery,

# --- HUNK 2: Lines 54-94 ---
    54|       visibleKeys.has(repoAddressAsHumanString(repoAddress)),
    55|     );
    56|   }, [data, visibleRepos]);
    57|   const sanitizedSearch = searchValue.trim().toLocaleLowerCase();
    58|   const anySearch = sanitizedSearch.length > 0;
    59|   const filteredBySearch = React.useMemo(() => {
    60|     const searchToLower = sanitizedSearch.toLocaleLowerCase();
    61|     return repoBuckets
    62|       .map(({repoAddress, resources}) => ({
    63|         repoAddress,
    64|         resources: resources.filter(({name}) => name.toLocaleLowerCase().includes(searchToLower)),
    65|       }))
    66|       .filter(({resources}) => resources.length > 0);
    67|   }, [repoBuckets, sanitizedSearch]);
    68|   const content = () => {
    69|     if (loading && !data) {
    70|       return (
    71|         <Box flex={{direction: 'row', justifyContent: 'center'}} style={{paddingTop: '100px'}}>
    72|           <Box flex={{direction: 'row', alignItems: 'center', gap: 16}}>
    73|             <Spinner purpose="body-text" />
    74|             <div style={{color: Colors.Gray600}}>Loading resources</div>
    75|           </Box>
    76|         </Box>
    77|       );
    78|     }
    79|     const anyReposHidden = allRepos.length > visibleRepos.length;
    80|     if (!filteredBySearch.length) {
    81|       if (anySearch) {
    82|         return (
    83|           <Box padding={{top: 20}}>
    84|             <NonIdealState
    85|               icon="search"
    86|               title="No matching resources"
    87|               description={
    88|                 anyReposHidden ? (
    89|                   <div>
    90|                     No resources matching <strong>{searchValue}</strong> were found in the selected
    91|                     code locations
    92|                   </div>
    93|                 ) : (
    94|                   <div>

