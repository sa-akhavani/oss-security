# ====================================================================
# FILE: lib/avo/fields/belongs_to_field.rb
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 93-143 ---
    93|       end
    94|       def reflection
    95|         reflection_for_key(id)
    96|       rescue
    97|         nil
    98|       end
    99|       def relation_model_class
   100|         @resource.model_class
   101|       end
   102|       def label
   103|         value.send(target_resource.class.title)
   104|       end
   105|       def to_permitted_param
   106|         if polymorphic_as.present?
   107|           return ["#{polymorphic_as}_type".to_sym, "#{polymorphic_as}_id".to_sym]
   108|         end
   109|         foreign_key.to_sym
   110|       end
   111|       def fill_field(model, key, value, params)
   112|         return model unless model.methods.include? key.to_sym
   113|         if polymorphic_as.present?
   114|           model.send("#{polymorphic_as}_type=", params["#{polymorphic_as}_type"])
   115|           if params["#{polymorphic_as}_type"].blank?
   116|             model.send("#{polymorphic_as}_id=", nil)
   117|           else
   118|             model.send("#{polymorphic_as}_id=", params["#{polymorphic_as}_id"])
   119|           end
   120|         else
   121|           model.send("#{key}=", value)
   122|         end
   123|         model
   124|       end
   125|       def database_id
   126|         return "#{polymorphic_as}_type" if polymorphic_as.present?
   127|         foreign_key
   128|       rescue
   129|         id
   130|       end
   131|       def target_resource
   132|         return use_resource if use_resource.present?
   133|         if is_polymorphic?
   134|           if value.present?
   135|             return App.get_resource_by_model_name(value.class)
   136|           else
   137|             return nil
   138|           end
   139|         end
   140|         reflection_key = polymorphic_as || id
   141|         if @model._reflections[reflection_key.to_s].klass.present?
   142|           App.get_resource_by_model_name @model._reflections[reflection_key.to_s].klass.to_s
   143|         elsif @model._reflections[reflection_key.to_s].options[:class_name].present?


# ====================================================================
# FILE: lib/avo/version.rb
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-3 ---
     1| module Avo
     2|   VERSION = "2.33.2" unless const_defined?(:VERSION)
     3| end

