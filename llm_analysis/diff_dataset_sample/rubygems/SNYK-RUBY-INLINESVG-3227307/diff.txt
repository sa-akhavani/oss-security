--- a/lib/inline_svg/action_view/helpers.rb
+++ b/lib/inline_svg/action_view/helpers.rb
@@ -13,27 +13,20 @@
           render_inline_svg(filename, transform_params)
         end
       end
       def inline_svg(filename, transform_params={})
         ActiveSupport::Deprecation.warn(
           '`inline_svg` is deprecated and will be removed from inline_svg 2.0 (use `inline_svg_tag` or `inline_svg_pack_tag` instead)'
         )
         render_inline_svg(filename, transform_params)
       end
       private
-      def backwards_compatible_html_escape(filename)
-        if ERB::Util.respond_to?(:html_escape_once)
-          ERB::Util.html_escape_once(filename)
-        else
-          ERB::Util.html_escape(filename)
-        end
-      end
       def render_inline_svg(filename, transform_params={})
         begin
           svg_file = read_svg(filename)
         rescue InlineSvg::AssetFile::FileNotFound => error
           raise error if InlineSvg.configuration.raise_on_file_not_found?
           return placeholder(filename) unless transform_params[:fallback].present?
           if transform_params[:fallback].present?
             begin
               svg_file = read_svg(transform_params[:fallback])
             rescue InlineSvg::AssetFile::FileNotFound
@@ -45,21 +38,21 @@
       end
       def read_svg(filename)
         if InlineSvg::IOResource === filename
           InlineSvg::IOResource.read filename
         else
           configured_asset_file.named filename
         end
       end
       def placeholder(filename)
         css_class = InlineSvg.configuration.svg_not_found_css_class
-        not_found_message = "'#{backwards_compatible_html_escape(filename)}' #{extension_hint(filename)}"
+        not_found_message = "'#{filename}' #{extension_hint(filename)}"
         if css_class.nil?
           return "<svg><!-- SVG file not found: #{not_found_message}--></svg>".html_safe
         else
           return "<svg class='#{css_class}'><!-- SVG file not found: #{not_found_message}--></svg>".html_safe
         end
       end
       def configured_asset_file
         InlineSvg.configuration.asset_file
       end
       def with_asset_finder(asset_finder)

--- a/lib/inline_svg/cached_asset_file.rb
+++ b/lib/inline_svg/cached_asset_file.rb
@@ -1,26 +1,31 @@
 module InlineSvg
   class CachedAssetFile
     attr_reader :assets, :filters, :paths
     def initialize(paths: [], filters: [])
       @paths = Array(paths).compact.map { |p| Pathname.new(p) }
       @filters = Array(filters).map { |f| Regexp.new(f) }
       @assets = @paths.reduce({}) { |assets, p| assets.merge(read_assets(assets, p)) }
-      @sorted_asset_keys = assets.keys.sort { |a, b| a.size <=> b.size }
     end
     def named(asset_name)
       assets[key_for_asset(asset_name)] or
         raise InlineSvg::AssetFile::FileNotFound.new("Asset not found: #{asset_name}")
     end
     private
     def key_for_asset(asset_name)
-      @sorted_asset_keys.find { |k| k.include?(asset_name) }
+      match = all_keys_matching(asset_name).sort do |a, b|
+        a.string.size <=> b.string.size
+      end.first
+      match && match.string
+    end
+    def all_keys_matching(asset_name)
+      assets.keys.map { |k| /(#{asset_name})/.match(k.to_s) }.compact
     end
     def read_assets(acc, paths)
       paths.each_child do |child|
         if child.directory?
           read_assets(acc, child)
         elsif child.readable_real?
           acc[child.to_s] = File.read(child) if matches_all_filters?(child)
         end
       end
       acc

--- a/lib/inline_svg/version.rb
+++ b/lib/inline_svg/version.rb
@@ -1,3 +1,3 @@
 module InlineSvg
-  VERSION = "1.7.2"
+  VERSION = "1.7.1"
 end

--- a/spec/helpers/inline_svg_spec.rb
+++ b/spec/helpers/inline_svg_spec.rb
@@ -26,29 +26,20 @@
             helper.send(helper_method, 'some-missing-file.svg')
           }.to raise_error(InlineSvg::AssetFile::FileNotFound)
         end
       end
       it "returns an empty, html safe, SVG document as a placeholder" do
         allow(InlineSvg::AssetFile).to receive(:named).
           with('some-missing-file.svg').
           and_raise(InlineSvg::AssetFile::FileNotFound.new)
         output = helper.send(helper_method, 'some-missing-file.svg')
         expect(output).to eq "<svg><!-- SVG file not found: 'some-missing-file.svg' --></svg>"
-        expect(output).to be_html_safe
-      end
-      it "escapes malicious input" do
-        malicious = "--></svg><script>alert(1)</script><svg>.svg"
-        allow(InlineSvg::AssetFile).to receive(:named).
-          with(malicious).
-          and_raise(InlineSvg::AssetFile::FileNotFound.new)
-        output = helper.send(helper_method, malicious)
-        expect(output).to eq "<svg><!-- SVG file not found: '--&gt;&lt;/svg&gt;&lt;script&gt;alert(1)&lt;/script&gt;&lt;svg&gt;.svg' --></svg>"
         expect(output).to be_html_safe
       end
       it "gives a helpful hint when no .svg extension is provided in the filename" do
         allow(InlineSvg::AssetFile).to receive(:named).
           with('missing-file-with-no-extension').
           and_raise(InlineSvg::AssetFile::FileNotFound.new)
         output = helper.send(helper_method, 'missing-file-with-no-extension')
         expect(output).to eq "<svg><!-- SVG file not found: 'missing-file-with-no-extension' (Try adding .svg to your filename) --></svg>"
       end
       it "allows the CSS class on the empty SVG document to be changed" do
