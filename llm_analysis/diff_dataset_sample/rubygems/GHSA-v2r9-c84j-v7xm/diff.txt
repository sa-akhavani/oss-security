--- a/lib/rdoc.rb
+++ b/lib/rdoc.rb
@@ -1,21 +1,21 @@
 $DEBUG_RDOC = nil
 module RDoc
   class Error < RuntimeError; end
   def self.const_missing const_name # :nodoc:
     if const_name.to_s == 'RDocError' then
       warn "RDoc::RDocError is deprecated and will be removed in RDoc 4"
       return Error
     end
     super
   end
-  VERSION = '3.12.1'
+  VERSION = '3.12'
   VISIBILITIES = [:public, :protected, :private]
   DOT_DOC_FILENAME = ".document"
   GENERAL_MODIFIERS = %w[nodoc].freeze
   CLASS_MODIFIERS = GENERAL_MODIFIERS
   ATTR_MODIFIERS = GENERAL_MODIFIERS
   CONSTANT_MODIFIERS = GENERAL_MODIFIERS
   METHOD_MODIFIERS = GENERAL_MODIFIERS +
     %w[arg args yield yields notnew not-new not_new doc]
   def self.load_yaml
     begin

--- a/lib/rdoc/generator/template/darkfish/js/darkfish.js
+++ b/lib/rdoc/generator/template/darkfish/js/darkfish.js
@@ -74,29 +74,27 @@
     return li;
   }
   search.select = function(result) {
     var result_element = result.get(0);
     window.location.href = result_element.firstChild.firstChild.href;
   }
   search.scrollIntoView = search.scrollInWindow;
 };
 function highlightTarget( anchor ) {
   console.debug( "Highlighting target '%s'.", anchor );
-  $("a[name]").each( function() {
-    if ( $(this).attr("name") == anchor ) {
-      if ( !$(this).parent().parent().hasClass('target-section') ) {
-        console.debug( "Wrapping the target-section" );
-        $('div.method-detail').unwrap( 'div.target-section' );
-        $(this).parent().wrap( '<div class="target-section"></div>' );
-      } else {
-        console.debug( "Already wrapped." );
-      }
+  $("a[name=" + anchor + "]").each( function() {
+    if ( !$(this).parent().parent().hasClass('target-section') ) {
+      console.debug( "Wrapping the target-section" );
+      $('div.method-detail').unwrap( 'div.target-section' );
+      $(this).parent().wrap( '<div class="target-section"></div>' );
+    } else {
+      console.debug( "Already wrapped." );
     }
   });
 };
 function highlightLocationTarget() {
   console.debug( "Location hash: %s", window.location.hash );
   if ( ! window.location.hash || window.location.hash.length == 0 ) return;
   var anchor = window.location.hash.substring(1);
   console.debug( "Found anchor: %s; matching %s", anchor, "a[name=" + anchor + "]" );
   highlightTarget( anchor );
 };
