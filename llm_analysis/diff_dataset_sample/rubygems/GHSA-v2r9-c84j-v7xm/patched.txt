# ====================================================================
# FILE: lib/rdoc.rb
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-31 ---
     1| $DEBUG_RDOC = nil
     2| module RDoc
     3|   class Error < RuntimeError; end
     4|   def self.const_missing const_name # :nodoc:
     5|     if const_name.to_s == 'RDocError' then
     6|       warn "RDoc::RDocError is deprecated and will be removed in RDoc 4"
     7|       return Error
     8|     end
     9|     super
    10|   end
    11|   VERSION = '3.12.1'
    12|   VISIBILITIES = [:public, :protected, :private]
    13|   DOT_DOC_FILENAME = ".document"
    14|   GENERAL_MODIFIERS = %w[nodoc].freeze
    15|   CLASS_MODIFIERS = GENERAL_MODIFIERS
    16|   ATTR_MODIFIERS = GENERAL_MODIFIERS
    17|   CONSTANT_MODIFIERS = GENERAL_MODIFIERS
    18|   METHOD_MODIFIERS = GENERAL_MODIFIERS +
    19|     %w[arg args yield yields notnew not-new not_new doc]
    20|   def self.load_yaml
    21|     begin
    22|       gem 'psych'
    23|     rescue Gem::LoadError
    24|     end
    25|     begin
    26|       require 'psych'
    27|     rescue ::LoadError
    28|     ensure
    29|       require 'yaml'
    30|     end
    31|   end


# ====================================================================
# FILE: lib/rdoc/generator/template/darkfish/js/darkfish.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 64-112 ---
    64|     var html = '';
    65|     html += '<p class="search-match"><a href="' + rdoc_rel_prefix + result.path + '">' + this.hlt(result.title);
    66|     if (result.params)
    67|       html += '<span class="params">' + result.params + '</span>';
    68|     html += '</a>';
    69|     if (result.namespace)
    70|       html += '<p class="search-namespace">' + this.hlt(result.namespace);
    71|     if (result.snippet)
    72|       html += '<div class="search-snippet">' + result.snippet + '</div>';
    73|     li.innerHTML = html;
    74|     return li;
    75|   }
    76|   search.select = function(result) {
    77|     var result_element = result.get(0);
    78|     window.location.href = result_element.firstChild.firstChild.href;
    79|   }
    80|   search.scrollIntoView = search.scrollInWindow;
    81| };
    82| function highlightTarget( anchor ) {
    83|   console.debug( "Highlighting target '%s'.", anchor );
    84|   $("a[name]").each( function() {
    85|     if ( $(this).attr("name") == anchor ) {
    86|       if ( !$(this).parent().parent().hasClass('target-section') ) {
    87|         console.debug( "Wrapping the target-section" );
    88|         $('div.method-detail').unwrap( 'div.target-section' );
    89|         $(this).parent().wrap( '<div class="target-section"></div>' );
    90|       } else {
    91|         console.debug( "Already wrapped." );
    92|       }
    93|     }
    94|   });
    95| };
    96| function highlightLocationTarget() {
    97|   console.debug( "Location hash: %s", window.location.hash );
    98|   if ( ! window.location.hash || window.location.hash.length == 0 ) return;
    99|   var anchor = window.location.hash.substring(1);
   100|   console.debug( "Found anchor: %s; matching %s", anchor, "a[name=" + anchor + "]" );
   101|   highlightTarget( anchor );
   102| };
   103| function highlightClickTarget( event ) {
   104|   console.debug( "Highlighting click target for event %o", event.target );
   105|   try {
   106|     var anchor = $(event.target).attr( 'href' ).substring(1);
   107|     console.debug( "Found target anchor: %s", anchor );
   108|     highlightTarget( anchor );
   109|   } catch ( err ) {
   110|     console.error( "Exception while highlighting: %o", err );
   111|   };
   112| };

