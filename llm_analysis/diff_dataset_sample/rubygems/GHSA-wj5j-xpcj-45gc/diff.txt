--- a/app/controllers/devise/invitations_controller.rb
+++ b/app/controllers/devise/invitations_controller.rb
@@ -33,28 +33,28 @@
     else
       respond_with_navigational(resource){ render :edit }
     end
   end
   def destroy
     resource.destroy
     set_flash_message :notice, :invitation_removed
     redirect_to after_sign_out_path_for(resource_name)
   end
   protected
-  def invite_resource(&block)
-    resource_class.invite!(invite_params, current_inviter, &block)
+  def invite_resource
+    resource_class.invite!(invite_params, current_inviter)
   end
   def accept_resource
     resource_class.accept_invitation!(update_resource_params)
   end
   def current_inviter
-    authenticate_inviter!
+    @current_inviter ||= authenticate_inviter!
   end
   def has_invitations_left?
     unless current_inviter.nil? || current_inviter.has_invitations_left?
       self.resource = resource_class.new
       set_flash_message :alert, :no_invitations_remaining
       respond_with_navigational(resource) { render :new }
     end
   end
   def resource_from_invitation_token
     unless params[:invitation_token] && self.resource = resource_class.find_by_invitation_token(params[:invitation_token], true)

--- a/lib/devise_invitable/model.rb
+++ b/lib/devise_invitable/model.rb
@@ -18,21 +18,21 @@
           if !counter_cache && Devise.invited_by_class_name
             klass = Devise.invited_by_class_name.constantize
             counter_cache = klass.table_exists? && klass.columns_hash['invitations_count'].try('name')
           end
           belongs_to_options.merge! :counter_cache => counter_cache if counter_cache
         end
         belongs_to :invited_by, belongs_to_options
         include ActiveSupport::Callbacks
         define_callbacks :invitation_accepted
         attr_writer :skip_password
-        scope :no_active_invitation, lambda { where(:invitation_token => nil) }
+        scope :active, lambda { where(:invitation_token => nil) }
         if defined?(Mongoid) && defined?(Mongoid::Document) && self < Mongoid::Document
           scope :invitation_not_accepted, lambda { where(:invitation_accepted_at => nil, :invitation_token.ne => nil) }
           scope :invitation_accepted, lambda { where(:invitation_accepted_at.ne => nil) }
         else
           scope :invitation_not_accepted, lambda { where(arel_table[:invitation_token].not_eq(nil)).where(:invitation_accepted_at => nil) }
           scope :invitation_accepted, lambda { where(arel_table[:invitation_accepted_at].not_eq(nil)) }
           [:before_invitation_accepted, :after_invitation_accepted].each do |callback_method|
             send callback_method
           end
         end

--- a/lib/devise_invitable/version.rb
+++ b/lib/devise_invitable/version.rb
@@ -1,3 +1,3 @@
 module DeviseInvitable
-  VERSION = '1.3.5'
+  VERSION = '1.3.4'
 end

--- a/lib/generators/active_record/devise_invitable_generator.rb
+++ b/lib/generators/active_record/devise_invitable_generator.rb
@@ -1,11 +1,11 @@
 require 'rails/generators/active_record'
 module ActiveRecord
   module Generators
     class DeviseInvitableGenerator < ActiveRecord::Generators::Base
       source_root File.expand_path("../templates", __FILE__)
       def copy_devise_migration
-        migration_template "migration.rb", "db/migrate/devise_invitable_add_to_#{table_name}.rb"
+        migration_template "migration.rb", "db/migrate/devise_invitable_add_to_#{table_name}"
       end
     end
   end
 end

--- a/lib/generators/active_record/templates/migration.rb
+++ b/lib/generators/active_record/templates/migration.rb
@@ -15,16 +15,12 @@
     change_column_null :<%= table_name %>, :encrypted_password, true
 <% if class_name.constantize.columns_hash['password_salt'] -%>
     change_column_null :<%= table_name %>, :password_salt,      true
 <% end -%>
   end
   def down
     change_table :<%= table_name %> do |t|
       t.remove_references :invited_by, :polymorphic => true
       t.remove :invitations_count, :invitation_limit, :invitation_sent_at, :invitation_accepted_at, :invitation_token, :invitation_created_at
     end
-    change_column_null    :users, :encrypted_password, false
-<% if class_name.constantize.columns_hash['password_salt'] -%>
-    change_column_null :<%= table_name %>, :password_salt,false
-<% end -%>
   end
 end
