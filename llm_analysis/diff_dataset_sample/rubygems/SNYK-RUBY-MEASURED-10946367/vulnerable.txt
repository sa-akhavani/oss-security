# ====================================================================
# FILE: lib/measured/cache/json.rb
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-26 ---
     1| module Measured::Cache
     2|   class Json
     3|     attr_reader :filename, :path
     4|     def initialize(filename)
     5|       @filename = filename
     6|       @path = Pathname.new(File.join(File.dirname(__FILE__), "../../../cache", @filename)).cleanpath
     7|     end
     8|     def exist?
     9|       File.exist?(@path)
    10|     end
    11|     def read
    12|       return unless exist?
    13|       decode(JSON.load(File.read(@path), nil, freeze: true))
    14|     end
    15|     def write(table)
    16|       raise ArgumentError, "Cannot overwrite file cache at runtime."
    17|     end
    18|     private
    19|     def encode(table)
    20|       table.each_with_object(table.dup) do |(k1, v1), accu|
    21|         v1.each do |k2, v2|
    22|           if v2.is_a?(Rational)
    23|             accu[k1][k2] = { "numerator" => v2.numerator, "denominator" => v2.denominator }
    24|           end
    25|         end
    26|       end


# ====================================================================
# FILE: lib/measured/version.rb
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-3 ---
     1| module Measured
     2|   VERSION = "3.2.0"
     3| end

