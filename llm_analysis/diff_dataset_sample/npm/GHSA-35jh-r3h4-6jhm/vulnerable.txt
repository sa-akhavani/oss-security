# ====================================================================
# FILE: build.js
# Total hunks: 15
# ====================================================================
# --- HUNK 1: Lines 53-93 ---
    53|     'rest': ['drop', 'tail'],
    54|     'some': ['any'],
    55|     'uniq': ['unique']
    56|   };
    57|   /** Used to track function dependencies */
    58|   var dependencyMap = {
    59|     'after': [],
    60|     'assign': ['isArray', 'forEach', 'forOwn'],
    61|     'at': ['isString'],
    62|     'bind': ['isFunction', 'isObject'],
    63|     'bindAll': ['bind', 'functions'],
    64|     'bindKey': ['isFunction', 'isObject'],
    65|     'clone': ['assign', 'forEach', 'forOwn', 'isArray', 'isObject'],
    66|     'cloneDeep': ['clone'],
    67|     'compact': [],
    68|     'compose': [],
    69|     'contains': ['indexOf', 'isString'],
    70|     'countBy': ['forEach', 'identity', 'isEqual', 'keys'],
    71|     'debounce': [],
    72|     'defaults': ['isArray', 'forEach', 'forOwn'],
    73|     'defer': [],
    74|     'delay': [],
    75|     'difference': ['indexOf'],
    76|     'escape': [],
    77|     'every': ['identity', 'isArray', 'isEqual', 'keys'],
    78|     'filter': ['identity', 'isArray', 'isEqual', 'keys'],
    79|     'find': ['forEach', 'identity', 'isEqual', 'keys'],
    80|     'first': [],
    81|     'flatten': ['isArray'],
    82|     'forEach': ['identity', 'isArguments', 'isArray', 'isString'],
    83|     'forIn': ['identity', 'isArguments'],
    84|     'forOwn': ['identity', 'isArguments'],
    85|     'functions': ['forIn', 'isFunction'],
    86|     'groupBy': ['forEach', 'identity', 'isEqual', 'keys'],
    87|     'has': [],
    88|     'identity': [],
    89|     'indexOf': ['sortedIndex'],
    90|     'initial': [],
    91|     'intersection': ['indexOf'],
    92|     'invert': ['keys'],
    93|     'invoke': ['forEach'],

# --- HUNK 2: Lines 410-479 ---
   410|         parts[2] + parts[3] + ' (Custom Build)' + parts[4] + '\n' +
   411|         parts[1] + ' Build: `lodash ' + commands.join(' ') + '`'
   412|       );
   413|     });
   414|   }
   415|   /**
   416|    * Compiles template files matched by the given file path `pattern` into a
   417|    * single source, extending `_.templates` with precompiled templates named after
   418|    * each template file's basename.
   419|    *
   420|    * @private
   421|    * @param {String} [pattern='<cwd>/*.jst'] The file path pattern.
   422|    * @param {Object} options The options object.
   423|    * @returns {String} Returns the compiled source.
   424|    */
   425|   function buildTemplate(pattern, options) {
   426|     pattern || (pattern = path.join(cwd, '*.jst'));
   427|     var directory = path.dirname(pattern);
   428|     var source = [
   429|       ';(function(window) {',
   430|       "  var freeExports = typeof exports == 'object' && exports &&",
   431|       "    (typeof global == 'object' && global && global == global.global && (window = global), exports);",
   432|       '',
   433|       '  var templates = {},',
   434|       '      _ = window._;',
   435|       ''
   436|     ];
   437|     pattern = RegExp(
   438|       path.basename(pattern)
   439|         .replace(/[.+?^=!:${}()|[\]\/\\]/g, '\\$&')
   440|         .replace(/\*/g, '.*?') + '$'
   441|     );
   442|     fs.readdirSync(directory).forEach(function(filename) {
   443|       var filePath = path.join(directory, filename);
   444|       if (pattern.test(filename)) {
   445|         var text = fs.readFileSync(filePath, 'utf8'),
   446|             precompiled = getFunctionSource(_.template(text, null, options)),
   447|             prop = filename.replace(/\..*$/, '');
   448|         source.push("  templates['" + prop.replace(/['\n\r\t]/g, '\\$&') + "'] = " + precompiled + ';', '');
   449|       }
   450|     });
   451|     source.push(
   452|       "  if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {",
   453|       "    define(['" + options.moduleId + "'], function(lodash) {",
   454|       '      _ = lodash;',
   455|       '      lodash.templates = lodash.extend(lodash.templates || {}, templates);',
   456|       '    });',
   457|       "  } else if (freeExports) {",
   458|       "    if (typeof module == 'object' && module && module.exports == freeExports) {",
   459|       '      (module.exports = templates).templates = templates;',
   460|       '    } else {',
   461|       '      freeExports.templates = templates;',
   462|       '    }',
   463|       '  } else if (_) {',
   464|       '    _.templates = _.extend(_.templates || {}, templates);',
   465|       '  }',
   466|       '}(this));'
   467|     );
   468|     return source.join('\n');
   469|   }
   470|   /**
   471|    * Capitalizes a given string.
   472|    *
   473|    * @private
   474|    * @param {String} string The string to capitalize.
   475|    * @returns {String} Returns the capitalized string.
   476|    */
   477|   function capitalize(string) {
   478|     return string[0].toUpperCase() + string.toLowerCase().slice(1);
   479|   }

# --- HUNK 3: Lines 519-559 ---
   519|       '                         (i.e. “amd”, “commonjs”, “global”, “node”, and “none”)',
   520|       '    lodash iife=...      Code to replace the immediately-invoked function expression that wraps Lo-Dash',
   521|       '                         (e.g. `lodash iife="!function(window,undefined){%output%}(this)"`)',
   522|       '',
   523|       '    lodash template=...  File path pattern used to match template files to precompile',
   524|       '                         (e.g. `lodash template=./*.jst`)',
   525|       '    lodash settings=...  Template settings used when precompiling templates',
   526|       '                         (e.g. `lodash settings="{interpolate:/{{([\\s\\S]+?)}}/g}"`)',
   527|       '    lodash moduleId=...  The AMD module ID of Lo-Dash, which defaults to “lodash”, used by precompiled templates',
   528|       '',
   529|       '    All arguments, except `legacy` with `csp`, `mobile`, `modern`, or `underscore`, may be combined.',
   530|       '    Unless specified by `-o` or `--output`, all files created are saved to the current working directory.',
   531|       '',
   532|       '  Options:',
   533|       '',
   534|       '    -c, --stdout      Write output to standard output',
   535|       '    -d, --debug       Write only the non-minified development output',
   536|       '    -h, --help        Display help information',
   537|       '    -m, --minify      Write only the minified production output',
   538|       '    -o, --output      Write output to a given path/filename',
   539|       '    -p, --source-map  Generate a source map for the minified output',
   540|       '    -s, --silent      Skip status updates normally logged to the console',
   541|       '    -V, --version     Output current version of Lo-Dash',
   542|       ''
   543|     ].join('\n'));
   544|   }
   545|   /**
   546|    * Gets the aliases associated with a given function name.
   547|    *
   548|    * @private
   549|    * @param {String} methodName The name of the method to get aliases for.
   550|    * @returns {Array} Returns an array of aliases.
   551|    */
   552|   function getAliases(methodName) {
   553|     return realToAliasMap[methodName] || [];
   554|   }
   555|   /**
   556|    * Gets the category of the given method name.
   557|    *
   558|    * @private
   559|    * @param {String} source The source to inspect.

# --- HUNK 4: Lines 839-879 ---
   839|     return source;
   840|   }
   841|   /**
   842|    * Removes all `hasEnumPrototype` references from `source`.
   843|    *
   844|    * @private
   845|    * @param {String} source The source to process.
   846|    * @returns {String} Returns the modified source.
   847|    */
   848|   function removeHasEnumPrototype(source) {
   849|     source = removeFromCreateIterator(source, 'hasEnumPrototype');
   850|     source = source.replace(/(?:\n +\/\*[^*]*\*+(?:[^\/][^*]*\*+)*\/)?\n *var hasEnumPrototype\b.*|.+?hasEnumPrototype *=.+/g, '');
   851|     source = source.replace(matchFunction(source, 'keys'), function(match) {
   852|       return match
   853|         .replace(/\(hasEnumPrototype[^)]+\)(?:\s*\|\|\s*)?/, '')
   854|         .replace(/\s*if *\(\s*\)[^}]+}/, '');
   855|     });
   856|     source = source.replace(getIteratorTemplate(source), function(match) {
   857|       return match
   858|         .replace(/(?: *\/\/.*\n)* *["'] *(?:<% *)?if *\(hasEnumPrototype *(?:&&|\))[\s\S]+?<% *} *(?:%>|["']).+/g, '')
   859|         .replace(/hasEnumPrototype *\|\|/g, '');
   860|     });
   861|     return source;
   862|   }
   863|   /**
   864|    * Removes the `_.isArguments` fallback from `source`.
   865|    *
   866|    * @private
   867|    * @param {String} source The source to process.
   868|    * @returns {String} Returns the modified source.
   869|    */
   870|   function removeIsArgumentsFallback(source) {
   871|     return source.replace(getIsArgumentsFallback(source), '');
   872|   }
   873|   /**
   874|    * Removes the `_.isFunction` fallback from `source`.
   875|    *
   876|    * @private
   877|    * @param {String} source The source to process.
   878|    * @returns {String} Returns the modified source.
   879|    */

# --- HUNK 5: Lines 904-944 ---
   904|   function removeKeysOptimization(source) {
   905|     source = removeVar(source, 'isKeysFast');
   906|     source = source.replace(getIteratorTemplate(source), function(match) {
   907|       return match.replace(/(?: *\/\/.*\n)* *["']( *)<% *if *\(isKeysFast[\s\S]+?["']\1<% *} *else *{ *%>.+\n([\s\S]+?) *["']\1<% *} *%>.+/, "'\\n' +\n$2");
   908|     });
   909|     return source;
   910|   }
   911|   /**
   912|    * Removes all `noArgsClass` references from `source`.
   913|    *
   914|    * @private
   915|    * @param {String} source The source to process.
   916|    * @returns {String} Returns the modified source.
   917|    */
   918|   function removeNoArgsClass(source) {
   919|     source = removeVar(source, 'noArgsClass');
   920|     source = source.replace(getIsArgumentsFallback(source), function(match) {
   921|       return match.replace(/noArgsClass/g, '!isArguments(arguments)');
   922|     });
   923|     source = source.replace(matchFunction(source, 'isEmpty'), function(match) {
   924|       return match.replace(/ *\|\| *\(noArgsClass *&&[^)]+?\)\)/g, '');
   925|     });
   926|     return source;
   927|   }
   928|   /**
   929|    * Removes all `noCharByIndex` references from `source`.
   930|    *
   931|    * @private
   932|    * @param {String} source The source to process.
   933|    * @returns {String} Returns the modified source.
   934|    */
   935|   function removeNoCharByIndex(source) {
   936|     source = removeVar(source, 'noCharByIndex');
   937|     source = source.replace(matchFunction(source, 'at'), function(match) {
   938|       return match.replace(/^ *if *\(noCharByIndex[^}]+}\n/m, '');
   939|     });
   940|     source = source.replace(matchFunction(source, 'reduceRight'), function(match) {
   941|       return match.replace(/}\s*else if *\(noCharByIndex[^}]+/, '');
   942|     });
   943|     source = source.replace(matchFunction(source, 'toArray'), function(match) {
   944|       return match.replace(/noCharByIndex[^:]+:/, '');

# --- HUNK 6: Lines 951-1024 ---
   951|     return source;
   952|   }
   953|   /**
   954|    * Removes all `nonEnumArgs` references from `source`.
   955|    *
   956|    * @private
   957|    * @param {String} source The source to process.
   958|    * @returns {String} Returns the modified source.
   959|    */
   960|   function removeNonEnumArgs(source) {
   961|     source = removeFromCreateIterator(source, 'nonEnumArgs');
   962|     source = source.replace(/(?:\n +\/\*[^*]*\*+(?:[^\/][^*]*\*+)*\/)?\n *var nonEnumArgs\b.*|.+?nonEnumArgs *=.+/g, '');
   963|     source = source.replace(matchFunction(source, 'keys'), function(match) {
   964|       return match
   965|         .replace(/(?:\s*\|\|\s*)?\(nonEnumArgs[^)]+\)\)/, '')
   966|         .replace(/\s*if *\(\s*\)[^}]+}/, '');
   967|     });
   968|     source = source.replace(getIteratorTemplate(source), function(match) {
   969|       return match
   970|         .replace(/(?: *\/\/.*\n)*( *["'] *)<% *} *else *if *\(nonEnumArgs[\s\S]+?(\1<% *} *%>.+)/, '$2')
   971|         .replace(/ *\|\| *nonEnumArgs/, '');
   972|     });
   973|     return source;
   974|   }
   975|   /**
   976|    * Removes all `noNodeClass` references from `source`.
   977|    *
   978|    * @private
   979|    * @param {String} source The source to process.
   980|    * @returns {String} Returns the modified source.
   981|    */
   982|   function removeNoNodeClass(source) {
   983|     source = source.replace(/(?:\n +\/\*[^*]*\*+(?:[^\/][^*]*\*+)*\/)?\n *try *{(?:\s*\/\/.*)*\n *var noNodeClass[\s\S]+?catch[^}]+}\n/, '');
   984|     source = source.replace(matchFunction(source, 'shimIsPlainObject'), function(match) {
   985|       return match.replace(/ *&& *\(!noNodeClass[\s\S]+?\)\)/, '');
   986|     });
   987|     source = source.replace(matchFunction(source, 'clone'), function(match) {
   988|       return match.replace(/ *\|\| *\(noNodeClass[\s\S]+?\)\)/, '');
   989|     });
   990|     source = source.replace(matchFunction(source, 'isEqual'), function(match) {
   991|       return match.replace(/ *\|\| *\(noNodeClass[\s\S]+?\)\)\)/, '');
   992|     });
   993|     return source;
   994|   }
   995|   /**
   996|    * Removes all `hasObjectSpliceByg` references from `source`.
   997|    *
   998|    * @private
   999|    * @param {String} source The source to process.
  1000|    * @returns {String} Returns the modified source.
  1001|    */
  1002|   function removeHasObjectSpliceBug(source) {
  1003|     return removeVar(source, 'hasObjectSpliceBug')
  1004|       .replace(/(?:\s*\/\/.*)*\n( *)if *\(hasObjectSpliceBug[\s\S]+?(?:{\s*}|\n\1})/, '');
  1005|   }
  1006|   /**
  1007|    * Removes a given variable from `source`.
  1008|    *
  1009|    * @private
  1010|    * @param {String} source The source to process.
  1011|    * @param {String} varName The name of the variable to remove.
  1012|    * @returns {String} Returns the modified source.
  1013|    */
  1014|   function removeVar(source, varName) {
  1015|     if (/^(?:cloneableClasses|ctorByClass|hasObjectSpliceBug)$/.test(varName)) {
  1016|       source = source.replace(RegExp('(var ' + varName + ' *=)[\\s\\S]+?\\n\\n'), '$1=null;\n\n');
  1017|     }
  1018|     source = source.replace(RegExp(
  1019|       '(?:\\n +/\\*[^*]*\\*+(?:[^/][^*]*\\*+)*/)?\\n' +
  1020|       '( *)var ' + varName + ' *= *(?:.+?(?:;|&&\\n[^;]+;)|(?:\\w+\\(|{)[\\s\\S]+?\\n\\1.+?;)\\n|' +
  1021|       '\\n +' + varName + ' *=.+?,'
  1022|     ), '');
  1023|     source = source.replace(RegExp('(var +)' + varName + ' *=.+?,\\s+'), '$1');
  1024|     source = source.replace(RegExp(',\\s*' + varName + ' *=.+?;'), ';');

# --- HUNK 7: Lines 1080-1142 ---
  1080|   function setUseStrictOption(source, value) {
  1081|     source = source.replace(/^([\s\S]*?function[^{]+{)(?:\s*'use strict';)?/, '$1' + (value ? "\n  'use strict';" : ''));
  1082|     source = source.replace(getIteratorTemplate(source), function(match) {
  1083|       return match.replace(/(template\()(?:\s*"'use strict.+)?/, '$1' + (value ? '\n    "\'use strict\';\\n" +' : ''));
  1084|     });
  1085|     return source;
  1086|   }
  1087|   /*--------------------------------------------------------------------------*/
  1088|   /**
  1089|    * Creates a debug and/or minified build, executing the `callback` for each.
  1090|    * The `callback` is invoked with two arguments; (filePath, outputSource).
  1091|    *
  1092|    * Note: For a list of commands see `displayHelp()` or run `lodash --help`.
  1093|    *
  1094|    * @param {Array} [options=[]] An array of commands.
  1095|    * @param {Function} callback The function called per build.
  1096|    */
  1097|   function build(options, callback) {
  1098|     options || (options = []);
  1099|     var debugSource;
  1100|     var invalidArgs = _.reject(options.slice(options[0] == 'node' ? 2 : 0), function(value, index, options) {
  1101|       if (/^(?:-o|--output)$/.test(options[index - 1]) ||
  1102|           /^(?:category|exclude|exports|iife|include|moduleId|minus|plus|settings|template)=.*$/.test(value)) {
  1103|         return true;
  1104|       }
  1105|       return [
  1106|         'backbone',
  1107|         'csp',
  1108|         'legacy',
  1109|         'mobile',
  1110|         'modern',
  1111|         'modularize',
  1112|         'strict',
  1113|         'underscore',
  1114|         '-c', '--stdout',
  1115|         '-d', '--debug',
  1116|         '-h', '--help',
  1117|         '-m', '--minify',
  1118|         '-o', '--output',
  1119|         '-p', '--source-map',
  1120|         '-s', '--silent',
  1121|         '-V', '--version'
  1122|       ].indexOf(value) > -1;
  1123|     });
  1124|     if (invalidArgs.length) {
  1125|       console.log(
  1126|         '\n' +
  1127|         'Invalid argument' + (invalidArgs.length > 1 ? 's' : '') +
  1128|         ' passed: ' + invalidArgs.join(', ')
  1129|       );
  1130|       displayHelp();
  1131|       return;
  1132|     }
  1133|     if (_.find(options, function(arg) {
  1134|           return /^(?:-h|--help)$/.test(arg);
  1135|         })) {
  1136|       displayHelp();
  1137|       return;
  1138|     }
  1139|     if (_.find(options, function(arg) {
  1140|           return /^(?:-V|--version)$/.test(arg);
  1141|         })) {
  1142|       console.log(_.VERSION);

# --- HUNK 8: Lines 1218-1284 ---
  1218|       }, []);
  1219|       var minusMethods = options.reduce(function(accumulator, value) {
  1220|         return /exclude|minus/.test(value)
  1221|           ? _.union(accumulator, optionToMethodsArray(source, value))
  1222|           : accumulator;
  1223|       }, []);
  1224|       var plusMethods = options.reduce(function(accumulator, value) {
  1225|         return /plus/.test(value)
  1226|           ? _.union(accumulator, optionToMethodsArray(source, value))
  1227|           : accumulator;
  1228|       }, []);
  1229|       if (isUnderscore) {
  1230|         var methods = _.without.apply(_, [_.union(includeMethods, plusMethods)].concat(minusMethods));
  1231|         exposeAssign = methods.indexOf('assign') > -1;
  1232|         exposeForIn = methods.indexOf('forIn') > -1;
  1233|         exposeForOwn = methods.indexOf('forOwn') > -1;
  1234|         exposeIsPlainObject = methods.indexOf('isPlainObject') > -1;
  1235|         methods = _.without.apply(_, [plusMethods].concat(minusMethods));
  1236|         useUnderscoreClone = methods.indexOf('clone') < 0;
  1237|       }
  1238|       if (isModern || isUnderscore) {
  1239|         dependencyMap.reduceRight = _.without(dependencyMap.reduceRight, 'isEqual', 'isString');
  1240|       }
  1241|       if (isUnderscore) {
  1242|         dependencyMap.contains = _.without(dependencyMap.contains, 'isString');
  1243|         dependencyMap.countBy = _.without(dependencyMap.countBy, 'isEqual', 'keys');
  1244|         dependencyMap.every = _.without(dependencyMap.every, 'isEqual', 'keys');
  1245|         dependencyMap.filter = _.without(dependencyMap.filter, 'isEqual');
  1246|         dependencyMap.find = _.without(dependencyMap.find, 'isEqual', 'keys');
  1247|         dependencyMap.groupBy = _.without(dependencyMap.groupBy, 'isEqual', 'keys');
  1248|         dependencyMap.isEqual = _.without(dependencyMap.isEqual, 'forIn', 'isArguments');
  1249|         dependencyMap.isEmpty = ['isArray', 'isString'];
  1250|         dependencyMap.map = _.without(dependencyMap.map, 'isEqual', 'keys');
  1251|         dependencyMap.max = _.without(dependencyMap.max, 'isEqual', 'isString', 'keys');
  1252|         dependencyMap.min = _.without(dependencyMap.min, 'isEqual', 'isString', 'keys');
  1253|         dependencyMap.pick = _.without(dependencyMap.pick, 'forIn', 'isObject');
  1254|         dependencyMap.reduce = _.without(dependencyMap.reduce, 'isEqual', 'keys');
  1255|         dependencyMap.reject = _.without(dependencyMap.reject, 'isEqual', 'keys');
  1256|         dependencyMap.some = _.without(dependencyMap.some, 'isEqual', 'keys');
  1257|         dependencyMap.sortBy = _.without(dependencyMap.sortBy, 'isEqual', 'keys');
  1258|         dependencyMap.sortedIndex = _.without(dependencyMap.sortedIndex, 'isEqual', 'keys');
  1259|         dependencyMap.template = _.without(dependencyMap.template, 'keys', 'values');
  1260|         dependencyMap.uniq = _.without(dependencyMap.uniq, 'isEqual', 'keys');
  1261|         dependencyMap.where.push('find', 'isEmpty');
  1262|         if (useUnderscoreClone) {
  1263|           dependencyMap.clone = _.without(dependencyMap.clone, 'forEach', 'forOwn');
  1264|         }
  1265|       }
  1266|       if (includeMethods.length) {
  1267|         result = getDependencies(includeMethods);
  1268|       }
  1269|       if (isBackbone && !result) {
  1270|         result = getDependencies(backboneDependencies);
  1271|       }
  1272|       else if (isUnderscore && !result) {
  1273|         result = getDependencies(underscoreMethods);
  1274|       }
  1275|       if (categories.length) {
  1276|         result = _.union(result || [], getDependencies(categories.reduce(function(accumulator, category) {
  1277|           return accumulator.concat(getMethodsByCategory(source, capitalize(category)));
  1278|         }, [])));
  1279|       }
  1280|       if (!result) {
  1281|         result = allMethods.slice();
  1282|       }
  1283|       if (plusMethods.length) {
  1284|         result = _.union(result, getDependencies(plusMethods));

# --- HUNK 9: Lines 1728-1775 ---
  1728|     /*------------------------------------------------------------------------*/
  1729|     if (isTemplate) {
  1730|       source = buildTemplate(templatePattern, templateSettings);
  1731|     }
  1732|     else {
  1733|       allMethods.forEach(function(otherName) {
  1734|         if (!_.contains(buildMethods, otherName)) {
  1735|           source = removeFunction(source, otherName);
  1736|         }
  1737|       });
  1738|       if (isRemoved(source, 'isArguments')) {
  1739|         source = removeIsArgumentsFallback(source);
  1740|       }
  1741|       source = source.replace(matchFunction(source, 'template'), function(match) {
  1742|         return match
  1743|           .replace(/iteratorTemplate *&& */g, '')
  1744|           .replace(/iteratorTemplate *\? *([^:]+?) *:[^,;]+/g, '$1');
  1745|       });
  1746|       /*----------------------------------------------------------------------*/
  1747|       if (isLegacy) {
  1748|         _.each(['isBindFast', 'isV8', 'nativeBind', 'nativeIsArray', 'nativeKeys', 'reNative'], function(varName) {
  1749|           source = removeVar(source, varName);
  1750|         });
  1751|         source = source.replace(matchFunction(source, 'bind'), function(match) {
  1752|           return match.replace(/(?:\s*\/\/.*)*\s*return isBindFast[^:]+:\s*/, 'return ');
  1753|         });
  1754|         source = source.replace(matchFunction(source, 'isArray'), function(match) {
  1755|           return match.replace(/nativeIsArray * \|\|/, '');
  1756|         });
  1757|         if (!isRemoved(source, 'keys')) {
  1758|           source = source.replace(
  1759|             matchFunction(source, 'keys').replace(/[\s\S]+?var keys *= */, ''),
  1760|             matchFunction(source, 'shimKeys').replace(/[\s\S]+?function shimKeys/, 'function').replace(/}\n$/, '};\n')
  1761|           );
  1762|           source = removeFunction(source, 'shimKeys');
  1763|         }
  1764|         if (!isRemoved(source, 'isArguments')) {
  1765|           source = source.replace(
  1766|             matchFunction(source, 'isArguments').replace(/[\s\S]+?function isArguments/, ''),
  1767|             getIsArgumentsFallback(source).match(/isArguments *= *function([\s\S]+?) *};/)[1] + '  }\n'
  1768|           );
  1769|           source = removeIsArgumentsFallback(source);
  1770|         }
  1771|       }
  1772|       if (isModern) {
  1773|         source = removeArgsAreObjects(source);
  1774|         source = removeHasObjectSpliceBug(source);
  1775|         source = removeIsArgumentsFallback(source);

# --- HUNK 10: Lines 1840-1918 ---
  1840|         source = source.replace(matchFunction(source, 'some'), function(match) {
  1841|           return match.replace(/!\(result *= *(.+?)\);/, '(result = $1) && indicatorObject;');
  1842|         });
  1843|       }
  1844|       if (!(isMobile || isUnderscore)) {
  1845|         source = source.replace(getIteratorTemplate(source), function() {
  1846|           var snippet = getFunctionSource(lodash._iteratorTemplate);
  1847|           iteratorOptions.forEach(function(property) {
  1848|             snippet = snippet.replace(RegExp('([^\\w.])\\b' + property + '\\b', 'g'), '$1obj.' + property);
  1849|           });
  1850|           snippet = snippet
  1851|             .replace(/var __t.+/, "var __p = '';")
  1852|             .replace(/function print[^}]+}/, '')
  1853|             .replace(/'(?:\\n|\s)+'/g, "''")
  1854|             .replace(/__p *\+= *' *';/g, '')
  1855|             .replace(/(__p *\+= *)' *' *\+/g, '$1')
  1856|             .replace(/({) *;|; *(})/g, '$1$2')
  1857|             .replace(/\(\(__t *= *\( *([^)]+) *\)\) *== *null *\? *'' *: *__t\)/g, '($1)');
  1858|           snippet = snippet.replace(/ *with *\(.+?\) *{/, '\n').replace(/}([^}]*}[^}]*$)/, '$1');
  1859|           snippet = snippet
  1860|             .replace(/obj *\|\| *\(obj *= *{}\);/, '')
  1861|             .replace(/var __p = '';\s*__p \+=/, 'var __p =');
  1862|           snippet = snippet.replace(/\s*\/\/.*(?:\n|$)/g, '');
  1863|           return '  var iteratorTemplate = ' + snippet + ';\n';
  1864|         });
  1865|       }
  1866|     }
  1867|     /*------------------------------------------------------------------------*/
  1868|     (function() {
  1869|       if (isIIFE) {
  1870|         var token = '%output%',
  1871|             index = iife.indexOf(token);
  1872|         source = source.match(/^\/\**[\s\S]+?\*\/\n/) +
  1873|           iife.slice(0, index) +
  1874|           source.replace(/^[\s\S]+?\(function[^{]+?{|}\(this\)\)[;\s]*$/g, '') +
  1875|           iife.slice(index + token.length);
  1876|       }
  1877|     }());
  1878|     /*------------------------------------------------------------------------*/
  1879|     (function() {
  1880|       if (!isAMD) {
  1881|         source = source.replace(/(?: *\/\/.*\n)*( *)if *\(typeof +define[\s\S]+?else /, '$1');
  1882|       }
  1883|       if (!isNode) {
  1884|         source = source.replace(/(?: *\/\/.*\n)*( *)if *\(typeof +module[\s\S]+?else *{([\s\S]+?\n)\1}\n/, '$1$2');
  1885|       }
  1886|       if (!isCommonJS) {
  1887|         source = source.replace(/(?: *\/\/.*\n)*(?:( *)else *{)?\s*freeExports\.\w+ *=[\s\S]+?(?:\n\1})?\n/, '');
  1888|       }
  1889|       if (!isGlobal) {
  1890|         source = source.replace(/(?:( *)(})? *else(?: *if *\(_\))? *{)?(?:\s*\/\/.*)*\s*(?:window\._|_\.templates) *=[\s\S]+?(?:\n\1})?\n/g, '$1$2\n');
  1891|       }
  1892|       if (isAMD && isGlobal) {
  1893|         source = source.replace(/(?: *\/\/.*\n)* *(?:else )?if *\(freeExports\) *{\s*}\n/, '');
  1894|       } else {
  1895|         source = source.replace(/(?: *\/\/.*\n)* *(?:else )?if *\(freeExports\) *{\s*}(?:\s*else *{([\s\S]+?) *})?\n/, '$1\n');
  1896|       }
  1897|       if ((source.match(/\bfreeExports\b/g) || []).length < 2) {
  1898|         source = removeVar(source, 'freeExports');
  1899|       }
  1900|     }());
  1901|     /*------------------------------------------------------------------------*/
  1902|     if (!isTemplate) {
  1903|       if (isRemoved(source, 'invert')) {
  1904|         source = replaceVar(source, 'htmlUnescapes', "{'&amp;':'&','&lt;':'<','&gt;':'>','&quot;':'\"','&#x27;':\"'\"}");
  1905|       }
  1906|       if (isRemoved(source, 'isArguments')) {
  1907|         source = replaceVar(source, 'noArgsClass', 'false');
  1908|       }
  1909|       if (isRemoved(source, 'isFunction')) {
  1910|         source = removeIsFunctionFallback(source);
  1911|       }
  1912|       if (isRemoved(source, 'mixin')) {
  1913|         source = removeHasObjectSpliceBug(source);
  1914|         source = replaceFunction(source, 'lodash', [
  1915|           '  function lodash() {',
  1916|           '    // no operation performed',
  1917|           '  }'
  1918|         ].join('\n'));

# --- HUNK 11: Lines 1938-2034 ---
  1938|       }
  1939|       if (isRemoved(source, 'template')) {
  1940|         source = source.replace(/(?:\n +\/\*[^*]*\*+(?:[^\/][^*]*\*+)*\/)?\n *lodash\.templateSettings[\s\S]+?};\n/, '');
  1941|       }
  1942|       if (isRemoved(source, 'isArguments', 'isEmpty')) {
  1943|         source = removeNoArgsClass(source);
  1944|       }
  1945|       if (isRemoved(source, 'clone', 'isEqual', 'isPlainObject')) {
  1946|         source = removeNoNodeClass(source);
  1947|       }
  1948|       if ((source.match(/\bcreateIterator\b/g) || []).length < 2) {
  1949|         source = removeFunction(source, 'createIterator');
  1950|         source = removeVar(source, 'defaultsIteratorOptions');
  1951|         source = removeVar(source, 'eachIteratorOptions');
  1952|         source = removeVar(source, 'forOwnIteratorOptions');
  1953|         source = removeVar(source, 'templateIterator');
  1954|         source = removeHasDontEnumBug(source);
  1955|         source = removeHasEnumPrototype(source);
  1956|       }
  1957|       if (isRemoved(source, 'createIterator', 'bind', 'keys')) {
  1958|         source = removeVar(source, 'isBindFast');
  1959|         source = removeVar(source, 'isV8');
  1960|         source = removeVar(source, 'nativeBind');
  1961|       }
  1962|       if (isRemoved(source, 'createIterator', 'keys')) {
  1963|         source = removeVar(source, 'nativeKeys');
  1964|         source = removeKeysOptimization(source);
  1965|         source = removeNonEnumArgs(source);
  1966|       }
  1967|       if (!source.match(/var (?:hasDontEnumBug|hasEnumPrototype|iteratesOwnLast|nonEnumArgs)\b/g)) {
  1968|         source = source.replace(/^ *\(function\(\) *{[\s\S]+?}\(1\)\);\n/m, '');
  1969|       }
  1970|     }
  1971|     debugSource = cleanupSource(source);
  1972|     source = cleanupSource(source);
  1973|     /*------------------------------------------------------------------------*/
  1974|     var outputUsed = false;
  1975|     var isCustom = (
  1976|       isLegacy || isMapped || isModern || isStrict || isUnderscore || outputPath ||
  1977|       /(?:category|exclude|exports|iife|include|minus|plus)=/.test(options) ||
  1978|       !_.isEqual(exportsOptions, exportsAll)
  1979|     );
  1980|     var basename = outputPath
  1981|       ? path.basename(outputPath, '.js')
  1982|       : 'lodash' + (isTemplate ? '.template' : isCustom ? '.custom' : '');
  1983|     dependencyMap = dependencyBackup;
  1984|     if (!isMinify && (isCustom || isDebug || isTemplate)) {
  1985|       if (isCustom) {
  1986|         debugSource = addCommandsToHeader(debugSource, options);
  1987|       }
  1988|       if (isDebug && isStdOut) {
  1989|         stdout.write(debugSource);
  1990|         callback({
  1991|           'source': debugSource
  1992|         });
  1993|       }
  1994|       else if (!isStdOut) {
  1995|         outputUsed = true;
  1996|         callback({
  1997|           'source': debugSource,
  1998|           'outputPath': outputPath || path.join(cwd, basename + '.js')
  1999|         });
  2000|       }
  2001|     }
  2002|     if (!isDebug) {
  2003|       if (outputPath && outputUsed) {
  2004|         outputPath = path.join(path.dirname(outputPath), path.basename(outputPath, '.js') + '.min.js');
  2005|       } else if (!outputPath) {
  2006|         outputPath = path.join(cwd, basename + '.min.js');
  2007|       }
  2008|       minify(source, {
  2009|         'filePath': filePath,
  2010|         'isMapped': isMapped,
  2011|         'isSilent': isSilent,
  2012|         'isTemplate': isTemplate,
  2013|         'modes': isIIFE && ['simple', 'hybrid'],
  2014|         'outputPath': outputPath,
  2015|         'onComplete': function(data) {
  2016|           if (isCustom) {
  2017|             data.source = addCommandsToHeader(data.source, options);
  2018|           }
  2019|           if (isStdOut) {
  2020|             stdout.write(data.source);
  2021|             callback(data);
  2022|           } else {
  2023|             callback(data);
  2024|           }
  2025|         }
  2026|       });
  2027|     }
  2028|   }
  2029|   /*--------------------------------------------------------------------------*/
  2030|   if (module != require.main) {
  2031|     module.exports = build;
  2032|   }
  2033|   else {
  2034|     build(process.argv, function(data) {


# ====================================================================
# FILE: build/minify.js
# Total hunks: 6
# ====================================================================
# --- HUNK 1: Lines 1-37 ---
     1| #!/usr/bin/env node
     2| ;(function() {
     3|   'use strict';
     4|   /** Load Node modules */
     5|   var fs = require('fs'),
     6|       https = require('https'),
     7|       path = require('path'),
     8|       spawn = require('child_process').spawn,
     9|       tar = require('../vendor/tar/tar.js'),
    10|       zlib = require('zlib');
    11|   /** Load other modules */
    12|   var preprocess = require('./pre-compile.js'),
    13|       postprocess = require('./post-compile.js');
    14|   /** The Git object ID of `closure-compiler.tar.gz` */
    15|   var closureId = '23cf67d0f0b979d97631fc108a2a43bb82225994';
    16|   /** The Git object ID of `uglifyjs.tar.gz` */
    17|   var uglifyId = '326ede8f4a3d8e0ae82cec7b9579d45892836629';
    18|   /** The path of the directory that is the base of the repository */
    19|   var basePath = fs.realpathSync(path.join(__dirname, '..'));
    20|   /** The path of the `vendor` directory */
    21|   var vendorPath = path.join(basePath, 'vendor');
    22|   /** The path to the Closure Compiler `.jar` */
    23|   var closurePath = path.join(vendorPath, 'closure-compiler', 'compiler.jar');
    24|   /** The path to the UglifyJS module */
    25|   var uglifyPath = path.join(vendorPath, 'uglifyjs', 'tools', 'node.js');
    26|   /** The Closure Compiler command-line options */
    27|   var closureOptions = ['--warning_level=QUIET'];
    28|   /** The media type for raw blob data */
    29|   var mediaType = 'application/vnd.github.v3.raw';
    30|   /** Used to reference parts of the blob href */
    31|   var location = (function() {
    32|     var host = 'api.github.com',
    33|         origin = 'https://api.github.com',
    34|         pathname = '/repos/bestiejs/lodash/git/blobs';
    35|     return {
    36|       'host': host,
    37|       'href': origin + pathname,

# --- HUNK 2: Lines 47-114 ---
    47|   /** Reassign `existsSync` for older versions of Node */
    48|   fs.existsSync || (fs.existsSync = path.existsSync);
    49|   /*--------------------------------------------------------------------------*/
    50|   /**
    51|    * Minifies a given Lo-Dash `source` and invokes the `options.onComplete`
    52|    * callback when finished. The `onComplete` callback is invoked with one
    53|    * argument; (outputSource).
    54|    *
    55|    * @param {Array|String} [source=''] The source to minify or array of commands.
    56|    *  -o, --output - Write output to a given path/filename.
    57|    *  -s, --silent - Skip status updates normally logged to the console.
    58|    *  -t, --template - Applies template specific minifier options.
    59|    *
    60|    * @param {Object} [options={}] The options object.
    61|    *  outputPath - Write output to a given path/filename.
    62|    *  isSilent - Skip status updates normally logged to the console.
    63|    *  isTemplate - Applies template specific minifier options.
    64|    *  onComplete - The function called once minification has finished.
    65|    */
    66|   function minify(source, options) {
    67|     var modes = ['simple', 'advanced', 'hybrid'];
    68|     source || (source = '');
    69|     options || (options = {});
    70|     if (Array.isArray(source)) {
    71|       options = source;
    72|       var filePath = options[options.length - 1],
    73|           isMapped = options.indexOf('-p') > -1 || options.indexOf('--source-map') > -1,
    74|           isSilent = options.indexOf('-s') > -1 || options.indexOf('--silent') > -1,
    75|           isTemplate = options.indexOf('-t') > -1 || options.indexOf('--template') > -1,
    76|           outputPath = path.join(path.dirname(filePath), path.basename(filePath, '.js') + '.min.js');
    77|       modes = options.reduce(function(result, value) {
    78|         var match = value.match(/modes=(.*)$/);
    79|         return match ? match[1].split(/, */) : result;
    80|       }, modes);
    81|       outputPath = options.reduce(function(result, value, index) {
    82|         if (/-o|--output/.test(value)) {
    83|           result = options[index + 1];
    84|           result = path.join(fs.realpathSync(path.dirname(result)), path.basename(result));
    85|         }
    86|         return result;
    87|       }, outputPath);
    88|       options = {
    89|         'filePath': filePath,
    90|         'isMapped': isMapped,
    91|         'isSilent': isSilent,
    92|         'isTemplate': isTemplate,
    93|         'modes': modes,
    94|         'outputPath': outputPath
    95|       };
    96|       source = fs.readFileSync(filePath, 'utf8');
    97|     }
    98|     modes = options.modes || modes;
    99|     if (options.isMapped) {
   100|       modes = modes.filter(function(mode) {
   101|         return mode != 'hybrid';
   102|       });
   103|     }
   104|     if (options.isTemplate) {
   105|       modes = modes.filter(function(mode) {
   106|         return mode != 'advanced';
   107|       });
   108|     }
   109|     options.modes = modes;
   110|     getDependency({
   111|       'id': 'closure-compiler',
   112|       'hashId': closureId,
   113|       'path': vendorPath,
   114|       'title': 'the Closure Compiler',

# --- HUNK 3: Lines 137-176 ---
   137|    * @param {String} source The source to minify.
   138|    * @param {Object} options The options object.
   139|    *  outputPath - Write output to a given path/filename.
   140|    *  isSilent - Skip status updates normally logged to the console.
   141|    *  isTemplate - Applies template specific minifier options.
   142|    *  onComplete - The function called once minification has finished.
   143|    */
   144|   function Minify(source, options) {
   145|     if (typeof source == 'object' && source) {
   146|       options = source || options;
   147|       source = options.source || '';
   148|     }
   149|     this.compiled = { 'simple': {}, 'advanced': {} };
   150|     this.hybrid = { 'simple': {}, 'advanced': {} };
   151|     this.uglified = {};
   152|     this.filePath = options.filePath;
   153|     this.isMapped = !!options.isMapped;
   154|     this.isSilent = !!options.isSilent;
   155|     this.isTemplate = !!options.isTemplate;
   156|     this.outputPath = options.outputPath;
   157|     var modes = this.modes = options.modes;
   158|     source = this.source = preprocess(source, options);
   159|     this.onComplete = options.onComplete || function(data) {
   160|       var outputPath = this.outputPath,
   161|           sourceMap = data.sourceMap;
   162|       fs.writeFileSync(outputPath, data.source, 'utf8');
   163|       if (sourceMap) {
   164|         fs.writeFileSync(getMapPath(outputPath), sourceMap, 'utf8');
   165|       }
   166|     };
   167|     if (modes.indexOf('simple') > -1) {
   168|       closureCompile.call(this, source, 'simple', onClosureSimpleCompile.bind(this));
   169|     } else if (modes.indexOf('advanced') > -1) {
   170|       onClosureSimpleGzip.call(this);
   171|     } else {
   172|       onClosureAdvancedGzip.call(this);
   173|     }
   174|   }
   175|   /*--------------------------------------------------------------------------*/
   176|   /**

# --- HUNK 4: Lines 236-278 ---
   236|    * @param {String} outputPath The output path.
   237|    * @returns {String} Returns the source map path.
   238|    */
   239|   function getMapPath(outputPath) {
   240|     return path.join(path.dirname(outputPath), path.basename(outputPath, '.js') + '.map');
   241|   }
   242|   /*--------------------------------------------------------------------------*/
   243|   /**
   244|    * Compresses a `source` string using the Closure Compiler. Yields the
   245|    * minified result, and any exceptions encountered, to a `callback` function.
   246|    *
   247|    * @private
   248|    * @param {String} source The JavaScript source to minify.
   249|    * @param {String} mode The optimization mode.
   250|    * @param {Function} callback The function called once the process has completed.
   251|    */
   252|   function closureCompile(source, mode, callback) {
   253|     var filePath = this.filePath,
   254|         isAdvanced = mode == 'advanced',
   255|         isMapped = this.isMapped,
   256|         mapPath = getMapPath(outputPath),
   257|         options = closureOptions.slice(),
   258|         outputPath = this.outputPath;
   259|     var license = (/^(?:\s*\/\/.*\s*|\s*\/\*[^*]*\*+(?:[^\/][^*]*\*+)*\/\s*)*/.exec(source) || [''])[0];
   260|     if (license) {
   261|       source = source.replace(license, '');
   262|     }
   263|     var hasIIFE = /^;?\(function[^{]+{\s*/.test(source),
   264|         isStrict = hasIIFE && /^;?\(function[^{]+{\s*["']use strict["']/.test(source);
   265|     if (hasIIFE && isAdvanced) {
   266|       source = source
   267|         .replace(/\(function/, '__iife__$&')
   268|         .replace(/\(this\)\)([\s;]*(\n\/\/.+)?)$/, ', this)$1');
   269|     }
   270|     options.push('--compilation_level=' + optimizationModes[mode]);
   271|     if (isMapped) {
   272|       options.push('--create_source_map=' + mapPath, '--source_map_format=V3');
   273|     }
   274|     var compiler = spawn('java', ['-jar', closurePath].concat(options));
   275|     if (!this.isSilent) {
   276|       console.log('Compressing ' + path.basename(outputPath, '.js') + ' using the Closure Compiler (' + mode + ')...');
   277|     }
   278|     var error = '';

# --- HUNK 5: Lines 286-330 ---
   286|     compiler.on('exit', function(status) {
   287|       if (status) {
   288|         var exception = new Error(error);
   289|         exception.status = status;
   290|       }
   291|       if (hasIIFE && isAdvanced) {
   292|         output = output
   293|           .replace(/__iife__\(/, '(')
   294|           .replace(/,\s*this\)([\s;]*(\n\/\/.+)?)$/, '(this))$1')
   295|           .replace(/^((?:var (?:\w+=(?:!0|!1|null)[,;])+)?)([\s\S]*?function[^{]+{)/, '$2$1');
   296|       }
   297|       if (isStrict) {
   298|         output = output.replace(/^[\s\S]*?function[^{]+{/, '$&"use strict";');
   299|       }
   300|       if (license) {
   301|         output = license + output;
   302|       }
   303|       if (isMapped) {
   304|         var mapOutput = fs.readFileSync(mapPath, 'utf8');
   305|         fs.unlinkSync(mapPath);
   306|         output = output
   307|           .replace(/[\s;]*$/, '\n/*\n//@ sourceMappingURL=' + path.basename(mapPath)) + '\n*/';
   308|         mapOutput = mapOutput
   309|           .replace(/("file":)""/, '$1"' + path.basename(outputPath) + '"')
   310|           .replace(/("sources":)\["stdin"\]/, '$1["' + path.basename(filePath) + '"]');
   311|       }
   312|       callback(exception, output, mapOutput);
   313|     });
   314|     compiler.stdin.end(source);
   315|   }
   316|   /**
   317|    * Compresses a `source` string using UglifyJS. Yields the result to a
   318|    * `callback` function. This function is synchronous; the `callback` is used
   319|    * for symmetry.
   320|    *
   321|    * @private
   322|    * @param {String} source The JavaScript source to minify.
   323|    * @param {String} label The label to log.
   324|    * @param {Function} callback The function called once the process has completed.
   325|    */
   326|   function uglify(source, label, callback) {
   327|     if (!this.isSilent) {
   328|       console.log('Compressing ' + path.basename(this.outputPath, '.js') + ' using ' + label + '...');
   329|     }
   330|     try {


# ====================================================================
# FILE: build/pre-compile.js
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 48-87 ---
    48|   ];
    49|   /** Used to minify variables and string values to a single character */
    50|   var minNames = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
    51|   minNames.push.apply(minNames, minNames.map(function(value) {
    52|     return value + value;
    53|   }));
    54|   /** Used to protect the specified properties from getting minified */
    55|   var propWhitelist = [
    56|     '_',
    57|     '__wrapped__',
    58|     'after',
    59|     'all',
    60|     'amd',
    61|     'any',
    62|     'assign',
    63|     'at',
    64|     'attachEvent',
    65|     'bind',
    66|     'bindAll',
    67|     'bindKey',
    68|     'clone',
    69|     'cloneDeep',
    70|     'collect',
    71|     'compact',
    72|     'compose',
    73|     'contains',
    74|     'countBy',
    75|     'criteria',
    76|     'debounce',
    77|     'defaults',
    78|     'defer',
    79|     'delay',
    80|     'detect',
    81|     'difference',
    82|     'drop',
    83|     'each',
    84|     'environment',
    85|     'escape',
    86|     'evaluate',
    87|     'every',

# --- HUNK 2: Lines 142-181 ---
   142|     'min',
   143|     'mixin',
   144|     'noConflict',
   145|     'object',
   146|     'omit',
   147|     'once',
   148|     'opera',
   149|     'pairs',
   150|     'partial',
   151|     'partialRight',
   152|     'pick',
   153|     'pluck',
   154|     'random',
   155|     'range',
   156|     'reduce',
   157|     'reduceRight',
   158|     'reject',
   159|     'rest',
   160|     'result',
   161|     'select',
   162|     'shuffle',
   163|     'size',
   164|     'some',
   165|     'sortBy',
   166|     'sortedIndex',
   167|     'source',
   168|     'tail',
   169|     'take',
   170|     'tap',
   171|     'template',
   172|     'templateSettings',
   173|     'throttle',
   174|     'times',
   175|     'toArray',
   176|     'unescape',
   177|     'union',
   178|     'uniq',
   179|     'unique',
   180|     'uniqueId',
   181|     'value',

# --- HUNK 3: Lines 194-243 ---
   194|   /**
   195|    * Pre-process a given Lo-Dash `source`, preparing it for minification.
   196|    *
   197|    * @param {String} [source=''] The source to process.
   198|    * @param {Object} [options={}] The options object.
   199|    * @returns {String} Returns the processed source.
   200|    */
   201|   function preprocess(source, options) {
   202|     source || (source = '');
   203|     options || (options = {});
   204|     source = source.replace(/@(?:alias|category)\b.*/g, '');
   205|     if (options.isTemplate) {
   206|       return source;
   207|     }
   208|     source = source.replace(RegExp('\\.(' + propWhitelist.join('|') + ')\\b', 'g'), function(match, prop) {
   209|       return "['" + prop.replace(/['\n\r\t]/g, '\\$&') + "']";
   210|     });
   211|     source = source.replace(/__e *= *_\['escape']/g, '__e=_.escape');
   212|     source = source.replace("collection['indexOf'](target)", 'collection.indexOf(target)');
   213|     source = source.replace("result[length]['value']", 'result[length].value');
   214|     source = source.replace(/^([ "'\w]+:)? *"(?:(?=(\\?))\2.)*?"|'(?:(?=(\\?))\3.)*?'/gm, function(string, captured) {
   215|       if (/:$/.test(captured)) {
   216|         string = string.slice(captured.length);
   217|       }
   218|       string = string.replace(/\[object |delete |else (?!{)|function | in |return\s+[\w"']|throw |typeof |use strict|var |@ |(["'])\\n\1|\\\\n|\\n|\s+/g, function(match) {
   219|         return match == false || match == '\\n' ? '' : match;
   220|       });
   221|       return (captured || '') + string;
   222|     });
   223|     source = source.replace(/(?:reEmptyString\w+|reInsertVariable) *=.+/g, function(match) {
   224|       return match.replace(/ |\\n/g, '');
   225|     });
   226|     source = source
   227|       .replace('"__p += \'"', '"__p+=\'"')
   228|       .replace('"\';\n"', '"\';"')
   229|     source = source.replace(/(?:\s*\/\/.*\n)* *var sourceURL[^;]+;|\+ *sourceURL/g, '');
   230|     (function() {
   231|       var properties = ['criteria', 'index', 'value'],
   232|           snippets = source.match(/( +)function (?:compareAscending|sortBy)\b[\s\S]+?\n\1}/g);
   233|       if (!snippets) {
   234|         return;
   235|       }
   236|       snippets.forEach(function(snippet) {
   237|         var modified = snippet;
   238|         properties.forEach(function(property, index) {
   239|           var minName = minNames[index],
   240|               reBracketProp = RegExp("\\['(" + property + ")'\\]", 'g'),
   241|               reDotProp = RegExp('\\.' + property + '\\b', 'g'),
   242|               rePropColon = RegExp("([^?\\s])\\s*([\"'])?\\b" + property + "\\2 *:", 'g');
   243|           modified = modified


# ====================================================================
# FILE: dist/lodash.compat.js
# Total hunks: 11
# ====================================================================
# --- HUNK 1: Lines 1-67 ---
     1| /**
     2|  * @license
     3|  * Lo-Dash 1.0.0 (Custom Build) <http://lodash.com/>
     4|  * Build: `lodash -o ./dist/lodash.compat.js`
     5|  * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
     6|  * Based on Underscore.js 1.4.4 <http://underscorejs.org/>
     7|  * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud Inc.
     8|  * Available under MIT license <http://lodash.com/license>
     9|  */
    10| ;(function(window, undefined) {
    11|   /** Detect free variable `exports` */
    12|   var freeExports = typeof exports == 'object' && exports;
    13|   /** Detect free variable `global` and use it as `window` */
    14|   var freeGlobal = typeof global == 'object' && global;
    15|   if (freeGlobal.global === freeGlobal) {
    16|     window = freeGlobal;
    17|   }
    18|   /** Used for array and object method references */
    19|   var arrayRef = [],
    20|       objectRef = {};
    21|   /** Used to generate unique IDs */
    22|   var idCounter = 0;
    23|   /** Used internally to indicate various things */
    24|   var indicatorObject = objectRef;
    25|   /** Used by `cachedContains` as the default size when optimizations are enabled for large arrays */
    26|   var largeArraySize = 30;
    27|   /** Used to restore the original `_` reference in `noConflict` */
    28|   var oldDash = window._;
    29|   /** Used to match HTML entities */
    30|   var reEscapedHtml = /&(?:amp|lt|gt|quot|#39);/g;
    31|   /** Used to match empty string literals in compiled template source */
    32|   var reEmptyStringLeading = /\b__p \+= '';/g,
    33|       reEmptyStringMiddle = /\b(__p \+=) '' \+/g,
    34|       reEmptyStringTrailing = /(__e\(.*?\)|\b__t\)) \+\n'';/g;
    35|   /** Used to match regexp flags from their coerced string values */
    36|   var reFlags = /\w*$/;
    37|   /** Used to detect if a method is native */
    38|   var reNative = RegExp('^' +
    39|     (objectRef.valueOf + '')
    40|       .replace(/[.*+?^${}()|[\]\\]/g, '\\$&')
    41|       .replace(/valueOf|for [^\]]+/g, '.+?') + '$'
    42|   );
    43|   /**
    44|    * Used to match ES6 template delimiters
    45|    * http://people.mozilla.org/~jorendorff/es6-draft.html#sec-7.8.6
    46|    */
    47|   var reEsTemplate = /\$\{((?:(?=\\?)\\?[\s\S])*?)\}/g;
    48|   /** Used to match "interpolate" template delimiters */
    49|   var reInterpolate = /<%=([\s\S]+?)%>/g;
    50|   /** Used to ensure capturing order of template delimiters */
    51|   var reNoMatch = /($^)/;
    52|   /** Used to match HTML characters */
    53|   var reUnescapedHtml = /[&<>"']/g;
    54|   /** Used to match unescaped characters in compiled string literals */
    55|   var reUnescapedString = /['\n\r\t\u2028\u2029\\]/g;
    56|   /** Used to fix the JScript [[DontEnum]] bug */
    57|   var shadowed = [
    58|     'constructor', 'hasOwnProperty', 'isPrototypeOf', 'propertyIsEnumerable',
    59|     'toLocaleString', 'toString', 'valueOf'
    60|   ];
    61|   /** Used to make template sourceURLs easier to identify */
    62|   var templateCounter = 0;
    63|   /** Native method shortcuts */
    64|   var ceil = Math.ceil,
    65|       concat = arrayRef.concat,
    66|       floor = Math.floor,
    67|       getPrototypeOf = reNative.test(getPrototypeOf = Object.getPrototypeOf) && getPrototypeOf,

# --- HUNK 2: Lines 131-171 ---
   131|     function ctor() { this.x = 1; }
   132|     ctor.prototype = { 'valueOf': 1, 'y': 1 };
   133|     for (var prop in new ctor) { props.push(prop); }
   134|     for (prop in arguments) { nonEnumArgs = !prop; }
   135|     hasDontEnumBug = !/valueOf/.test(props);
   136|     hasEnumPrototype = ctor.propertyIsEnumerable('prototype');
   137|     iteratesOwnLast = props[0] != 'x';
   138|   }(1));
   139|   /** Detect if `arguments` objects are `Object` objects (all but Opera < 10.5) */
   140|   var argsAreObjects = arguments.constructor == Object;
   141|   /** Detect if `arguments` objects [[Class]] is unresolvable (Firefox < 4, IE < 9) */
   142|   var noArgsClass = !isArguments(arguments);
   143|   /**
   144|    * Detect lack of support for accessing string characters by index:
   145|    *
   146|    * IE < 8 can't access characters by index and IE 8 can only access
   147|    * characters by index on string literals.
   148|    */
   149|   var noCharByIndex = ('x'[0] + Object('x')[0]) != 'xx';
   150|   /**
   151|    * Detect if a node's [[Class]] is unresolvable (IE < 9)
   152|    * and that the JS engine won't error when attempting to coerce an object to
   153|    * a string without a `toString` function.
   154|    */
   155|   try {
   156|     var noNodeClass = toString.call(document) == objectClass && !({ 'toString': 0 } + '');
   157|   } catch(e) { }
   158|   /** Used to identify object classifications that `_.clone` supports */
   159|   var cloneableClasses = {};
   160|   cloneableClasses[funcClass] = false;
   161|   cloneableClasses[argsClass] = cloneableClasses[arrayClass] =
   162|   cloneableClasses[boolClass] = cloneableClasses[dateClass] =
   163|   cloneableClasses[numberClass] = cloneableClasses[objectClass] =
   164|   cloneableClasses[regexpClass] = cloneableClasses[stringClass] = true;
   165|   /** Used to lookup a built-in constructor by [[Class]] */
   166|   var ctorByClass = {};
   167|   ctorByClass[arrayClass] = Array;
   168|   ctorByClass[boolClass] = Boolean;
   169|   ctorByClass[dateClass] = Date;
   170|   ctorByClass[objectClass] = Object;
   171|   ctorByClass[numberClass] = Number;

# --- HUNK 3: Lines 905-950 ---
   905|    * @param {Function} [callback] The function to customize assigning values.
   906|    * @param {Mixed} [thisArg] The `this` binding of `callback`.
   907|    * @returns {Object} Returns the destination object.
   908|    * @example
   909|    *
   910|    * _.assign({ 'name': 'moe' }, { 'age': 40 });
   911|    * // => { 'name': 'moe', 'age': 40 }
   912|    *
   913|    * var defaults = _.partialRight(_.assign, function(a, b) {
   914|    *   return typeof a == 'undefined' ? b : a;
   915|    * });
   916|    *
   917|    * var food = { 'name': 'apple' };
   918|    * defaults(food, { 'name': 'banana', 'type': 'fruit' });
   919|    * // => { 'name': 'apple', 'type': 'fruit' }
   920|    */
   921|   var assign = createIterator(defaultsIteratorOptions, {
   922|     'top':
   923|       defaultsIteratorOptions.top.replace(';',
   924|         ';\n' +
   925|         'if (argsLength > 2) {\n' +
   926|         "  if (typeof args[argsLength - 2] == 'function') {\n" +
   927|         '    var callback = createCallback(args[--argsLength - 1], args[argsLength--], 2);\n' +
   928|         "  } else if (typeof args[argsLength - 1] == 'function') {\n" +
   929|         '    callback = args[--argsLength];\n' +
   930|         '  }\n' +
   931|         '}'
   932|       ),
   933|     'loop': 'result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]'
   934|   });
   935|   /**
   936|    * Creates a clone of `value`. If `deep` is `true`, nested objects will also
   937|    * be cloned, otherwise they will be assigned by reference. If a `callback`
   938|    * function is passed, it will be executed to produce the cloned values. If
   939|    * `callback` returns `undefined`, cloning will be handled by the method instead.
   940|    * The `callback` is bound to `thisArg` and invoked with one argument; (value).
   941|    *
   942|    * @static
   943|    * @memberOf _
   944|    * @category Objects
   945|    * @param {Mixed} value The value to clone.
   946|    * @param {Boolean} [deep=false] A flag to indicate a deep clone.
   947|    * @param {Function} [callback] The function to customize cloning values.
   948|    * @param {Mixed} [thisArg] The `this` binding of `callback`.
   949|    * @param- {Array} [stackA=[]] Internally used to track traversed source objects.
   950|    * @param- {Array} [stackB=[]] Internally used to associate clones with source counterparts.

# --- HUNK 4: Lines 1354-1400 ---
  1354|       if (ctorA != ctorB && !(
  1355|             isFunction(ctorA) && ctorA instanceof ctorA &&
  1356|             isFunction(ctorB) && ctorB instanceof ctorB
  1357|           )) {
  1358|         return false;
  1359|       }
  1360|     }
  1361|     stackA || (stackA = []);
  1362|     stackB || (stackB = []);
  1363|     var length = stackA.length;
  1364|     while (length--) {
  1365|       if (stackA[length] == a) {
  1366|         return stackB[length] == b;
  1367|       }
  1368|     }
  1369|     var size = 0;
  1370|     result = true;
  1371|     stackA.push(a);
  1372|     stackB.push(b);
  1373|     if (isArr) {
  1374|       size = b.length;
  1375|       result = whereIndicator || size == a.length;
  1376|       if (result) {
  1377|         while (size--) {
  1378|           if (!(result = isEqual(a[size], b[size], callback, thisArg, stackA, stackB))) {
  1379|             break;
  1380|           }
  1381|         }
  1382|       }
  1383|       return result;
  1384|     }
  1385|     forIn(b, function(value, key, b) {
  1386|       if (hasOwnProperty.call(b, key)) {
  1387|         size++;
  1388|         return (result = hasOwnProperty.call(a, key) && isEqual(a[key], value, callback, thisArg, stackA, stackB));
  1389|       }
  1390|     });
  1391|     if (result && !whereIndicator) {
  1392|       forIn(a, function(value, key, a) {
  1393|         if (hasOwnProperty.call(a, key)) {
  1394|           return (result = --size > -1);
  1395|         }
  1396|       });
  1397|     }
  1398|     return result;
  1399|   }
  1400|   /**

# --- HUNK 5: Lines 1673-1718 ---
  1673|    * });
  1674|    * // => { 'fruits': ['apple', 'banana'], 'vegetables': ['beet', 'carrot] }
  1675|    */
  1676|   function merge(object, source, deepIndicator) {
  1677|     var args = arguments,
  1678|         index = 0,
  1679|         length = 2;
  1680|     if (!isObject(object)) {
  1681|       return object;
  1682|     }
  1683|     if (deepIndicator === indicatorObject) {
  1684|       var callback = args[3],
  1685|           stackA = args[4],
  1686|           stackB = args[5];
  1687|     } else {
  1688|       stackA = [];
  1689|       stackB = [];
  1690|       if (typeof deepIndicator != 'number') {
  1691|         length = args.length;
  1692|       }
  1693|       if (length > 2) {
  1694|         if (typeof args[length - 2] == 'function') {
  1695|           callback = createCallback(args[--length - 1], args[length--], 2);
  1696|         } else if (typeof args[length - 1] == 'function') {
  1697|           callback = args[--length];
  1698|         }
  1699|       }
  1700|     }
  1701|     while (++index < length) {
  1702|       (isArray(args[index]) ? forEach : forOwn)(args[index], function(source, key) {
  1703|         var found,
  1704|             isArr,
  1705|             result = source,
  1706|             value = object[key];
  1707|         if (source && ((isArr = isArray(source)) || isPlainObject(source))) {
  1708|           var stackLength = stackA.length;
  1709|           while (stackLength--) {
  1710|             if ((found = stackA[stackLength] == source)) {
  1711|               value = stackB[stackLength];
  1712|               break;
  1713|             }
  1714|           }
  1715|           if (!found) {
  1716|             value = isArr
  1717|               ? (isArray(value) ? value : [])
  1718|               : (isPlainObject(value) ? value : {});

# --- HUNK 6: Lines 1869-1917 ---
  1869|    * @category Objects
  1870|    * @param {Object} object The object to inspect.
  1871|    * @returns {Array} Returns a new array of property values.
  1872|    * @example
  1873|    *
  1874|    * _.values({ 'one': 1, 'two': 2, 'three': 3 });
  1875|    * // => [1, 2, 3]
  1876|    */
  1877|   function values(object) {
  1878|     var index = -1,
  1879|         props = keys(object),
  1880|         length = props.length,
  1881|         result = Array(length);
  1882|     while (++index < length) {
  1883|       result[index] = object[props[index]];
  1884|     }
  1885|     return result;
  1886|   }
  1887|   /*--------------------------------------------------------------------------*/
  1888|   /**
  1889|    * Creates an array of elements from the specified index(es), or keys, of the
  1890|    * `collection`. Indexes may be specified as individual arguments or as arrays
  1891|    * of indexes.
  1892|    *
  1893|    * @static
  1894|    * @memberOf _
  1895|    * @category Collections
  1896|    * @param {Array|Object|String} collection The collection to iterate over.
  1897|    * @param {Array|Number|String} [index1, index2, ...] The index(es) of
  1898|    *  `collection` to retrieve, either as individual arguments or arrays.
  1899|    * @returns {Array} Returns a new array of elements corresponding to the
  1900|    *  provided indexes.
  1901|    * @example
  1902|    *
  1903|    * _.at(['a', 'b', 'c', 'd', 'e'], [0, 2, 4]);
  1904|    * // => ['a', 'c', 'e']
  1905|    *
  1906|    * _.at(['moe', 'larry', 'curly'], 0, 2);
  1907|    * // => ['moe', 'curly']
  1908|    */
  1909|   function at(collection) {
  1910|     var index = -1,
  1911|         props = concat.apply(arrayRef, slice(arguments, 1)),
  1912|         length = props.length,
  1913|         result = Array(length);
  1914|     if (noCharByIndex && isString(collection)) {
  1915|       collection = collection.split('');
  1916|     }
  1917|     while(++index < length) {

# --- HUNK 7: Lines 3856-3895 ---
  3856|     return setTimeout(function() { func.apply(undefined, args); }, wait);
  3857|   }
  3858|   /**
  3859|    * Defers executing the `func` function until the current call stack has cleared.
  3860|    * Additional arguments will be passed to `func` when it is invoked.
  3861|    *
  3862|    * @static
  3863|    * @memberOf _
  3864|    * @category Functions
  3865|    * @param {Function} func The function to defer.
  3866|    * @param {Mixed} [arg1, arg2, ...] Arguments to invoke the function with.
  3867|    * @returns {Number} Returns the `setTimeout` timeout id.
  3868|    * @example
  3869|    *
  3870|    * _.defer(function() { alert('deferred'); });
  3871|    * // returns from the function before `alert` is called
  3872|    */
  3873|   function defer(func) {
  3874|     var args = slice(arguments, 1);
  3875|     return setTimeout(function() { func.apply(undefined, args); }, 1);
  3876|   }
  3877|   /**
  3878|    * Creates a function that memoizes the result of `func`. If `resolver` is
  3879|    * passed, it will be used to determine the cache key for storing the result
  3880|    * based on the arguments passed to the memoized function. By default, the first
  3881|    * argument passed to the memoized function is used as the cache key. The `func`
  3882|    * is executed with the `this` binding of the memoized function.
  3883|    *
  3884|    * @static
  3885|    * @memberOf _
  3886|    * @category Functions
  3887|    * @param {Function} func The function to have its output memoized.
  3888|    * @param {Function} [resolver] A function used to resolve the cache key.
  3889|    * @returns {Function} Returns the new memoizing function.
  3890|    * @example
  3891|    *
  3892|    * var fibonacci = _.memoize(function(n) {
  3893|    *   return n < 2 ? n : fibonacci(n - 1) + fibonacci(n - 2);
  3894|    * });
  3895|    */

# --- HUNK 8: Lines 4314-4354 ---
  4314|       }
  4315|       index = offset + match.length;
  4316|       return match;
  4317|     });
  4318|     source += "';\n";
  4319|     var variable = options.variable,
  4320|         hasVariable = variable;
  4321|     if (!hasVariable) {
  4322|       variable = 'obj';
  4323|       source = 'with (' + variable + ') {\n' + source + '\n}\n';
  4324|     }
  4325|     source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source)
  4326|       .replace(reEmptyStringMiddle, '$1')
  4327|       .replace(reEmptyStringTrailing, '$1;');
  4328|     source = 'function(' + variable + ') {\n' +
  4329|       (hasVariable ? '' : variable + ' || (' + variable + ' = {});\n') +
  4330|       "var __t, __p = '', __e = _.escape" +
  4331|       (isEvaluating
  4332|         ? ', __j = Array.prototype.join;\n' +
  4333|           "function print() { __p += __j.call(arguments, '') }\n"
  4334|         : (hasVariable ? '' : ', __d = ' + variable + '.' + variable + ' || ' + variable) + ';\n'
  4335|       ) +
  4336|       source +
  4337|       'return __p\n}';
  4338|     var sourceURL = '\n/*\n//@ sourceURL=' + (options.sourceURL || '/lodash/template/source[' + (templateCounter++) + ']') + '\n*/';
  4339|     try {
  4340|       var result = Function(importsKeys, 'return ' + source + sourceURL).apply(undefined, importsValues);
  4341|     } catch(e) {
  4342|       e.source = source;
  4343|       throw e;
  4344|     }
  4345|     if (data) {
  4346|       return result(data);
  4347|     }
  4348|     result.source = source;
  4349|     return result;
  4350|   }
  4351|   /**
  4352|    * Executes the `callback` function `n` times, returning an array of the results
  4353|    * of each `callback` execution. The `callback` is bound to `thisArg` and invoked
  4354|    * with one argument; (index).

# --- HUNK 9: Lines 4602-4642 ---
  4602|   lodash.take = first;
  4603|   lodash.head = first;
  4604|   forOwn(lodash, function(func, methodName) {
  4605|     if (!lodash.prototype[methodName]) {
  4606|       lodash.prototype[methodName]= function(callback, thisArg) {
  4607|         var result = func(this.__wrapped__, callback, thisArg);
  4608|         return callback == null || (thisArg && typeof callback != 'function')
  4609|           ? result
  4610|           : new lodash(result);
  4611|       };
  4612|     }
  4613|   });
  4614|   /*--------------------------------------------------------------------------*/
  4615|   /**
  4616|    * The semantic version number.
  4617|    *
  4618|    * @static
  4619|    * @memberOf _
  4620|    * @type String
  4621|    */
  4622|   lodash.VERSION = '1.0.0';
  4623|   lodash.prototype.toString = wrapperToString;
  4624|   lodash.prototype.value = wrapperValueOf;
  4625|   lodash.prototype.valueOf = wrapperValueOf;
  4626|   each(['join', 'pop', 'shift'], function(methodName) {
  4627|     var func = arrayRef[methodName];
  4628|     lodash.prototype[methodName] = function() {
  4629|       return func.apply(this.__wrapped__, arguments);
  4630|     };
  4631|   });
  4632|   each(['push', 'reverse', 'sort', 'unshift'], function(methodName) {
  4633|     var func = arrayRef[methodName];
  4634|     lodash.prototype[methodName] = function() {
  4635|       func.apply(this.__wrapped__, arguments);
  4636|       return this;
  4637|     };
  4638|   });
  4639|   each(['concat', 'slice', 'splice'], function(methodName) {
  4640|     var func = arrayRef[methodName];
  4641|     lodash.prototype[methodName] = function() {
  4642|       return new lodash(func.apply(this.__wrapped__, arguments));

# --- HUNK 10: Lines 4647-4677 ---
  4647|       var func = arrayRef[methodName],
  4648|           isSplice = methodName == 'splice';
  4649|       lodash.prototype[methodName] = function() {
  4650|         var value = this.__wrapped__,
  4651|             result = func.apply(value, arguments);
  4652|         if (value.length === 0) {
  4653|           delete value[0];
  4654|         }
  4655|         return isSplice ? new lodash(result) : result;
  4656|       };
  4657|     });
  4658|   }
  4659|   /*--------------------------------------------------------------------------*/
  4660|   if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {
  4661|     window._ = lodash;
  4662|     define(function() {
  4663|       return lodash;
  4664|     });
  4665|   }
  4666|   else if (freeExports) {
  4667|     if (typeof module == 'object' && module && module.exports == freeExports) {
  4668|       (module.exports = lodash)._ = lodash;
  4669|     }
  4670|     else {
  4671|       freeExports._ = lodash;
  4672|     }
  4673|   }
  4674|   else {
  4675|     window._ = lodash;
  4676|   }
  4677| }(this));


# ====================================================================
# FILE: dist/lodash.compat.min.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-42 ---
     1| /**
     2|  * @license
     3|  * Lo-Dash 1.0.0 (Custom Build) lodash.com/license
     4|  * Build: `lodash -o ./dist/lodash.compat.js`
     5|  * Underscore.js 1.4.4 underscorejs.org/LICENSE
     6|  */
     7| ;(function(n,t){function r(n){return n&&typeof n=="object"&&n.__wrapped__?n:this instanceof r?(this.__wrapped__=n,void 0):new r(n)}function e(n,t,r){t||(t=0);var e=n.length,u=e-t>=(r||it);if(u){var o={};for(r=t-1;++r<e;){var i=n[r]+"";(Ot.call(o,i)?o[i]:o[i]=[]).push(n[r])}}return function(r){if(u){var e=r+"";return Ot.call(o,e)&&-1<z(o[e],r)}return-1<z(n,r,t)}}function u(n){return n.charCodeAt(0)}function o(n,t){var r=n.b,e=t.b;if(n=n.a,t=t.a,n!==t){if(n>t||typeof n=="undefined")return 1;if(n<t||typeof t=="undefined")return-1
     8| }return r<e?-1:1}function i(n,t,r,e){function u(){var a=arguments,c=i?this:t;return o||(n=t[f]),r.length&&(a=a.length?(a=v(a),e?a.concat(r):r.concat(a)):r),this instanceof u?(s.prototype=n.prototype,c=new s,s.prototype=Q,a=n.apply(c,a),x(a)?a:c):n.apply(c,a)}var o=w(n),i=!r,f=t;return i&&(r=t),o||(t=n),u}function f(n,t,r){if(n==Q)return V;var e=typeof n;if("function"!=e){if("object"!=e)return function(t){return t[n]};var u=pr(n);return function(t){for(var r=u.length,e=W;r--&&(e=j(t[u[r]],n[u[r]],ot)););return e
     9| }}return typeof t!="undefined"?1===r?function(r){return n.call(t,r)}:2===r?function(r,e){return n.call(t,r,e)}:4===r?function(r,e,u,o){return n.call(t,r,e,u,o)}:function(r,e,u){return n.call(t,r,e,u)}:n}function a(){for(var n,t={e:Z,f:nt,g:Gt,i:Jt,j:Xt,k:_t,b:"l(n)",c:"",h:"",l:"",m:J},r=0;n=arguments[r];r++)for(var e in n)t[e]=n[e];if(n=t.a,t.d=/^[^,]+/.exec(n)[0],r="var j,n="+t.d+",u=n;if(!n)return u;"+t.l+";",t.b?(r+="var o=n.length;j=-1;if("+t.b+"){",t.j&&(r+="if(m(n)){n=n.split('')}"),r+="while(++j<o){"+t.h+"}}else{"):t.i&&(r+="var o=n.length;j=-1;if(o&&k(n)){while(++j<o){j+='';"+t.h+"}}else{"),t.f&&(r+="var v=typeof n=='function';"),t.g&&t.m?(r+="var s=-1,t=r[typeof n]?p(n):[],o=t.length;while(++s<o){j=t[s];",t.f&&(r+="if(!(v&&j=='prototype')){"),r+=t.h+"",t.f&&(r+="}")):(r+="for(j in n){",(t.f||t.m)&&(r+="if(",t.f&&(r+="!(v&&j=='prototype')"),t.f&&t.m&&(r+="&&"),t.m&&(r+="i.call(n,j)"),r+="){"),r+=t.h+";",(t.f||t.m)&&(r+="}")),r+="}",t.e)for(r+="var g=n.constructor;",e=0;7>e;e++)r+="j='"+t.k[e]+"';if(","constructor"==t.k[e]&&(r+="!(g&&g.prototype===n)&&"),r+="i.call(n,j)){"+t.h+"}";
    10| return(t.b||t.i)&&(r+="}"),r+=t.c+";return u",Function("f,i,k,l,m,r,p","return function("+n+"){"+r+"}")(f,Ot,y,lr,A,rr,$t)}function c(n){return"\\"+er[n]}function l(n){return sr[n]}function p(n){return typeof n.toString!="function"&&typeof(n+"")=="string"}function s(){}function v(n,t,r){t||(t=0),typeof r=="undefined"&&(r=n?n.length:0);var e=-1;r=r-t||0;for(var u=Array(0>r?0:r);++e<r;)u[e]=n[t+e];return u}function g(n){return vr[n]}function y(n){return St.call(n)==It}function h(n){var t=W;if(!n||typeof n!="object"||y(n))return t;
    11| var r=n.constructor;return!w(r)&&(!Yt||!p(n))||r instanceof r?tt?(ar(n,function(n,r,e){return t=!Ot.call(e,r),W}),t===W):(ar(n,function(n,r){t=r}),t===W||Ot.call(n,t)):t}function m(n){var t=[];return cr(n,function(n,r){t.push(r)}),t}function d(n,r,e,u,o,i){var a=n;if(typeof r=="function"&&(u=e,e=r,r=W),typeof e=="function"){e=typeof u=="undefined"?e:f(e,u,1);var a=e(a),c=typeof a!="undefined";c||(a=n)}if(u=x(a)){var l=St.call(a);if(!nr[l]||Yt&&p(a))return a;var s=lr(a)}if(!u||!r)return u&&!c?s?v(a):gr({},a):a;
    12| switch(u=tr[l],l){case Bt:case Mt:return c?a:new u(+a);case Pt:case Kt:return c?a:new u(a);case Ct:return c?a:u(a.source,st.exec(a))}for(o||(o=[]),i||(i=[]),l=o.length;l--;)if(o[l]==n)return i[l];return c||(a=s?u(a.length):{},s&&(Ot.call(n,"index")&&(a.index=n.index),Ot.call(n,"input")&&(a.input=n.input))),o.push(n),i.push(a),(s?F:cr)(c?a:n,function(n,u){a[u]=d(n,r,e,t,o,i)}),a}function _(n){var t=[];return ar(n,function(n,r){w(n)&&t.push(r)}),t.sort()}function b(n){for(var t=-1,r=pr(n),e=r.length,u={};++t<e;){var o=r[t];
    13| u[n[o]]=o}return u}function j(n,t,r,e,u,o){var i=r===ot;if(r&&!i){r=typeof e=="undefined"?r:f(r,e,2);var a=r(n,t);if(typeof a!="undefined")return!!a}if(n===t)return 0!==n||1/n==1/t;var c=typeof n,l=typeof t;if(n===n&&(!n||"function"!=c&&"object"!=c)&&(!t||"function"!=l&&"object"!=l))return W;if(n==Q||t==Q)return n===t;if(l=St.call(n),c=St.call(t),l==It&&(l=zt),c==It&&(c=zt),l!=c)return W;switch(l){case Bt:case Mt:return+n==+t;case Pt:return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case Ct:case Kt:return n==t+""
    14| }if(c=l==Tt,!c){if(n.__wrapped__||t.__wrapped__)return j(n.__wrapped__||n,t.__wrapped__||t,r,e,u,o);if(l!=zt||Yt&&(p(n)||p(t)))return W;var l=!Qt&&y(n)?Object:n.constructor,s=!Qt&&y(t)?Object:t.constructor;if(l!=s&&(!w(l)||!(l instanceof l&&w(s)&&s instanceof s)))return W}for(u||(u=[]),o||(o=[]),l=u.length;l--;)if(u[l]==n)return o[l]==t;var v=0,a=J;if(u.push(n),o.push(t),c){if(v=t.length,a=i||v==n.length)for(;v--&&(a=j(n[v],t[v],r,e,u,o)););return a}return ar(t,function(t,i,f){return Ot.call(f,i)?(v++,a=Ot.call(n,i)&&j(n[i],t,r,e,u,o)):void 0
    15| }),a&&!i&&ar(n,function(n,t,r){return Ot.call(r,t)?a=-1<--v:void 0}),a}function w(n){return typeof n=="function"}function x(n){return n?rr[typeof n]:W}function O(n){return typeof n=="number"||St.call(n)==Pt}function A(n){return typeof n=="string"||St.call(n)==Kt}function S(n,t,r){var e=arguments,u=0,o=2;if(!x(n))return n;if(r===ot)var i=e[3],a=e[4],c=e[5];else a=[],c=[],typeof r!="number"&&(o=e.length),2<o&&("function"==typeof e[o-2]?i=f(e[--o-1],e[o--],2):"function"==typeof e[o-1]&&(i=e[--o]));for(;++u<o;)(lr(e[u])?F:cr)(e[u],function(t,r){var e,u,o=t,f=n[r];
    16| if(t&&((u=lr(t))||hr(t))){for(o=a.length;o--;)if(e=a[o]==t){f=c[o];break}e||(f=u?lr(f)?f:[]:hr(f)?f:{},i&&(o=i(f,t),typeof o!="undefined"&&(f=o)),a.push(t),c.push(f),i||(f=S(f,t,ot,i,a,c)))}else i&&(o=i(f,t),typeof o=="undefined"&&(o=t)),typeof o!="undefined"&&(f=o);n[r]=f});return n}function E(n){for(var t=-1,r=pr(n),e=r.length,u=Array(e);++t<e;)u[t]=n[r[t]];return u}function k(n,t,r){var e=-1,u=n?n.length:0,o=W;return r=(0>r?Ft(0,u+r):r)||0,typeof u=="number"?o=-1<(A(n)?n.indexOf(t,r):z(n,t,r)):fr(n,function(n){return++e<r?void 0:!(o=n===t)
    17| }),o}function N(n,t,r){var e=J;if(t=f(t,r),lr(n)){r=-1;for(var u=n.length;++r<u&&(e=!!t(n[r],r,n)););}else fr(n,function(n,r,u){return e=!!t(n,r,u)});return e}function R(n,t,r){var e=[];if(t=f(t,r),lr(n)){r=-1;for(var u=n.length;++r<u;){var o=n[r];t(o,r,n)&&e.push(o)}}else fr(n,function(n,r,u){t(n,r,u)&&e.push(n)});return e}function $(n,t,r){var e;return t=f(t,r),F(n,function(n,r,u){return t(n,r,u)?(e=n,W):void 0}),e}function F(n,t,r){if(t&&typeof r=="undefined"&&lr(n)){r=-1;for(var e=n.length;++r<e&&t(n[r],r,n)!==W;);}else fr(n,t,r);
    18| return n}function q(n,t,r){var e=-1,u=n?n.length:0,o=Array(typeof u=="number"?u:0);if(t=f(t,r),lr(n))for(;++e<u;)o[e]=t(n[e],e,n);else fr(n,function(n,r,u){o[++e]=t(n,r,u)});return o}function D(n,t,r){var e=-1/0,o=e;if(!t&&lr(n)){r=-1;for(var i=n.length;++r<i;){var a=n[r];a>o&&(o=a)}}else t=!t&&A(n)?u:f(t,r),fr(n,function(n,r,u){r=t(n,r,u),r>e&&(e=r,o=n)});return o}function I(n,t,r,e){var u=3>arguments.length;if(t=f(t,e,4),lr(n)){var o=-1,i=n.length;for(u&&(r=n[++o]);++o<i;)r=t(r,n[o],o,n)}else fr(n,function(n,e,o){r=u?(u=W,n):t(r,n,e,o)
    19| });return r}function T(n,t,r,e){var u=n,o=n?n.length:0,i=3>arguments.length;if(typeof o!="number")var a=pr(n),o=a.length;else Xt&&A(n)&&(u=n.split(""));return t=f(t,e,4),F(n,function(n,e,f){e=a?a[--o]:--o,r=i?(i=W,u[e]):t(r,u[e],e,f)}),r}function B(n,t,r){var e;if(t=f(t,r),lr(n)){r=-1;for(var u=n.length;++r<u&&!(e=t(n[r],r,n)););}else fr(n,function(n,r,u){return!(e=t(n,r,u))});return!!e}function M(n,t,r){if(n){var e=0,u=n.length;if(typeof t!="number"&&t!=Q){var o=-1;for(t=f(t,r);++o<u&&t(n[o],o,n);)e++
    20| }else if(e=t,e==Q||r)return n[0];return v(n,0,qt(Ft(0,e),u))}}function P(n,t){for(var r=-1,e=n?n.length:0,u=[];++r<e;){var o=n[r];lr(o)?At.apply(u,t?o:P(o)):u.push(o)}return u}function z(n,t,r){var e=-1,u=n?n.length:0;if(typeof r=="number")e=(0>r?Ft(0,u+r):r||0)-1;else if(r)return e=K(n,t),n[e]===t?e:-1;for(;++e<u;)if(n[e]===t)return e;return-1}function C(n,t,r){if(typeof t!="number"&&t!=Q){var e=0,u=-1,o=n?n.length:0;for(t=f(t,r);++u<o&&t(n[u],u,n);)e++}else e=t==Q||r?1:Ft(0,t);return v(n,e)}function K(n,t,r,e){var u=0,o=n?n.length:u;
    21| for(r=r?f(r,e,1):V,t=r(t);u<o;)e=u+o>>>1,r(n[e])<t?u=e+1:o=e;return u}function L(n,t,r,e){var u=-1,o=n?n.length:0,i=[],a=i;typeof t=="function"&&(e=r,r=t,t=W);var c=!t&&75<=o;if(c)var l={};for(r&&(a=[],r=f(r,e));++u<o;){e=n[u];var p=r?r(e,u,n):e;if(c)var s=p+"",s=Ot.call(l,s)?!(a=l[s]):a=l[s]=[];(t?!u||a[a.length-1]!==p:s||0>z(a,p))&&((r||c)&&a.push(p),i.push(e))}return i}function U(n,t){return Vt||Et&&2<arguments.length?Et.call.apply(Et,arguments):i(n,t,v(arguments,2))}function V(n){return n}function G(n){F(_(n),function(t){var e=r[t]=n[t];
    22| r.prototype[t]=function(){var n=[this.__wrapped__];return At.apply(n,arguments),new r(e.apply(r,n))}})}function H(){return this.__wrapped__}var J=!0,Q=null,W=!1,X=typeof exports=="object"&&exports,Y=typeof global=="object"&&global;Y.global===Y&&(n=Y);var Z,nt,tt,rt=[],et={},ut=0,ot=et,it=30,ft=n._,at=/&(?:amp|lt|gt|quot|#39);/g,ct=/\b__p\+='';/g,lt=/\b(__p\+=)''\+/g,pt=/(__e\(.*?\)|\b__t\))\+'';/g,st=/\w*$/,vt=RegExp("^"+(et.valueOf+"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),gt=/\$\{((?:(?=\\?)\\?[\s\S])*?)\}/g,yt=/<%=([\s\S]+?)%>/g,ht=/($^)/,mt=/[&<>"']/g,dt=/['\n\r\t\u2028\u2029\\]/g,_t="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),bt=Math.ceil,jt=rt.concat,wt=Math.floor,xt=vt.test(xt=Object.getPrototypeOf)&&xt,Ot=et.hasOwnProperty,At=rt.push,St=et.toString,Et=vt.test(Et=v.bind)&&Et,kt=vt.test(kt=Array.isArray)&&kt,Nt=n.isFinite,Rt=n.isNaN,$t=vt.test($t=Object.keys)&&$t,Ft=Math.max,qt=Math.min,Dt=Math.random,It="[object Arguments]",Tt="[object Array]",Bt="[object Boolean]",Mt="[object Date]",Pt="[object Number]",zt="[object Object]",Ct="[object RegExp]",Kt="[object String]",Lt=!!n.attachEvent,Ut=Et&&!/\n|true/.test(Et+Lt),Vt=Et&&!Ut,Gt=$t&&(Lt||Ut),Ht=(Ht={0:1,length:1},rt.splice.call(Ht,0,1),Ht[0]),Jt=J;
    23| (function(){function n(){this.x=1}var t=[];n.prototype={valueOf:1,y:1};for(var r in new n)t.push(r);for(r in arguments)Jt=!r;Z=!/valueOf/.test(t),nt=n.propertyIsEnumerable("prototype"),tt="x"!=t[0]})(1);var Qt=arguments.constructor==Object,Wt=!y(arguments),Xt="xx"!="x"[0]+Object("x")[0];try{var Yt=St.call(document)==zt&&!({toString:0}+"")}catch(Zt){}var nr={"[object Function]":W};nr[It]=nr[Tt]=nr[Bt]=nr[Mt]=nr[Pt]=nr[zt]=nr[Ct]=nr[Kt]=J;var tr={};tr[Tt]=Array,tr[Bt]=Boolean,tr[Mt]=Date,tr[zt]=Object,tr[Pt]=Number,tr[Ct]=RegExp,tr[Kt]=String;
    24| var rr={"boolean":W,"function":J,object:J,number:W,string:W,undefined:W},er={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};r.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:yt,variable:"",imports:{_:r}};var ur={a:"q,w,h",l:"var a=arguments,b=0,c=typeof h=='number'?2:a.length;while(++b<c){n=a[b];if(n&&r[typeof n]){",h:"if(typeof u[j]=='undefined')u[j]=n[j]",c:"}}"},or={a:"e,d,x",l:"d=d&&typeof x=='undefined'?d:f(d,x)",b:"typeof o=='number'",h:"if(d(n[j],j,e)===false)return u"},ir={l:"if(!r[typeof n])return u;"+or.l,b:W},fr=a(or);
    25| Wt&&(y=function(n){return n?Ot.call(n,"callee"):W});var ar=a(or,ir,{m:W}),cr=a(or,ir),lr=kt||function(n){return Qt&&n instanceof Array||St.call(n)==Tt},pr=$t?function(n){return x(n)?nt&&typeof n=="function"||Jt&&n.length&&y(n)?m(n):$t(n):[]}:m,sr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},vr=b(sr),gr=a(ur,{l:ur.l.replace(";",";if(c>2){if(typeof a[c-2]=='function'){var d=f(a[--c-1],a[c--],2);}else if(typeof a[c-1]=='function'){d=a[--c];}}"),h:"u[j]=d?d(u[j],n[j]):n[j]"}),yr=a(ur);
    26| w(/x/)&&(w=function(n){return n instanceof Function||"[object Function]"==St.call(n)});var hr=xt?function(n){if(!n||typeof n!="object")return W;var t=n.valueOf,r=typeof t=="function"&&(r=xt(t))&&xt(r);return r?n==r||xt(n)==r&&!y(n):h(n)}:h,mr=q,dr=R;r.after=function(n,t){return 1>n?t():function(){return 1>--n?t.apply(this,arguments):void 0}},r.assign=gr,r.at=function(n){var t=-1,r=jt.apply(rt,v(arguments,1)),e=r.length,u=Array(e);for(Xt&&A(n)&&(n=n.split(""));++t<e;)u[t]=n[r[t]];return u},r.bind=U,r.bindAll=function(n){for(var t=jt.apply(rt,arguments),r=1<t.length?0:(t=_(n),-1),e=t.length;++r<e;){var u=t[r];
    27| n[u]=U(n[u],n)}return n},r.bindKey=function(n,t){return i(n,t,v(arguments,2))},r.compact=function(n){for(var t=-1,r=n?n.length:0,e=[];++t<r;){var u=n[t];u&&e.push(u)}return e},r.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length;r--;)t=[n[r].apply(this,t)];return t[0]}},r.countBy=function(n,t,r){var e={};return t=f(t,r),F(n,function(n,r,u){r=t(n,r,u)+"",Ot.call(e,r)?e[r]++:e[r]=1}),e},r.debounce=function(n,t,r){function e(){f=Q,r||(o=n.apply(i,u))}var u,o,i,f;return function(){var a=r&&!f;
    28| return u=arguments,i=this,clearTimeout(f),f=setTimeout(e,t),a&&(o=n.apply(i,u)),o}},r.defaults=yr,r.defer=function(n){var r=v(arguments,1);return setTimeout(function(){n.apply(t,r)},1)},r.delay=function(n,r){var e=v(arguments,2);return setTimeout(function(){n.apply(t,e)},r)},r.difference=function(n){for(var t=-1,r=n?n.length:0,u=jt.apply(rt,arguments),u=e(u,r),o=[];++t<r;){var i=n[t];u(i)||o.push(i)}return o},r.filter=R,r.flatten=P,r.forEach=F,r.forIn=ar,r.forOwn=cr,r.functions=_,r.groupBy=function(n,t,r){var e={};
    29| return t=f(t,r),F(n,function(n,r,u){r=t(n,r,u)+"",(Ot.call(e,r)?e[r]:e[r]=[]).push(n)}),e},r.initial=function(n,t,r){if(!n)return[];var e=0,u=n.length;if(typeof t!="number"&&t!=Q){var o=u;for(t=f(t,r);o--&&t(n[o],o,n);)e++}else e=t==Q||r?1:t||e;return v(n,0,qt(Ft(0,u-e),u))},r.intersection=function(n){var t=arguments,r=t.length,u={0:{}},o=-1,i=n?n.length:0,f=100<=i,a=[],c=a;n:for(;++o<i;){var l=n[o];if(f)var p=l+"",p=Ot.call(u[0],p)?!(c=u[0][p]):c=u[0][p]=[];if(p||0>z(c,l)){f&&c.push(l);for(var s=r;--s;)if(!(u[s]||(u[s]=e(t[s],0,100)))(l))continue n;
    30| a.push(l)}}return a},r.invert=b,r.invoke=function(n,t){var r=v(arguments,2),e=-1,u=typeof t=="function",o=n?n.length:0,i=Array(typeof o=="number"?o:0);return F(n,function(n){i[++e]=(u?t:n[t]).apply(n,r)}),i},r.keys=pr,r.map=q,r.max=D,r.memoize=function(n,t){var r={};return function(){var e=(t?t.apply(this,arguments):arguments[0])+"";return Ot.call(r,e)?r[e]:r[e]=n.apply(this,arguments)}},r.merge=S,r.min=function(n,t,r){var e=1/0,o=e;if(!t&&lr(n)){r=-1;for(var i=n.length;++r<i;){var a=n[r];a<o&&(o=a)
    31| }}else t=!t&&A(n)?u:f(t,r),fr(n,function(n,r,u){r=t(n,r,u),r<e&&(e=r,o=n)});return o},r.object=function(n,t){for(var r=-1,e=n?n.length:0,u={};++r<e;){var o=n[r];t?u[o]=t[r]:u[o[0]]=o[1]}return u},r.omit=function(n,t,r){var e=typeof t=="function",u={};if(e)t=f(t,r);else var o=jt.apply(rt,arguments);return ar(n,function(n,r,i){(e?!t(n,r,i):0>z(o,r,1))&&(u[r]=n)}),u},r.once=function(n){var t,r;return function(){return t?r:(t=J,r=n.apply(this,arguments),n=Q,r)}},r.pairs=function(n){for(var t=-1,r=pr(n),e=r.length,u=Array(e);++t<e;){var o=r[t];
    32| u[t]=[o,n[o]]}return u},r.partial=function(n){return i(n,v(arguments,1))},r.partialRight=function(n){return i(n,v(arguments,1),Q,ot)},r.pick=function(n,t,r){var e={};if(typeof t!="function")for(var u=0,o=jt.apply(rt,arguments),i=x(n)?o.length:0;++u<i;){var a=o[u];a in n&&(e[a]=n[a])}else t=f(t,r),ar(n,function(n,r,u){t(n,r,u)&&(e[r]=n)});return e},r.pluck=mr,r.range=function(n,t,r){n=+n||0,r=+r||1,t==Q&&(t=n,n=0);var e=-1;t=Ft(0,bt((t-n)/r));for(var u=Array(t);++e<t;)u[e]=n,n+=r;return u},r.reject=function(n,t,r){return t=f(t,r),R(n,function(n,r,e){return!t(n,r,e)
    33| })},r.rest=C,r.shuffle=function(n){var t=-1,r=n?n.length:0,e=Array(typeof r=="number"?r:0);return F(n,function(n){var r=wt(Dt()*(++t+1));e[t]=e[r],e[r]=n}),e},r.sortBy=function(n,t,r){var e=-1,u=n?n.length:0,i=Array(typeof u=="number"?u:0);for(t=f(t,r),F(n,function(n,r,u){i[++e]={a:t(n,r,u),b:e,c:n}}),u=i.length,i.sort(o);u--;)i[u]=i[u].c;return i},r.tap=function(n,t){return t(n),n},r.throttle=function(n,t){function r(){f=new Date,i=Q,u=n.apply(o,e)}var e,u,o,i,f=0;return function(){var a=new Date,c=t-(a-f);
    34| return e=arguments,o=this,0<c?i||(i=setTimeout(r,c)):(clearTimeout(i),i=Q,f=a,u=n.apply(o,e)),u}},r.times=function(n,t,r){n=+n||0;for(var e=-1,u=Array(n);++e<n;)u[e]=t.call(r,e);return u},r.toArray=function(n){return n&&typeof n.length=="number"?Xt&&A(n)?n.split(""):v(n):E(n)},r.union=function(){return L(jt.apply(rt,arguments))},r.uniq=L,r.values=E,r.where=dr,r.without=function(n){for(var t=-1,r=n?n.length:0,u=e(arguments,1),o=[];++t<r;){var i=n[t];u(i)||o.push(i)}return o},r.wrap=function(n,t){return function(){var r=[n];
    35| return At.apply(r,arguments),t.apply(this,r)}},r.zip=function(n){for(var t=-1,r=n?D(mr(arguments,"length")):0,e=Array(r);++t<r;)e[t]=mr(arguments,t);return e},r.collect=q,r.drop=C,r.each=F,r.extend=gr,r.methods=_,r.select=R,r.tail=C,r.unique=L,G(r),r.clone=d,r.cloneDeep=function(n,t,r){return d(n,J,t,r)},r.contains=k,r.escape=function(n){return n==Q?"":(n+"").replace(mt,l)},r.every=N,r.find=$,r.has=function(n,t){return n?Ot.call(n,t):W},r.identity=V,r.indexOf=z,r.isArguments=y,r.isArray=lr,r.isBoolean=function(n){return n===J||n===W||St.call(n)==Bt
    36| },r.isDate=function(n){return n instanceof Date||St.call(n)==Mt},r.isElement=function(n){return n?1===n.nodeType:W},r.isEmpty=function(n){var t=J;if(!n)return t;var r=St.call(n),e=n.length;return r==Tt||r==Kt||r==It||Wt&&y(n)||r==zt&&typeof e=="number"&&w(n.splice)?!e:(cr(n,function(){return t=W}),t)},r.isEqual=j,r.isFinite=function(n){return Nt(n)&&!Rt(parseFloat(n))},r.isFunction=w,r.isNaN=function(n){return O(n)&&n!=+n},r.isNull=function(n){return n===Q},r.isNumber=O,r.isObject=x,r.isPlainObject=hr,r.isRegExp=function(n){return n instanceof RegExp||St.call(n)==Ct
    37| },r.isString=A,r.isUndefined=function(n){return typeof n=="undefined"},r.lastIndexOf=function(n,t,r){var e=n?n.length:0;for(typeof r=="number"&&(e=(0>r?Ft(0,e+r):qt(r,e-1))+1);e--;)if(n[e]===t)return e;return-1},r.mixin=G,r.noConflict=function(){return n._=ft,this},r.random=function(n,t){return n==Q&&t==Q&&(t=1),n=+n||0,t==Q&&(t=n,n=0),n+wt(Dt()*((+t||0)-n+1))},r.reduce=I,r.reduceRight=T,r.result=function(n,r){var e=n?n[r]:t;return w(e)?n[r]():e},r.size=function(n){var t=n?n.length:0;return typeof t=="number"?t:pr(n).length
    38| },r.some=B,r.sortedIndex=K,r.template=function(n,e,u){var o=r.templateSettings;n||(n=""),u=yr({},u,o);var i,f=yr({},u.imports,o.imports),o=pr(f),f=E(f),a=0,l=u.interpolate||ht,p="__p+='";n.replace(RegExp((u.escape||ht).source+"|"+l.source+"|"+(l===yt?gt:ht).source+"|"+(u.evaluate||ht).source+"|$","g"),function(t,r,e,u,o,f){return e||(e=u),p+=n.slice(a,f).replace(dt,c),r&&(p+="'+__e("+r+")+'"),o&&(i=J,p+="';"+o+";__p+='"),e&&(p+="'+((__t=("+e+"))==null?'':__t)+'"),a=f+t.length,t}),p+="';\n",l=u=u.variable,l||(u="obj",p="with("+u+"){"+p+"}"),p=(i?p.replace(ct,""):p).replace(lt,"$1").replace(pt,"$1;"),p="function("+u+"){"+(l?"":u+"||("+u+"={});")+"var __t,__p='',__e=_.escape"+(i?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":(l?"":",__d="+u+"."+u+"||"+u)+";")+p+"return __p}";
    39| try{var s=Function(o,"return "+p).apply(t,f)}catch(v){throw v.source=p,v}return e?s(e):(s.source=p,s)},r.unescape=function(n){return n==Q?"":(n+"").replace(at,g)},r.uniqueId=function(n){var t=++ut;return(n==Q?"":n+"")+t},r.all=N,r.any=B,r.detect=$,r.foldl=I,r.foldr=T,r.include=k,r.inject=I,cr(r,function(n,t){r.prototype[t]||(r.prototype[t]=function(){var t=[this.__wrapped__];return At.apply(t,arguments),n.apply(r,t)})}),r.first=M,r.last=function(n,t,r){if(n){var e=0,u=n.length;if(typeof t!="number"&&t!=Q){var o=u;
    40| for(t=f(t,r);o--&&t(n[o],o,n);)e++}else if(e=t,e==Q||r)return n[u-1];return v(n,Ft(0,u-e))}},r.take=M,r.head=M,cr(r,function(n,t){r.prototype[t]||(r.prototype[t]=function(t,e){var u=n(this.__wrapped__,t,e);return t==Q||e&&typeof t!="function"?u:new r(u)})}),r.VERSION="1.0.0",r.prototype.toString=function(){return this.__wrapped__+""},r.prototype.value=H,r.prototype.valueOf=H,fr(["join","pop","shift"],function(n){var t=rt[n];r.prototype[n]=function(){return t.apply(this.__wrapped__,arguments)}}),fr(["push","reverse","sort","unshift"],function(n){var t=rt[n];
    41| r.prototype[n]=function(){return t.apply(this.__wrapped__,arguments),this}}),fr(["concat","slice","splice"],function(n){var t=rt[n];r.prototype[n]=function(){return new r(t.apply(this.__wrapped__,arguments))}}),Ht&&fr(["pop","shift","splice"],function(n){var t=rt[n],e="splice"==n;r.prototype[n]=function(){var n=this.__wrapped__,u=t.apply(n,arguments);return 0===n.length&&delete n[0],e?new r(u):u}}),typeof define=="function"&&typeof define.amd=="object"&&define.amd?(n._=r,define(function(){return r
    42| })):X?typeof module=="object"&&module&&module.exports==X?(module.exports=r)._=r:X._=r:n._=r})(this);


# ====================================================================
# FILE: dist/lodash.js
# Total hunks: 11
# ====================================================================
# --- HUNK 1: Lines 1-67 ---
     1| /**
     2|  * @license
     3|  * Lo-Dash 1.0.0 (Custom Build) <http://lodash.com/>
     4|  * Build: `lodash modern -o ./dist/lodash.js`
     5|  * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
     6|  * Based on Underscore.js 1.4.4 <http://underscorejs.org/>
     7|  * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud Inc.
     8|  * Available under MIT license <http://lodash.com/license>
     9|  */
    10| ;(function(window, undefined) {
    11|   /** Detect free variable `exports` */
    12|   var freeExports = typeof exports == 'object' && exports;
    13|   /** Detect free variable `global` and use it as `window` */
    14|   var freeGlobal = typeof global == 'object' && global;
    15|   if (freeGlobal.global === freeGlobal) {
    16|     window = freeGlobal;
    17|   }
    18|   /** Used for array and object method references */
    19|   var arrayRef = [],
    20|       objectRef = {};
    21|   /** Used to generate unique IDs */
    22|   var idCounter = 0;
    23|   /** Used internally to indicate various things */
    24|   var indicatorObject = objectRef;
    25|   /** Used by `cachedContains` as the default size when optimizations are enabled for large arrays */
    26|   var largeArraySize = 30;
    27|   /** Used to restore the original `_` reference in `noConflict` */
    28|   var oldDash = window._;
    29|   /** Used to match HTML entities */
    30|   var reEscapedHtml = /&(?:amp|lt|gt|quot|#39);/g;
    31|   /** Used to match empty string literals in compiled template source */
    32|   var reEmptyStringLeading = /\b__p \+= '';/g,
    33|       reEmptyStringMiddle = /\b(__p \+=) '' \+/g,
    34|       reEmptyStringTrailing = /(__e\(.*?\)|\b__t\)) \+\n'';/g;
    35|   /** Used to match regexp flags from their coerced string values */
    36|   var reFlags = /\w*$/;
    37|   /** Used to detect if a method is native */
    38|   var reNative = RegExp('^' +
    39|     (objectRef.valueOf + '')
    40|       .replace(/[.*+?^${}()|[\]\\]/g, '\\$&')
    41|       .replace(/valueOf|for [^\]]+/g, '.+?') + '$'
    42|   );
    43|   /**
    44|    * Used to match ES6 template delimiters
    45|    * http://people.mozilla.org/~jorendorff/es6-draft.html#sec-7.8.6
    46|    */
    47|   var reEsTemplate = /\$\{((?:(?=\\?)\\?[\s\S])*?)\}/g;
    48|   /** Used to match "interpolate" template delimiters */
    49|   var reInterpolate = /<%=([\s\S]+?)%>/g;
    50|   /** Used to ensure capturing order of template delimiters */
    51|   var reNoMatch = /($^)/;
    52|   /** Used to match HTML characters */
    53|   var reUnescapedHtml = /[&<>"']/g;
    54|   /** Used to match unescaped characters in compiled string literals */
    55|   var reUnescapedString = /['\n\r\t\u2028\u2029\\]/g;
    56|   /** Used to make template sourceURLs easier to identify */
    57|   var templateCounter = 0;
    58|   /** Native method shortcuts */
    59|   var ceil = Math.ceil,
    60|       concat = arrayRef.concat,
    61|       floor = Math.floor,
    62|       getPrototypeOf = reNative.test(getPrototypeOf = Object.getPrototypeOf) && getPrototypeOf,
    63|       hasOwnProperty = objectRef.hasOwnProperty,
    64|       push = arrayRef.push,
    65|       toString = objectRef.toString;
    66|   /* Native method shortcuts for methods with the same name as other `lodash` methods */
    67|   var nativeBind = reNative.test(nativeBind = slice.bind) && nativeBind,

# --- HUNK 2: Lines 233-283 ---
   233|    */
   234|   var iteratorTemplate = function(obj) {
   235|     var __p = 'var index, iterable = ' +
   236|     (obj.firstArg ) +
   237|     ', result = iterable;\nif (!iterable) return result;\n' +
   238|     (obj.top ) +
   239|     ';\n';
   240|      if (obj.arrays) {
   241|     __p += 'var length = iterable.length; index = -1;\nif (' +
   242|     (obj.arrays ) +
   243|     ') {\n  while (++index < length) {\n    ' +
   244|     (obj.loop ) +
   245|     '\n  }\n}\nelse {  ';
   246|      } ;
   247|      if (obj.isKeysFast && obj.useHas) {
   248|     __p += '\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] ? nativeKeys(iterable) : [],\n      length = ownProps.length;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n    ' +
   249|     (obj.loop ) +
   250|     '\n  }  ';
   251|      } else {
   252|     __p += '\n  for (index in iterable) {';
   253|         if ( obj.useHas) {
   254|     __p += '\n    if (';
   255|           if (obj.useHas) {
   256|     __p += 'hasOwnProperty.call(iterable, index)';
   257|      }    ;
   258|     __p += ') {    ';
   259|      } ;
   260|     __p += 
   261|     (obj.loop ) +
   262|     ';    ';
   263|      if ( obj.useHas) {
   264|     __p += '\n    }';
   265|      } ;
   266|     __p += '\n  }  ';
   267|      } ;
   268|      if (obj.arrays) {
   269|     __p += '\n}';
   270|      } ;
   271|     __p += 
   272|     (obj.bottom ) +
   273|     ';\nreturn result';
   274|     return __p
   275|   };
   276|   /** Reusable iterator options for `assign` and `defaults` */
   277|   var defaultsIteratorOptions = {
   278|     'args': 'object, source, guard',
   279|     'top':
   280|       'var args = arguments,\n' +
   281|       '    argsIndex = 0,\n' +
   282|       "    argsLength = typeof guard == 'number' ? 2 : args.length;\n" +
   283|       'while (++argsIndex < argsLength) {\n' +

# --- HUNK 3: Lines 781-826 ---
   781|    * @param {Function} [callback] The function to customize assigning values.
   782|    * @param {Mixed} [thisArg] The `this` binding of `callback`.
   783|    * @returns {Object} Returns the destination object.
   784|    * @example
   785|    *
   786|    * _.assign({ 'name': 'moe' }, { 'age': 40 });
   787|    * // => { 'name': 'moe', 'age': 40 }
   788|    *
   789|    * var defaults = _.partialRight(_.assign, function(a, b) {
   790|    *   return typeof a == 'undefined' ? b : a;
   791|    * });
   792|    *
   793|    * var food = { 'name': 'apple' };
   794|    * defaults(food, { 'name': 'banana', 'type': 'fruit' });
   795|    * // => { 'name': 'apple', 'type': 'fruit' }
   796|    */
   797|   var assign = createIterator(defaultsIteratorOptions, {
   798|     'top':
   799|       defaultsIteratorOptions.top.replace(';',
   800|         ';\n' +
   801|         'if (argsLength > 2) {\n' +
   802|         "  if (typeof args[argsLength - 2] == 'function') {\n" +
   803|         '    var callback = createCallback(args[--argsLength - 1], args[argsLength--], 2);\n' +
   804|         "  } else if (typeof args[argsLength - 1] == 'function') {\n" +
   805|         '    callback = args[--argsLength];\n' +
   806|         '  }\n' +
   807|         '}'
   808|       ),
   809|     'loop': 'result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]'
   810|   });
   811|   /**
   812|    * Creates a clone of `value`. If `deep` is `true`, nested objects will also
   813|    * be cloned, otherwise they will be assigned by reference. If a `callback`
   814|    * function is passed, it will be executed to produce the cloned values. If
   815|    * `callback` returns `undefined`, cloning will be handled by the method instead.
   816|    * The `callback` is bound to `thisArg` and invoked with one argument; (value).
   817|    *
   818|    * @static
   819|    * @memberOf _
   820|    * @category Objects
   821|    * @param {Mixed} value The value to clone.
   822|    * @param {Boolean} [deep=false] A flag to indicate a deep clone.
   823|    * @param {Function} [callback] The function to customize cloning values.
   824|    * @param {Mixed} [thisArg] The `this` binding of `callback`.
   825|    * @param- {Array} [stackA=[]] Internally used to track traversed source objects.
   826|    * @param- {Array} [stackB=[]] Internally used to associate clones with source counterparts.

# --- HUNK 4: Lines 1230-1276 ---
  1230|       if (ctorA != ctorB && !(
  1231|             isFunction(ctorA) && ctorA instanceof ctorA &&
  1232|             isFunction(ctorB) && ctorB instanceof ctorB
  1233|           )) {
  1234|         return false;
  1235|       }
  1236|     }
  1237|     stackA || (stackA = []);
  1238|     stackB || (stackB = []);
  1239|     var length = stackA.length;
  1240|     while (length--) {
  1241|       if (stackA[length] == a) {
  1242|         return stackB[length] == b;
  1243|       }
  1244|     }
  1245|     var size = 0;
  1246|     result = true;
  1247|     stackA.push(a);
  1248|     stackB.push(b);
  1249|     if (isArr) {
  1250|       size = b.length;
  1251|       result = whereIndicator || size == a.length;
  1252|       if (result) {
  1253|         while (size--) {
  1254|           if (!(result = isEqual(a[size], b[size], callback, thisArg, stackA, stackB))) {
  1255|             break;
  1256|           }
  1257|         }
  1258|       }
  1259|       return result;
  1260|     }
  1261|     forIn(b, function(value, key, b) {
  1262|       if (hasOwnProperty.call(b, key)) {
  1263|         size++;
  1264|         return (result = hasOwnProperty.call(a, key) && isEqual(a[key], value, callback, thisArg, stackA, stackB));
  1265|       }
  1266|     });
  1267|     if (result && !whereIndicator) {
  1268|       forIn(a, function(value, key, a) {
  1269|         if (hasOwnProperty.call(a, key)) {
  1270|           return (result = --size > -1);
  1271|         }
  1272|       });
  1273|     }
  1274|     return result;
  1275|   }
  1276|   /**

# --- HUNK 5: Lines 1549-1594 ---
  1549|    * });
  1550|    * // => { 'fruits': ['apple', 'banana'], 'vegetables': ['beet', 'carrot] }
  1551|    */
  1552|   function merge(object, source, deepIndicator) {
  1553|     var args = arguments,
  1554|         index = 0,
  1555|         length = 2;
  1556|     if (!isObject(object)) {
  1557|       return object;
  1558|     }
  1559|     if (deepIndicator === indicatorObject) {
  1560|       var callback = args[3],
  1561|           stackA = args[4],
  1562|           stackB = args[5];
  1563|     } else {
  1564|       stackA = [];
  1565|       stackB = [];
  1566|       if (typeof deepIndicator != 'number') {
  1567|         length = args.length;
  1568|       }
  1569|       if (length > 2) {
  1570|         if (typeof args[length - 2] == 'function') {
  1571|           callback = createCallback(args[--length - 1], args[length--], 2);
  1572|         } else if (typeof args[length - 1] == 'function') {
  1573|           callback = args[--length];
  1574|         }
  1575|       }
  1576|     }
  1577|     while (++index < length) {
  1578|       (isArray(args[index]) ? forEach : forOwn)(args[index], function(source, key) {
  1579|         var found,
  1580|             isArr,
  1581|             result = source,
  1582|             value = object[key];
  1583|         if (source && ((isArr = isArray(source)) || isPlainObject(source))) {
  1584|           var stackLength = stackA.length;
  1585|           while (stackLength--) {
  1586|             if ((found = stackA[stackLength] == source)) {
  1587|               value = stackB[stackLength];
  1588|               break;
  1589|             }
  1590|           }
  1591|           if (!found) {
  1592|             value = isArr
  1593|               ? (isArray(value) ? value : [])
  1594|               : (isPlainObject(value) ? value : {});

# --- HUNK 6: Lines 1745-1793 ---
  1745|    * @category Objects
  1746|    * @param {Object} object The object to inspect.
  1747|    * @returns {Array} Returns a new array of property values.
  1748|    * @example
  1749|    *
  1750|    * _.values({ 'one': 1, 'two': 2, 'three': 3 });
  1751|    * // => [1, 2, 3]
  1752|    */
  1753|   function values(object) {
  1754|     var index = -1,
  1755|         props = keys(object),
  1756|         length = props.length,
  1757|         result = Array(length);
  1758|     while (++index < length) {
  1759|       result[index] = object[props[index]];
  1760|     }
  1761|     return result;
  1762|   }
  1763|   /*--------------------------------------------------------------------------*/
  1764|   /**
  1765|    * Creates an array of elements from the specified index(es), or keys, of the
  1766|    * `collection`. Indexes may be specified as individual arguments or as arrays
  1767|    * of indexes.
  1768|    *
  1769|    * @static
  1770|    * @memberOf _
  1771|    * @category Collections
  1772|    * @param {Array|Object|String} collection The collection to iterate over.
  1773|    * @param {Array|Number|String} [index1, index2, ...] The index(es) of
  1774|    *  `collection` to retrieve, either as individual arguments or arrays.
  1775|    * @returns {Array} Returns a new array of elements corresponding to the
  1776|    *  provided indexes.
  1777|    * @example
  1778|    *
  1779|    * _.at(['a', 'b', 'c', 'd', 'e'], [0, 2, 4]);
  1780|    * // => ['a', 'c', 'e']
  1781|    *
  1782|    * _.at(['moe', 'larry', 'curly'], 0, 2);
  1783|    * // => ['moe', 'curly']
  1784|    */
  1785|   function at(collection) {
  1786|     var index = -1,
  1787|         props = concat.apply(arrayRef, slice(arguments, 1)),
  1788|         length = props.length,
  1789|         result = Array(length);
  1790|     while(++index < length) {
  1791|       result[index] = collection[props[index]];
  1792|     }
  1793|     return result;

# --- HUNK 7: Lines 3725-3764 ---
  3725|     return setTimeout(function() { func.apply(undefined, args); }, wait);
  3726|   }
  3727|   /**
  3728|    * Defers executing the `func` function until the current call stack has cleared.
  3729|    * Additional arguments will be passed to `func` when it is invoked.
  3730|    *
  3731|    * @static
  3732|    * @memberOf _
  3733|    * @category Functions
  3734|    * @param {Function} func The function to defer.
  3735|    * @param {Mixed} [arg1, arg2, ...] Arguments to invoke the function with.
  3736|    * @returns {Number} Returns the `setTimeout` timeout id.
  3737|    * @example
  3738|    *
  3739|    * _.defer(function() { alert('deferred'); });
  3740|    * // returns from the function before `alert` is called
  3741|    */
  3742|   function defer(func) {
  3743|     var args = slice(arguments, 1);
  3744|     return setTimeout(function() { func.apply(undefined, args); }, 1);
  3745|   }
  3746|   /**
  3747|    * Creates a function that memoizes the result of `func`. If `resolver` is
  3748|    * passed, it will be used to determine the cache key for storing the result
  3749|    * based on the arguments passed to the memoized function. By default, the first
  3750|    * argument passed to the memoized function is used as the cache key. The `func`
  3751|    * is executed with the `this` binding of the memoized function.
  3752|    *
  3753|    * @static
  3754|    * @memberOf _
  3755|    * @category Functions
  3756|    * @param {Function} func The function to have its output memoized.
  3757|    * @param {Function} [resolver] A function used to resolve the cache key.
  3758|    * @returns {Function} Returns the new memoizing function.
  3759|    * @example
  3760|    *
  3761|    * var fibonacci = _.memoize(function(n) {
  3762|    *   return n < 2 ? n : fibonacci(n - 1) + fibonacci(n - 2);
  3763|    * });
  3764|    */

# --- HUNK 8: Lines 4183-4223 ---
  4183|       }
  4184|       index = offset + match.length;
  4185|       return match;
  4186|     });
  4187|     source += "';\n";
  4188|     var variable = options.variable,
  4189|         hasVariable = variable;
  4190|     if (!hasVariable) {
  4191|       variable = 'obj';
  4192|       source = 'with (' + variable + ') {\n' + source + '\n}\n';
  4193|     }
  4194|     source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source)
  4195|       .replace(reEmptyStringMiddle, '$1')
  4196|       .replace(reEmptyStringTrailing, '$1;');
  4197|     source = 'function(' + variable + ') {\n' +
  4198|       (hasVariable ? '' : variable + ' || (' + variable + ' = {});\n') +
  4199|       "var __t, __p = '', __e = _.escape" +
  4200|       (isEvaluating
  4201|         ? ', __j = Array.prototype.join;\n' +
  4202|           "function print() { __p += __j.call(arguments, '') }\n"
  4203|         : (hasVariable ? '' : ', __d = ' + variable + '.' + variable + ' || ' + variable) + ';\n'
  4204|       ) +
  4205|       source +
  4206|       'return __p\n}';
  4207|     var sourceURL = '\n/*\n//@ sourceURL=' + (options.sourceURL || '/lodash/template/source[' + (templateCounter++) + ']') + '\n*/';
  4208|     try {
  4209|       var result = Function(importsKeys, 'return ' + source + sourceURL).apply(undefined, importsValues);
  4210|     } catch(e) {
  4211|       e.source = source;
  4212|       throw e;
  4213|     }
  4214|     if (data) {
  4215|       return result(data);
  4216|     }
  4217|     result.source = source;
  4218|     return result;
  4219|   }
  4220|   /**
  4221|    * Executes the `callback` function `n` times, returning an array of the results
  4222|    * of each `callback` execution. The `callback` is bound to `thisArg` and invoked
  4223|    * with one argument; (index).

# --- HUNK 9: Lines 4471-4532 ---
  4471|   lodash.take = first;
  4472|   lodash.head = first;
  4473|   forOwn(lodash, function(func, methodName) {
  4474|     if (!lodash.prototype[methodName]) {
  4475|       lodash.prototype[methodName]= function(callback, thisArg) {
  4476|         var result = func(this.__wrapped__, callback, thisArg);
  4477|         return callback == null || (thisArg && typeof callback != 'function')
  4478|           ? result
  4479|           : new lodash(result);
  4480|       };
  4481|     }
  4482|   });
  4483|   /*--------------------------------------------------------------------------*/
  4484|   /**
  4485|    * The semantic version number.
  4486|    *
  4487|    * @static
  4488|    * @memberOf _
  4489|    * @type String
  4490|    */
  4491|   lodash.VERSION = '1.0.0';
  4492|   lodash.prototype.toString = wrapperToString;
  4493|   lodash.prototype.value = wrapperValueOf;
  4494|   lodash.prototype.valueOf = wrapperValueOf;
  4495|   each(['join', 'pop', 'shift'], function(methodName) {
  4496|     var func = arrayRef[methodName];
  4497|     lodash.prototype[methodName] = function() {
  4498|       return func.apply(this.__wrapped__, arguments);
  4499|     };
  4500|   });
  4501|   each(['push', 'reverse', 'sort', 'unshift'], function(methodName) {
  4502|     var func = arrayRef[methodName];
  4503|     lodash.prototype[methodName] = function() {
  4504|       func.apply(this.__wrapped__, arguments);
  4505|       return this;
  4506|     };
  4507|   });
  4508|   each(['concat', 'slice', 'splice'], function(methodName) {
  4509|     var func = arrayRef[methodName];
  4510|     lodash.prototype[methodName] = function() {
  4511|       return new lodash(func.apply(this.__wrapped__, arguments));
  4512|     };
  4513|   });
  4514|   /*--------------------------------------------------------------------------*/
  4515|   if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {
  4516|     window._ = lodash;
  4517|     define(function() {
  4518|       return lodash;
  4519|     });
  4520|   }
  4521|   else if (freeExports) {
  4522|     if (typeof module == 'object' && module && module.exports == freeExports) {
  4523|       (module.exports = lodash)._ = lodash;
  4524|     }
  4525|     else {
  4526|       freeExports._ = lodash;
  4527|     }
  4528|   }
  4529|   else {
  4530|     window._ = lodash;
  4531|   }
  4532| }(this));


# ====================================================================
# FILE: dist/lodash.min.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-40 ---
     1| /**
     2|  * @license
     3|  * Lo-Dash 1.0.0 (Custom Build) lodash.com/license
     4|  * Build: `lodash modern -o ./dist/lodash.js`
     5|  * Underscore.js 1.4.4 underscorejs.org/LICENSE
     6|  */
     7| ;(function(n,t){function r(n){if(!n||typeof n!="object")return Q;var t=n.valueOf,r=typeof t=="function"&&(r=dt(t))&&dt(r);if(r)n=n==r||dt(n)==r&&!h(n);else{var e=Q;!n||typeof n!="object"||h(n)?n=e:(t=n.constructor,!j(t)||t instanceof t?(Wt(n,function(n,t){e=t}),n=e===Q||_t.call(n,e)):n=e)}return n}function e(n){return n&&typeof n=="object"&&n.__wrapped__?n:this instanceof e?(this.__wrapped__=n,void 0):new e(n)}function u(n,t,r){t||(t=0);var e=n.length,u=e-t>=(r||rt);if(u){var o={};for(r=t-1;++r<e;){var i=n[r]+"";
     8| (_t.call(o,i)?o[i]:o[i]=[]).push(n[r])}}return function(r){if(u){var e=r+"";return _t.call(o,e)&&-1<z(o[e],r)}return-1<z(n,r,t)}}function o(n){return n.charCodeAt(0)}function i(n,t){var r=n.b,e=t.b;if(n=n.a,t=t.a,n!==t){if(n>t||typeof n=="undefined")return 1;if(n<t||typeof t=="undefined")return-1}return r<e?-1:1}function f(n,t,r,e){function u(){var a=arguments,c=i?this:t;return o||(n=t[f]),r.length&&(a=a.length?(a=v(a),e?a.concat(r):r.concat(a)):r),this instanceof u?(s.prototype=n.prototype,c=new s,s.prototype=L,a=n.apply(c,a),w(a)?a:c):n.apply(c,a)
     9| }var o=j(n),i=!r,f=t;return i&&(r=t),o||(t=n),u}function a(n,t,r){if(n==L)return V;var e=typeof n;if("function"!=e){if("object"!=e)return function(t){return t[n]};var u=Zt(n);return function(t){for(var r=u.length,e=Q;r--&&(e=b(t[u[r]],n[u[r]],tt)););return e}}return typeof t!="undefined"?1===r?function(r){return n.call(t,r)}:2===r?function(r,e){return n.call(t,r,e)}:4===r?function(r,e,u,o){return n.call(t,r,e,u,o)}:function(r,e,u){return n.call(t,r,e,u)}:n}function c(){for(var n,t={g:Ct,b:"l(n)",c:"",h:"",l:"",m:J},r=0;n=arguments[r];r++)for(var e in n)t[e]=n[e];
    10| return n=t.a,t.d=/^[^,]+/.exec(n)[0],r="var j,n="+t.d+",u=n;if(!n)return u;"+t.l+";",t.b&&(r+="var o=n.length;j=-1;if("+t.b+"){while(++j<o){"+t.h+"}}else{"),t.g&&t.m?r+="var s=-1,t=r[typeof n]?p(n):[],o=t.length;while(++s<o){j=t[s];"+t.h+"}":(r+="for(j in n){",t.m&&(r+="if(",t.m&&(r+="i.call(n,j)"),r+="){"),r+=t.h+";",t.m&&(r+="}"),r+="}"),t.b&&(r+="}"),r+=t.c+";return u",Function("f,i,k,l,m,r,p","return function("+n+"){"+r+"}")(a,_t,h,Yt,A,Vt,Et)}function l(n){return"\\"+Gt[n]}function p(n){return nr[n]
    11| }function s(){}function v(n,t,r){t||(t=0),typeof r=="undefined"&&(r=n?n.length:0);var e=-1;r=r-t||0;for(var u=Array(0>r?0:r);++e<r;)u[e]=n[t+e];return u}function g(n){return tr[n]}function h(n){return jt.call(n)==$t}function y(n){var t=[];return Xt(n,function(n,r){t.push(r)}),t}function m(n,r,e,u,o,i){var f=n;if(typeof r=="function"&&(u=e,e=r,r=Q),typeof e=="function"){e=typeof u=="undefined"?e:a(e,u,1);var f=e(f),c=typeof f!="undefined";c||(f=n)}if(u=w(f)){var l=jt.call(f);if(!Kt[l])return f;var p=Yt(f)
    12| }if(!u||!r)return u&&!c?p?v(f):rr({},f):f;switch(u=Ut[l],l){case kt:case qt:return c?f:new u(+f);case Dt:case It:return c?f:new u(f);case Bt:return c?f:u(f.source,at.exec(f))}for(o||(o=[]),i||(i=[]),l=o.length;l--;)if(o[l]==n)return i[l];return c||(f=p?u(f.length):{},p&&(_t.call(n,"index")&&(f.index=n.index),_t.call(n,"input")&&(f.input=n.input))),o.push(n),i.push(f),(p?F:Xt)(c?f:n,function(n,u){f[u]=m(n,r,e,t,o,i)}),f}function d(n){var t=[];return Wt(n,function(n,r){j(n)&&t.push(r)}),t.sort()}function _(n){for(var t=-1,r=Zt(n),e=r.length,u={};++t<e;){var o=r[t];
    13| u[n[o]]=o}return u}function b(n,t,r,e,u,o){var i=r===tt;if(r&&!i){r=typeof e=="undefined"?r:a(r,e,2);var f=r(n,t);if(typeof f!="undefined")return!!f}if(n===t)return 0!==n||1/n==1/t;var c=typeof n,l=typeof t;if(n===n&&(!n||"function"!=c&&"object"!=c)&&(!t||"function"!=l&&"object"!=l))return Q;if(n==L||t==L)return n===t;if(l=jt.call(n),c=jt.call(t),l==$t&&(l=Tt),c==$t&&(c=Tt),l!=c)return Q;switch(l){case kt:case qt:return+n==+t;case Dt:return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case Bt:case It:return n==t+""
    14| }if(c=l==Ft,!c){if(n.__wrapped__||t.__wrapped__)return b(n.__wrapped__||n,t.__wrapped__||t,r,e,u,o);if(l!=Tt)return Q;var l=n.constructor,p=t.constructor;if(l!=p&&(!j(l)||!(l instanceof l&&j(p)&&p instanceof p)))return Q}for(u||(u=[]),o||(o=[]),l=u.length;l--;)if(u[l]==n)return o[l]==t;var s=0,f=J;if(u.push(n),o.push(t),c){if(s=t.length,f=i||s==n.length)for(;s--&&(f=b(n[s],t[s],r,e,u,o)););return f}return Wt(t,function(t,i,a){return _t.call(a,i)?(s++,f=_t.call(n,i)&&b(n[i],t,r,e,u,o)):void 0}),f&&!i&&Wt(n,function(n,t,r){return _t.call(r,t)?f=-1<--s:void 0
    15| }),f}function j(n){return typeof n=="function"}function w(n){return n?Vt[typeof n]:Q}function x(n){return typeof n=="number"||jt.call(n)==Dt}function A(n){return typeof n=="string"||jt.call(n)==It}function O(n,t,e){var u=arguments,o=0,i=2;if(!w(n))return n;if(e===tt)var f=u[3],c=u[4],l=u[5];else c=[],l=[],typeof e!="number"&&(i=u.length),2<i&&("function"==typeof u[i-2]?f=a(u[--i-1],u[i--],2):"function"==typeof u[i-1]&&(f=u[--i]));for(;++o<i;)(Yt(u[o])?F:Xt)(u[o],function(t,e){var u,o,i=t,a=n[e];if(t&&((o=Yt(t))||r(t))){for(i=c.length;i--;)if(u=c[i]==t){a=l[i];
    16| break}u||(a=o?Yt(a)?a:[]:r(a)?a:{},f&&(i=f(a,t),typeof i!="undefined"&&(a=i)),c.push(t),l.push(a),f||(a=O(a,t,tt,f,c,l)))}else f&&(i=f(a,t),typeof i=="undefined"&&(i=t)),typeof i!="undefined"&&(a=i);n[e]=a});return n}function E(n){for(var t=-1,r=Zt(n),e=r.length,u=Array(e);++t<e;)u[t]=n[r[t]];return u}function S(n,t,r){var e=-1,u=n?n.length:0,o=Q;return r=(0>r?St(0,u+r):r)||0,typeof u=="number"?o=-1<(A(n)?n.indexOf(t,r):z(n,t,r)):Qt(n,function(n){return++e<r?void 0:!(o=n===t)}),o}function N(n,t,r){var e=J;
    17| if(t=a(t,r),Yt(n)){r=-1;for(var u=n.length;++r<u&&(e=!!t(n[r],r,n)););}else Qt(n,function(n,r,u){return e=!!t(n,r,u)});return e}function R(n,t,r){var e=[];if(t=a(t,r),Yt(n)){r=-1;for(var u=n.length;++r<u;){var o=n[r];t(o,r,n)&&e.push(o)}}else Qt(n,function(n,r,u){t(n,r,u)&&e.push(n)});return e}function $(n,t,r){var e;return t=a(t,r),F(n,function(n,r,u){return t(n,r,u)?(e=n,Q):void 0}),e}function F(n,t,r){if(t&&typeof r=="undefined"&&Yt(n)){r=-1;for(var e=n.length;++r<e&&t(n[r],r,n)!==Q;);}else Qt(n,t,r);
    18| return n}function k(n,t,r){var e=-1,u=n?n.length:0,o=Array(typeof u=="number"?u:0);if(t=a(t,r),Yt(n))for(;++e<u;)o[e]=t(n[e],e,n);else Qt(n,function(n,r,u){o[++e]=t(n,r,u)});return o}function q(n,t,r){var e=-1/0,u=e;if(!t&&Yt(n)){r=-1;for(var i=n.length;++r<i;){var f=n[r];f>u&&(u=f)}}else t=!t&&A(n)?o:a(t,r),Qt(n,function(n,r,o){r=t(n,r,o),r>e&&(e=r,u=n)});return u}function D(n,t,r,e){var u=3>arguments.length;if(t=a(t,e,4),Yt(n)){var o=-1,i=n.length;for(u&&(r=n[++o]);++o<i;)r=t(r,n[o],o,n)}else Qt(n,function(n,e,o){r=u?(u=Q,n):t(r,n,e,o)
    19| });return r}function T(n,t,r,e){var u=n?n.length:0,o=3>arguments.length;if(typeof u!="number")var i=Zt(n),u=i.length;return t=a(t,e,4),F(n,function(e,f,a){f=i?i[--u]:--u,r=o?(o=Q,n[f]):t(r,n[f],f,a)}),r}function B(n,t,r){var e;if(t=a(t,r),Yt(n)){r=-1;for(var u=n.length;++r<u&&!(e=t(n[r],r,n)););}else Qt(n,function(n,r,u){return!(e=t(n,r,u))});return!!e}function I(n,t,r){if(n){var e=0,u=n.length;if(typeof t!="number"&&t!=L){var o=-1;for(t=a(t,r);++o<u&&t(n[o],o,n);)e++}else if(e=t,e==L||r)return n[0];
    20| return v(n,0,Nt(St(0,e),u))}}function M(n,t){for(var r=-1,e=n?n.length:0,u=[];++r<e;){var o=n[r];Yt(o)?bt.apply(u,t?o:M(o)):u.push(o)}return u}function z(n,t,r){var e=-1,u=n?n.length:0;if(typeof r=="number")e=(0>r?St(0,u+r):r||0)-1;else if(r)return e=C(n,t),n[e]===t?e:-1;for(;++e<u;)if(n[e]===t)return e;return-1}function P(n,t,r){if(typeof t!="number"&&t!=L){var e=0,u=-1,o=n?n.length:0;for(t=a(t,r);++u<o&&t(n[u],u,n);)e++}else e=t==L||r?1:St(0,t);return v(n,e)}function C(n,t,r,e){var u=0,o=n?n.length:u;
    21| for(r=r?a(r,e,1):V,t=r(t);u<o;)e=u+o>>>1,r(n[e])<t?u=e+1:o=e;return u}function K(n,t,r,e){var u=-1,o=n?n.length:0,i=[],f=i;typeof t=="function"&&(e=r,r=t,t=Q);var c=!t&&75<=o;if(c)var l={};for(r&&(f=[],r=a(r,e));++u<o;){e=n[u];var p=r?r(e,u,n):e;if(c)var s=p+"",s=_t.call(l,s)?!(f=l[s]):f=l[s]=[];(t?!u||f[f.length-1]!==p:s||0>z(f,p))&&((r||c)&&f.push(p),i.push(e))}return i}function U(n,t){return Pt||wt&&2<arguments.length?wt.call.apply(wt,arguments):f(n,t,v(arguments,2))}function V(n){return n}function G(n){F(d(n),function(t){var r=e[t]=n[t];
    22| e.prototype[t]=function(){var n=[this.__wrapped__];return bt.apply(n,arguments),new e(r.apply(e,n))}})}function H(){return this.__wrapped__}var J=!0,L=null,Q=!1,W=typeof exports=="object"&&exports,X=typeof global=="object"&&global;X.global===X&&(n=X);var Y=[],Z={},nt=0,tt=Z,rt=30,et=n._,ut=/&(?:amp|lt|gt|quot|#39);/g,ot=/\b__p\+='';/g,it=/\b(__p\+=)''\+/g,ft=/(__e\(.*?\)|\b__t\))\+'';/g,at=/\w*$/,ct=RegExp("^"+(Z.valueOf+"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),lt=/\$\{((?:(?=\\?)\\?[\s\S])*?)\}/g,pt=/<%=([\s\S]+?)%>/g,st=/($^)/,vt=/[&<>"']/g,gt=/['\n\r\t\u2028\u2029\\]/g,ht=Math.ceil,yt=Y.concat,mt=Math.floor,dt=ct.test(dt=Object.getPrototypeOf)&&dt,_t=Z.hasOwnProperty,bt=Y.push,jt=Z.toString,wt=ct.test(wt=v.bind)&&wt,xt=ct.test(xt=Array.isArray)&&xt,At=n.isFinite,Ot=n.isNaN,Et=ct.test(Et=Object.keys)&&Et,St=Math.max,Nt=Math.min,Rt=Math.random,$t="[object Arguments]",Ft="[object Array]",kt="[object Boolean]",qt="[object Date]",Dt="[object Number]",Tt="[object Object]",Bt="[object RegExp]",It="[object String]",Mt=!!n.attachEvent,zt=wt&&!/\n|true/.test(wt+Mt),Pt=wt&&!zt,Ct=Et&&(Mt||zt),Kt={"[object Function]":Q};
    23| Kt[$t]=Kt[Ft]=Kt[kt]=Kt[qt]=Kt[Dt]=Kt[Tt]=Kt[Bt]=Kt[It]=J;var Ut={};Ut[Ft]=Array,Ut[kt]=Boolean,Ut[qt]=Date,Ut[Tt]=Object,Ut[Dt]=Number,Ut[Bt]=RegExp,Ut[It]=String;var Vt={"boolean":Q,"function":J,object:J,number:Q,string:Q,undefined:Q},Gt={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};e.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:pt,variable:"",imports:{_:e}};var Ht={a:"q,w,h",l:"var a=arguments,b=0,c=typeof h=='number'?2:a.length;while(++b<c){n=a[b];if(n&&r[typeof n]){",h:"if(typeof u[j]=='undefined')u[j]=n[j]",c:"}}"},Jt={a:"e,d,x",l:"d=d&&typeof x=='undefined'?d:f(d,x)",b:"typeof o=='number'",h:"if(d(n[j],j,e)===false)return u"},Lt={l:"if(!r[typeof n])return u;"+Jt.l,b:Q},Qt=c(Jt),Wt=c(Jt,Lt,{m:Q}),Xt=c(Jt,Lt),Yt=xt||function(n){return n instanceof Array||jt.call(n)==Ft
    24| },Zt=Et?function(n){return w(n)?Et(n):[]}:y,nr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},tr=_(nr),rr=c(Ht,{l:Ht.l.replace(";",";if(c>2){if(typeof a[c-2]=='function'){var d=f(a[--c-1],a[c--],2);}else if(typeof a[c-1]=='function'){d=a[--c];}}"),h:"u[j]=d?d(u[j],n[j]):n[j]"}),er=c(Ht);j(/x/)&&(j=function(n){return n instanceof Function||"[object Function]"==jt.call(n)}),e.after=function(n,t){return 1>n?t():function(){return 1>--n?t.apply(this,arguments):void 0}},e.assign=rr,e.at=function(n){for(var t=-1,r=yt.apply(Y,v(arguments,1)),e=r.length,u=Array(e);++t<e;)u[t]=n[r[t]];
    25| return u},e.bind=U,e.bindAll=function(n){for(var t=yt.apply(Y,arguments),r=1<t.length?0:(t=d(n),-1),e=t.length;++r<e;){var u=t[r];n[u]=U(n[u],n)}return n},e.bindKey=function(n,t){return f(n,t,v(arguments,2))},e.compact=function(n){for(var t=-1,r=n?n.length:0,e=[];++t<r;){var u=n[t];u&&e.push(u)}return e},e.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length;r--;)t=[n[r].apply(this,t)];return t[0]}},e.countBy=function(n,t,r){var e={};return t=a(t,r),F(n,function(n,r,u){r=t(n,r,u)+"",_t.call(e,r)?e[r]++:e[r]=1
    26| }),e},e.debounce=function(n,t,r){function e(){f=L,r||(o=n.apply(i,u))}var u,o,i,f;return function(){var a=r&&!f;return u=arguments,i=this,clearTimeout(f),f=setTimeout(e,t),a&&(o=n.apply(i,u)),o}},e.defaults=er,e.defer=function(n){var r=v(arguments,1);return setTimeout(function(){n.apply(t,r)},1)},e.delay=function(n,r){var e=v(arguments,2);return setTimeout(function(){n.apply(t,e)},r)},e.difference=function(n){for(var t=-1,r=n?n.length:0,e=yt.apply(Y,arguments),e=u(e,r),o=[];++t<r;){var i=n[t];e(i)||o.push(i)
    27| }return o},e.filter=R,e.flatten=M,e.forEach=F,e.forIn=Wt,e.forOwn=Xt,e.functions=d,e.groupBy=function(n,t,r){var e={};return t=a(t,r),F(n,function(n,r,u){r=t(n,r,u)+"",(_t.call(e,r)?e[r]:e[r]=[]).push(n)}),e},e.initial=function(n,t,r){if(!n)return[];var e=0,u=n.length;if(typeof t!="number"&&t!=L){var o=u;for(t=a(t,r);o--&&t(n[o],o,n);)e++}else e=t==L||r?1:t||e;return v(n,0,Nt(St(0,u-e),u))},e.intersection=function(n){var t=arguments,r=t.length,e={0:{}},o=-1,i=n?n.length:0,f=100<=i,a=[],c=a;n:for(;++o<i;){var l=n[o];
    28| if(f)var p=l+"",p=_t.call(e[0],p)?!(c=e[0][p]):c=e[0][p]=[];if(p||0>z(c,l)){f&&c.push(l);for(var s=r;--s;)if(!(e[s]||(e[s]=u(t[s],0,100)))(l))continue n;a.push(l)}}return a},e.invert=_,e.invoke=function(n,t){var r=v(arguments,2),e=-1,u=typeof t=="function",o=n?n.length:0,i=Array(typeof o=="number"?o:0);return F(n,function(n){i[++e]=(u?t:n[t]).apply(n,r)}),i},e.keys=Zt,e.map=k,e.max=q,e.memoize=function(n,t){var r={};return function(){var e=(t?t.apply(this,arguments):arguments[0])+"";return _t.call(r,e)?r[e]:r[e]=n.apply(this,arguments)
    29| }},e.merge=O,e.min=function(n,t,r){var e=1/0,u=e;if(!t&&Yt(n)){r=-1;for(var i=n.length;++r<i;){var f=n[r];f<u&&(u=f)}}else t=!t&&A(n)?o:a(t,r),Qt(n,function(n,r,o){r=t(n,r,o),r<e&&(e=r,u=n)});return u},e.object=function(n,t){for(var r=-1,e=n?n.length:0,u={};++r<e;){var o=n[r];t?u[o]=t[r]:u[o[0]]=o[1]}return u},e.omit=function(n,t,r){var e=typeof t=="function",u={};if(e)t=a(t,r);else var o=yt.apply(Y,arguments);return Wt(n,function(n,r,i){(e?!t(n,r,i):0>z(o,r,1))&&(u[r]=n)}),u},e.once=function(n){var t,r;
    30| return function(){return t?r:(t=J,r=n.apply(this,arguments),n=L,r)}},e.pairs=function(n){for(var t=-1,r=Zt(n),e=r.length,u=Array(e);++t<e;){var o=r[t];u[t]=[o,n[o]]}return u},e.partial=function(n){return f(n,v(arguments,1))},e.partialRight=function(n){return f(n,v(arguments,1),L,tt)},e.pick=function(n,t,r){var e={};if(typeof t!="function")for(var u=0,o=yt.apply(Y,arguments),i=w(n)?o.length:0;++u<i;){var f=o[u];f in n&&(e[f]=n[f])}else t=a(t,r),Wt(n,function(n,r,u){t(n,r,u)&&(e[r]=n)});return e},e.pluck=k,e.range=function(n,t,r){n=+n||0,r=+r||1,t==L&&(t=n,n=0);
    31| var e=-1;t=St(0,ht((t-n)/r));for(var u=Array(t);++e<t;)u[e]=n,n+=r;return u},e.reject=function(n,t,r){return t=a(t,r),R(n,function(n,r,e){return!t(n,r,e)})},e.rest=P,e.shuffle=function(n){var t=-1,r=n?n.length:0,e=Array(typeof r=="number"?r:0);return F(n,function(n){var r=mt(Rt()*(++t+1));e[t]=e[r],e[r]=n}),e},e.sortBy=function(n,t,r){var e=-1,u=n?n.length:0,o=Array(typeof u=="number"?u:0);for(t=a(t,r),F(n,function(n,r,u){o[++e]={a:t(n,r,u),b:e,c:n}}),u=o.length,o.sort(i);u--;)o[u]=o[u].c;return o
    32| },e.tap=function(n,t){return t(n),n},e.throttle=function(n,t){function r(){f=new Date,i=L,u=n.apply(o,e)}var e,u,o,i,f=0;return function(){var a=new Date,c=t-(a-f);return e=arguments,o=this,0<c?i||(i=setTimeout(r,c)):(clearTimeout(i),i=L,f=a,u=n.apply(o,e)),u}},e.times=function(n,t,r){n=+n||0;for(var e=-1,u=Array(n);++e<n;)u[e]=t.call(r,e);return u},e.toArray=function(n){return n&&typeof n.length=="number"?v(n):E(n)},e.union=function(){return K(yt.apply(Y,arguments))},e.uniq=K,e.values=E,e.where=R,e.without=function(n){for(var t=-1,r=n?n.length:0,e=u(arguments,1),o=[];++t<r;){var i=n[t];
    33| e(i)||o.push(i)}return o},e.wrap=function(n,t){return function(){var r=[n];return bt.apply(r,arguments),t.apply(this,r)}},e.zip=function(n){for(var t=-1,r=n?q(k(arguments,"length")):0,e=Array(r);++t<r;)e[t]=k(arguments,t);return e},e.collect=k,e.drop=P,e.each=F,e.extend=rr,e.methods=d,e.select=R,e.tail=P,e.unique=K,G(e),e.clone=m,e.cloneDeep=function(n,t,r){return m(n,J,t,r)},e.contains=S,e.escape=function(n){return n==L?"":(n+"").replace(vt,p)},e.every=N,e.find=$,e.has=function(n,t){return n?_t.call(n,t):Q
    34| },e.identity=V,e.indexOf=z,e.isArguments=h,e.isArray=Yt,e.isBoolean=function(n){return n===J||n===Q||jt.call(n)==kt},e.isDate=function(n){return n instanceof Date||jt.call(n)==qt},e.isElement=function(n){return n?1===n.nodeType:Q},e.isEmpty=function(n){var t=J;if(!n)return t;var r=jt.call(n),e=n.length;return r==Ft||r==It||r==$t||r==Tt&&typeof e=="number"&&j(n.splice)?!e:(Xt(n,function(){return t=Q}),t)},e.isEqual=b,e.isFinite=function(n){return At(n)&&!Ot(parseFloat(n))},e.isFunction=j,e.isNaN=function(n){return x(n)&&n!=+n
    35| },e.isNull=function(n){return n===L},e.isNumber=x,e.isObject=w,e.isPlainObject=r,e.isRegExp=function(n){return n instanceof RegExp||jt.call(n)==Bt},e.isString=A,e.isUndefined=function(n){return typeof n=="undefined"},e.lastIndexOf=function(n,t,r){var e=n?n.length:0;for(typeof r=="number"&&(e=(0>r?St(0,e+r):Nt(r,e-1))+1);e--;)if(n[e]===t)return e;return-1},e.mixin=G,e.noConflict=function(){return n._=et,this},e.random=function(n,t){return n==L&&t==L&&(t=1),n=+n||0,t==L&&(t=n,n=0),n+mt(Rt()*((+t||0)-n+1))
    36| },e.reduce=D,e.reduceRight=T,e.result=function(n,r){var e=n?n[r]:t;return j(e)?n[r]():e},e.size=function(n){var t=n?n.length:0;return typeof t=="number"?t:Zt(n).length},e.some=B,e.sortedIndex=C,e.template=function(n,r,u){var o=e.templateSettings;n||(n=""),u=er({},u,o);var i,f=er({},u.imports,o.imports),o=Zt(f),f=E(f),a=0,c=u.interpolate||st,p="__p+='";n.replace(RegExp((u.escape||st).source+"|"+c.source+"|"+(c===pt?lt:st).source+"|"+(u.evaluate||st).source+"|$","g"),function(t,r,e,u,o,f){return e||(e=u),p+=n.slice(a,f).replace(gt,l),r&&(p+="'+__e("+r+")+'"),o&&(i=J,p+="';"+o+";__p+='"),e&&(p+="'+((__t=("+e+"))==null?'':__t)+'"),a=f+t.length,t
    37| }),p+="';\n",c=u=u.variable,c||(u="obj",p="with("+u+"){"+p+"}"),p=(i?p.replace(ot,""):p).replace(it,"$1").replace(ft,"$1;"),p="function("+u+"){"+(c?"":u+"||("+u+"={});")+"var __t,__p='',__e=_.escape"+(i?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":(c?"":",__d="+u+"."+u+"||"+u)+";")+p+"return __p}";try{var s=Function(o,"return "+p).apply(t,f)}catch(v){throw v.source=p,v}return r?s(r):(s.source=p,s)},e.unescape=function(n){return n==L?"":(n+"").replace(ut,g)},e.uniqueId=function(n){var t=++nt;
    38| return(n==L?"":n+"")+t},e.all=N,e.any=B,e.detect=$,e.foldl=D,e.foldr=T,e.include=S,e.inject=D,Xt(e,function(n,t){e.prototype[t]||(e.prototype[t]=function(){var t=[this.__wrapped__];return bt.apply(t,arguments),n.apply(e,t)})}),e.first=I,e.last=function(n,t,r){if(n){var e=0,u=n.length;if(typeof t!="number"&&t!=L){var o=u;for(t=a(t,r);o--&&t(n[o],o,n);)e++}else if(e=t,e==L||r)return n[u-1];return v(n,St(0,u-e))}},e.take=I,e.head=I,Xt(e,function(n,t){e.prototype[t]||(e.prototype[t]=function(t,r){var u=n(this.__wrapped__,t,r);
    39| return t==L||r&&typeof t!="function"?u:new e(u)})}),e.VERSION="1.0.0",e.prototype.toString=function(){return this.__wrapped__+""},e.prototype.value=H,e.prototype.valueOf=H,Qt(["join","pop","shift"],function(n){var t=Y[n];e.prototype[n]=function(){return t.apply(this.__wrapped__,arguments)}}),Qt(["push","reverse","sort","unshift"],function(n){var t=Y[n];e.prototype[n]=function(){return t.apply(this.__wrapped__,arguments),this}}),Qt(["concat","slice","splice"],function(n){var t=Y[n];e.prototype[n]=function(){return new e(t.apply(this.__wrapped__,arguments))
    40| }}),typeof define=="function"&&typeof define.amd=="object"&&define.amd?(n._=e,define(function(){return e})):W?typeof module=="object"&&module&&module.exports==W?(module.exports=e)._=e:W._=e:n._=e})(this);


# ====================================================================
# FILE: dist/lodash.underscore.js
# Total hunks: 5
# ====================================================================
# --- HUNK 1: Lines 1-65 ---
     1| /**
     2|  * @license
     3|  * Lo-Dash 1.0.0 (Custom Build) <http://lodash.com/>
     4|  * Build: `lodash underscore -o ./dist/lodash.underscore.js`
     5|  * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
     6|  * Based on Underscore.js 1.4.4 <http://underscorejs.org/>
     7|  * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud Inc.
     8|  * Available under MIT license <http://lodash.com/license>
     9|  */
    10| ;(function(window, undefined) {
    11|   /** Detect free variable `exports` */
    12|   var freeExports = typeof exports == 'object' && exports;
    13|   /** Detect free variable `global` and use it as `window` */
    14|   var freeGlobal = typeof global == 'object' && global;
    15|   if (freeGlobal.global === freeGlobal) {
    16|     window = freeGlobal;
    17|   }
    18|   /** Used for array and object method references */
    19|   var arrayRef = [],
    20|       objectRef = {};
    21|   /** Used to generate unique IDs */
    22|   var idCounter = 0;
    23|   /** Used internally to indicate various things */
    24|   var indicatorObject = objectRef;
    25|   /** Used to restore the original `_` reference in `noConflict` */
    26|   var oldDash = window._;
    27|   /** Used to match HTML entities */
    28|   var reEscapedHtml = /&(?:amp|lt|gt|quot|#39);/g;
    29|   /** Used to match empty string literals in compiled template source */
    30|   var reEmptyStringLeading = /\b__p \+= '';/g,
    31|       reEmptyStringMiddle = /\b(__p \+=) '' \+/g,
    32|       reEmptyStringTrailing = /(__e\(.*?\)|\b__t\)) \+\n'';/g;
    33|   /** Used to match regexp flags from their coerced string values */
    34|   var reFlags = /\w*$/;
    35|   /** Used to detect if a method is native */
    36|   var reNative = RegExp('^' +
    37|     (objectRef.valueOf + '')
    38|       .replace(/[.*+?^${}()|[\]\\]/g, '\\$&')
    39|       .replace(/valueOf|for [^\]]+/g, '.+?') + '$'
    40|   );
    41|   /**
    42|    * Used to match ES6 template delimiters
    43|    * http://people.mozilla.org/~jorendorff/es6-draft.html#sec-7.8.6
    44|    */
    45|   var reEsTemplate = /\$\{((?:(?=\\?)\\?[\s\S])*?)\}/g;
    46|   /** Used to match "interpolate" template delimiters */
    47|   var reInterpolate = /<%=([\s\S]+?)%>/g;
    48|   /** Used to ensure capturing order of template delimiters */
    49|   var reNoMatch = /($^)/;
    50|   /** Used to match HTML characters */
    51|   var reUnescapedHtml = /[&<>"']/g;
    52|   /** Used to match unescaped characters in compiled string literals */
    53|   var reUnescapedString = /['\n\r\t\u2028\u2029\\]/g;
    54|   /** Used to make template sourceURLs easier to identify */
    55|   var templateCounter = 0;
    56|   /** Native method shortcuts */
    57|   var ceil = Math.ceil,
    58|       concat = arrayRef.concat,
    59|       floor = Math.floor,
    60|       hasOwnProperty = objectRef.hasOwnProperty,
    61|       push = arrayRef.push,
    62|       toString = objectRef.toString;
    63|   /* Native method shortcuts for methods with the same name as other `lodash` methods */
    64|   var nativeBind = reNative.test(nativeBind = slice.bind) && nativeBind,
    65|       nativeIsArray = reNative.test(nativeIsArray = Array.isArray) && nativeIsArray,

# --- HUNK 2: Lines 3215-3254 ---
  3215|     return setTimeout(function() { func.apply(undefined, args); }, wait);
  3216|   }
  3217|   /**
  3218|    * Defers executing the `func` function until the current call stack has cleared.
  3219|    * Additional arguments will be passed to `func` when it is invoked.
  3220|    *
  3221|    * @static
  3222|    * @memberOf _
  3223|    * @category Functions
  3224|    * @param {Function} func The function to defer.
  3225|    * @param {Mixed} [arg1, arg2, ...] Arguments to invoke the function with.
  3226|    * @returns {Number} Returns the `setTimeout` timeout id.
  3227|    * @example
  3228|    *
  3229|    * _.defer(function() { alert('deferred'); });
  3230|    * // returns from the function before `alert` is called
  3231|    */
  3232|   function defer(func) {
  3233|     var args = slice(arguments, 1);
  3234|     return setTimeout(function() { func.apply(undefined, args); }, 1);
  3235|   }
  3236|   /**
  3237|    * Creates a function that memoizes the result of `func`. If `resolver` is
  3238|    * passed, it will be used to determine the cache key for storing the result
  3239|    * based on the arguments passed to the memoized function. By default, the first
  3240|    * argument passed to the memoized function is used as the cache key. The `func`
  3241|    * is executed with the `this` binding of the memoized function.
  3242|    *
  3243|    * @static
  3244|    * @memberOf _
  3245|    * @category Functions
  3246|    * @param {Function} func The function to have its output memoized.
  3247|    * @param {Function} [resolver] A function used to resolve the cache key.
  3248|    * @returns {Function} Returns the new memoizing function.
  3249|    * @example
  3250|    *
  3251|    * var fibonacci = _.memoize(function(n) {
  3252|    *   return n < 2 ? n : fibonacci(n - 1) + fibonacci(n - 2);
  3253|    * });
  3254|    */

# --- HUNK 3: Lines 3936-3995 ---
  3936|   lodash.any = some;
  3937|   lodash.detect = find;
  3938|   lodash.foldl = reduce;
  3939|   lodash.foldr = reduceRight;
  3940|   lodash.include = contains;
  3941|   lodash.inject = reduce;
  3942|   /*--------------------------------------------------------------------------*/
  3943|   lodash.first = first;
  3944|   lodash.last = last;
  3945|   lodash.take = first;
  3946|   lodash.head = first;
  3947|   /*--------------------------------------------------------------------------*/
  3948|   lodash.chain = chain;
  3949|   /**
  3950|    * The semantic version number.
  3951|    *
  3952|    * @static
  3953|    * @memberOf _
  3954|    * @type String
  3955|    */
  3956|   lodash.VERSION = '1.0.0';
  3957|   mixin(lodash);
  3958|   lodash.prototype.chain = wrapperChain;
  3959|   lodash.prototype.value = wrapperValueOf;
  3960|   each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(methodName) {
  3961|     var func = arrayRef[methodName];
  3962|     lodash.prototype[methodName] = function() {
  3963|       var value = this.__wrapped__;
  3964|       func.apply(value, arguments);
  3965|       if (hasObjectSpliceBug && value.length === 0) {
  3966|         delete value[0];
  3967|       }
  3968|       return this;
  3969|     };
  3970|   });
  3971|   each(['concat', 'join', 'slice'], function(methodName) {
  3972|     var func = arrayRef[methodName];
  3973|     lodash.prototype[methodName] = function() {
  3974|       var value = this.__wrapped__,
  3975|           result = func.apply(value, arguments);
  3976|       if (this.__chain__) {
  3977|         result = new lodash(result);
  3978|         result.__chain__ = true;
  3979|       }
  3980|       return result;
  3981|     };
  3982|   });
  3983|   /*--------------------------------------------------------------------------*/
  3984|   if (freeExports) {
  3985|     if (typeof module == 'object' && module && module.exports == freeExports) {
  3986|       (module.exports = lodash)._ = lodash;
  3987|     }
  3988|     else {
  3989|       freeExports._ = lodash;
  3990|     }
  3991|   }
  3992|   else {
  3993|     window._ = lodash;
  3994|   }
  3995| }(this));


# ====================================================================
# FILE: dist/lodash.underscore.min.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-34 ---
     1| /**
     2|  * @license
     3|  * Lo-Dash 1.0.0 (Custom Build) lodash.com/license
     4|  * Build: `lodash underscore -o ./dist/lodash.underscore.js`
     5|  * Underscore.js 1.4.4 underscorejs.org/LICENSE
     6|  */
     7| ;(function(n,r){function t(n,r){var t;if(n&&Rr[typeof n])for(t in r||(r=W),n)if(r(n[t],t,n)===Z)break}function e(n,r,t){if(n){r=r&&typeof t=="undefined"?r:a(r,t);var e=n.length;if(t=-1,typeof e=="number")for(;++t<e&&r(n[t],t,n)!==Z;);else for(t in n)if(cr.call(n,t)&&r(n[t],t,n)===Z)break}}function u(n){return n&&typeof n=="object"&&n.__wrapped__?n:this instanceof u?(this.__wrapped__=n,void 0):new u(n)}function o(n,r){var t=n.b,e=r.b;if(n=n.a,r=r.a,n!==r){if(n>r||typeof n=="undefined")return 1;if(n<r||typeof r=="undefined")return-1
     8| }return t<e?-1:1}function i(n,r,t){function e(){var a=arguments,f=o?this:r;return u||(n=r[i]),t.length&&(a=a.length?(a=p(a),t.concat(a)):t),this instanceof e?(l.prototype=n.prototype,f=new l,l.prototype=J,a=n.apply(f,a),w(a)?a:f):n.apply(f,a)}var u=j(n),o=!t,i=r;return o&&(t=r),u||(r=n),e}function a(n,r,t){if(n==J)return W;var e=typeof n;if("function"!=e){if("object"!=e)return function(r){return r[n]};var u=Br(n);return function(r){for(var t=u.length,e=K;t--&&(e=r[u[t]]===n[u[t]]););return e}}return typeof r!="undefined"?1===t?function(t){return n.call(r,t)
     9| }:2===t?function(t,e){return n.call(r,t,e)}:4===t?function(t,e,u,o){return n.call(r,t,e,u,o)}:function(t,e,u){return n.call(r,t,e,u)}:n}function f(n){return"\\"+Tr[n]}function c(n){return Dr[n]}function l(){}function p(n,r,t){r||(r=0),typeof t=="undefined"&&(t=n?n.length:0);var e=-1;t=t-r||0;for(var u=Array(0>t?0:t);++e<t;)u[e]=n[r+e];return u}function s(n){return Mr[n]}function v(n){return pr.call(n)==br}function h(n){var r,t=[],e=function(n,r){t.push(r)};if(n&&Rr[typeof n])for(r in e||(e=W),n)if(cr.call(n,r)&&e(n[r],r,n)===Z)break;
    10| return t}function g(n){if(!n)return n;for(var r=1,t=arguments.length;r<t;r++){var e=arguments[r];if(e)for(var u in e)n[u]=e[u]}return n}function y(n){if(!n)return n;for(var r=1,t=arguments.length;r<t;r++){var e=arguments[r];if(e)for(var u in e)n[u]==J&&(n[u]=e[u])}return n}function m(n){var r=[];return t(n,function(n,t){j(n)&&r.push(t)}),r.sort()}function _(n){for(var r=-1,t=Br(n),e=t.length,u={};++r<e;){var o=t[r];u[n[o]]=o}return u}function d(n){if(!n)return H;if(qr(n)||x(n))return!n.length;for(var r in n)if(cr.call(n,r))return K;
    11| return H}function b(n,r,e,u){if(n===r)return 0!==n||1/n==1/r;var o=typeof n,i=typeof r;if(n===n&&(!n||"function"!=o&&"object"!=o)&&(!r||"function"!=i&&"object"!=i))return K;if(n==J||r==J)return n===r;if(i=pr.call(n),o=pr.call(r),i!=o)return K;switch(i){case wr:case Ar:return+n==+r;case xr:return n!=+n?r!=+r:0==n?1/n==1/r:n==+r;case Or:case Sr:return n==r+""}if(o=i==jr,!o){if(n.__wrapped__||r.__wrapped__)return b(n.__wrapped__||n,r.__wrapped__||r,e,u);if(i!=Er)return K;var i=n.constructor,a=r.constructor;
    12| if(i!=a&&(!j(i)||!(i instanceof i&&j(a)&&a instanceof a)))return K}for(e||(e=[]),u||(u=[]),i=e.length;i--;)if(e[i]==n)return u[i]==r;var f=H,c=0;if(e.push(n),u.push(r),o){if(c=r.length,f=c==n.length)for(;c--&&(f=b(n[c],r[c],e,u)););return f}return t(r,function(r,t,o){return cr.call(o,t)?(c++,!(f=cr.call(n,t)&&b(n[t],r,e,u))&&Z):void 0}),f&&t(n,function(n,r,t){return cr.call(t,r)?!(f=-1<--c)&&Z:void 0}),f}function j(n){return typeof n=="function"}function w(n){return n?Rr[typeof n]:K}function A(n){return typeof n=="number"||pr.call(n)==xr
    13| }function x(n){return typeof n=="string"||pr.call(n)==Sr}function E(n){for(var r=-1,t=Br(n),e=t.length,u=Array(e);++r<e;)u[r]=n[t[r]];return u}function O(n,r){var t=K;return typeof(n?n.length:0)=="number"?t=-1<z(n,r):e(n,function(n){return(t=n===r)&&Z}),t}function S(n,r,t){var u=H;if(r=a(r,t),qr(n)){t=-1;for(var o=n.length;++t<o&&(u=!!r(n[t],t,n)););}else e(n,function(n,t,e){return!(u=!!r(n,t,e))&&Z});return u}function N(n,r,t){var u=[];if(r=a(r,t),qr(n)){t=-1;for(var o=n.length;++t<o;){var i=n[t];
    14| r(i,t,n)&&u.push(i)}}else e(n,function(n,t,e){r(n,t,e)&&u.push(n)});return u}function k(n,r,t){var e;return r=a(r,t),F(n,function(n,t,u){return r(n,t,u)?(e=n,Z):void 0}),e}function F(n,r,t){if(r&&typeof t=="undefined"&&qr(n)){t=-1;for(var u=n.length;++t<u&&r(n[t],t,n)!==Z;);}else e(n,r,t)}function R(n,r,t){var u=-1,o=n?n.length:0,i=Array(typeof o=="number"?o:0);if(r=a(r,t),qr(n))for(;++u<o;)i[u]=r(n[u],u,n);else e(n,function(n,t,e){i[++u]=r(n,t,e)});return i}function T(n,r,t){var u=-1/0,o=u;if(!r&&qr(n)){t=-1;
    15| for(var i=n.length;++t<i;){var f=n[t];f>o&&(o=f)}}else r=a(r,t),e(n,function(n,t,e){t=r(n,t,e),t>u&&(u=t,o=n)});return o}function q(n,r,t,u){var o=3>arguments.length;if(r=a(r,u,4),qr(n)){var i=-1,f=n.length;for(o&&(t=n[++i]);++i<f;)t=r(t,n[i],i,n)}else e(n,function(n,e,u){t=o?(o=K,n):r(t,n,e,u)});return t}function B(n,r,t,e){var u=n?n.length:0,o=3>arguments.length;if(typeof u!="number")var i=Br(n),u=i.length;return r=a(r,e,4),F(n,function(e,a,f){a=i?i[--u]:--u,t=o?(o=K,n[a]):r(t,n[a],a,f)}),t}function D(n,r,t){var u;
    16| if(r=a(r,t),qr(n)){t=-1;for(var o=n.length;++t<o&&!(u=r(n[t],t,n)););}else e(n,function(n,t,e){return(u=r(n,t,e))&&Z});return!!u}function M(n,r,t){return t&&d(r)?J:(t?k:N)(n,r)}function $(n,r,t){if(n){var e=0,u=n.length;if(typeof r!="number"&&r!=J){var o=-1;for(r=a(r,t);++o<u&&r(n[o],o,n);)e++}else if(e=r,e==J||t)return n[0];return p(n,0,_r(mr(0,e),u))}}function I(n,r){for(var t=-1,e=n?n.length:0,u=[];++t<e;){var o=n[t];qr(o)?lr.apply(u,r?o:I(o)):u.push(o)}return u}function z(n,r,t){var e=-1,u=n?n.length:0;
    17| if(typeof t=="number")e=(0>t?mr(0,u+t):t||0)-1;else if(t)return e=P(n,r),n[e]===r?e:-1;for(;++e<u;)if(n[e]===r)return e;return-1}function C(n,r,t){if(typeof r!="number"&&r!=J){var e=0,u=-1,o=n?n.length:0;for(r=a(r,t);++u<o&&r(n[u],u,n);)e++}else e=r==J||t?1:mr(0,r);return p(n,e)}function P(n,r,t,e){var u=0,o=n?n.length:u;for(t=t?a(t,e,1):W,r=t(r);u<o;)e=u+o>>>1,t(n[e])<r?u=e+1:o=e;return u}function U(n,r,t,e){var u=-1,o=n?n.length:0,i=[],f=i;for(typeof r=="function"&&(e=t,t=r,r=K),t&&(f=[],t=a(t,e));++u<o;){e=n[u];
    18| var c=t?t(e,u,n):e;(r?!u||f[f.length-1]!==c:0>z(f,c))&&(t&&f.push(c),i.push(e))}return i}function V(n,r){return Nr||sr&&2<arguments.length?sr.call.apply(sr,arguments):i(n,r,p(arguments,2))}function W(n){return n}function G(n){F(m(n),function(r){var t=u[r]=n[r];u.prototype[r]=function(){var n=[this.__wrapped__];return lr.apply(n,arguments),n=t.apply(u,n),this.__chain__&&(n=new u(n),n.__chain__=H),n}})}var H=!0,J=null,K=!1,L=typeof exports=="object"&&exports,Q=typeof global=="object"&&global;Q.global===Q&&(n=Q);
    19| var X=[],Q={},Y=0,Z=Q,nr=n._,rr=/&(?:amp|lt|gt|quot|#39);/g,tr=RegExp("^"+(Q.valueOf+"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),er=/($^)/,ur=/[&<>"']/g,or=/['\n\r\t\u2028\u2029\\]/g,ir=Math.ceil,ar=X.concat,fr=Math.floor,cr=Q.hasOwnProperty,lr=X.push,pr=Q.toString,sr=tr.test(sr=p.bind)&&sr,vr=tr.test(vr=Array.isArray)&&vr,hr=n.isFinite,gr=n.isNaN,yr=tr.test(yr=Object.keys)&&yr,mr=Math.max,_r=Math.min,dr=Math.random,br="[object Arguments]",jr="[object Array]",wr="[object Boolean]",Ar="[object Date]",xr="[object Number]",Er="[object Object]",Or="[object RegExp]",Sr="[object String]",Q=!!n.attachEvent,Q=sr&&!/\n|true/.test(sr+Q),Nr=sr&&!Q,kr=(kr={0:1,length:1},X.splice.call(kr,0,1),kr[0]),Fr=arguments.constructor==Object,Rr={"boolean":K,"function":H,object:H,number:K,string:K,undefined:K},Tr={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};
    20| u.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,variable:""},v(arguments)||(v=function(n){return n?cr.call(n,"callee"):K});var qr=vr||function(n){return Fr&&n instanceof Array||pr.call(n)==jr},Br=yr?function(n){return w(n)?yr(n):[]}:h,Dr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Mr=_(Dr);j(/x/)&&(j=function(n){return n instanceof Function||"[object Function]"==pr.call(n)});var $r=R;u.after=function(n,r){return 1>n?r():function(){return 1>--n?r.apply(this,arguments):void 0
    21| }},u.bind=V,u.bindAll=function(n){for(var r=ar.apply(X,arguments),t=1<r.length?0:(r=m(n),-1),e=r.length;++t<e;){var u=r[t];n[u]=V(n[u],n)}return n},u.compact=function(n){for(var r=-1,t=n?n.length:0,e=[];++r<t;){var u=n[r];u&&e.push(u)}return e},u.compose=function(){var n=arguments;return function(){for(var r=arguments,t=n.length;t--;)r=[n[t].apply(this,r)];return r[0]}},u.countBy=function(n,r,t){var e={};return r=a(r,t),F(n,function(n,t,u){t=r(n,t,u)+"",cr.call(e,t)?e[t]++:e[t]=1}),e},u.debounce=function(n,r,t){function e(){a=J,t||(o=n.apply(i,u))
    22| }var u,o,i,a;return function(){var f=t&&!a;return u=arguments,i=this,clearTimeout(a),a=setTimeout(e,r),f&&(o=n.apply(i,u)),o}},u.defaults=y,u.defer=function(n){var t=p(arguments,1);return setTimeout(function(){n.apply(r,t)},1)},u.delay=function(n,t){var e=p(arguments,2);return setTimeout(function(){n.apply(r,e)},t)},u.difference=function(n){for(var r=-1,t=n.length,e=ar.apply(X,arguments),u=[];++r<t;){var o=n[r];0>z(e,o,t)&&u.push(o)}return u},u.filter=N,u.flatten=I,u.forEach=F,u.functions=m,u.groupBy=function(n,r,t){var e={};
    23| return r=a(r,t),F(n,function(n,t,u){t=r(n,t,u)+"",(cr.call(e,t)?e[t]:e[t]=[]).push(n)}),e},u.initial=function(n,r,t){if(!n)return[];var e=0,u=n.length;if(typeof r!="number"&&r!=J){var o=u;for(r=a(r,t);o--&&r(n[o],o,n);)e++}else e=r==J||t?1:r||e;return p(n,0,_r(mr(0,u-e),u))},u.intersection=function(n){var r=arguments,t=r.length,e=-1,u=n?n.length:0,o=[];n:for(;++e<u;){var i=n[e];if(0>z(o,i)){for(var a=t;--a;)if(0>z(r[a],i))continue n;o.push(i)}}return o},u.invert=_,u.invoke=function(n,r){var t=p(arguments,2),e=-1,u=typeof r=="function",o=n?n.length:0,i=Array(typeof o=="number"?o:0);
    24| return F(n,function(n){i[++e]=(u?r:n[r]).apply(n,t)}),i},u.keys=Br,u.map=R,u.max=T,u.memoize=function(n,r){var t={};return function(){var e=(r?r.apply(this,arguments):arguments[0])+"";return cr.call(t,e)?t[e]:t[e]=n.apply(this,arguments)}},u.min=function(n,r,t){var u=1/0,o=u;if(!r&&qr(n)){t=-1;for(var i=n.length;++t<i;){var f=n[t];f<o&&(o=f)}}else r=a(r,t),e(n,function(n,t,e){t=r(n,t,e),t<u&&(u=t,o=n)});return o},u.object=function(n,r){for(var t=-1,e=n?n.length:0,u={};++t<e;){var o=n[t];r?u[o]=r[t]:u[o[0]]=o[1]
    25| }return u},u.omit=function(n){var r=ar.apply(X,arguments),e={};return t(n,function(n,t){0>z(r,t,1)&&(e[t]=n)}),e},u.once=function(n){var r,t;return function(){return r?t:(r=H,t=n.apply(this,arguments),n=J,t)}},u.pairs=function(n){for(var r=-1,t=Br(n),e=t.length,u=Array(e);++r<e;){var o=t[r];u[r]=[o,n[o]]}return u},u.partial=function(n){return i(n,p(arguments,1))},u.pick=function(n){for(var r=0,t=ar.apply(X,arguments),e=t.length,u={};++r<e;){var o=t[r];o in n&&(u[o]=n[o])}return u},u.pluck=$r,u.range=function(n,r,t){n=+n||0,t=+t||1,r==J&&(r=n,n=0);
    26| var e=-1;r=mr(0,ir((r-n)/t));for(var u=Array(r);++e<r;)u[e]=n,n+=t;return u},u.reject=function(n,r,t){return r=a(r,t),N(n,function(n,t,e){return!r(n,t,e)})},u.rest=C,u.shuffle=function(n){var r=-1,t=n?n.length:0,e=Array(typeof t=="number"?t:0);return F(n,function(n){var t=fr(dr()*(++r+1));e[r]=e[t],e[t]=n}),e},u.sortBy=function(n,r,t){var e=-1,u=n?n.length:0,i=Array(typeof u=="number"?u:0);for(r=a(r,t),F(n,function(n,t,u){i[++e]={a:r(n,t,u),b:e,c:n}}),u=i.length,i.sort(o);u--;)i[u]=i[u].c;return i
    27| },u.tap=function(n,r){return r(n),n},u.throttle=function(n,r){function t(){a=new Date,i=J,u=n.apply(o,e)}var e,u,o,i,a=0;return function(){var f=new Date,c=r-(f-a);return e=arguments,o=this,0<c?i||(i=setTimeout(t,c)):(clearTimeout(i),i=J,a=f,u=n.apply(o,e)),u}},u.times=function(n,r,t){n=+n||0;for(var e=-1,u=Array(n);++e<n;)u[e]=r.call(t,e);return u},u.toArray=function(n){return n&&typeof n.length=="number"?p(n):E(n)},u.union=function(){return U(ar.apply(X,arguments))},u.uniq=U,u.values=E,u.where=M,u.without=function(n){for(var r=-1,t=n.length,e=[];++r<t;){var u=n[r];
    28| 0>z(arguments,u,1)&&e.push(u)}return e},u.wrap=function(n,r){return function(){var t=[n];return lr.apply(t,arguments),r.apply(this,t)}},u.zip=function(n){for(var r=-1,t=n?T($r(arguments,"length")):0,e=Array(t);++r<t;)e[r]=$r(arguments,r);return e},u.collect=R,u.drop=C,u.each=F,u.extend=g,u.methods=m,u.select=N,u.tail=C,u.unique=U,u.clone=function(n){return w(n)?qr(n)?p(n):g({},n):n},u.contains=O,u.escape=function(n){return n==J?"":(n+"").replace(ur,c)},u.every=S,u.find=k,u.findWhere=function(n,r){return M(n,r,H)
    29| },u.has=function(n,r){return n?cr.call(n,r):K},u.identity=W,u.indexOf=z,u.isArguments=v,u.isArray=qr,u.isBoolean=function(n){return n===H||n===K||pr.call(n)==wr},u.isDate=function(n){return n instanceof Date||pr.call(n)==Ar},u.isElement=function(n){return n?1===n.nodeType:K},u.isEmpty=d,u.isEqual=b,u.isFinite=function(n){return hr(n)&&!gr(parseFloat(n))},u.isFunction=j,u.isNaN=function(n){return A(n)&&n!=+n},u.isNull=function(n){return n===J},u.isNumber=A,u.isObject=w,u.isRegExp=function(n){return n instanceof RegExp||pr.call(n)==Or
    30| },u.isString=x,u.isUndefined=function(n){return typeof n=="undefined"},u.lastIndexOf=function(n,r,t){var e=n?n.length:0;for(typeof t=="number"&&(e=(0>t?mr(0,e+t):_r(t,e-1))+1);e--;)if(n[e]===r)return e;return-1},u.mixin=G,u.noConflict=function(){return n._=nr,this},u.random=function(n,r){return n==J&&r==J&&(r=1),n=+n||0,r==J&&(r=n,n=0),n+fr(dr()*((+r||0)-n+1))},u.reduce=q,u.reduceRight=B,u.result=function(n,r){var t=n?n[r]:J;return j(t)?n[r]():t},u.size=function(n){var r=n?n.length:0;return typeof r=="number"?r:Br(n).length
    31| },u.some=D,u.sortedIndex=P,u.template=function(n,r,t){n||(n=""),t=y({},t,u.templateSettings);var e=0,o="__p+='",i=t.variable;n.replace(RegExp((t.escape||er).source+"|"+(t.interpolate||er).source+"|"+(t.evaluate||er).source+"|$","g"),function(r,t,u,i,a){return o+=n.slice(e,a).replace(or,f),t&&(o+="'+_['escape']("+t+")+'"),i&&(o+="';"+i+";__p+='"),u&&(o+="'+((__t=("+u+"))==null?'':__t)+'"),e=a+r.length,r}),o+="';\n",i||(i="obj",o="with("+i+"||{}){"+o+"}"),o="function("+i+"){var __t,__p='',__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}"+o+"return __p}";
    32| try{var a=Function("_","return "+o)(u)}catch(c){throw c.source=o,c}return r?a(r):(a.source=o,a)},u.unescape=function(n){return n==J?"":(n+"").replace(rr,s)},u.uniqueId=function(n){var r=++Y+"";return n?n+r:r},u.all=S,u.any=D,u.detect=k,u.foldl=q,u.foldr=B,u.include=O,u.inject=q,u.first=$,u.last=function(n,r,t){if(n){var e=0,u=n.length;if(typeof r!="number"&&r!=J){var o=u;for(r=a(r,t);o--&&r(n[o],o,n);)e++}else if(e=r,e==J||t)return n[u-1];return p(n,mr(0,u-e))}},u.take=$,u.head=$,u.chain=function(n){return n=new u(n),n.__chain__=H,n
    33| },u.VERSION="1.0.0",G(u),u.prototype.chain=function(){return this.__chain__=H,this},u.prototype.value=function(){return this.__wrapped__},e("pop push reverse shift sort splice unshift".split(" "),function(n){var r=X[n];u.prototype[n]=function(){var n=this.__wrapped__;return r.apply(n,arguments),kr&&0===n.length&&delete n[0],this}}),e(["concat","join","slice"],function(n){var r=X[n];u.prototype[n]=function(){var n=r.apply(this.__wrapped__,arguments);return this.__chain__&&(n=new u(n),n.__chain__=H),n
    34| }}),L?typeof module=="object"&&module&&module.exports==L?(module.exports=u)._=u:L._=u:n._=u})(this);


# ====================================================================
# FILE: doc/parse.php
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-23 ---
     1| <?php
     2|   $file = isset($_GET['f']) ? $_GET['f'] : 'lodash';
     3|   $file = preg_replace('#(\.*[\/])+#', '', $file);
     4|   $file .= preg_match('/\.[a-z]+$/', $file) ? '' : '.js';
     5|   if (isset($_GET['o'])) {
     6|     $output = $_GET['o'];
     7|   } else if (isset($_SERVER['argv'][1])) {
     8|     $output = $_SERVER['argv'][1];
     9|   } else {
    10|     $output = basename($file);
    11|   }
    12|   /*--------------------------------------------------------------------------*/
    13|   require('../vendor/docdown/docdown.php');
    14|   $markdown = docdown(array(
    15|     'path'  => '../' . $file,
    16|     'title' => 'Lo-Dash <sup>v1.0.0</sup>',
    17|     'toc'   => 'categories',
    18|     'url'   => 'https://github.com/bestiejs/lodash/blob/master/lodash.js'
    19|   ));
    20|   file_put_contents($output . '.md', $markdown);
    21|   header('Content-Type: text/plain;charset=utf-8');
    22|   echo $markdown . PHP_EOL;
    23| ?>


# ====================================================================
# FILE: lodash.js
# Total hunks: 11
# ====================================================================
# --- HUNK 1: Lines 1-66 ---
     1| /**
     2|  * @license
     3|  * Lo-Dash 1.0.0 <http://lodash.com/>
     4|  * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
     5|  * Based on Underscore.js 1.4.4 <http://underscorejs.org/>
     6|  * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud Inc.
     7|  * Available under MIT license <http://lodash.com/license>
     8|  */
     9| ;(function(window, undefined) {
    10|   /** Detect free variable `exports` */
    11|   var freeExports = typeof exports == 'object' && exports;
    12|   /** Detect free variable `global` and use it as `window` */
    13|   var freeGlobal = typeof global == 'object' && global;
    14|   if (freeGlobal.global === freeGlobal) {
    15|     window = freeGlobal;
    16|   }
    17|   /** Used for array and object method references */
    18|   var arrayRef = [],
    19|       objectRef = {};
    20|   /** Used to generate unique IDs */
    21|   var idCounter = 0;
    22|   /** Used internally to indicate various things */
    23|   var indicatorObject = objectRef;
    24|   /** Used by `cachedContains` as the default size when optimizations are enabled for large arrays */
    25|   var largeArraySize = 30;
    26|   /** Used to restore the original `_` reference in `noConflict` */
    27|   var oldDash = window._;
    28|   /** Used to match HTML entities */
    29|   var reEscapedHtml = /&(?:amp|lt|gt|quot|#39);/g;
    30|   /** Used to match empty string literals in compiled template source */
    31|   var reEmptyStringLeading = /\b__p \+= '';/g,
    32|       reEmptyStringMiddle = /\b(__p \+=) '' \+/g,
    33|       reEmptyStringTrailing = /(__e\(.*?\)|\b__t\)) \+\n'';/g;
    34|   /** Used to match regexp flags from their coerced string values */
    35|   var reFlags = /\w*$/;
    36|   /** Used to detect if a method is native */
    37|   var reNative = RegExp('^' +
    38|     (objectRef.valueOf + '')
    39|       .replace(/[.*+?^${}()|[\]\\]/g, '\\$&')
    40|       .replace(/valueOf|for [^\]]+/g, '.+?') + '$'
    41|   );
    42|   /**
    43|    * Used to match ES6 template delimiters
    44|    * http://people.mozilla.org/~jorendorff/es6-draft.html#sec-7.8.6
    45|    */
    46|   var reEsTemplate = /\$\{((?:(?=\\?)\\?[\s\S])*?)\}/g;
    47|   /** Used to match "interpolate" template delimiters */
    48|   var reInterpolate = /<%=([\s\S]+?)%>/g;
    49|   /** Used to ensure capturing order of template delimiters */
    50|   var reNoMatch = /($^)/;
    51|   /** Used to match HTML characters */
    52|   var reUnescapedHtml = /[&<>"']/g;
    53|   /** Used to match unescaped characters in compiled string literals */
    54|   var reUnescapedString = /['\n\r\t\u2028\u2029\\]/g;
    55|   /** Used to fix the JScript [[DontEnum]] bug */
    56|   var shadowed = [
    57|     'constructor', 'hasOwnProperty', 'isPrototypeOf', 'propertyIsEnumerable',
    58|     'toLocaleString', 'toString', 'valueOf'
    59|   ];
    60|   /** Used to make template sourceURLs easier to identify */
    61|   var templateCounter = 0;
    62|   /** Native method shortcuts */
    63|   var ceil = Math.ceil,
    64|       concat = arrayRef.concat,
    65|       floor = Math.floor,
    66|       getPrototypeOf = reNative.test(getPrototypeOf = Object.getPrototypeOf) && getPrototypeOf,

# --- HUNK 2: Lines 130-170 ---
   130|     function ctor() { this.x = 1; }
   131|     ctor.prototype = { 'valueOf': 1, 'y': 1 };
   132|     for (var prop in new ctor) { props.push(prop); }
   133|     for (prop in arguments) { nonEnumArgs = !prop; }
   134|     hasDontEnumBug = !/valueOf/.test(props);
   135|     hasEnumPrototype = ctor.propertyIsEnumerable('prototype');
   136|     iteratesOwnLast = props[0] != 'x';
   137|   }(1));
   138|   /** Detect if `arguments` objects are `Object` objects (all but Opera < 10.5) */
   139|   var argsAreObjects = arguments.constructor == Object;
   140|   /** Detect if `arguments` objects [[Class]] is unresolvable (Firefox < 4, IE < 9) */
   141|   var noArgsClass = !isArguments(arguments);
   142|   /**
   143|    * Detect lack of support for accessing string characters by index:
   144|    *
   145|    * IE < 8 can't access characters by index and IE 8 can only access
   146|    * characters by index on string literals.
   147|    */
   148|   var noCharByIndex = ('x'[0] + Object('x')[0]) != 'xx';
   149|   /**
   150|    * Detect if a node's [[Class]] is unresolvable (IE < 9)
   151|    * and that the JS engine won't error when attempting to coerce an object to
   152|    * a string without a `toString` function.
   153|    */
   154|   try {
   155|     var noNodeClass = toString.call(document) == objectClass && !({ 'toString': 0 } + '');
   156|   } catch(e) { }
   157|   /** Used to identify object classifications that `_.clone` supports */
   158|   var cloneableClasses = {};
   159|   cloneableClasses[funcClass] = false;
   160|   cloneableClasses[argsClass] = cloneableClasses[arrayClass] =
   161|   cloneableClasses[boolClass] = cloneableClasses[dateClass] =
   162|   cloneableClasses[numberClass] = cloneableClasses[objectClass] =
   163|   cloneableClasses[regexpClass] = cloneableClasses[stringClass] = true;
   164|   /** Used to lookup a built-in constructor by [[Class]] */
   165|   var ctorByClass = {};
   166|   ctorByClass[arrayClass] = Array;
   167|   ctorByClass[boolClass] = Boolean;
   168|   ctorByClass[dateClass] = Date;
   169|   ctorByClass[objectClass] = Object;
   170|   ctorByClass[numberClass] = Number;

# --- HUNK 3: Lines 893-938 ---
   893|    * @param {Function} [callback] The function to customize assigning values.
   894|    * @param {Mixed} [thisArg] The `this` binding of `callback`.
   895|    * @returns {Object} Returns the destination object.
   896|    * @example
   897|    *
   898|    * _.assign({ 'name': 'moe' }, { 'age': 40 });
   899|    * // => { 'name': 'moe', 'age': 40 }
   900|    *
   901|    * var defaults = _.partialRight(_.assign, function(a, b) {
   902|    *   return typeof a == 'undefined' ? b : a;
   903|    * });
   904|    *
   905|    * var food = { 'name': 'apple' };
   906|    * defaults(food, { 'name': 'banana', 'type': 'fruit' });
   907|    * // => { 'name': 'apple', 'type': 'fruit' }
   908|    */
   909|   var assign = createIterator(defaultsIteratorOptions, {
   910|     'top':
   911|       defaultsIteratorOptions.top.replace(';',
   912|         ';\n' +
   913|         'if (argsLength > 2) {\n' +
   914|         "  if (typeof args[argsLength - 2] == 'function') {\n" +
   915|         '    var callback = createCallback(args[--argsLength - 1], args[argsLength--], 2);\n' +
   916|         "  } else if (typeof args[argsLength - 1] == 'function') {\n" +
   917|         '    callback = args[--argsLength];\n' +
   918|         '  }\n' +
   919|         '}'
   920|       ),
   921|     'loop': 'result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]'
   922|   });
   923|   /**
   924|    * Creates a clone of `value`. If `deep` is `true`, nested objects will also
   925|    * be cloned, otherwise they will be assigned by reference. If a `callback`
   926|    * function is passed, it will be executed to produce the cloned values. If
   927|    * `callback` returns `undefined`, cloning will be handled by the method instead.
   928|    * The `callback` is bound to `thisArg` and invoked with one argument; (value).
   929|    *
   930|    * @static
   931|    * @memberOf _
   932|    * @category Objects
   933|    * @param {Mixed} value The value to clone.
   934|    * @param {Boolean} [deep=false] A flag to indicate a deep clone.
   935|    * @param {Function} [callback] The function to customize cloning values.
   936|    * @param {Mixed} [thisArg] The `this` binding of `callback`.
   937|    * @param- {Array} [stackA=[]] Internally used to track traversed source objects.
   938|    * @param- {Array} [stackB=[]] Internally used to associate clones with source counterparts.

# --- HUNK 4: Lines 1342-1388 ---
  1342|       if (ctorA != ctorB && !(
  1343|             isFunction(ctorA) && ctorA instanceof ctorA &&
  1344|             isFunction(ctorB) && ctorB instanceof ctorB
  1345|           )) {
  1346|         return false;
  1347|       }
  1348|     }
  1349|     stackA || (stackA = []);
  1350|     stackB || (stackB = []);
  1351|     var length = stackA.length;
  1352|     while (length--) {
  1353|       if (stackA[length] == a) {
  1354|         return stackB[length] == b;
  1355|       }
  1356|     }
  1357|     var size = 0;
  1358|     result = true;
  1359|     stackA.push(a);
  1360|     stackB.push(b);
  1361|     if (isArr) {
  1362|       size = b.length;
  1363|       result = whereIndicator || size == a.length;
  1364|       if (result) {
  1365|         while (size--) {
  1366|           if (!(result = isEqual(a[size], b[size], callback, thisArg, stackA, stackB))) {
  1367|             break;
  1368|           }
  1369|         }
  1370|       }
  1371|       return result;
  1372|     }
  1373|     forIn(b, function(value, key, b) {
  1374|       if (hasOwnProperty.call(b, key)) {
  1375|         size++;
  1376|         return (result = hasOwnProperty.call(a, key) && isEqual(a[key], value, callback, thisArg, stackA, stackB));
  1377|       }
  1378|     });
  1379|     if (result && !whereIndicator) {
  1380|       forIn(a, function(value, key, a) {
  1381|         if (hasOwnProperty.call(a, key)) {
  1382|           return (result = --size > -1);
  1383|         }
  1384|       });
  1385|     }
  1386|     return result;
  1387|   }
  1388|   /**

# --- HUNK 5: Lines 1661-1706 ---
  1661|    * });
  1662|    * // => { 'fruits': ['apple', 'banana'], 'vegetables': ['beet', 'carrot] }
  1663|    */
  1664|   function merge(object, source, deepIndicator) {
  1665|     var args = arguments,
  1666|         index = 0,
  1667|         length = 2;
  1668|     if (!isObject(object)) {
  1669|       return object;
  1670|     }
  1671|     if (deepIndicator === indicatorObject) {
  1672|       var callback = args[3],
  1673|           stackA = args[4],
  1674|           stackB = args[5];
  1675|     } else {
  1676|       stackA = [];
  1677|       stackB = [];
  1678|       if (typeof deepIndicator != 'number') {
  1679|         length = args.length;
  1680|       }
  1681|       if (length > 2) {
  1682|         if (typeof args[length - 2] == 'function') {
  1683|           callback = createCallback(args[--length - 1], args[length--], 2);
  1684|         } else if (typeof args[length - 1] == 'function') {
  1685|           callback = args[--length];
  1686|         }
  1687|       }
  1688|     }
  1689|     while (++index < length) {
  1690|       (isArray(args[index]) ? forEach : forOwn)(args[index], function(source, key) {
  1691|         var found,
  1692|             isArr,
  1693|             result = source,
  1694|             value = object[key];
  1695|         if (source && ((isArr = isArray(source)) || isPlainObject(source))) {
  1696|           var stackLength = stackA.length;
  1697|           while (stackLength--) {
  1698|             if ((found = stackA[stackLength] == source)) {
  1699|               value = stackB[stackLength];
  1700|               break;
  1701|             }
  1702|           }
  1703|           if (!found) {
  1704|             value = isArr
  1705|               ? (isArray(value) ? value : [])
  1706|               : (isPlainObject(value) ? value : {});

# --- HUNK 6: Lines 1857-1905 ---
  1857|    * @category Objects
  1858|    * @param {Object} object The object to inspect.
  1859|    * @returns {Array} Returns a new array of property values.
  1860|    * @example
  1861|    *
  1862|    * _.values({ 'one': 1, 'two': 2, 'three': 3 });
  1863|    * // => [1, 2, 3]
  1864|    */
  1865|   function values(object) {
  1866|     var index = -1,
  1867|         props = keys(object),
  1868|         length = props.length,
  1869|         result = Array(length);
  1870|     while (++index < length) {
  1871|       result[index] = object[props[index]];
  1872|     }
  1873|     return result;
  1874|   }
  1875|   /*--------------------------------------------------------------------------*/
  1876|   /**
  1877|    * Creates an array of elements from the specified index(es), or keys, of the
  1878|    * `collection`. Indexes may be specified as individual arguments or as arrays
  1879|    * of indexes.
  1880|    *
  1881|    * @static
  1882|    * @memberOf _
  1883|    * @category Collections
  1884|    * @param {Array|Object|String} collection The collection to iterate over.
  1885|    * @param {Array|Number|String} [index1, index2, ...] The index(es) of
  1886|    *  `collection` to retrieve, either as individual arguments or arrays.
  1887|    * @returns {Array} Returns a new array of elements corresponding to the
  1888|    *  provided indexes.
  1889|    * @example
  1890|    *
  1891|    * _.at(['a', 'b', 'c', 'd', 'e'], [0, 2, 4]);
  1892|    * // => ['a', 'c', 'e']
  1893|    *
  1894|    * _.at(['moe', 'larry', 'curly'], 0, 2);
  1895|    * // => ['moe', 'curly']
  1896|    */
  1897|   function at(collection) {
  1898|     var index = -1,
  1899|         props = concat.apply(arrayRef, slice(arguments, 1)),
  1900|         length = props.length,
  1901|         result = Array(length);
  1902|     if (noCharByIndex && isString(collection)) {
  1903|       collection = collection.split('');
  1904|     }
  1905|     while(++index < length) {

# --- HUNK 7: Lines 3844-3883 ---
  3844|     return setTimeout(function() { func.apply(undefined, args); }, wait);
  3845|   }
  3846|   /**
  3847|    * Defers executing the `func` function until the current call stack has cleared.
  3848|    * Additional arguments will be passed to `func` when it is invoked.
  3849|    *
  3850|    * @static
  3851|    * @memberOf _
  3852|    * @category Functions
  3853|    * @param {Function} func The function to defer.
  3854|    * @param {Mixed} [arg1, arg2, ...] Arguments to invoke the function with.
  3855|    * @returns {Number} Returns the `setTimeout` timeout id.
  3856|    * @example
  3857|    *
  3858|    * _.defer(function() { alert('deferred'); });
  3859|    * // returns from the function before `alert` is called
  3860|    */
  3861|   function defer(func) {
  3862|     var args = slice(arguments, 1);
  3863|     return setTimeout(function() { func.apply(undefined, args); }, 1);
  3864|   }
  3865|   /**
  3866|    * Creates a function that memoizes the result of `func`. If `resolver` is
  3867|    * passed, it will be used to determine the cache key for storing the result
  3868|    * based on the arguments passed to the memoized function. By default, the first
  3869|    * argument passed to the memoized function is used as the cache key. The `func`
  3870|    * is executed with the `this` binding of the memoized function.
  3871|    *
  3872|    * @static
  3873|    * @memberOf _
  3874|    * @category Functions
  3875|    * @param {Function} func The function to have its output memoized.
  3876|    * @param {Function} [resolver] A function used to resolve the cache key.
  3877|    * @returns {Function} Returns the new memoizing function.
  3878|    * @example
  3879|    *
  3880|    * var fibonacci = _.memoize(function(n) {
  3881|    *   return n < 2 ? n : fibonacci(n - 1) + fibonacci(n - 2);
  3882|    * });
  3883|    */

# --- HUNK 8: Lines 4302-4342 ---
  4302|       }
  4303|       index = offset + match.length;
  4304|       return match;
  4305|     });
  4306|     source += "';\n";
  4307|     var variable = options.variable,
  4308|         hasVariable = variable;
  4309|     if (!hasVariable) {
  4310|       variable = 'obj';
  4311|       source = 'with (' + variable + ') {\n' + source + '\n}\n';
  4312|     }
  4313|     source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source)
  4314|       .replace(reEmptyStringMiddle, '$1')
  4315|       .replace(reEmptyStringTrailing, '$1;');
  4316|     source = 'function(' + variable + ') {\n' +
  4317|       (hasVariable ? '' : variable + ' || (' + variable + ' = {});\n') +
  4318|       "var __t, __p = '', __e = _.escape" +
  4319|       (isEvaluating
  4320|         ? ', __j = Array.prototype.join;\n' +
  4321|           "function print() { __p += __j.call(arguments, '') }\n"
  4322|         : (hasVariable ? '' : ', __d = ' + variable + '.' + variable + ' || ' + variable) + ';\n'
  4323|       ) +
  4324|       source +
  4325|       'return __p\n}';
  4326|     var sourceURL = '\n/*\n//@ sourceURL=' + (options.sourceURL || '/lodash/template/source[' + (templateCounter++) + ']') + '\n*/';
  4327|     try {
  4328|       var result = Function(importsKeys, 'return ' + source + sourceURL).apply(undefined, importsValues);
  4329|     } catch(e) {
  4330|       e.source = source;
  4331|       throw e;
  4332|     }
  4333|     if (data) {
  4334|       return result(data);
  4335|     }
  4336|     result.source = source;
  4337|     return result;
  4338|   }
  4339|   /**
  4340|    * Executes the `callback` function `n` times, returning an array of the results
  4341|    * of each `callback` execution. The `callback` is bound to `thisArg` and invoked
  4342|    * with one argument; (index).

# --- HUNK 9: Lines 4590-4630 ---
  4590|   lodash.take = first;
  4591|   lodash.head = first;
  4592|   forOwn(lodash, function(func, methodName) {
  4593|     if (!lodash.prototype[methodName]) {
  4594|       lodash.prototype[methodName]= function(callback, thisArg) {
  4595|         var result = func(this.__wrapped__, callback, thisArg);
  4596|         return callback == null || (thisArg && typeof callback != 'function')
  4597|           ? result
  4598|           : new lodash(result);
  4599|       };
  4600|     }
  4601|   });
  4602|   /*--------------------------------------------------------------------------*/
  4603|   /**
  4604|    * The semantic version number.
  4605|    *
  4606|    * @static
  4607|    * @memberOf _
  4608|    * @type String
  4609|    */
  4610|   lodash.VERSION = '1.0.0';
  4611|   lodash.prototype.toString = wrapperToString;
  4612|   lodash.prototype.value = wrapperValueOf;
  4613|   lodash.prototype.valueOf = wrapperValueOf;
  4614|   each(['join', 'pop', 'shift'], function(methodName) {
  4615|     var func = arrayRef[methodName];
  4616|     lodash.prototype[methodName] = function() {
  4617|       return func.apply(this.__wrapped__, arguments);
  4618|     };
  4619|   });
  4620|   each(['push', 'reverse', 'sort', 'unshift'], function(methodName) {
  4621|     var func = arrayRef[methodName];
  4622|     lodash.prototype[methodName] = function() {
  4623|       func.apply(this.__wrapped__, arguments);
  4624|       return this;
  4625|     };
  4626|   });
  4627|   each(['concat', 'slice', 'splice'], function(methodName) {
  4628|     var func = arrayRef[methodName];
  4629|     lodash.prototype[methodName] = function() {
  4630|       return new lodash(func.apply(this.__wrapped__, arguments));

# --- HUNK 10: Lines 4637-4667 ---
  4637|       lodash.prototype[methodName] = function() {
  4638|         var value = this.__wrapped__,
  4639|             result = func.apply(value, arguments);
  4640|         if (value.length === 0) {
  4641|           delete value[0];
  4642|         }
  4643|         return isSplice ? new lodash(result) : result;
  4644|       };
  4645|     });
  4646|   }
  4647|   lodash._each = each;
  4648|   lodash._iteratorTemplate = iteratorTemplate;
  4649|   /*--------------------------------------------------------------------------*/
  4650|   if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {
  4651|     window._ = lodash;
  4652|     define(function() {
  4653|       return lodash;
  4654|     });
  4655|   }
  4656|   else if (freeExports) {
  4657|     if (typeof module == 'object' && module && module.exports == freeExports) {
  4658|       (module.exports = lodash)._ = lodash;
  4659|     }
  4660|     else {
  4661|       freeExports._ = lodash;
  4662|     }
  4663|   }
  4664|   else {
  4665|     window._ = lodash;
  4666|   }
  4667| }(this));


# ====================================================================
# FILE: vendor/backbone/backbone.js
# Total hunks: 7
# ====================================================================
# --- HUNK 1: Lines 21-172 ---
    21|   };
    22|   Backbone.emulateHTTP = false;
    23|   Backbone.emulateJSON = false;
    24|   var eventSplitter = /\s+/;
    25|   var eventsApi = function(obj, action, name, rest) {
    26|     if (!name) return true;
    27|     if (typeof name === 'object') {
    28|       for (var key in name) {
    29|         obj[action].apply(obj, [key, name[key]].concat(rest));
    30|       }
    31|     } else if (eventSplitter.test(name)) {
    32|       var names = name.split(eventSplitter);
    33|       for (var i = 0, l = names.length; i < l; i++) {
    34|         obj[action].apply(obj, [names[i]].concat(rest));
    35|       }
    36|     } else {
    37|       return true;
    38|     }
    39|   };
    40|   var triggerEvents = function(events, args) {
    41|     var ev, i = -1, l = events.length, a1 = args[0], a2 = args[1], a3 = args[2];
    42|     switch (args.length) {
    43|     case 0: while (++i < l) (ev = events[i]).callback.call(ev.ctx);
    44|     return;
    45|     case 1: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1);
    46|     return;
    47|     case 2: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2);
    48|     return;
    49|     case 3: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2, a3);
    50|     return;
    51|     default: while (++i < l) (ev = events[i]).callback.apply(ev.ctx, args);
    52|     }
    53|   };
    54|   var Events = Backbone.Events = {
    55|     on: function(name, callback, context) {
    56|       if (!eventsApi(this, 'on', name, [callback, context]) || !callback) return this;
    57|       this._events || (this._events = {});
    58|       var events = this._events[name] || (this._events[name] = []);
    59|       events.push({callback: callback, context: context, ctx: context || this});
    60|       return this;
    61|     },
    62|     once: function(name, callback, context) {
    63|       if (!eventsApi(this, 'once', name, [callback, context]) || !callback) return this;
    64|       var self = this;
    65|       var once = _.once(function() {
    66|         self.off(name, once);
    67|         callback.apply(this, arguments);
    68|       });
    69|       once._callback = callback;
    70|       return this.on(name, once, context);
    71|     },
    72|     off: function(name, callback, context) {
    73|       var retain, ev, events, names, i, l, j, k;
    74|       if (!this._events || !eventsApi(this, 'off', name, [callback, context])) return this;
    75|       if (!name && !callback && !context) {
    76|         this._events = {};
    77|         return this;
    78|       }
    79|       names = name ? [name] : _.keys(this._events);
    80|       for (i = 0, l = names.length; i < l; i++) {
    81|         name = names[i];
    82|         if (events = this._events[name]) {
    83|           this._events[name] = retain = [];
    84|           if (callback || context) {
    85|             for (j = 0, k = events.length; j < k; j++) {
    86|               ev = events[j];
    87|               if ((callback && callback !== ev.callback &&
    88|                                callback !== ev.callback._callback) ||
    89|                   (context && context !== ev.context)) {
    90|                 retain.push(ev);
    91|               }
    92|             }
    93|           }
    94|           if (!retain.length) delete this._events[name];
    95|         }
    96|       }
    97|       return this;
    98|     },
    99|     trigger: function(name) {
   100|       if (!this._events) return this;
   101|       var args = slice.call(arguments, 1);
   102|       if (!eventsApi(this, 'trigger', name, args)) return this;
   103|       var events = this._events[name];
   104|       var allEvents = this._events.all;
   105|       if (events) triggerEvents(events, args);
   106|       if (allEvents) triggerEvents(allEvents, arguments);
   107|       return this;
   108|     },
   109|     stopListening: function(obj, name, callback) {
   110|       var listeners = this._listeners;
   111|       if (!listeners) return this;
   112|       var deleteListener = !name && !callback;
   113|       if (typeof name === 'object') callback = this;
   114|       if (obj) (listeners = {})[obj._listenerId] = obj;
   115|       for (var id in listeners) {
   116|         listeners[id].off(name, callback, this);
   117|         if (deleteListener) delete this._listeners[id];
   118|       }
   119|       return this;
   120|     }
   121|   };
   122|   var listenMethods = {listenTo: 'on', listenToOnce: 'once'};
   123|   _.each(listenMethods, function(implementation, method) {
   124|     Events[method] = function(obj, name, callback) {
   125|       var listeners = this._listeners || (this._listeners = {});
   126|       var id = obj._listenerId || (obj._listenerId = _.uniqueId('l'));
   127|       listeners[id] = obj;
   128|       if (typeof name === 'object') callback = this;
   129|       obj[implementation](name, callback, this);
   130|       return this;
   131|     };
   132|   });
   133|   Events.bind   = Events.on;
   134|   Events.unbind = Events.off;
   135|   _.extend(Backbone, Events);
   136|   var Model = Backbone.Model = function(attributes, options) {
   137|     var defaults;
   138|     var attrs = attributes || {};
   139|     this.cid = _.uniqueId('c');
   140|     this.attributes = {};
   141|     if (options && options.collection) this.collection = options.collection;
   142|     if (options && options.parse) attrs = this.parse(attrs, options) || {};
   143|     if (defaults = _.result(this, 'defaults')) {
   144|       attrs = _.defaults({}, attrs, defaults);
   145|     }
   146|     this.set(attrs, options);
   147|     this.changed = {};
   148|     this.initialize.apply(this, arguments);
   149|   };
   150|   _.extend(Model.prototype, Events, {
   151|     changed: null,
   152|     validationError: null,
   153|     idAttribute: 'id',
   154|     initialize: function(){},
   155|     toJSON: function(options) {
   156|       return _.clone(this.attributes);
   157|     },
   158|     sync: function() {
   159|       return Backbone.sync.apply(this, arguments);
   160|     },
   161|     get: function(attr) {
   162|       return this.attributes[attr];
   163|     },
   164|     escape: function(attr) {
   165|       return _.escape(this.get(attr));
   166|     },
   167|     has: function(attr) {
   168|       return this.get(attr) != null;
   169|     },
   170|     set: function(key, val, options) {
   171|       var attr, attrs, unset, changes, silent, changing, prev, current;
   172|       if (key == null) return this;

# --- HUNK 2: Lines 231-388 ---
   231|     changedAttributes: function(diff) {
   232|       if (!diff) return this.hasChanged() ? _.clone(this.changed) : false;
   233|       var val, changed = false;
   234|       var old = this._changing ? this._previousAttributes : this.attributes;
   235|       for (var attr in diff) {
   236|         if (_.isEqual(old[attr], (val = diff[attr]))) continue;
   237|         (changed || (changed = {}))[attr] = val;
   238|       }
   239|       return changed;
   240|     },
   241|     previous: function(attr) {
   242|       if (attr == null || !this._previousAttributes) return null;
   243|       return this._previousAttributes[attr];
   244|     },
   245|     previousAttributes: function() {
   246|       return _.clone(this._previousAttributes);
   247|     },
   248|     fetch: function(options) {
   249|       options = options ? _.clone(options) : {};
   250|       if (options.parse === void 0) options.parse = true;
   251|       var model = this;
   252|       var success = options.success;
   253|       options.success = function(resp) {
   254|         if (!model.set(model.parse(resp, options), options)) return false;
   255|         if (success) success(model, resp, options);
   256|         model.trigger('sync', model, resp, options);
   257|       };
   258|       wrapError(this, options);
   259|       return this.sync('read', this, options);
   260|     },
   261|     save: function(key, val, options) {
   262|       var attrs, method, xhr, attributes = this.attributes;
   263|       if (key == null || typeof key === 'object') {
   264|         attrs = key;
   265|         options = val;
   266|       } else {
   267|         (attrs = {})[key] = val;
   268|       }
   269|       if (attrs && (!options || !options.wait) && !this.set(attrs, options)) return false;
   270|       options = _.extend({validate: true}, options);
   271|       if (!this._validate(attrs, options)) return false;
   272|       if (attrs && options.wait) {
   273|         this.attributes = _.extend({}, attributes, attrs);
   274|       }
   275|       if (options.parse === void 0) options.parse = true;
   276|       var model = this;
   277|       var success = options.success;
   278|       options.success = function(resp) {
   279|         model.attributes = attributes;
   280|         var serverAttrs = model.parse(resp, options);
   281|         if (options.wait) serverAttrs = _.extend(attrs || {}, serverAttrs);
   282|         if (_.isObject(serverAttrs) && !model.set(serverAttrs, options)) {
   283|           return false;
   284|         }
   285|         if (success) success(model, resp, options);
   286|         model.trigger('sync', model, resp, options);
   287|       };
   288|       wrapError(this, options);
   289|       method = this.isNew() ? 'create' : (options.patch ? 'patch' : 'update');
   290|       if (method === 'patch') options.attrs = attrs;
   291|       xhr = this.sync(method, this, options);
   292|       if (attrs && options.wait) this.attributes = attributes;
   293|       return xhr;
   294|     },
   295|     destroy: function(options) {
   296|       options = options ? _.clone(options) : {};
   297|       var model = this;
   298|       var success = options.success;
   299|       var destroy = function() {
   300|         model.trigger('destroy', model, model.collection, options);
   301|       };
   302|       options.success = function(resp) {
   303|         if (options.wait || model.isNew()) destroy();
   304|         if (success) success(model, resp, options);
   305|         if (!model.isNew()) model.trigger('sync', model, resp, options);
   306|       };
   307|       if (this.isNew()) {
   308|         options.success();
   309|         return false;
   310|       }
   311|       wrapError(this, options);
   312|       var xhr = this.sync('delete', this, options);
   313|       if (!options.wait) destroy();
   314|       return xhr;
   315|     },
   316|     url: function() {
   317|       var base = _.result(this, 'urlRoot') || _.result(this.collection, 'url') || urlError();
   318|       if (this.isNew()) return base;
   319|       return base + (base.charAt(base.length - 1) === '/' ? '' : '/') + encodeURIComponent(this.id);
   320|     },
   321|     parse: function(resp, options) {
   322|       return resp;
   323|     },
   324|     clone: function() {
   325|       return new this.constructor(this.attributes);
   326|     },
   327|     isNew: function() {
   328|       return this.id == null;
   329|     },
   330|     isValid: function(options) {
   331|       return !this.validate || !this.validate(this.attributes, options);
   332|     },
   333|     _validate: function(attrs, options) {
   334|       if (!options.validate || !this.validate) return true;
   335|       attrs = _.extend({}, this.attributes, attrs);
   336|       var error = this.validationError = this.validate(attrs, options) || null;
   337|       if (!error) return true;
   338|       this.trigger('invalid', this, error, options || {});
   339|       return false;
   340|     }
   341|   });
   342|   var Collection = Backbone.Collection = function(models, options) {
   343|     options || (options = {});
   344|     if (options.model) this.model = options.model;
   345|     if (options.comparator !== void 0) this.comparator = options.comparator;
   346|     this._reset();
   347|     this.initialize.apply(this, arguments);
   348|     if (models) this.reset(models, _.extend({silent: true}, options));
   349|   };
   350|   _.extend(Collection.prototype, Events, {
   351|     model: Model,
   352|     initialize: function(){},
   353|     toJSON: function(options) {
   354|       return this.map(function(model){ return model.toJSON(options); });
   355|     },
   356|     sync: function() {
   357|       return Backbone.sync.apply(this, arguments);
   358|     },
   359|     add: function(models, options) {
   360|       models = _.isArray(models) ? models.slice() : [models];
   361|       options || (options = {});
   362|       var i, l, model, attrs, existing, doSort, add, at, sort, sortAttr;
   363|       add = [];
   364|       at = options.at;
   365|       sort = this.comparator && (at == null) && options.sort !== false;
   366|       sortAttr = _.isString(this.comparator) ? this.comparator : null;
   367|       for (i = 0, l = models.length; i < l; i++) {
   368|         if (!(model = this._prepareModel(attrs = models[i], options))) continue;
   369|         if (existing = this.get(model)) {
   370|           if (options.merge) {
   371|             existing.set(attrs === model ? model.attributes : attrs, options);
   372|             if (sort && !doSort && existing.hasChanged(sortAttr)) doSort = true;
   373|           }
   374|           continue;
   375|         }
   376|         add.push(model);
   377|         model.on('all', this._onModelEvent, this);
   378|         this._byId[model.cid] = model;
   379|         if (model.id != null) this._byId[model.id] = model;
   380|       }
   381|       if (add.length) {
   382|         if (sort) doSort = true;
   383|         this.length += add.length;
   384|         if (at != null) {
   385|           splice.apply(this.models, [at, 0].concat(add));
   386|         } else {
   387|           push.apply(this.models, add);
   388|         }

# --- HUNK 3: Lines 423-583 ---
   423|     pop: function(options) {
   424|       var model = this.at(this.length - 1);
   425|       this.remove(model, options);
   426|       return model;
   427|     },
   428|     unshift: function(model, options) {
   429|       model = this._prepareModel(model, options);
   430|       this.add(model, _.extend({at: 0}, options));
   431|       return model;
   432|     },
   433|     shift: function(options) {
   434|       var model = this.at(0);
   435|       this.remove(model, options);
   436|       return model;
   437|     },
   438|     slice: function(begin, end) {
   439|       return this.models.slice(begin, end);
   440|     },
   441|     get: function(obj) {
   442|       if (obj == null) return void 0;
   443|       return this._byId[obj.id || obj.cid || obj];
   444|     },
   445|     at: function(index) {
   446|       return this.models[index];
   447|     },
   448|     where: function(attrs, first) {
   449|       if (_.isEmpty(attrs)) return first ? void 0 : [];
   450|       return this[first ? 'find' : 'filter'](function(model) {
   451|         for (var key in attrs) {
   452|           if (attrs[key] !== model.get(key)) return false;
   453|         }
   454|         return true;
   455|       });
   456|     },
   457|     findWhere: function(attrs) {
   458|       return this.where(attrs, true);
   459|     },
   460|     sort: function(options) {
   461|       if (!this.comparator) {
   462|         throw new Error('Cannot sort a set without a comparator');
   463|       }
   464|       options || (options = {});
   465|       if (_.isString(this.comparator) || this.comparator.length === 1) {
   466|         this.models = this.sortBy(this.comparator, this);
   467|       } else {
   468|         this.models.sort(_.bind(this.comparator, this));
   469|       }
   470|       if (!options.silent) this.trigger('sort', this, options);
   471|       return this;
   472|     },
   473|     pluck: function(attr) {
   474|       return _.invoke(this.models, 'get', attr);
   475|     },
   476|     update: function(models, options) {
   477|       options = _.extend({add: true, merge: true, remove: true}, options);
   478|       if (options.parse) models = this.parse(models, options);
   479|       var attrs, model, i, l, existing;
   480|       var add = [], remove = [], modelMap = {};
   481|       if (!_.isArray(models)) models = models ? [models] : [];
   482|       if (options.add && !options.remove) return this.add(models, options);
   483|       for (i = 0, l = models.length; i < l; i++) {
   484|         if (!((attrs = models[i]) instanceof Model)) attrs = _.clone(attrs);
   485|         if (!(model = this._prepareModel(attrs, options))) continue;
   486|         existing = this.get(model);
   487|         if (options.remove && existing) modelMap[existing.cid] = true;
   488|         if ((options.add && !existing) || (options.merge && existing)) {
   489|           add.push(models[i]);
   490|         }
   491|       }
   492|       if (options.remove) {
   493|         for (i = 0, l = this.models.length; i < l; i++) {
   494|           model = this.models[i];
   495|           if (!modelMap[model.cid]) remove.push(model);
   496|         }
   497|       }
   498|       if (remove.length) this.remove(remove, options);
   499|       if (add.length) this.add(add, options);
   500|       return this;
   501|     },
   502|     reset: function(models, options) {
   503|       options || (options = {});
   504|       if (options.parse) models = this.parse(models, options);
   505|       for (var i = 0, l = this.models.length; i < l; i++) {
   506|         this._removeReference(this.models[i]);
   507|       }
   508|       options.previousModels = this.models;
   509|       this._reset();
   510|       if (models) this.add(models, _.extend({silent: true}, options));
   511|       if (!options.silent) this.trigger('reset', this, options);
   512|       return this;
   513|     },
   514|     fetch: function(options) {
   515|       options = options ? _.clone(options) : {};
   516|       if (options.parse === void 0) options.parse = true;
   517|       var success = options.success;
   518|       var collection = this;
   519|       options.success = function(resp) {
   520|         var method = options.update ? 'update' : 'reset';
   521|         collection[method](resp, options);
   522|         if (success) success(collection, resp, options);
   523|         collection.trigger('sync', collection, resp, options);
   524|       };
   525|       wrapError(this, options);
   526|       return this.sync('read', this, options);
   527|     },
   528|     create: function(model, options) {
   529|       options = options ? _.clone(options) : {};
   530|       if (!(model = this._prepareModel(model, options))) return false;
   531|       if (!options.wait) this.add(model, options);
   532|       var collection = this;
   533|       var success = options.success;
   534|       options.success = function(resp) {
   535|         if (options.wait) collection.add(model, options);
   536|         if (success) success(model, resp, options);
   537|       };
   538|       model.save(null, options);
   539|       return model;
   540|     },
   541|     parse: function(resp, options) {
   542|       return resp;
   543|     },
   544|     clone: function() {
   545|       return new this.constructor(this.models);
   546|     },
   547|     _reset: function() {
   548|       this.length = 0;
   549|       this.models = [];
   550|       this._byId  = {};
   551|     },
   552|     _prepareModel: function(attrs, options) {
   553|       if (attrs instanceof Model) {
   554|         if (!attrs.collection) attrs.collection = this;
   555|         return attrs;
   556|       }
   557|       options || (options = {});
   558|       options.collection = this;
   559|       var model = new this.model(attrs, options);
   560|       if (!model._validate(attrs, options)) {
   561|         this.trigger('invalid', this, attrs, options);
   562|         return false;
   563|       }
   564|       return model;
   565|     },
   566|     _removeReference: function(model) {
   567|       if (this === model.collection) delete model.collection;
   568|       model.off('all', this._onModelEvent, this);
   569|     },
   570|     _onModelEvent: function(event, model, collection, options) {
   571|       if ((event === 'add' || event === 'remove') && collection !== this) return;
   572|       if (event === 'destroy') this.remove(model, options);
   573|       if (model && event === 'change:' + model.idAttribute) {
   574|         delete this._byId[model.previous(model.idAttribute)];
   575|         if (model.id != null) this._byId[model.id] = model;
   576|       }
   577|       this.trigger.apply(this, arguments);
   578|     },
   579|     sortedIndex: function (model, value, context) {
   580|       value || (value = this.comparator);
   581|       var iterator = _.isFunction(value) ? value : function(model) {
   582|         return model.get(value);
   583|       };

# --- HUNK 4: Lines 792-852 ---
   792|     $: function(selector) {
   793|       return this.$el.find(selector);
   794|     },
   795|     initialize: function(){},
   796|     render: function() {
   797|       return this;
   798|     },
   799|     remove: function() {
   800|       this.$el.remove();
   801|       this.stopListening();
   802|       return this;
   803|     },
   804|     setElement: function(element, delegate) {
   805|       if (this.$el) this.undelegateEvents();
   806|       this.$el = element instanceof Backbone.$ ? element : Backbone.$(element);
   807|       this.el = this.$el[0];
   808|       if (delegate !== false) this.delegateEvents();
   809|       return this;
   810|     },
   811|     delegateEvents: function(events) {
   812|       if (!(events || (events = _.result(this, 'events')))) return this;
   813|       this.undelegateEvents();
   814|       for (var key in events) {
   815|         var method = events[key];
   816|         if (!_.isFunction(method)) method = this[events[key]];
   817|         if (!method) throw new Error('Method "' + events[key] + '" does not exist');
   818|         var match = key.match(delegateEventSplitter);
   819|         var eventName = match[1], selector = match[2];
   820|         method = _.bind(method, this);
   821|         eventName += '.delegateEvents' + this.cid;
   822|         if (selector === '') {
   823|           this.$el.on(eventName, method);
   824|         } else {
   825|           this.$el.on(eventName, selector, method);
   826|         }
   827|       }
   828|       return this;
   829|     },
   830|     undelegateEvents: function() {
   831|       this.$el.off('.delegateEvents' + this.cid);
   832|       return this;
   833|     },
   834|     _configure: function(options) {
   835|       if (this.options) options = _.extend({}, _.result(this, 'options'), options);
   836|       _.extend(this, _.pick(options, viewOptions));
   837|       this.options = options;
   838|     },
   839|     _ensureElement: function() {
   840|       if (!this.el) {
   841|         var attrs = _.extend({}, _.result(this, 'attributes'));
   842|         if (this.id) attrs.id = _.result(this, 'id');
   843|         if (this.className) attrs['class'] = _.result(this, 'className');
   844|         var $el = Backbone.$('<' + _.result(this, 'tagName') + '>').attr(attrs);
   845|         this.setElement($el, false);
   846|       } else {
   847|         this.setElement(_.result(this, 'el'), false);
   848|       }
   849|     }
   850|   });
   851|   var methodMap = {
   852|     'create': 'POST',

# --- HUNK 5: Lines 868-922 ---
   868|     if (options.data == null && model && (method === 'create' || method === 'update' || method === 'patch')) {
   869|       params.contentType = 'application/json';
   870|       params.data = JSON.stringify(options.attrs || model.toJSON(options));
   871|     }
   872|     if (options.emulateJSON) {
   873|       params.contentType = 'application/x-www-form-urlencoded';
   874|       params.data = params.data ? {model: params.data} : {};
   875|     }
   876|     if (options.emulateHTTP && (type === 'PUT' || type === 'DELETE' || type === 'PATCH')) {
   877|       params.type = 'POST';
   878|       if (options.emulateJSON) params.data._method = type;
   879|       var beforeSend = options.beforeSend;
   880|       options.beforeSend = function(xhr) {
   881|         xhr.setRequestHeader('X-HTTP-Method-Override', type);
   882|         if (beforeSend) return beforeSend.apply(this, arguments);
   883|       };
   884|     }
   885|     if (params.type !== 'GET' && !options.emulateJSON) {
   886|       params.processData = false;
   887|     }
   888|     var xhr = options.xhr = Backbone.ajax(_.extend(params, options));
   889|     model.trigger('request', model, xhr, options);
   890|     return xhr;
   891|   };
   892|   Backbone.ajax = function() {
   893|     return Backbone.$.ajax.apply(Backbone.$, arguments);
   894|   };
   895|   var extend = function(protoProps, staticProps) {
   896|     var parent = this;
   897|     var child;
   898|     if (protoProps && _.has(protoProps, 'constructor')) {
   899|       child = protoProps.constructor;
   900|     } else {
   901|       child = function(){ return parent.apply(this, arguments); };
   902|     }
   903|     _.extend(child, parent, staticProps);
   904|     var Surrogate = function(){ this.constructor = child; };
   905|     Surrogate.prototype = parent.prototype;
   906|     child.prototype = new Surrogate;
   907|     if (protoProps) _.extend(child.prototype, protoProps);
   908|     child.__super__ = parent.prototype;
   909|     return child;
   910|   };
   911|   Model.extend = Collection.extend = Router.extend = View.extend = History.extend = extend;
   912|   var urlError = function() {
   913|     throw new Error('A "url" property or function must be specified');
   914|   };
   915|   var wrapError = function (model, options) {
   916|     var error = options.error;
   917|     options.error = function(resp) {
   918|       if (error) error(model, resp, options);
   919|       model.trigger('error', model, resp, options);
   920|     };
   921|   };
   922| }).call(this);

