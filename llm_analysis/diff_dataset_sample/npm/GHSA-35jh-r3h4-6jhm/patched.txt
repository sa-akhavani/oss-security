# ====================================================================
# FILE: build.js
# Total hunks: 15
# ====================================================================
# --- HUNK 1: Lines 53-93 ---
    53|     'rest': ['drop', 'tail'],
    54|     'some': ['any'],
    55|     'uniq': ['unique']
    56|   };
    57|   /** Used to track function dependencies */
    58|   var dependencyMap = {
    59|     'after': [],
    60|     'assign': ['isArray', 'forEach', 'forOwn'],
    61|     'at': ['isString'],
    62|     'bind': ['isFunction', 'isObject'],
    63|     'bindAll': ['bind', 'functions'],
    64|     'bindKey': ['isFunction', 'isObject'],
    65|     'clone': ['assign', 'forEach', 'forOwn', 'isArray', 'isObject'],
    66|     'cloneDeep': ['clone'],
    67|     'compact': [],
    68|     'compose': [],
    69|     'contains': ['indexOf', 'isString'],
    70|     'countBy': ['forEach', 'identity', 'isEqual', 'keys'],
    71|     'debounce': [],
    72|     'defaults': ['isArray', 'forEach', 'forOwn'],
    73|     'defer': ['bind'],
    74|     'delay': [],
    75|     'difference': ['indexOf'],
    76|     'escape': [],
    77|     'every': ['identity', 'isArray', 'isEqual', 'keys'],
    78|     'filter': ['identity', 'isArray', 'isEqual', 'keys'],
    79|     'find': ['forEach', 'identity', 'isEqual', 'keys'],
    80|     'first': [],
    81|     'flatten': ['isArray'],
    82|     'forEach': ['identity', 'isArguments', 'isArray', 'isString'],
    83|     'forIn': ['identity', 'isArguments'],
    84|     'forOwn': ['identity', 'isArguments'],
    85|     'functions': ['forIn', 'isFunction'],
    86|     'groupBy': ['forEach', 'identity', 'isEqual', 'keys'],
    87|     'has': [],
    88|     'identity': [],
    89|     'indexOf': ['sortedIndex'],
    90|     'initial': [],
    91|     'intersection': ['indexOf'],
    92|     'invert': ['keys'],
    93|     'invoke': ['forEach'],

# --- HUNK 2: Lines 410-485 ---
   410|         parts[2] + parts[3] + ' (Custom Build)' + parts[4] + '\n' +
   411|         parts[1] + ' Build: `lodash ' + commands.join(' ') + '`'
   412|       );
   413|     });
   414|   }
   415|   /**
   416|    * Compiles template files matched by the given file path `pattern` into a
   417|    * single source, extending `_.templates` with precompiled templates named after
   418|    * each template file's basename.
   419|    *
   420|    * @private
   421|    * @param {String} [pattern='<cwd>/*.jst'] The file path pattern.
   422|    * @param {Object} options The options object.
   423|    * @returns {String} Returns the compiled source.
   424|    */
   425|   function buildTemplate(pattern, options) {
   426|     pattern || (pattern = path.join(cwd, '*.jst'));
   427|     var directory = path.dirname(pattern);
   428|     var source = [
   429|       ';(function(window) {',
   430|       "  var freeExports = typeof exports == 'object' && exports;",
   431|       '',
   432|       "  var freeModule = typeof module == 'object' && module && module.exports == freeExports && module;",
   433|       '',
   434|       "  var freeGlobal = typeof global == 'object' && global;",
   435|       '  if (freeGlobal.global === freeGlobal) {',
   436|       '    window = freeGlobal;',
   437|       '  }',
   438|       '',
   439|       '  var templates = {},',
   440|       '      _ = window._;',
   441|       ''
   442|     ];
   443|     pattern = RegExp(
   444|       path.basename(pattern)
   445|         .replace(/[.+?^=!:${}()|[\]\/\\]/g, '\\$&')
   446|         .replace(/\*/g, '.*?') + '$'
   447|     );
   448|     fs.readdirSync(directory).forEach(function(filename) {
   449|       var filePath = path.join(directory, filename);
   450|       if (pattern.test(filename)) {
   451|         var text = fs.readFileSync(filePath, 'utf8'),
   452|             precompiled = getFunctionSource(_.template(text, null, options)),
   453|             prop = filename.replace(/\..*$/, '');
   454|         source.push("  templates['" + prop.replace(/['\n\r\t]/g, '\\$&') + "'] = " + precompiled + ';', '');
   455|       }
   456|     });
   457|     source.push(
   458|       "  if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {",
   459|       "    define(['" + options.moduleId + "'], function(lodash) {",
   460|       '      _ = lodash;',
   461|       '      lodash.templates = lodash.extend(lodash.templates || {}, templates);',
   462|       '    });',
   463|       "  } else if (freeExports) {",
   464|       "    if (freeModule) {",
   465|       '      (freeModule.exports = templates).templates = templates;',
   466|       '    } else {',
   467|       '      freeExports.templates = templates;',
   468|       '    }',
   469|       '  } else if (_) {',
   470|       '    _.templates = _.extend(_.templates || {}, templates);',
   471|       '  }',
   472|       '}(this));'
   473|     );
   474|     return source.join('\n');
   475|   }
   476|   /**
   477|    * Capitalizes a given string.
   478|    *
   479|    * @private
   480|    * @param {String} string The string to capitalize.
   481|    * @returns {String} Returns the capitalized string.
   482|    */
   483|   function capitalize(string) {
   484|     return string[0].toUpperCase() + string.toLowerCase().slice(1);
   485|   }

# --- HUNK 3: Lines 525-565 ---
   525|       '                         (i.e. “amd”, “commonjs”, “global”, “node”, and “none”)',
   526|       '    lodash iife=...      Code to replace the immediately-invoked function expression that wraps Lo-Dash',
   527|       '                         (e.g. `lodash iife="!function(window,undefined){%output%}(this)"`)',
   528|       '',
   529|       '    lodash template=...  File path pattern used to match template files to precompile',
   530|       '                         (e.g. `lodash template=./*.jst`)',
   531|       '    lodash settings=...  Template settings used when precompiling templates',
   532|       '                         (e.g. `lodash settings="{interpolate:/{{([\\s\\S]+?)}}/g}"`)',
   533|       '    lodash moduleId=...  The AMD module ID of Lo-Dash, which defaults to “lodash”, used by precompiled templates',
   534|       '',
   535|       '    All arguments, except `legacy` with `csp`, `mobile`, `modern`, or `underscore`, may be combined.',
   536|       '    Unless specified by `-o` or `--output`, all files created are saved to the current working directory.',
   537|       '',
   538|       '  Options:',
   539|       '',
   540|       '    -c, --stdout      Write output to standard output',
   541|       '    -d, --debug       Write only the non-minified development output',
   542|       '    -h, --help        Display help information',
   543|       '    -m, --minify      Write only the minified production output',
   544|       '    -o, --output      Write output to a given path/filename',
   545|       '    -p, --source-map  Generate a source map for the minified output, using an optional source map URL',
   546|       '    -s, --silent      Skip status updates normally logged to the console',
   547|       '    -V, --version     Output current version of Lo-Dash',
   548|       ''
   549|     ].join('\n'));
   550|   }
   551|   /**
   552|    * Gets the aliases associated with a given function name.
   553|    *
   554|    * @private
   555|    * @param {String} methodName The name of the method to get aliases for.
   556|    * @returns {Array} Returns an array of aliases.
   557|    */
   558|   function getAliases(methodName) {
   559|     return realToAliasMap[methodName] || [];
   560|   }
   561|   /**
   562|    * Gets the category of the given method name.
   563|    *
   564|    * @private
   565|    * @param {String} source The source to inspect.

# --- HUNK 4: Lines 845-885 ---
   845|     return source;
   846|   }
   847|   /**
   848|    * Removes all `hasEnumPrototype` references from `source`.
   849|    *
   850|    * @private
   851|    * @param {String} source The source to process.
   852|    * @returns {String} Returns the modified source.
   853|    */
   854|   function removeHasEnumPrototype(source) {
   855|     source = removeFromCreateIterator(source, 'hasEnumPrototype');
   856|     source = source.replace(/(?:\n +\/\*[^*]*\*+(?:[^\/][^*]*\*+)*\/)?\n *var hasEnumPrototype\b.*|.+?hasEnumPrototype *=.+/g, '');
   857|     source = source.replace(matchFunction(source, 'keys'), function(match) {
   858|       return match
   859|         .replace(/\(hasEnumPrototype[^)]+\)(?:\s*\|\|\s*)?/, '')
   860|         .replace(/\s*if *\(\s*\)[^}]+}/, '');
   861|     });
   862|     source = source.replace(getIteratorTemplate(source), function(match) {
   863|       return match
   864|         .replace(/(?: *\/\/.*\n)* *["'] *(?:<% *)?if *\(hasEnumPrototype *(?:&&|\))[\s\S]+?<% *} *(?:%>|["']).+/g, '')
   865|         .replace(/hasEnumPrototype *\|\|\s*/g, '');
   866|     });
   867|     return source;
   868|   }
   869|   /**
   870|    * Removes the `_.isArguments` fallback from `source`.
   871|    *
   872|    * @private
   873|    * @param {String} source The source to process.
   874|    * @returns {String} Returns the modified source.
   875|    */
   876|   function removeIsArgumentsFallback(source) {
   877|     return source.replace(getIsArgumentsFallback(source), '');
   878|   }
   879|   /**
   880|    * Removes the `_.isFunction` fallback from `source`.
   881|    *
   882|    * @private
   883|    * @param {String} source The source to process.
   884|    * @returns {String} Returns the modified source.
   885|    */

# --- HUNK 5: Lines 910-950 ---
   910|   function removeKeysOptimization(source) {
   911|     source = removeVar(source, 'isKeysFast');
   912|     source = source.replace(getIteratorTemplate(source), function(match) {
   913|       return match.replace(/(?: *\/\/.*\n)* *["']( *)<% *if *\(isKeysFast[\s\S]+?["']\1<% *} *else *{ *%>.+\n([\s\S]+?) *["']\1<% *} *%>.+/, "'\\n' +\n$2");
   914|     });
   915|     return source;
   916|   }
   917|   /**
   918|    * Removes all `noArgsClass` references from `source`.
   919|    *
   920|    * @private
   921|    * @param {String} source The source to process.
   922|    * @returns {String} Returns the modified source.
   923|    */
   924|   function removeNoArgsClass(source) {
   925|     source = removeVar(source, 'noArgsClass');
   926|     source = source.replace(getIsArgumentsFallback(source), function(match) {
   927|       return match.replace(/noArgsClass/g, '!isArguments(arguments)');
   928|     });
   929|     source = source.replace(matchFunction(source, 'isEmpty'), function(match) {
   930|       return match.replace(/ *\|\|\s*\(noArgsClass *&&[^)]+?\)\)/g, '');
   931|     });
   932|     return source;
   933|   }
   934|   /**
   935|    * Removes all `noCharByIndex` references from `source`.
   936|    *
   937|    * @private
   938|    * @param {String} source The source to process.
   939|    * @returns {String} Returns the modified source.
   940|    */
   941|   function removeNoCharByIndex(source) {
   942|     source = removeVar(source, 'noCharByIndex');
   943|     source = source.replace(matchFunction(source, 'at'), function(match) {
   944|       return match.replace(/^ *if *\(noCharByIndex[^}]+}\n/m, '');
   945|     });
   946|     source = source.replace(matchFunction(source, 'reduceRight'), function(match) {
   947|       return match.replace(/}\s*else if *\(noCharByIndex[^}]+/, '');
   948|     });
   949|     source = source.replace(matchFunction(source, 'toArray'), function(match) {
   950|       return match.replace(/noCharByIndex[^:]+:/, '');

# --- HUNK 6: Lines 957-1040 ---
   957|     return source;
   958|   }
   959|   /**
   960|    * Removes all `nonEnumArgs` references from `source`.
   961|    *
   962|    * @private
   963|    * @param {String} source The source to process.
   964|    * @returns {String} Returns the modified source.
   965|    */
   966|   function removeNonEnumArgs(source) {
   967|     source = removeFromCreateIterator(source, 'nonEnumArgs');
   968|     source = source.replace(/(?:\n +\/\*[^*]*\*+(?:[^\/][^*]*\*+)*\/)?\n *var nonEnumArgs\b.*|.+?nonEnumArgs *=.+/g, '');
   969|     source = source.replace(matchFunction(source, 'keys'), function(match) {
   970|       return match
   971|         .replace(/(?:\s*\|\|\s*)?\(nonEnumArgs[^)]+\)\)/, '')
   972|         .replace(/\s*if *\(\s*\)[^}]+}/, '');
   973|     });
   974|     source = source.replace(getIteratorTemplate(source), function(match) {
   975|       return match
   976|         .replace(/(?: *\/\/.*\n)*( *["'] *)<% *} *else *if *\(nonEnumArgs[\s\S]+?(\1<% *} *%>.+)/, '$2')
   977|         .replace(/ *\|\|\s*nonEnumArgs/, '');
   978|     });
   979|     return source;
   980|   }
   981|   /**
   982|    * Removes all `noNodeClass` references from `source`.
   983|    *
   984|    * @private
   985|    * @param {String} source The source to process.
   986|    * @returns {String} Returns the modified source.
   987|    */
   988|   function removeNoNodeClass(source) {
   989|     source = source.replace(/(?:\n +\/\*[^*]*\*+(?:[^\/][^*]*\*+)*\/)?\n *try *{(?:\s*\/\/.*)*\n *var noNodeClass[\s\S]+?catch[^}]+}\n/, '');
   990|     source = source.replace(matchFunction(source, 'shimIsPlainObject'), function(match) {
   991|       return match.replace(/ *&& *\(!noNodeClass[\s\S]+?\)\)/, '');
   992|     });
   993|     source = source.replace(matchFunction(source, 'clone'), function(match) {
   994|       return match.replace(/ *\|\|\s*\(noNodeClass[\s\S]+?\)\)/, '');
   995|     });
   996|     source = source.replace(matchFunction(source, 'isEqual'), function(match) {
   997|       return match.replace(/ *\|\|\s*\(noNodeClass[\s\S]+?\)\)\)/, '');
   998|     });
   999|     return source;
  1000|   }
  1001|   /**
  1002|    * Removes all `hasObjectSpliceByg` references from `source`.
  1003|    *
  1004|    * @private
  1005|    * @param {String} source The source to process.
  1006|    * @returns {String} Returns the modified source.
  1007|    */
  1008|   function removeHasObjectSpliceBug(source) {
  1009|     return removeVar(source, 'hasObjectSpliceBug')
  1010|       .replace(/(?:\s*\/\/.*)*\n( *)if *\(hasObjectSpliceBug[\s\S]+?(?:{\s*}|\n\1})/, '');
  1011|   }
  1012|   /**
  1013|    * Removes the `setImmediate` fork of `_.defer`.
  1014|    *
  1015|    * @private
  1016|    * @param {String} source The source to process.
  1017|    * @returns {String} Returns the modified source.
  1018|    */
  1019|   function removeSetImmediate(source) {
  1020|     return source.replace(/(?:\s*\/\/.*)*\n( *)if *\(isV8 *&& *freeModule[\s\S]+?\n\1}/, '');
  1021|   }
  1022|   /**
  1023|    * Removes a given variable from `source`.
  1024|    *
  1025|    * @private
  1026|    * @param {String} source The source to process.
  1027|    * @param {String} varName The name of the variable to remove.
  1028|    * @returns {String} Returns the modified source.
  1029|    */
  1030|   function removeVar(source, varName) {
  1031|     if (/^(?:cloneableClasses|ctorByClass|hasObjectSpliceBug)$/.test(varName)) {
  1032|       source = source.replace(RegExp('(var ' + varName + ' *=)[\\s\\S]+?\\n\\n'), '$1=null;\n\n');
  1033|     }
  1034|     source = source.replace(RegExp(
  1035|       '(?:\\n +/\\*[^*]*\\*+(?:[^/][^*]*\\*+)*/)?\\n' +
  1036|       '( *)var ' + varName + ' *= *(?:.+?(?:;|&&\\n[^;]+;)|(?:\\w+\\(|{)[\\s\\S]+?\\n\\1.+?;)\\n|' +
  1037|       '\\n +' + varName + ' *=.+?,'
  1038|     ), '');
  1039|     source = source.replace(RegExp('(var +)' + varName + ' *=.+?,\\s+'), '$1');
  1040|     source = source.replace(RegExp(',\\s*' + varName + ' *=.+?;'), ';');

# --- HUNK 7: Lines 1096-1164 ---
  1096|   function setUseStrictOption(source, value) {
  1097|     source = source.replace(/^([\s\S]*?function[^{]+{)(?:\s*'use strict';)?/, '$1' + (value ? "\n  'use strict';" : ''));
  1098|     source = source.replace(getIteratorTemplate(source), function(match) {
  1099|       return match.replace(/(template\()(?:\s*"'use strict.+)?/, '$1' + (value ? '\n    "\'use strict\';\\n" +' : ''));
  1100|     });
  1101|     return source;
  1102|   }
  1103|   /*--------------------------------------------------------------------------*/
  1104|   /**
  1105|    * Creates a debug and/or minified build, executing the `callback` for each.
  1106|    * The `callback` is invoked with two arguments; (filePath, outputSource).
  1107|    *
  1108|    * Note: For a list of commands see `displayHelp()` or run `lodash --help`.
  1109|    *
  1110|    * @param {Array} [options=[]] An array of commands.
  1111|    * @param {Function} callback The function called per build.
  1112|    */
  1113|   function build(options, callback) {
  1114|     options || (options = []);
  1115|     var debugSource;
  1116|     var sourceMapURL;
  1117|     var invalidArgs = _.reject(options.slice(options[0] == 'node' ? 2 : 0), function(value, index, options) {
  1118|       if (/^(?:-o|--output)$/.test(options[index - 1]) ||
  1119|           /^(?:category|exclude|exports|iife|include|moduleId|minus|plus|settings|template)=.*$/.test(value)) {
  1120|         return true;
  1121|       }
  1122|       var result = [
  1123|         'backbone',
  1124|         'csp',
  1125|         'legacy',
  1126|         'mobile',
  1127|         'modern',
  1128|         'modularize',
  1129|         'strict',
  1130|         'underscore',
  1131|         '-c', '--stdout',
  1132|         '-d', '--debug',
  1133|         '-h', '--help',
  1134|         '-m', '--minify',
  1135|         '-o', '--output',
  1136|         '-p', '--source-map',
  1137|         '-s', '--silent',
  1138|         '-V', '--version'
  1139|       ].indexOf(value) > -1;
  1140|       if (!result && /^(?:-p|--source-map)$/.test(options[index - 1])) {
  1141|         result = true;
  1142|         sourceMapURL = value;
  1143|       }
  1144|       return result;
  1145|     });
  1146|     if (invalidArgs.length) {
  1147|       console.log(
  1148|         '\n' +
  1149|         'Invalid argument' + (invalidArgs.length > 1 ? 's' : '') +
  1150|         ' passed: ' + invalidArgs.join(', ')
  1151|       );
  1152|       displayHelp();
  1153|       return;
  1154|     }
  1155|     if (_.find(options, function(arg) {
  1156|           return /^(?:-h|--help)$/.test(arg);
  1157|         })) {
  1158|       displayHelp();
  1159|       return;
  1160|     }
  1161|     if (_.find(options, function(arg) {
  1162|           return /^(?:-V|--version)$/.test(arg);
  1163|         })) {
  1164|       console.log(_.VERSION);

# --- HUNK 8: Lines 1240-1309 ---
  1240|       }, []);
  1241|       var minusMethods = options.reduce(function(accumulator, value) {
  1242|         return /exclude|minus/.test(value)
  1243|           ? _.union(accumulator, optionToMethodsArray(source, value))
  1244|           : accumulator;
  1245|       }, []);
  1246|       var plusMethods = options.reduce(function(accumulator, value) {
  1247|         return /plus/.test(value)
  1248|           ? _.union(accumulator, optionToMethodsArray(source, value))
  1249|           : accumulator;
  1250|       }, []);
  1251|       if (isUnderscore) {
  1252|         var methods = _.without.apply(_, [_.union(includeMethods, plusMethods)].concat(minusMethods));
  1253|         exposeAssign = methods.indexOf('assign') > -1;
  1254|         exposeForIn = methods.indexOf('forIn') > -1;
  1255|         exposeForOwn = methods.indexOf('forOwn') > -1;
  1256|         exposeIsPlainObject = methods.indexOf('isPlainObject') > -1;
  1257|         methods = _.without.apply(_, [plusMethods].concat(minusMethods));
  1258|         useUnderscoreClone = methods.indexOf('clone') < 0;
  1259|       }
  1260|       if (isLegacy) {
  1261|         dependencyMap.defer = _.without(dependencyMap.defer, 'bind');
  1262|       }
  1263|       if (isUnderscore) {
  1264|         dependencyMap.contains = _.without(dependencyMap.contains, 'isString');
  1265|         dependencyMap.countBy = _.without(dependencyMap.countBy, 'isEqual', 'keys');
  1266|         dependencyMap.every = _.without(dependencyMap.every, 'isEqual', 'keys');
  1267|         dependencyMap.filter = _.without(dependencyMap.filter, 'isEqual');
  1268|         dependencyMap.find = _.without(dependencyMap.find, 'isEqual', 'keys');
  1269|         dependencyMap.groupBy = _.without(dependencyMap.groupBy, 'isEqual', 'keys');
  1270|         dependencyMap.isEqual = _.without(dependencyMap.isEqual, 'forIn', 'isArguments');
  1271|         dependencyMap.isEmpty = ['isArray', 'isString'];
  1272|         dependencyMap.map = _.without(dependencyMap.map, 'isEqual', 'keys');
  1273|         dependencyMap.max = _.without(dependencyMap.max, 'isEqual', 'isString', 'keys');
  1274|         dependencyMap.min = _.without(dependencyMap.min, 'isEqual', 'isString', 'keys');
  1275|         dependencyMap.pick = _.without(dependencyMap.pick, 'forIn', 'isObject');
  1276|         dependencyMap.reduce = _.without(dependencyMap.reduce, 'isEqual', 'keys');
  1277|         dependencyMap.reject = _.without(dependencyMap.reject, 'isEqual', 'keys');
  1278|         dependencyMap.some = _.without(dependencyMap.some, 'isEqual', 'keys');
  1279|         dependencyMap.sortBy = _.without(dependencyMap.sortBy, 'isEqual', 'keys');
  1280|         dependencyMap.sortedIndex = _.without(dependencyMap.sortedIndex, 'isEqual', 'keys');
  1281|         dependencyMap.template = _.without(dependencyMap.template, 'keys', 'values');
  1282|         dependencyMap.uniq = _.without(dependencyMap.uniq, 'isEqual', 'keys');
  1283|         dependencyMap.where.push('find', 'isEmpty');
  1284|         if (useUnderscoreClone) {
  1285|           dependencyMap.clone = _.without(dependencyMap.clone, 'forEach', 'forOwn');
  1286|         }
  1287|       }
  1288|       if (isModern || isUnderscore) {
  1289|         dependencyMap.reduceRight = _.without(dependencyMap.reduceRight, 'isEqual', 'isString');
  1290|       }
  1291|       if (includeMethods.length) {
  1292|         result = getDependencies(includeMethods);
  1293|       }
  1294|       if (isBackbone && !result) {
  1295|         result = getDependencies(backboneDependencies);
  1296|       }
  1297|       else if (isUnderscore && !result) {
  1298|         result = getDependencies(underscoreMethods);
  1299|       }
  1300|       if (categories.length) {
  1301|         result = _.union(result || [], getDependencies(categories.reduce(function(accumulator, category) {
  1302|           return accumulator.concat(getMethodsByCategory(source, capitalize(category)));
  1303|         }, [])));
  1304|       }
  1305|       if (!result) {
  1306|         result = allMethods.slice();
  1307|       }
  1308|       if (plusMethods.length) {
  1309|         result = _.union(result, getDependencies(plusMethods));

# --- HUNK 9: Lines 1753-1801 ---
  1753|     /*------------------------------------------------------------------------*/
  1754|     if (isTemplate) {
  1755|       source = buildTemplate(templatePattern, templateSettings);
  1756|     }
  1757|     else {
  1758|       allMethods.forEach(function(otherName) {
  1759|         if (!_.contains(buildMethods, otherName)) {
  1760|           source = removeFunction(source, otherName);
  1761|         }
  1762|       });
  1763|       if (isRemoved(source, 'isArguments')) {
  1764|         source = removeIsArgumentsFallback(source);
  1765|       }
  1766|       source = source.replace(matchFunction(source, 'template'), function(match) {
  1767|         return match
  1768|           .replace(/iteratorTemplate *&& */g, '')
  1769|           .replace(/iteratorTemplate *\? *([^:]+?) *:[^,;]+/g, '$1');
  1770|       });
  1771|       /*----------------------------------------------------------------------*/
  1772|       if (isLegacy) {
  1773|         source = removeSetImmediate(source);
  1774|         _.each(['isBindFast', 'isV8', 'nativeBind', 'nativeIsArray', 'nativeKeys', 'reNative'], function(varName) {
  1775|           source = removeVar(source, varName);
  1776|         });
  1777|         source = source.replace(matchFunction(source, 'bind'), function(match) {
  1778|           return match.replace(/(?:\s*\/\/.*)*\s*return isBindFast[^:]+:\s*/, 'return ');
  1779|         });
  1780|         source = source.replace(matchFunction(source, 'isArray'), function(match) {
  1781|           return match.replace(/nativeIsArray * \|\|\s*/, '');
  1782|         });
  1783|         if (!isRemoved(source, 'keys')) {
  1784|           source = source.replace(
  1785|             matchFunction(source, 'keys').replace(/[\s\S]+?var keys *= */, ''),
  1786|             matchFunction(source, 'shimKeys').replace(/[\s\S]+?function shimKeys/, 'function').replace(/}\n$/, '};\n')
  1787|           );
  1788|           source = removeFunction(source, 'shimKeys');
  1789|         }
  1790|         if (!isRemoved(source, 'isArguments')) {
  1791|           source = source.replace(
  1792|             matchFunction(source, 'isArguments').replace(/[\s\S]+?function isArguments/, ''),
  1793|             getIsArgumentsFallback(source).match(/isArguments *= *function([\s\S]+?) *};/)[1] + '  }\n'
  1794|           );
  1795|           source = removeIsArgumentsFallback(source);
  1796|         }
  1797|       }
  1798|       if (isModern) {
  1799|         source = removeArgsAreObjects(source);
  1800|         source = removeHasObjectSpliceBug(source);
  1801|         source = removeIsArgumentsFallback(source);

# --- HUNK 10: Lines 1866-1941 ---
  1866|         source = source.replace(matchFunction(source, 'some'), function(match) {
  1867|           return match.replace(/!\(result *= *(.+?)\);/, '(result = $1) && indicatorObject;');
  1868|         });
  1869|       }
  1870|       if (!(isMobile || isUnderscore)) {
  1871|         source = source.replace(getIteratorTemplate(source), function() {
  1872|           var snippet = getFunctionSource(lodash._iteratorTemplate);
  1873|           iteratorOptions.forEach(function(property) {
  1874|             snippet = snippet.replace(RegExp('([^\\w.])\\b' + property + '\\b', 'g'), '$1obj.' + property);
  1875|           });
  1876|           snippet = snippet
  1877|             .replace(/var __t.+/, "var __p = '';")
  1878|             .replace(/function print[^}]+}/, '')
  1879|             .replace(/'(?:\\n|\s)+'/g, "''")
  1880|             .replace(/__p *\+= *' *';/g, '')
  1881|             .replace(/(__p *\+= *)' *' *\+/g, '$1')
  1882|             .replace(/({) *;|; *(})/g, '$1$2')
  1883|             .replace(/\(\(__t *= *\( *([^)]+) *\)\) *== *null *\? *'' *: *__t\)/g, '($1)');
  1884|           snippet = snippet.replace(/ *with *\(.+?\) *{/, '\n').replace(/}([^}]*}[^}]*$)/, '$1');
  1885|           snippet = snippet
  1886|             .replace(/obj *\|\|\s*\(obj *= *{}\);/, '')
  1887|             .replace(/var __p = '';\s*__p \+=/, 'var __p =');
  1888|           snippet = snippet.replace(/\s*\/\/.*(?:\n|$)/g, '');
  1889|           return '  var iteratorTemplate = ' + snippet + ';\n';
  1890|         });
  1891|       }
  1892|     }
  1893|     /*------------------------------------------------------------------------*/
  1894|     (function() {
  1895|       if (isIIFE) {
  1896|         var token = '%output%',
  1897|             index = iife.indexOf(token);
  1898|         source = source.match(/^\/\**[\s\S]+?\*\/\n/) +
  1899|           iife.slice(0, index) +
  1900|           source.replace(/^[\s\S]+?\(function[^{]+?{|}\(this\)\)[;\s]*$/g, '') +
  1901|           iife.slice(index + token.length);
  1902|       }
  1903|     }());
  1904|     /*------------------------------------------------------------------------*/
  1905|     (function() {
  1906|       if (!isAMD) {
  1907|         source = source.replace(/(?: *\/\/.*\n)*( *)if *\(typeof +define[\s\S]+?else /, '$1');
  1908|       }
  1909|       if (!isNode) {
  1910|         source = source.replace(/(?: *\/\/.*\n)*( *)if *\(freeModule[\s\S]+?else *{([\s\S]+?\n)\1}\n/, '$1$2');
  1911|       }
  1912|       if (!isCommonJS) {
  1913|         source = source.replace(/(?: *\/\/.*\n)*(?:( *)else *{)?\s*freeExports\.\w+ *=[\s\S]+?(?:\n\1})?\n/, '');
  1914|       }
  1915|       if (!isGlobal) {
  1916|         source = source.replace(/(?:( *)(})? *else(?: *if *\(_\))? *{)?(?:\s*\/\/.*)*\s*(?:window\._|_\.templates) *=[\s\S]+?(?:\n\1})?\n/g, '$1$2\n');
  1917|       }
  1918|       if (isAMD && isGlobal) {
  1919|         source = source.replace(/(?: *\/\/.*\n)* *(?:else )?if *\(freeExports\) *{\s*}\n/, '');
  1920|       } else {
  1921|         source = source.replace(/(?: *\/\/.*\n)* *(?:else )?if *\(freeExports\) *{\s*}(?:\s*else *{([\s\S]+?) *})?\n/, '$1\n');
  1922|       }
  1923|     }());
  1924|     /*------------------------------------------------------------------------*/
  1925|     if (!isTemplate) {
  1926|       if (isRemoved(source, 'invert')) {
  1927|         source = replaceVar(source, 'htmlUnescapes', "{'&amp;':'&','&lt;':'<','&gt;':'>','&quot;':'\"','&#x27;':\"'\"}");
  1928|       }
  1929|       if (isRemoved(source, 'isArguments')) {
  1930|         source = replaceVar(source, 'noArgsClass', 'false');
  1931|       }
  1932|       if (isRemoved(source, 'isFunction')) {
  1933|         source = removeIsFunctionFallback(source);
  1934|       }
  1935|       if (isRemoved(source, 'mixin')) {
  1936|         source = removeHasObjectSpliceBug(source);
  1937|         source = replaceFunction(source, 'lodash', [
  1938|           '  function lodash() {',
  1939|           '    // no operation performed',
  1940|           '  }'
  1941|         ].join('\n'));

# --- HUNK 11: Lines 1961-2066 ---
  1961|       }
  1962|       if (isRemoved(source, 'template')) {
  1963|         source = source.replace(/(?:\n +\/\*[^*]*\*+(?:[^\/][^*]*\*+)*\/)?\n *lodash\.templateSettings[\s\S]+?};\n/, '');
  1964|       }
  1965|       if (isRemoved(source, 'isArguments', 'isEmpty')) {
  1966|         source = removeNoArgsClass(source);
  1967|       }
  1968|       if (isRemoved(source, 'clone', 'isEqual', 'isPlainObject')) {
  1969|         source = removeNoNodeClass(source);
  1970|       }
  1971|       if ((source.match(/\bcreateIterator\b/g) || []).length < 2) {
  1972|         source = removeFunction(source, 'createIterator');
  1973|         source = removeVar(source, 'defaultsIteratorOptions');
  1974|         source = removeVar(source, 'eachIteratorOptions');
  1975|         source = removeVar(source, 'forOwnIteratorOptions');
  1976|         source = removeVar(source, 'templateIterator');
  1977|         source = removeHasDontEnumBug(source);
  1978|         source = removeHasEnumPrototype(source);
  1979|       }
  1980|       if (isRemoved(source, 'createIterator', 'bind', 'keys')) {
  1981|         source = removeSetImmediate(source);
  1982|         source = removeVar(source, 'isBindFast');
  1983|         source = removeVar(source, 'isV8');
  1984|         source = removeVar(source, 'nativeBind');
  1985|       }
  1986|       if (isRemoved(source, 'createIterator', 'keys')) {
  1987|         source = removeVar(source, 'nativeKeys');
  1988|         source = removeKeysOptimization(source);
  1989|         source = removeNonEnumArgs(source);
  1990|       }
  1991|       if (!source.match(/var (?:hasDontEnumBug|hasEnumPrototype|iteratesOwnLast|nonEnumArgs)\b/g)) {
  1992|         source = source.replace(/^ *\(function\(\) *{[\s\S]+?}\(1\)\);\n/m, '');
  1993|       }
  1994|     }
  1995|     if ((source.match(/\bfreeModule\b/g) || []).length < 2) {
  1996|       source = removeVar(source, 'freeModule');
  1997|     }
  1998|     if ((source.match(/\bfreeExports\b/g) || []).length < 2) {
  1999|       source = removeVar(source, 'freeExports');
  2000|     }
  2001|     debugSource = cleanupSource(source);
  2002|     source = cleanupSource(source);
  2003|     /*------------------------------------------------------------------------*/
  2004|     var outputUsed = false;
  2005|     var isCustom = (
  2006|       isLegacy || isMapped || isModern || isStrict || isUnderscore || outputPath ||
  2007|       /(?:category|exclude|exports|iife|include|minus|plus)=/.test(options) ||
  2008|       !_.isEqual(exportsOptions, exportsAll)
  2009|     );
  2010|     var basename = outputPath
  2011|       ? path.basename(outputPath, '.js')
  2012|       : 'lodash' + (isTemplate ? '.template' : isCustom ? '.custom' : '');
  2013|     dependencyMap = dependencyBackup;
  2014|     if (!isMinify && (isCustom || isDebug || isTemplate)) {
  2015|       if (isCustom) {
  2016|         debugSource = addCommandsToHeader(debugSource, options);
  2017|       }
  2018|       if (isDebug && isStdOut) {
  2019|         stdout.write(debugSource);
  2020|         callback({
  2021|           'source': debugSource
  2022|         });
  2023|       }
  2024|       else if (!isStdOut) {
  2025|         filePath = outputPath || path.join(cwd, basename + '.js');
  2026|         outputUsed = true;
  2027|         callback({
  2028|           'source': debugSource,
  2029|           'outputPath': filePath
  2030|         });
  2031|       }
  2032|     }
  2033|     if (!isDebug) {
  2034|       if (outputPath && outputUsed) {
  2035|         outputPath = path.join(path.dirname(outputPath), path.basename(outputPath, '.js') + '.min.js');
  2036|       } else if (!outputPath) {
  2037|         outputPath = path.join(cwd, basename + '.min.js');
  2038|       }
  2039|       minify(source, {
  2040|         'filePath': filePath,
  2041|         'isMapped': isMapped,
  2042|         'isSilent': isSilent,
  2043|         'isTemplate': isTemplate,
  2044|         'modes': isIIFE && ['simple', 'hybrid'],
  2045|         'outputPath': outputPath,
  2046|         'sourceMapURL': sourceMapURL,
  2047|         'onComplete': function(data) {
  2048|           if (isCustom) {
  2049|             data.source = addCommandsToHeader(data.source, options);
  2050|           }
  2051|           if (isStdOut) {
  2052|             stdout.write(data.source);
  2053|             callback(data);
  2054|           } else {
  2055|             callback(data);
  2056|           }
  2057|         }
  2058|       });
  2059|     }
  2060|   }
  2061|   /*--------------------------------------------------------------------------*/
  2062|   if (module != require.main) {
  2063|     module.exports = build;
  2064|   }
  2065|   else {
  2066|     build(process.argv, function(data) {


# ====================================================================
# FILE: build/minify.js
# Total hunks: 6
# ====================================================================
# --- HUNK 1: Lines 1-38 ---
     1| #!/usr/bin/env node
     2| ;(function() {
     3|   'use strict';
     4|   /** Load Node modules */
     5|   var fs = require('fs'),
     6|       https = require('https'),
     7|       path = require('path'),
     8|       spawn = require('child_process').spawn,
     9|       zlib = require('zlib'),
    10|       tar = require('../vendor/tar/tar.js'),
    11|       _ = require('../lodash.js');
    12|   /** Load other modules */
    13|   var preprocess = require('./pre-compile.js'),
    14|       postprocess = require('./post-compile.js');
    15|   /** The Git object ID of `closure-compiler.tar.gz` */
    16|   var closureId = '23cf67d0f0b979d97631fc108a2a43bb82225994';
    17|   /** The Git object ID of `uglifyjs.tar.gz` */
    18|   var uglifyId = 'a934fb18f8fa2768c6a68de44b6e035fe96a268b';
    19|   /** The path of the directory that is the base of the repository */
    20|   var basePath = fs.realpathSync(path.join(__dirname, '..'));
    21|   /** The path of the `vendor` directory */
    22|   var vendorPath = path.join(basePath, 'vendor');
    23|   /** The path to the Closure Compiler `.jar` */
    24|   var closurePath = path.join(vendorPath, 'closure-compiler', 'compiler.jar');
    25|   /** The path to the UglifyJS module */
    26|   var uglifyPath = path.join(vendorPath, 'uglifyjs', 'tools', 'node.js');
    27|   /** The Closure Compiler command-line options */
    28|   var closureOptions = ['--warning_level=QUIET'];
    29|   /** The media type for raw blob data */
    30|   var mediaType = 'application/vnd.github.v3.raw';
    31|   /** Used to reference parts of the blob href */
    32|   var location = (function() {
    33|     var host = 'api.github.com',
    34|         origin = 'https://api.github.com',
    35|         pathname = '/repos/bestiejs/lodash/git/blobs';
    36|     return {
    37|       'host': host,
    38|       'href': origin + pathname,

# --- HUNK 2: Lines 48-142 ---
    48|   /** Reassign `existsSync` for older versions of Node */
    49|   fs.existsSync || (fs.existsSync = path.existsSync);
    50|   /*--------------------------------------------------------------------------*/
    51|   /**
    52|    * Minifies a given Lo-Dash `source` and invokes the `options.onComplete`
    53|    * callback when finished. The `onComplete` callback is invoked with one
    54|    * argument; (outputSource).
    55|    *
    56|    * @param {Array|String} [source=''] The source to minify or array of commands.
    57|    *  -o, --output - Write output to a given path/filename.
    58|    *  -s, --silent - Skip status updates normally logged to the console.
    59|    *  -t, --template - Applies template specific minifier options.
    60|    *
    61|    * @param {Object} [options={}] The options object.
    62|    *  outputPath - Write output to a given path/filename.
    63|    *  isSilent - Skip status updates normally logged to the console.
    64|    *  isTemplate - Applies template specific minifier options.
    65|    *  onComplete - The function called once minification has finished.
    66|    */
    67|   function minify(source, options) {
    68|     var sourceMapURL;
    69|     var modes = ['simple', 'advanced', 'hybrid'];
    70|     source || (source = '');
    71|     options || (options = {});
    72|     if (Array.isArray(source)) {
    73|       options = source;
    74|       var invalidArgs = _.reject(options.slice(options[0] == 'node' ? 2 : 0), function(value, index, options) {
    75|         if (/^(?:-o|--output)$/.test(options[index - 1]) ||
    76|             /^modes=.*$/.test(value)) {
    77|           return true;
    78|         }
    79|         var result = [
    80|           '-o', '--output',
    81|           '-p', '--source-map',
    82|           '-s', '--silent',
    83|           '-t', '--template'
    84|         ].indexOf(value) > -1;
    85|         if (!result && /^(?:-p|--source-map)$/.test(options[index - 1])) {
    86|           result = true;
    87|           sourceMapURL = value;
    88|         }
    89|         return result;
    90|       });
    91|       if (invalidArgs.length) {
    92|         console.log(
    93|           '\n' +
    94|           'Invalid argument' + (invalidArgs.length > 1 ? 's' : '') +
    95|           ' passed: ' + invalidArgs.join(', ')
    96|         );
    97|         return;
    98|       }
    99|       var filePath = options[options.length - 1],
   100|           isMapped = options.indexOf('-p') > -1 || options.indexOf('--source-map') > -1,
   101|           isSilent = options.indexOf('-s') > -1 || options.indexOf('--silent') > -1,
   102|           isTemplate = options.indexOf('-t') > -1 || options.indexOf('--template') > -1,
   103|           outputPath = path.join(path.dirname(filePath), path.basename(filePath, '.js') + '.min.js');
   104|       modes = options.reduce(function(result, value) {
   105|         var match = value.match(/modes=(.*)$/);
   106|         return match ? match[1].split(/, */) : result;
   107|       }, modes);
   108|       outputPath = options.reduce(function(result, value, index) {
   109|         if (/-o|--output/.test(value)) {
   110|           result = options[index + 1];
   111|           result = path.join(fs.realpathSync(path.dirname(result)), path.basename(result));
   112|         }
   113|         return result;
   114|       }, outputPath);
   115|       options = {
   116|         'filePath': filePath,
   117|         'isMapped': isMapped,
   118|         'isSilent': isSilent,
   119|         'isTemplate': isTemplate,
   120|         'modes': modes,
   121|         'outputPath': outputPath,
   122|         'sourceMapURL': sourceMapURL
   123|       };
   124|       source = fs.readFileSync(filePath, 'utf8');
   125|     }
   126|     modes = options.modes || modes;
   127|     if (options.isMapped) {
   128|       modes = modes.filter(function(mode) {
   129|         return mode != 'hybrid';
   130|       });
   131|     }
   132|     if (options.isTemplate) {
   133|       modes = modes.filter(function(mode) {
   134|         return mode != 'advanced';
   135|       });
   136|     }
   137|     options.modes = modes;
   138|     getDependency({
   139|       'id': 'closure-compiler',
   140|       'hashId': closureId,
   141|       'path': vendorPath,
   142|       'title': 'the Closure Compiler',

# --- HUNK 3: Lines 165-205 ---
   165|    * @param {String} source The source to minify.
   166|    * @param {Object} options The options object.
   167|    *  outputPath - Write output to a given path/filename.
   168|    *  isSilent - Skip status updates normally logged to the console.
   169|    *  isTemplate - Applies template specific minifier options.
   170|    *  onComplete - The function called once minification has finished.
   171|    */
   172|   function Minify(source, options) {
   173|     if (typeof source == 'object' && source) {
   174|       options = source || options;
   175|       source = options.source || '';
   176|     }
   177|     this.compiled = { 'simple': {}, 'advanced': {} };
   178|     this.hybrid = { 'simple': {}, 'advanced': {} };
   179|     this.uglified = {};
   180|     this.filePath = options.filePath;
   181|     this.isMapped = !!options.isMapped;
   182|     this.isSilent = !!options.isSilent;
   183|     this.isTemplate = !!options.isTemplate;
   184|     this.outputPath = options.outputPath;
   185|     this.sourceMapURL = options.sourceMapURL;
   186|     var modes = this.modes = options.modes;
   187|     source = this.source = preprocess(source, options);
   188|     this.onComplete = options.onComplete || function(data) {
   189|       var outputPath = this.outputPath,
   190|           sourceMap = data.sourceMap;
   191|       fs.writeFileSync(outputPath, data.source, 'utf8');
   192|       if (sourceMap) {
   193|         fs.writeFileSync(getMapPath(outputPath), sourceMap, 'utf8');
   194|       }
   195|     };
   196|     if (modes.indexOf('simple') > -1) {
   197|       closureCompile.call(this, source, 'simple', onClosureSimpleCompile.bind(this));
   198|     } else if (modes.indexOf('advanced') > -1) {
   199|       onClosureSimpleGzip.call(this);
   200|     } else {
   201|       onClosureAdvancedGzip.call(this);
   202|     }
   203|   }
   204|   /*--------------------------------------------------------------------------*/
   205|   /**

# --- HUNK 4: Lines 265-308 ---
   265|    * @param {String} outputPath The output path.
   266|    * @returns {String} Returns the source map path.
   267|    */
   268|   function getMapPath(outputPath) {
   269|     return path.join(path.dirname(outputPath), path.basename(outputPath, '.js') + '.map');
   270|   }
   271|   /*--------------------------------------------------------------------------*/
   272|   /**
   273|    * Compresses a `source` string using the Closure Compiler. Yields the
   274|    * minified result, and any exceptions encountered, to a `callback` function.
   275|    *
   276|    * @private
   277|    * @param {String} source The JavaScript source to minify.
   278|    * @param {String} mode The optimization mode.
   279|    * @param {Function} callback The function called once the process has completed.
   280|    */
   281|   function closureCompile(source, mode, callback) {
   282|     var filePath = this.filePath,
   283|         isAdvanced = mode == 'advanced',
   284|         isMapped = this.isMapped,
   285|         options = closureOptions.slice(),
   286|         outputPath = this.outputPath,
   287|         mapPath = getMapPath(outputPath),
   288|         sourceMapURL = this.sourceMapURL || path.basename(mapPath);
   289|     var license = (/^(?:\s*\/\/.*\s*|\s*\/\*[^*]*\*+(?:[^\/][^*]*\*+)*\/\s*)*/.exec(source) || [''])[0];
   290|     if (license) {
   291|       source = source.replace(license, '');
   292|     }
   293|     var hasIIFE = /^;?\(function[^{]+{\s*/.test(source),
   294|         isStrict = hasIIFE && /^;?\(function[^{]+{\s*["']use strict["']/.test(source);
   295|     if (hasIIFE && isAdvanced) {
   296|       source = source
   297|         .replace(/\(function/, '__iife__$&')
   298|         .replace(/\(this\)\)([\s;]*(\n\/\/.+)?)$/, ', this)$1');
   299|     }
   300|     options.push('--compilation_level=' + optimizationModes[mode]);
   301|     if (isMapped) {
   302|       options.push('--create_source_map=' + mapPath, '--source_map_format=V3');
   303|     }
   304|     var compiler = spawn('java', ['-jar', closurePath].concat(options));
   305|     if (!this.isSilent) {
   306|       console.log('Compressing ' + path.basename(outputPath, '.js') + ' using the Closure Compiler (' + mode + ')...');
   307|     }
   308|     var error = '';

# --- HUNK 5: Lines 316-360 ---
   316|     compiler.on('exit', function(status) {
   317|       if (status) {
   318|         var exception = new Error(error);
   319|         exception.status = status;
   320|       }
   321|       if (hasIIFE && isAdvanced) {
   322|         output = output
   323|           .replace(/__iife__\(/, '(')
   324|           .replace(/,\s*this\)([\s;]*(\n\/\/.+)?)$/, '(this))$1')
   325|           .replace(/^((?:var (?:\w+=(?:!0|!1|null)[,;])+)?)([\s\S]*?function[^{]+{)/, '$2$1');
   326|       }
   327|       if (isStrict) {
   328|         output = output.replace(/^[\s\S]*?function[^{]+{/, '$&"use strict";');
   329|       }
   330|       if (license) {
   331|         output = license + output;
   332|       }
   333|       if (isMapped) {
   334|         var mapOutput = fs.readFileSync(mapPath, 'utf8');
   335|         fs.unlinkSync(mapPath);
   336|         output = output.replace(/[\s;]*$/, '\n/*\n//@ sourceMappingURL=' + sourceMapURL) + '\n*/';
   337|         mapOutput = JSON.parse(mapOutput);
   338|         mapOutput.file = path.basename(outputPath);
   339|         mapOutput.sources = [path.basename(filePath)];
   340|         mapOutput = JSON.stringify(mapOutput, null, 2);
   341|       }
   342|       callback(exception, output, mapOutput);
   343|     });
   344|     compiler.stdin.end(source);
   345|   }
   346|   /**
   347|    * Compresses a `source` string using UglifyJS. Yields the result to a
   348|    * `callback` function. This function is synchronous; the `callback` is used
   349|    * for symmetry.
   350|    *
   351|    * @private
   352|    * @param {String} source The JavaScript source to minify.
   353|    * @param {String} label The label to log.
   354|    * @param {Function} callback The function called once the process has completed.
   355|    */
   356|   function uglify(source, label, callback) {
   357|     if (!this.isSilent) {
   358|       console.log('Compressing ' + path.basename(this.outputPath, '.js') + ' using ' + label + '...');
   359|     }
   360|     try {


# ====================================================================
# FILE: build/pre-compile.js
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 48-88 ---
    48|   ];
    49|   /** Used to minify variables and string values to a single character */
    50|   var minNames = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
    51|   minNames.push.apply(minNames, minNames.map(function(value) {
    52|     return value + value;
    53|   }));
    54|   /** Used to protect the specified properties from getting minified */
    55|   var propWhitelist = [
    56|     '_',
    57|     '__wrapped__',
    58|     'after',
    59|     'all',
    60|     'amd',
    61|     'any',
    62|     'assign',
    63|     'at',
    64|     'attachEvent',
    65|     'bind',
    66|     'bindAll',
    67|     'bindKey',
    68|     'clearTimeout',
    69|     'clone',
    70|     'cloneDeep',
    71|     'collect',
    72|     'compact',
    73|     'compose',
    74|     'contains',
    75|     'countBy',
    76|     'criteria',
    77|     'debounce',
    78|     'defaults',
    79|     'defer',
    80|     'delay',
    81|     'detect',
    82|     'difference',
    83|     'drop',
    84|     'each',
    85|     'environment',
    86|     'escape',
    87|     'evaluate',
    88|     'every',

# --- HUNK 2: Lines 143-184 ---
   143|     'min',
   144|     'mixin',
   145|     'noConflict',
   146|     'object',
   147|     'omit',
   148|     'once',
   149|     'opera',
   150|     'pairs',
   151|     'partial',
   152|     'partialRight',
   153|     'pick',
   154|     'pluck',
   155|     'random',
   156|     'range',
   157|     'reduce',
   158|     'reduceRight',
   159|     'reject',
   160|     'rest',
   161|     'result',
   162|     'select',
   163|     'setImmediate',
   164|     'setTimeout',
   165|     'shuffle',
   166|     'size',
   167|     'some',
   168|     'sortBy',
   169|     'sortedIndex',
   170|     'source',
   171|     'tail',
   172|     'take',
   173|     'tap',
   174|     'template',
   175|     'templateSettings',
   176|     'throttle',
   177|     'times',
   178|     'toArray',
   179|     'unescape',
   180|     'union',
   181|     'uniq',
   182|     'unique',
   183|     'uniqueId',
   184|     'value',

# --- HUNK 3: Lines 197-246 ---
   197|   /**
   198|    * Pre-process a given Lo-Dash `source`, preparing it for minification.
   199|    *
   200|    * @param {String} [source=''] The source to process.
   201|    * @param {Object} [options={}] The options object.
   202|    * @returns {String} Returns the processed source.
   203|    */
   204|   function preprocess(source, options) {
   205|     source || (source = '');
   206|     options || (options = {});
   207|     source = source.replace(/@(?:alias|category)\b.*/g, '');
   208|     if (options.isTemplate) {
   209|       return source;
   210|     }
   211|     source = source.replace(RegExp('\\.(' + propWhitelist.join('|') + ')\\b', 'g'), function(match, prop) {
   212|       return "['" + prop.replace(/['\n\r\t]/g, '\\$&') + "']";
   213|     });
   214|     source = source.replace(/__e *= *_\['escape']/g, '__e=_.escape');
   215|     source = source.replace("collection['indexOf'](target)", 'collection.indexOf(target)');
   216|     source = source.replace("result[length]['value']", 'result[length].value');
   217|     source = source.replace(/^([ "'\w]+:)? *"[^"\\\n]*(?:\\.[^"\\\n]*)*"|'[^'\\\n]*(?:\\.[^'\\\n]*)*'/gm, function(string, captured) {
   218|       if (/:$/.test(captured)) {
   219|         string = string.slice(captured.length);
   220|       }
   221|       string = string.replace(/\[object |delete |else (?!{)|function | in |return\s+[\w"']|throw |typeof |use strict|var |@ |(["'])\\n\1|\\\\n|\\n|\s+/g, function(match) {
   222|         return match == false || match == '\\n' ? '' : match;
   223|       });
   224|       return (captured || '') + string;
   225|     });
   226|     source = source.replace(/reEmptyString\w+ *=.+/g, function(match) {
   227|       return match.replace(/ |\\n/g, '');
   228|     });
   229|     source = source
   230|       .replace('"__p += \'"', '"__p+=\'"')
   231|       .replace('"\';\n"', '"\';"')
   232|     source = source.replace(/(?:\s*\/\/.*\n)* *var sourceURL[^;]+;|\+ *sourceURL/g, '');
   233|     (function() {
   234|       var properties = ['criteria', 'index', 'value'],
   235|           snippets = source.match(/( +)function (?:compareAscending|sortBy)\b[\s\S]+?\n\1}/g);
   236|       if (!snippets) {
   237|         return;
   238|       }
   239|       snippets.forEach(function(snippet) {
   240|         var modified = snippet;
   241|         properties.forEach(function(property, index) {
   242|           var minName = minNames[index],
   243|               reBracketProp = RegExp("\\['(" + property + ")'\\]", 'g'),
   244|               reDotProp = RegExp('\\.' + property + '\\b', 'g'),
   245|               rePropColon = RegExp("([^?\\s])\\s*([\"'])?\\b" + property + "\\2 *:", 'g');
   246|           modified = modified


# ====================================================================
# FILE: dist/lodash.compat.js
# Total hunks: 11
# ====================================================================
# --- HUNK 1: Lines 1-69 ---
     1| /**
     2|  * @license
     3|  * Lo-Dash 1.0.1 (Custom Build) <http://lodash.com/>
     4|  * Build: `lodash -o ./dist/lodash.compat.js`
     5|  * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
     6|  * Based on Underscore.js 1.4.4 <http://underscorejs.org/>
     7|  * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud Inc.
     8|  * Available under MIT license <http://lodash.com/license>
     9|  */
    10| ;(function(window, undefined) {
    11|   /** Detect free variable `exports` */
    12|   var freeExports = typeof exports == 'object' && exports;
    13|   /** Detect free variable `module` */
    14|   var freeModule = typeof module == 'object' && module && module.exports == freeExports && module;
    15|   /** Detect free variable `global` and use it as `window` */
    16|   var freeGlobal = typeof global == 'object' && global;
    17|   if (freeGlobal.global === freeGlobal) {
    18|     window = freeGlobal;
    19|   }
    20|   /** Used for array and object method references */
    21|   var arrayRef = [],
    22|       objectRef = {};
    23|   /** Used to generate unique IDs */
    24|   var idCounter = 0;
    25|   /** Used internally to indicate various things */
    26|   var indicatorObject = objectRef;
    27|   /** Used by `cachedContains` as the default size when optimizations are enabled for large arrays */
    28|   var largeArraySize = 30;
    29|   /** Used to restore the original `_` reference in `noConflict` */
    30|   var oldDash = window._;
    31|   /** Used to match HTML entities */
    32|   var reEscapedHtml = /&(?:amp|lt|gt|quot|#39);/g;
    33|   /** Used to match empty string literals in compiled template source */
    34|   var reEmptyStringLeading = /\b__p \+= '';/g,
    35|       reEmptyStringMiddle = /\b(__p \+=) '' \+/g,
    36|       reEmptyStringTrailing = /(__e\(.*?\)|\b__t\)) \+\n'';/g;
    37|   /** Used to match regexp flags from their coerced string values */
    38|   var reFlags = /\w*$/;
    39|   /** Used to detect if a method is native */
    40|   var reNative = RegExp('^' +
    41|     (objectRef.valueOf + '')
    42|       .replace(/[.*+?^${}()|[\]\\]/g, '\\$&')
    43|       .replace(/valueOf|for [^\]]+/g, '.+?') + '$'
    44|   );
    45|   /**
    46|    * Used to match ES6 template delimiters
    47|    * http://people.mozilla.org/~jorendorff/es6-draft.html#sec-7.8.6
    48|    */
    49|   var reEsTemplate = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;
    50|   /** Used to match "interpolate" template delimiters */
    51|   var reInterpolate = /<%=([\s\S]+?)%>/g;
    52|   /** Used to ensure capturing order of template delimiters */
    53|   var reNoMatch = /($^)/;
    54|   /** Used to match HTML characters */
    55|   var reUnescapedHtml = /[&<>"']/g;
    56|   /** Used to match unescaped characters in compiled string literals */
    57|   var reUnescapedString = /['\n\r\t\u2028\u2029\\]/g;
    58|   /** Used to fix the JScript [[DontEnum]] bug */
    59|   var shadowed = [
    60|     'constructor', 'hasOwnProperty', 'isPrototypeOf', 'propertyIsEnumerable',
    61|     'toLocaleString', 'toString', 'valueOf'
    62|   ];
    63|   /** Used to make template sourceURLs easier to identify */
    64|   var templateCounter = 0;
    65|   /** Native method shortcuts */
    66|   var ceil = Math.ceil,
    67|       concat = arrayRef.concat,
    68|       floor = Math.floor,
    69|       getPrototypeOf = reNative.test(getPrototypeOf = Object.getPrototypeOf) && getPrototypeOf,

# --- HUNK 2: Lines 133-173 ---
   133|     function ctor() { this.x = 1; }
   134|     ctor.prototype = { 'valueOf': 1, 'y': 1 };
   135|     for (var prop in new ctor) { props.push(prop); }
   136|     for (prop in arguments) { nonEnumArgs = !prop; }
   137|     hasDontEnumBug = !/valueOf/.test(props);
   138|     hasEnumPrototype = ctor.propertyIsEnumerable('prototype');
   139|     iteratesOwnLast = props[0] != 'x';
   140|   }(1));
   141|   /** Detect if `arguments` objects are `Object` objects (all but Opera < 10.5) */
   142|   var argsAreObjects = arguments.constructor == Object;
   143|   /** Detect if `arguments` objects [[Class]] is unresolvable (Firefox < 4, IE < 9) */
   144|   var noArgsClass = !isArguments(arguments);
   145|   /**
   146|    * Detect lack of support for accessing string characters by index:
   147|    *
   148|    * IE < 8 can't access characters by index and IE 8 can only access
   149|    * characters by index on string literals.
   150|    */
   151|   var noCharByIndex = ('x'[0] + Object('x')[0]) != 'xx';
   152|   /**
   153|    * Detect if a DOM node's [[Class]] is unresolvable (IE < 9)
   154|    * and that the JS engine won't error when attempting to coerce an object to
   155|    * a string without a `toString` function.
   156|    */
   157|   try {
   158|     var noNodeClass = toString.call(document) == objectClass && !({ 'toString': 0 } + '');
   159|   } catch(e) { }
   160|   /** Used to identify object classifications that `_.clone` supports */
   161|   var cloneableClasses = {};
   162|   cloneableClasses[funcClass] = false;
   163|   cloneableClasses[argsClass] = cloneableClasses[arrayClass] =
   164|   cloneableClasses[boolClass] = cloneableClasses[dateClass] =
   165|   cloneableClasses[numberClass] = cloneableClasses[objectClass] =
   166|   cloneableClasses[regexpClass] = cloneableClasses[stringClass] = true;
   167|   /** Used to lookup a built-in constructor by [[Class]] */
   168|   var ctorByClass = {};
   169|   ctorByClass[arrayClass] = Array;
   170|   ctorByClass[boolClass] = Boolean;
   171|   ctorByClass[dateClass] = Date;
   172|   ctorByClass[objectClass] = Object;
   173|   ctorByClass[numberClass] = Number;

# --- HUNK 3: Lines 907-950 ---
   907|    * @param {Function} [callback] The function to customize assigning values.
   908|    * @param {Mixed} [thisArg] The `this` binding of `callback`.
   909|    * @returns {Object} Returns the destination object.
   910|    * @example
   911|    *
   912|    * _.assign({ 'name': 'moe' }, { 'age': 40 });
   913|    * // => { 'name': 'moe', 'age': 40 }
   914|    *
   915|    * var defaults = _.partialRight(_.assign, function(a, b) {
   916|    *   return typeof a == 'undefined' ? b : a;
   917|    * });
   918|    *
   919|    * var food = { 'name': 'apple' };
   920|    * defaults(food, { 'name': 'banana', 'type': 'fruit' });
   921|    * // => { 'name': 'apple', 'type': 'fruit' }
   922|    */
   923|   var assign = createIterator(defaultsIteratorOptions, {
   924|     'top':
   925|       defaultsIteratorOptions.top.replace(';',
   926|         ';\n' +
   927|         "if (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n" +
   928|         '  var callback = createCallback(args[--argsLength - 1], args[argsLength--], 2);\n' +
   929|         "} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n" +
   930|         '  callback = args[--argsLength];\n' +
   931|         '}'
   932|       ),
   933|     'loop': 'result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]'
   934|   });
   935|   /**
   936|    * Creates a clone of `value`. If `deep` is `true`, nested objects will also
   937|    * be cloned, otherwise they will be assigned by reference. If a `callback`
   938|    * function is passed, it will be executed to produce the cloned values. If
   939|    * `callback` returns `undefined`, cloning will be handled by the method instead.
   940|    * The `callback` is bound to `thisArg` and invoked with one argument; (value).
   941|    *
   942|    * @static
   943|    * @memberOf _
   944|    * @category Objects
   945|    * @param {Mixed} value The value to clone.
   946|    * @param {Boolean} [deep=false] A flag to indicate a deep clone.
   947|    * @param {Function} [callback] The function to customize cloning values.
   948|    * @param {Mixed} [thisArg] The `this` binding of `callback`.
   949|    * @param- {Array} [stackA=[]] Internally used to track traversed source objects.
   950|    * @param- {Array} [stackB=[]] Internally used to associate clones with source counterparts.

# --- HUNK 4: Lines 1354-1410 ---
  1354|       if (ctorA != ctorB && !(
  1355|             isFunction(ctorA) && ctorA instanceof ctorA &&
  1356|             isFunction(ctorB) && ctorB instanceof ctorB
  1357|           )) {
  1358|         return false;
  1359|       }
  1360|     }
  1361|     stackA || (stackA = []);
  1362|     stackB || (stackB = []);
  1363|     var length = stackA.length;
  1364|     while (length--) {
  1365|       if (stackA[length] == a) {
  1366|         return stackB[length] == b;
  1367|       }
  1368|     }
  1369|     var size = 0;
  1370|     result = true;
  1371|     stackA.push(a);
  1372|     stackB.push(b);
  1373|     if (isArr) {
  1374|       length = a.length;
  1375|       size = b.length;
  1376|       result = size == a.length;
  1377|       if (!result && !whereIndicator) {
  1378|         return result;
  1379|       }
  1380|       while (size--) {
  1381|         var index = length,
  1382|             value = b[size];
  1383|         if (whereIndicator) {
  1384|           while (index--) {
  1385|             if ((result = isEqual(a[index], value, callback, thisArg, stackA, stackB))) {
  1386|               break;
  1387|             }
  1388|           }
  1389|         } else if (!(result = isEqual(a[size], value, callback, thisArg, stackA, stackB))) {
  1390|           break;
  1391|         }
  1392|       }
  1393|       return result;
  1394|     }
  1395|     forIn(b, function(value, key, b) {
  1396|       if (hasOwnProperty.call(b, key)) {
  1397|         size++;
  1398|         return (result = hasOwnProperty.call(a, key) && isEqual(a[key], value, callback, thisArg, stackA, stackB));
  1399|       }
  1400|     });
  1401|     if (result && !whereIndicator) {
  1402|       forIn(a, function(value, key, a) {
  1403|         if (hasOwnProperty.call(a, key)) {
  1404|           return (result = --size > -1);
  1405|         }
  1406|       });
  1407|     }
  1408|     return result;
  1409|   }
  1410|   /**

# --- HUNK 5: Lines 1683-1726 ---
  1683|    * });
  1684|    * // => { 'fruits': ['apple', 'banana'], 'vegetables': ['beet', 'carrot] }
  1685|    */
  1686|   function merge(object, source, deepIndicator) {
  1687|     var args = arguments,
  1688|         index = 0,
  1689|         length = 2;
  1690|     if (!isObject(object)) {
  1691|       return object;
  1692|     }
  1693|     if (deepIndicator === indicatorObject) {
  1694|       var callback = args[3],
  1695|           stackA = args[4],
  1696|           stackB = args[5];
  1697|     } else {
  1698|       stackA = [];
  1699|       stackB = [];
  1700|       if (typeof deepIndicator != 'number') {
  1701|         length = args.length;
  1702|       }
  1703|       if (length > 3 && typeof args[length - 2] == 'function') {
  1704|         callback = createCallback(args[--length - 1], args[length--], 2);
  1705|       } else if (length > 2 && typeof args[length - 1] == 'function') {
  1706|         callback = args[--length];
  1707|       }
  1708|     }
  1709|     while (++index < length) {
  1710|       (isArray(args[index]) ? forEach : forOwn)(args[index], function(source, key) {
  1711|         var found,
  1712|             isArr,
  1713|             result = source,
  1714|             value = object[key];
  1715|         if (source && ((isArr = isArray(source)) || isPlainObject(source))) {
  1716|           var stackLength = stackA.length;
  1717|           while (stackLength--) {
  1718|             if ((found = stackA[stackLength] == source)) {
  1719|               value = stackB[stackLength];
  1720|               break;
  1721|             }
  1722|           }
  1723|           if (!found) {
  1724|             value = isArr
  1725|               ? (isArray(value) ? value : [])
  1726|               : (isPlainObject(value) ? value : {});

# --- HUNK 6: Lines 1877-1925 ---
  1877|    * @category Objects
  1878|    * @param {Object} object The object to inspect.
  1879|    * @returns {Array} Returns a new array of property values.
  1880|    * @example
  1881|    *
  1882|    * _.values({ 'one': 1, 'two': 2, 'three': 3 });
  1883|    * // => [1, 2, 3]
  1884|    */
  1885|   function values(object) {
  1886|     var index = -1,
  1887|         props = keys(object),
  1888|         length = props.length,
  1889|         result = Array(length);
  1890|     while (++index < length) {
  1891|       result[index] = object[props[index]];
  1892|     }
  1893|     return result;
  1894|   }
  1895|   /*--------------------------------------------------------------------------*/
  1896|   /**
  1897|    * Creates an array of elements from the specified indexes, or keys, of the
  1898|    * `collection`. Indexes may be specified as individual arguments or as arrays
  1899|    * of indexes.
  1900|    *
  1901|    * @static
  1902|    * @memberOf _
  1903|    * @category Collections
  1904|    * @param {Array|Object|String} collection The collection to iterate over.
  1905|    * @param {Array|Number|String} [index1, index2, ...] The indexes of
  1906|    *  `collection` to retrieve, either as individual arguments or arrays.
  1907|    * @returns {Array} Returns a new array of elements corresponding to the
  1908|    *  provided indexes.
  1909|    * @example
  1910|    *
  1911|    * _.at(['a', 'b', 'c', 'd', 'e'], [0, 2, 4]);
  1912|    * // => ['a', 'c', 'e']
  1913|    *
  1914|    * _.at(['moe', 'larry', 'curly'], 0, 2);
  1915|    * // => ['moe', 'curly']
  1916|    */
  1917|   function at(collection) {
  1918|     var index = -1,
  1919|         props = concat.apply(arrayRef, slice(arguments, 1)),
  1920|         length = props.length,
  1921|         result = Array(length);
  1922|     if (noCharByIndex && isString(collection)) {
  1923|       collection = collection.split('');
  1924|     }
  1925|     while(++index < length) {

# --- HUNK 7: Lines 3864-3906 ---
  3864|     return setTimeout(function() { func.apply(undefined, args); }, wait);
  3865|   }
  3866|   /**
  3867|    * Defers executing the `func` function until the current call stack has cleared.
  3868|    * Additional arguments will be passed to `func` when it is invoked.
  3869|    *
  3870|    * @static
  3871|    * @memberOf _
  3872|    * @category Functions
  3873|    * @param {Function} func The function to defer.
  3874|    * @param {Mixed} [arg1, arg2, ...] Arguments to invoke the function with.
  3875|    * @returns {Number} Returns the `setTimeout` timeout id.
  3876|    * @example
  3877|    *
  3878|    * _.defer(function() { alert('deferred'); });
  3879|    * // returns from the function before `alert` is called
  3880|    */
  3881|   function defer(func) {
  3882|     var args = slice(arguments, 1);
  3883|     return setTimeout(function() { func.apply(undefined, args); }, 1);
  3884|   }
  3885|   if (isV8 && freeModule && typeof setImmediate == 'function') {
  3886|     defer = bind(setImmediate, window);
  3887|   }
  3888|   /**
  3889|    * Creates a function that memoizes the result of `func`. If `resolver` is
  3890|    * passed, it will be used to determine the cache key for storing the result
  3891|    * based on the arguments passed to the memoized function. By default, the first
  3892|    * argument passed to the memoized function is used as the cache key. The `func`
  3893|    * is executed with the `this` binding of the memoized function.
  3894|    *
  3895|    * @static
  3896|    * @memberOf _
  3897|    * @category Functions
  3898|    * @param {Function} func The function to have its output memoized.
  3899|    * @param {Function} [resolver] A function used to resolve the cache key.
  3900|    * @returns {Function} Returns the new memoizing function.
  3901|    * @example
  3902|    *
  3903|    * var fibonacci = _.memoize(function(n) {
  3904|    *   return n < 2 ? n : fibonacci(n - 1) + fibonacci(n - 2);
  3905|    * });
  3906|    */

# --- HUNK 8: Lines 4325-4365 ---
  4325|       }
  4326|       index = offset + match.length;
  4327|       return match;
  4328|     });
  4329|     source += "';\n";
  4330|     var variable = options.variable,
  4331|         hasVariable = variable;
  4332|     if (!hasVariable) {
  4333|       variable = 'obj';
  4334|       source = 'with (' + variable + ') {\n' + source + '\n}\n';
  4335|     }
  4336|     source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source)
  4337|       .replace(reEmptyStringMiddle, '$1')
  4338|       .replace(reEmptyStringTrailing, '$1;');
  4339|     source = 'function(' + variable + ') {\n' +
  4340|       (hasVariable ? '' : variable + ' || (' + variable + ' = {});\n') +
  4341|       "var __t, __p = '', __e = _.escape" +
  4342|       (isEvaluating
  4343|         ? ', __j = Array.prototype.join;\n' +
  4344|           "function print() { __p += __j.call(arguments, '') }\n"
  4345|         : ';\n'
  4346|       ) +
  4347|       source +
  4348|       'return __p\n}';
  4349|     var sourceURL = '\n/*\n//@ sourceURL=' + (options.sourceURL || '/lodash/template/source[' + (templateCounter++) + ']') + '\n*/';
  4350|     try {
  4351|       var result = Function(importsKeys, 'return ' + source + sourceURL).apply(undefined, importsValues);
  4352|     } catch(e) {
  4353|       e.source = source;
  4354|       throw e;
  4355|     }
  4356|     if (data) {
  4357|       return result(data);
  4358|     }
  4359|     result.source = source;
  4360|     return result;
  4361|   }
  4362|   /**
  4363|    * Executes the `callback` function `n` times, returning an array of the results
  4364|    * of each `callback` execution. The `callback` is bound to `thisArg` and invoked
  4365|    * with one argument; (index).

# --- HUNK 9: Lines 4613-4653 ---
  4613|   lodash.take = first;
  4614|   lodash.head = first;
  4615|   forOwn(lodash, function(func, methodName) {
  4616|     if (!lodash.prototype[methodName]) {
  4617|       lodash.prototype[methodName]= function(callback, thisArg) {
  4618|         var result = func(this.__wrapped__, callback, thisArg);
  4619|         return callback == null || (thisArg && typeof callback != 'function')
  4620|           ? result
  4621|           : new lodash(result);
  4622|       };
  4623|     }
  4624|   });
  4625|   /*--------------------------------------------------------------------------*/
  4626|   /**
  4627|    * The semantic version number.
  4628|    *
  4629|    * @static
  4630|    * @memberOf _
  4631|    * @type String
  4632|    */
  4633|   lodash.VERSION = '1.0.1';
  4634|   lodash.prototype.toString = wrapperToString;
  4635|   lodash.prototype.value = wrapperValueOf;
  4636|   lodash.prototype.valueOf = wrapperValueOf;
  4637|   each(['join', 'pop', 'shift'], function(methodName) {
  4638|     var func = arrayRef[methodName];
  4639|     lodash.prototype[methodName] = function() {
  4640|       return func.apply(this.__wrapped__, arguments);
  4641|     };
  4642|   });
  4643|   each(['push', 'reverse', 'sort', 'unshift'], function(methodName) {
  4644|     var func = arrayRef[methodName];
  4645|     lodash.prototype[methodName] = function() {
  4646|       func.apply(this.__wrapped__, arguments);
  4647|       return this;
  4648|     };
  4649|   });
  4650|   each(['concat', 'slice', 'splice'], function(methodName) {
  4651|     var func = arrayRef[methodName];
  4652|     lodash.prototype[methodName] = function() {
  4653|       return new lodash(func.apply(this.__wrapped__, arguments));

# --- HUNK 10: Lines 4658-4688 ---
  4658|       var func = arrayRef[methodName],
  4659|           isSplice = methodName == 'splice';
  4660|       lodash.prototype[methodName] = function() {
  4661|         var value = this.__wrapped__,
  4662|             result = func.apply(value, arguments);
  4663|         if (value.length === 0) {
  4664|           delete value[0];
  4665|         }
  4666|         return isSplice ? new lodash(result) : result;
  4667|       };
  4668|     });
  4669|   }
  4670|   /*--------------------------------------------------------------------------*/
  4671|   if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {
  4672|     window._ = lodash;
  4673|     define(function() {
  4674|       return lodash;
  4675|     });
  4676|   }
  4677|   else if (freeExports) {
  4678|     if (freeModule) {
  4679|       (freeModule.exports = lodash)._ = lodash;
  4680|     }
  4681|     else {
  4682|       freeExports._ = lodash;
  4683|     }
  4684|   }
  4685|   else {
  4686|     window._ = lodash;
  4687|   }
  4688| }(this));


# ====================================================================
# FILE: dist/lodash.compat.min.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-42 ---
     1| /**
     2|  * @license
     3|  * Lo-Dash 1.0.1 (Custom Build) lodash.com/license
     4|  * Build: `lodash -o ./dist/lodash.compat.js`
     5|  * Underscore.js 1.4.4 underscorejs.org/LICENSE
     6|  */
     7| ;(function(n,t){function r(n){return n&&typeof n=="object"&&n.__wrapped__?n:this instanceof r?(this.__wrapped__=n,void 0):new r(n)}function e(n,t,r){t||(t=0);var e=n.length,u=e-t>=(r||at);if(u){var o={};for(r=t-1;++r<e;){var i=n[r]+"";(St.call(o,i)?o[i]:o[i]=[]).push(n[r])}}return function(r){if(u){var e=r+"";return St.call(o,e)&&-1<z(o[e],r)}return-1<z(n,r,t)}}function u(n){return n.charCodeAt(0)}function o(n,t){var r=n.b,e=t.b;if(n=n.a,t=t.a,n!==t){if(n>t||typeof n=="undefined")return 1;if(n<t||typeof t=="undefined")return-1
     8| }return r<e?-1:1}function i(n,t,r,e){function u(){var a=arguments,c=i?this:t;return o||(n=t[f]),r.length&&(a=a.length?(a=v(a),e?a.concat(r):r.concat(a)):r),this instanceof u?(s.prototype=n.prototype,c=new s,s.prototype=W,a=n.apply(c,a),x(a)?a:c):n.apply(c,a)}var o=w(n),i=!r,f=t;return i&&(r=t),o||(t=n),u}function f(n,t,r){if(n==W)return G;var e=typeof n;if("function"!=e){if("object"!=e)return function(t){return t[n]};var u=vr(n);return function(t){for(var r=u.length,e=X;r--&&(e=j(t[u[r]],n[u[r]],ft)););return e
     9| }}return typeof t!="undefined"?1===r?function(r){return n.call(t,r)}:2===r?function(r,e){return n.call(t,r,e)}:4===r?function(r,e,u,o){return n.call(t,r,e,u,o)}:function(r,e,u){return n.call(t,r,e,u)}:n}function a(){for(var n,t={e:tt,f:rt,g:Jt,i:Wt,j:Zt,k:jt,b:"l(n)",c:"",h:"",l:"",m:Q},r=0;n=arguments[r];r++)for(var e in n)t[e]=n[e];if(n=t.a,t.d=/^[^,]+/.exec(n)[0],r="var j,n="+t.d+",u=n;if(!n)return u;"+t.l+";",t.b?(r+="var o=n.length;j=-1;if("+t.b+"){",t.j&&(r+="if(m(n)){n=n.split('')}"),r+="while(++j<o){"+t.h+"}}else{"):t.i&&(r+="var o=n.length;j=-1;if(o&&k(n)){while(++j<o){j+='';"+t.h+"}}else{"),t.f&&(r+="var v=typeof n=='function';"),t.g&&t.m?(r+="var s=-1,t=r[typeof n]?p(n):[],o=t.length;while(++s<o){j=t[s];",t.f&&(r+="if(!(v&&j=='prototype')){"),r+=t.h+"",t.f&&(r+="}")):(r+="for(j in n){",(t.f||t.m)&&(r+="if(",t.f&&(r+="!(v&&j=='prototype')"),t.f&&t.m&&(r+="&&"),t.m&&(r+="i.call(n,j)"),r+="){"),r+=t.h+";",(t.f||t.m)&&(r+="}")),r+="}",t.e)for(r+="var g=n.constructor;",e=0;7>e;e++)r+="j='"+t.k[e]+"';if(","constructor"==t.k[e]&&(r+="!(g&&g.prototype===n)&&"),r+="i.call(n,j)){"+t.h+"}";
    10| return(t.b||t.i)&&(r+="}"),r+=t.c+";return u",Function("f,i,k,l,m,r,p","return function("+n+"){"+r+"}")(f,St,y,sr,A,ur,Ft)}function c(n){return"\\"+or[n]}function l(n){return gr[n]}function p(n){return typeof n.toString!="function"&&typeof(n+"")=="string"}function s(){}function v(n,t,r){t||(t=0),typeof r=="undefined"&&(r=n?n.length:0);var e=-1;r=r-t||0;for(var u=Array(0>r?0:r);++e<r;)u[e]=n[t+e];return u}function g(n){return yr[n]}function y(n){return kt.call(n)==Bt}function h(n){var t=X;if(!n||typeof n!="object"||y(n))return t;
    11| var r=n.constructor;return!w(r)&&(!nr||!p(n))||r instanceof r?et?(lr(n,function(n,r,e){return t=!St.call(e,r),X}),t===X):(lr(n,function(n,r){t=r}),t===X||St.call(n,t)):t}function m(n){var t=[];return pr(n,function(n,r){t.push(r)}),t}function d(n,r,e,u,o,i){var a=n;if(typeof r=="function"&&(u=e,e=r,r=X),typeof e=="function"){e=typeof u=="undefined"?e:f(e,u,1);var a=e(a),c=typeof a!="undefined";c||(a=n)}if(u=x(a)){var l=kt.call(a);if(!rr[l]||nr&&p(a))return a;var s=sr(a)}if(!u||!r)return u&&!c?s?v(a):hr({},a):a;
    12| switch(u=er[l],l){case Pt:case zt:return c?a:new u(+a);case Ct:case Ut:return c?a:new u(a);case Lt:return c?a:u(a.source,gt.exec(a))}for(o||(o=[]),i||(i=[]),l=o.length;l--;)if(o[l]==n)return i[l];return c||(a=s?u(a.length):{},s&&(St.call(n,"index")&&(a.index=n.index),St.call(n,"input")&&(a.input=n.input))),o.push(n),i.push(a),(s?$:pr)(c?a:n,function(n,u){a[u]=d(n,r,e,t,o,i)}),a}function _(n){var t=[];return lr(n,function(n,r){w(n)&&t.push(r)}),t.sort()}function b(n){for(var t=-1,r=vr(n),e=r.length,u={};++t<e;){var o=r[t];
    13| u[n[o]]=o}return u}function j(n,t,r,e,u,o){var i=r===ft;if(r&&!i){r=typeof e=="undefined"?r:f(r,e,2);var a=r(n,t);if(typeof a!="undefined")return!!a}if(n===t)return 0!==n||1/n==1/t;var c=typeof n,l=typeof t;if(n===n&&(!n||"function"!=c&&"object"!=c)&&(!t||"function"!=l&&"object"!=l))return X;if(n==W||t==W)return n===t;if(l=kt.call(n),c=kt.call(t),l==Bt&&(l=Kt),c==Bt&&(c=Kt),l!=c)return X;switch(l){case Pt:case zt:return+n==+t;case Ct:return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case Lt:case Ut:return n==t+""
    14| }if(c=l==Mt,!c){if(n.__wrapped__||t.__wrapped__)return j(n.__wrapped__||n,t.__wrapped__||t,r,e,u,o);if(l!=Kt||nr&&(p(n)||p(t)))return X;var l=!Xt&&y(n)?Object:n.constructor,s=!Xt&&y(t)?Object:t.constructor;if(l!=s&&(!w(l)||!(l instanceof l&&w(s)&&s instanceof s)))return X}for(u||(u=[]),o||(o=[]),l=u.length;l--;)if(u[l]==n)return o[l]==t;var v=0,a=Q;if(u.push(n),o.push(t),c){if(l=n.length,v=t.length,a=v==n.length,!a&&!i)return a;for(;v--;)if(c=l,s=t[v],i)for(;c--&&!(a=j(n[c],s,r,e,u,o)););else if(!(a=j(n[v],s,r,e,u,o)))break;
    15| return a}return lr(t,function(t,i,f){return St.call(f,i)?(v++,a=St.call(n,i)&&j(n[i],t,r,e,u,o)):void 0}),a&&!i&&lr(n,function(n,t,r){return St.call(r,t)?a=-1<--v:void 0}),a}function w(n){return typeof n=="function"}function x(n){return n?ur[typeof n]:X}function O(n){return typeof n=="number"||kt.call(n)==Ct}function A(n){return typeof n=="string"||kt.call(n)==Ut}function S(n,t,r){var e=arguments,u=0,o=2;if(!x(n))return n;if(r===ft)var i=e[3],a=e[4],c=e[5];else a=[],c=[],typeof r!="number"&&(o=e.length),3<o&&"function"==typeof e[o-2]?i=f(e[--o-1],e[o--],2):2<o&&"function"==typeof e[o-1]&&(i=e[--o]);
    16| for(;++u<o;)(sr(e[u])?$:pr)(e[u],function(t,r){var e,u,o=t,f=n[r];if(t&&((u=sr(t))||dr(t))){for(o=a.length;o--;)if(e=a[o]==t){f=c[o];break}e||(f=u?sr(f)?f:[]:dr(f)?f:{},i&&(o=i(f,t),typeof o!="undefined"&&(f=o)),a.push(t),c.push(f),i||(f=S(f,t,ft,i,a,c)))}else i&&(o=i(f,t),typeof o=="undefined"&&(o=t)),typeof o!="undefined"&&(f=o);n[r]=f});return n}function E(n){for(var t=-1,r=vr(n),e=r.length,u=Array(e);++t<e;)u[t]=n[r[t]];return u}function k(n,t,r){var e=-1,u=n?n.length:0,o=X;return r=(0>r?qt(0,u+r):r)||0,typeof u=="number"?o=-1<(A(n)?n.indexOf(t,r):z(n,t,r)):cr(n,function(n){return++e<r?void 0:!(o=n===t)
    17| }),o}function I(n,t,r){var e=Q;if(t=f(t,r),sr(n)){r=-1;for(var u=n.length;++r<u&&(e=!!t(n[r],r,n)););}else cr(n,function(n,r,u){return e=!!t(n,r,u)});return e}function N(n,t,r){var e=[];if(t=f(t,r),sr(n)){r=-1;for(var u=n.length;++r<u;){var o=n[r];t(o,r,n)&&e.push(o)}}else cr(n,function(n,r,u){t(n,r,u)&&e.push(n)});return e}function R(n,t,r){var e;return t=f(t,r),$(n,function(n,r,u){return t(n,r,u)?(e=n,X):void 0}),e}function $(n,t,r){if(t&&typeof r=="undefined"&&sr(n)){r=-1;for(var e=n.length;++r<e&&t(n[r],r,n)!==X;);}else cr(n,t,r);
    18| return n}function F(n,t,r){var e=-1,u=n?n.length:0,o=Array(typeof u=="number"?u:0);if(t=f(t,r),sr(n))for(;++e<u;)o[e]=t(n[e],e,n);else cr(n,function(n,r,u){o[++e]=t(n,r,u)});return o}function q(n,t,r){var e=-1/0,o=e;if(!t&&sr(n)){r=-1;for(var i=n.length;++r<i;){var a=n[r];a>o&&(o=a)}}else t=!t&&A(n)?u:f(t,r),cr(n,function(n,r,u){r=t(n,r,u),r>e&&(e=r,o=n)});return o}function D(n,t,r,e){var u=3>arguments.length;if(t=f(t,e,4),sr(n)){var o=-1,i=n.length;for(u&&(r=n[++o]);++o<i;)r=t(r,n[o],o,n)}else cr(n,function(n,e,o){r=u?(u=X,n):t(r,n,e,o)
    19| });return r}function T(n,t,r,e){var u=n,o=n?n.length:0,i=3>arguments.length;if(typeof o!="number")var a=vr(n),o=a.length;else Zt&&A(n)&&(u=n.split(""));return t=f(t,e,4),$(n,function(n,e,f){e=a?a[--o]:--o,r=i?(i=X,u[e]):t(r,u[e],e,f)}),r}function B(n,t,r){var e;if(t=f(t,r),sr(n)){r=-1;for(var u=n.length;++r<u&&!(e=t(n[r],r,n)););}else cr(n,function(n,r,u){return!(e=t(n,r,u))});return!!e}function M(n,t,r){if(n){var e=0,u=n.length;if(typeof t!="number"&&t!=W){var o=-1;for(t=f(t,r);++o<u&&t(n[o],o,n);)e++
    20| }else if(e=t,e==W||r)return n[0];return v(n,0,Dt(qt(0,e),u))}}function P(n,t){for(var r=-1,e=n?n.length:0,u=[];++r<e;){var o=n[r];sr(o)?Et.apply(u,t?o:P(o)):u.push(o)}return u}function z(n,t,r){var e=-1,u=n?n.length:0;if(typeof r=="number")e=(0>r?qt(0,u+r):r||0)-1;else if(r)return e=K(n,t),n[e]===t?e:-1;for(;++e<u;)if(n[e]===t)return e;return-1}function C(n,t,r){if(typeof t!="number"&&t!=W){var e=0,u=-1,o=n?n.length:0;for(t=f(t,r);++u<o&&t(n[u],u,n);)e++}else e=t==W||r?1:qt(0,t);return v(n,e)}function K(n,t,r,e){var u=0,o=n?n.length:u;
    21| for(r=r?f(r,e,1):G,t=r(t);u<o;)e=u+o>>>1,r(n[e])<t?u=e+1:o=e;return u}function L(n,t,r,e){var u=-1,o=n?n.length:0,i=[],a=i;typeof t=="function"&&(e=r,r=t,t=X);var c=!t&&75<=o;if(c)var l={};for(r&&(a=[],r=f(r,e));++u<o;){e=n[u];var p=r?r(e,u,n):e;if(c)var s=p+"",s=St.call(l,s)?!(a=l[s]):a=l[s]=[];(t?!u||a[a.length-1]!==p:s||0>z(a,p))&&((r||c)&&a.push(p),i.push(e))}return i}function U(n,t){return Ht||It&&2<arguments.length?It.call.apply(It,arguments):i(n,t,v(arguments,2))}function V(n){var r=v(arguments,1);
    22| return setTimeout(function(){n.apply(t,r)},1)}function G(n){return n}function H(n){$(_(n),function(t){var e=r[t]=n[t];r.prototype[t]=function(){var n=[this.__wrapped__];return Et.apply(n,arguments),new r(e.apply(r,n))}})}function J(){return this.__wrapped__}var Q=!0,W=null,X=!1,Y=typeof exports=="object"&&exports,Z=typeof module=="object"&&module&&module.exports==Y&&module,nt=typeof global=="object"&&global;nt.global===nt&&(n=nt);var tt,rt,et,ut=[],ot={},it=0,ft=ot,at=30,ct=n._,lt=/&(?:amp|lt|gt|quot|#39);/g,pt=/\b__p\+='';/g,st=/\b(__p\+=)''\+/g,vt=/(__e\(.*?\)|\b__t\))\+'';/g,gt=/\w*$/,yt=RegExp("^"+(ot.valueOf+"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,mt=/<%=([\s\S]+?)%>/g,dt=/($^)/,_t=/[&<>"']/g,bt=/['\n\r\t\u2028\u2029\\]/g,jt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),wt=Math.ceil,xt=ut.concat,Ot=Math.floor,At=yt.test(At=Object.getPrototypeOf)&&At,St=ot.hasOwnProperty,Et=ut.push,kt=ot.toString,It=yt.test(It=v.bind)&&It,Nt=yt.test(Nt=Array.isArray)&&Nt,Rt=n.isFinite,$t=n.isNaN,Ft=yt.test(Ft=Object.keys)&&Ft,qt=Math.max,Dt=Math.min,Tt=Math.random,Bt="[object Arguments]",Mt="[object Array]",Pt="[object Boolean]",zt="[object Date]",Ct="[object Number]",Kt="[object Object]",Lt="[object RegExp]",Ut="[object String]",Vt=!!n.attachEvent,Gt=It&&!/\n|true/.test(It+Vt),Ht=It&&!Gt,Jt=Ft&&(Vt||Gt),Qt=(Qt={0:1,length:1},ut.splice.call(Qt,0,1),Qt[0]),Wt=Q;
    23| (function(){function n(){this.x=1}var t=[];n.prototype={valueOf:1,y:1};for(var r in new n)t.push(r);for(r in arguments)Wt=!r;tt=!/valueOf/.test(t),rt=n.propertyIsEnumerable("prototype"),et="x"!=t[0]})(1);var Xt=arguments.constructor==Object,Yt=!y(arguments),Zt="xx"!="x"[0]+Object("x")[0];try{var nr=kt.call(document)==Kt&&!({toString:0}+"")}catch(tr){}var rr={"[object Function]":X};rr[Bt]=rr[Mt]=rr[Pt]=rr[zt]=rr[Ct]=rr[Kt]=rr[Lt]=rr[Ut]=Q;var er={};er[Mt]=Array,er[Pt]=Boolean,er[zt]=Date,er[Kt]=Object,er[Ct]=Number,er[Lt]=RegExp,er[Ut]=String;
    24| var ur={"boolean":X,"function":Q,object:Q,number:X,string:X,undefined:X},or={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};r.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:mt,variable:"",imports:{_:r}};var ir={a:"q,w,h",l:"var a=arguments,b=0,c=typeof h=='number'?2:a.length;while(++b<c){n=a[b];if(n&&r[typeof n]){",h:"if(typeof u[j]=='undefined')u[j]=n[j]",c:"}}"},fr={a:"e,d,x",l:"d=d&&typeof x=='undefined'?d:f(d,x)",b:"typeof o=='number'",h:"if(d(n[j],j,e)===false)return u"},ar={l:"if(!r[typeof n])return u;"+fr.l,b:X},cr=a(fr);
    25| Yt&&(y=function(n){return n?St.call(n,"callee"):X});var lr=a(fr,ar,{m:X}),pr=a(fr,ar),sr=Nt||function(n){return Xt&&n instanceof Array||kt.call(n)==Mt},vr=Ft?function(n){return x(n)?rt&&typeof n=="function"||Wt&&n.length&&y(n)?m(n):Ft(n):[]}:m,gr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},yr=b(gr),hr=a(ir,{l:ir.l.replace(";",";if(c>3&&typeof a[c-2]=='function'){var d=f(a[--c-1],a[c--],2);}else if(c>2&&typeof a[c-1]=='function'){d=a[--c];}"),h:"u[j]=d?d(u[j],n[j]):n[j]"}),mr=a(ir);
    26| w(/x/)&&(w=function(n){return n instanceof Function||"[object Function]"==kt.call(n)});var dr=At?function(n){if(!n||typeof n!="object")return X;var t=n.valueOf,r=typeof t=="function"&&(r=At(t))&&At(r);return r?n==r||At(n)==r&&!y(n):h(n)}:h,_r=F,br=N;Gt&&Z&&typeof setImmediate=="function"&&(V=U(setImmediate,n)),r.after=function(n,t){return 1>n?t():function(){return 1>--n?t.apply(this,arguments):void 0}},r.assign=hr,r.at=function(n){var t=-1,r=xt.apply(ut,v(arguments,1)),e=r.length,u=Array(e);for(Zt&&A(n)&&(n=n.split(""));++t<e;)u[t]=n[r[t]];
    27| return u},r.bind=U,r.bindAll=function(n){for(var t=xt.apply(ut,arguments),r=1<t.length?0:(t=_(n),-1),e=t.length;++r<e;){var u=t[r];n[u]=U(n[u],n)}return n},r.bindKey=function(n,t){return i(n,t,v(arguments,2))},r.compact=function(n){for(var t=-1,r=n?n.length:0,e=[];++t<r;){var u=n[t];u&&e.push(u)}return e},r.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length;r--;)t=[n[r].apply(this,t)];return t[0]}},r.countBy=function(n,t,r){var e={};return t=f(t,r),$(n,function(n,r,u){r=t(n,r,u)+"",St.call(e,r)?e[r]++:e[r]=1
    28| }),e},r.debounce=function(n,t,r){function e(){f=W,r||(o=n.apply(i,u))}var u,o,i,f;return function(){var a=r&&!f;return u=arguments,i=this,clearTimeout(f),f=setTimeout(e,t),a&&(o=n.apply(i,u)),o}},r.defaults=mr,r.defer=V,r.delay=function(n,r){var e=v(arguments,2);return setTimeout(function(){n.apply(t,e)},r)},r.difference=function(n){for(var t=-1,r=n?n.length:0,u=xt.apply(ut,arguments),u=e(u,r),o=[];++t<r;){var i=n[t];u(i)||o.push(i)}return o},r.filter=N,r.flatten=P,r.forEach=$,r.forIn=lr,r.forOwn=pr,r.functions=_,r.groupBy=function(n,t,r){var e={};
    29| return t=f(t,r),$(n,function(n,r,u){r=t(n,r,u)+"",(St.call(e,r)?e[r]:e[r]=[]).push(n)}),e},r.initial=function(n,t,r){if(!n)return[];var e=0,u=n.length;if(typeof t!="number"&&t!=W){var o=u;for(t=f(t,r);o--&&t(n[o],o,n);)e++}else e=t==W||r?1:t||e;return v(n,0,Dt(qt(0,u-e),u))},r.intersection=function(n){var t=arguments,r=t.length,u={0:{}},o=-1,i=n?n.length:0,f=100<=i,a=[],c=a;n:for(;++o<i;){var l=n[o];if(f)var p=l+"",p=St.call(u[0],p)?!(c=u[0][p]):c=u[0][p]=[];if(p||0>z(c,l)){f&&c.push(l);for(var s=r;--s;)if(!(u[s]||(u[s]=e(t[s],0,100)))(l))continue n;
    30| a.push(l)}}return a},r.invert=b,r.invoke=function(n,t){var r=v(arguments,2),e=-1,u=typeof t=="function",o=n?n.length:0,i=Array(typeof o=="number"?o:0);return $(n,function(n){i[++e]=(u?t:n[t]).apply(n,r)}),i},r.keys=vr,r.map=F,r.max=q,r.memoize=function(n,t){var r={};return function(){var e=(t?t.apply(this,arguments):arguments[0])+"";return St.call(r,e)?r[e]:r[e]=n.apply(this,arguments)}},r.merge=S,r.min=function(n,t,r){var e=1/0,o=e;if(!t&&sr(n)){r=-1;for(var i=n.length;++r<i;){var a=n[r];a<o&&(o=a)
    31| }}else t=!t&&A(n)?u:f(t,r),cr(n,function(n,r,u){r=t(n,r,u),r<e&&(e=r,o=n)});return o},r.object=function(n,t){for(var r=-1,e=n?n.length:0,u={};++r<e;){var o=n[r];t?u[o]=t[r]:u[o[0]]=o[1]}return u},r.omit=function(n,t,r){var e=typeof t=="function",u={};if(e)t=f(t,r);else var o=xt.apply(ut,arguments);return lr(n,function(n,r,i){(e?!t(n,r,i):0>z(o,r,1))&&(u[r]=n)}),u},r.once=function(n){var t,r;return function(){return t?r:(t=Q,r=n.apply(this,arguments),n=W,r)}},r.pairs=function(n){for(var t=-1,r=vr(n),e=r.length,u=Array(e);++t<e;){var o=r[t];
    32| u[t]=[o,n[o]]}return u},r.partial=function(n){return i(n,v(arguments,1))},r.partialRight=function(n){return i(n,v(arguments,1),W,ft)},r.pick=function(n,t,r){var e={};if(typeof t!="function")for(var u=0,o=xt.apply(ut,arguments),i=x(n)?o.length:0;++u<i;){var a=o[u];a in n&&(e[a]=n[a])}else t=f(t,r),lr(n,function(n,r,u){t(n,r,u)&&(e[r]=n)});return e},r.pluck=_r,r.range=function(n,t,r){n=+n||0,r=+r||1,t==W&&(t=n,n=0);var e=-1;t=qt(0,wt((t-n)/r));for(var u=Array(t);++e<t;)u[e]=n,n+=r;return u},r.reject=function(n,t,r){return t=f(t,r),N(n,function(n,r,e){return!t(n,r,e)
    33| })},r.rest=C,r.shuffle=function(n){var t=-1,r=n?n.length:0,e=Array(typeof r=="number"?r:0);return $(n,function(n){var r=Ot(Tt()*(++t+1));e[t]=e[r],e[r]=n}),e},r.sortBy=function(n,t,r){var e=-1,u=n?n.length:0,i=Array(typeof u=="number"?u:0);for(t=f(t,r),$(n,function(n,r,u){i[++e]={a:t(n,r,u),b:e,c:n}}),u=i.length,i.sort(o);u--;)i[u]=i[u].c;return i},r.tap=function(n,t){return t(n),n},r.throttle=function(n,t){function r(){f=new Date,i=W,u=n.apply(o,e)}var e,u,o,i,f=0;return function(){var a=new Date,c=t-(a-f);
    34| return e=arguments,o=this,0<c?i||(i=setTimeout(r,c)):(clearTimeout(i),i=W,f=a,u=n.apply(o,e)),u}},r.times=function(n,t,r){n=+n||0;for(var e=-1,u=Array(n);++e<n;)u[e]=t.call(r,e);return u},r.toArray=function(n){return n&&typeof n.length=="number"?Zt&&A(n)?n.split(""):v(n):E(n)},r.union=function(){return L(xt.apply(ut,arguments))},r.uniq=L,r.values=E,r.where=br,r.without=function(n){for(var t=-1,r=n?n.length:0,u=e(arguments,1),o=[];++t<r;){var i=n[t];u(i)||o.push(i)}return o},r.wrap=function(n,t){return function(){var r=[n];
    35| return Et.apply(r,arguments),t.apply(this,r)}},r.zip=function(n){for(var t=-1,r=n?q(_r(arguments,"length")):0,e=Array(r);++t<r;)e[t]=_r(arguments,t);return e},r.collect=F,r.drop=C,r.each=$,r.extend=hr,r.methods=_,r.select=N,r.tail=C,r.unique=L,H(r),r.clone=d,r.cloneDeep=function(n,t,r){return d(n,Q,t,r)},r.contains=k,r.escape=function(n){return n==W?"":(n+"").replace(_t,l)},r.every=I,r.find=R,r.has=function(n,t){return n?St.call(n,t):X},r.identity=G,r.indexOf=z,r.isArguments=y,r.isArray=sr,r.isBoolean=function(n){return n===Q||n===X||kt.call(n)==Pt
    36| },r.isDate=function(n){return n instanceof Date||kt.call(n)==zt},r.isElement=function(n){return n?1===n.nodeType:X},r.isEmpty=function(n){var t=Q;if(!n)return t;var r=kt.call(n),e=n.length;return r==Mt||r==Ut||r==Bt||Yt&&y(n)||r==Kt&&typeof e=="number"&&w(n.splice)?!e:(pr(n,function(){return t=X}),t)},r.isEqual=j,r.isFinite=function(n){return Rt(n)&&!$t(parseFloat(n))},r.isFunction=w,r.isNaN=function(n){return O(n)&&n!=+n},r.isNull=function(n){return n===W},r.isNumber=O,r.isObject=x,r.isPlainObject=dr,r.isRegExp=function(n){return n instanceof RegExp||kt.call(n)==Lt
    37| },r.isString=A,r.isUndefined=function(n){return typeof n=="undefined"},r.lastIndexOf=function(n,t,r){var e=n?n.length:0;for(typeof r=="number"&&(e=(0>r?qt(0,e+r):Dt(r,e-1))+1);e--;)if(n[e]===t)return e;return-1},r.mixin=H,r.noConflict=function(){return n._=ct,this},r.random=function(n,t){return n==W&&t==W&&(t=1),n=+n||0,t==W&&(t=n,n=0),n+Ot(Tt()*((+t||0)-n+1))},r.reduce=D,r.reduceRight=T,r.result=function(n,r){var e=n?n[r]:t;return w(e)?n[r]():e},r.size=function(n){var t=n?n.length:0;return typeof t=="number"?t:vr(n).length
    38| },r.some=B,r.sortedIndex=K,r.template=function(n,e,u){var o=r.templateSettings;n||(n=""),u=mr({},u,o);var i,f=mr({},u.imports,o.imports),o=vr(f),f=E(f),a=0,l=u.interpolate||dt,p="__p+='";n.replace(RegExp((u.escape||dt).source+"|"+l.source+"|"+(l===mt?ht:dt).source+"|"+(u.evaluate||dt).source+"|$","g"),function(t,r,e,u,o,f){return e||(e=u),p+=n.slice(a,f).replace(bt,c),r&&(p+="'+__e("+r+")+'"),o&&(i=Q,p+="';"+o+";__p+='"),e&&(p+="'+((__t=("+e+"))==null?'':__t)+'"),a=f+t.length,t}),p+="';\n",l=u=u.variable,l||(u="obj",p="with("+u+"){"+p+"}"),p=(i?p.replace(pt,""):p).replace(st,"$1").replace(vt,"$1;"),p="function("+u+"){"+(l?"":u+"||("+u+"={});")+"var __t,__p='',__e=_.escape"+(i?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+p+"return __p}";
    39| try{var s=Function(o,"return "+p).apply(t,f)}catch(v){throw v.source=p,v}return e?s(e):(s.source=p,s)},r.unescape=function(n){return n==W?"":(n+"").replace(lt,g)},r.uniqueId=function(n){var t=++it;return(n==W?"":n+"")+t},r.all=I,r.any=B,r.detect=R,r.foldl=D,r.foldr=T,r.include=k,r.inject=D,pr(r,function(n,t){r.prototype[t]||(r.prototype[t]=function(){var t=[this.__wrapped__];return Et.apply(t,arguments),n.apply(r,t)})}),r.first=M,r.last=function(n,t,r){if(n){var e=0,u=n.length;if(typeof t!="number"&&t!=W){var o=u;
    40| for(t=f(t,r);o--&&t(n[o],o,n);)e++}else if(e=t,e==W||r)return n[u-1];return v(n,qt(0,u-e))}},r.take=M,r.head=M,pr(r,function(n,t){r.prototype[t]||(r.prototype[t]=function(t,e){var u=n(this.__wrapped__,t,e);return t==W||e&&typeof t!="function"?u:new r(u)})}),r.VERSION="1.0.1",r.prototype.toString=function(){return this.__wrapped__+""},r.prototype.value=J,r.prototype.valueOf=J,cr(["join","pop","shift"],function(n){var t=ut[n];r.prototype[n]=function(){return t.apply(this.__wrapped__,arguments)}}),cr(["push","reverse","sort","unshift"],function(n){var t=ut[n];
    41| r.prototype[n]=function(){return t.apply(this.__wrapped__,arguments),this}}),cr(["concat","slice","splice"],function(n){var t=ut[n];r.prototype[n]=function(){return new r(t.apply(this.__wrapped__,arguments))}}),Qt&&cr(["pop","shift","splice"],function(n){var t=ut[n],e="splice"==n;r.prototype[n]=function(){var n=this.__wrapped__,u=t.apply(n,arguments);return 0===n.length&&delete n[0],e?new r(u):u}}),typeof define=="function"&&typeof define.amd=="object"&&define.amd?(n._=r,define(function(){return r
    42| })):Y?Z?(Z.exports=r)._=r:Y._=r:n._=r})(this);


# ====================================================================
# FILE: dist/lodash.js
# Total hunks: 11
# ====================================================================
# --- HUNK 1: Lines 1-69 ---
     1| /**
     2|  * @license
     3|  * Lo-Dash 1.0.1 (Custom Build) <http://lodash.com/>
     4|  * Build: `lodash modern -o ./dist/lodash.js`
     5|  * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
     6|  * Based on Underscore.js 1.4.4 <http://underscorejs.org/>
     7|  * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud Inc.
     8|  * Available under MIT license <http://lodash.com/license>
     9|  */
    10| ;(function(window, undefined) {
    11|   /** Detect free variable `exports` */
    12|   var freeExports = typeof exports == 'object' && exports;
    13|   /** Detect free variable `module` */
    14|   var freeModule = typeof module == 'object' && module && module.exports == freeExports && module;
    15|   /** Detect free variable `global` and use it as `window` */
    16|   var freeGlobal = typeof global == 'object' && global;
    17|   if (freeGlobal.global === freeGlobal) {
    18|     window = freeGlobal;
    19|   }
    20|   /** Used for array and object method references */
    21|   var arrayRef = [],
    22|       objectRef = {};
    23|   /** Used to generate unique IDs */
    24|   var idCounter = 0;
    25|   /** Used internally to indicate various things */
    26|   var indicatorObject = objectRef;
    27|   /** Used by `cachedContains` as the default size when optimizations are enabled for large arrays */
    28|   var largeArraySize = 30;
    29|   /** Used to restore the original `_` reference in `noConflict` */
    30|   var oldDash = window._;
    31|   /** Used to match HTML entities */
    32|   var reEscapedHtml = /&(?:amp|lt|gt|quot|#39);/g;
    33|   /** Used to match empty string literals in compiled template source */
    34|   var reEmptyStringLeading = /\b__p \+= '';/g,
    35|       reEmptyStringMiddle = /\b(__p \+=) '' \+/g,
    36|       reEmptyStringTrailing = /(__e\(.*?\)|\b__t\)) \+\n'';/g;
    37|   /** Used to match regexp flags from their coerced string values */
    38|   var reFlags = /\w*$/;
    39|   /** Used to detect if a method is native */
    40|   var reNative = RegExp('^' +
    41|     (objectRef.valueOf + '')
    42|       .replace(/[.*+?^${}()|[\]\\]/g, '\\$&')
    43|       .replace(/valueOf|for [^\]]+/g, '.+?') + '$'
    44|   );
    45|   /**
    46|    * Used to match ES6 template delimiters
    47|    * http://people.mozilla.org/~jorendorff/es6-draft.html#sec-7.8.6
    48|    */
    49|   var reEsTemplate = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;
    50|   /** Used to match "interpolate" template delimiters */
    51|   var reInterpolate = /<%=([\s\S]+?)%>/g;
    52|   /** Used to ensure capturing order of template delimiters */
    53|   var reNoMatch = /($^)/;
    54|   /** Used to match HTML characters */
    55|   var reUnescapedHtml = /[&<>"']/g;
    56|   /** Used to match unescaped characters in compiled string literals */
    57|   var reUnescapedString = /['\n\r\t\u2028\u2029\\]/g;
    58|   /** Used to make template sourceURLs easier to identify */
    59|   var templateCounter = 0;
    60|   /** Native method shortcuts */
    61|   var ceil = Math.ceil,
    62|       concat = arrayRef.concat,
    63|       floor = Math.floor,
    64|       getPrototypeOf = reNative.test(getPrototypeOf = Object.getPrototypeOf) && getPrototypeOf,
    65|       hasOwnProperty = objectRef.hasOwnProperty,
    66|       push = arrayRef.push,
    67|       toString = objectRef.toString;
    68|   /* Native method shortcuts for methods with the same name as other `lodash` methods */
    69|   var nativeBind = reNative.test(nativeBind = slice.bind) && nativeBind,

# --- HUNK 2: Lines 235-285 ---
   235|    */
   236|   var iteratorTemplate = function(obj) {
   237|     var __p = 'var index, iterable = ' +
   238|     (obj.firstArg ) +
   239|     ', result = iterable;\nif (!iterable) return result;\n' +
   240|     (obj.top ) +
   241|     ';\n';
   242|      if (obj.arrays) {
   243|     __p += 'var length = iterable.length; index = -1;\nif (' +
   244|     (obj.arrays ) +
   245|     ') {\n  while (++index < length) {\n    ' +
   246|     (obj.loop ) +
   247|     '\n  }\n}\nelse {  ';
   248|      } ;
   249|      if (obj.isKeysFast && obj.useHas) {
   250|     __p += '\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] ? nativeKeys(iterable) : [],\n      length = ownProps.length;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n    ' +
   251|     (obj.loop ) +
   252|     '\n  }  ';
   253|      } else {
   254|     __p += '\n  for (index in iterable) {';
   255|         if (obj.useHas) {
   256|     __p += '\n    if (';
   257|           if (obj.useHas) {
   258|     __p += 'hasOwnProperty.call(iterable, index)';
   259|      }    ;
   260|     __p += ') {    ';
   261|      } ;
   262|     __p += 
   263|     (obj.loop ) +
   264|     ';    ';
   265|      if (obj.useHas) {
   266|     __p += '\n    }';
   267|      } ;
   268|     __p += '\n  }  ';
   269|      } ;
   270|      if (obj.arrays) {
   271|     __p += '\n}';
   272|      } ;
   273|     __p += 
   274|     (obj.bottom ) +
   275|     ';\nreturn result';
   276|     return __p
   277|   };
   278|   /** Reusable iterator options for `assign` and `defaults` */
   279|   var defaultsIteratorOptions = {
   280|     'args': 'object, source, guard',
   281|     'top':
   282|       'var args = arguments,\n' +
   283|       '    argsIndex = 0,\n' +
   284|       "    argsLength = typeof guard == 'number' ? 2 : args.length;\n" +
   285|       'while (++argsIndex < argsLength) {\n' +

# --- HUNK 3: Lines 783-826 ---
   783|    * @param {Function} [callback] The function to customize assigning values.
   784|    * @param {Mixed} [thisArg] The `this` binding of `callback`.
   785|    * @returns {Object} Returns the destination object.
   786|    * @example
   787|    *
   788|    * _.assign({ 'name': 'moe' }, { 'age': 40 });
   789|    * // => { 'name': 'moe', 'age': 40 }
   790|    *
   791|    * var defaults = _.partialRight(_.assign, function(a, b) {
   792|    *   return typeof a == 'undefined' ? b : a;
   793|    * });
   794|    *
   795|    * var food = { 'name': 'apple' };
   796|    * defaults(food, { 'name': 'banana', 'type': 'fruit' });
   797|    * // => { 'name': 'apple', 'type': 'fruit' }
   798|    */
   799|   var assign = createIterator(defaultsIteratorOptions, {
   800|     'top':
   801|       defaultsIteratorOptions.top.replace(';',
   802|         ';\n' +
   803|         "if (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n" +
   804|         '  var callback = createCallback(args[--argsLength - 1], args[argsLength--], 2);\n' +
   805|         "} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n" +
   806|         '  callback = args[--argsLength];\n' +
   807|         '}'
   808|       ),
   809|     'loop': 'result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]'
   810|   });
   811|   /**
   812|    * Creates a clone of `value`. If `deep` is `true`, nested objects will also
   813|    * be cloned, otherwise they will be assigned by reference. If a `callback`
   814|    * function is passed, it will be executed to produce the cloned values. If
   815|    * `callback` returns `undefined`, cloning will be handled by the method instead.
   816|    * The `callback` is bound to `thisArg` and invoked with one argument; (value).
   817|    *
   818|    * @static
   819|    * @memberOf _
   820|    * @category Objects
   821|    * @param {Mixed} value The value to clone.
   822|    * @param {Boolean} [deep=false] A flag to indicate a deep clone.
   823|    * @param {Function} [callback] The function to customize cloning values.
   824|    * @param {Mixed} [thisArg] The `this` binding of `callback`.
   825|    * @param- {Array} [stackA=[]] Internally used to track traversed source objects.
   826|    * @param- {Array} [stackB=[]] Internally used to associate clones with source counterparts.

# --- HUNK 4: Lines 1230-1286 ---
  1230|       if (ctorA != ctorB && !(
  1231|             isFunction(ctorA) && ctorA instanceof ctorA &&
  1232|             isFunction(ctorB) && ctorB instanceof ctorB
  1233|           )) {
  1234|         return false;
  1235|       }
  1236|     }
  1237|     stackA || (stackA = []);
  1238|     stackB || (stackB = []);
  1239|     var length = stackA.length;
  1240|     while (length--) {
  1241|       if (stackA[length] == a) {
  1242|         return stackB[length] == b;
  1243|       }
  1244|     }
  1245|     var size = 0;
  1246|     result = true;
  1247|     stackA.push(a);
  1248|     stackB.push(b);
  1249|     if (isArr) {
  1250|       length = a.length;
  1251|       size = b.length;
  1252|       result = size == a.length;
  1253|       if (!result && !whereIndicator) {
  1254|         return result;
  1255|       }
  1256|       while (size--) {
  1257|         var index = length,
  1258|             value = b[size];
  1259|         if (whereIndicator) {
  1260|           while (index--) {
  1261|             if ((result = isEqual(a[index], value, callback, thisArg, stackA, stackB))) {
  1262|               break;
  1263|             }
  1264|           }
  1265|         } else if (!(result = isEqual(a[size], value, callback, thisArg, stackA, stackB))) {
  1266|           break;
  1267|         }
  1268|       }
  1269|       return result;
  1270|     }
  1271|     forIn(b, function(value, key, b) {
  1272|       if (hasOwnProperty.call(b, key)) {
  1273|         size++;
  1274|         return (result = hasOwnProperty.call(a, key) && isEqual(a[key], value, callback, thisArg, stackA, stackB));
  1275|       }
  1276|     });
  1277|     if (result && !whereIndicator) {
  1278|       forIn(a, function(value, key, a) {
  1279|         if (hasOwnProperty.call(a, key)) {
  1280|           return (result = --size > -1);
  1281|         }
  1282|       });
  1283|     }
  1284|     return result;
  1285|   }
  1286|   /**

# --- HUNK 5: Lines 1559-1602 ---
  1559|    * });
  1560|    * // => { 'fruits': ['apple', 'banana'], 'vegetables': ['beet', 'carrot] }
  1561|    */
  1562|   function merge(object, source, deepIndicator) {
  1563|     var args = arguments,
  1564|         index = 0,
  1565|         length = 2;
  1566|     if (!isObject(object)) {
  1567|       return object;
  1568|     }
  1569|     if (deepIndicator === indicatorObject) {
  1570|       var callback = args[3],
  1571|           stackA = args[4],
  1572|           stackB = args[5];
  1573|     } else {
  1574|       stackA = [];
  1575|       stackB = [];
  1576|       if (typeof deepIndicator != 'number') {
  1577|         length = args.length;
  1578|       }
  1579|       if (length > 3 && typeof args[length - 2] == 'function') {
  1580|         callback = createCallback(args[--length - 1], args[length--], 2);
  1581|       } else if (length > 2 && typeof args[length - 1] == 'function') {
  1582|         callback = args[--length];
  1583|       }
  1584|     }
  1585|     while (++index < length) {
  1586|       (isArray(args[index]) ? forEach : forOwn)(args[index], function(source, key) {
  1587|         var found,
  1588|             isArr,
  1589|             result = source,
  1590|             value = object[key];
  1591|         if (source && ((isArr = isArray(source)) || isPlainObject(source))) {
  1592|           var stackLength = stackA.length;
  1593|           while (stackLength--) {
  1594|             if ((found = stackA[stackLength] == source)) {
  1595|               value = stackB[stackLength];
  1596|               break;
  1597|             }
  1598|           }
  1599|           if (!found) {
  1600|             value = isArr
  1601|               ? (isArray(value) ? value : [])
  1602|               : (isPlainObject(value) ? value : {});

# --- HUNK 6: Lines 1753-1801 ---
  1753|    * @category Objects
  1754|    * @param {Object} object The object to inspect.
  1755|    * @returns {Array} Returns a new array of property values.
  1756|    * @example
  1757|    *
  1758|    * _.values({ 'one': 1, 'two': 2, 'three': 3 });
  1759|    * // => [1, 2, 3]
  1760|    */
  1761|   function values(object) {
  1762|     var index = -1,
  1763|         props = keys(object),
  1764|         length = props.length,
  1765|         result = Array(length);
  1766|     while (++index < length) {
  1767|       result[index] = object[props[index]];
  1768|     }
  1769|     return result;
  1770|   }
  1771|   /*--------------------------------------------------------------------------*/
  1772|   /**
  1773|    * Creates an array of elements from the specified indexes, or keys, of the
  1774|    * `collection`. Indexes may be specified as individual arguments or as arrays
  1775|    * of indexes.
  1776|    *
  1777|    * @static
  1778|    * @memberOf _
  1779|    * @category Collections
  1780|    * @param {Array|Object|String} collection The collection to iterate over.
  1781|    * @param {Array|Number|String} [index1, index2, ...] The indexes of
  1782|    *  `collection` to retrieve, either as individual arguments or arrays.
  1783|    * @returns {Array} Returns a new array of elements corresponding to the
  1784|    *  provided indexes.
  1785|    * @example
  1786|    *
  1787|    * _.at(['a', 'b', 'c', 'd', 'e'], [0, 2, 4]);
  1788|    * // => ['a', 'c', 'e']
  1789|    *
  1790|    * _.at(['moe', 'larry', 'curly'], 0, 2);
  1791|    * // => ['moe', 'curly']
  1792|    */
  1793|   function at(collection) {
  1794|     var index = -1,
  1795|         props = concat.apply(arrayRef, slice(arguments, 1)),
  1796|         length = props.length,
  1797|         result = Array(length);
  1798|     while(++index < length) {
  1799|       result[index] = collection[props[index]];
  1800|     }
  1801|     return result;

# --- HUNK 7: Lines 3733-3775 ---
  3733|     return setTimeout(function() { func.apply(undefined, args); }, wait);
  3734|   }
  3735|   /**
  3736|    * Defers executing the `func` function until the current call stack has cleared.
  3737|    * Additional arguments will be passed to `func` when it is invoked.
  3738|    *
  3739|    * @static
  3740|    * @memberOf _
  3741|    * @category Functions
  3742|    * @param {Function} func The function to defer.
  3743|    * @param {Mixed} [arg1, arg2, ...] Arguments to invoke the function with.
  3744|    * @returns {Number} Returns the `setTimeout` timeout id.
  3745|    * @example
  3746|    *
  3747|    * _.defer(function() { alert('deferred'); });
  3748|    * // returns from the function before `alert` is called
  3749|    */
  3750|   function defer(func) {
  3751|     var args = slice(arguments, 1);
  3752|     return setTimeout(function() { func.apply(undefined, args); }, 1);
  3753|   }
  3754|   if (isV8 && freeModule && typeof setImmediate == 'function') {
  3755|     defer = bind(setImmediate, window);
  3756|   }
  3757|   /**
  3758|    * Creates a function that memoizes the result of `func`. If `resolver` is
  3759|    * passed, it will be used to determine the cache key for storing the result
  3760|    * based on the arguments passed to the memoized function. By default, the first
  3761|    * argument passed to the memoized function is used as the cache key. The `func`
  3762|    * is executed with the `this` binding of the memoized function.
  3763|    *
  3764|    * @static
  3765|    * @memberOf _
  3766|    * @category Functions
  3767|    * @param {Function} func The function to have its output memoized.
  3768|    * @param {Function} [resolver] A function used to resolve the cache key.
  3769|    * @returns {Function} Returns the new memoizing function.
  3770|    * @example
  3771|    *
  3772|    * var fibonacci = _.memoize(function(n) {
  3773|    *   return n < 2 ? n : fibonacci(n - 1) + fibonacci(n - 2);
  3774|    * });
  3775|    */

# --- HUNK 8: Lines 4194-4234 ---
  4194|       }
  4195|       index = offset + match.length;
  4196|       return match;
  4197|     });
  4198|     source += "';\n";
  4199|     var variable = options.variable,
  4200|         hasVariable = variable;
  4201|     if (!hasVariable) {
  4202|       variable = 'obj';
  4203|       source = 'with (' + variable + ') {\n' + source + '\n}\n';
  4204|     }
  4205|     source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source)
  4206|       .replace(reEmptyStringMiddle, '$1')
  4207|       .replace(reEmptyStringTrailing, '$1;');
  4208|     source = 'function(' + variable + ') {\n' +
  4209|       (hasVariable ? '' : variable + ' || (' + variable + ' = {});\n') +
  4210|       "var __t, __p = '', __e = _.escape" +
  4211|       (isEvaluating
  4212|         ? ', __j = Array.prototype.join;\n' +
  4213|           "function print() { __p += __j.call(arguments, '') }\n"
  4214|         : ';\n'
  4215|       ) +
  4216|       source +
  4217|       'return __p\n}';
  4218|     var sourceURL = '\n/*\n//@ sourceURL=' + (options.sourceURL || '/lodash/template/source[' + (templateCounter++) + ']') + '\n*/';
  4219|     try {
  4220|       var result = Function(importsKeys, 'return ' + source + sourceURL).apply(undefined, importsValues);
  4221|     } catch(e) {
  4222|       e.source = source;
  4223|       throw e;
  4224|     }
  4225|     if (data) {
  4226|       return result(data);
  4227|     }
  4228|     result.source = source;
  4229|     return result;
  4230|   }
  4231|   /**
  4232|    * Executes the `callback` function `n` times, returning an array of the results
  4233|    * of each `callback` execution. The `callback` is bound to `thisArg` and invoked
  4234|    * with one argument; (index).

# --- HUNK 9: Lines 4482-4543 ---
  4482|   lodash.take = first;
  4483|   lodash.head = first;
  4484|   forOwn(lodash, function(func, methodName) {
  4485|     if (!lodash.prototype[methodName]) {
  4486|       lodash.prototype[methodName]= function(callback, thisArg) {
  4487|         var result = func(this.__wrapped__, callback, thisArg);
  4488|         return callback == null || (thisArg && typeof callback != 'function')
  4489|           ? result
  4490|           : new lodash(result);
  4491|       };
  4492|     }
  4493|   });
  4494|   /*--------------------------------------------------------------------------*/
  4495|   /**
  4496|    * The semantic version number.
  4497|    *
  4498|    * @static
  4499|    * @memberOf _
  4500|    * @type String
  4501|    */
  4502|   lodash.VERSION = '1.0.1';
  4503|   lodash.prototype.toString = wrapperToString;
  4504|   lodash.prototype.value = wrapperValueOf;
  4505|   lodash.prototype.valueOf = wrapperValueOf;
  4506|   each(['join', 'pop', 'shift'], function(methodName) {
  4507|     var func = arrayRef[methodName];
  4508|     lodash.prototype[methodName] = function() {
  4509|       return func.apply(this.__wrapped__, arguments);
  4510|     };
  4511|   });
  4512|   each(['push', 'reverse', 'sort', 'unshift'], function(methodName) {
  4513|     var func = arrayRef[methodName];
  4514|     lodash.prototype[methodName] = function() {
  4515|       func.apply(this.__wrapped__, arguments);
  4516|       return this;
  4517|     };
  4518|   });
  4519|   each(['concat', 'slice', 'splice'], function(methodName) {
  4520|     var func = arrayRef[methodName];
  4521|     lodash.prototype[methodName] = function() {
  4522|       return new lodash(func.apply(this.__wrapped__, arguments));
  4523|     };
  4524|   });
  4525|   /*--------------------------------------------------------------------------*/
  4526|   if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {
  4527|     window._ = lodash;
  4528|     define(function() {
  4529|       return lodash;
  4530|     });
  4531|   }
  4532|   else if (freeExports) {
  4533|     if (freeModule) {
  4534|       (freeModule.exports = lodash)._ = lodash;
  4535|     }
  4536|     else {
  4537|       freeExports._ = lodash;
  4538|     }
  4539|   }
  4540|   else {
  4541|     window._ = lodash;
  4542|   }
  4543| }(this));


# ====================================================================
# FILE: dist/lodash.min.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-40 ---
     1| /**
     2|  * @license
     3|  * Lo-Dash 1.0.1 (Custom Build) lodash.com/license
     4|  * Build: `lodash modern -o ./dist/lodash.js`
     5|  * Underscore.js 1.4.4 underscorejs.org/LICENSE
     6|  */
     7| ;(function(n,t){function r(n){if(!n||typeof n!="object")return W;var t=n.valueOf,r=typeof t=="function"&&(r=bt(t))&&bt(r);if(r)n=n==r||bt(n)==r&&!h(n);else{var e=W;!n||typeof n!="object"||h(n)?n=e:(t=n.constructor,!j(t)||t instanceof t?(Yt(n,function(n,t){e=t}),n=e===W||jt.call(n,e)):n=e)}return n}function e(n){return n&&typeof n=="object"&&n.__wrapped__?n:this instanceof e?(this.__wrapped__=n,void 0):new e(n)}function u(n,t,r){t||(t=0);var e=n.length,u=e-t>=(r||ut);if(u){var o={};for(r=t-1;++r<e;){var i=n[r]+"";
     8| (jt.call(o,i)?o[i]:o[i]=[]).push(n[r])}}return function(r){if(u){var e=r+"";return jt.call(o,e)&&-1<z(o[e],r)}return-1<z(n,r,t)}}function o(n){return n.charCodeAt(0)}function i(n,t){var r=n.b,e=t.b;if(n=n.a,t=t.a,n!==t){if(n>t||typeof n=="undefined")return 1;if(n<t||typeof t=="undefined")return-1}return r<e?-1:1}function f(n,t,r,e){function u(){var a=arguments,c=i?this:t;return o||(n=t[f]),r.length&&(a=a.length?(a=v(a),e?a.concat(r):r.concat(a)):r),this instanceof u?(s.prototype=n.prototype,c=new s,s.prototype=Q,a=n.apply(c,a),w(a)?a:c):n.apply(c,a)
     9| }var o=j(n),i=!r,f=t;return i&&(r=t),o||(t=n),u}function a(n,t,r){if(n==Q)return G;var e=typeof n;if("function"!=e){if("object"!=e)return function(t){return t[n]};var u=tr(n);return function(t){for(var r=u.length,e=W;r--&&(e=b(t[u[r]],n[u[r]],et)););return e}}return typeof t!="undefined"?1===r?function(r){return n.call(t,r)}:2===r?function(r,e){return n.call(t,r,e)}:4===r?function(r,e,u,o){return n.call(t,r,e,u,o)}:function(r,e,u){return n.call(t,r,e,u)}:n}function c(){for(var n,t={g:Ut,b:"l(n)",c:"",h:"",l:"",m:L},r=0;n=arguments[r];r++)for(var e in n)t[e]=n[e];
    10| return n=t.a,t.d=/^[^,]+/.exec(n)[0],r="var j,n="+t.d+",u=n;if(!n)return u;"+t.l+";",t.b&&(r+="var o=n.length;j=-1;if("+t.b+"){while(++j<o){"+t.h+"}}else{"),t.g&&t.m?r+="var s=-1,t=r[typeof n]?p(n):[],o=t.length;while(++s<o){j=t[s];"+t.h+"}":(r+="for(j in n){",t.m&&(r+="if(",t.m&&(r+="i.call(n,j)"),r+="){"),r+=t.h+";",t.m&&(r+="}"),r+="}"),t.b&&(r+="}"),r+=t.c+";return u",Function("f,i,k,l,m,r,p","return function("+n+"){"+r+"}")(a,jt,h,nr,A,Ht,kt)}function l(n){return"\\"+Jt[n]}function p(n){return rr[n]
    11| }function s(){}function v(n,t,r){t||(t=0),typeof r=="undefined"&&(r=n?n.length:0);var e=-1;r=r-t||0;for(var u=Array(0>r?0:r);++e<r;)u[e]=n[t+e];return u}function g(n){return er[n]}function h(n){return xt.call(n)==Ft}function y(n){var t=[];return Zt(n,function(n,r){t.push(r)}),t}function m(n,r,e,u,o,i){var f=n;if(typeof r=="function"&&(u=e,e=r,r=W),typeof e=="function"){e=typeof u=="undefined"?e:a(e,u,1);var f=e(f),c=typeof f!="undefined";c||(f=n)}if(u=w(f)){var l=xt.call(f);if(!Vt[l])return f;var p=nr(f)
    12| }if(!u||!r)return u&&!c?p?v(f):ur({},f):f;switch(u=Gt[l],l){case Dt:case It:return c?f:new u(+f);case Tt:case zt:return c?f:new u(f);case Mt:return c?f:u(f.source,lt.exec(f))}for(o||(o=[]),i||(i=[]),l=o.length;l--;)if(o[l]==n)return i[l];return c||(f=p?u(f.length):{},p&&(jt.call(n,"index")&&(f.index=n.index),jt.call(n,"input")&&(f.input=n.input))),o.push(n),i.push(f),(p?$:Zt)(c?f:n,function(n,u){f[u]=m(n,r,e,t,o,i)}),f}function d(n){var t=[];return Yt(n,function(n,r){j(n)&&t.push(r)}),t.sort()}function _(n){for(var t=-1,r=tr(n),e=r.length,u={};++t<e;){var o=r[t];
    13| u[n[o]]=o}return u}function b(n,t,r,e,u,o){var i=r===et;if(r&&!i){r=typeof e=="undefined"?r:a(r,e,2);var f=r(n,t);if(typeof f!="undefined")return!!f}if(n===t)return 0!==n||1/n==1/t;var c=typeof n,l=typeof t;if(n===n&&(!n||"function"!=c&&"object"!=c)&&(!t||"function"!=l&&"object"!=l))return W;if(n==Q||t==Q)return n===t;if(l=xt.call(n),c=xt.call(t),l==Ft&&(l=Bt),c==Ft&&(c=Bt),l!=c)return W;switch(l){case Dt:case It:return+n==+t;case Tt:return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case Mt:case zt:return n==t+""
    14| }if(c=l==qt,!c){if(n.__wrapped__||t.__wrapped__)return b(n.__wrapped__||n,t.__wrapped__||t,r,e,u,o);if(l!=Bt)return W;var l=n.constructor,p=t.constructor;if(l!=p&&(!j(l)||!(l instanceof l&&j(p)&&p instanceof p)))return W}for(u||(u=[]),o||(o=[]),l=u.length;l--;)if(u[l]==n)return o[l]==t;var s=0,f=L;if(u.push(n),o.push(t),c){if(l=n.length,s=t.length,f=s==n.length,!f&&!i)return f;for(;s--;)if(c=l,p=t[s],i)for(;c--&&!(f=b(n[c],p,r,e,u,o)););else if(!(f=b(n[s],p,r,e,u,o)))break;return f}return Yt(t,function(t,i,a){return jt.call(a,i)?(s++,f=jt.call(n,i)&&b(n[i],t,r,e,u,o)):void 0
    15| }),f&&!i&&Yt(n,function(n,t,r){return jt.call(r,t)?f=-1<--s:void 0}),f}function j(n){return typeof n=="function"}function w(n){return n?Ht[typeof n]:W}function x(n){return typeof n=="number"||xt.call(n)==Tt}function A(n){return typeof n=="string"||xt.call(n)==zt}function O(n,t,e){var u=arguments,o=0,i=2;if(!w(n))return n;if(e===et)var f=u[3],c=u[4],l=u[5];else c=[],l=[],typeof e!="number"&&(i=u.length),3<i&&"function"==typeof u[i-2]?f=a(u[--i-1],u[i--],2):2<i&&"function"==typeof u[i-1]&&(f=u[--i]);for(;++o<i;)(nr(u[o])?$:Zt)(u[o],function(t,e){var u,o,i=t,a=n[e];
    16| if(t&&((o=nr(t))||r(t))){for(i=c.length;i--;)if(u=c[i]==t){a=l[i];break}u||(a=o?nr(a)?a:[]:r(a)?a:{},f&&(i=f(a,t),typeof i!="undefined"&&(a=i)),c.push(t),l.push(a),f||(a=O(a,t,et,f,c,l)))}else f&&(i=f(a,t),typeof i=="undefined"&&(i=t)),typeof i!="undefined"&&(a=i);n[e]=a});return n}function E(n){for(var t=-1,r=tr(n),e=r.length,u=Array(e);++t<e;)u[t]=n[r[t]];return u}function S(n,t,r){var e=-1,u=n?n.length:0,o=W;return r=(0>r?Nt(0,u+r):r)||0,typeof u=="number"?o=-1<(A(n)?n.indexOf(t,r):z(n,t,r)):Xt(n,function(n){return++e<r?void 0:!(o=n===t)
    17| }),o}function k(n,t,r){var e=L;if(t=a(t,r),nr(n)){r=-1;for(var u=n.length;++r<u&&(e=!!t(n[r],r,n)););}else Xt(n,function(n,r,u){return e=!!t(n,r,u)});return e}function N(n,t,r){var e=[];if(t=a(t,r),nr(n)){r=-1;for(var u=n.length;++r<u;){var o=n[r];t(o,r,n)&&e.push(o)}}else Xt(n,function(n,r,u){t(n,r,u)&&e.push(n)});return e}function R(n,t,r){var e;return t=a(t,r),$(n,function(n,r,u){return t(n,r,u)?(e=n,W):void 0}),e}function $(n,t,r){if(t&&typeof r=="undefined"&&nr(n)){r=-1;for(var e=n.length;++r<e&&t(n[r],r,n)!==W;);}else Xt(n,t,r);
    18| return n}function F(n,t,r){var e=-1,u=n?n.length:0,o=Array(typeof u=="number"?u:0);if(t=a(t,r),nr(n))for(;++e<u;)o[e]=t(n[e],e,n);else Xt(n,function(n,r,u){o[++e]=t(n,r,u)});return o}function q(n,t,r){var e=-1/0,u=e;if(!t&&nr(n)){r=-1;for(var i=n.length;++r<i;){var f=n[r];f>u&&(u=f)}}else t=!t&&A(n)?o:a(t,r),Xt(n,function(n,r,o){r=t(n,r,o),r>e&&(e=r,u=n)});return u}function D(n,t,r,e){var u=3>arguments.length;if(t=a(t,e,4),nr(n)){var o=-1,i=n.length;for(u&&(r=n[++o]);++o<i;)r=t(r,n[o],o,n)}else Xt(n,function(n,e,o){r=u?(u=W,n):t(r,n,e,o)
    19| });return r}function I(n,t,r,e){var u=n?n.length:0,o=3>arguments.length;if(typeof u!="number")var i=tr(n),u=i.length;return t=a(t,e,4),$(n,function(e,f,a){f=i?i[--u]:--u,r=o?(o=W,n[f]):t(r,n[f],f,a)}),r}function T(n,t,r){var e;if(t=a(t,r),nr(n)){r=-1;for(var u=n.length;++r<u&&!(e=t(n[r],r,n)););}else Xt(n,function(n,r,u){return!(e=t(n,r,u))});return!!e}function B(n,t,r){if(n){var e=0,u=n.length;if(typeof t!="number"&&t!=Q){var o=-1;for(t=a(t,r);++o<u&&t(n[o],o,n);)e++}else if(e=t,e==Q||r)return n[0];
    20| return v(n,0,Rt(Nt(0,e),u))}}function M(n,t){for(var r=-1,e=n?n.length:0,u=[];++r<e;){var o=n[r];nr(o)?wt.apply(u,t?o:M(o)):u.push(o)}return u}function z(n,t,r){var e=-1,u=n?n.length:0;if(typeof r=="number")e=(0>r?Nt(0,u+r):r||0)-1;else if(r)return e=C(n,t),n[e]===t?e:-1;for(;++e<u;)if(n[e]===t)return e;return-1}function P(n,t,r){if(typeof t!="number"&&t!=Q){var e=0,u=-1,o=n?n.length:0;for(t=a(t,r);++u<o&&t(n[u],u,n);)e++}else e=t==Q||r?1:Nt(0,t);return v(n,e)}function C(n,t,r,e){var u=0,o=n?n.length:u;
    21| for(r=r?a(r,e,1):G,t=r(t);u<o;)e=u+o>>>1,r(n[e])<t?u=e+1:o=e;return u}function K(n,t,r,e){var u=-1,o=n?n.length:0,i=[],f=i;typeof t=="function"&&(e=r,r=t,t=W);var c=!t&&75<=o;if(c)var l={};for(r&&(f=[],r=a(r,e));++u<o;){e=n[u];var p=r?r(e,u,n):e;if(c)var s=p+"",s=jt.call(l,s)?!(f=l[s]):f=l[s]=[];(t?!u||f[f.length-1]!==p:s||0>z(f,p))&&((r||c)&&f.push(p),i.push(e))}return i}function U(n,t){return Kt||At&&2<arguments.length?At.call.apply(At,arguments):f(n,t,v(arguments,2))}function V(n){var r=v(arguments,1);
    22| return setTimeout(function(){n.apply(t,r)},1)}function G(n){return n}function H(n){$(d(n),function(t){var r=e[t]=n[t];e.prototype[t]=function(){var n=[this.__wrapped__];return wt.apply(n,arguments),new e(r.apply(e,n))}})}function J(){return this.__wrapped__}var L=!0,Q=null,W=!1,X=typeof exports=="object"&&exports,Y=typeof module=="object"&&module&&module.exports==X&&module,Z=typeof global=="object"&&global;Z.global===Z&&(n=Z);var nt=[],tt={},rt=0,et=tt,ut=30,ot=n._,it=/&(?:amp|lt|gt|quot|#39);/g,ft=/\b__p\+='';/g,at=/\b(__p\+=)''\+/g,ct=/(__e\(.*?\)|\b__t\))\+'';/g,lt=/\w*$/,pt=RegExp("^"+(tt.valueOf+"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),st=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,vt=/<%=([\s\S]+?)%>/g,gt=/($^)/,ht=/[&<>"']/g,yt=/['\n\r\t\u2028\u2029\\]/g,mt=Math.ceil,dt=nt.concat,_t=Math.floor,bt=pt.test(bt=Object.getPrototypeOf)&&bt,jt=tt.hasOwnProperty,wt=nt.push,xt=tt.toString,At=pt.test(At=v.bind)&&At,Ot=pt.test(Ot=Array.isArray)&&Ot,Et=n.isFinite,St=n.isNaN,kt=pt.test(kt=Object.keys)&&kt,Nt=Math.max,Rt=Math.min,$t=Math.random,Ft="[object Arguments]",qt="[object Array]",Dt="[object Boolean]",It="[object Date]",Tt="[object Number]",Bt="[object Object]",Mt="[object RegExp]",zt="[object String]",Pt=!!n.attachEvent,Ct=At&&!/\n|true/.test(At+Pt),Kt=At&&!Ct,Ut=kt&&(Pt||Ct),Vt={"[object Function]":W};
    23| Vt[Ft]=Vt[qt]=Vt[Dt]=Vt[It]=Vt[Tt]=Vt[Bt]=Vt[Mt]=Vt[zt]=L;var Gt={};Gt[qt]=Array,Gt[Dt]=Boolean,Gt[It]=Date,Gt[Bt]=Object,Gt[Tt]=Number,Gt[Mt]=RegExp,Gt[zt]=String;var Ht={"boolean":W,"function":L,object:L,number:W,string:W,undefined:W},Jt={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};e.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:vt,variable:"",imports:{_:e}};var Lt={a:"q,w,h",l:"var a=arguments,b=0,c=typeof h=='number'?2:a.length;while(++b<c){n=a[b];if(n&&r[typeof n]){",h:"if(typeof u[j]=='undefined')u[j]=n[j]",c:"}}"},Qt={a:"e,d,x",l:"d=d&&typeof x=='undefined'?d:f(d,x)",b:"typeof o=='number'",h:"if(d(n[j],j,e)===false)return u"},Wt={l:"if(!r[typeof n])return u;"+Qt.l,b:W},Xt=c(Qt),Yt=c(Qt,Wt,{m:W}),Zt=c(Qt,Wt),nr=Ot||function(n){return n instanceof Array||xt.call(n)==qt
    24| },tr=kt?function(n){return w(n)?kt(n):[]}:y,rr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},er=_(rr),ur=c(Lt,{l:Lt.l.replace(";",";if(c>3&&typeof a[c-2]=='function'){var d=f(a[--c-1],a[c--],2);}else if(c>2&&typeof a[c-1]=='function'){d=a[--c];}"),h:"u[j]=d?d(u[j],n[j]):n[j]"}),or=c(Lt);j(/x/)&&(j=function(n){return n instanceof Function||"[object Function]"==xt.call(n)}),Ct&&Y&&typeof setImmediate=="function"&&(V=U(setImmediate,n)),e.after=function(n,t){return 1>n?t():function(){return 1>--n?t.apply(this,arguments):void 0
    25| }},e.assign=ur,e.at=function(n){for(var t=-1,r=dt.apply(nt,v(arguments,1)),e=r.length,u=Array(e);++t<e;)u[t]=n[r[t]];return u},e.bind=U,e.bindAll=function(n){for(var t=dt.apply(nt,arguments),r=1<t.length?0:(t=d(n),-1),e=t.length;++r<e;){var u=t[r];n[u]=U(n[u],n)}return n},e.bindKey=function(n,t){return f(n,t,v(arguments,2))},e.compact=function(n){for(var t=-1,r=n?n.length:0,e=[];++t<r;){var u=n[t];u&&e.push(u)}return e},e.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length;r--;)t=[n[r].apply(this,t)];
    26| return t[0]}},e.countBy=function(n,t,r){var e={};return t=a(t,r),$(n,function(n,r,u){r=t(n,r,u)+"",jt.call(e,r)?e[r]++:e[r]=1}),e},e.debounce=function(n,t,r){function e(){f=Q,r||(o=n.apply(i,u))}var u,o,i,f;return function(){var a=r&&!f;return u=arguments,i=this,clearTimeout(f),f=setTimeout(e,t),a&&(o=n.apply(i,u)),o}},e.defaults=or,e.defer=V,e.delay=function(n,r){var e=v(arguments,2);return setTimeout(function(){n.apply(t,e)},r)},e.difference=function(n){for(var t=-1,r=n?n.length:0,e=dt.apply(nt,arguments),e=u(e,r),o=[];++t<r;){var i=n[t];
    27| e(i)||o.push(i)}return o},e.filter=N,e.flatten=M,e.forEach=$,e.forIn=Yt,e.forOwn=Zt,e.functions=d,e.groupBy=function(n,t,r){var e={};return t=a(t,r),$(n,function(n,r,u){r=t(n,r,u)+"",(jt.call(e,r)?e[r]:e[r]=[]).push(n)}),e},e.initial=function(n,t,r){if(!n)return[];var e=0,u=n.length;if(typeof t!="number"&&t!=Q){var o=u;for(t=a(t,r);o--&&t(n[o],o,n);)e++}else e=t==Q||r?1:t||e;return v(n,0,Rt(Nt(0,u-e),u))},e.intersection=function(n){var t=arguments,r=t.length,e={0:{}},o=-1,i=n?n.length:0,f=100<=i,a=[],c=a;
    28| n:for(;++o<i;){var l=n[o];if(f)var p=l+"",p=jt.call(e[0],p)?!(c=e[0][p]):c=e[0][p]=[];if(p||0>z(c,l)){f&&c.push(l);for(var s=r;--s;)if(!(e[s]||(e[s]=u(t[s],0,100)))(l))continue n;a.push(l)}}return a},e.invert=_,e.invoke=function(n,t){var r=v(arguments,2),e=-1,u=typeof t=="function",o=n?n.length:0,i=Array(typeof o=="number"?o:0);return $(n,function(n){i[++e]=(u?t:n[t]).apply(n,r)}),i},e.keys=tr,e.map=F,e.max=q,e.memoize=function(n,t){var r={};return function(){var e=(t?t.apply(this,arguments):arguments[0])+"";
    29| return jt.call(r,e)?r[e]:r[e]=n.apply(this,arguments)}},e.merge=O,e.min=function(n,t,r){var e=1/0,u=e;if(!t&&nr(n)){r=-1;for(var i=n.length;++r<i;){var f=n[r];f<u&&(u=f)}}else t=!t&&A(n)?o:a(t,r),Xt(n,function(n,r,o){r=t(n,r,o),r<e&&(e=r,u=n)});return u},e.object=function(n,t){for(var r=-1,e=n?n.length:0,u={};++r<e;){var o=n[r];t?u[o]=t[r]:u[o[0]]=o[1]}return u},e.omit=function(n,t,r){var e=typeof t=="function",u={};if(e)t=a(t,r);else var o=dt.apply(nt,arguments);return Yt(n,function(n,r,i){(e?!t(n,r,i):0>z(o,r,1))&&(u[r]=n)
    30| }),u},e.once=function(n){var t,r;return function(){return t?r:(t=L,r=n.apply(this,arguments),n=Q,r)}},e.pairs=function(n){for(var t=-1,r=tr(n),e=r.length,u=Array(e);++t<e;){var o=r[t];u[t]=[o,n[o]]}return u},e.partial=function(n){return f(n,v(arguments,1))},e.partialRight=function(n){return f(n,v(arguments,1),Q,et)},e.pick=function(n,t,r){var e={};if(typeof t!="function")for(var u=0,o=dt.apply(nt,arguments),i=w(n)?o.length:0;++u<i;){var f=o[u];f in n&&(e[f]=n[f])}else t=a(t,r),Yt(n,function(n,r,u){t(n,r,u)&&(e[r]=n)
    31| });return e},e.pluck=F,e.range=function(n,t,r){n=+n||0,r=+r||1,t==Q&&(t=n,n=0);var e=-1;t=Nt(0,mt((t-n)/r));for(var u=Array(t);++e<t;)u[e]=n,n+=r;return u},e.reject=function(n,t,r){return t=a(t,r),N(n,function(n,r,e){return!t(n,r,e)})},e.rest=P,e.shuffle=function(n){var t=-1,r=n?n.length:0,e=Array(typeof r=="number"?r:0);return $(n,function(n){var r=_t($t()*(++t+1));e[t]=e[r],e[r]=n}),e},e.sortBy=function(n,t,r){var e=-1,u=n?n.length:0,o=Array(typeof u=="number"?u:0);for(t=a(t,r),$(n,function(n,r,u){o[++e]={a:t(n,r,u),b:e,c:n}
    32| }),u=o.length,o.sort(i);u--;)o[u]=o[u].c;return o},e.tap=function(n,t){return t(n),n},e.throttle=function(n,t){function r(){f=new Date,i=Q,u=n.apply(o,e)}var e,u,o,i,f=0;return function(){var a=new Date,c=t-(a-f);return e=arguments,o=this,0<c?i||(i=setTimeout(r,c)):(clearTimeout(i),i=Q,f=a,u=n.apply(o,e)),u}},e.times=function(n,t,r){n=+n||0;for(var e=-1,u=Array(n);++e<n;)u[e]=t.call(r,e);return u},e.toArray=function(n){return n&&typeof n.length=="number"?v(n):E(n)},e.union=function(){return K(dt.apply(nt,arguments))
    33| },e.uniq=K,e.values=E,e.where=N,e.without=function(n){for(var t=-1,r=n?n.length:0,e=u(arguments,1),o=[];++t<r;){var i=n[t];e(i)||o.push(i)}return o},e.wrap=function(n,t){return function(){var r=[n];return wt.apply(r,arguments),t.apply(this,r)}},e.zip=function(n){for(var t=-1,r=n?q(F(arguments,"length")):0,e=Array(r);++t<r;)e[t]=F(arguments,t);return e},e.collect=F,e.drop=P,e.each=$,e.extend=ur,e.methods=d,e.select=N,e.tail=P,e.unique=K,H(e),e.clone=m,e.cloneDeep=function(n,t,r){return m(n,L,t,r)},e.contains=S,e.escape=function(n){return n==Q?"":(n+"").replace(ht,p)
    34| },e.every=k,e.find=R,e.has=function(n,t){return n?jt.call(n,t):W},e.identity=G,e.indexOf=z,e.isArguments=h,e.isArray=nr,e.isBoolean=function(n){return n===L||n===W||xt.call(n)==Dt},e.isDate=function(n){return n instanceof Date||xt.call(n)==It},e.isElement=function(n){return n?1===n.nodeType:W},e.isEmpty=function(n){var t=L;if(!n)return t;var r=xt.call(n),e=n.length;return r==qt||r==zt||r==Ft||r==Bt&&typeof e=="number"&&j(n.splice)?!e:(Zt(n,function(){return t=W}),t)},e.isEqual=b,e.isFinite=function(n){return Et(n)&&!St(parseFloat(n))
    35| },e.isFunction=j,e.isNaN=function(n){return x(n)&&n!=+n},e.isNull=function(n){return n===Q},e.isNumber=x,e.isObject=w,e.isPlainObject=r,e.isRegExp=function(n){return n instanceof RegExp||xt.call(n)==Mt},e.isString=A,e.isUndefined=function(n){return typeof n=="undefined"},e.lastIndexOf=function(n,t,r){var e=n?n.length:0;for(typeof r=="number"&&(e=(0>r?Nt(0,e+r):Rt(r,e-1))+1);e--;)if(n[e]===t)return e;return-1},e.mixin=H,e.noConflict=function(){return n._=ot,this},e.random=function(n,t){return n==Q&&t==Q&&(t=1),n=+n||0,t==Q&&(t=n,n=0),n+_t($t()*((+t||0)-n+1))
    36| },e.reduce=D,e.reduceRight=I,e.result=function(n,r){var e=n?n[r]:t;return j(e)?n[r]():e},e.size=function(n){var t=n?n.length:0;return typeof t=="number"?t:tr(n).length},e.some=T,e.sortedIndex=C,e.template=function(n,r,u){var o=e.templateSettings;n||(n=""),u=or({},u,o);var i,f=or({},u.imports,o.imports),o=tr(f),f=E(f),a=0,c=u.interpolate||gt,p="__p+='";n.replace(RegExp((u.escape||gt).source+"|"+c.source+"|"+(c===vt?st:gt).source+"|"+(u.evaluate||gt).source+"|$","g"),function(t,r,e,u,o,f){return e||(e=u),p+=n.slice(a,f).replace(yt,l),r&&(p+="'+__e("+r+")+'"),o&&(i=L,p+="';"+o+";__p+='"),e&&(p+="'+((__t=("+e+"))==null?'':__t)+'"),a=f+t.length,t
    37| }),p+="';\n",c=u=u.variable,c||(u="obj",p="with("+u+"){"+p+"}"),p=(i?p.replace(ft,""):p).replace(at,"$1").replace(ct,"$1;"),p="function("+u+"){"+(c?"":u+"||("+u+"={});")+"var __t,__p='',__e=_.escape"+(i?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+p+"return __p}";try{var s=Function(o,"return "+p).apply(t,f)}catch(v){throw v.source=p,v}return r?s(r):(s.source=p,s)},e.unescape=function(n){return n==Q?"":(n+"").replace(it,g)},e.uniqueId=function(n){var t=++rt;return(n==Q?"":n+"")+t
    38| },e.all=k,e.any=T,e.detect=R,e.foldl=D,e.foldr=I,e.include=S,e.inject=D,Zt(e,function(n,t){e.prototype[t]||(e.prototype[t]=function(){var t=[this.__wrapped__];return wt.apply(t,arguments),n.apply(e,t)})}),e.first=B,e.last=function(n,t,r){if(n){var e=0,u=n.length;if(typeof t!="number"&&t!=Q){var o=u;for(t=a(t,r);o--&&t(n[o],o,n);)e++}else if(e=t,e==Q||r)return n[u-1];return v(n,Nt(0,u-e))}},e.take=B,e.head=B,Zt(e,function(n,t){e.prototype[t]||(e.prototype[t]=function(t,r){var u=n(this.__wrapped__,t,r);
    39| return t==Q||r&&typeof t!="function"?u:new e(u)})}),e.VERSION="1.0.1",e.prototype.toString=function(){return this.__wrapped__+""},e.prototype.value=J,e.prototype.valueOf=J,Xt(["join","pop","shift"],function(n){var t=nt[n];e.prototype[n]=function(){return t.apply(this.__wrapped__,arguments)}}),Xt(["push","reverse","sort","unshift"],function(n){var t=nt[n];e.prototype[n]=function(){return t.apply(this.__wrapped__,arguments),this}}),Xt(["concat","slice","splice"],function(n){var t=nt[n];e.prototype[n]=function(){return new e(t.apply(this.__wrapped__,arguments))
    40| }}),typeof define=="function"&&typeof define.amd=="object"&&define.amd?(n._=e,define(function(){return e})):X?Y?(Y.exports=e)._=e:X._=e:n._=e})(this);


# ====================================================================
# FILE: dist/lodash.underscore.js
# Total hunks: 5
# ====================================================================
# --- HUNK 1: Lines 1-67 ---
     1| /**
     2|  * @license
     3|  * Lo-Dash 1.0.1 (Custom Build) <http://lodash.com/>
     4|  * Build: `lodash underscore -o ./dist/lodash.underscore.js`
     5|  * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
     6|  * Based on Underscore.js 1.4.4 <http://underscorejs.org/>
     7|  * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud Inc.
     8|  * Available under MIT license <http://lodash.com/license>
     9|  */
    10| ;(function(window, undefined) {
    11|   /** Detect free variable `exports` */
    12|   var freeExports = typeof exports == 'object' && exports;
    13|   /** Detect free variable `module` */
    14|   var freeModule = typeof module == 'object' && module && module.exports == freeExports && module;
    15|   /** Detect free variable `global` and use it as `window` */
    16|   var freeGlobal = typeof global == 'object' && global;
    17|   if (freeGlobal.global === freeGlobal) {
    18|     window = freeGlobal;
    19|   }
    20|   /** Used for array and object method references */
    21|   var arrayRef = [],
    22|       objectRef = {};
    23|   /** Used to generate unique IDs */
    24|   var idCounter = 0;
    25|   /** Used internally to indicate various things */
    26|   var indicatorObject = objectRef;
    27|   /** Used to restore the original `_` reference in `noConflict` */
    28|   var oldDash = window._;
    29|   /** Used to match HTML entities */
    30|   var reEscapedHtml = /&(?:amp|lt|gt|quot|#39);/g;
    31|   /** Used to match empty string literals in compiled template source */
    32|   var reEmptyStringLeading = /\b__p \+= '';/g,
    33|       reEmptyStringMiddle = /\b(__p \+=) '' \+/g,
    34|       reEmptyStringTrailing = /(__e\(.*?\)|\b__t\)) \+\n'';/g;
    35|   /** Used to match regexp flags from their coerced string values */
    36|   var reFlags = /\w*$/;
    37|   /** Used to detect if a method is native */
    38|   var reNative = RegExp('^' +
    39|     (objectRef.valueOf + '')
    40|       .replace(/[.*+?^${}()|[\]\\]/g, '\\$&')
    41|       .replace(/valueOf|for [^\]]+/g, '.+?') + '$'
    42|   );
    43|   /**
    44|    * Used to match ES6 template delimiters
    45|    * http://people.mozilla.org/~jorendorff/es6-draft.html#sec-7.8.6
    46|    */
    47|   var reEsTemplate = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;
    48|   /** Used to match "interpolate" template delimiters */
    49|   var reInterpolate = /<%=([\s\S]+?)%>/g;
    50|   /** Used to ensure capturing order of template delimiters */
    51|   var reNoMatch = /($^)/;
    52|   /** Used to match HTML characters */
    53|   var reUnescapedHtml = /[&<>"']/g;
    54|   /** Used to match unescaped characters in compiled string literals */
    55|   var reUnescapedString = /['\n\r\t\u2028\u2029\\]/g;
    56|   /** Used to make template sourceURLs easier to identify */
    57|   var templateCounter = 0;
    58|   /** Native method shortcuts */
    59|   var ceil = Math.ceil,
    60|       concat = arrayRef.concat,
    61|       floor = Math.floor,
    62|       hasOwnProperty = objectRef.hasOwnProperty,
    63|       push = arrayRef.push,
    64|       toString = objectRef.toString;
    65|   /* Native method shortcuts for methods with the same name as other `lodash` methods */
    66|   var nativeBind = reNative.test(nativeBind = slice.bind) && nativeBind,
    67|       nativeIsArray = reNative.test(nativeIsArray = Array.isArray) && nativeIsArray,

# --- HUNK 2: Lines 3217-3259 ---
  3217|     return setTimeout(function() { func.apply(undefined, args); }, wait);
  3218|   }
  3219|   /**
  3220|    * Defers executing the `func` function until the current call stack has cleared.
  3221|    * Additional arguments will be passed to `func` when it is invoked.
  3222|    *
  3223|    * @static
  3224|    * @memberOf _
  3225|    * @category Functions
  3226|    * @param {Function} func The function to defer.
  3227|    * @param {Mixed} [arg1, arg2, ...] Arguments to invoke the function with.
  3228|    * @returns {Number} Returns the `setTimeout` timeout id.
  3229|    * @example
  3230|    *
  3231|    * _.defer(function() { alert('deferred'); });
  3232|    * // returns from the function before `alert` is called
  3233|    */
  3234|   function defer(func) {
  3235|     var args = slice(arguments, 1);
  3236|     return setTimeout(function() { func.apply(undefined, args); }, 1);
  3237|   }
  3238|   if (isV8 && freeModule && typeof setImmediate == 'function') {
  3239|     defer = bind(setImmediate, window);
  3240|   }
  3241|   /**
  3242|    * Creates a function that memoizes the result of `func`. If `resolver` is
  3243|    * passed, it will be used to determine the cache key for storing the result
  3244|    * based on the arguments passed to the memoized function. By default, the first
  3245|    * argument passed to the memoized function is used as the cache key. The `func`
  3246|    * is executed with the `this` binding of the memoized function.
  3247|    *
  3248|    * @static
  3249|    * @memberOf _
  3250|    * @category Functions
  3251|    * @param {Function} func The function to have its output memoized.
  3252|    * @param {Function} [resolver] A function used to resolve the cache key.
  3253|    * @returns {Function} Returns the new memoizing function.
  3254|    * @example
  3255|    *
  3256|    * var fibonacci = _.memoize(function(n) {
  3257|    *   return n < 2 ? n : fibonacci(n - 1) + fibonacci(n - 2);
  3258|    * });
  3259|    */

# --- HUNK 3: Lines 3941-4000 ---
  3941|   lodash.any = some;
  3942|   lodash.detect = find;
  3943|   lodash.foldl = reduce;
  3944|   lodash.foldr = reduceRight;
  3945|   lodash.include = contains;
  3946|   lodash.inject = reduce;
  3947|   /*--------------------------------------------------------------------------*/
  3948|   lodash.first = first;
  3949|   lodash.last = last;
  3950|   lodash.take = first;
  3951|   lodash.head = first;
  3952|   /*--------------------------------------------------------------------------*/
  3953|   lodash.chain = chain;
  3954|   /**
  3955|    * The semantic version number.
  3956|    *
  3957|    * @static
  3958|    * @memberOf _
  3959|    * @type String
  3960|    */
  3961|   lodash.VERSION = '1.0.1';
  3962|   mixin(lodash);
  3963|   lodash.prototype.chain = wrapperChain;
  3964|   lodash.prototype.value = wrapperValueOf;
  3965|   each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(methodName) {
  3966|     var func = arrayRef[methodName];
  3967|     lodash.prototype[methodName] = function() {
  3968|       var value = this.__wrapped__;
  3969|       func.apply(value, arguments);
  3970|       if (hasObjectSpliceBug && value.length === 0) {
  3971|         delete value[0];
  3972|       }
  3973|       return this;
  3974|     };
  3975|   });
  3976|   each(['concat', 'join', 'slice'], function(methodName) {
  3977|     var func = arrayRef[methodName];
  3978|     lodash.prototype[methodName] = function() {
  3979|       var value = this.__wrapped__,
  3980|           result = func.apply(value, arguments);
  3981|       if (this.__chain__) {
  3982|         result = new lodash(result);
  3983|         result.__chain__ = true;
  3984|       }
  3985|       return result;
  3986|     };
  3987|   });
  3988|   /*--------------------------------------------------------------------------*/
  3989|   if (freeExports) {
  3990|     if (freeModule) {
  3991|       (freeModule.exports = lodash)._ = lodash;
  3992|     }
  3993|     else {
  3994|       freeExports._ = lodash;
  3995|     }
  3996|   }
  3997|   else {
  3998|     window._ = lodash;
  3999|   }
  4000| }(this));


# ====================================================================
# FILE: dist/lodash.underscore.min.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-34 ---
     1| /**
     2|  * @license
     3|  * Lo-Dash 1.0.1 (Custom Build) lodash.com/license
     4|  * Build: `lodash underscore -o ./dist/lodash.underscore.js`
     5|  * Underscore.js 1.4.4 underscorejs.org/LICENSE
     6|  */
     7| ;(function(n,t){function r(n,t){var r;if(n&&qt[typeof n])for(r in t||(t=G),n)if(t(n[r],r,n)===tt)break}function e(n,t,r){if(n){t=t&&typeof r=="undefined"?t:a(t,r);var e=n.length;if(r=-1,typeof e=="number")for(;++r<e&&t(n[r],r,n)!==tt;);else for(r in n)if(pt.call(n,r)&&t(n[r],r,n)===tt)break}}function u(n){return n&&typeof n=="object"&&n.__wrapped__?n:this instanceof u?(this.__wrapped__=n,void 0):new u(n)}function o(n,t){var r=n.b,e=t.b;if(n=n.a,t=t.a,n!==t){if(n>t||typeof n=="undefined")return 1;if(n<t||typeof t=="undefined")return-1
     8| }return r<e?-1:1}function i(n,t,r){function e(){var a=arguments,f=o?this:t;return u||(n=t[i]),r.length&&(a=a.length?(a=p(a),r.concat(a)):r),this instanceof e?(l.prototype=n.prototype,f=new l,l.prototype=K,a=n.apply(f,a),w(a)?a:f):n.apply(f,a)}var u=j(n),o=!r,i=t;return o&&(r=t),u||(t=n),e}function a(n,t,r){if(n==K)return G;var e=typeof n;if("function"!=e){if("object"!=e)return function(t){return t[n]};var u=Dt(n);return function(t){for(var r=u.length,e=L;r--&&(e=t[u[r]]===n[u[r]]););return e}}return typeof t!="undefined"?1===r?function(r){return n.call(t,r)
     9| }:2===r?function(r,e){return n.call(t,r,e)}:4===r?function(r,e,u,o){return n.call(t,r,e,u,o)}:function(r,e,u){return n.call(t,r,e,u)}:n}function f(n){return"\\"+It[n]}function c(n){return Mt[n]}function l(){}function p(n,t,r){t||(t=0),typeof r=="undefined"&&(r=n?n.length:0);var e=-1;r=r-t||0;for(var u=Array(0>r?0:r);++e<r;)u[e]=n[t+e];return u}function s(n){return $t[n]}function v(n){return vt.call(n)==wt}function h(n){var t,r=[],e=function(n,t){r.push(t)};if(n&&qt[typeof n])for(t in e||(e=G),n)if(pt.call(n,t)&&e(n[t],t,n)===tt)break;
    10| return r}function g(n){if(!n)return n;for(var t=1,r=arguments.length;t<r;t++){var e=arguments[t];if(e)for(var u in e)n[u]=e[u]}return n}function y(n){if(!n)return n;for(var t=1,r=arguments.length;t<r;t++){var e=arguments[t];if(e)for(var u in e)n[u]==K&&(n[u]=e[u])}return n}function m(n){var t=[];return r(n,function(n,r){j(n)&&t.push(r)}),t.sort()}function _(n){for(var t=-1,r=Dt(n),e=r.length,u={};++t<e;){var o=r[t];u[n[o]]=o}return u}function d(n){if(!n)return J;if(Bt(n)||x(n))return!n.length;for(var t in n)if(pt.call(n,t))return L;
    11| return J}function b(n,t,e,u){if(n===t)return 0!==n||1/n==1/t;var o=typeof n,i=typeof t;if(n===n&&(!n||"function"!=o&&"object"!=o)&&(!t||"function"!=i&&"object"!=i))return L;if(n==K||t==K)return n===t;if(i=vt.call(n),o=vt.call(t),i!=o)return L;switch(i){case xt:case Et:return+n==+t;case Ot:return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case Nt:case kt:return n==t+""}if(o=i==At,!o){if(n.__wrapped__||t.__wrapped__)return b(n.__wrapped__||n,t.__wrapped__||t,e,u);if(i!=St)return L;var i=n.constructor,a=t.constructor;
    12| if(i!=a&&(!j(i)||!(i instanceof i&&j(a)&&a instanceof a)))return L}for(e||(e=[]),u||(u=[]),i=e.length;i--;)if(e[i]==n)return u[i]==t;var f=J,c=0;if(e.push(n),u.push(t),o){if(c=t.length,f=c==n.length)for(;c--&&(f=b(n[c],t[c],e,u)););return f}return r(t,function(t,r,o){return pt.call(o,r)?(c++,!(f=pt.call(n,r)&&b(n[r],t,e,u))&&tt):void 0}),f&&r(n,function(n,t,r){return pt.call(r,t)?!(f=-1<--c)&&tt:void 0}),f}function j(n){return typeof n=="function"}function w(n){return n?qt[typeof n]:L}function A(n){return typeof n=="number"||vt.call(n)==Ot
    13| }function x(n){return typeof n=="string"||vt.call(n)==kt}function E(n){for(var t=-1,r=Dt(n),e=r.length,u=Array(e);++t<e;)u[t]=n[r[t]];return u}function O(n,t){var r=L;return typeof(n?n.length:0)=="number"?r=-1<z(n,t):e(n,function(n){return(r=n===t)&&tt}),r}function S(n,t,r){var u=J;if(t=a(t,r),Bt(n)){r=-1;for(var o=n.length;++r<o&&(u=!!t(n[r],r,n)););}else e(n,function(n,r,e){return!(u=!!t(n,r,e))&&tt});return u}function N(n,t,r){var u=[];if(t=a(t,r),Bt(n)){r=-1;for(var o=n.length;++r<o;){var i=n[r];
    14| t(i,r,n)&&u.push(i)}}else e(n,function(n,r,e){t(n,r,e)&&u.push(n)});return u}function k(n,t,r){var e;return t=a(t,r),F(n,function(n,r,u){return t(n,r,u)?(e=n,tt):void 0}),e}function F(n,t,r){if(t&&typeof r=="undefined"&&Bt(n)){r=-1;for(var u=n.length;++r<u&&t(n[r],r,n)!==tt;);}else e(n,t,r)}function R(n,t,r){var u=-1,o=n?n.length:0,i=Array(typeof o=="number"?o:0);if(t=a(t,r),Bt(n))for(;++u<o;)i[u]=t(n[u],u,n);else e(n,function(n,r,e){i[++u]=t(n,r,e)});return i}function T(n,t,r){var u=-1/0,o=u;if(!t&&Bt(n)){r=-1;
    15| for(var i=n.length;++r<i;){var f=n[r];f>o&&(o=f)}}else t=a(t,r),e(n,function(n,r,e){r=t(n,r,e),r>u&&(u=r,o=n)});return o}function q(n,t,r,u){var o=3>arguments.length;if(t=a(t,u,4),Bt(n)){var i=-1,f=n.length;for(o&&(r=n[++i]);++i<f;)r=t(r,n[i],i,n)}else e(n,function(n,e,u){r=o?(o=L,n):t(r,n,e,u)});return r}function I(n,t,r,e){var u=n?n.length:0,o=3>arguments.length;if(typeof u!="number")var i=Dt(n),u=i.length;return t=a(t,e,4),F(n,function(e,a,f){a=i?i[--u]:--u,r=o?(o=L,n[a]):t(r,n[a],a,f)}),r}function B(n,t,r){var u;
    16| if(t=a(t,r),Bt(n)){r=-1;for(var o=n.length;++r<o&&!(u=t(n[r],r,n)););}else e(n,function(n,r,e){return(u=t(n,r,e))&&tt});return!!u}function D(n,t,r){return r&&d(t)?K:(r?k:N)(n,t)}function M(n,t,r){if(n){var e=0,u=n.length;if(typeof t!="number"&&t!=K){var o=-1;for(t=a(t,r);++o<u&&t(n[o],o,n);)e++}else if(e=t,e==K||r)return n[0];return p(n,0,bt(dt(0,e),u))}}function $(n,t){for(var r=-1,e=n?n.length:0,u=[];++r<e;){var o=n[r];Bt(o)?st.apply(u,t?o:$(o)):u.push(o)}return u}function z(n,t,r){var e=-1,u=n?n.length:0;
    17| if(typeof r=="number")e=(0>r?dt(0,u+r):r||0)-1;else if(r)return e=P(n,t),n[e]===t?e:-1;for(;++e<u;)if(n[e]===t)return e;return-1}function C(n,t,r){if(typeof t!="number"&&t!=K){var e=0,u=-1,o=n?n.length:0;for(t=a(t,r);++u<o&&t(n[u],u,n);)e++}else e=t==K||r?1:dt(0,t);return p(n,e)}function P(n,t,r,e){var u=0,o=n?n.length:u;for(r=r?a(r,e,1):G,t=r(t);u<o;)e=u+o>>>1,r(n[e])<t?u=e+1:o=e;return u}function U(n,t,r,e){var u=-1,o=n?n.length:0,i=[],f=i;for(typeof t=="function"&&(e=r,r=t,t=L),r&&(f=[],r=a(r,e));++u<o;){e=n[u];
    18| var c=r?r(e,u,n):e;(t?!u||f[f.length-1]!==c:0>z(f,c))&&(r&&f.push(c),i.push(e))}return i}function V(n,t){return Ft||ht&&2<arguments.length?ht.call.apply(ht,arguments):i(n,t,p(arguments,2))}function W(n){var r=p(arguments,1);return setTimeout(function(){n.apply(t,r)},1)}function G(n){return n}function H(n){F(m(n),function(t){var r=u[t]=n[t];u.prototype[t]=function(){var n=[this.__wrapped__];return st.apply(n,arguments),n=r.apply(u,n),this.__chain__&&(n=new u(n),n.__chain__=J),n}})}var J=!0,K=null,L=!1,Q=typeof exports=="object"&&exports,X=typeof module=="object"&&module&&module.exports==Q&&module,Y=typeof global=="object"&&global;
    19| Y.global===Y&&(n=Y);var Z=[],Y={},nt=0,tt=Y,rt=n._,et=/&(?:amp|lt|gt|quot|#39);/g,ut=RegExp("^"+(Y.valueOf+"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),ot=/($^)/,it=/[&<>"']/g,at=/['\n\r\t\u2028\u2029\\]/g,ft=Math.ceil,ct=Z.concat,lt=Math.floor,pt=Y.hasOwnProperty,st=Z.push,vt=Y.toString,ht=ut.test(ht=p.bind)&&ht,gt=ut.test(gt=Array.isArray)&&gt,yt=n.isFinite,mt=n.isNaN,_t=ut.test(_t=Object.keys)&&_t,dt=Math.max,bt=Math.min,jt=Math.random,wt="[object Arguments]",At="[object Array]",xt="[object Boolean]",Et="[object Date]",Ot="[object Number]",St="[object Object]",Nt="[object RegExp]",kt="[object String]",Y=!!n.attachEvent,Y=ht&&!/\n|true/.test(ht+Y),Ft=ht&&!Y,Rt=(Rt={0:1,length:1},Z.splice.call(Rt,0,1),Rt[0]),Tt=arguments.constructor==Object,qt={"boolean":L,"function":J,object:J,number:L,string:L,undefined:L},It={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};
    20| u.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,variable:""},v(arguments)||(v=function(n){return n?pt.call(n,"callee"):L});var Bt=gt||function(n){return Tt&&n instanceof Array||vt.call(n)==At},Dt=_t?function(n){return w(n)?_t(n):[]}:h,Mt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},$t=_(Mt);j(/x/)&&(j=function(n){return n instanceof Function||"[object Function]"==vt.call(n)});var zt=R;Y&&X&&typeof setImmediate=="function"&&(W=V(setImmediate,n)),u.after=function(n,t){return 1>n?t():function(){return 1>--n?t.apply(this,arguments):void 0
    21| }},u.bind=V,u.bindAll=function(n){for(var t=ct.apply(Z,arguments),r=1<t.length?0:(t=m(n),-1),e=t.length;++r<e;){var u=t[r];n[u]=V(n[u],n)}return n},u.compact=function(n){for(var t=-1,r=n?n.length:0,e=[];++t<r;){var u=n[t];u&&e.push(u)}return e},u.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length;r--;)t=[n[r].apply(this,t)];return t[0]}},u.countBy=function(n,t,r){var e={};return t=a(t,r),F(n,function(n,r,u){r=t(n,r,u)+"",pt.call(e,r)?e[r]++:e[r]=1}),e},u.debounce=function(n,t,r){function e(){a=K,r||(o=n.apply(i,u))
    22| }var u,o,i,a;return function(){var f=r&&!a;return u=arguments,i=this,clearTimeout(a),a=setTimeout(e,t),f&&(o=n.apply(i,u)),o}},u.defaults=y,u.defer=W,u.delay=function(n,r){var e=p(arguments,2);return setTimeout(function(){n.apply(t,e)},r)},u.difference=function(n){for(var t=-1,r=n.length,e=ct.apply(Z,arguments),u=[];++t<r;){var o=n[t];0>z(e,o,r)&&u.push(o)}return u},u.filter=N,u.flatten=$,u.forEach=F,u.functions=m,u.groupBy=function(n,t,r){var e={};return t=a(t,r),F(n,function(n,r,u){r=t(n,r,u)+"",(pt.call(e,r)?e[r]:e[r]=[]).push(n)
    23| }),e},u.initial=function(n,t,r){if(!n)return[];var e=0,u=n.length;if(typeof t!="number"&&t!=K){var o=u;for(t=a(t,r);o--&&t(n[o],o,n);)e++}else e=t==K||r?1:t||e;return p(n,0,bt(dt(0,u-e),u))},u.intersection=function(n){var t=arguments,r=t.length,e=-1,u=n?n.length:0,o=[];n:for(;++e<u;){var i=n[e];if(0>z(o,i)){for(var a=r;--a;)if(0>z(t[a],i))continue n;o.push(i)}}return o},u.invert=_,u.invoke=function(n,t){var r=p(arguments,2),e=-1,u=typeof t=="function",o=n?n.length:0,i=Array(typeof o=="number"?o:0);
    24| return F(n,function(n){i[++e]=(u?t:n[t]).apply(n,r)}),i},u.keys=Dt,u.map=R,u.max=T,u.memoize=function(n,t){var r={};return function(){var e=(t?t.apply(this,arguments):arguments[0])+"";return pt.call(r,e)?r[e]:r[e]=n.apply(this,arguments)}},u.min=function(n,t,r){var u=1/0,o=u;if(!t&&Bt(n)){r=-1;for(var i=n.length;++r<i;){var f=n[r];f<o&&(o=f)}}else t=a(t,r),e(n,function(n,r,e){r=t(n,r,e),r<u&&(u=r,o=n)});return o},u.object=function(n,t){for(var r=-1,e=n?n.length:0,u={};++r<e;){var o=n[r];t?u[o]=t[r]:u[o[0]]=o[1]
    25| }return u},u.omit=function(n){var t=ct.apply(Z,arguments),e={};return r(n,function(n,r){0>z(t,r,1)&&(e[r]=n)}),e},u.once=function(n){var t,r;return function(){return t?r:(t=J,r=n.apply(this,arguments),n=K,r)}},u.pairs=function(n){for(var t=-1,r=Dt(n),e=r.length,u=Array(e);++t<e;){var o=r[t];u[t]=[o,n[o]]}return u},u.partial=function(n){return i(n,p(arguments,1))},u.pick=function(n){for(var t=0,r=ct.apply(Z,arguments),e=r.length,u={};++t<e;){var o=r[t];o in n&&(u[o]=n[o])}return u},u.pluck=zt,u.range=function(n,t,r){n=+n||0,r=+r||1,t==K&&(t=n,n=0);
    26| var e=-1;t=dt(0,ft((t-n)/r));for(var u=Array(t);++e<t;)u[e]=n,n+=r;return u},u.reject=function(n,t,r){return t=a(t,r),N(n,function(n,r,e){return!t(n,r,e)})},u.rest=C,u.shuffle=function(n){var t=-1,r=n?n.length:0,e=Array(typeof r=="number"?r:0);return F(n,function(n){var r=lt(jt()*(++t+1));e[t]=e[r],e[r]=n}),e},u.sortBy=function(n,t,r){var e=-1,u=n?n.length:0,i=Array(typeof u=="number"?u:0);for(t=a(t,r),F(n,function(n,r,u){i[++e]={a:t(n,r,u),b:e,c:n}}),u=i.length,i.sort(o);u--;)i[u]=i[u].c;return i
    27| },u.tap=function(n,t){return t(n),n},u.throttle=function(n,t){function r(){a=new Date,i=K,u=n.apply(o,e)}var e,u,o,i,a=0;return function(){var f=new Date,c=t-(f-a);return e=arguments,o=this,0<c?i||(i=setTimeout(r,c)):(clearTimeout(i),i=K,a=f,u=n.apply(o,e)),u}},u.times=function(n,t,r){n=+n||0;for(var e=-1,u=Array(n);++e<n;)u[e]=t.call(r,e);return u},u.toArray=function(n){return n&&typeof n.length=="number"?p(n):E(n)},u.union=function(){return U(ct.apply(Z,arguments))},u.uniq=U,u.values=E,u.where=D,u.without=function(n){for(var t=-1,r=n.length,e=[];++t<r;){var u=n[t];
    28| 0>z(arguments,u,1)&&e.push(u)}return e},u.wrap=function(n,t){return function(){var r=[n];return st.apply(r,arguments),t.apply(this,r)}},u.zip=function(n){for(var t=-1,r=n?T(zt(arguments,"length")):0,e=Array(r);++t<r;)e[t]=zt(arguments,t);return e},u.collect=R,u.drop=C,u.each=F,u.extend=g,u.methods=m,u.select=N,u.tail=C,u.unique=U,u.clone=function(n){return w(n)?Bt(n)?p(n):g({},n):n},u.contains=O,u.escape=function(n){return n==K?"":(n+"").replace(it,c)},u.every=S,u.find=k,u.findWhere=function(n,t){return D(n,t,J)
    29| },u.has=function(n,t){return n?pt.call(n,t):L},u.identity=G,u.indexOf=z,u.isArguments=v,u.isArray=Bt,u.isBoolean=function(n){return n===J||n===L||vt.call(n)==xt},u.isDate=function(n){return n instanceof Date||vt.call(n)==Et},u.isElement=function(n){return n?1===n.nodeType:L},u.isEmpty=d,u.isEqual=b,u.isFinite=function(n){return yt(n)&&!mt(parseFloat(n))},u.isFunction=j,u.isNaN=function(n){return A(n)&&n!=+n},u.isNull=function(n){return n===K},u.isNumber=A,u.isObject=w,u.isRegExp=function(n){return n instanceof RegExp||vt.call(n)==Nt
    30| },u.isString=x,u.isUndefined=function(n){return typeof n=="undefined"},u.lastIndexOf=function(n,t,r){var e=n?n.length:0;for(typeof r=="number"&&(e=(0>r?dt(0,e+r):bt(r,e-1))+1);e--;)if(n[e]===t)return e;return-1},u.mixin=H,u.noConflict=function(){return n._=rt,this},u.random=function(n,t){return n==K&&t==K&&(t=1),n=+n||0,t==K&&(t=n,n=0),n+lt(jt()*((+t||0)-n+1))},u.reduce=q,u.reduceRight=I,u.result=function(n,t){var r=n?n[t]:K;return j(r)?n[t]():r},u.size=function(n){var t=n?n.length:0;return typeof t=="number"?t:Dt(n).length
    31| },u.some=B,u.sortedIndex=P,u.template=function(n,t,r){n||(n=""),r=y({},r,u.templateSettings);var e=0,o="__p+='",i=r.variable;n.replace(RegExp((r.escape||ot).source+"|"+(r.interpolate||ot).source+"|"+(r.evaluate||ot).source+"|$","g"),function(t,r,u,i,a){return o+=n.slice(e,a).replace(at,f),r&&(o+="'+_['escape']("+r+")+'"),i&&(o+="';"+i+";__p+='"),u&&(o+="'+((__t=("+u+"))==null?'':__t)+'"),e=a+t.length,t}),o+="';\n",i||(i="obj",o="with("+i+"||{}){"+o+"}"),o="function("+i+"){var __t,__p='',__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}"+o+"return __p}";
    32| try{var a=Function("_","return "+o)(u)}catch(c){throw c.source=o,c}return t?a(t):(a.source=o,a)},u.unescape=function(n){return n==K?"":(n+"").replace(et,s)},u.uniqueId=function(n){var t=++nt+"";return n?n+t:t},u.all=S,u.any=B,u.detect=k,u.foldl=q,u.foldr=I,u.include=O,u.inject=q,u.first=M,u.last=function(n,t,r){if(n){var e=0,u=n.length;if(typeof t!="number"&&t!=K){var o=u;for(t=a(t,r);o--&&t(n[o],o,n);)e++}else if(e=t,e==K||r)return n[u-1];return p(n,dt(0,u-e))}},u.take=M,u.head=M,u.chain=function(n){return n=new u(n),n.__chain__=J,n
    33| },u.VERSION="1.0.1",H(u),u.prototype.chain=function(){return this.__chain__=J,this},u.prototype.value=function(){return this.__wrapped__},e("pop push reverse shift sort splice unshift".split(" "),function(n){var t=Z[n];u.prototype[n]=function(){var n=this.__wrapped__;return t.apply(n,arguments),Rt&&0===n.length&&delete n[0],this}}),e(["concat","join","slice"],function(n){var t=Z[n];u.prototype[n]=function(){var n=t.apply(this.__wrapped__,arguments);return this.__chain__&&(n=new u(n),n.__chain__=J),n
    34| }}),Q?X?(X.exports=u)._=u:Q._=u:n._=u})(this);


# ====================================================================
# FILE: doc/parse.php
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-23 ---
     1| <?php
     2|   $file = isset($_GET['f']) ? $_GET['f'] : 'lodash';
     3|   $file = preg_replace('#(\.*[\/])+#', '', $file);
     4|   $file .= preg_match('/\.[a-z]+$/', $file) ? '' : '.js';
     5|   if (isset($_GET['o'])) {
     6|     $output = $_GET['o'];
     7|   } else if (isset($_SERVER['argv'][1])) {
     8|     $output = $_SERVER['argv'][1];
     9|   } else {
    10|     $output = basename($file);
    11|   }
    12|   /*--------------------------------------------------------------------------*/
    13|   require('../vendor/docdown/docdown.php');
    14|   $markdown = docdown(array(
    15|     'path'  => '../' . $file,
    16|     'title' => 'Lo-Dash <sup>v1.0.1</sup>',
    17|     'toc'   => 'categories',
    18|     'url'   => 'https://github.com/bestiejs/lodash/blob/master/lodash.js'
    19|   ));
    20|   file_put_contents($output . '.md', $markdown);
    21|   header('Content-Type: text/plain;charset=utf-8');
    22|   echo $markdown . PHP_EOL;
    23| ?>


# ====================================================================
# FILE: lodash.js
# Total hunks: 11
# ====================================================================
# --- HUNK 1: Lines 1-68 ---
     1| /**
     2|  * @license
     3|  * Lo-Dash 1.0.1 <http://lodash.com/>
     4|  * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
     5|  * Based on Underscore.js 1.4.4 <http://underscorejs.org/>
     6|  * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud Inc.
     7|  * Available under MIT license <http://lodash.com/license>
     8|  */
     9| ;(function(window, undefined) {
    10|   /** Detect free variable `exports` */
    11|   var freeExports = typeof exports == 'object' && exports;
    12|   /** Detect free variable `module` */
    13|   var freeModule = typeof module == 'object' && module && module.exports == freeExports && module;
    14|   /** Detect free variable `global` and use it as `window` */
    15|   var freeGlobal = typeof global == 'object' && global;
    16|   if (freeGlobal.global === freeGlobal) {
    17|     window = freeGlobal;
    18|   }
    19|   /** Used for array and object method references */
    20|   var arrayRef = [],
    21|       objectRef = {};
    22|   /** Used to generate unique IDs */
    23|   var idCounter = 0;
    24|   /** Used internally to indicate various things */
    25|   var indicatorObject = objectRef;
    26|   /** Used by `cachedContains` as the default size when optimizations are enabled for large arrays */
    27|   var largeArraySize = 30;
    28|   /** Used to restore the original `_` reference in `noConflict` */
    29|   var oldDash = window._;
    30|   /** Used to match HTML entities */
    31|   var reEscapedHtml = /&(?:amp|lt|gt|quot|#39);/g;
    32|   /** Used to match empty string literals in compiled template source */
    33|   var reEmptyStringLeading = /\b__p \+= '';/g,
    34|       reEmptyStringMiddle = /\b(__p \+=) '' \+/g,
    35|       reEmptyStringTrailing = /(__e\(.*?\)|\b__t\)) \+\n'';/g;
    36|   /** Used to match regexp flags from their coerced string values */
    37|   var reFlags = /\w*$/;
    38|   /** Used to detect if a method is native */
    39|   var reNative = RegExp('^' +
    40|     (objectRef.valueOf + '')
    41|       .replace(/[.*+?^${}()|[\]\\]/g, '\\$&')
    42|       .replace(/valueOf|for [^\]]+/g, '.+?') + '$'
    43|   );
    44|   /**
    45|    * Used to match ES6 template delimiters
    46|    * http://people.mozilla.org/~jorendorff/es6-draft.html#sec-7.8.6
    47|    */
    48|   var reEsTemplate = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;
    49|   /** Used to match "interpolate" template delimiters */
    50|   var reInterpolate = /<%=([\s\S]+?)%>/g;
    51|   /** Used to ensure capturing order of template delimiters */
    52|   var reNoMatch = /($^)/;
    53|   /** Used to match HTML characters */
    54|   var reUnescapedHtml = /[&<>"']/g;
    55|   /** Used to match unescaped characters in compiled string literals */
    56|   var reUnescapedString = /['\n\r\t\u2028\u2029\\]/g;
    57|   /** Used to fix the JScript [[DontEnum]] bug */
    58|   var shadowed = [
    59|     'constructor', 'hasOwnProperty', 'isPrototypeOf', 'propertyIsEnumerable',
    60|     'toLocaleString', 'toString', 'valueOf'
    61|   ];
    62|   /** Used to make template sourceURLs easier to identify */
    63|   var templateCounter = 0;
    64|   /** Native method shortcuts */
    65|   var ceil = Math.ceil,
    66|       concat = arrayRef.concat,
    67|       floor = Math.floor,
    68|       getPrototypeOf = reNative.test(getPrototypeOf = Object.getPrototypeOf) && getPrototypeOf,

# --- HUNK 2: Lines 132-172 ---
   132|     function ctor() { this.x = 1; }
   133|     ctor.prototype = { 'valueOf': 1, 'y': 1 };
   134|     for (var prop in new ctor) { props.push(prop); }
   135|     for (prop in arguments) { nonEnumArgs = !prop; }
   136|     hasDontEnumBug = !/valueOf/.test(props);
   137|     hasEnumPrototype = ctor.propertyIsEnumerable('prototype');
   138|     iteratesOwnLast = props[0] != 'x';
   139|   }(1));
   140|   /** Detect if `arguments` objects are `Object` objects (all but Opera < 10.5) */
   141|   var argsAreObjects = arguments.constructor == Object;
   142|   /** Detect if `arguments` objects [[Class]] is unresolvable (Firefox < 4, IE < 9) */
   143|   var noArgsClass = !isArguments(arguments);
   144|   /**
   145|    * Detect lack of support for accessing string characters by index:
   146|    *
   147|    * IE < 8 can't access characters by index and IE 8 can only access
   148|    * characters by index on string literals.
   149|    */
   150|   var noCharByIndex = ('x'[0] + Object('x')[0]) != 'xx';
   151|   /**
   152|    * Detect if a DOM node's [[Class]] is unresolvable (IE < 9)
   153|    * and that the JS engine won't error when attempting to coerce an object to
   154|    * a string without a `toString` function.
   155|    */
   156|   try {
   157|     var noNodeClass = toString.call(document) == objectClass && !({ 'toString': 0 } + '');
   158|   } catch(e) { }
   159|   /** Used to identify object classifications that `_.clone` supports */
   160|   var cloneableClasses = {};
   161|   cloneableClasses[funcClass] = false;
   162|   cloneableClasses[argsClass] = cloneableClasses[arrayClass] =
   163|   cloneableClasses[boolClass] = cloneableClasses[dateClass] =
   164|   cloneableClasses[numberClass] = cloneableClasses[objectClass] =
   165|   cloneableClasses[regexpClass] = cloneableClasses[stringClass] = true;
   166|   /** Used to lookup a built-in constructor by [[Class]] */
   167|   var ctorByClass = {};
   168|   ctorByClass[arrayClass] = Array;
   169|   ctorByClass[boolClass] = Boolean;
   170|   ctorByClass[dateClass] = Date;
   171|   ctorByClass[objectClass] = Object;
   172|   ctorByClass[numberClass] = Number;

# --- HUNK 3: Lines 895-938 ---
   895|    * @param {Function} [callback] The function to customize assigning values.
   896|    * @param {Mixed} [thisArg] The `this` binding of `callback`.
   897|    * @returns {Object} Returns the destination object.
   898|    * @example
   899|    *
   900|    * _.assign({ 'name': 'moe' }, { 'age': 40 });
   901|    * // => { 'name': 'moe', 'age': 40 }
   902|    *
   903|    * var defaults = _.partialRight(_.assign, function(a, b) {
   904|    *   return typeof a == 'undefined' ? b : a;
   905|    * });
   906|    *
   907|    * var food = { 'name': 'apple' };
   908|    * defaults(food, { 'name': 'banana', 'type': 'fruit' });
   909|    * // => { 'name': 'apple', 'type': 'fruit' }
   910|    */
   911|   var assign = createIterator(defaultsIteratorOptions, {
   912|     'top':
   913|       defaultsIteratorOptions.top.replace(';',
   914|         ';\n' +
   915|         "if (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n" +
   916|         '  var callback = createCallback(args[--argsLength - 1], args[argsLength--], 2);\n' +
   917|         "} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n" +
   918|         '  callback = args[--argsLength];\n' +
   919|         '}'
   920|       ),
   921|     'loop': 'result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]'
   922|   });
   923|   /**
   924|    * Creates a clone of `value`. If `deep` is `true`, nested objects will also
   925|    * be cloned, otherwise they will be assigned by reference. If a `callback`
   926|    * function is passed, it will be executed to produce the cloned values. If
   927|    * `callback` returns `undefined`, cloning will be handled by the method instead.
   928|    * The `callback` is bound to `thisArg` and invoked with one argument; (value).
   929|    *
   930|    * @static
   931|    * @memberOf _
   932|    * @category Objects
   933|    * @param {Mixed} value The value to clone.
   934|    * @param {Boolean} [deep=false] A flag to indicate a deep clone.
   935|    * @param {Function} [callback] The function to customize cloning values.
   936|    * @param {Mixed} [thisArg] The `this` binding of `callback`.
   937|    * @param- {Array} [stackA=[]] Internally used to track traversed source objects.
   938|    * @param- {Array} [stackB=[]] Internally used to associate clones with source counterparts.

# --- HUNK 4: Lines 1342-1398 ---
  1342|       if (ctorA != ctorB && !(
  1343|             isFunction(ctorA) && ctorA instanceof ctorA &&
  1344|             isFunction(ctorB) && ctorB instanceof ctorB
  1345|           )) {
  1346|         return false;
  1347|       }
  1348|     }
  1349|     stackA || (stackA = []);
  1350|     stackB || (stackB = []);
  1351|     var length = stackA.length;
  1352|     while (length--) {
  1353|       if (stackA[length] == a) {
  1354|         return stackB[length] == b;
  1355|       }
  1356|     }
  1357|     var size = 0;
  1358|     result = true;
  1359|     stackA.push(a);
  1360|     stackB.push(b);
  1361|     if (isArr) {
  1362|       length = a.length;
  1363|       size = b.length;
  1364|       result = size == a.length;
  1365|       if (!result && !whereIndicator) {
  1366|         return result;
  1367|       }
  1368|       while (size--) {
  1369|         var index = length,
  1370|             value = b[size];
  1371|         if (whereIndicator) {
  1372|           while (index--) {
  1373|             if ((result = isEqual(a[index], value, callback, thisArg, stackA, stackB))) {
  1374|               break;
  1375|             }
  1376|           }
  1377|         } else if (!(result = isEqual(a[size], value, callback, thisArg, stackA, stackB))) {
  1378|           break;
  1379|         }
  1380|       }
  1381|       return result;
  1382|     }
  1383|     forIn(b, function(value, key, b) {
  1384|       if (hasOwnProperty.call(b, key)) {
  1385|         size++;
  1386|         return (result = hasOwnProperty.call(a, key) && isEqual(a[key], value, callback, thisArg, stackA, stackB));
  1387|       }
  1388|     });
  1389|     if (result && !whereIndicator) {
  1390|       forIn(a, function(value, key, a) {
  1391|         if (hasOwnProperty.call(a, key)) {
  1392|           return (result = --size > -1);
  1393|         }
  1394|       });
  1395|     }
  1396|     return result;
  1397|   }
  1398|   /**

# --- HUNK 5: Lines 1671-1714 ---
  1671|    * });
  1672|    * // => { 'fruits': ['apple', 'banana'], 'vegetables': ['beet', 'carrot] }
  1673|    */
  1674|   function merge(object, source, deepIndicator) {
  1675|     var args = arguments,
  1676|         index = 0,
  1677|         length = 2;
  1678|     if (!isObject(object)) {
  1679|       return object;
  1680|     }
  1681|     if (deepIndicator === indicatorObject) {
  1682|       var callback = args[3],
  1683|           stackA = args[4],
  1684|           stackB = args[5];
  1685|     } else {
  1686|       stackA = [];
  1687|       stackB = [];
  1688|       if (typeof deepIndicator != 'number') {
  1689|         length = args.length;
  1690|       }
  1691|       if (length > 3 && typeof args[length - 2] == 'function') {
  1692|         callback = createCallback(args[--length - 1], args[length--], 2);
  1693|       } else if (length > 2 && typeof args[length - 1] == 'function') {
  1694|         callback = args[--length];
  1695|       }
  1696|     }
  1697|     while (++index < length) {
  1698|       (isArray(args[index]) ? forEach : forOwn)(args[index], function(source, key) {
  1699|         var found,
  1700|             isArr,
  1701|             result = source,
  1702|             value = object[key];
  1703|         if (source && ((isArr = isArray(source)) || isPlainObject(source))) {
  1704|           var stackLength = stackA.length;
  1705|           while (stackLength--) {
  1706|             if ((found = stackA[stackLength] == source)) {
  1707|               value = stackB[stackLength];
  1708|               break;
  1709|             }
  1710|           }
  1711|           if (!found) {
  1712|             value = isArr
  1713|               ? (isArray(value) ? value : [])
  1714|               : (isPlainObject(value) ? value : {});

# --- HUNK 6: Lines 1865-1913 ---
  1865|    * @category Objects
  1866|    * @param {Object} object The object to inspect.
  1867|    * @returns {Array} Returns a new array of property values.
  1868|    * @example
  1869|    *
  1870|    * _.values({ 'one': 1, 'two': 2, 'three': 3 });
  1871|    * // => [1, 2, 3]
  1872|    */
  1873|   function values(object) {
  1874|     var index = -1,
  1875|         props = keys(object),
  1876|         length = props.length,
  1877|         result = Array(length);
  1878|     while (++index < length) {
  1879|       result[index] = object[props[index]];
  1880|     }
  1881|     return result;
  1882|   }
  1883|   /*--------------------------------------------------------------------------*/
  1884|   /**
  1885|    * Creates an array of elements from the specified indexes, or keys, of the
  1886|    * `collection`. Indexes may be specified as individual arguments or as arrays
  1887|    * of indexes.
  1888|    *
  1889|    * @static
  1890|    * @memberOf _
  1891|    * @category Collections
  1892|    * @param {Array|Object|String} collection The collection to iterate over.
  1893|    * @param {Array|Number|String} [index1, index2, ...] The indexes of
  1894|    *  `collection` to retrieve, either as individual arguments or arrays.
  1895|    * @returns {Array} Returns a new array of elements corresponding to the
  1896|    *  provided indexes.
  1897|    * @example
  1898|    *
  1899|    * _.at(['a', 'b', 'c', 'd', 'e'], [0, 2, 4]);
  1900|    * // => ['a', 'c', 'e']
  1901|    *
  1902|    * _.at(['moe', 'larry', 'curly'], 0, 2);
  1903|    * // => ['moe', 'curly']
  1904|    */
  1905|   function at(collection) {
  1906|     var index = -1,
  1907|         props = concat.apply(arrayRef, slice(arguments, 1)),
  1908|         length = props.length,
  1909|         result = Array(length);
  1910|     if (noCharByIndex && isString(collection)) {
  1911|       collection = collection.split('');
  1912|     }
  1913|     while(++index < length) {

# --- HUNK 7: Lines 3852-3894 ---
  3852|     return setTimeout(function() { func.apply(undefined, args); }, wait);
  3853|   }
  3854|   /**
  3855|    * Defers executing the `func` function until the current call stack has cleared.
  3856|    * Additional arguments will be passed to `func` when it is invoked.
  3857|    *
  3858|    * @static
  3859|    * @memberOf _
  3860|    * @category Functions
  3861|    * @param {Function} func The function to defer.
  3862|    * @param {Mixed} [arg1, arg2, ...] Arguments to invoke the function with.
  3863|    * @returns {Number} Returns the `setTimeout` timeout id.
  3864|    * @example
  3865|    *
  3866|    * _.defer(function() { alert('deferred'); });
  3867|    * // returns from the function before `alert` is called
  3868|    */
  3869|   function defer(func) {
  3870|     var args = slice(arguments, 1);
  3871|     return setTimeout(function() { func.apply(undefined, args); }, 1);
  3872|   }
  3873|   if (isV8 && freeModule && typeof setImmediate == 'function') {
  3874|     defer = bind(setImmediate, window);
  3875|   }
  3876|   /**
  3877|    * Creates a function that memoizes the result of `func`. If `resolver` is
  3878|    * passed, it will be used to determine the cache key for storing the result
  3879|    * based on the arguments passed to the memoized function. By default, the first
  3880|    * argument passed to the memoized function is used as the cache key. The `func`
  3881|    * is executed with the `this` binding of the memoized function.
  3882|    *
  3883|    * @static
  3884|    * @memberOf _
  3885|    * @category Functions
  3886|    * @param {Function} func The function to have its output memoized.
  3887|    * @param {Function} [resolver] A function used to resolve the cache key.
  3888|    * @returns {Function} Returns the new memoizing function.
  3889|    * @example
  3890|    *
  3891|    * var fibonacci = _.memoize(function(n) {
  3892|    *   return n < 2 ? n : fibonacci(n - 1) + fibonacci(n - 2);
  3893|    * });
  3894|    */

# --- HUNK 8: Lines 4313-4353 ---
  4313|       }
  4314|       index = offset + match.length;
  4315|       return match;
  4316|     });
  4317|     source += "';\n";
  4318|     var variable = options.variable,
  4319|         hasVariable = variable;
  4320|     if (!hasVariable) {
  4321|       variable = 'obj';
  4322|       source = 'with (' + variable + ') {\n' + source + '\n}\n';
  4323|     }
  4324|     source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source)
  4325|       .replace(reEmptyStringMiddle, '$1')
  4326|       .replace(reEmptyStringTrailing, '$1;');
  4327|     source = 'function(' + variable + ') {\n' +
  4328|       (hasVariable ? '' : variable + ' || (' + variable + ' = {});\n') +
  4329|       "var __t, __p = '', __e = _.escape" +
  4330|       (isEvaluating
  4331|         ? ', __j = Array.prototype.join;\n' +
  4332|           "function print() { __p += __j.call(arguments, '') }\n"
  4333|         : ';\n'
  4334|       ) +
  4335|       source +
  4336|       'return __p\n}';
  4337|     var sourceURL = '\n/*\n//@ sourceURL=' + (options.sourceURL || '/lodash/template/source[' + (templateCounter++) + ']') + '\n*/';
  4338|     try {
  4339|       var result = Function(importsKeys, 'return ' + source + sourceURL).apply(undefined, importsValues);
  4340|     } catch(e) {
  4341|       e.source = source;
  4342|       throw e;
  4343|     }
  4344|     if (data) {
  4345|       return result(data);
  4346|     }
  4347|     result.source = source;
  4348|     return result;
  4349|   }
  4350|   /**
  4351|    * Executes the `callback` function `n` times, returning an array of the results
  4352|    * of each `callback` execution. The `callback` is bound to `thisArg` and invoked
  4353|    * with one argument; (index).

# --- HUNK 9: Lines 4601-4641 ---
  4601|   lodash.take = first;
  4602|   lodash.head = first;
  4603|   forOwn(lodash, function(func, methodName) {
  4604|     if (!lodash.prototype[methodName]) {
  4605|       lodash.prototype[methodName]= function(callback, thisArg) {
  4606|         var result = func(this.__wrapped__, callback, thisArg);
  4607|         return callback == null || (thisArg && typeof callback != 'function')
  4608|           ? result
  4609|           : new lodash(result);
  4610|       };
  4611|     }
  4612|   });
  4613|   /*--------------------------------------------------------------------------*/
  4614|   /**
  4615|    * The semantic version number.
  4616|    *
  4617|    * @static
  4618|    * @memberOf _
  4619|    * @type String
  4620|    */
  4621|   lodash.VERSION = '1.0.1';
  4622|   lodash.prototype.toString = wrapperToString;
  4623|   lodash.prototype.value = wrapperValueOf;
  4624|   lodash.prototype.valueOf = wrapperValueOf;
  4625|   each(['join', 'pop', 'shift'], function(methodName) {
  4626|     var func = arrayRef[methodName];
  4627|     lodash.prototype[methodName] = function() {
  4628|       return func.apply(this.__wrapped__, arguments);
  4629|     };
  4630|   });
  4631|   each(['push', 'reverse', 'sort', 'unshift'], function(methodName) {
  4632|     var func = arrayRef[methodName];
  4633|     lodash.prototype[methodName] = function() {
  4634|       func.apply(this.__wrapped__, arguments);
  4635|       return this;
  4636|     };
  4637|   });
  4638|   each(['concat', 'slice', 'splice'], function(methodName) {
  4639|     var func = arrayRef[methodName];
  4640|     lodash.prototype[methodName] = function() {
  4641|       return new lodash(func.apply(this.__wrapped__, arguments));

# --- HUNK 10: Lines 4648-4678 ---
  4648|       lodash.prototype[methodName] = function() {
  4649|         var value = this.__wrapped__,
  4650|             result = func.apply(value, arguments);
  4651|         if (value.length === 0) {
  4652|           delete value[0];
  4653|         }
  4654|         return isSplice ? new lodash(result) : result;
  4655|       };
  4656|     });
  4657|   }
  4658|   lodash._each = each;
  4659|   lodash._iteratorTemplate = iteratorTemplate;
  4660|   /*--------------------------------------------------------------------------*/
  4661|   if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {
  4662|     window._ = lodash;
  4663|     define(function() {
  4664|       return lodash;
  4665|     });
  4666|   }
  4667|   else if (freeExports) {
  4668|     if (freeModule) {
  4669|       (freeModule.exports = lodash)._ = lodash;
  4670|     }
  4671|     else {
  4672|       freeExports._ = lodash;
  4673|     }
  4674|   }
  4675|   else {
  4676|     window._ = lodash;
  4677|   }
  4678| }(this));


# ====================================================================
# FILE: vendor/backbone/backbone.js
# Total hunks: 7
# ====================================================================
# --- HUNK 1: Lines 21-171 ---
    21|   };
    22|   Backbone.emulateHTTP = false;
    23|   Backbone.emulateJSON = false;
    24|   var eventSplitter = /\s+/;
    25|   var eventsApi = function(obj, action, name, rest) {
    26|     if (!name) return true;
    27|     if (typeof name === 'object') {
    28|       for (var key in name) {
    29|         obj[action].apply(obj, [key, name[key]].concat(rest));
    30|       }
    31|     } else if (eventSplitter.test(name)) {
    32|       var names = name.split(eventSplitter);
    33|       for (var i = 0, l = names.length; i < l; i++) {
    34|         obj[action].apply(obj, [names[i]].concat(rest));
    35|       }
    36|     } else {
    37|       return true;
    38|     }
    39|   };
    40|   var triggerEvents = function(events, args) {
    41|     var ev, i = -1, l = events.length;
    42|     switch (args.length) {
    43|     case 0: while (++i < l) (ev = events[i]).callback.call(ev.ctx);
    44|     return;
    45|     case 1: while (++i < l) (ev = events[i]).callback.call(ev.ctx, args[0]);
    46|     return;
    47|     case 2: while (++i < l) (ev = events[i]).callback.call(ev.ctx, args[0], args[1]);
    48|     return;
    49|     case 3: while (++i < l) (ev = events[i]).callback.call(ev.ctx, args[0], args[1], args[2]);
    50|     return;
    51|     default: while (++i < l) (ev = events[i]).callback.apply(ev.ctx, args);
    52|     }
    53|   };
    54|   var Events = Backbone.Events = {
    55|     on: function(name, callback, context) {
    56|       if (!(eventsApi(this, 'on', name, [callback, context]) && callback)) return this;
    57|       this._events || (this._events = {});
    58|       var list = this._events[name] || (this._events[name] = []);
    59|       list.push({callback: callback, context: context, ctx: context || this});
    60|       return this;
    61|     },
    62|     once: function(name, callback, context) {
    63|       if (!(eventsApi(this, 'once', name, [callback, context]) && callback)) return this;
    64|       var self = this;
    65|       var once = _.once(function() {
    66|         self.off(name, once);
    67|         callback.apply(this, arguments);
    68|       });
    69|       once._callback = callback;
    70|       this.on(name, once, context);
    71|       return this;
    72|     },
    73|     off: function(name, callback, context) {
    74|       var list, ev, events, names, i, l, j, k;
    75|       if (!this._events || !eventsApi(this, 'off', name, [callback, context])) return this;
    76|       if (!name && !callback && !context) {
    77|         this._events = {};
    78|         return this;
    79|       }
    80|       names = name ? [name] : _.keys(this._events);
    81|       for (i = 0, l = names.length; i < l; i++) {
    82|         name = names[i];
    83|         if (list = this._events[name]) {
    84|           events = [];
    85|           if (callback || context) {
    86|             for (j = 0, k = list.length; j < k; j++) {
    87|               ev = list[j];
    88|               if ((callback && callback !== ev.callback &&
    89|                                callback !== ev.callback._callback) ||
    90|                   (context && context !== ev.context)) {
    91|                 events.push(ev);
    92|               }
    93|             }
    94|           }
    95|           this._events[name] = events;
    96|         }
    97|       }
    98|       return this;
    99|     },
   100|     trigger: function(name) {
   101|       if (!this._events) return this;
   102|       var args = slice.call(arguments, 1);
   103|       if (!eventsApi(this, 'trigger', name, args)) return this;
   104|       var events = this._events[name];
   105|       var allEvents = this._events.all;
   106|       if (events) triggerEvents(events, args);
   107|       if (allEvents) triggerEvents(allEvents, arguments);
   108|       return this;
   109|     },
   110|     listenTo: function(obj, name, callback) {
   111|       var listeners = this._listeners || (this._listeners = {});
   112|       var id = obj._listenerId || (obj._listenerId = _.uniqueId('l'));
   113|       listeners[id] = obj;
   114|       obj.on(name, typeof name === 'object' ? this : callback, this);
   115|       return this;
   116|     },
   117|     stopListening: function(obj, name, callback) {
   118|       var listeners = this._listeners;
   119|       if (!listeners) return;
   120|       if (obj) {
   121|         obj.off(name, typeof name === 'object' ? this : callback, this);
   122|         if (!name && !callback) delete listeners[obj._listenerId];
   123|       } else {
   124|         if (typeof name === 'object') callback = this;
   125|         for (var id in listeners) {
   126|           listeners[id].off(name, callback, this);
   127|         }
   128|         this._listeners = {};
   129|       }
   130|       return this;
   131|     }
   132|   };
   133|   Events.bind   = Events.on;
   134|   Events.unbind = Events.off;
   135|   _.extend(Backbone, Events);
   136|   var Model = Backbone.Model = function(attributes, options) {
   137|     var defaults;
   138|     var attrs = attributes || {};
   139|     this.cid = _.uniqueId('c');
   140|     this.attributes = {};
   141|     if (options && options.collection) this.collection = options.collection;
   142|     if (options && options.parse) attrs = this.parse(attrs, options) || {};
   143|     if (defaults = _.result(this, 'defaults')) {
   144|       attrs = _.defaults({}, attrs, defaults);
   145|     }
   146|     this.set(attrs, options);
   147|     this.changed = {};
   148|     this.initialize.apply(this, arguments);
   149|   };
   150|   _.extend(Model.prototype, Events, {
   151|     changed: null,
   152|     idAttribute: 'id',
   153|     initialize: function(){},
   154|     toJSON: function(options) {
   155|       return _.clone(this.attributes);
   156|     },
   157|     sync: function() {
   158|       return Backbone.sync.apply(this, arguments);
   159|     },
   160|     get: function(attr) {
   161|       return this.attributes[attr];
   162|     },
   163|     escape: function(attr) {
   164|       return _.escape(this.get(attr));
   165|     },
   166|     has: function(attr) {
   167|       return this.get(attr) != null;
   168|     },
   169|     set: function(key, val, options) {
   170|       var attr, attrs, unset, changes, silent, changing, prev, current;
   171|       if (key == null) return this;

# --- HUNK 2: Lines 230-383 ---
   230|     changedAttributes: function(diff) {
   231|       if (!diff) return this.hasChanged() ? _.clone(this.changed) : false;
   232|       var val, changed = false;
   233|       var old = this._changing ? this._previousAttributes : this.attributes;
   234|       for (var attr in diff) {
   235|         if (_.isEqual(old[attr], (val = diff[attr]))) continue;
   236|         (changed || (changed = {}))[attr] = val;
   237|       }
   238|       return changed;
   239|     },
   240|     previous: function(attr) {
   241|       if (attr == null || !this._previousAttributes) return null;
   242|       return this._previousAttributes[attr];
   243|     },
   244|     previousAttributes: function() {
   245|       return _.clone(this._previousAttributes);
   246|     },
   247|     fetch: function(options) {
   248|       options = options ? _.clone(options) : {};
   249|       if (options.parse === void 0) options.parse = true;
   250|       var success = options.success;
   251|       options.success = function(model, resp, options) {
   252|         if (!model.set(model.parse(resp, options), options)) return false;
   253|         if (success) success(model, resp, options);
   254|       };
   255|       return this.sync('read', this, options);
   256|     },
   257|     save: function(key, val, options) {
   258|       var attrs, success, method, xhr, attributes = this.attributes;
   259|       if (key == null || typeof key === 'object') {
   260|         attrs = key;
   261|         options = val;
   262|       } else {
   263|         (attrs = {})[key] = val;
   264|       }
   265|       if (attrs && (!options || !options.wait) && !this.set(attrs, options)) return false;
   266|       options = _.extend({validate: true}, options);
   267|       if (!this._validate(attrs, options)) return false;
   268|       if (attrs && options.wait) {
   269|         this.attributes = _.extend({}, attributes, attrs);
   270|       }
   271|       if (options.parse === void 0) options.parse = true;
   272|       success = options.success;
   273|       options.success = function(model, resp, options) {
   274|         model.attributes = attributes;
   275|         var serverAttrs = model.parse(resp, options);
   276|         if (options.wait) serverAttrs = _.extend(attrs || {}, serverAttrs);
   277|         if (_.isObject(serverAttrs) && !model.set(serverAttrs, options)) {
   278|           return false;
   279|         }
   280|         if (success) success(model, resp, options);
   281|       };
   282|       method = this.isNew() ? 'create' : (options.patch ? 'patch' : 'update');
   283|       if (method === 'patch') options.attrs = attrs;
   284|       xhr = this.sync(method, this, options);
   285|       if (attrs && options.wait) this.attributes = attributes;
   286|       return xhr;
   287|     },
   288|     destroy: function(options) {
   289|       options = options ? _.clone(options) : {};
   290|       var model = this;
   291|       var success = options.success;
   292|       var destroy = function() {
   293|         model.trigger('destroy', model, model.collection, options);
   294|       };
   295|       options.success = function(model, resp, options) {
   296|         if (options.wait || model.isNew()) destroy();
   297|         if (success) success(model, resp, options);
   298|       };
   299|       if (this.isNew()) {
   300|         options.success(this, null, options);
   301|         return false;
   302|       }
   303|       var xhr = this.sync('delete', this, options);
   304|       if (!options.wait) destroy();
   305|       return xhr;
   306|     },
   307|     url: function() {
   308|       var base = _.result(this, 'urlRoot') || _.result(this.collection, 'url') || urlError();
   309|       if (this.isNew()) return base;
   310|       return base + (base.charAt(base.length - 1) === '/' ? '' : '/') + encodeURIComponent(this.id);
   311|     },
   312|     parse: function(resp, options) {
   313|       return resp;
   314|     },
   315|     clone: function() {
   316|       return new this.constructor(this.attributes);
   317|     },
   318|     isNew: function() {
   319|       return this.id == null;
   320|     },
   321|     isValid: function(options) {
   322|       return !this.validate || !this.validate(this.attributes, options);
   323|     },
   324|     _validate: function(attrs, options) {
   325|       if (!options.validate || !this.validate) return true;
   326|       attrs = _.extend({}, this.attributes, attrs);
   327|       var error = this.validationError = this.validate(attrs, options) || null;
   328|       if (!error) return true;
   329|       this.trigger('invalid', this, error, options || {});
   330|       return false;
   331|     }
   332|   });
   333|   var Collection = Backbone.Collection = function(models, options) {
   334|     options || (options = {});
   335|     if (options.model) this.model = options.model;
   336|     if (options.comparator !== void 0) this.comparator = options.comparator;
   337|     this.models = [];
   338|     this._reset();
   339|     this.initialize.apply(this, arguments);
   340|     if (models) this.reset(models, _.extend({silent: true}, options));
   341|   };
   342|   _.extend(Collection.prototype, Events, {
   343|     model: Model,
   344|     initialize: function(){},
   345|     toJSON: function(options) {
   346|       return this.map(function(model){ return model.toJSON(options); });
   347|     },
   348|     sync: function() {
   349|       return Backbone.sync.apply(this, arguments);
   350|     },
   351|     add: function(models, options) {
   352|       models = _.isArray(models) ? models.slice() : [models];
   353|       options || (options = {});
   354|       var i, l, model, attrs, existing, doSort, add, at, sort, sortAttr;
   355|       add = [];
   356|       at = options.at;
   357|       sort = this.comparator && (at == null) && options.sort != false;
   358|       sortAttr = _.isString(this.comparator) ? this.comparator : null;
   359|       for (i = 0, l = models.length; i < l; i++) {
   360|         if (!(model = this._prepareModel(attrs = models[i], options))) {
   361|           this.trigger('invalid', this, attrs, options);
   362|           continue;
   363|         }
   364|         if (existing = this.get(model)) {
   365|           if (options.merge) {
   366|             existing.set(attrs === model ? model.attributes : attrs, options);
   367|             if (sort && !doSort && existing.hasChanged(sortAttr)) doSort = true;
   368|           }
   369|           continue;
   370|         }
   371|         add.push(model);
   372|         model.on('all', this._onModelEvent, this);
   373|         this._byId[model.cid] = model;
   374|         if (model.id != null) this._byId[model.id] = model;
   375|       }
   376|       if (add.length) {
   377|         if (sort) doSort = true;
   378|         this.length += add.length;
   379|         if (at != null) {
   380|           splice.apply(this.models, [at, 0].concat(add));
   381|         } else {
   382|           push.apply(this.models, add);
   383|         }

# --- HUNK 3: Lines 418-569 ---
   418|     pop: function(options) {
   419|       var model = this.at(this.length - 1);
   420|       this.remove(model, options);
   421|       return model;
   422|     },
   423|     unshift: function(model, options) {
   424|       model = this._prepareModel(model, options);
   425|       this.add(model, _.extend({at: 0}, options));
   426|       return model;
   427|     },
   428|     shift: function(options) {
   429|       var model = this.at(0);
   430|       this.remove(model, options);
   431|       return model;
   432|     },
   433|     slice: function(begin, end) {
   434|       return this.models.slice(begin, end);
   435|     },
   436|     get: function(obj) {
   437|       if (obj == null) return void 0;
   438|       this._idAttr || (this._idAttr = this.model.prototype.idAttribute);
   439|       return this._byId[obj.id || obj.cid || obj[this._idAttr] || obj];
   440|     },
   441|     at: function(index) {
   442|       return this.models[index];
   443|     },
   444|     where: function(attrs) {
   445|       if (_.isEmpty(attrs)) return [];
   446|       return this.filter(function(model) {
   447|         for (var key in attrs) {
   448|           if (attrs[key] !== model.get(key)) return false;
   449|         }
   450|         return true;
   451|       });
   452|     },
   453|     sort: function(options) {
   454|       if (!this.comparator) {
   455|         throw new Error('Cannot sort a set without a comparator');
   456|       }
   457|       options || (options = {});
   458|       if (_.isString(this.comparator) || this.comparator.length === 1) {
   459|         this.models = this.sortBy(this.comparator, this);
   460|       } else {
   461|         this.models.sort(_.bind(this.comparator, this));
   462|       }
   463|       if (!options.silent) this.trigger('sort', this, options);
   464|       return this;
   465|     },
   466|     pluck: function(attr) {
   467|       return _.invoke(this.models, 'get', attr);
   468|     },
   469|     update: function(models, options) {
   470|       options = _.extend({add: true, merge: true, remove: true}, options);
   471|       if (options.parse) models = this.parse(models, options);
   472|       var model, i, l, existing;
   473|       var add = [], remove = [], modelMap = {};
   474|       if (!_.isArray(models)) models = models ? [models] : [];
   475|       if (options.add && !options.remove) return this.add(models, options);
   476|       for (i = 0, l = models.length; i < l; i++) {
   477|         model = models[i];
   478|         existing = this.get(model);
   479|         if (options.remove && existing) modelMap[existing.cid] = true;
   480|         if ((options.add && !existing) || (options.merge && existing)) {
   481|           add.push(model);
   482|         }
   483|       }
   484|       if (options.remove) {
   485|         for (i = 0, l = this.models.length; i < l; i++) {
   486|           model = this.models[i];
   487|           if (!modelMap[model.cid]) remove.push(model);
   488|         }
   489|       }
   490|       if (remove.length) this.remove(remove, options);
   491|       if (add.length) this.add(add, options);
   492|       return this;
   493|     },
   494|     reset: function(models, options) {
   495|       options || (options = {});
   496|       if (options.parse) models = this.parse(models, options);
   497|       for (var i = 0, l = this.models.length; i < l; i++) {
   498|         this._removeReference(this.models[i]);
   499|       }
   500|       options.previousModels = this.models.slice();
   501|       this._reset();
   502|       if (models) this.add(models, _.extend({silent: true}, options));
   503|       if (!options.silent) this.trigger('reset', this, options);
   504|       return this;
   505|     },
   506|     fetch: function(options) {
   507|       options = options ? _.clone(options) : {};
   508|       if (options.parse === void 0) options.parse = true;
   509|       var success = options.success;
   510|       options.success = function(collection, resp, options) {
   511|         var method = options.update ? 'update' : 'reset';
   512|         collection[method](resp, options);
   513|         if (success) success(collection, resp, options);
   514|       };
   515|       return this.sync('read', this, options);
   516|     },
   517|     create: function(model, options) {
   518|       options = options ? _.clone(options) : {};
   519|       if (!(model = this._prepareModel(model, options))) return false;
   520|       if (!options.wait) this.add(model, options);
   521|       var collection = this;
   522|       var success = options.success;
   523|       options.success = function(model, resp, options) {
   524|         if (options.wait) collection.add(model, options);
   525|         if (success) success(model, resp, options);
   526|       };
   527|       model.save(null, options);
   528|       return model;
   529|     },
   530|     parse: function(resp, options) {
   531|       return resp;
   532|     },
   533|     clone: function() {
   534|       return new this.constructor(this.models);
   535|     },
   536|     _reset: function() {
   537|       this.length = 0;
   538|       this.models.length = 0;
   539|       this._byId  = {};
   540|     },
   541|     _prepareModel: function(attrs, options) {
   542|       if (attrs instanceof Model) {
   543|         if (!attrs.collection) attrs.collection = this;
   544|         return attrs;
   545|       }
   546|       options || (options = {});
   547|       options.collection = this;
   548|       var model = new this.model(attrs, options);
   549|       if (!model._validate(attrs, options)) return false;
   550|       return model;
   551|     },
   552|     _removeReference: function(model) {
   553|       if (this === model.collection) delete model.collection;
   554|       model.off('all', this._onModelEvent, this);
   555|     },
   556|     _onModelEvent: function(event, model, collection, options) {
   557|       if ((event === 'add' || event === 'remove') && collection !== this) return;
   558|       if (event === 'destroy') this.remove(model, options);
   559|       if (model && event === 'change:' + model.idAttribute) {
   560|         delete this._byId[model.previous(model.idAttribute)];
   561|         if (model.id != null) this._byId[model.id] = model;
   562|       }
   563|       this.trigger.apply(this, arguments);
   564|     },
   565|     sortedIndex: function (model, value, context) {
   566|       value || (value = this.comparator);
   567|       var iterator = _.isFunction(value) ? value : function(model) {
   568|         return model.get(value);
   569|       };

# --- HUNK 4: Lines 778-836 ---
   778|     $: function(selector) {
   779|       return this.$el.find(selector);
   780|     },
   781|     initialize: function(){},
   782|     render: function() {
   783|       return this;
   784|     },
   785|     remove: function() {
   786|       this.$el.remove();
   787|       this.stopListening();
   788|       return this;
   789|     },
   790|     setElement: function(element, delegate) {
   791|       if (this.$el) this.undelegateEvents();
   792|       this.$el = element instanceof Backbone.$ ? element : Backbone.$(element);
   793|       this.el = this.$el[0];
   794|       if (delegate !== false) this.delegateEvents();
   795|       return this;
   796|     },
   797|     delegateEvents: function(events) {
   798|       if (!(events || (events = _.result(this, 'events')))) return;
   799|       this.undelegateEvents();
   800|       for (var key in events) {
   801|         var method = events[key];
   802|         if (!_.isFunction(method)) method = this[events[key]];
   803|         if (!method) throw new Error('Method "' + events[key] + '" does not exist');
   804|         var match = key.match(delegateEventSplitter);
   805|         var eventName = match[1], selector = match[2];
   806|         method = _.bind(method, this);
   807|         eventName += '.delegateEvents' + this.cid;
   808|         if (selector === '') {
   809|           this.$el.on(eventName, method);
   810|         } else {
   811|           this.$el.on(eventName, selector, method);
   812|         }
   813|       }
   814|     },
   815|     undelegateEvents: function() {
   816|       this.$el.off('.delegateEvents' + this.cid);
   817|     },
   818|     _configure: function(options) {
   819|       if (this.options) options = _.extend({}, _.result(this, 'options'), options);
   820|       _.extend(this, _.pick(options, viewOptions));
   821|       this.options = options;
   822|     },
   823|     _ensureElement: function() {
   824|       if (!this.el) {
   825|         var attrs = _.extend({}, _.result(this, 'attributes'));
   826|         if (this.id) attrs.id = _.result(this, 'id');
   827|         if (this.className) attrs['class'] = _.result(this, 'className');
   828|         var $el = Backbone.$('<' + _.result(this, 'tagName') + '>').attr(attrs);
   829|         this.setElement($el, false);
   830|       } else {
   831|         this.setElement(_.result(this, 'el'), false);
   832|       }
   833|     }
   834|   });
   835|   var methodMap = {
   836|     'create': 'POST',

# --- HUNK 5: Lines 852-909 ---
   852|     if (options.data == null && model && (method === 'create' || method === 'update' || method === 'patch')) {
   853|       params.contentType = 'application/json';
   854|       params.data = JSON.stringify(options.attrs || model.toJSON(options));
   855|     }
   856|     if (options.emulateJSON) {
   857|       params.contentType = 'application/x-www-form-urlencoded';
   858|       params.data = params.data ? {model: params.data} : {};
   859|     }
   860|     if (options.emulateHTTP && (type === 'PUT' || type === 'DELETE' || type === 'PATCH')) {
   861|       params.type = 'POST';
   862|       if (options.emulateJSON) params.data._method = type;
   863|       var beforeSend = options.beforeSend;
   864|       options.beforeSend = function(xhr) {
   865|         xhr.setRequestHeader('X-HTTP-Method-Override', type);
   866|         if (beforeSend) return beforeSend.apply(this, arguments);
   867|       };
   868|     }
   869|     if (params.type !== 'GET' && !options.emulateJSON) {
   870|       params.processData = false;
   871|     }
   872|     var success = options.success;
   873|     options.success = function(resp) {
   874|       if (success) success(model, resp, options);
   875|       model.trigger('sync', model, resp, options);
   876|     };
   877|     var error = options.error;
   878|     options.error = function(xhr) {
   879|       if (error) error(model, xhr, options);
   880|       model.trigger('error', model, xhr, options);
   881|     };
   882|     var xhr = options.xhr = Backbone.ajax(_.extend(params, options));
   883|     model.trigger('request', model, xhr, options);
   884|     return xhr;
   885|   };
   886|   Backbone.ajax = function() {
   887|     return Backbone.$.ajax.apply(Backbone.$, arguments);
   888|   };
   889|   var extend = function(protoProps, staticProps) {
   890|     var parent = this;
   891|     var child;
   892|     if (protoProps && _.has(protoProps, 'constructor')) {
   893|       child = protoProps.constructor;
   894|     } else {
   895|       child = function(){ return parent.apply(this, arguments); };
   896|     }
   897|     _.extend(child, parent, staticProps);
   898|     var Surrogate = function(){ this.constructor = child; };
   899|     Surrogate.prototype = parent.prototype;
   900|     child.prototype = new Surrogate;
   901|     if (protoProps) _.extend(child.prototype, protoProps);
   902|     child.__super__ = parent.prototype;
   903|     return child;
   904|   };
   905|   Model.extend = Collection.extend = Router.extend = View.extend = History.extend = extend;
   906|   var urlError = function() {
   907|     throw new Error('A "url" property or function must be specified');
   908|   };
   909| }).call(this);

