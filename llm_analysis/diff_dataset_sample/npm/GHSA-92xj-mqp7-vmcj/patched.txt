# ====================================================================
# FILE: karma.conf.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 15-55 ---
    15|     preprocessors.push(bundler);
    16|   } else if(bundler === 'webpack') {
    17|     preprocessors.push(bundler);
    18|     preprocessors.push('sourcemap');
    19|     files.push('tests/karma/web-worker-rsa.js');
    20|   } else {
    21|     throw Error('Unknown bundler');
    22|   }
    23|   config.set({
    24|     basePath: '',
    25|     frameworks: frameworks,
    26|     files: files,
    27|     exclude: [
    28|     ],
    29|     preprocessors: {
    30|       'tests/unit/**.js': preprocessors,
    31|       'tests/karma/**.js': preprocessors,
    32|       'lib/prime.worker.js': workerPreprocessors
    33|     },
    34|     webpack: {
    35|       mode: 'development',
    36|       devtool: 'inline-source-map',
    37|       node: {
    38|         Buffer: false,
    39|         process: false,
    40|         crypto: false,
    41|         setImmediate: false
    42|       }
    43|     },
    44|     browserify: {
    45|       debug: true
    46|     },
    47|     reporters: ['mocha'],
    48|     port: 9876,
    49|     colors: true,
    50|     logLevel: config.LOG_INFO,
    51|     autoWatch: false,
    52|     browsers: ['ChromeHeadless'],
    53|     customLaunchers: {
    54|       IE9: {
    55|         base: 'IE',


# ====================================================================
# FILE: lib/util.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 2164-2203 ---
  2164| /**
  2165|  * Makes a URI out of a path, an object with query parameters, and a
  2166|  * fragment. Uses jQuery.param() internally for query string creation.
  2167|  * If the path is an array, it will be joined with '/'.
  2168|  *
  2169|  * @param path string path or array of strings.
  2170|  * @param query object with query parameters. (optional)
  2171|  * @param fragment fragment string. (optional)
  2172|  *
  2173|  * @return string object with request parameters.
  2174|  */
  2175| util.makeLink = function(path, query, fragment) {
  2176|   path = jQuery.isArray(path) ? path.join('/') : path;
  2177|   var qstr = jQuery.param(query || {});
  2178|   fragment = fragment || '';
  2179|   return path +
  2180|     ((qstr.length > 0) ? ('?' + qstr) : '') +
  2181|     ((fragment.length > 0) ? ('#' + fragment) : '');
  2182| };
  2183| /**
  2184|  * Check if an object is empty.
  2185|  *
  2186|  * Taken from:
  2187|  * http://stackoverflow.com/questions/679915/how-do-i-test-for-an-empty-javascript-object-from-json/679937#679937
  2188|  *
  2189|  * @param object the object to check.
  2190|  */
  2191| util.isEmpty = function(obj) {
  2192|   for(var prop in obj) {
  2193|     if(obj.hasOwnProperty(prop)) {
  2194|       return false;
  2195|     }
  2196|   }
  2197|   return true;
  2198| };
  2199| /**
  2200|  * Format with simple printf-style interpolation.
  2201|  *
  2202|  * %%: literal '%'
  2203|  * %s,%o: convert next argument into a string.


# ====================================================================
# FILE: webpack.config.js
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-84 ---
     1| /**
     2|  * Forge webpack build rules.
     3|  *
     4|  * @author Digital Bazaar, Inc.
     5|  *
     6|  * Copyright 2011-2016 Digital Bazaar, Inc.
     7|  */
     8| const path = require('path');
     9| module.exports = [];
    10| const outputs = [
    11|   {
    12|     entry: ['./lib/index.js'],
    13|     filenameBase: 'forge'
    14|   },
    15|   {
    16|     entry: ['./lib/index.all.js'],
    17|     filenameBase: 'forge.all'
    18|   },
    19|   {
    20|     entry: ['./lib/prime.worker.js', './lib/forge.js'],
    21|     filenameBase: 'prime.worker',
    22|     library: null,
    23|     libraryTarget: null
    24|   }
    25| ];
    26| outputs.forEach(info => {
    27|   const common = {
    28|     entry: {
    29|       forge: info.entry
    30|     },
    31|     node: {
    32|       Buffer: false,
    33|       process: false,
    34|       crypto: false,
    35|       setImmediate: false
    36|     }
    37|   };
    38|   const bundle = Object.assign({}, common, {
    39|     mode: 'development',
    40|     output: {
    41|       path: path.join(__dirname, 'dist'),
    42|       filename: info.filenameBase + '.js',
    43|       library: info.library || '[name]',
    44|       libraryTarget: info.libraryTarget || 'umd'
    45|     }
    46|   });
    47|   if(info.library === null) {
    48|     delete bundle.output.library;
    49|   }
    50|   if(info.libraryTarget === null) {
    51|     delete bundle.output.libraryTarget;
    52|   }
    53|   const minify = Object.assign({}, common, {
    54|     mode: 'production',
    55|     output: {
    56|       path: path.join(__dirname, 'dist'),
    57|       filename: info.filenameBase + '.min.js',
    58|       library: info.library || '[name]',
    59|       libraryTarget: info.libraryTarget || 'umd'
    60|     },
    61|     devtool: 'cheap-module-source-map',
    62|     plugins: [
    63|       /*
    64|       new webpack.optimize.UglifyJsPlugin({
    65|         sourceMap: true,
    66|         compress: {
    67|           warnings: true
    68|         },
    69|         output: {
    70|           comments: false
    71|         }
    72|       })
    73|       */
    74|     ]
    75|   });
    76|   if(info.library === null) {
    77|     delete minify.output.library;
    78|   }
    79|   if(info.libraryTarget === null) {
    80|     delete minify.output.libraryTarget;
    81|   }
    82|   module.exports.push(bundle);
    83|   module.exports.push(minify);
    84| });

