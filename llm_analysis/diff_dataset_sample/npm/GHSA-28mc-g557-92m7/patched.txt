# ====================================================================
# FILE: index.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-20 ---
     1| import assignWith from 'lodash/assignWith.js'
     2| import { isPlainObject, isDefined } from 'typical'
     3| function customiser (previousValue, newValue, key, object, source) {
     4|   /* deep merge plain objects */
     5|   if (isPlainObject(previousValue) && isPlainObject(newValue)) {
     6|     return assignWith(previousValue, newValue, customiser)
     7|     /* overwrite arrays if the new array has items */
     8|   } else if (Array.isArray(previousValue) && Array.isArray(newValue) && newValue.length) {
     9|     return newValue
    10|     /* ignore incoming arrays if empty */
    11|   } else if (Array.isArray(newValue) && !newValue.length) {
    12|     return previousValue
    13|   } else if (!isDefined(previousValue) && Array.isArray(newValue)) {
    14|     return newValue
    15|   }
    16| }
    17| function deepMerge (...args) {
    18|   return assignWith(...args, customiser)
    19| }
    20| export default deepMerge


# ====================================================================
# FILE: rollup.config.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-16 ---
     1| import { nodeResolve } from '@rollup/plugin-node-resolve'
     2| import commonjs from '@rollup/plugin-commonjs'
     3| export default [
     4|   {
     5|     input: 'index.js',
     6|     output: {
     7|       file: 'dist/index.mjs',
     8|       format: 'esm'
     9|     },
    10|     external: [],
    11|     plugins: [
    12|       commonjs(),
    13|       nodeResolve({ preferBuiltins: true })
    14|     ]
    15|   }
    16| ]

