--- a/lib/phoenix_html/tag.ex
+++ b/lib/phoenix_html/tag.ex
@@ -86,55 +86,54 @@
       " title=\"the title\" id=\"the id\" selected"
       iex> safe_to_string attributes_escape(%{data: [phx: [value: [foo: "bar"]]], class: "foo"})
       " class=\"foo\" data-phx-value-foo=\"bar\""
   """
   def attributes_escape(attrs) when is_list(attrs) do
     {:safe, build_attrs(attrs)}
   end
   def attributes_escape(attrs) do
     {:safe, attrs |> Enum.to_list() |> build_attrs()}
   end
-  defp build_attrs([{k, true} | t]),
-    do: [?\s, key_escape(k) | build_attrs(t)]
-  defp build_attrs([{_, false} | t]),
-    do: build_attrs(t)
-  defp build_attrs([{_, nil} | t]),
-    do: build_attrs(t)
   defp build_attrs([{"data", v} | t]) when is_list(v),
     do: nested_attrs(v, " data", t)
   defp build_attrs([{"aria", v} | t]) when is_list(v),
     do: nested_attrs(v, " aria", t)
   defp build_attrs([{"class", v} | t]) when is_list(v),
     do: [" class=\"", class_value(v), ?" | build_attrs(t)]
   defp build_attrs([{:data, v} | t]) when is_list(v),
     do: nested_attrs(v, " data", t)
   defp build_attrs([{:aria, v} | t]) when is_list(v),
     do: nested_attrs(v, " aria", t)
   defp build_attrs([{:class, v} | t]) when is_list(v),
     do: [" class=\"", class_value(v), ?" | build_attrs(t)]
+  defp build_attrs([{k, true} | t]),
+    do: [?\s, key_escape(k) | build_attrs(t)]
+  defp build_attrs([{_, false} | t]),
+    do: build_attrs(t)
+  defp build_attrs([{_, nil} | t]),
+    do: build_attrs(t)
   defp build_attrs([{k, v} | t]),
     do: [?\s, key_escape(k), ?=, ?", attr_escape(v), ?" | build_attrs(t)]
   defp build_attrs([]), do: []
   defp nested_attrs([{k, v} | kv], attr, t) when is_list(v),
     do: [nested_attrs(v, "#{attr}-#{key_escape(k)}", []) | nested_attrs(kv, attr, t)]
   defp nested_attrs([{k, v} | kv], attr, t),
     do: [attr, ?-, key_escape(k), ?=, ?", attr_escape(v), ?" | nested_attrs(kv, attr, t)]
   defp nested_attrs([], _attr, t),
     do: build_attrs(t)
   defp class_value(value) when is_list(value) do
     value
     |> Enum.filter(& &1)
     |> Enum.join(" ")
-    |> attr_escape()
   end
   defp class_value(value) do
-    attr_escape(value)
+    value
   end
   defp key_escape(value) when is_atom(value), do: String.replace(Atom.to_string(value), "_", "-")
   defp key_escape(value), do: attr_escape(value)
   defp attr_escape({:safe, data}), do: data
   defp attr_escape(nil), do: []
   defp attr_escape(other) when is_binary(other), do: Phoenix.HTML.Engine.encode_to_iodata!(other)
   defp attr_escape(other), do: Phoenix.HTML.Safe.to_iodata(other)
   defp sorted_attrs(attrs) when is_list(attrs),
     do: attrs |> normalize_attrs() |> Enum.sort() |> build_attrs()
   defp sorted_attrs(attrs),

--- a/mix.exs
+++ b/mix.exs
@@ -1,13 +1,13 @@
 defmodule PhoenixHtml.Mixfile do
   use Mix.Project
-  @version "3.0.4"
+  @version "3.0.3"
   def project do
     [
       app: :phoenix_html,
       version: @version,
       elixir: "~> 1.7",
       deps: deps(),
       name: "Phoenix.HTML",
       description: "Phoenix view functions for working with HTML templates",
       package: package(),
       docs: [
