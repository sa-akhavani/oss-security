# ====================================================================
# FILE: community-modules/client-side-row-model/dist/package/main.cjs.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1715-1741 ---
  1715|       this.selectionService.reset("rowDataChanged");
  1716|       this.clientSideRowModel.setRowData(rowData);
  1717|     }
  1718|   }
  1719| };
  1720| __decorateClass([
  1721|   (0, import_core8.Autowired)("rowModel")
  1722| ], ImmutableService.prototype, "rowModel", 2);
  1723| __decorateClass([
  1724|   (0, import_core8.Autowired)("rowRenderer")
  1725| ], ImmutableService.prototype, "rowRenderer", 2);
  1726| __decorateClass([
  1727|   (0, import_core8.Autowired)("selectionService")
  1728| ], ImmutableService.prototype, "selectionService", 2);
  1729| __decorateClass([
  1730|   import_core8.PostConstruct
  1731| ], ImmutableService.prototype, "postConstruct", 1);
  1732| ImmutableService = __decorateClass([
  1733|   (0, import_core8.Bean)("immutableService")
  1734| ], ImmutableService);
  1735| var VERSION = "31.3.4";
  1736| var ClientSideRowModelModule = {
  1737|   version: VERSION,
  1738|   moduleName: import_core9.ModuleNames.ClientSideRowModelModule,
  1739|   rowModel: "clientSide",
  1740|   beans: [ClientSideRowModel, FilterStage, SortStage, FlattenStage, SortService, FilterService, ImmutableService]
  1741| };


# ====================================================================
# FILE: community-modules/client-side-row-model/dist/package/main.cjs.min.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| var __defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__hasOwnProp=Object.prototype.hasOwnProperty,__export=(t,e)=>{for(var o in e)__defProp(t,o,{get:e[o],enumerable:!0})},__copyProps=(t,e,o,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of __getOwnPropNames(e))!__hasOwnProp.call(t,s)&&s!==o&&__defProp(t,s,{get:()=>e[s],enumerable:!(i=__getOwnPropDesc(e,s))||i.enumerable});return t},__toCommonJS=t=>__copyProps(__defProp({},"__esModule",{value:!0}),t),__decorateClass=(t,e,o,i)=>{for(var s=i>1?void 0:i?__getOwnPropDesc(e,o):e,r=t.length-1,n;r>=0;r--)(n=t[r])&&(s=(i?n(e,o,s):n(s))||s);return i&&s&&__defProp(e,o,s),s},main_exports={};__export(main_exports,{ClientSideRowModelModule:()=>ClientSideRowModelModule}),module.exports=__toCommonJS(main_exports);var import_core9=require("@ag-grid-community/core"),import_core2=require("@ag-grid-community/core"),import_core=require("@ag-grid-community/core"),_ClientSideNodeManager=class w{constructor(e,o,i,s,r,n){this.nextId=0,this.rowCountReady=!1,this.allNodesMap={},this.rootNode=e,this.gos=o,this.eventService=i,this.columnModel=s,this.beans=n,this.selectionService=r,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=w.ROOT_NODE_ID,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}getCopyOfNodesMap(){return import_core._.cloneObject(this.allNodesMap)}getRowNode(e){return this.allNodesMap[e]}setRowData(e){if(typeof e=="string"){console.warn("AG Grid: rowData must be an array.");return}this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e);const o=this.rootNode,i=this.rootNode.sibling;o.childrenAfterFilter=null,o.childrenAfterGroup=null,o.childrenAfterAggFilter=null,o.childrenAfterSort=null,o.childrenMapped=null,o.updateHasChildren(),this.nextId=0,this.allNodesMap={},e?o.allLeafChildren=e.map(s=>this.createNode(s,this.rootNode,w.TOP_LEVEL)):(o.allLeafChildren=[],o.childrenAfterGroup=[]),i&&(i.childrenAfterFilter=o.childrenAfterFilter,i.childrenAfterGroup=o.childrenAfterGroup,i.childrenAfterAggFilter=o.childrenAfterAggFilter,i.childrenAfterSort=o.childrenAfterSort,i.childrenMapped=o.childrenMapped,i.allLeafChildren=o.allLeafChildren)}updateRowData(e,o){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e.add);const i={remove:[],update:[],add:[]},s=[];return this.executeRemove(e,i,s),this.executeUpdate(e,i,s),this.executeAdd(e,i),this.updateSelection(s,"rowDataChanged"),o&&import_core._.sortRowNodesByOrder(this.rootNode.allLeafChildren,o),i}isRowCountReady(){return this.rowCountReady}dispatchRowDataUpdateStartedEvent(e){const o={type:import_core.Events.EVENT_ROW_DATA_UPDATE_STARTED,firstRowData:e?.length?e[0]:null};this.eventService.dispatchEvent(o)}updateSelection(e,o){const i=e.length>0;if(i&&this.selectionService.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:o}),this.selectionService.updateGroupsFromChildrenSelections(o),i){const s={type:import_core.Events.EVENT_SELECTION_CHANGED,source:o};this.eventService.dispatchEvent(s)}}executeAdd(e,o){var i;const{add:s,addIndex:r}=e;if(import_core._.missingOrEmpty(s))return;const n=s.map(a=>this.createNode(a,this.rootNode,w.TOP_LEVEL));if(typeof r=="number"&&r>=0){const{allLeafChildren:a}=this.rootNode,d=a.length;let l=r;if(this.gos.get("treeData")&&r>0&&d>0){for(let p=0;p<d;p++)if(((i=a[p])==null?void 0:i.rowIndex)==r-1){l=p+1;break}}const c=a.slice(0,l),h=a.slice(l,a.length);this.rootNode.allLeafChildren=[...c,...n,...h]}else this.rootNode.allLeafChildren=[...this.rootNode.allLeafChildren,...n];this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren),o.add=n}executeRemove(e,o,i){const{remove:s}=e;if(import_core._.missingOrEmpty(s))return;const r={};s.forEach(n=>{const a=this.lookupRowNode(n);a&&(a.isSelected()&&i.push(a),a.clearRowTopAndRowIndex(),r[a.id]=!0,delete this.allNodesMap[a.id],o.remove.push(a))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren.filter(n=>!r[n.id]),this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(e,o,i){const{update:s}=e;import_core._.missingOrEmpty(s)||s.forEach(r=>{const n=this.lookupRowNode(r);n&&(n.updateData(r),!n.selectable&&n.isSelected()&&i.push(n),this.setMasterForRow(n,r,w.TOP_LEVEL,!1),o.update.push(n))})}lookupRowNode(e){const o=this.gos.getCallback("getRowId");let i;if(o){const s=o({data:e,level:0});if(i=this.allNodesMap[s],!i)return console.error(`AG Grid: could not find row id=${s}, data item was not found for this id`),null}else if(i=this.rootNode.allLeafChildren.find(s=>s.data===e),!i)return console.error("AG Grid: could not find data item as object was not found",e),console.error("Consider using getRowId to help the Grid find matching row data"),null;return i||null}createNode(e,o,i){const s=new import_core.RowNode(this.beans);s.group=!1,this.setMasterForRow(s,e,i,!0);const r=this.gos.get("suppressParentsInRowNodes");return o&&!r&&(s.parent=o),s.level=i,s.setDataAndId(e,this.nextId.toString()),this.allNodesMap[s.id]&&console.warn(`AG Grid: duplicate node id '${s.id}' detected from getRowId callback, this could cause issues in your grid.`),this.allNodesMap[s.id]=s,this.nextId++,s}setMasterForRow(e,o,i,s){if(this.gos.get("treeData"))e.setMaster(!1),s&&(e.expanded=!1);else{if(this.gos.get("masterDetail")){const a=this.gos.get("isRowMaster");a?e.setMaster(a(o)):e.setMaster(!0)}else e.setMaster(!1);if(s){const a=this.columnModel.getRowGroupColumns(),d=a?a.length:0,l=i+d;e.expanded=e.master?this.isExpanded(l):!1}}}isExpanded(e){const o=this.gos.get("groupDefaultExpanded");return o===-1?!0:e<o}};_ClientSideNodeManager.TOP_LEVEL=0,_ClientSideNodeManager.ROOT_NODE_ID="ROOT_NODE_ID";var ClientSideNodeManager=_ClientSideNodeManager,ClientSideRowModel=class extends import_core2.BeanStub{constructor(){super(...arguments),this.onRowHeightChanged_debounced=import_core2._.debounce(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[],this.hasStarted=!1,this.shouldSkipSettingDataOnStart=!1,this.isRefreshingModel=!1,this.rowCountReady=!1}init(){const t=this.refreshModel.bind(this,{step:import_core2.ClientSideRowModelSteps.EVERYTHING}),e=!this.gos.get("suppressAnimationFrame"),o=this.refreshModel.bind(this,{step:import_core2.ClientSideRowModelSteps.EVERYTHING,afterColumnsChanged:!0,keepRenderedRows:!0,animate:e});this.addManagedListener(this.eventService,import_core2.Events.EVENT_NEW_COLUMNS_LOADED,o),this.addManagedListener(this.eventService,import_core2.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,t),this.addManagedListener(this.eventService,import_core2.Events.EVENT_COLUMN_VALUE_CHANGED,this.onValueChanged.bind(this)),this.addManagedListener(this.eventService,import_core2.Events.EVENT_COLUMN_PIVOT_CHANGED,this.refreshModel.bind(this,{step:import_core2.ClientSideRowModelSteps.PIVOT})),this.addManagedListener(this.eventService,import_core2.Events.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,import_core2.Events.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,import_core2.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,t),this.addManagedListener(this.eventService,import_core2.Events.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanges.bind(this)),this.addManagedListener(this.eventService,import_core2.Events.EVENT_GRID_READY,()=>this.onGridReady()),this.addPropertyListeners(),this.rootNode=new import_core2.RowNode(this.beans),this.nodeManager=new ClientSideNodeManager(this.rootNode,this.gos,this.eventService,this.columnModel,this.selectionService,this.beans)}addPropertyListeners(){const t=new Set(["treeData","masterDetail"]),e=new Set(["suppressParentsInRowNodes","groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),o=new Set(["excludeChildrenWhenTreeDataFiltering"]),i=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),s=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly","grandTotalRow"]),r=new Set(["postSortRows","groupDisplayType","accentedSort"]),n=new Set([]),a=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter","groupTotalRow"]),d=[...t,...e,...o,...i,...i,...s,...r,...n,...a];this.addManagedPropertyListeners(d,l=>{var u;const c=(u=l.changeSet)==null?void 0:u.properties;if(!c)return;const h=p=>c.some(g=>p.has(g));if(h(t)){this.setRowData(this.rootNode.allLeafChildren.map(p=>p.data));return}if(h(e)){this.refreshModel({step:import_core2.ClientSideRowModelSteps.EVERYTHING});return}if(h(o)){this.refreshModel({step:import_core2.ClientSideRowModelSteps.FILTER});return}if(h(i)){this.refreshModel({step:import_core2.ClientSideRowModelSteps.PIVOT});return}if(h(s)){this.refreshModel({step:import_core2.ClientSideRowModelSteps.AGGREGATE});return}if(h(r)){this.refreshModel({step:import_core2.ClientSideRowModelSteps.SORT});return}if(h(n)){this.refreshModel({step:import_core2.ClientSideRowModelSteps.FILTER_AGGREGATES});return}h(a)&&this.refreshModel({step:import_core2.ClientSideRowModelSteps.MAP})}),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()}setInitialData(){const t=this.gos.get("rowData");t&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(t))}ensureRowHeightsValid(t,e,o,i){let s,r=!1;do{s=!1;const n=this.getRowIndexAtPixel(t),a=this.getRowIndexAtPixel(e),d=Math.max(n,o),l=Math.min(a,i);for(let u=d;u<=l;u++){const c=this.getRow(u);if(c.rowHeightEstimated){const h=this.gos.getRowHeightForNode(c);c.setRowHeight(h.height),s=!0,r=!0}}s&&this.setRowTopAndRowIndex()}while(s);return r}setRowTopAndRowIndex(){const t=this.environment.getDefaultRowHeight();let e=0;const o=new Set,i=this.gos.isDomLayout("normal");for(let s=0;s<this.rowsToDisplay.length;s++){const r=this.rowsToDisplay[s];if(r.id!=null&&o.add(r.id),r.rowHeight==null){const n=this.gos.getRowHeightForNode(r,i,t);r.setRowHeight(n.height,n.estimated)}r.setRowTop(e),r.setRowIndex(s),e+=r.rowHeight}return o}clearRowTopAndRowIndex(t,e){const o=t.isActive(),i=r=>{r&&r.id!=null&&!e.has(r.id)&&r.clearRowTopAndRowIndex()},s=r=>{if(i(r),i(r.detailNode),i(r.sibling),r.hasChildren()&&r.childrenAfterGroup){const n=r.level==-1;o&&!n&&!r.expanded||r.childrenAfterGroup.forEach(s)}};s(this.rootNode)}ensureRowsAtPixel(t,e,o=0){const i=this.getRowIndexAtPixel(e),s=this.getRow(i),r=!this.gos.get("suppressAnimationFrame");return s===t[0]?!1:(t.forEach(n=>{import_core2._.removeFromArray(this.rootNode.allLeafChildren,n)}),t.forEach((n,a)=>{import_core2._.insertIntoArray(this.rootNode.allLeafChildren,n,Math.max(i+o,0)+a)}),this.refreshModel({step:import_core2.ClientSideRowModelSteps.EVERYTHING,keepRenderedRows:!0,keepEditingRows:!0,animate:r}),!0)}highlightRowAtPixel(t,e){const o=e!=null?this.getRowIndexAtPixel(e):null,i=o!=null?this.getRow(o):null;if(!i||!t||i===t||e==null){this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null);return}const s=this.getHighlightPosition(e,i);this.lastHighlightedRow&&this.lastHighlightedRow!==i&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),i.setHighlighted(s),this.lastHighlightedRow=i}getHighlightPosition(t,e){if(!e){const s=this.getRowIndexAtPixel(t);if(e=this.getRow(s||0),!e)return import_core2.RowHighlightPosition.Below}const{rowTop:o,rowHeight:i}=e;return t-o<i/2?import_core2.RowHighlightPosition.Above:import_core2.RowHighlightPosition.Below}getLastHighlightedRowNode(){return this.lastHighlightedRow}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;const e=this.rootNode.childrenAfterAggFilter;return e?e.length:0}getTopLevelRowDisplayedIndex(t){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return t;let o=this.rootNode.childrenAfterSort[t];if(this.gos.get("groupHideOpenParents"))for(;o.expanded&&o.childrenAfterSort&&o.childrenAfterSort.length>0;)o=o.childrenAfterSort[0];return o.rowIndex}getRowBounds(t){if(import_core2._.missing(this.rowsToDisplay))return null;const e=this.rowsToDisplay[t];return e?{rowTop:e.rowTop,rowHeight:e.rowHeight}:null}onRowGroupOpened(){const t=this.gos.isAnimateRows();this.refreshModel({step:import_core2.ClientSideRowModelSteps.MAP,keepRenderedRows:!0,animate:t})}onFilterChanged(t){if(t.afterDataChange)return;const e=this.gos.isAnimateRows(),i=t.columns.length===0||t.columns.some(s=>s.isPrimary())?import_core2.ClientSideRowModelSteps.FILTER:import_core2.ClientSideRowModelSteps.FILTER_AGGREGATES;this.refreshModel({step:i,keepRenderedRows:!0,animate:e})}onSortChanged(){const t=this.gos.isAnimateRows();this.refreshModel({step:import_core2.ClientSideRowModelSteps.SORT,keepRenderedRows:!0,animate:t,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:import_core2.ClientSideRowModelSteps.PIVOT}):this.refreshModel({step:import_core2.ClientSideRowModelSteps.AGGREGATE})}createChangePath(t){const e=import_core2._.missingOrEmpty(t),o=new import_core2.ChangedPath(!1,this.rootNode);return(e||this.gos.get("treeData"))&&o.setInactive(),o}isSuppressModelUpdateAfterUpdateTransaction(t){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction")||t.rowNodeTransactions==null)return!1;const e=t.rowNodeTransactions.filter(i=>i.add!=null&&i.add.length>0||i.remove!=null&&i.remove.length>0);return e==null||e.length==0}buildRefreshModelParams(t){let e=import_core2.ClientSideRowModelSteps.EVERYTHING;const o={everything:import_core2.ClientSideRowModelSteps.EVERYTHING,group:import_core2.ClientSideRowModelSteps.EVERYTHING,filter:import_core2.ClientSideRowModelSteps.FILTER,map:import_core2.ClientSideRowModelSteps.MAP,aggregate:import_core2.ClientSideRowModelSteps.AGGREGATE,sort:import_core2.ClientSideRowModelSteps.SORT,pivot:import_core2.ClientSideRowModelSteps.PIVOT};if(import_core2._.exists(t)&&(e=o[t]),import_core2._.missing(e)){console.error(`AG Grid: invalid step ${t}, available steps are ${Object.keys(o).join(", ")}`);return}const i=!this.gos.get("suppressAnimationFrame");return{step:e,keepRenderedRows:!0,keepEditingRows:!0,animate:i}}refreshModel(t){if(!this.hasStarted||this.isRefreshingModel||this.columnModel.shouldRowModelIgnoreRefresh())return;let e=typeof t=="object"&&"step"in t?t:this.buildRefreshModelParams(t);if(!e||this.isSuppressModelUpdateAfterUpdateTransaction(e))return;const o=this.createChangePath(e.rowNodeTransactions);switch(this.isRefreshingModel=!0,e.step){case import_core2.ClientSideRowModelSteps.EVERYTHING:this.doRowGrouping(e.rowNodeTransactions,e.rowNodeOrder,o,!!e.afterColumnsChanged);case import_core2.ClientSideRowModelSteps.FILTER:this.doFilter(o);case import_core2.ClientSideRowModelSteps.PIVOT:this.doPivot(o);case import_core2.ClientSideRowModelSteps.AGGREGATE:this.doAggregate(o);case import_core2.ClientSideRowModelSteps.FILTER_AGGREGATES:this.doFilterAggregates(o);case import_core2.ClientSideRowModelSteps.SORT:this.doSort(e.rowNodeTransactions,o);case import_core2.ClientSideRowModelSteps.MAP:this.doRowsToDisplay()}const i=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(o,i),this.isRefreshingModel=!1;const s={type:import_core2.Events.EVENT_MODEL_UPDATED,animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1,keepUndoRedoStack:e.keepUndoRedoStack};this.eventService.dispatchEvent(s)}isEmpty(){const t=import_core2._.missing(this.rootNode.allLeafChildren)||this.rootNode.allLeafChildren.length===0;return import_core2._.missing(this.rootNode)||t||!this.columnModel.isReady()}isRowsToRender(){return import_core2._.exists(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(t,e){let o=!e,i=!1;const s=[],r=this.gos.get("groupSelectsChildren");return this.forEachNodeAfterFilterAndSort(n=>{if(i)return;if(o&&(n===e||n===t)&&(i=!0,n.group&&r)){s.push(...n.allLeafChildren);return}if(!o){if(n!==e&&n!==t)return;o=!0}if(!n.group||!r){s.push(n);return}}),s}setDatasource(t){console.error("AG Grid: should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(t){return this.rowsToDisplay[t]}isRowPresent(t){return this.rowsToDisplay.indexOf(t)>=0}getRowIndexAtPixel(t){if(this.isEmpty()||this.rowsToDisplay.length===0)return-1;let e=0,o=this.rowsToDisplay.length-1;if(t<=0)return 0;if(import_core2._.last(this.rowsToDisplay).rowTop<=t)return this.rowsToDisplay.length-1;let s=-1,r=-1;for(;;){const n=Math.floor((e+o)/2),a=this.rowsToDisplay[n];if(this.isRowInPixel(a,t)||(a.rowTop<t?e=n+1:a.rowTop>t&&(o=n-1),s===e&&r===o))return n;s=e,r=o}}isRowInPixel(t,e){const o=t.rowTop,i=t.rowTop+t.rowHeight;return o<=e&&i>e}forEachLeafNode(t){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach((e,o)=>t(e,o))}forEachNode(t,e=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback:t,recursionType:0,index:0,includeFooterNodes:e})}forEachNodeAfterFilter(t,e=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback:t,recursionType:1,index:0,includeFooterNodes:e})}forEachNodeAfterFilterAndSort(t,e=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback:t,recursionType:2,index:0,includeFooterNodes:e})}forEachPivotNode(t,e=!1){this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:t,recursionType:3,index:0,includeFooterNodes:e})}recursivelyWalkNodesAndCallback(t){const{nodes:e,callback:o,recursionType:i,includeFooterNodes:s}=t;let{index:r}=t;const n=a=>{var d;const l=(d=e[0])==null?void 0:d.parent;if(!l)return;const u=s&&this.gos.getGrandTotalRow(),c=this.gos.getGroupTotalRowCallback(),h=s&&c({node:l});if(l===this.rootNode){u===a&&(l.createFooter(),o(l.sibling,r++));return}h===a&&(l.createFooter(),o(l.sibling,r++))};n("top");for(let a=0;a<e.length;a++){const d=e[a];if(o(d,r++),d.hasChildren()&&!d.footer){let l=null;switch(i){case 0:l=d.childrenAfterGroup;break;case 1:l=d.childrenAfterAggFilter;break;case 2:l=d.childrenAfterSort;break;case 3:l=d.leafGroup?null:d.childrenAfterSort;break}l&&(r=this.recursivelyWalkNodesAndCallback({nodes:[...l],callback:o,recursionType:i,index:r,includeFooterNodes:s}))}}return n("bottom"),r}doAggregate(t){var e;(e=this.aggregationStage)==null||e.execute({rowNode:this.rootNode,changedPath:t})}doFilterAggregates(t){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:t}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(t){const e=this.gos.get("treeData"),o=this.columnModel.isPivotActive(),i=n=>{n&&n.forEach(a=>{const d=()=>{a.expanded=t,i(a.childrenAfterGroup)};if(e){import_core2._.exists(a.childrenAfterGroup)&&d();return}if(o){!a.leafGroup&&d();return}a.group&&d()})};this.rootNode&&i(this.rootNode.childrenAfterGroup),this.refreshModel({step:import_core2.ClientSideRowModelSteps.MAP});const s=t?"expandAll":"collapseAll",r={type:import_core2.Events.EVENT_EXPAND_COLLAPSE_ALL,source:s};this.eventService.dispatchEvent(r)}doSort(t,e){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:t,changedPath:e})}doRowGrouping(t,e,o,i){if(this.groupStage){if(t?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:t,rowNodeOrder:e,changedPath:o}):this.groupStage.execute({rowNode:this.rootNode,changedPath:o,afterColumnsChanged:i}),this.gos.get("groupSelectsChildren")&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",o)){const r={type:import_core2.Events.EVENT_SELECTION_CHANGED,source:"rowGroupChanged"};this.eventService.dispatchEvent(r)}}else this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren();this.nodeManager.isRowCountReady()&&(this.rowCountReady=!0,this.eventService.dispatchEventOnce({type:import_core2.Events.EVENT_ROW_COUNT_READY}))}doFilter(t){this.filterStage.execute({rowNode:this.rootNode,changedPath:t})}doPivot(t){var e;(e=this.pivotStage)==null||e.execute({rowNode:this.rootNode,changedPath:t})}getCopyOfNodesMap(){return this.nodeManager.getCopyOfNodesMap()}getRowNode(t){if(typeof t=="string"&&t.indexOf(import_core2.RowNode.ID_PREFIX_ROW_GROUP)==0){let o;return this.forEachNode(i=>{i.id===t&&(o=i)}),o}return this.nodeManager.getRowNode(t)}setRowData(t){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(t),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()}dispatchUpdateEventsAndRefresh(){const t={type:import_core2.Events.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(t),this.refreshModel({step:import_core2.ClientSideRowModelSteps.EVERYTHING,newData:!0})}batchUpdateRowData(t,e){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];const o=this.gos.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.executeBatchUpdateRowData()},o)}this.rowDataTransactionBatch.push({rowDataTransaction:t,callback:e})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache.onDataChanged();const t=[],e=[];let o=!1;if(this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach(i=>{const s=this.nodeManager.updateRowData(i.rowDataTransaction,void 0);e.push(s),i.callback&&t.push(i.callback.bind(null,s)),typeof i.rowDataTransaction.addIndex=="number"&&(o=!0)}),this.commonUpdateRowData(e,void 0,o),t.length>0&&window.setTimeout(()=>{t.forEach(i=>i())},0),e.length>0){const i={type:import_core2.Events.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:e};this.eventService.dispatchEvent(i)}this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(t,e){this.valueCache.onDataChanged();const o=this.nodeManager.updateRowData(t,e),i=typeof t.addIndex=="number";return this.commonUpdateRowData([o],e,i),o}createRowNodeOrder(){if(this.gos.get("suppressMaintainUnsortedOrder"))return;const e={};if(this.rootNode&&this.rootNode.allLeafChildren)for(let o=0;o<this.rootNode.allLeafChildren.length;o++){const i=this.rootNode.allLeafChildren[o];e[i.id]=o}return e}commonUpdateRowData(t,e,o){if(!this.hasStarted)return;const i=!this.gos.get("suppressAnimationFrame");o&&(e=this.createRowNodeOrder());const s={type:import_core2.Events.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(s),this.refreshModel({step:import_core2.ClientSideRowModelSteps.EVERYTHING,rowNodeTransactions:t,rowNodeOrder:e,keepRenderedRows:!0,keepEditingRows:!0,animate:i})}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:import_core2.ClientSideRowModelSteps.MAP,keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){const t=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),t&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let t=!1;return this.forEachNode(e=>{e.setRowHeight(e.rowHeight,!0);const o=e.detailNode;o&&o.setRowHeight(o.rowHeight,!0),e.sibling&&e.sibling.setRowHeight(e.sibling.rowHeight,!0),t=!0}),t}onGridStylesChanges(){this.columnModel.isAutoRowHeightActive()||this.resetRowHeights()}onGridReady(){this.hasStarted||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}};__decorateClass([(0,import_core2.Autowired)("columnModel")],ClientSideRowModel.prototype,"columnModel",2),__decorateClass([(0,import_core2.Autowired)("selectionService")],ClientSideRowModel.prototype,"selectionService",2),__decorateClass([(0,import_core2.Autowired)("valueCache")],ClientSideRowModel.prototype,"valueCache",2),__decorateClass([(0,import_core2.Autowired)("beans")],ClientSideRowModel.prototype,"beans",2),__decorateClass([(0,import_core2.Autowired)("filterStage")],ClientSideRowModel.prototype,"filterStage",2),__decorateClass([(0,import_core2.Autowired)("sortStage")],ClientSideRowModel.prototype,"sortStage",2),__decorateClass([(0,import_core2.Autowired)("flattenStage")],ClientSideRowModel.prototype,"flattenStage",2),__decorateClass([(0,import_core2.Optional)("groupStage")],ClientSideRowModel.prototype,"groupStage",2),__decorateClass([(0,import_core2.Optional)("aggregationStage")],ClientSideRowModel.prototype,"aggregationStage",2),__decorateClass([(0,import_core2.Optional)("pivotStage")],ClientSideRowModel.prototype,"pivotStage",2),__decorateClass([(0,import_core2.Optional)("filterAggregatesStage")],ClientSideRowModel.prototype,"filterAggregatesStage",2),__decorateClass([import_core2.PostConstruct],ClientSideRowModel.prototype,"init",1),ClientSideRowModel=__decorateClass([(0,import_core2.Bean)("rowModel")],ClientSideRowModel);var import_core3=require("@ag-grid-community/core"),FilterStage=class extends import_core3.BeanStub{execute(t){const{changedPath:e}=t;this.filterService.filter(e)}};__decorateClass([(0,import_core3.Autowired)("filterService")],FilterStage.prototype,"filterService",2),FilterStage=__decorateClass([(0,import_core3.Bean)("filterStage")],FilterStage);var import_core4=require("@ag-grid-community/core"),SortStage=class extends import_core4.BeanStub{execute(t){const e=this.sortController.getSortOptions(),o=import_core4._.exists(e)&&e.length>0,i=o&&import_core4._.exists(t.rowNodeTransactions)&&this.gos.get("deltaSort"),s=e.some(r=>this.gos.isColumnsSortingCoupledToGroup()?r.column.isPrimary()&&r.column.isRowGroupActive():!!r.column.getColDef().showRowGroup);this.sortService.sort(e,o,i,t.rowNodeTransactions,t.changedPath,s)}};__decorateClass([(0,import_core4.Autowired)("sortService")],SortStage.prototype,"sortService",2),__decorateClass([(0,import_core4.Autowired)("sortController")],SortStage.prototype,"sortController",2),SortStage=__decorateClass([(0,import_core4.Bean)("sortStage")],SortStage);var import_core5=require("@ag-grid-community/core"),FlattenStage=class extends import_core5.BeanStub{execute(t){const e=t.rowNode,o=[],i=this.beans.columnModel.isPivotMode(),s=i&&e.leafGroup,r=s?[e]:e.childrenAfterSort,n=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(n,r,o,i,0);const a=o.length>0;if(!s&&a&&n.grandTotalRow){e.createFooter();const l=n.grandTotalRow==="top";this.addRowNodeToRowsToDisplay(n,e.sibling,o,0,l)}return o}getFlattenDetails(){const t=this.gos.get("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!t&&this.gos.get("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:t,isGroupMultiAutoColumn:this.gos.isGroupMultiAutoColumn(),hideOpenParents:this.gos.get("groupHideOpenParents"),grandTotalRow:this.gos.getGrandTotalRow(),groupTotalRow:this.gos.getGroupTotalRowCallback()}}recursivelyAddToRowsToDisplay(t,e,o,i,s){if(!import_core5._.missingOrEmpty(e))for(let r=0;r<e.length;r++){const n=e[r],a=n.hasChildren(),d=i&&!a,l=t.groupRemoveSingleChildren&&a&&n.childrenAfterGroup.length===1,u=t.groupRemoveLowestSingleChildren&&a&&n.leafGroup&&n.childrenAfterGroup.length===1,c=i&&n.leafGroup,h=t.hideOpenParents&&n.expanded&&!n.master&&!c;if(!d&&!h&&!l&&!u&&this.addRowNodeToRowsToDisplay(t,n,o,s),!(i&&n.leafGroup)){if(a){const g=l||u;if(n.expanded||g){const R=t.groupTotalRow({node:n});R||n.destroyFooter();const f=g?s:s+1;R==="top"&&(n.createFooter(),this.addRowNodeToRowsToDisplay(t,n.sibling,o,f)),this.recursivelyAddToRowsToDisplay(t,n.childrenAfterSort,o,i,f),R==="bottom"&&(n.createFooter(),this.addRowNodeToRowsToDisplay(t,n.sibling,o,f))}}else if(n.master&&n.expanded){const g=this.createDetailNode(n);this.addRowNodeToRowsToDisplay(t,g,o,s)}}}}addRowNodeToRowsToDisplay(t,e,o,i,s){s?o.unshift(e):o.push(e),e.setUiLevel(t.isGroupMultiAutoColumn?0:i)}createDetailNode(t){if(import_core5._.exists(t.detailNode))return t.detailNode;const e=new import_core5.RowNode(this.beans);return e.detail=!0,e.selectable=!1,e.parent=t,import_core5._.exists(t.id)&&(e.id="detail_"+t.id),e.data=t.data,e.level=t.level+1,t.detailNode=e,e}};__decorateClass([(0,import_core5.Autowired)("beans")],FlattenStage.prototype,"beans",2),FlattenStage=__decorateClass([(0,import_core5.Bean)("flattenStage")],FlattenStage);var import_core6=require("@ag-grid-community/core"),SortService=class extends import_core6.BeanStub{sort(t,e,o,i,s,r){const n=this.gos.get("groupMaintainOrder"),a=this.columnModel.getAllGridColumns().some(h=>h.isRowGroupActive());let d={};o&&i&&(d=this.calculateDirtyNodes(i));const l=this.columnModel.isPivotMode(),u=this.gos.getCallback("postSortRows"),c=h=>{var p;this.pullDownGroupDataForHideOpenParents(h.childrenAfterAggFilter,!0);const g=l&&h.leafGroup;if(n&&a&&!h.leafGroup&&!r){const f=(p=this.columnModel.getRowGroupColumns())==null?void 0:p[h.level+1],E=f?.getSort()===null,C=h.childrenAfterAggFilter.slice(0);if(h.childrenAfterSort&&!E){const S={};h.childrenAfterSort.forEach((A,v)=>{S[A.id]=v}),C.sort((A,v)=>{var m,T;return((m=S[A.id])!=null?m:0)-((T=S[v.id])!=null?T:0)})}h.childrenAfterSort=C}else!e||g?h.childrenAfterSort=h.childrenAfterAggFilter.slice(0):o?h.childrenAfterSort=this.doDeltaSort(h,d,s,t):h.childrenAfterSort=this.rowNodeSorter.doFullSort(h.childrenAfterAggFilter,t);if(h.sibling&&(h.sibling.childrenAfterSort=h.childrenAfterSort),this.updateChildIndexes(h),u){const f={nodes:h.childrenAfterSort};u(f)}};s&&s.forEachChangedNodeDepthFirst(c),this.updateGroupDataForHideOpenParents(s)}calculateDirtyNodes(t){const e={},o=i=>{i&&i.forEach(s=>e[s.id]=!0)};return t&&t.forEach(i=>{o(i.add),o(i.update),o(i.remove)}),e}doDeltaSort(t,e,o,i){const s=t.childrenAfterAggFilter,r=t.childrenAfterSort;if(!r)return this.rowNodeSorter.doFullSort(s,i);const n={},a=[];s.forEach(c=>{e[c.id]||!o.canSkip(c)?a.push(c):n[c.id]=!0});const d=r.filter(c=>n[c.id]),l=(c,h)=>({currentPos:h,rowNode:c}),u=a.map(l).sort((c,h)=>this.rowNodeSorter.compareRowNodes(i,c,h));return this.mergeSortedArrays(i,u,d.map(l)).map(({rowNode:c})=>c)}mergeSortedArrays(t,e,o){const i=[];let s=0,r=0;for(;s<e.length&&r<o.length;)this.rowNodeSorter.compareRowNodes(t,e[s],o[r])<0?i.push(e[s++]):i.push(o[r++]);for(;s<e.length;)i.push(e[s++]);for(;r<o.length;)i.push(o[r++]);return i}updateChildIndexes(t){if(import_core6._.missing(t.childrenAfterSort))return;const e=t.childrenAfterSort;for(let o=0;o<e.length;o++){const i=e[o],s=o===0,r=o===t.childrenAfterSort.length-1;i.setFirstChild(s),i.setLastChild(r),i.setChildIndex(o)}}updateGroupDataForHideOpenParents(t){if(!this.gos.get("groupHideOpenParents"))return;if(this.gos.get("treeData"))return import_core6._.warnOnce("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;const e=o=>{this.pullDownGroupDataForHideOpenParents(o.childrenAfterSort,!1),o.childrenAfterSort.forEach(i=>{i.hasChildren()&&e(i)})};t&&t.executeFromRootNode(o=>e(o))}pullDownGroupDataForHideOpenParents(t,e){!this.gos.get("groupHideOpenParents")||import_core6._.missing(t)||t.forEach(o=>{this.columnModel.getGroupDisplayColumns().forEach(s=>{const r=s.getColDef().showRowGroup;if(typeof r!="string"){console.error("AG Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");return}const n=r,a=this.columnModel.getPrimaryColumn(n);if(a!==o.rowGroupColumn)if(e)o.setGroupValue(s.getId(),void 0);else{const l=o.getFirstChildOfFirstChild(a);l&&o.setGroupValue(s.getId(),l.key)}})})}};__decorateClass([(0,import_core6.Autowired)("columnModel")],SortService.prototype,"columnModel",2),__decorateClass([(0,import_core6.Autowired)("rowNodeSorter")],SortService.prototype,"rowNodeSorter",2),SortService=__decorateClass([(0,import_core6.Bean)("sortService")],SortService);var import_core7=require("@ag-grid-community/core"),FilterService=class extends import_core7.BeanStub{filter(t){const e=this.filterManager.isChildFilterPresent();this.filterNodes(e,t)}filterNodes(t,e){const o=(i,s)=>{i.hasChildren()&&t&&!s?i.childrenAfterFilter=i.childrenAfterGroup.filter(r=>{const n=r.childrenAfterFilter&&r.childrenAfterFilter.length>0,a=r.data&&this.filterManager.doesRowPassFilter({rowNode:r});return n||a}):i.childrenAfterFilter=i.childrenAfterGroup,i.sibling&&(i.sibling.childrenAfterFilter=i.childrenAfterFilter)};if(this.doingTreeDataFiltering()){const i=(r,n)=>{if(r.childrenAfterGroup)for(let a=0;a<r.childrenAfterGroup.length;a++){const d=r.childrenAfterGroup[a],l=n||this.filterManager.doesRowPassFilter({rowNode:d});d.childrenAfterGroup?i(r.childrenAfterGroup[a],l):o(d,l)}o(r,n)},s=r=>i(r,!1);e.executeFromRootNode(s)}else{const i=s=>o(s,!1);e.forEachChangedNodeDepthFirst(i,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}};__decorateClass([(0,import_core7.Autowired)("filterManager")],FilterService.prototype,"filterManager",2),FilterService=__decorateClass([(0,import_core7.Bean)("filterService")],FilterService);var import_core8=require("@ag-grid-community/core"),ImmutableService=class extends import_core8.BeanStub{postConstruct(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",()=>this.onRowDataUpdated()))}isActive(){const t=this.gos.exists("getRowId");return this.gos.get("resetRowDataOnUpdate")?!1:t}setRowData(t){const e=this.createTransactionForRowData(t);if(!e)return;const[o,i]=e;this.clientSideRowModel.updateRowData(o,i)}createTransactionForRowData(t){if(import_core8._.missing(this.clientSideRowModel)){console.error("AG Grid: ImmutableService only works with ClientSideRowModel");return}const e=this.gos.getCallback("getRowId");if(e==null){console.error("AG Grid: ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!");return}const o={remove:[],update:[],add:[]},i=this.clientSideRowModel.getCopyOfNodesMap(),r=this.gos.get("suppressMaintainUnsortedOrder")?void 0:{};return import_core8._.exists(t)&&t.forEach((n,a)=>{const d=e({data:n,level:0}),l=i[d];r&&(r[d]=a),l?(l.data!==n&&o.update.push(n),i[d]=void 0):o.add.push(n)}),import_core8._.iterateObject(i,(n,a)=>{a&&o.remove.push(a.data)}),[o,r]}onRowDataUpdated(){const t=this.gos.get("rowData");t&&(this.isActive()?this.setRowData(t):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(t)))}};__decorateClass([(0,import_core8.Autowired)("rowModel")],ImmutableService.prototype,"rowModel",2),__decorateClass([(0,import_core8.Autowired)("rowRenderer")],ImmutableService.prototype,"rowRenderer",2),__decorateClass([(0,import_core8.Autowired)("selectionService")],ImmutableService.prototype,"selectionService",2),__decorateClass([import_core8.PostConstruct],ImmutableService.prototype,"postConstruct",1),ImmutableService=__decorateClass([(0,import_core8.Bean)("immutableService")],ImmutableService);var VERSION="31.3.4",ClientSideRowModelModule={version:VERSION,moduleName:import_core9.ModuleNames.ClientSideRowModelModule,rowModel:"clientSide",beans:[ClientSideRowModel,FilterStage,SortStage,FlattenStage,SortService,FilterService,ImmutableService]};


# ====================================================================
# FILE: community-modules/client-side-row-model/dist/types/src/version.d.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export declare const VERSION = "31.3.4";


# ====================================================================
# FILE: community-modules/client-side-row-model/src/version.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export const VERSION = '31.3.4';


# ====================================================================
# FILE: community-modules/core/dist/package/main.cjs.js
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 381-502 ---
   381|           idToTry += "_" + count;
   382|         }
   383|       } else if (colField) {
   384|         idToTry = colField;
   385|         if (count !== 0) {
   386|           idToTry += "_" + count;
   387|         }
   388|       } else {
   389|         idToTry = count;
   390|       }
   391|       if (!this.existingKeys[idToTry]) {
   392|         this.existingKeys[idToTry] = true;
   393|         return String(idToTry);
   394|       }
   395|       count++;
   396|     }
   397|   }
   398| };
   399| var object_exports = {};
   400| __export(object_exports, {
   401|   SKIP_JS_BUILTINS: () => SKIP_JS_BUILTINS,
   402|   cloneObject: () => cloneObject,
   403|   deepCloneDefinition: () => deepCloneDefinition,
   404|   getAllValuesInObject: () => getAllValuesInObject,
   405|   getValueUsingField: () => getValueUsingField,
   406|   isNonNullObject: () => isNonNullObject,
   407|   iterateObject: () => iterateObject,
   408|   mergeDeep: () => mergeDeep,
   409|   removeAllReferences: () => removeAllReferences
   410| });
   411| var SKIP_JS_BUILTINS = /* @__PURE__ */ new Set(["__proto__", "constructor", "prototype"]);
   412| function iterateObject(object, callback) {
   413|   if (object == null) {
   414|     return;
   415|   }
   416|   if (Array.isArray(object)) {
   417|     for (let i = 0; i < object.length; i++) {
   418|       callback(i.toString(), object[i]);
   419|     }
   420|     return;
   421|   }
   422|   for (const [key, value] of Object.entries(object)) {
   423|     callback(key, value);
   424|   }
   425| }
   426| function cloneObject(object) {
   427|   const copy = {};
   428|   const keys2 = Object.keys(object);
   429|   for (let i = 0; i < keys2.length; i++) {
   430|     if (SKIP_JS_BUILTINS.has(keys2[i])) {
   431|       continue;
   432|     }
   433|     const key = keys2[i];
   434|     const value = object[key];
   435|     copy[key] = value;
   436|   }
   437|   return copy;
   438| }
   439| function deepCloneDefinition(object, keysToSkip) {
   440|   if (!object) {
   441|     return;
   442|   }
   443|   const obj = object;
   444|   const res = {};
   445|   Object.keys(obj).forEach((key) => {
   446|     if (keysToSkip && keysToSkip.indexOf(key) >= 0 || SKIP_JS_BUILTINS.has(key)) {
   447|       return;
   448|     }
   449|     const value = obj[key];
   450|     const sourceIsSimpleObject = isNonNullObject(value) && value.constructor === Object;
   451|     if (sourceIsSimpleObject) {
   452|       res[key] = deepCloneDefinition(value);
   453|     } else {
   454|       res[key] = value;
   455|     }
   456|   });
   457|   return res;
   458| }
   459| function getAllValuesInObject(obj) {
   460|   if (!obj) {
   461|     return [];
   462|   }
   463|   const anyObject = Object;
   464|   if (typeof anyObject.values === "function") {
   465|     return anyObject.values(obj);
   466|   }
   467|   const ret = [];
   468|   for (const key in obj) {
   469|     if (obj.hasOwnProperty(key) && obj.propertyIsEnumerable(key)) {
   470|       ret.push(obj[key]);
   471|     }
   472|   }
   473|   return ret;
   474| }
   475| function mergeDeep(dest, source, copyUndefined = true, makeCopyOfSimpleObjects = false) {
   476|   if (!exists(source)) {
   477|     return;
   478|   }
   479|   iterateObject(source, (key, sourceValue) => {
   480|     if (SKIP_JS_BUILTINS.has(key)) {
   481|       return;
   482|     }
   483|     let destValue = dest[key];
   484|     if (destValue === sourceValue) {
   485|       return;
   486|     }
   487|     if (makeCopyOfSimpleObjects) {
   488|       const objectIsDueToBeCopied = destValue == null && sourceValue != null;
   489|       if (objectIsDueToBeCopied) {
   490|         const sourceIsSimpleObject = typeof sourceValue === "object" && sourceValue.constructor === Object;
   491|         const dontCopy = sourceIsSimpleObject;
   492|         if (dontCopy) {
   493|           destValue = {};
   494|           dest[key] = destValue;
   495|         }
   496|       }
   497|     }
   498|     if (isNonNullObject(sourceValue) && isNonNullObject(destValue) && !Array.isArray(destValue)) {
   499|       mergeDeep(destValue, sourceValue, copyUndefined, makeCopyOfSimpleObjects);
   500|     } else if (copyUndefined || sourceValue !== void 0) {
   501|       dest[key] = sourceValue;
   502|     }


# ====================================================================
# FILE: community-modules/core/dist/package/main.cjs.min.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropNames=Object.getOwnPropertyNames,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,i)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,__spreadValues=(e,t)=>{for(var i in t||(t={}))__hasOwnProp.call(t,i)&&__defNormalProp(e,i,t[i]);if(__getOwnPropSymbols)for(var i of __getOwnPropSymbols(t))__propIsEnum.call(t,i)&&__defNormalProp(e,i,t[i]);return e},__spreadProps=(e,t)=>__defProps(e,__getOwnPropDescs(t)),__objRest=(e,t)=>{var i={};for(var s in e)__hasOwnProp.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(e!=null&&__getOwnPropSymbols)for(var s of __getOwnPropSymbols(e))t.indexOf(s)<0&&__propIsEnum.call(e,s)&&(i[s]=e[s]);return i},__export=(e,t)=>{for(var i in t)__defProp(e,i,{get:t[i],enumerable:!0})},__copyProps=(e,t,i,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of __getOwnPropNames(t))!__hasOwnProp.call(e,o)&&o!==i&&__defProp(e,o,{get:()=>t[o],enumerable:!(s=__getOwnPropDesc(t,o))||s.enumerable});return e},__toCommonJS=e=>__copyProps(__defProp({},"__esModule",{value:!0}),e),__decorateClass=(e,t,i,s)=>{for(var o=s>1?void 0:s?__getOwnPropDesc(t,i):t,r=e.length-1,n;r>=0;r--)(n=e[r])&&(o=(s?n(t,i,o):n(o))||o);return s&&o&&__defProp(t,i,o),o},__decorateParam=(e,t)=>(i,s)=>t(i,s,e),main_exports={};__export(main_exports,{ALWAYS_SYNC_GLOBAL_EVENTS:()=>ALWAYS_SYNC_GLOBAL_EVENTS,AbstractHeaderCellCtrl:()=>AbstractHeaderCellCtrl,AgAbstractField:()=>AgAbstractField,AgAbstractLabel:()=>AgAbstractLabel,AgAutocomplete:()=>AgAutocomplete,AgCheckbox:()=>AgCheckbox,AgDialog:()=>AgDialog,AgGroupComponent:()=>AgGroupComponent,AgInputDateField:()=>AgInputDateField,AgInputNumberField:()=>AgInputNumberField,AgInputRange:()=>AgInputRange,AgInputTextArea:()=>AgInputTextArea,AgInputTextField:()=>AgInputTextField,AgMenuItemComponent:()=>AgMenuItemComponent,AgMenuItemRenderer:()=>AgMenuItemRenderer,AgMenuList:()=>AgMenuList,AgMenuPanel:()=>AgMenuPanel,AgPanel:()=>AgPanel,AgPickerField:()=>AgPickerField,AgPromise:()=>AgPromise,AgPromiseStatus:()=>AgPromiseStatus,AgRadioButton:()=>AgRadioButton,AgRichSelect:()=>AgRichSelect,AgSelect:()=>AgSelect,AgSlider:()=>AgSlider,AgStackComponentsRegistry:()=>AgStackComponentsRegistry,AgToggleButton:()=>AgToggleButton,AlignedGridsService:()=>AlignedGridsService,AnimateShowChangeCellRenderer:()=>AnimateShowChangeCellRenderer,AnimateSlideCellRenderer:()=>AnimateSlideCellRenderer,AnimationFrameService:()=>AnimationFrameService,AutoScrollService:()=>AutoScrollService,AutoWidthCalculator:()=>AutoWidthCalculator,Autowired:()=>Autowired,BarColumnLabelPlacement:()=>BarColumnLabelPlacement,BaseComponentWrapper:()=>BaseComponentWrapper,Bean:()=>Bean,BeanStub:()=>BeanStub,Beans:()=>Beans,BodyDropPivotTarget:()=>BodyDropPivotTarget,BodyDropTarget:()=>BodyDropTarget,CellComp:()=>CellComp,CellCtrl:()=>CellCtrl,CellNavigationService:()=>CellNavigationService,CellPositionUtils:()=>CellPositionUtils,CellRangeType:()=>CellRangeType,ChangedPath:()=>ChangedPath,ChartMappings:()=>ChartMappings,CheckboxCellEditor:()=>CheckboxCellEditor,CheckboxCellRenderer:()=>CheckboxCellRenderer,CheckboxSelectionComponent:()=>CheckboxSelectionComponent,ClientSideRowModelSteps:()=>ClientSideRowModelSteps,Column:()=>Column,ColumnApi:()=>ColumnApi,ColumnFactory:()=>ColumnFactory,ColumnGroup:()=>ColumnGroup,ColumnKeyCreator:()=>ColumnKeyCreator,ColumnModel:()=>ColumnModel,Component:()=>Component,ComponentUtil:()=>ComponentUtil,Context:()=>Context,CssClassApplier:()=>CssClassApplier,CssClassManager:()=>CssClassManager,CtrlsService:()=>CtrlsService,DataTypeService:()=>DataTypeService,DateCellEditor:()=>DateCellEditor,DateFilter:()=>DateFilter,DateStringCellEditor:()=>DateStringCellEditor,DisplayedGroupCreator:()=>DisplayedGroupCreator,DragAndDropService:()=>DragAndDropService,DragService:()=>DragService,DragSourceType:()=>DragSourceType,Environment:()=>Environment,EventService:()=>EventService,Events:()=>Events,ExcelFactoryMode:()=>ExcelFactoryMode,ExpansionService:()=>ExpansionService,ExpressionService:()=>ExpressionService,FilterManager:()=>FilterManager,FilterWrapperComp:()=>FilterWrapperComp,FloatingFilterMapper:()=>FloatingFilterMapper,FocusService:()=>FocusService,GROUP_AUTO_COLUMN_ID:()=>GROUP_AUTO_COLUMN_ID,Grid:()=>Grid,GridApi:()=>GridApi,GridBodyComp:()=>GridBodyComp,GridBodyCtrl:()=>GridBodyCtrl,GridComp:()=>GridComp,GridCoreCreator:()=>GridCoreCreator,GridCtrl:()=>GridCtrl,GridHeaderComp:()=>GridHeaderComp,GridHeaderCtrl:()=>GridHeaderCtrl,GridOptionsService:()=>GridOptionsService,GroupCellRenderer:()=>GroupCellRenderer,GroupCellRendererCtrl:()=>GroupCellRendererCtrl,GroupInstanceIdCreator:()=>GroupInstanceIdCreator,HeaderCellCtrl:()=>HeaderCellCtrl,HeaderFilterCellComp:()=>HeaderFilterCellComp,HeaderFilterCellCtrl:()=>HeaderFilterCellCtrl,HeaderGroupCellCtrl:()=>HeaderGroupCellCtrl,HeaderNavigationDirection:()=>HeaderNavigationDirection,HeaderNavigationService:()=>HeaderNavigationService,HeaderPositionUtils:()=>HeaderPositionUtils,HeaderRowComp:()=>HeaderRowComp,HeaderRowContainerComp:()=>HeaderRowContainerComp,HeaderRowContainerCtrl:()=>HeaderRowContainerCtrl,HeaderRowCtrl:()=>HeaderRowCtrl,HeaderRowType:()=>HeaderRowType,HorizontalDirection:()=>HorizontalDirection,HorizontalResizeService:()=>HorizontalResizeService,KeyCode:()=>KeyCode,LargeTextCellEditor:()=>LargeTextCellEditor,LayoutCssClasses:()=>LayoutCssClasses,LocaleService:()=>LocaleService,Logger:()=>Logger,LoggerFactory:()=>LoggerFactory,ManagedFocusFeature:()=>ManagedFocusFeature,MenuService:()=>MenuService,ModuleNames:()=>ModuleNames,ModuleRegistry:()=>ModuleRegistry,MouseEventService:()=>MouseEventService,MoveColumnFeature:()=>MoveColumnFeature,NavigationService:()=>NavigationService,NumberCellEditor:()=>NumberCellEditor,NumberFilter:()=>NumberFilter,NumberSequence:()=>NumberSequence,Optional:()=>Optional,PaginationProxy:()=>PaginationProxy,PillDragComp:()=>PillDragComp,PillDropZonePanel:()=>PillDropZonePanel,PinnedRowModel:()=>PinnedRowModel,PopupComponent:()=>PopupComponent,PopupEditorWrapper:()=>PopupEditorWrapper,PopupService:()=>PopupService,PositionableFeature:()=>PositionableFeature,PostConstruct:()=>PostConstruct,PreConstruct:()=>PreConstruct,PreDestroy:()=>PreDestroy,PropertyKeys:()=>PropertyKeys,ProvidedColumnGroup:()=>ProvidedColumnGroup,ProvidedFilter:()=>ProvidedFilter,Qualifier:()=>Qualifier,QuerySelector:()=>QuerySelector,RefSelector:()=>RefSelector,ResizeObserverService:()=>ResizeObserverService,RowAnimationCssClasses:()=>RowAnimationCssClasses,RowContainerComp:()=>RowContainerComp,RowContainerCtrl:()=>RowContainerCtrl,RowContainerName:()=>RowContainerName,RowContainerType:()=>RowContainerType,RowCtrl:()=>RowCtrl,RowHighlightPosition:()=>RowHighlightPosition,RowNode:()=>RowNode,RowNodeBlock:()=>RowNodeBlock,RowNodeBlockLoader:()=>RowNodeBlockLoader,RowNodeSorter:()=>RowNodeSorter,RowPositionUtils:()=>RowPositionUtils,RowRenderer:()=>RowRenderer,ScalarFilter:()=>ScalarFilter,ScrollVisibleService:()=>ScrollVisibleService,SelectCellEditor:()=>SelectCellEditor,SelectableService:()=>SelectableService,SelectionHandleType:()=>SelectionHandleType,ServerSideTransactionResultStatus:()=>ServerSideTransactionResultStatus,SetLeftFeature:()=>SetLeftFeature,SimpleFilter:()=>SimpleFilter,SortController:()=>SortController,SortIndicatorComp:()=>SortIndicatorComp,StandardMenuFactory:()=>StandardMenuFactory,StylingService:()=>StylingService,TabGuardClassNames:()=>TabGuardClassNames,TabGuardComp:()=>TabGuardComp,TabGuardCtrl:()=>TabGuardCtrl,TabbedLayout:()=>TabbedLayout,TextCellEditor:()=>TextCellEditor,TextFilter:()=>TextFilter,TextFloatingFilter:()=>TextFloatingFilter,Timer:()=>Timer,TooltipFeature:()=>TooltipFeature,TooltipStateManager:()=>TooltipStateManager,TouchListener:()=>TouchListener,UserComponentFactory:()=>UserComponentFactory,UserComponentRegistry:()=>UserComponentRegistry,ValueCache:()=>ValueCache,ValueService:()=>ValueService,VanillaFrameworkOverrides:()=>VanillaFrameworkOverrides,VerticalDirection:()=>VerticalDirection,VirtualList:()=>VirtualList,VirtualListDragFeature:()=>VirtualListDragFeature,_:()=>_,__FORCE_MODULE_DETECTION:()=>__FORCE_MODULE_DETECTION,createGrid:()=>createGrid,getRowContainerTypeForName:()=>getRowContainerTypeForName,provideGlobalGridOptions:()=>provideGlobalGridOptions}),module.exports=__toCommonJS(main_exports);var generic_exports={};__export(generic_exports,{attrToBoolean:()=>attrToBoolean,attrToNumber:()=>attrToNumber,attrToString:()=>attrToString,defaultComparator:()=>defaultComparator,exists:()=>exists,jsonEquals:()=>jsonEquals,makeNull:()=>makeNull,missing:()=>missing,missingOrEmpty:()=>missingOrEmpty,toStringOrNull:()=>toStringOrNull,values:()=>values});function makeNull(e){return e==null||e===""?null:e}function exists(e,t=!1){return e!=null&&(e!==""||t)}function missing(e){return!exists(e)}function missingOrEmpty(e){return e==null||e.length===0}function toStringOrNull(e){return e!=null&&typeof e.toString=="function"?e.toString():null}function attrToNumber(e){if(e===void 0)return;if(e===null||e==="")return null;if(typeof e=="number")return isNaN(e)?void 0:e;const t=parseInt(e,10);return isNaN(t)?void 0:t}function attrToBoolean(e){if(e!==void 0)return e===null||e===""?!1:typeof e=="boolean"?e:/true/i.test(e)}function attrToString(e){if(!(e==null||e===""))return e}function jsonEquals(e,t){const i=e?JSON.stringify(e):null,s=t?JSON.stringify(t):null;return i===s}function defaultComparator(e,t,i=!1){const s=e==null,o=t==null;if(e&&e.toNumber&&(e=e.toNumber()),t&&t.toNumber&&(t=t.toNumber()),s&&o)return 0;if(s)return-1;if(o)return 1;function r(n,l){return n>l?1:n<l?-1:0}if(typeof e!="string"||!i)return r(e,t);try{return e.localeCompare(t)}catch{return r(e,t)}}function values(e){if(e instanceof Set||e instanceof Map){const t=[];return e.forEach(i=>t.push(i)),t}return Object.values(e)}var ColumnKeyCreator=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=toStringOrNull(e);let i=0;for(;;){let s;if(e?(s=e,i!==0&&(s+="_"+i)):t?(s=t,i!==0&&(s+="_"+i)):s=i,!this.existingKeys[s])return this.existingKeys[s]=!0,String(s);i++}}},object_exports={};__export(object_exports,{SKIP_JS_BUILTINS:()=>SKIP_JS_BUILTINS,cloneObject:()=>cloneObject,deepCloneDefinition:()=>deepCloneDefinition,getAllValuesInObject:()=>getAllValuesInObject,getValueUsingField:()=>getValueUsingField,isNonNullObject:()=>isNonNullObject,iterateObject:()=>iterateObject,mergeDeep:()=>mergeDeep,removeAllReferences:()=>removeAllReferences});var SKIP_JS_BUILTINS=new Set(["__proto__","constructor","prototype"]);function iterateObject(e,t){if(e!=null){if(Array.isArray(e)){for(let i=0;i<e.length;i++)t(i.toString(),e[i]);return}for(const[i,s]of Object.entries(e))t(i,s)}}function cloneObject(e){const t={},i=Object.keys(e);for(let s=0;s<i.length;s++){if(SKIP_JS_BUILTINS.has(i[s]))continue;const o=i[s],r=e[o];t[o]=r}return t}function deepCloneDefinition(e,t){if(!e)return;const i=e,s={};return Object.keys(i).forEach(o=>{if(t&&t.indexOf(o)>=0||SKIP_JS_BUILTINS.has(o))return;const r=i[o];isNonNullObject(r)&&r.constructor===Object?s[o]=deepCloneDefinition(r):s[o]=r}),s}function getAllValuesInObject(e){if(!e)return[];const t=Object;if(typeof t.values=="function")return t.values(e);const i=[];for(const s in e)e.hasOwnProperty(s)&&e.propertyIsEnumerable(s)&&i.push(e[s]);return i}function mergeDeep(e,t,i=!0,s=!1){exists(t)&&iterateObject(t,(o,r)=>{if(SKIP_JS_BUILTINS.has(o))return;let n=e[o];n!==r&&(s&&n==null&&r!=null&&typeof r=="object"&&r.constructor===Object&&(n={},e[o]=n),isNonNullObject(r)&&isNonNullObject(n)&&!Array.isArray(n)?mergeDeep(n,r,i,s):(i||r!==void 0)&&(e[o]=r))})}function getValueUsingField(e,t,i){if(!t||!e)return;if(!i)return e[t];const s=t.split(".");let o=e;for(let r=0;r<s.length;r++){if(o==null)return;o=o[s[r]]}return o}function removeAllReferences(e,t=[],i){Object.keys(e).forEach(n=>{typeof e[n]=="object"&&!t.includes(n)&&(e[n]=void 0)});const s=Object.getPrototypeOf(e),o={},r=n=>`AG Grid: Grid API function ${n}() cannot be called as the grid has been destroyed.
     2|     It is recommended to remove local references to the grid api. Alternatively, check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
     3|     To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${i}`;Object.getOwnPropertyNames(s).forEach(n=>{if(typeof s[n]=="function"&&!t.includes(n)){const a=()=>{console.warn(r(n))};o[n]={value:a,writable:!0}}}),Object.defineProperties(e,o)}function isNonNullObject(e){return typeof e=="object"&&e!==null}var function_exports={};__export(function_exports,{compose:()=>compose,debounce:()=>debounce,doOnce:()=>doOnce,errorOnce:()=>errorOnce,executeAfter:()=>executeAfter,executeInAWhile:()=>executeInAWhile,executeNextVMTurn:()=>executeNextVMTurn,getFunctionName:()=>getFunctionName,isFunction:()=>isFunction,noop:()=>noop,throttle:()=>throttle,waitUntil:()=>waitUntil,warnOnce:()=>warnOnce});var doOnceFlags={};function doOnce(e,t){doOnceFlags[t]||(e(),doOnceFlags[t]=!0)}function warnOnce(e){doOnce(()=>console.warn("AG Grid: "+e),e)}function errorOnce(e){doOnce(()=>console.error("AG Grid: "+e),e)}function getFunctionName(e){if(e.name)return e.name;const t=/function\s+([^\(]+)/.exec(e.toString());return t&&t.length===2?t[1].trim():null}function isFunction(e){return!!(e&&e.constructor&&e.call&&e.apply)}function executeInAWhile(e){executeAfter(e,400)}var executeNextVMTurnFuncs=[],executeNextVMTurnPending=!1;function executeNextVMTurn(e){executeNextVMTurnFuncs.push(e),!executeNextVMTurnPending&&(executeNextVMTurnPending=!0,window.setTimeout(()=>{const t=executeNextVMTurnFuncs.slice();executeNextVMTurnFuncs.length=0,executeNextVMTurnPending=!1,t.forEach(i=>i())},0))}function executeAfter(e,t=0){e.length>0&&window.setTimeout(()=>e.forEach(i=>i()),t)}function debounce(e,t){let i;return function(...s){const o=this;window.clearTimeout(i),i=window.setTimeout(function(){e.apply(o,s)},t)}}function throttle(e,t){let i=0;return function(...s){const o=this,r=new Date().getTime();r-i<t||(i=r,e.apply(o,s))}}function waitUntil(e,t,i=100,s){const o=new Date().getTime();let r=null,n=!1;const l=()=>{const a=new Date().getTime()-o>i;(e()||a)&&(t(),n=!0,r!=null&&(window.clearInterval(r),r=null),a&&s&&console.warn(s))};l(),n||(r=window.setInterval(l,10))}function compose(...e){return t=>e.reduce((i,s)=>s(i),t)}var noop=()=>{},ModuleNames=(e=>(e.CommunityCoreModule="@ag-grid-community/core",e.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",e.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",e.CsvExportModule="@ag-grid-community/csv-export",e.EnterpriseCoreModule="@ag-grid-enterprise/core",e.RowGroupingModule="@ag-grid-enterprise/row-grouping",e.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",e.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",e.MenuModule="@ag-grid-enterprise/menu",e.SetFilterModule="@ag-grid-enterprise/set-filter",e.MultiFilterModule="@ag-grid-enterprise/multi-filter",e.StatusBarModule="@ag-grid-enterprise/status-bar",e.SideBarModule="@ag-grid-enterprise/side-bar",e.RangeSelectionModule="@ag-grid-enterprise/range-selection",e.MasterDetailModule="@ag-grid-enterprise/master-detail",e.RichSelectModule="@ag-grid-enterprise/rich-select",e.GridChartsModule="@ag-grid-enterprise/charts",e.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",e.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",e.ExcelExportModule="@ag-grid-enterprise/excel-export",e.ClipboardModule="@ag-grid-enterprise/clipboard",e.SparklinesModule="@ag-grid-enterprise/sparklines",e.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",e.AngularModule="@ag-grid-community/angular",e.ReactModule="@ag-grid-community/react",e.VueModule="@ag-grid-community/vue",e))(ModuleNames||{}),_ModuleRegistry=class D{static register(t){D.__register(t,!0,void 0)}static registerModules(t){D.__registerModules(t,!0,void 0)}static __register(t,i,s){D.runVersionChecks(t),s!==void 0?(D.areGridScopedModules=!0,D.gridModulesMap[s]===void 0&&(D.gridModulesMap[s]={}),D.gridModulesMap[s][t.moduleName]=t):D.globalModulesMap[t.moduleName]=t,D.setModuleBased(i)}static __unRegisterGridModules(t){delete D.gridModulesMap[t]}static __registerModules(t,i,s){D.setModuleBased(i),t&&t.forEach(o=>D.__register(o,i,s))}static isValidModuleVersion(t){const[i,s]=t.version.split(".")||[],[o,r]=D.currentModuleVersion.split(".")||[];return i===o&&s===r}static runVersionChecks(t){if(D.currentModuleVersion||(D.currentModuleVersion=t.version),t.version?D.isValidModuleVersion(t)||console.error(`AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '${t.moduleName}' is version ${t.version} but the other modules are version ${this.currentModuleVersion}. Please update all modules to the same version.`):console.error(`AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '${t.moduleName}' is incompatible. Please update all modules to the same version.`),t.validate){const i=t.validate();i.isValid||console.error(`AG Grid: ${i.message}`)}}static setModuleBased(t){D.moduleBased===void 0?D.moduleBased=t:D.moduleBased!==t&&doOnce(()=>{console.warn("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),console.warn("Please see https://www.ag-grid.com/javascript-grid/modules/ for more information.")},"ModulePackageCheck")}static __setIsBundled(){D.isBundled=!0}static __assertRegistered(t,i,s){var o;if(this.__isRegistered(t,s))return!0;const r=i+t;let n;if(D.isBundled)n=`AG Grid: unable to use ${i} as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:
     4|         <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>
     5| For more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`;else if(D.moduleBased||D.moduleBased===void 0){let l=(o=Object.entries(ModuleNames).find(([a,d])=>d===t))==null?void 0:o[0];n=`AG Grid: unable to use ${i} as the ${l} is not registered${D.areGridScopedModules?` for gridId: ${s}`:""}. Check if you have registered the module:
     6|     import { ModuleRegistry } from '@ag-grid-community/core';
     7|     import { ${l} } from '${t}';
     8|     ModuleRegistry.registerModules([ ${l} ]);
     9| For more info see: https://www.ag-grid.com/javascript-grid/modules/`}else n=`AG Grid: unable to use ${i} as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:
    10|     import 'ag-grid-enterprise';`;return doOnce(()=>{console.warn(n)},r),!1}static __isRegistered(t,i){var s;return!!D.globalModulesMap[t]||!!((s=D.gridModulesMap[i])!=null&&s[t])}static __getRegisteredModules(t){return[...values(D.globalModulesMap),...values(D.gridModulesMap[t]||{})]}static __getGridRegisteredModules(t){var i;return values((i=D.gridModulesMap[t])!=null?i:{})||[]}static __isPackageBased(){return!D.moduleBased}};_ModuleRegistry.globalModulesMap={},_ModuleRegistry.gridModulesMap={},_ModuleRegistry.areGridScopedModules=!1;var ModuleRegistry=_ModuleRegistry,Context=class{constructor(e,t){if(this.beanWrappers={},this.destroyed=!1,!e||!e.beanClasses)return;this.contextParams=e,this.logger=t,this.logger.log(">> creating ag-Application Context"),this.createBeans();const i=this.getBeanInstances();this.wireBeans(i),this.logger.log(">> ag-Application Context ready - component is alive")}getBeanInstances(){return values(this.beanWrappers).map(e=>e.beanInstance)}createBean(e,t){if(!e)throw Error("Can't wire to bean since it is null");return this.wireBeans([e],t),e}wireBeans(e,t){this.autoWireBeans(e),this.methodWireBeans(e),this.callLifeCycleMethods(e,"preConstructMethods"),exists(t)&&e.forEach(t),this.callLifeCycleMethods(e,"postConstructMethods")}createBeans(){this.contextParams.beanClasses.forEach(this.createBeanWrapper.bind(this)),iterateObject(this.beanWrappers,(t,i)=>{let s;i.bean.__agBeanMetaData&&i.bean.__agBeanMetaData.autowireMethods&&i.bean.__agBeanMetaData.autowireMethods.agConstructor&&(s=i.bean.__agBeanMetaData.autowireMethods.agConstructor);const o=this.getBeansForParameters(s,i.bean.name),r=new(i.bean.bind.apply(i.bean,[null,...o]));i.beanInstance=r});const e=Object.keys(this.beanWrappers).join(", ");this.logger.log(`created beans: ${e}`)}createBeanWrapper(e){const t=e.__agBeanMetaData;if(!t){let s;e.prototype.constructor?s=getFunctionName(e.prototype.constructor):s=""+e,console.error(`Context item ${s} is not a bean`);return}const i={bean:e,beanInstance:null,beanName:t.beanName};this.beanWrappers[t.beanName]=i}autoWireBeans(e){e.forEach(t=>{this.forEachMetaDataInHierarchy(t,(i,s)=>{const o=i.agClassAttributes;o&&o.forEach(r=>{const n=this.lookupBeanInstance(s,r.beanName,r.optional);t[r.attributeName]=n})})})}methodWireBeans(e){e.forEach(t=>{this.forEachMetaDataInHierarchy(t,(i,s)=>{iterateObject(i.autowireMethods,(o,r)=>{if(o==="agConstructor")return;const n=this.getBeansForParameters(r,s);t[o].apply(t,n)})})})}forEachMetaDataInHierarchy(e,t){let i=Object.getPrototypeOf(e);for(;i!=null;){const s=i.constructor;if(s.hasOwnProperty("__agBeanMetaData")){const o=s.__agBeanMetaData,r=this.getBeanName(s);t(o,r)}i=Object.getPrototypeOf(i)}}getBeanName(e){if(e.__agBeanMetaData&&e.__agBeanMetaData.beanName)return e.__agBeanMetaData.beanName;const t=e.toString();return t.substring(9,t.indexOf("("))}getBeansForParameters(e,t){const i=[];return e&&iterateObject(e,(s,o)=>{const r=this.lookupBeanInstance(t,o);i[Number(s)]=r}),i}lookupBeanInstance(e,t,i=!1){if(this.destroyed)return this.logger.log(`AG Grid: bean reference ${t} is used after the grid is destroyed!`),null;if(t==="context")return this;if(this.contextParams.providedBeanInstances&&this.contextParams.providedBeanInstances.hasOwnProperty(t))return this.contextParams.providedBeanInstances[t];const s=this.beanWrappers[t];return s?s.beanInstance:(i||console.error(`AG Grid: unable to find bean reference ${t} while initialising ${e}`),null)}callLifeCycleMethods(e,t){e.forEach(i=>this.callLifeCycleMethodsOnBean(i,t))}callLifeCycleMethodsOnBean(e,t,i){const s={};this.forEachMetaDataInHierarchy(e,r=>{const n=r[t];n&&n.forEach(l=>{l!=i&&(s[l]=!0)})}),Object.keys(s).forEach(r=>e[r]())}getBean(e){return this.lookupBeanInstance("getBean",e,!0)}destroy(){if(this.destroyed)return;this.destroyed=!0,this.logger.log(">> Shutting down ag-Application Context");const e=this.getBeanInstances();this.destroyBeans(e),this.contextParams.providedBeanInstances=null,ModuleRegistry.__unRegisterGridModules(this.contextParams.gridId),this.logger.log(">> ag-Application Context shut down - component is dead")}destroyBean(e){e&&this.destroyBeans([e])}destroyBeans(e){return e?(e.forEach(t=>{this.callLifeCycleMethodsOnBean(t,"preDestroyMethods","destroy");const i=t;typeof i.destroy=="function"&&i.destroy()}),[]):[]}isDestroyed(){return this.destroyed}getGridId(){return this.contextParams.gridId}};function PreConstruct(e,t,i){const s=getOrCreateProps(e.constructor);s.preConstructMethods||(s.preConstructMethods=[]),s.preConstructMethods.push(t)}function PostConstruct(e,t,i){const s=getOrCreateProps(e.constructor);s.postConstructMethods||(s.postConstructMethods=[]),s.postConstructMethods.push(t)}function PreDestroy(e,t,i){const s=getOrCreateProps(e.constructor);s.preDestroyMethods||(s.preDestroyMethods=[]),s.preDestroyMethods.push(t)}function Bean(e){return t=>{const i=getOrCreateProps(t);i.beanName=e}}function Autowired(e){return(t,i,s)=>{autowiredFunc(t,e,!1,t,i,null)}}function Optional(e){return(t,i,s)=>{autowiredFunc(t,e,!0,t,i,null)}}function autowiredFunc(e,t,i,s,o,r){if(t===null){console.error("AG Grid: Autowired name should not be null");return}if(typeof r=="number"){console.error("AG Grid: Autowired should be on an attribute");return}const n=getOrCreateProps(e.constructor);n.agClassAttributes||(n.agClassAttributes=[]),n.agClassAttributes.push({attributeName:o,beanName:t,optional:i})}function Qualifier(e){return(t,i,s)=>{const o=typeof t=="function"?t:t.constructor;let r;if(typeof s=="number"){let n;i?(r=getOrCreateProps(o),n=i):(r=getOrCreateProps(o),n="agConstructor"),r.autowireMethods||(r.autowireMethods={}),r.autowireMethods[n]||(r.autowireMethods[n]={}),r.autowireMethods[n][s]=e}}}function getOrCreateProps(e){return e.hasOwnProperty("__agBeanMetaData")||(e.__agBeanMetaData={}),e.__agBeanMetaData}var EventService=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setBeans(e,t,i=null,s=null){if(this.frameworkOverrides=t,this.gos=e,i){const o=e.useAsyncEvents();this.addGlobalListener(i,o)}s&&this.addGlobalListener(s,!1)}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,i){const s=t?this.allAsyncListeners:this.allSyncListeners;let o=s.get(e);return!o&&i&&(o=new Set,s.set(e,o)),o}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,i=!1){this.getListeners(e,i,!0).add(t)}removeEventListener(e,t,i=!1){const s=this.getListeners(e,i,!1);s&&(s.delete(t),s.size===0&&(i?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).add(e)}removeGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).delete(e)}dispatchEvent(e){let t=e;this.gos&&this.gos.addGridCommonParams(t),this.dispatchToListeners(t,!0),this.dispatchToListeners(t,!1),this.firedEvents[t.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){var i;const s=e.type;if(t&&"event"in e){const a=e.event;a instanceof Event&&(e.eventPath=a.composedPath())}const o=(a,d)=>a.forEach(u=>{if(!d.has(u))return;const h=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>u(e)):()=>u(e);t?this.dispatchAsync(h):h()}),r=(i=this.getListeners(s,t,!1))!=null?i:new Set,n=new Set(r);n.size>0&&o(n,r),new Set(t?this.globalAsyncListeners:this.globalSyncListeners).forEach(a=>{const d=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>a(s,e)):()=>a(s,e);t?this.dispatchAsync(d):d()})}dispatchAsync(e){this.asyncFunctionsQueue.push(e),this.scheduled||(this.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)}),this.scheduled=!0)}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach(t=>t())}};__decorateClass([__decorateParam(0,Qualifier("gridOptionsService")),__decorateParam(1,Qualifier("frameworkOverrides")),__decorateParam(2,Qualifier("globalEventListener")),__decorateParam(3,Qualifier("globalSyncEventListener"))],EventService.prototype,"setBeans",1),EventService=__decorateClass([Bean("eventService")],EventService);var FrameworkEventListenerService=class{constructor(e){this.frameworkOverrides=e,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=i=>{this.frameworkOverrides.wrapOutgoing(()=>e(i))},this.wrappedListeners.set(e,t)),t}wrapGlobal(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=(i,s)=>{this.frameworkOverrides.wrapOutgoing(()=>e(i,s))},this.wrappedGlobalListeners.set(e,t)),t}unwrap(e){var t;return(t=this.wrappedListeners.get(e))!=null?t:e}unwrapGlobal(e){var t;return(t=this.wrappedGlobalListeners.get(e))!=null?t:e}},COL_DEF_DEFAULTS={resizable:!0,sortable:!0},instanceIdSequence=0;function getNextColInstanceId(){return instanceIdSequence++}var _Column=class se{constructor(t,i,s,o){this.instanceId=getNextColInstanceId(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.eventService=new EventService,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=t,this.userProvidedColDef=i,this.colId=s,this.primary=o,this.setState(t)}getInstanceId(){return this.instanceId}setState(t){t.sort!==void 0?(t.sort==="asc"||t.sort==="desc")&&(this.sort=t.sort):(t.initialSort==="asc"||t.initialSort==="desc")&&(this.sort=t.initialSort);const i=t.sortIndex,s=t.initialSortIndex;i!==void 0?i!==null&&(this.sortIndex=i):s!==null&&(this.sortIndex=s);const o=t.hide,r=t.initialHide;o!==void 0?this.visible=!o:this.visible=!r,t.pinned!==void 0?this.setPinned(t.pinned):this.setPinned(t.initialPinned);const n=t.flex,l=t.initialFlex;n!==void 0?this.flex=n:l!==void 0&&(this.flex=l)}setColDef(t,i,s){this.colDef=t,this.userProvidedColDef=i,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.eventService.dispatchEvent(this.createColumnEvent("colDefChanged",s))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(t){this.parent=t}getParent(){return this.parent}setOriginalParent(t){this.originalParent=t}getOriginalParent(){return this.originalParent}initialise(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()}initDotNotation(){const t=this.gos.get("suppressFieldDotNotation");this.fieldContainsDots=exists(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!t,this.tooltipFieldContainsDots=exists(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!t}initMinAndMaxWidths(){var t,i;const s=this.colDef;this.minWidth=(t=s.minWidth)!=null?t:this.environment.getMinColWidth(),this.maxWidth=(i=s.maxWidth)!=null?i:Number.MAX_SAFE_INTEGER}initTooltip(){this.tooltipEnabled=exists(this.colDef.tooltipField)||exists(this.colDef.tooltipValueGetter)||exists(this.colDef.tooltipComponent)}resetActualWidth(t){const i=this.calculateColInitialWidth(this.colDef);this.setActualWidth(i,t,!0)}calculateColInitialWidth(t){var i,s;const o=(i=t.minWidth)!=null?i:this.environment.getMinColWidth(),r=(s=t.maxWidth)!=null?s:Number.MAX_SAFE_INTEGER;let n;const l=attrToNumber(t.width),a=attrToNumber(t.initialWidth);return l!=null?n=l:a!=null?n=a:n=200,Math.max(Math.min(n,r),o)}isEmptyGroup(){return!1}isRowGroupDisplayed(t){if(missing(this.colDef)||missing(this.colDef.showRowGroup))return!1;const i=this.colDef.showRowGroup===!0,s=this.colDef.showRowGroup===t;return i||s}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}addEventListener(t,i){var s,o;this.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.eventService.setFrameworkOverrides(this.frameworkOverrides),this.frameworkEventListenerService=new FrameworkEventListenerService(this.frameworkOverrides));const r=(o=(s=this.frameworkEventListenerService)==null?void 0:s.wrap(i))!=null?o:i;this.eventService.addEventListener(t,r)}removeEventListener(t,i){var s,o;const r=(o=(s=this.frameworkEventListenerService)==null?void 0:s.unwrap(i))!=null?o:i;this.eventService.removeEventListener(t,r)}createColumnFunctionCallbackParams(t){return this.gos.addGridCommonParams({node:t,data:t.data,column:this,colDef:this.colDef})}isSuppressNavigable(t){if(typeof this.colDef.suppressNavigable=="boolean")return this.colDef.suppressNavigable;if(typeof this.colDef.suppressNavigable=="function"){const i=this.createColumnFunctionCallbackParams(t),s=this.colDef.suppressNavigable;return s(i)}return!1}isCellEditable(t){return t.group&&!this.gos.get("enableGroupEdit")?!1:this.isColumnFunc(t,this.colDef.editable)}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(t){return this.isColumnFunc(t,this.colDef.rowDrag)}isDndSource(t){return this.isColumnFunc(t,this.colDef.dndSource)}isCellCheckboxSelection(t){return this.isColumnFunc(t,this.colDef.checkboxSelection)}isSuppressPaste(t){return this.isColumnFunc(t,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(t){var i;return(i=this.colDef[t])!=null?i:COL_DEF_DEFAULTS[t]}isColumnFunc(t,i){if(typeof i=="boolean")return i;if(typeof i=="function"){const s=this.createColumnFunctionCallbackParams(t);return i(s)}return!1}setMoving(t,i){this.moving=t,this.eventService.dispatchEvent(this.createColumnEvent("movingChanged",i))}createColumnEvent(t,i){return this.gos.addGridCommonParams({type:t,column:this,columns:[this],source:i})}isMoving(){return this.moving}getSort(){return this.sort}setSort(t,i){this.sort!==t&&(this.sort=t,this.eventService.dispatchEvent(this.createColumnEvent("sortChanged",i))),this.dispatchStateUpdatedEvent("sort")}setMenuVisible(t,i){this.menuVisible!==t&&(this.menuVisible=t,this.eventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",i)))}isMenuVisible(){return this.menuVisible}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return missing(this.sort)}isSorting(){return exists(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(t){this.sortIndex=t,this.dispatchStateUpdatedEvent("sortIndex")}setAggFunc(t){this.aggFunc=t,this.dispatchStateUpdatedEvent("aggFunc")}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(t,i){this.oldLeft=this.left,this.left!==t&&(this.left=t,this.eventService.dispatchEvent(this.createColumnEvent("leftChanged",i)))}isFilterActive(){return this.filterActive}setFilterActive(t,i,s){this.filterActive!==t&&(this.filterActive=t,this.eventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",i)));const o=this.createColumnEvent("filterChanged",i);s&&mergeDeep(o,s),this.eventService.dispatchEvent(o)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(t){t===!0||t==="left"?this.pinned="left":t==="right"?this.pinned="right":this.pinned=null,this.dispatchStateUpdatedEvent("pinned")}setFirstRightPinned(t,i){this.firstRightPinned!==t&&(this.firstRightPinned=t,this.eventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",i)))}setLastLeftPinned(t,i){this.lastLeftPinned!==t&&(this.lastLeftPinned=t,this.eventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",i)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(t,i){const s=t===!0;this.visible!==s&&(this.visible=s,this.eventService.dispatchEvent(this.createColumnEvent("visibleChanged",i))),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){const t=this.getColDef();return!t.suppressSpanHeaderHeight&&!t.autoHeaderHeight}getColumnGroupPaddingInfo(){let t=this.getParent();if(!t||!t.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const i=t.getPaddingLevel()+1;let s=!0;for(;t;){if(!t.isPadding()){s=!1;break}t=t.getParent()}return{numberOfParents:i,isSpanningTotal:s}}getColDef(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getDefinition(){return this.colDef}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(t){const i=t!==this.autoHeaderHeight;return this.autoHeaderHeight=t,i}createBaseColDefParams(t){return this.gos.addGridCommonParams({node:t,data:t.data,colDef:this.colDef,column:this})}getColSpan(t){if(missing(this.colDef.colSpan))return 1;const i=this.createBaseColDefParams(t),s=this.colDef.colSpan(i);return Math.max(s,1)}getRowSpan(t){if(missing(this.colDef.rowSpan))return 1;const i=this.createBaseColDefParams(t),s=this.colDef.rowSpan(i);return Math.max(s,1)}setActualWidth(t,i,s=!1){this.minWidth!=null&&(t=Math.max(t,this.minWidth)),this.maxWidth!=null&&(t=Math.min(t,this.maxWidth)),this.actualWidth!==t&&(this.actualWidth=t,this.flex&&i!=="flex"&&i!=="gridInitializing"&&(this.flex=null),s||this.fireColumnWidthChangedEvent(i)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(t){this.eventService.dispatchEvent(this.createColumnEvent("widthChanged",t))}isGreaterThanMax(t){return this.maxWidth!=null?t>this.maxWidth:!1}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(t){this.flex!==t&&(this.flex=t),this.dispatchStateUpdatedEvent("flex")}setMinimum(t){exists(this.minWidth)&&this.setActualWidth(this.minWidth,t)}setRowGroupActive(t,i){this.rowGroupActive!==t&&(this.rowGroupActive=t,this.eventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",i))),this.dispatchStateUpdatedEvent("rowGroup")}isRowGroupActive(){return this.rowGroupActive}setPivotActive(t,i){this.pivotActive!==t&&(this.pivotActive=t,this.eventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",i))),this.dispatchStateUpdatedEvent("pivot")}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(t,i){this.aggregationActive!==t&&(this.aggregationActive=t,this.eventService.dispatchEvent(this.createColumnEvent("columnValueChanged",i)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}getMenuTabs(t){warnOnce("As of v31.1, 'getMenuTabs' is deprecated. Use 'getColDef().menuTabs ?? defaultValues' instead.");let i=this.getColDef().menuTabs;return i==null&&(i=t),i}dispatchStateUpdatedEvent(t){this.eventService.dispatchEvent({type:se.EVENT_STATE_UPDATED,key:t})}};_Column.EVENT_MOVING_CHANGED="movingChanged",_Column.EVENT_LEFT_CHANGED="leftChanged",_Column.EVENT_WIDTH_CHANGED="widthChanged",_Column.EVENT_LAST_LEFT_PINNED_CHANGED="lastLeftPinnedChanged",_Column.EVENT_FIRST_RIGHT_PINNED_CHANGED="firstRightPinnedChanged",_Column.EVENT_VISIBLE_CHANGED="visibleChanged",_Column.EVENT_FILTER_CHANGED="filterChanged",_Column.EVENT_FILTER_ACTIVE_CHANGED="filterActiveChanged",_Column.EVENT_SORT_CHANGED="sortChanged",_Column.EVENT_COL_DEF_CHANGED="colDefChanged",_Column.EVENT_MENU_VISIBLE_CHANGED="menuVisibleChanged",_Column.EVENT_ROW_GROUP_CHANGED="columnRowGroupChanged",_Column.EVENT_PIVOT_CHANGED="columnPivotChanged",_Column.EVENT_VALUE_CHANGED="columnValueChanged",_Column.EVENT_STATE_UPDATED="columnStateUpdated",__decorateClass([Autowired("gridOptionsService")],_Column.prototype,"gos",2),__decorateClass([Autowired("environment")],_Column.prototype,"environment",2),__decorateClass([Autowired("columnHoverService")],_Column.prototype,"columnHoverService",2),__decorateClass([Autowired("frameworkOverrides")],_Column.prototype,"frameworkOverrides",2),__decorateClass([PostConstruct],_Column.prototype,"initialise",1);var Column=_Column,_ProvidedColumnGroup=class W{constructor(t,i,s,o){this.localEventService=new EventService,this.expandable=!1,this.instanceId=getNextColInstanceId(),this.expandableListenerRemoveCallback=null,this.colGroupDef=t,this.groupId=i,this.expanded=!!t&&!!t.openByDefault,this.padding=s,this.level=o}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0)}reset(t,i){this.colGroupDef=t,this.level=i,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(t){this.originalParent=t}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(t=>t.isVisible()):!1}isPadding(){return this.padding}setExpanded(t){this.expanded=t===void 0?!1:t;const i={type:W.EVENT_EXPANDED_CHANGED};this.localEventService.dispatchEvent(i)}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(t){this.children=t}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const t=[];return this.addLeafColumns(t),t}addLeafColumns(t){this.children&&this.children.forEach(i=>{i instanceof Column?t.push(i):i instanceof W&&i.addLeafColumns(t)})}getColumnGroupShow(){const t=this.colGroupDef;if(t)return t.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const t=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(i=>i.addEventListener("visibleChanged",t)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(i=>i.removeEventListener("visibleChanged",t)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let t=!1,i=!1,s=!1;const o=this.findChildrenRemovingPadding();for(let n=0,l=o.length;n<l;n++){const a=o[n];if(!a.isVisible())continue;const d=a.getColumnGroupShow();d==="open"?(t=!0,s=!0):d==="closed"?(i=!0,s=!0):(t=!0,i=!0)}const r=t&&i&&s;if(this.expandable!==r){this.expandable=r;const n={type:W.EVENT_EXPANDABLE_CHANGED};this.localEventService.dispatchEvent(n)}}findChildrenRemovingPadding(){const t=[],i=s=>{s.forEach(o=>{o instanceof W&&o.isPadding()?i(o.children):t.push(o)})};return i(this.children),t}onColumnVisibilityChanged(){this.setExpandable()}addEventListener(t,i){this.localEventService.addEventListener(t,i)}removeEventListener(t,i){this.localEventService.removeEventListener(t,i)}};_ProvidedColumnGroup.EVENT_EXPANDED_CHANGED="expandedChanged",_ProvidedColumnGroup.EVENT_EXPANDABLE_CHANGED="expandableChanged",__decorateClass([PreDestroy],_ProvidedColumnGroup.prototype,"destroy",1);var ProvidedColumnGroup=_ProvidedColumnGroup,DefaultColumnTypes={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},event_exports={};__export(event_exports,{addSafePassiveEventListener:()=>addSafePassiveEventListener,createEventPath:()=>createEventPath,getCtrlForEventTarget:()=>getCtrlForEventTarget,getEventPath:()=>getEventPath,isElementInEventPath:()=>isElementInEventPath,isEventSupported:()=>isEventSupported,isStopPropagationForAgGrid:()=>isStopPropagationForAgGrid,stopPropagationForAgGrid:()=>stopPropagationForAgGrid});var array_exports={};__export(array_exports,{areEqual:()=>areEqual,existsAndNotEmpty:()=>existsAndNotEmpty,flatten:()=>flatten,forEachReverse:()=>forEachReverse,includes:()=>includes,insertArrayIntoArray:()=>insertArrayIntoArray,insertIntoArray:()=>insertIntoArray,last:()=>last,moveInArray:()=>moveInArray,pushAll:()=>pushAll,removeAllFromArray:()=>removeAllFromArray,removeAllFromUnorderedArray:()=>removeAllFromUnorderedArray,removeFromArray:()=>removeFromArray,removeFromUnorderedArray:()=>removeFromUnorderedArray,removeRepeatsFromArray:()=>removeRepeatsFromArray,shallowCompare:()=>shallowCompare,sortNumerically:()=>sortNumerically,toStrings:()=>toStrings});function existsAndNotEmpty(e){return e!=null&&e.length>0}function last(e){if(!(!e||!e.length))return e[e.length-1]}function areEqual(e,t,i){return e==null&&t==null?!0:e!=null&&t!=null&&e.length===t.length&&e.every((s,o)=>i?i(s,t[o]):t[o]===s)}function shallowCompare(e,t){return areEqual(e,t)}function sortNumerically(e){return e.sort((t,i)=>t-i)}function removeRepeatsFromArray(e,t){if(e)for(let i=e.length-2;i>=0;i--){const s=e[i]===t,o=e[i+1]===t;s&&o&&e.splice(i+1,1)}}function removeFromUnorderedArray(e,t){const i=e.indexOf(t);i>=0&&(e[i]=e[e.length-1],e.pop())}function removeFromArray(e,t){const i=e.indexOf(t);i>=0&&e.splice(i,1)}function removeAllFromUnorderedArray(e,t){for(let i=0;i<t.length;i++)removeFromUnorderedArray(e,t[i])}function removeAllFromArray(e,t){for(let i=0;i<t.length;i++)removeFromArray(e,t[i])}function insertIntoArray(e,t,i){e.splice(i,0,t)}function insertArrayIntoArray(e,t,i){if(!(e==null||t==null))for(let s=t.length-1;s>=0;s--){const o=t[s];insertIntoArray(e,o,i)}}function moveInArray(e,t,i){removeAllFromArray(e,t),t.slice().reverse().forEach(s=>insertIntoArray(e,s,i))}function includes(e,t){return e.indexOf(t)>-1}function flatten(e){return[].concat.apply([],e)}function pushAll(e,t){t==null||e==null||t.forEach(i=>e.push(i))}function toStrings(e){return e.map(toStringOrNull)}function forEachReverse(e,t){if(e!=null)for(let i=e.length-1;i>=0;i--)t(e[i],i)}var AG_GRID_STOP_PROPAGATION="__ag_Grid_Stop_Propagation",PASSIVE_EVENTS=["touchstart","touchend","touchmove","touchcancel","scroll"],supports={};function stopPropagationForAgGrid(e){e[AG_GRID_STOP_PROPAGATION]=!0}function isStopPropagationForAgGrid(e){return e[AG_GRID_STOP_PROPAGATION]===!0}var isEventSupported=(()=>{const e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return i=>{if(typeof supports[i]=="boolean")return supports[i];const s=document.createElement(e[i]||"div");return i="on"+i,supports[i]=i in s}})();function getCtrlForEventTarget(e,t,i){let s=t;for(;s;){const o=e.getDomData(s,i);if(o)return o;s=s.parentElement}return null}function isElementInEventPath(e,t){return!t||!e?!1:getEventPath(t).indexOf(e)>=0}function createEventPath(e){const t=[];let i=e.target;for(;i;)t.push(i),i=i.parentElement;return t}function getEventPath(e){const t=e;return t.path?t.path:t.composedPath?t.composedPath():createEventPath(t)}function addSafePassiveEventListener(e,t,i,s){const r=includes(PASSIVE_EVENTS,i)?{passive:!0}:void 0;e&&e.addEventListener&&e.addEventListener(t,i,s,r)}var _BeanStub=class oe{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.lastChangeSetIdLookup={},this.propertyListenerId=0,this.isAlive=()=>!this.destroyed}getFrameworkOverrides(){return this.frameworkOverrides}getContext(){return this.context}destroy(){for(let t=0;t<this.destroyFunctions.length;t++)this.destroyFunctions[t]();this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchEvent({type:oe.EVENT_DESTROYED})}addEventListener(t,i){this.localEventService||(this.localEventService=new EventService),this.localEventService.addEventListener(t,i)}removeEventListener(t,i){this.localEventService&&this.localEventService.removeEventListener(t,i)}dispatchEvent(t){this.localEventService&&this.localEventService.dispatchEvent(t)}addManagedListener(t,i,s){if(this.destroyed)return;t instanceof HTMLElement?addSafePassiveEventListener(this.getFrameworkOverrides(),t,i,s):t.addEventListener(i,s);const o=()=>(t.removeEventListener(i,s),null);return this.destroyFunctions.push(o),()=>(o(),this.destroyFunctions=this.destroyFunctions.filter(r=>r!==o),null)}setupGridOptionListener(t,i){this.gos.addEventListener(t,i);const s=()=>(this.gos.removeEventListener(t,i),null);return this.destroyFunctions.push(s),()=>(s(),this.destroyFunctions=this.destroyFunctions.filter(o=>o!==s),null)}addManagedPropertyListener(t,i){return this.destroyed?()=>null:this.setupGridOptionListener(t,i)}addManagedPropertyListeners(t,i){if(this.destroyed)return;const s=t.join("-")+this.propertyListenerId++,o=r=>{if(r.changeSet){if(r.changeSet&&r.changeSet.id===this.lastChangeSetIdLookup[s])return;this.lastChangeSetIdLookup[s]=r.changeSet.id}const n={type:"gridPropertyChanged",changeSet:r.changeSet,source:r.source};i(n)};t.forEach(r=>this.setupGridOptionListener(r,o))}addDestroyFunc(t){this.isAlive()?this.destroyFunctions.push(t):t()}createManagedBean(t,i){const s=this.createBean(t,i);return this.addDestroyFunc(this.destroyBean.bind(this,t,i)),s}createBean(t,i,s){return(i||this.getContext()).createBean(t,s)}destroyBean(t,i){return(i||this.getContext()).destroyBean(t)}destroyBeans(t,i){if(t)for(let s=0;s<t.length;s++)this.destroyBean(t[s],i);return[]}};_BeanStub.EVENT_DESTROYED="destroyed",__decorateClass([Autowired("frameworkOverrides")],_BeanStub.prototype,"frameworkOverrides",2),__decorateClass([Autowired("context")],_BeanStub.prototype,"context",2),__decorateClass([Autowired("eventService")],_BeanStub.prototype,"eventService",2),__decorateClass([Autowired("gridOptionsService")],_BeanStub.prototype,"gos",2),__decorateClass([Autowired("localeService")],_BeanStub.prototype,"localeService",2),__decorateClass([Autowired("environment")],_BeanStub.prototype,"environment",2),__decorateClass([PreDestroy],_BeanStub.prototype,"destroy",1);var BeanStub=_BeanStub,ColumnFactory=class extends BeanStub{setBeans(e){this.logger=e.create("ColumnFactory")}createColumnTree(e,t,i,s){const o=new ColumnKeyCreator,{existingCols:r,existingGroups:n,existingColKeys:l}=this.extractExistingTreeData(i);o.addExistingKeys(l);const a=this.recursivelyCreateColumns(e,0,t,r,o,n,s),d=this.findMaxDept(a,0);this.logger.log("Number of levels for grouped columns is "+d);const u=this.balanceColumnTree(a,0,d,o);return depthFirstOriginalTreeSearch(null,u,(c,p)=>{c instanceof ProvidedColumnGroup&&c.setupExpandable(),c.setOriginalParent(p)}),{columnTree:u,treeDept:d}}extractExistingTreeData(e){const t=[],i=[],s=[];return e&&depthFirstOriginalTreeSearch(null,e,o=>{if(o instanceof ProvidedColumnGroup){const r=o;i.push(r)}else{const r=o;s.push(r.getId()),t.push(r)}}),{existingCols:t,existingGroups:i,existingColKeys:s}}createForAutoGroups(e,t){return e.map(i=>this.createAutoGroupTreeItem(t,i))}createAutoGroupTreeItem(e,t){const i=this.findDepth(e);let s=t;for(let o=i-1;o>=0;o--){const r=new ProvidedColumnGroup(null,`FAKE_PATH_${t.getId()}}_${o}`,!0,o);this.createBean(r),r.setChildren([s]),s.setOriginalParent(r),s=r}return i===0&&t.setOriginalParent(null),s}findDepth(e){let t=0,i=e;for(;i&&i[0]&&i[0]instanceof ProvidedColumnGroup;)t++,i=i[0].getChildren();return t}balanceColumnTree(e,t,i,s){const o=[];for(let r=0;r<e.length;r++){const n=e[r];if(n instanceof ProvidedColumnGroup){const l=n,a=this.balanceColumnTree(l.getChildren(),t+1,i,s);l.setChildren(a),o.push(l)}else{let l,a;for(let d=i-1;d>=t;d--){const u=s.getUniqueKey(null,null),h=this.createMergedColGroupDef(null),c=new ProvidedColumnGroup(h,u,!0,t);this.createBean(c),a&&a.setChildren([c]),a=c,l||(l=a)}if(l&&a)if(o.push(l),e.some(u=>u instanceof ProvidedColumnGroup)){a.setChildren([n]);continue}else{a.setChildren(e);break}o.push(n)}}return o}findMaxDept(e,t){let i=t;for(let s=0;s<e.length;s++){const o=e[s];if(o instanceof ProvidedColumnGroup){const r=o,n=this.findMaxDept(r.getChildren(),t+1);i<n&&(i=n)}}return i}recursivelyCreateColumns(e,t,i,s,o,r,n){if(!e)return[];const l=new Array(e.length);for(let a=0;a<l.length;a++){const d=e[a];this.isColumnGroup(d)?l[a]=this.createColumnGroup(i,d,t,s,o,r,n):l[a]=this.createColumn(i,d,s,o,n)}return l}createColumnGroup(e,t,i,s,o,r,n){const l=this.createMergedColGroupDef(t),a=o.getUniqueKey(l.groupId||null,null),d=new ProvidedColumnGroup(l,a,!1,i);this.createBean(d);const u=this.findExistingGroup(t,r);u&&r.splice(u.idx,1);let h=u?.group;h&&d.setExpanded(h.isExpanded());const c=this.recursivelyCreateColumns(l.children,i+1,e,s,o,r,n);return d.setChildren(c),d}createMergedColGroupDef(e){const t={};return Object.assign(t,this.gos.get("defaultColGroupDef")),Object.assign(t,e),t}createColumn(e,t,i,s,o){const r=this.findExistingColumn(t,i);r&&i?.splice(r.idx,1);let n=r?.column;if(n){const l=this.addColumnDefaultAndTypes(t,n.getColId());n.setColDef(l,t,o),this.applyColumnState(n,l,o)}else{const l=s.getUniqueKey(t.colId,t.field),a=this.addColumnDefaultAndTypes(t,l);n=new Column(a,t,l,e),this.context.createBean(n)}return this.dataTypeService.addColumnListeners(n),n}applyColumnState(e,t,i){const s=attrToNumber(t.flex);if(s!==void 0&&e.setFlex(s),e.getFlex()<=0){const l=attrToNumber(t.width);if(l!=null)e.setActualWidth(l,i);else{const a=e.getActualWidth();e.setActualWidth(a,i)}}t.sort!==void 0&&(t.sort=="asc"||t.sort=="desc"?e.setSort(t.sort,i):e.setSort(void 0,i));const r=attrToNumber(t.sortIndex);r!==void 0&&e.setSortIndex(r);const n=attrToBoolean(t.hide);n!==void 0&&e.setVisible(!n,i),t.pinned!==void 0&&e.setPinned(t.pinned)}findExistingColumn(e,t){if(t)for(let i=0;i<t.length;i++){const s=t[i].getUserProvidedColDef();if(!s)continue;if(e.colId!=null){if(t[i].getId()===e.colId)return{idx:i,column:t[i]};continue}if(e.field!=null){if(s.field===e.field)return{idx:i,column:t[i]};continue}if(s===e)return{idx:i,column:t[i]}}}findExistingGroup(e,t){if(e.groupId!=null)for(let s=0;s<t.length;s++){const o=t[s];if(o.getColGroupDef()&&o.getId()===e.groupId)return{idx:s,group:o}}}addColumnDefaultAndTypes(e,t){const i={},s=this.gos.get("defaultColDef");mergeDeep(i,s,!1,!0);const o=this.dataTypeService.updateColDefAndGetColumnType(i,e,t);o&&this.assignColumnTypes(o,i),mergeDeep(i,e,!1,!0);const r=this.gos.get("autoGroupColumnDef"),n=this.gos.isColumnsSortingCoupledToGroup();return e.rowGroup&&r&&n&&mergeDeep(i,{sort:r.sort,initialSort:r.initialSort},!1,!0),this.dataTypeService.validateColDef(i),i}assignColumnTypes(e,t){if(!e.length)return;const i=Object.assign({},DefaultColumnTypes),s=this.gos.get("columnTypes")||{};iterateObject(s,(o,r)=>{o in i?console.warn(`AG Grid: the column type '${o}' is a default column type and cannot be overridden.`):(r.type&&warnOnce("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),i[o]=r)}),e.forEach(o=>{const r=i[o.trim()];r?mergeDeep(t,r,!1,!0):console.warn("AG Grid: colDef.type '"+o+"' does not correspond to defined gridOptions.columnTypes")})}isColumnGroup(e){return e.children!==void 0}};__decorateClass([Autowired("dataTypeService")],ColumnFactory.prototype,"dataTypeService",2),__decorateClass([__decorateParam(0,Qualifier("loggerFactory"))],ColumnFactory.prototype,"setBeans",1),ColumnFactory=__decorateClass([Bean("columnFactory")],ColumnFactory);function depthFirstOriginalTreeSearch(e,t,i){if(t)for(let s=0;s<t.length;s++){const o=t[s];o instanceof ProvidedColumnGroup&&depthFirstOriginalTreeSearch(o,o.getChildren(),i),i(o,e)}}var _ColumnGroup=class M{constructor(t,i,s,o){this.displayedChildren=[],this.localEventService=new EventService,this.groupId=i,this.partId=s,this.providedColumnGroup=t,this.pinned=o}static createUniqueId(t,i){return t+"_"+i}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(t){this.parent=t}getUniqueId(){return M.createUniqueId(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){const t=this.getProvidedColumnGroup().getLeafColumns();return!t||t.length===0?!1:t.every(i=>i.isMoving())}checkLeft(){if(this.displayedChildren.forEach(t=>{t instanceof M&&t.checkLeft()}),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const i=last(this.displayedChildren).getLeft();this.setLeft(i)}else{const t=this.displayedChildren[0].getLeft();this.setLeft(t)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(t){this.oldLeft=this.left,this.left!==t&&(this.left=t,this.localEventService.dispatchEvent(this.createAgEvent(M.EVENT_LEFT_CHANGED)))}getPinned(){return this.pinned}createAgEvent(t){return{type:t}}addEventListener(t,i){this.localEventService.addEventListener(t,i)}removeEventListener(t,i){this.localEventService.removeEventListener(t,i)}getGroupId(){return this.groupId}getPartId(){return this.partId}isChildInThisGroupDeepSearch(t){let i=!1;return this.children.forEach(s=>{t===s&&(i=!0),s instanceof M&&s.isChildInThisGroupDeepSearch(t)&&(i=!0)}),i}getActualWidth(){let t=0;return this.displayedChildren&&this.displayedChildren.forEach(i=>{t+=i.getActualWidth()}),t}isResizable(){if(!this.displayedChildren)return!1;let t=!1;return this.displayedChildren.forEach(i=>{i.isResizable()&&(t=!0)}),t}getMinWidth(){let t=0;return this.displayedChildren.forEach(i=>{t+=i.getMinWidth()||0}),t}addChild(t){this.children||(this.children=[]),this.children.push(t)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const t=[];return this.addLeafColumns(t),t}getDisplayedLeafColumns(){const t=[];return this.addDisplayedLeafColumns(t),t}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(t){this.providedColumnGroup.setExpanded(t)}addDisplayedLeafColumns(t){this.displayedChildren.forEach(i=>{i instanceof Column?t.push(i):i instanceof M&&i.addDisplayedLeafColumns(t)})}addLeafColumns(t){this.children.forEach(i=>{i instanceof Column?t.push(i):i instanceof M&&i.addLeafColumns(t)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const t=this.getParent();return!this.isPadding()||!t||!t.isPadding()?0:1+t.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let t=this;for(;t!=null&&t.isPadding();)t=t.getParent();if(!(t?t.providedColumnGroup.isExpandable():!1)){this.displayedChildren=this.children,this.localEventService.dispatchEvent(this.createAgEvent(M.EVENT_DISPLAYED_CHILDREN_CHANGED));return}this.children.forEach(s=>{if(s instanceof M&&(!s.displayedChildren||!s.displayedChildren.length))return;switch(s.getColumnGroupShow()){case"open":t.providedColumnGroup.isExpanded()&&this.displayedChildren.push(s);break;case"closed":t.providedColumnGroup.isExpanded()||this.displayedChildren.push(s);break;default:this.displayedChildren.push(s);break}}),this.localEventService.dispatchEvent(this.createAgEvent(M.EVENT_DISPLAYED_CHILDREN_CHANGED))}};_ColumnGroup.EVENT_LEFT_CHANGED="leftChanged",_ColumnGroup.EVENT_DISPLAYED_CHILDREN_CHANGED="displayedChildrenChanged",__decorateClass([Autowired("gridOptionsService")],_ColumnGroup.prototype,"gos",2);var ColumnGroup=_ColumnGroup,Events=class{};Events.EVENT_COLUMN_EVERYTHING_CHANGED="columnEverythingChanged",Events.EVENT_NEW_COLUMNS_LOADED="newColumnsLoaded",Events.EVENT_COLUMN_PIVOT_MODE_CHANGED="columnPivotModeChanged",Events.EVENT_PIVOT_MAX_COLUMNS_EXCEEDED="pivotMaxColumnsExceeded",Events.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged",Events.EVENT_EXPAND_COLLAPSE_ALL="expandOrCollapseAll",Events.EVENT_COLUMN_PIVOT_CHANGED="columnPivotChanged",Events.EVENT_GRID_COLUMNS_CHANGED="gridColumnsChanged",Events.EVENT_COLUMN_VALUE_CHANGED="columnValueChanged",Events.EVENT_COLUMN_MOVED="columnMoved",Events.EVENT_COLUMN_VISIBLE="columnVisible",Events.EVENT_COLUMN_PINNED="columnPinned",Events.EVENT_COLUMN_GROUP_OPENED="columnGroupOpened",Events.EVENT_COLUMN_RESIZED="columnResized",Events.EVENT_DISPLAYED_COLUMNS_CHANGED="displayedColumnsChanged",Events.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED="suppressMovableColumns",Events.EVENT_SUPPRESS_MENU_HIDE_CHANGED="suppressMenuHide",Events.EVENT_SUPPRESS_FIELD_DOT_NOTATION="suppressFieldDotNotation",Events.EVENT_VIRTUAL_COLUMNS_CHANGED="virtualColumnsChanged",Events.EVENT_COLUMN_HEADER_MOUSE_OVER="columnHeaderMouseOver",Events.EVENT_COLUMN_HEADER_MOUSE_LEAVE="columnHeaderMouseLeave",Events.EVENT_COLUMN_HEADER_CLICKED="columnHeaderClicked",Events.EVENT_COLUMN_HEADER_CONTEXT_MENU="columnHeaderContextMenu",Events.EVENT_ASYNC_TRANSACTIONS_FLUSHED="asyncTransactionsFlushed",Events.EVENT_ROW_GROUP_OPENED="rowGroupOpened",Events.EVENT_ROW_DATA_UPDATED="rowDataUpdated",Events.EVENT_PINNED_ROW_DATA_CHANGED="pinnedRowDataChanged",Events.EVENT_RANGE_SELECTION_CHANGED="rangeSelectionChanged",Events.EVENT_CHART_CREATED="chartCreated",Events.EVENT_CHART_RANGE_SELECTION_CHANGED="chartRangeSelectionChanged",Events.EVENT_CHART_OPTIONS_CHANGED="chartOptionsChanged",Events.EVENT_CHART_DESTROYED="chartDestroyed",Events.EVENT_TOOL_PANEL_VISIBLE_CHANGED="toolPanelVisibleChanged",Events.EVENT_TOOL_PANEL_SIZE_CHANGED="toolPanelSizeChanged",Events.EVENT_COLUMN_PANEL_ITEM_DRAG_START="columnPanelItemDragStart",Events.EVENT_COLUMN_PANEL_ITEM_DRAG_END="columnPanelItemDragEnd",Events.EVENT_MODEL_UPDATED="modelUpdated",Events.EVENT_CUT_START="cutStart",Events.EVENT_CUT_END="cutEnd",Events.EVENT_PASTE_START="pasteStart",Events.EVENT_PASTE_END="pasteEnd",Events.EVENT_FILL_START="fillStart",Events.EVENT_FILL_END="fillEnd",Events.EVENT_RANGE_DELETE_START="rangeDeleteStart",Events.EVENT_RANGE_DELETE_END="rangeDeleteEnd",Events.EVENT_UNDO_STARTED="undoStarted",Events.EVENT_UNDO_ENDED="undoEnded",Events.EVENT_REDO_STARTED="redoStarted",Events.EVENT_REDO_ENDED="redoEnded",Events.EVENT_KEY_SHORTCUT_CHANGED_CELL_START="keyShortcutChangedCellStart",Events.EVENT_KEY_SHORTCUT_CHANGED_CELL_END="keyShortcutChangedCellEnd",Events.EVENT_CELL_CLICKED="cellClicked",Events.EVENT_CELL_DOUBLE_CLICKED="cellDoubleClicked",Events.EVENT_CELL_MOUSE_DOWN="cellMouseDown",Events.EVENT_CELL_CONTEXT_MENU="cellContextMenu",Events.EVENT_CELL_VALUE_CHANGED="cellValueChanged",Events.EVENT_CELL_EDIT_REQUEST="cellEditRequest",Events.EVENT_ROW_VALUE_CHANGED="rowValueChanged",Events.EVENT_CELL_FOCUSED="cellFocused",Events.EVENT_CELL_FOCUS_CLEARED="cellFocusCleared",Events.EVENT_FULL_WIDTH_ROW_FOCUSED="fullWidthRowFocused",Events.EVENT_ROW_SELECTED="rowSelected",Events.EVENT_SELECTION_CHANGED="selectionChanged",Events.EVENT_TOOLTIP_SHOW="tooltipShow",Events.EVENT_TOOLTIP_HIDE="tooltipHide",Events.EVENT_CELL_KEY_DOWN="cellKeyDown",Events.EVENT_CELL_MOUSE_OVER="cellMouseOver",Events.EVENT_CELL_MOUSE_OUT="cellMouseOut",Events.EVENT_FILTER_CHANGED="filterChanged",Events.EVENT_FILTER_MODIFIED="filterModified",Events.EVENT_FILTER_OPENED="filterOpened",Events.EVENT_ADVANCED_FILTER_BUILDER_VISIBLE_CHANGED="advancedFilterBuilderVisibleChanged",Events.EVENT_SORT_CHANGED="sortChanged",Events.EVENT_VIRTUAL_ROW_REMOVED="virtualRowRemoved",Events.EVENT_ROW_CLICKED="rowClicked",Events.EVENT_ROW_DOUBLE_CLICKED="rowDoubleClicked",Events.EVENT_GRID_READY="gridReady",Events.EVENT_GRID_PRE_DESTROYED="gridPreDestroyed",Events.EVENT_GRID_SIZE_CHANGED="gridSizeChanged",Events.EVENT_VIEWPORT_CHANGED="viewportChanged",Events.EVENT_SCROLLBAR_WIDTH_CHANGED="scrollbarWidthChanged",Events.EVENT_FIRST_DATA_RENDERED="firstDataRendered",Events.EVENT_DRAG_STARTED="dragStarted",Events.EVENT_DRAG_STOPPED="dragStopped",Events.EVENT_CHECKBOX_CHANGED="checkboxChanged",Events.EVENT_ROW_EDITING_STARTED="rowEditingStarted",Events.EVENT_ROW_EDITING_STOPPED="rowEditingStopped",Events.EVENT_CELL_EDITING_STARTED="cellEditingStarted",Events.EVENT_CELL_EDITING_STOPPED="cellEditingStopped",Events.EVENT_BODY_SCROLL="bodyScroll",Events.EVENT_BODY_SCROLL_END="bodyScrollEnd",Events.EVENT_HEIGHT_SCALE_CHANGED="heightScaleChanged",Events.EVENT_PAGINATION_CHANGED="paginationChanged",Events.EVENT_COMPONENT_STATE_CHANGED="componentStateChanged",Events.EVENT_STORE_REFRESHED="storeRefreshed",Events.EVENT_STATE_UPDATED="stateUpdated",Events.EVENT_COLUMN_MENU_VISIBLE_CHANGED="columnMenuVisibleChanged",Events.EVENT_CONTEXT_MENU_VISIBLE_CHANGED="contextMenuVisibleChanged",Events.EVENT_BODY_HEIGHT_CHANGED="bodyHeightChanged",Events.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED="columnContainerWidthChanged",Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED="displayedColumnsWidthChanged",Events.EVENT_SCROLL_VISIBILITY_CHANGED="scrollVisibilityChanged",Events.EVENT_COLUMN_HOVER_CHANGED="columnHoverChanged",Events.EVENT_FLASH_CELLS="flashCells",Events.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED="paginationPixelOffsetChanged",Events.EVENT_DISPLAYED_ROWS_CHANGED="displayedRowsChanged",Events.EVENT_LEFT_PINNED_WIDTH_CHANGED="leftPinnedWidthChanged",Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED="rightPinnedWidthChanged",Events.EVENT_ROW_CONTAINER_HEIGHT_CHANGED="rowContainerHeightChanged",Events.EVENT_HEADER_HEIGHT_CHANGED="headerHeightChanged",Events.EVENT_COLUMN_HEADER_HEIGHT_CHANGED="columnHeaderHeightChanged",Events.EVENT_ROW_DRAG_ENTER="rowDragEnter",Events.EVENT_ROW_DRAG_MOVE="rowDragMove",Events.EVENT_ROW_DRAG_LEAVE="rowDragLeave",Events.EVENT_ROW_DRAG_END="rowDragEnd",Events.EVENT_GRID_STYLES_CHANGED="gridStylesChanged",Events.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST="columnRowGroupChangeRequest",Events.EVENT_COLUMN_PIVOT_CHANGE_REQUEST="columnPivotChangeRequest",Events.EVENT_COLUMN_VALUE_CHANGE_REQUEST="columnValueChangeRequest",Events.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST="columnAggFuncChangeRequest",Events.EVENT_STORE_UPDATED="storeUpdated",Events.EVENT_FILTER_DESTROYED="filterDestroyed",Events.EVENT_ROW_DATA_UPDATE_STARTED="rowDataUpdateStarted",Events.EVENT_ROW_COUNT_READY="rowCountReady",Events.EVENT_ADVANCED_FILTER_ENABLED_CHANGED="advancedFilterEnabledChanged",Events.EVENT_DATA_TYPES_INFERRED="dataTypesInferred",Events.EVENT_FIELD_VALUE_CHANGED="fieldValueChanged",Events.EVENT_FIELD_PICKER_VALUE_SELECTED="fieldPickerValueSelected",Events.EVENT_SIDE_BAR_UPDATED="sideBarUpdated";var ALWAYS_SYNC_GLOBAL_EVENTS=new Set([Events.EVENT_GRID_PRE_DESTROYED,Events.EVENT_FILL_START]),GroupInstanceIdCreator=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let i;return typeof t!="number"?i=0:i=t+1,this.existingIds[e]=i,i}},GROUP_AUTO_COLUMN_ID="ag-Grid-AutoColumn",AutoGroupColService=class extends BeanStub{createAutoGroupColumns(e){const t=[],i=this.gos.get("treeData");let s=this.gos.isGroupMultiAutoColumn();return i&&s&&(console.warn('AG Grid: you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data'),s=!1),s?e.forEach((o,r)=>{t.push(this.createOneAutoGroupColumn(o,r))}):t.push(this.createOneAutoGroupColumn()),t}updateAutoGroupColumns(e,t){e.forEach((i,s)=>this.updateOneAutoGroupColumn(i,s,t))}createOneAutoGroupColumn(e,t){let i;e?i=`${GROUP_AUTO_COLUMN_ID}-${e.getId()}`:i=GROUP_AUTO_COLUMN_ID;const s=this.createAutoGroupColDef(i,e,t);s.colId=i;const o=new Column(s,null,i,!0);return this.context.createBean(o),o}updateOneAutoGroupColumn(e,t,i){const s=e.getColDef(),o=typeof s.showRowGroup=="string"?s.showRowGroup:void 0,r=o!=null?this.columnModel.getPrimaryColumn(o):void 0,n=this.createAutoGroupColDef(e.getId(),r??void 0,t);e.setColDef(n,null,i),this.columnFactory.applyColumnState(e,n,i)}createAutoGroupColDef(e,t,i){let s=this.createBaseColDef(t);const o=this.gos.get("autoGroupColumnDef");mergeDeep(s,o),s=this.columnFactory.addColumnDefaultAndTypes(s,e),this.gos.get("treeData")||missing(s.field)&&missing(s.valueGetter)&&missing(s.filterValueGetter)&&s.filter!=="agGroupColumnFilter"&&(s.filter=!1),i&&i>0&&(s.headerCheckboxSelection=!1);const r=this.gos.isColumnsSortingCoupledToGroup(),n=s.valueGetter||s.field!=null;return r&&!n&&(s.sortIndex=void 0,s.initialSort=void 0),s}createBaseColDef(e){const t=this.gos.get("autoGroupColumnDef"),s={headerName:this.localeService.getLocaleTextFunc()("group","Group")};if(t&&(t.cellRenderer||t.cellRendererSelector)||(s.cellRenderer="agGroupCellRenderer"),e){const r=e.getColDef();Object.assign(s,{headerName:this.columnModel.getDisplayNameForColumn(e,"header"),headerValueGetter:r.headerValueGetter}),r.cellRenderer&&Object.assign(s,{cellRendererParams:{innerRenderer:r.cellRenderer,innerRendererParams:r.cellRendererParams}}),s.showRowGroup=e.getColId()}else s.showRowGroup=!0;return s}};__decorateClass([Autowired("columnModel")],AutoGroupColService.prototype,"columnModel",2),__decorateClass([Autowired("columnFactory")],AutoGroupColService.prototype,"columnFactory",2),AutoGroupColService=__decorateClass([Bean("autoGroupColService")],AutoGroupColService);var string_exports={};__export(string_exports,{camelCaseToHumanText:()=>camelCaseToHumanText,camelCaseToHyphenated:()=>camelCaseToHyphenated,capitalise:()=>capitalise,escapeString:()=>escapeString,utf8_encode:()=>utf8_encode});var reUnescapedHtml=/[&<>"']/g,HTML_ESCAPES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function utf8_encode(e){const t=String.fromCharCode;function i(h){const c=[];if(!h)return[];const p=h.length;let g=0,f,m;for(;g<p;)f=h.charCodeAt(g++),f>=55296&&f<=56319&&g<p?(m=h.charCodeAt(g++),(m&64512)==56320?c.push(((f&1023)<<10)+(m&1023)+65536):(c.push(f),g--)):c.push(f);return c}function s(h){if(h>=55296&&h<=57343)throw Error("Lone surrogate U+"+h.toString(16).toUpperCase()+" is not a scalar value")}function o(h,c){return t(h>>c&63|128)}function r(h){if(h>=0&&h<=31&&h!==10)return`_x${h.toString(16).toUpperCase().padStart(4,"0")}_`;if(!(h&4294967168))return t(h);let c="";return h&4294965248?h&4294901760?h&4292870144||(c=t(h>>18&7|240),c+=o(h,12),c+=o(h,6)):(s(h),c=t(h>>12&15|224),c+=o(h,6)):c=t(h>>6&31|192),c+=t(h&63|128),c}const n=i(e),l=n.length;let a=-1,d,u="";for(;++a<l;)d=n[a],u+=r(d);return u}function capitalise(e){return e[0].toUpperCase()+e.substring(1).toLowerCase()}function escapeString(e,t){if(e==null)return null;const i=e.toString().toString();return t?i:i.replace(reUnescapedHtml,s=>HTML_ESCAPES[s])}function camelCaseToHumanText(e){if(!e||e==null)return null;const t=/([a-z])([A-Z])/g,i=/([A-Z]+)([A-Z])([a-z])/g;return e.replace(t,"$1 $2").replace(i,"$1 $2$3").replace(/\./g," ").split(" ").map(o=>o.substring(0,1).toUpperCase()+(o.length>1?o.substring(1,o.length):"")).join(" ")}function camelCaseToHyphenated(e){return e.replace(/[A-Z]/g,t=>`-${t.toLocaleLowerCase()}`)}var map_exports={};__export(map_exports,{convertToMap:()=>convertToMap,keys:()=>keys,mapById:()=>mapById});function convertToMap(e){const t=new Map;return e.forEach(i=>t.set(i[0],i[1])),t}function mapById(e,t){const i=new Map;return e.forEach(s=>i.set(t(s),s)),i}function keys(e){const t=[];return e.forEach((i,s)=>t.push(s)),t}var ColumnModel=class extends BeanStub{constructor(){super(...arguments),this.primaryHeaderRowCount=0,this.secondaryHeaderRowCount=0,this.gridHeaderRowCount=0,this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.displayedColumnsAndGroupsMap={},this.viewportColumns=[],this.viewportColumnsHash="",this.headerViewportColumns=[],this.viewportColumnsCenter=[],this.headerViewportColumnsCenter=[],this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.autoHeightActiveAtLeastOnce=!1,this.rowGroupColumns=[],this.valueColumns=[],this.pivotColumns=[],this.ready=!1,this.changeEventsDispatching=!1,this.autoGroupsNeedBuilding=!1,this.forceRecreateAutoGroups=!1,this.pivotMode=!1,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}init(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation");const e=this.gos.get("pivotMode");this.isPivotSettingAllowed(e)&&(this.pivotMode=e),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],t=>this.buildAutoGroupColumns(convertSourceType(t.source))),this.addManagedPropertyListener("autoGroupColumnDef",t=>this.onAutoGroupColumnDefChanged(convertSourceType(t.source))),this.addManagedPropertyListeners(["defaultColDef","columnTypes","suppressFieldDotNotation"],t=>this.onSharedColDefChanged(convertSourceType(t.source))),this.addManagedPropertyListener("pivotMode",t=>this.setPivotMode(this.gos.get("pivotMode"),convertSourceType(t.source))),this.addManagedListener(this.eventService,Events.EVENT_FIRST_DATA_RENDERED,()=>this.onFirstDataRendered())}buildAutoGroupColumns(e){this.columnDefs&&(this.autoGroupsNeedBuilding=!0,this.forceRecreateAutoGroups=!0,this.updateGridColumns(),this.updateDisplayedColumns(e))}onAutoGroupColumnDefChanged(e){this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns,e)}onSharedColDefChanged(e){this.gridColumns&&(this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns,e),this.createColumnsFromColumnDefs(!0,e))}setColumnDefs(e,t){const i=!!this.columnDefs;this.columnDefs=e,this.createColumnsFromColumnDefs(i,t)}recreateColumnDefs(e){this.onSharedColDefChanged(e)}destroyOldColumns(e,t){const i={};if(!e)return;depthFirstOriginalTreeSearch(null,e,o=>{i[o.getInstanceId()]=o}),t&&depthFirstOriginalTreeSearch(null,t,o=>{i[o.getInstanceId()]=null});const s=Object.values(i).filter(o=>o!=null);this.destroyBeans(s)}destroyColumns(){this.destroyOldColumns(this.primaryColumnTree),this.destroyOldColumns(this.secondaryBalancedTree),this.destroyOldColumns(this.groupAutoColsBalancedTree)}createColumnsFromColumnDefs(e,t){const i=e?this.compareColumnStatesAndDispatchEvents(t):void 0;this.valueCache.expire(),this.autoGroupsNeedBuilding=!0;const s=this.primaryColumns,o=this.primaryColumnTree,r=this.columnFactory.createColumnTree(this.columnDefs,!0,o,t);this.destroyOldColumns(this.primaryColumnTree,r.columnTree),this.primaryColumnTree=r.columnTree,this.primaryHeaderRowCount=r.treeDept+1,this.primaryColumns=this.getColumnsFromTree(this.primaryColumnTree),this.primaryColumnsMap={},this.primaryColumns.forEach(a=>this.primaryColumnsMap[a.getId()]=a),this.extractRowGroupColumns(t,s),this.extractPivotColumns(t,s),this.extractValueColumns(t,s),this.ready=!0;const n=this.gridColsArePrimary===void 0;(this.gridColsArePrimary||n||this.autoGroupsNeedBuilding)&&(this.updateGridColumns(),e&&this.gridColsArePrimary&&!this.gos.get("maintainColumnOrder")&&this.orderGridColumnsLikePrimary(),this.updateDisplayedColumns(t),this.checkViewportColumns()),this.dispatchEverythingChanged(t),this.changeEventsDispatching=!0,i&&i(),this.changeEventsDispatching=!1,this.dispatchNewColumnsLoaded(t)}shouldRowModelIgnoreRefresh(){return this.changeEventsDispatching}dispatchNewColumnsLoaded(e){const t={type:Events.EVENT_NEW_COLUMNS_LOADED,source:e};this.eventService.dispatchEvent(t),e==="gridInitializing"&&this.onColumnsReady()}dispatchEverythingChanged(e){const t={type:Events.EVENT_COLUMN_EVERYTHING_CHANGED,source:e};this.eventService.dispatchEvent(t)}orderGridColumnsLikePrimary(){const e=this.primaryColumns;if(!e)return;const t=e.filter(s=>this.gridColumns.indexOf(s)>=0),i=this.gridColumns.filter(s=>t.indexOf(s)<0);this.gridColumns=[...i,...t],this.gridColumns=this.placeLockedColumns(this.gridColumns)}getAllDisplayedAutoHeightCols(){return this.displayedAutoHeightCols}setViewport(){this.gos.get("enableRtl")?(this.viewportLeft=this.bodyWidth-this.scrollPosition-this.scrollWidth,this.viewportRight=this.bodyWidth-this.scrollPosition):(this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition)}checkViewportColumns(e=!1){if(this.displayedColumnsCenter==null||!this.extractViewport())return;const i={type:Events.EVENT_VIRTUAL_COLUMNS_CHANGED,afterScroll:e};this.eventService.dispatchEvent(i)}setViewportPosition(e,t,i=!1){(e!==this.scrollWidth||t!==this.scrollPosition||this.bodyWidthDirty)&&(this.scrollWidth=e,this.scrollPosition=t,this.bodyWidthDirty=!0,this.setViewport(),this.ready&&this.checkViewportColumns(i))}isPivotMode(){return this.pivotMode}isPivotSettingAllowed(e){return e&&this.gos.get("treeData")?(warnOnce("Pivot mode not available with treeData."),!1):!0}setPivotMode(e,t){if(e===this.pivotMode||!this.isPivotSettingAllowed(this.pivotMode)||(this.pivotMode=e,!this.gridColumns))return;this.autoGroupsNeedBuilding=!0,this.updateGridColumns(),this.updateDisplayedColumns(t);const i={type:Events.EVENT_COLUMN_PIVOT_MODE_CHANGED};this.eventService.dispatchEvent(i)}getSecondaryPivotColumn(e,t){if(missing(this.secondaryColumns))return null;const i=this.getPrimaryColumn(t);let s=null;return this.secondaryColumns.forEach(o=>{const r=o.getColDef().pivotKeys,n=o.getColDef().pivotValueColumn;areEqual(r,e)&&n===i&&(s=o)}),s}setBeans(e){this.logger=e.create("columnModel")}setFirstRightAndLastLeftPinned(e){let t,i;this.gos.get("enableRtl")?(t=this.displayedColumnsLeft?this.displayedColumnsLeft[0]:null,i=this.displayedColumnsRight?last(this.displayedColumnsRight):null):(t=this.displayedColumnsLeft?last(this.displayedColumnsLeft):null,i=this.displayedColumnsRight?this.displayedColumnsRight[0]:null),this.gridColumns.forEach(s=>{s.setLastLeftPinned(s===t,e),s.setFirstRightPinned(s===i,e)})}autoSizeColumns(e){if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.autoSizeColumns(e));return}const{columns:t,skipHeader:i,skipHeaderGroups:s,stopAtGroup:o,source:r="api"}=e;this.animationFrameService.flushAllFrames();const n=[];let l=-1;const a=i??this.gos.get("skipHeaderOnAutoSize"),d=s??a;for(;l!==0;)l=0,this.actionOnGridColumns(t,u=>{if(n.indexOf(u)>=0)return!1;const h=this.autoWidthCalculator.getPreferredWidthForColumn(u,a);if(h>0){const c=this.normaliseColumnWidth(u,h);u.setActualWidth(c,r),n.push(u),l++}return!0},r);d||this.autoSizeColumnGroupsByColumns(t,r,o),this.dispatchColumnResizedEvent(n,!0,"autosizeColumns")}dispatchColumnResizedEvent(e,t,i,s=null){if(e&&e.length){const o={type:Events.EVENT_COLUMN_RESIZED,columns:e,column:e.length===1?e[0]:null,flexColumns:s,finished:t,source:i};this.eventService.dispatchEvent(o)}}dispatchColumnChangedEvent(e,t,i){const s={type:e,columns:t,column:t&&t.length==1?t[0]:null,source:i};this.eventService.dispatchEvent(s)}dispatchColumnMovedEvent(e){const{movedColumns:t,source:i,toIndex:s,finished:o}=e,r={type:Events.EVENT_COLUMN_MOVED,columns:t,column:t&&t.length===1?t[0]:null,toIndex:s,finished:o,source:i};this.eventService.dispatchEvent(r)}dispatchColumnPinnedEvent(e,t){if(!e.length)return;const i=e.length===1?e[0]:null,s=this.getCommonValue(e,r=>r.getPinned()),o={type:Events.EVENT_COLUMN_PINNED,pinned:s??null,columns:e,column:i,source:t};this.eventService.dispatchEvent(o)}dispatchColumnVisibleEvent(e,t){if(!e.length)return;const i=e.length===1?e[0]:null,s=this.getCommonValue(e,r=>r.isVisible()),o={type:Events.EVENT_COLUMN_VISIBLE,visible:s,columns:e,column:i,source:t};this.eventService.dispatchEvent(o)}autoSizeColumn(e,t,i){e&&this.autoSizeColumns({columns:[e],skipHeader:i,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,i){const s=new Set;this.getGridColumns(e).forEach(l=>{let a=l.getParent();for(;a&&a!=i;)a.isPadding()||s.add(a),a=a.getParent()});let r;const n=[];for(const l of s){for(const a of this.ctrlsService.getHeaderRowContainerCtrls())if(r=a.getHeaderCtrlForColumn(l),r)break;r&&r.resizeLeafColumnsToFit(t)}return n}autoSizeAllColumns(e,t){if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.autoSizeAllColumns(e,t));return}const i=this.getAllDisplayedColumns();this.autoSizeColumns({columns:i,skipHeader:t,source:e})}getColumnsFromTree(e){const t=[],i=s=>{for(let o=0;o<s.length;o++){const r=s[o];r instanceof Column?t.push(r):r instanceof ProvidedColumnGroup&&i(r.getChildren())}};return i(e),t}getAllDisplayedTrees(){return this.displayedTreeLeft&&this.displayedTreeRight&&this.displayedTreeCentre?this.displayedTreeLeft.concat(this.displayedTreeCentre).concat(this.displayedTreeRight):null}getPrimaryColumnTree(){return this.primaryColumnTree}getHeaderRowCount(){return this.gridHeaderRowCount}getDisplayedTreeLeft(){return this.displayedTreeLeft}getDisplayedTreeRight(){return this.displayedTreeRight}getDisplayedTreeCentre(){return this.displayedTreeCentre}isColumnDisplayed(e){return this.getAllDisplayedColumns().indexOf(e)>=0}getAllDisplayedColumns(){return this.displayedColumns}getViewportColumns(){return this.viewportColumns}getDisplayedLeftColumnsForRow(e){return this.colSpanActive?this.getDisplayedColumnsForRow(e,this.displayedColumnsLeft):this.displayedColumnsLeft}getDisplayedRightColumnsForRow(e){return this.colSpanActive?this.getDisplayedColumnsForRow(e,this.displayedColumnsRight):this.displayedColumnsRight}isColSpanActive(){return this.colSpanActive}getDisplayedColumnsForRow(e,t,i,s){const o=[];let r=null;for(let n=0;n<t.length;n++){const l=t[n],a=t.length-n,d=Math.min(l.getColSpan(e),a),u=[l];if(d>1){const c=d-1;for(let p=1;p<=c;p++)u.push(t[n+p]);n+=c}let h;i?(h=!1,u.forEach(c=>{i(c)&&(h=!0)})):h=!0,h&&(o.length===0&&r&&(s&&s(l))&&o.push(r),o.push(l)),r=l}return o}getViewportCenterColumnsForRow(e){if(!this.colSpanActive)return this.viewportColumnsCenter;const t=s=>{const o=s.getLeft();return exists(o)&&o>this.viewportLeft},i=this.isColumnVirtualisationSuppressed()?null:this.isColumnInRowViewport.bind(this);return this.getDisplayedColumnsForRow(e,this.displayedColumnsCenter,i,t)}isColumnAtEdge(e,t){const i=this.getAllDisplayedColumns();if(!i.length)return!1;const s=t==="first";let o;if(e instanceof ColumnGroup){const r=e.getDisplayedLeafColumns();if(!r.length)return!1;o=s?r[0]:last(r)}else o=e;return(s?i[0]:last(i))===o}getAriaColumnIndex(e){let t;return e instanceof ColumnGroup?t=e.getLeafColumns()[0]:t=e,this.ariaOrderColumns.indexOf(t)+1}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()?!0:this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,i=t+e.getActualWidth(),s=this.viewportLeft-200,o=this.viewportRight+200,r=t<s&&i<s,n=t>o&&i>o;return!r&&!n}getDisplayedColumnsLeftWidth(){return this.getWidthOfColsInList(this.displayedColumnsLeft)}getDisplayedColumnsRightWidth(){return this.getWidthOfColsInList(this.displayedColumnsRight)}updatePrimaryColumnList(e,t,i,s,o,r){if(!e||missingOrEmpty(e))return;let n=!1;if(e.forEach(a=>{if(!a)return;const d=this.getPrimaryColumn(a);if(d){if(i){if(t.indexOf(d)>=0)return;t.push(d)}else{if(t.indexOf(d)<0)return;removeFromArray(t,d)}s(d),n=!0}}),!n)return;this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(r);const l={type:o,columns:t,column:t.length===1?t[0]:null,source:r};this.eventService.dispatchEvent(l)}setRowGroupColumns(e,t){this.autoGroupsNeedBuilding=!0,this.setPrimaryColumnList(e,this.rowGroupColumns,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,!0,this.setRowGroupActive.bind(this),t)}setRowGroupActive(e,t,i){e!==t.isRowGroupActive()&&(t.setRowGroupActive(e,i),e&&!this.gos.get("suppressRowGroupHidesColumns")&&this.setColumnsVisible([t],!1,i),!e&&!this.gos.get("suppressMakeColumnVisibleAfterUnGroup")&&this.setColumnsVisible([t],!0,i))}addRowGroupColumns(e,t){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(e,this.rowGroupColumns,!0,this.setRowGroupActive.bind(this,!0),Events.EVENT_COLUMN_ROW_GROUP_CHANGED,t)}removeRowGroupColumns(e,t){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(e,this.rowGroupColumns,!1,this.setRowGroupActive.bind(this,!1),Events.EVENT_COLUMN_ROW_GROUP_CHANGED,t)}addPivotColumns(e,t){this.updatePrimaryColumnList(e,this.pivotColumns,!0,i=>i.setPivotActive(!0,t),Events.EVENT_COLUMN_PIVOT_CHANGED,t)}setPivotColumns(e,t){this.setPrimaryColumnList(e,this.pivotColumns,Events.EVENT_COLUMN_PIVOT_CHANGED,!0,(i,s)=>{s.setPivotActive(i,t)},t)}removePivotColumns(e,t){this.updatePrimaryColumnList(e,this.pivotColumns,!1,i=>i.setPivotActive(!1,t),Events.EVENT_COLUMN_PIVOT_CHANGED,t)}setPrimaryColumnList(e,t,i,s,o,r){if(!this.gridColumns)return;const n=new Map;t.forEach((l,a)=>n.set(l,a)),t.length=0,exists(e)&&e.forEach(l=>{const a=this.getPrimaryColumn(l);a&&t.push(a)}),t.forEach((l,a)=>{const d=n.get(l);if(d===void 0){n.set(l,0);return}s&&d!==a||n.delete(l)}),(this.primaryColumns||[]).forEach(l=>{const a=t.indexOf(l)>=0;o(a,l)}),this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(r),this.dispatchColumnChangedEvent(i,[...n.keys()],r)}setValueColumns(e,t){this.setPrimaryColumnList(e,this.valueColumns,Events.EVENT_COLUMN_VALUE_CHANGED,!1,this.setValueActive.bind(this),t)}setValueActive(e,t,i){if(e!==t.isValueActive()&&(t.setValueActive(e,i),e&&!t.getAggFunc()&&this.aggFuncService)){const s=this.aggFuncService.getDefaultAggFunc(t);t.setAggFunc(s)}}addValueColumns(e,t){this.updatePrimaryColumnList(e,this.valueColumns,!0,this.setValueActive.bind(this,!0),Events.EVENT_COLUMN_VALUE_CHANGED,t)}removeValueColumns(e,t){this.updatePrimaryColumnList(e,this.valueColumns,!1,this.setValueActive.bind(this,!1),Events.EVENT_COLUMN_VALUE_CHANGED,t)}normaliseColumnWidth(e,t){const i=e.getMinWidth();exists(i)&&t<i&&(t=i);const s=e.getMaxWidth();return exists(s)&&e.isGreaterThanMax(t)&&(t=s),t}getPrimaryOrGridColumn(e){return this.getPrimaryColumn(e)||this.getGridColumn(e)}setColumnWidths(e,t,i,s){const o=[];e.forEach(r=>{const n=this.getPrimaryOrGridColumn(r.key);if(!n)return;if(o.push({width:r.newWidth,ratios:[1],columns:[n]}),this.gos.get("colResizeDefault")==="shift"&&(t=!t),t){const a=this.getDisplayedColAfter(n);if(!a)return;const d=n.getActualWidth()-r.newWidth,u=a.getActualWidth()+d;o.push({width:u,ratios:[1],columns:[a]})}}),o.length!==0&&this.resizeColumnSets({resizeSets:o,finished:i,source:s})}checkMinAndMaxWidthsForSet(e){const{columns:t,width:i}=e;let s=0,o=0,r=!0;t.forEach(a=>{const d=a.getMinWidth();s+=d||0;const u=a.getMaxWidth();exists(u)&&u>0?o+=u:r=!1});const n=i>=s,l=!r||i<=o;return n&&l}resizeColumnSets(e){const{resizeSets:t,finished:i,source:s}=e;if(!(!t||t.every(u=>this.checkMinAndMaxWidthsForSet(u)))){if(i){const u=t&&t.length>0?t[0].columns:null;this.dispatchColumnResizedEvent(u,i,s)}return}const r=[],n=[];t.forEach(u=>{const{width:h,columns:c,ratios:p}=u,g={},f={};c.forEach(C=>n.push(C));let m=!0,v=0;for(;m;){if(v++,v>1e3){console.error("AG Grid: infinite loop in resizeColumnSets");break}m=!1;const C=[];let E=0,S=h;c.forEach((y,R)=>{if(f[y.getId()])S-=g[y.getId()];else{C.push(y);const T=p[R];E+=T}});const w=1/E;C.forEach((y,R)=>{const A=R===C.length-1;let T;A?T=S:(T=Math.round(p[R]*h*w),S-=T);const L=y.getMinWidth(),P=y.getMaxWidth();exists(L)&&T<L?(T=L,f[y.getId()]=!0,m=!0):exists(P)&&P>0&&T>P&&(T=P,f[y.getId()]=!0,m=!0),g[y.getId()]=T})}c.forEach(C=>{const E=g[C.getId()];C.getActualWidth()!==E&&(C.setActualWidth(E,s),r.push(C))})});const l=r.length>0;let a=[];l&&(a=this.refreshFlexedColumns({resizingCols:n,skipSetLeft:!0}),this.setLeftValues(s),this.updateBodyWidths(),this.checkViewportColumns());const d=n.concat(a);(l||i)&&this.dispatchColumnResizedEvent(d,i,s,a)}setColumnAggFunc(e,t,i){if(!e)return;const s=this.getPrimaryColumn(e);s&&(s.setAggFunc(t),this.dispatchColumnChangedEvent(Events.EVENT_COLUMN_VALUE_CHANGED,[s],i))}moveRowGroupColumn(e,t,i){if(this.isRowGroupEmpty())return;const s=this.rowGroupColumns[e],o=this.rowGroupColumns.slice(e,t);this.rowGroupColumns.splice(e,1),this.rowGroupColumns.splice(t,0,s);const r={type:Events.EVENT_COLUMN_ROW_GROUP_CHANGED,columns:o,column:o.length===1?o[0]:null,source:i};this.eventService.dispatchEvent(r)}moveColumns(e,t,i,s=!0){if(!this.gridColumns)return;if(this.columnAnimationService.start(),t>this.gridColumns.length-e.length){console.warn("AG Grid: tried to insert columns in invalid location, toIndex = "+t),console.warn("AG Grid: remember that you should not count the moving columns when calculating the new index");return}const o=this.getGridColumns(e);this.doesMovePassRules(o,t)&&(moveInArray(this.gridColumns,o,t),this.updateDisplayedColumns(i),this.dispatchColumnMovedEvent({movedColumns:o,source:i,toIndex:t,finished:s}),this.columnAnimationService.finish())}doesMovePassRules(e,t){const i=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(i)}doesOrderPassRules(e){return!(!this.doesMovePassMarryChildren(e)||!this.doesMovePassLockedPositions(e))}getProposedColumnOrder(e,t){const i=this.gridColumns.slice();return moveInArray(i,e,t),i}sortColumnsLikeGridColumns(e){!e||e.length<=1||e.filter(i=>this.gridColumns.indexOf(i)<0).length>0||e.sort((i,s)=>{const o=this.gridColumns.indexOf(i),r=this.gridColumns.indexOf(s);return o-r})}doesMovePassLockedPositions(e){let t=0,i=!0;const s=o=>o?o===!0||o==="left"?0:2:1;return e.forEach(o=>{const r=s(o.getColDef().lockPosition);r<t&&(i=!1),t=r}),i}doesMovePassMarryChildren(e){let t=!0;return depthFirstOriginalTreeSearch(null,this.gridBalancedTree,i=>{if(!(i instanceof ProvidedColumnGroup))return;const s=i,o=s.getColGroupDef();if(!(o&&o.marryChildren))return;const n=[];s.getLeafColumns().forEach(h=>{const c=e.indexOf(h);n.push(c)});const l=Math.max.apply(Math,n),a=Math.min.apply(Math,n),d=l-a,u=s.getLeafColumns().length-1;d>u&&(t=!1)}),t}moveColumnByIndex(e,t,i){if(!this.gridColumns)return;const s=this.gridColumns[e];this.moveColumns([s],t,i)}getColumnDefs(){if(!this.primaryColumns)return;const e=this.primaryColumns.slice();return this.gridColsArePrimary?e.sort((t,i)=>this.gridColumns.indexOf(t)-this.gridColumns.indexOf(i)):this.lastPrimaryOrder&&e.sort((t,i)=>this.lastPrimaryOrder.indexOf(t)-this.lastPrimaryOrder.indexOf(i)),this.columnDefFactory.buildColumnDefs(e,this.rowGroupColumns,this.pivotColumns)}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}updateBodyWidths(){const e=this.getWidthOfColsInList(this.displayedColumnsCenter),t=this.getWidthOfColsInList(this.displayedColumnsLeft),i=this.getWidthOfColsInList(this.displayedColumnsRight);if(this.bodyWidthDirty=this.bodyWidth!==e,this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==i){this.bodyWidth=e,this.leftWidth=t,this.rightWidth=i;const o={type:Events.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED};this.eventService.dispatchEvent(o);const r={type:Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED};this.eventService.dispatchEvent(r)}}getValueColumns(){return this.valueColumns?this.valueColumns:[]}getPivotColumns(){return this.pivotColumns?this.pivotColumns:[]}isPivotActive(){return this.pivotColumns&&this.pivotColumns.length>0&&this.pivotMode}getRowGroupColumns(){return this.rowGroupColumns?this.rowGroupColumns:[]}getDisplayedCenterColumns(){return this.displayedColumnsCenter}getDisplayedLeftColumns(){return this.displayedColumnsLeft}getDisplayedRightColumns(){return this.displayedColumnsRight}getAllPrimaryColumns(){return this.primaryColumns?this.primaryColumns:null}getSecondaryColumns(){return this.secondaryColumns?this.secondaryColumns:null}getAllColumnsForQuickFilter(){return this.columnsForQuickFilter}getAllGridColumns(){var e;return(e=this.gridColumns)!=null?e:[]}isRowGroupEmpty(){return missingOrEmpty(this.rowGroupColumns)}setColumnsVisible(e,t=!1,i){this.applyColumnState({state:e.map(s=>({colId:typeof s=="string"?s:s.getColId(),hide:!t}))},i)}setColumnsPinned(e,t,i){if(!this.gridColumns)return;if(this.gos.isDomLayout("print")){console.warn("AG Grid: Changing the column pinning status is not allowed with domLayout='print'");return}this.columnAnimationService.start();let s;t===!0||t==="left"?s="left":t==="right"?s="right":s=null,this.actionOnGridColumns(e,o=>o.getPinned()!==s?(o.setPinned(s),!0):!1,i,()=>({type:Events.EVENT_COLUMN_PINNED,pinned:s,column:null,columns:null,source:i})),this.columnAnimationService.finish()}actionOnGridColumns(e,t,i,s){if(missingOrEmpty(e))return;const o=[];if(e.forEach(r=>{if(!r)return;const n=this.getGridColumn(r);if(!n)return;t(n)!==!1&&o.push(n)}),!!o.length&&(this.updateDisplayedColumns(i),exists(s)&&s)){const r=s();r.columns=o,r.column=o.length===1?o[0]:null,this.eventService.dispatchEvent(r)}}getDisplayedColBefore(e){const t=this.getAllDisplayedColumns(),i=t.indexOf(e);return i>0?t[i-1]:null}getDisplayedColAfter(e){const t=this.getAllDisplayedColumns(),i=t.indexOf(e);return i<t.length-1?t[i+1]:null}getDisplayedGroupAtDirection(e,t){const i=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),s=e.getDisplayedLeafColumns(),o=t==="After"?last(s):s[0],r=`getDisplayedCol${t}`;for(;;){const n=this[r](o);if(!n)return null;const l=this.getColumnGroupAtLevel(n,i);if(l!==e)return l}}getColumnGroupAtLevel(e,t){let i=e.getParent(),s,o;for(;s=i.getProvidedColumnGroup().getLevel(),o=i.getPaddingLevel(),!(s+o<=t);)i=i.getParent();return i}isPinningLeft(){return this.displayedColumnsLeft.length>0}isPinningRight(){return this.displayedColumnsRight.length>0}getPrimaryAndSecondaryAndAutoColumns(){return[].concat(this.primaryColumns||[],this.groupAutoColumns||[],this.secondaryColumns||[])}createStateItemFromColumn(e){const t=e.isRowGroupActive()?this.rowGroupColumns.indexOf(e):null,i=e.isPivotActive()?this.pivotColumns.indexOf(e):null,s=e.isValueActive()?e.getAggFunc():null,o=e.getSort()!=null?e.getSort():null,r=e.getSortIndex()!=null?e.getSortIndex():null,n=e.getFlex()!=null&&e.getFlex()>0?e.getFlex():null;return{colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:o,sortIndex:r,aggFunc:s,rowGroup:e.isRowGroupActive(),rowGroupIndex:t,pivot:e.isPivotActive(),pivotIndex:i,flex:n}}getColumnState(){if(missing(this.primaryColumns)||!this.isAlive())return[];const t=this.getPrimaryAndSecondaryAndAutoColumns().map(this.createStateItemFromColumn.bind(this));return this.orderColumnStateList(t),t}orderColumnStateList(e){const t=convertToMap(this.gridColumns.map((i,s)=>[i.getColId(),s]));e.sort((i,s)=>{const o=t.has(i.colId)?t.get(i.colId):-1,r=t.has(s.colId)?t.get(s.colId):-1;return o-r})}resetColumnState(e){if(missingOrEmpty(this.primaryColumns))return;const t=this.getColumnsFromTree(this.primaryColumnTree),i=[];let s=1e3,o=1e3,r=[];this.groupAutoColumns&&(r=r.concat(this.groupAutoColumns)),t&&(r=r.concat(t)),r.forEach(n=>{const l=this.getColumnStateFromColDef(n);missing(l.rowGroupIndex)&&l.rowGroup&&(l.rowGroupIndex=s++),missing(l.pivotIndex)&&l.pivot&&(l.pivotIndex=o++),i.push(l)}),this.applyColumnState({state:i,applyOrder:!0},e)}getColumnStateFromColDef(e){const t=(g,f)=>g??f??null,i=e.getColDef(),s=t(i.sort,i.initialSort),o=t(i.sortIndex,i.initialSortIndex),r=t(i.hide,i.initialHide),n=t(i.pinned,i.initialPinned),l=t(i.width,i.initialWidth),a=t(i.flex,i.initialFlex);let d=t(i.rowGroupIndex,i.initialRowGroupIndex),u=t(i.rowGroup,i.initialRowGroup);d==null&&(u==null||u==!1)&&(d=null,u=null);let h=t(i.pivotIndex,i.initialPivotIndex),c=t(i.pivot,i.initialPivot);h==null&&(c==null||c==!1)&&(h=null,c=null);const p=t(i.aggFunc,i.initialAggFunc);return{colId:e.getColId(),sort:s,sortIndex:o,hide:r,pinned:n,width:l,flex:a,rowGroup:u,rowGroupIndex:d,pivot:c,pivotIndex:h,aggFunc:p}}applyColumnState(e,t){if(missingOrEmpty(this.primaryColumns))return!1;if(e&&e.state&&!e.state.forEach)return console.warn("AG Grid: applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;const i=(r,n,l)=>{const a=this.compareColumnStatesAndDispatchEvents(t);this.autoGroupsNeedBuilding=!0;const d=n.slice(),u={},h={},c=[],p=[];let g=0;const f=this.rowGroupColumns.slice(),m=this.pivotColumns.slice();r.forEach(S=>{const w=S.colId||"";if(w.startsWith(GROUP_AUTO_COLUMN_ID)){c.push(S),p.push(S);return}const R=l(w);R?(this.syncColumnWithStateItem(R,S,e.defaultState,u,h,!1,t),removeFromArray(d,R)):(p.push(S),g+=1)});const v=S=>this.syncColumnWithStateItem(S,null,e.defaultState,u,h,!1,t);d.forEach(v);const C=(S,w,y,R)=>{const A=S[y.getId()],T=S[R.getId()],L=A!=null,P=T!=null;if(L&&P)return A-T;if(L)return-1;if(P)return 1;const O=w.indexOf(y),I=w.indexOf(R),ie=O>=0,Ne=I>=0;return ie&&Ne?O-I:ie?-1:1};this.rowGroupColumns.sort(C.bind(this,u,f)),this.pivotColumns.sort(C.bind(this,h,m)),this.updateGridColumns();const E=this.groupAutoColumns?this.groupAutoColumns.slice():[];return c.forEach(S=>{const w=this.getAutoColumn(S.colId);removeFromArray(E,w),this.syncColumnWithStateItem(w,S,e.defaultState,null,null,!0,t)}),E.forEach(v),this.applyOrderAfterApplyState(e),this.updateDisplayedColumns(t),this.dispatchEverythingChanged(t),a(),{unmatchedAndAutoStates:p,unmatchedCount:g}};this.columnAnimationService.start();let{unmatchedAndAutoStates:s,unmatchedCount:o}=i(e.state||[],this.primaryColumns||[],r=>this.getPrimaryColumn(r));return(s.length>0||exists(e.defaultState))&&(o=i(s,this.secondaryColumns||[],r=>this.getSecondaryColumn(r)).unmatchedCount),this.columnAnimationService.finish(),o===0}applyOrderAfterApplyState(e){if(!e.applyOrder||!e.state)return;let t=[];const i={};e.state.forEach(o=>{if(!o.colId||i[o.colId])return;const r=this.gridColumnsMap[o.colId];r&&(t.push(r),i[o.colId]=!0)});let s=0;if(this.gridColumns.forEach(o=>{const r=o.getColId();if(i[r]!=null)return;r.startsWith(GROUP_AUTO_COLUMN_ID)?insertIntoArray(t,o,s++):t.push(o)}),t=this.placeLockedColumns(t),!this.doesMovePassMarryChildren(t)){console.warn("AG Grid: Applying column order broke a group where columns should be married together. Applying new order has been discarded.");return}this.gridColumns=t}compareColumnStatesAndDispatchEvents(e){const t={rowGroupColumns:this.rowGroupColumns.slice(),pivotColumns:this.pivotColumns.slice(),valueColumns:this.valueColumns.slice()},i=this.getColumnState(),s={};return i.forEach(o=>{s[o.colId]=o}),()=>{const o=this.getPrimaryAndSecondaryAndAutoColumns(),r=(f,m,v,C)=>{const E=m.map(C),S=v.map(C);if(areEqual(E,S))return;const y=new Set(m);v.forEach(T=>{y.delete(T)||y.add(T)});const R=[...y],A={type:f,columns:R,column:R.length===1?R[0]:null,source:e};this.eventService.dispatchEvent(A)},n=f=>{const m=[];return o.forEach(v=>{const C=s[v.getColId()];C&&f(C,v)&&m.push(v)}),m},l=f=>f.getColId();r(Events.EVENT_COLUMN_ROW_GROUP_CHANGED,t.rowGroupColumns,this.rowGroupColumns,l),r(Events.EVENT_COLUMN_PIVOT_CHANGED,t.pivotColumns,this.pivotColumns,l);const d=n((f,m)=>{const v=f.aggFunc!=null,C=v!=m.isValueActive(),E=v&&f.aggFunc!=m.getAggFunc();return C||E});d.length>0&&this.dispatchColumnChangedEvent(Events.EVENT_COLUMN_VALUE_CHANGED,d,e);const u=(f,m)=>f.width!=m.getActualWidth();this.dispatchColumnResizedEvent(n(u),!0,e);const h=(f,m)=>f.pinned!=m.getPinned();this.dispatchColumnPinnedEvent(n(h),e);const c=(f,m)=>f.hide==m.isVisible();this.dispatchColumnVisibleEvent(n(c),e);const g=n((f,m)=>f.sort!=m.getSort()||f.sortIndex!=m.getSortIndex());g.length>0&&this.sortController.dispatchSortChangedEvents(e,g),this.normaliseColumnMovedEventForColumnState(i,e)}}getCommonValue(e,t){if(!e||e.length==0)return;const i=t(e[0]);for(let s=1;s<e.length;s++)if(i!==t(e[s]))return;return i}normaliseColumnMovedEventForColumnState(e,t){const i=this.getColumnState(),s={};i.forEach(a=>s[a.colId]=a);const o={};e.forEach(a=>{s[a.colId]&&(o[a.colId]=!0)});const r=e.filter(a=>o[a.colId]),n=i.filter(a=>o[a.colId]),l=[];n.forEach((a,d)=>{const u=r&&r[d];if(u&&u.colId!==a.colId){const h=this.getGridColumn(u.colId);h&&l.push(h)}}),l.length&&this.dispatchColumnMovedEvent({movedColumns:l,source:t,finished:!0})}syncColumnWithStateItem(e,t,i,s,o,r,n){var l;if(!e)return;const a=(S,w)=>{const y={value1:void 0,value2:void 0};let R=!1;return t&&(t[S]!==void 0&&(y.value1=t[S],R=!0),exists(w)&&t[w]!==void 0&&(y.value2=t[w],R=!0)),!R&&i&&(i[S]!==void 0&&(y.value1=i[S]),exists(w)&&i[w]!==void 0&&(y.value2=i[w])),y},d=a("hide").value1;d!==void 0&&e.setVisible(!d,n);const u=a("pinned").value1;u!==void 0&&e.setPinned(u);const h=(l=e.getColDef().minWidth)!=null?l:this.environment.getMinColWidth(),c=a("flex").value1;if(c!==void 0&&e.setFlex(c),c==null){const S=a("width").value1;S!=null&&h!=null&&S>=h&&e.setActualWidth(S,n)}const p=a("sort").value1;p!==void 0&&(p==="desc"||p==="asc"?e.setSort(p,n):e.setSort(void 0,n));const g=a("sortIndex").value1;if(g!==void 0&&e.setSortIndex(g),r||!e.isPrimary())return;const f=a("aggFunc").value1;f!==void 0&&(typeof f=="string"?(e.setAggFunc(f),e.isValueActive()||(e.setValueActive(!0,n),this.valueColumns.push(e))):(exists(f)&&console.warn("AG Grid: stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),e.isValueActive()&&(e.setValueActive(!1,n),removeFromArray(this.valueColumns,e))));const{value1:m,value2:v}=a("rowGroup","rowGroupIndex");(m!==void 0||v!==void 0)&&(typeof v=="number"||m?(e.isRowGroupActive()||(e.setRowGroupActive(!0,n),this.rowGroupColumns.push(e)),s&&typeof v=="number"&&(s[e.getId()]=v)):e.isRowGroupActive()&&(e.setRowGroupActive(!1,n),removeFromArray(this.rowGroupColumns,e)));const{value1:C,value2:E}=a("pivot","pivotIndex");(C!==void 0||E!==void 0)&&(typeof E=="number"||C?(e.isPivotActive()||(e.setPivotActive(!0,n),this.pivotColumns.push(e)),o&&typeof E=="number"&&(o[e.getId()]=E)):e.isPivotActive()&&(e.setPivotActive(!1,n),removeFromArray(this.pivotColumns,e)))}getGridColumns(e){return this.getColumns(e,this.getGridColumn.bind(this))}getColumns(e,t){const i=[];return e&&e.forEach(s=>{const o=t(s);o&&i.push(o)}),i}getColumnWithValidation(e){if(e==null)return null;const t=this.getGridColumn(e);return t||console.warn("AG Grid: could not find column "+e),t}getPrimaryColumn(e){return this.primaryColumns?this.getColumn(e,this.primaryColumns,this.primaryColumnsMap):null}getGridColumn(e){return this.getColumn(e,this.gridColumns,this.gridColumnsMap)}lookupGridColumn(e){return this.gridColumnsMap[e]}getSecondaryColumn(e){return this.secondaryColumns?this.getColumn(e,this.secondaryColumns,this.secondaryColumnsMap):null}getColumn(e,t,i){if(!e||!i)return null;if(typeof e=="string"&&i[e])return i[e];for(let s=0;s<t.length;s++)if(this.columnsMatch(t[s],e))return t[s];return this.getAutoColumn(e)}getSourceColumnsForGroupColumn(e){const t=e.getColDef().showRowGroup;if(!t)return null;if(t===!0)return this.rowGroupColumns.slice(0);const i=this.getPrimaryColumn(t);return i?[i]:null}getAutoColumn(e){return!this.groupAutoColumns||!exists(this.groupAutoColumns)||missing(this.groupAutoColumns)?null:this.groupAutoColumns.find(t=>this.columnsMatch(t,e))||null}columnsMatch(e,t){const i=e===t,s=e.getColDef()===t,o=e.getColId()==t;return i||s||o}getDisplayNameForColumn(e,t,i=!1){if(!e)return null;const s=this.getHeaderName(e.getColDef(),e,null,null,t);return i?this.wrapHeaderNameWithAggFunc(e,s):s}getDisplayNameForProvidedColumnGroup(e,t,i){const s=t?t.getColGroupDef():null;return s?this.getHeaderName(s,null,e,t,i):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,i,s,o){const r=e.headerValueGetter;if(r){const n=this.gos.addGridCommonParams({colDef:e,column:t,columnGroup:i,providedColumnGroup:s,location:o});return typeof r=="function"?r(n):typeof r=="string"?this.expressionService.evaluate(r,n):(console.warn("AG Grid: headerValueGetter must be a function or a string"),"")}else{if(e.headerName!=null)return e.headerName;if(e.field)return camelCaseToHumanText(e.field)}return""}wrapHeaderNameWithAggFunc(e,t){if(this.gos.get("suppressAggFuncInHeader"))return t;const i=e.getColDef().pivotValueColumn,s=exists(i);let o=null,r;if(s){const n=this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&this.valueColumns.length===1,l=e.getColDef().pivotTotalColumnIds!==void 0;if(n&&!l)return t;o=i?i.getAggFunc():null,r=!0}else{const n=e.isValueActive(),l=this.pivotMode||!this.isRowGroupEmpty();n&&l?(o=e.getAggFunc(),r=!0):r=!1}if(r){const n=typeof o=="string"?o:"func";return`${this.localeService.getLocaleTextFunc()(n,n)}(${t})`}return t}getColumnGroup(e,t){if(!e)return null;if(e instanceof ColumnGroup)return e;const i=this.getAllDisplayedTrees(),s=typeof t=="number";let o=null;return depthFirstAllColumnTreeSearch(i,!1,r=>{if(r instanceof ColumnGroup){const n=r;let l;s?l=e===n.getGroupId()&&t===n.getPartId():l=e===n.getGroupId(),l&&(o=n)}}),o}isReady(){return this.ready}extractValueColumns(e,t){this.valueColumns=this.extractColumns(t,this.valueColumns,(i,s)=>i.setValueActive(s,e),()=>{},()=>{},i=>{const s=i.aggFunc;if(s===null||s==="")return null;if(s!==void 0)return!!s},i=>i.initialAggFunc!=null&&i.initialAggFunc!=""),this.valueColumns.forEach(i=>{const s=i.getColDef();s.aggFunc!=null&&s.aggFunc!=""?i.setAggFunc(s.aggFunc):i.getAggFunc()||i.setAggFunc(s.initialAggFunc)})}extractRowGroupColumns(e,t){this.rowGroupColumns=this.extractColumns(t,this.rowGroupColumns,(i,s)=>i.setRowGroupActive(s,e),i=>i.rowGroupIndex,i=>i.initialRowGroupIndex,i=>i.rowGroup,i=>i.initialRowGroup)}extractColumns(e=[],t=[],i,s,o,r,n){const l=[],a=[];(this.primaryColumns||[]).forEach(h=>{const c=e.indexOf(h)<0,p=h.getColDef(),g=attrToBoolean(r(p)),f=attrToBoolean(n(p)),m=attrToNumber(s(p)),v=attrToNumber(o(p));let C;g!==void 0?C=g:m!==void 0?m===null?C=!1:C=m>=0:c?f!==void 0?C=f:v!==void 0?C=v!=null&&v>=0:C=!1:C=t.indexOf(h)>=0,C&&((c?m!=null||v!=null:m!=null)?l.push(h):a.push(h))});const d=h=>{const c=s(h.getColDef()),p=o(h.getColDef());return c??p};l.sort((h,c)=>{const p=d(h),g=d(c);return p===g?0:p<g?-1:1});const u=[].concat(l);return t.forEach(h=>{a.indexOf(h)>=0&&u.push(h)}),a.forEach(h=>{u.indexOf(h)<0&&u.push(h)}),t.forEach(h=>{u.indexOf(h)<0&&i(h,!1)}),u.forEach(h=>{t.indexOf(h)<0&&i(h,!0)}),u}extractPivotColumns(e,t){this.pivotColumns=this.extractColumns(t,this.pivotColumns,(i,s)=>i.setPivotActive(s,e),i=>i.pivotIndex,i=>i.initialPivotIndex,i=>i.pivot,i=>i.initialPivot)}resetColumnGroupState(e){if(!this.primaryColumnTree)return;const t=[];depthFirstOriginalTreeSearch(null,this.primaryColumnTree,i=>{if(i instanceof ProvidedColumnGroup){const s=i.getColGroupDef(),o={groupId:i.getGroupId(),open:s?s.openByDefault:void 0};t.push(o)}}),this.setColumnGroupState(t,e)}getColumnGroupState(){const e=[];return depthFirstOriginalTreeSearch(null,this.gridBalancedTree,t=>{t instanceof ProvidedColumnGroup&&e.push({groupId:t.getGroupId(),open:t.isExpanded()})}),e}setColumnGroupState(e,t){if(!this.gridBalancedTree)return;this.columnAnimationService.start();const i=[];if(e.forEach(s=>{const o=s.groupId,r=s.open,n=this.getProvidedColumnGroup(o);n&&n.isExpanded()!==r&&(this.logger.log("columnGroupOpened("+n.getGroupId()+","+r+")"),n.setExpanded(r),i.push(n))}),this.updateGroupsAndDisplayedColumns(t),this.setFirstRightAndLastLeftPinned(t),i.length){const s={type:Events.EVENT_COLUMN_GROUP_OPENED,columnGroup:ProvidedColumnGroup.length===1?i[0]:void 0,columnGroups:i};this.eventService.dispatchEvent(s)}this.columnAnimationService.finish()}setColumnGroupOpened(e,t,i){let s;e instanceof ProvidedColumnGroup?s=e.getId():s=e||"",this.setColumnGroupState([{groupId:s,open:t}],i)}getProvidedColumnGroup(e){typeof e!="string"&&console.error("AG Grid: group key must be a string");let t=null;return depthFirstOriginalTreeSearch(null,this.gridBalancedTree,i=>{i instanceof ProvidedColumnGroup&&i.getId()===e&&(t=i)}),t}calculateColumnsForDisplay(){let e;return this.pivotMode&&missing(this.secondaryColumns)?e=this.gridColumns.filter(t=>{const i=this.groupAutoColumns&&includes(this.groupAutoColumns,t),s=this.valueColumns&&includes(this.valueColumns,t);return i||s}):e=this.gridColumns.filter(t=>this.groupAutoColumns&&includes(this.groupAutoColumns,t)||t.isVisible()),e}checkColSpanActiveInCols(e){let t=!1;return e.forEach(i=>{exists(i.getColDef().colSpan)&&(t=!0)}),t}calculateColumnsForGroupDisplay(){this.groupDisplayColumns=[],this.groupDisplayColumnsMap={};const e=t=>{const i=t.getColDef(),s=i.showRowGroup;i&&exists(s)&&(this.groupDisplayColumns.push(t),typeof s=="string"?this.groupDisplayColumnsMap[s]=t:s===!0&&this.getRowGroupColumns().forEach(o=>{this.groupDisplayColumnsMap[o.getId()]=t}))};this.gridColumns.forEach(e)}getGroupDisplayColumns(){return this.groupDisplayColumns}getGroupDisplayColumnForGroup(e){return this.groupDisplayColumnsMap[e]}updateDisplayedColumns(e){const t=this.calculateColumnsForDisplay();this.buildDisplayedTrees(t),this.updateGroupsAndDisplayedColumns(e),this.setFirstRightAndLastLeftPinned(e)}isSecondaryColumnsPresent(){return exists(this.secondaryColumns)}setSecondaryColumns(e,t){if(!this.gridColumns)return;const i=e;if(!(!i&&missing(this.secondaryColumns))){if(i){this.processSecondaryColumnDefinitions(e);const s=this.columnFactory.createColumnTree(e,!1,this.secondaryBalancedTree||this.previousSecondaryColumns||void 0,t);this.destroyOldColumns(this.secondaryBalancedTree,s.columnTree),this.secondaryBalancedTree=s.columnTree,this.secondaryHeaderRowCount=s.treeDept+1,this.secondaryColumns=this.getColumnsFromTree(this.secondaryBalancedTree),this.secondaryColumnsMap={},this.secondaryColumns.forEach(o=>this.secondaryColumnsMap[o.getId()]=o),this.previousSecondaryColumns=null}else this.previousSecondaryColumns=this.secondaryBalancedTree,this.secondaryBalancedTree=null,this.secondaryHeaderRowCount=-1,this.secondaryColumns=null,this.secondaryColumnsMap={};this.updateGridColumns(),this.updateDisplayedColumns(t)}}processSecondaryColumnDefinitions(e){const t=this.gos.get("processPivotResultColDef"),i=this.gos.get("processPivotResultColGroupDef");if(!t&&!i)return;const s=o=>{o.forEach(r=>{if(exists(r.children)){const l=r;i&&i(l),s(l.children)}else t&&t(r)})};e&&s(e)}updateGridColumns(){const e=this.gridBalancedTree;if(this.gridColsArePrimary?this.lastPrimaryOrder=this.gridColumns:this.lastSecondaryOrder=this.gridColumns,this.createGroupAutoColumnsIfNeeded()){const s=convertToMap(this.groupAutoColumns.map(o=>[o,!0]));this.lastPrimaryOrder&&(this.lastPrimaryOrder=this.lastPrimaryOrder.filter(o=>!s.has(o)),this.lastPrimaryOrder=[...this.groupAutoColumns,...this.lastPrimaryOrder]),this.lastSecondaryOrder&&(this.lastSecondaryOrder=this.lastSecondaryOrder.filter(o=>!s.has(o)),this.lastSecondaryOrder=[...this.groupAutoColumns,...this.lastSecondaryOrder])}let i;if(this.secondaryColumns&&this.secondaryBalancedTree){const s=this.secondaryColumns.some(o=>this.gridColumnsMap[o.getColId()]!==void 0);this.gridBalancedTree=this.secondaryBalancedTree.slice(),this.gridHeaderRowCount=this.secondaryHeaderRowCount,this.gridColumns=this.secondaryColumns.slice(),this.gridColsArePrimary=!1,s&&(i=this.lastSecondaryOrder)}else this.primaryColumns&&(this.gridBalancedTree=this.primaryColumnTree.slice(),this.gridHeaderRowCount=this.primaryHeaderRowCount,this.gridColumns=this.primaryColumns.slice(),this.gridColsArePrimary=!0,i=this.lastPrimaryOrder);if(this.addAutoGroupToGridColumns(),this.orderGridColsLike(i),this.gridColumns=this.placeLockedColumns(this.gridColumns),this.calculateColumnsForGroupDisplay(),this.refreshQuickFilterColumns(),this.clearDisplayedAndViewportColumns(),this.colSpanActive=this.checkColSpanActiveInCols(this.gridColumns),this.gridColumnsMap={},this.gridColumns.forEach(s=>this.gridColumnsMap[s.getId()]=s),this.setAutoHeightActive(),!areEqual(e,this.gridBalancedTree)){const s={type:Events.EVENT_GRID_COLUMNS_CHANGED};this.eventService.dispatchEvent(s)}}setAutoHeightActive(){this.autoHeightActive=this.gridColumns.filter(e=>e.isAutoHeight()).length>0,this.autoHeightActive&&(this.autoHeightActiveAtLeastOnce=!0,this.gos.isRowModelType("clientSide")||this.gos.isRowModelType("serverSide")||warnOnce("autoHeight columns only work with Client Side Row Model and Server Side Row Model."))}orderGridColsLike(e){if(missing(e))return;const t=convertToMap(e.map((a,d)=>[a,d]));let i=!0;if(this.gridColumns.forEach(a=>{t.has(a)&&(i=!1)}),i)return;const s=convertToMap(this.gridColumns.map(a=>[a,!0])),o=e.filter(a=>s.has(a)),r=convertToMap(o.map(a=>[a,!0])),n=this.gridColumns.filter(a=>!r.has(a)),l=o.slice();n.forEach(a=>{let d=a.getOriginalParent();if(!d){l.push(a);return}const u=[];for(;!u.length&&d;)d.getLeafColumns().forEach(g=>{const f=l.indexOf(g)>=0,m=u.indexOf(g)<0;f&&m&&u.push(g)}),d=d.getOriginalParent();if(!u.length){l.push(a);return}const h=u.map(p=>l.indexOf(p)),c=Math.max(...h);insertIntoArray(l,a,c+1)}),this.gridColumns=l}isPrimaryColumnGroupsPresent(){return this.primaryHeaderRowCount>1}refreshQuickFilterColumns(){var e;let t=(e=this.isPivotMode()&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")?this.secondaryColumns:this.primaryColumns)!=null?e:[];this.groupAutoColumns&&(t=t.concat(this.groupAutoColumns)),this.columnsForQuickFilter=this.gos.get("includeHiddenColumnsInQuickFilter")?t:t.filter(i=>i.isVisible()||i.isRowGroupActive())}placeLockedColumns(e){const t=[],i=[],s=[];return e.forEach(o=>{const r=o.getColDef().lockPosition;r==="right"?s.push(o):r==="left"||r===!0?t.push(o):i.push(o)}),[...t,...i,...s]}addAutoGroupToGridColumns(){if(missing(this.groupAutoColumns)){this.destroyOldColumns(this.groupAutoColsBalancedTree),this.groupAutoColsBalancedTree=null;return}this.gridColumns=this.groupAutoColumns?this.groupAutoColumns.concat(this.gridColumns):this.gridColumns;const e=this.columnFactory.createForAutoGroups(this.groupAutoColumns,this.gridBalancedTree);this.destroyOldColumns(this.groupAutoColsBalancedTree,e),this.groupAutoColsBalancedTree=e,this.gridBalancedTree=e.concat(this.gridBalancedTree)}clearDisplayedAndViewportColumns(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.ariaOrderColumns=[],this.viewportColumns=[],this.headerViewportColumns=[],this.viewportColumnsHash=""}updateGroupsAndDisplayedColumns(e){this.updateOpenClosedVisibilityInColumnGroups(),this.deriveDisplayedColumns(e),this.refreshFlexedColumns(),this.extractViewport(),this.updateBodyWidths();const t={type:Events.EVENT_DISPLAYED_COLUMNS_CHANGED};this.eventService.dispatchEvent(t)}deriveDisplayedColumns(e){this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeLeft,this.displayedColumnsLeft),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeCentre,this.displayedColumnsCenter),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeRight,this.displayedColumnsRight),this.joinColumnsAriaOrder(),this.joinDisplayedColumns(),this.setLeftValues(e),this.displayedAutoHeightCols=this.displayedColumns.filter(t=>t.isAutoHeight())}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}joinColumnsAriaOrder(){const e=this.getAllGridColumns(),t=[],i=[],s=[];for(const o of e){const r=o.getPinned();r?r===!0||r==="left"?t.push(o):s.push(o):i.push(o)}this.ariaOrderColumns=t.concat(i).concat(s)}joinDisplayedColumns(){this.gos.get("enableRtl")?this.displayedColumns=this.displayedColumnsRight.concat(this.displayedColumnsCenter).concat(this.displayedColumnsLeft):this.displayedColumns=this.displayedColumnsLeft.concat(this.displayedColumnsCenter).concat(this.displayedColumnsRight)}setLeftValues(e){this.setLeftValuesOfColumns(e),this.setLeftValuesOfGroups()}setLeftValuesOfColumns(e){if(!this.primaryColumns)return;const t=this.getPrimaryAndSecondaryAndAutoColumns().slice(0),i=this.gos.get("enableRtl");[this.displayedColumnsLeft,this.displayedColumnsRight,this.displayedColumnsCenter].forEach(s=>{if(i){let o=this.getWidthOfColsInList(s);s.forEach(r=>{o-=r.getActualWidth(),r.setLeft(o,e)})}else{let o=0;s.forEach(r=>{r.setLeft(o,e),o+=r.getActualWidth()})}removeAllFromUnorderedArray(t,s)}),t.forEach(s=>{s.setLeft(null,e)})}setLeftValuesOfGroups(){[this.displayedTreeLeft,this.displayedTreeRight,this.displayedTreeCentre].forEach(e=>{e.forEach(t=>{t instanceof ColumnGroup&&t.checkLeft()})})}derivedDisplayedColumnsFromDisplayedTree(e,t){t.length=0,depthFirstAllColumnTreeSearch(e,!0,i=>{i instanceof Column&&t.push(i)})}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}extractViewportColumns(){this.isColumnVirtualisationSuppressed()?(this.viewportColumnsCenter=this.displayedColumnsCenter,this.headerViewportColumnsCenter=this.displayedColumnsCenter):(this.viewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInRowViewport.bind(this)),this.headerViewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInHeaderViewport.bind(this))),this.viewportColumns=this.viewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight),this.headerViewportColumns=this.headerViewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight)}getVirtualHeaderGroupRow(e,t){let i;switch(e){case"left":i=this.viewportRowLeft[t];break;case"right":i=this.viewportRowRight[t];break;default:i=this.viewportRowCenter[t];break}return missing(i)&&(i=[]),i}calculateHeaderRows(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={};const e={};this.headerViewportColumns.forEach(i=>e[i.getId()]=!0);const t=(i,s,o)=>{let r=!1;for(let n=0;n<i.length;n++){const l=i[n];let a=!1;if(l instanceof Column)a=e[l.getId()]===!0;else{const u=l.getDisplayedChildren();u&&(a=t(u,s,o+1))}a&&(r=!0,s[o]||(s[o]=[]),s[o].push(l))}return r};t(this.displayedTreeLeft,this.viewportRowLeft,0),t(this.displayedTreeRight,this.viewportRowRight,0),t(this.displayedTreeCentre,this.viewportRowCenter,0)}extractViewport(){const e=s=>`${s.getId()}-${s.getPinned()||"normal"}`;this.extractViewportColumns();const t=this.viewportColumns.map(e).join("#"),i=this.viewportColumnsHash!==t;return i&&(this.viewportColumnsHash=t,this.calculateHeaderRows()),i}refreshFlexedColumns(e={}){var t;const i=e.source?e.source:"flex";if(e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth),!this.flexViewportWidth)return[];let s=-1;if(e.resizingCols){const c=new Set(e.resizingCols);let p=this.displayedColumnsCenter;for(let g=p.length-1;g>=0;g--)if(c.has(p[g])){s=g;break}}let o=0,r=[],n=0,l=0;for(let c=0;c<this.displayedColumnsCenter.length;c++)this.displayedColumnsCenter[c].getFlex()&&c>s?(r.push(this.displayedColumnsCenter[c]),l+=this.displayedColumnsCenter[c].getFlex(),n+=(t=this.displayedColumnsCenter[c].getMinWidth())!=null?t:0):o+=this.displayedColumnsCenter[c].getActualWidth();if(!r.length)return[];let a=[];o+n>this.flexViewportWidth&&(r.forEach(c=>{var p;return c.setActualWidth((p=c.getMinWidth())!=null?p:0,i)}),a=r,r=[]);const d=[];let u;e:for(;;){u=this.flexViewportWidth-o;const c=u/l;for(let p=0;p<r.length;p++){const g=r[p],f=c*g.getFlex();let m=0;const v=g.getMinWidth(),C=g.getMaxWidth();if(exists(v)&&f<v?m=v:exists(C)&&f>C&&(m=C),m){g.setActualWidth(m,i),removeFromUnorderedArray(r,g),l-=g.getFlex(),a.push(g),o+=g.getActualWidth();continue e}d[p]=Math.round(f)}break}let h=u;return r.forEach((c,p)=>{c.setActualWidth(Math.min(d[p],h),i),a.push(c),h-=d[p]}),e.skipSetLeft||this.setLeftValues(i),e.updateBodyWidths&&this.updateBodyWidths(),e.fireResizedEvent&&this.dispatchColumnResizedEvent(a,!0,i,r),r}sizeColumnsToFit(e,t="sizeColumnsToFit",i,s){var o,r,n,l,a;if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.sizeColumnsToFit(e,t,i,s));return}const d={};s&&((o=s?.columnLimits)==null||o.forEach(v=>{var C=v,{key:E}=C,S=__objRest(C,["key"]);d[typeof E=="string"?E:E.getColId()]=S}));const u=this.getAllDisplayedColumns(),h=e===this.getWidthOfColsInList(u);if(e<=0||!u.length||h)return;const c=[],p=[];u.forEach(v=>{v.getColDef().suppressSizeToFit===!0?p.push(v):c.push(v)});const g=c.slice(0);let f=!1;const m=v=>{removeFromArray(c,v),p.push(v)};for(c.forEach(v=>{var C,E;v.resetActualWidth(t);const S=d?.[v.getId()],w=(C=S?.minWidth)!=null?C:s?.defaultMinWidth,y=(E=S?.maxWidth)!=null?E:s?.defaultMaxWidth,R=v.getActualWidth();typeof w=="number"&&R<w?v.setActualWidth(w,t,!0):typeof y=="number"&&R>y&&v.setActualWidth(y,t,!0)});!f;){f=!0;const v=e-this.getWidthOfColsInList(p);if(v<=0)c.forEach(C=>{var E,S;const w=(S=(E=d?.[C.getId()])==null?void 0:E.minWidth)!=null?S:s?.defaultMinWidth;if(typeof w=="number"){C.setActualWidth(w,t,!0);return}C.setMinimum(t)});else{const C=v/this.getWidthOfColsInList(c);let E=v;for(let S=c.length-1;S>=0;S--){const w=c[S],y=d?.[w.getId()],R=(r=y?.minWidth)!=null?r:s?.defaultMinWidth,A=(n=y?.maxWidth)!=null?n:s?.defaultMaxWidth,T=(l=w.getMinWidth())!=null?l:0,L=(a=w.getMaxWidth())!=null?a:Number.MAX_VALUE,P=typeof R=="number"&&R>T?R:w.getMinWidth(),O=typeof A=="number"&&A<L?A:w.getMaxWidth();let I=Math.round(w.getActualWidth()*C);exists(P)&&I<P?(I=P,m(w),f=!1):exists(O)&&I>O?(I=O,m(w),f=!1):S===0&&(I=E),w.setActualWidth(I,t,!0),E-=I}}}g.forEach(v=>{v.fireColumnWidthChangedEvent(t)}),this.setLeftValues(t),this.updateBodyWidths(),!i&&this.dispatchColumnResizedEvent(g,!0,t)}buildDisplayedTrees(e){const t=[],i=[],s=[];e.forEach(r=>{switch(r.getPinned()){case"left":t.push(r);break;case"right":i.push(r);break;default:s.push(r);break}});const o=new GroupInstanceIdCreator;this.displayedTreeLeft=this.displayedGroupCreator.createDisplayedGroups(t,o,"left",this.displayedTreeLeft),this.displayedTreeRight=this.displayedGroupCreator.createDisplayedGroups(i,o,"right",this.displayedTreeRight),this.displayedTreeCentre=this.displayedGroupCreator.createDisplayedGroups(s,o,null,this.displayedTreeCentre),this.updateDisplayedMap()}updateDisplayedMap(){this.displayedColumnsAndGroupsMap={};const e=t=>{this.displayedColumnsAndGroupsMap[t.getUniqueId()]=t};depthFirstAllColumnTreeSearch(this.displayedTreeCentre,!1,e),depthFirstAllColumnTreeSearch(this.displayedTreeLeft,!1,e),depthFirstAllColumnTreeSearch(this.displayedTreeRight,!1,e)}isDisplayed(e){return this.displayedColumnsAndGroupsMap[e.getUniqueId()]===e}updateOpenClosedVisibilityInColumnGroups(){const e=this.getAllDisplayedTrees();depthFirstAllColumnTreeSearch(e,!1,t=>{t instanceof ColumnGroup&&t.calculateDisplayedColumns()})}getGroupAutoColumns(){return this.groupAutoColumns}createGroupAutoColumnsIfNeeded(){const e=this.forceRecreateAutoGroups;if(this.forceRecreateAutoGroups=!1,!this.autoGroupsNeedBuilding)return!1;this.autoGroupsNeedBuilding=!1;const t=this.gos.isGroupUseEntireRow(this.pivotMode),i=this.pivotMode?this.gos.get("pivotSuppressAutoColumn"):this.isGroupSuppressAutoColumn();if((this.rowGroupColumns.length>0||this.gos.get("treeData"))&&!i&&!t){const r=this.autoGroupColService.createAutoGroupColumns(this.rowGroupColumns);if(!this.autoColsEqual(r,this.groupAutoColumns)||e)return this.groupAutoColumns=r,!0}else this.groupAutoColumns=null;return!1}isGroupSuppressAutoColumn(){return this.gos.get("groupDisplayType")==="custom"?!0:this.gos.get("treeDataDisplayType")==="custom"}autoColsEqual(e,t){return areEqual(e,t,(i,s)=>i.getColId()===s.getColId())}getWidthOfColsInList(e){return e.reduce((t,i)=>t+i.getActualWidth(),0)}getFirstDisplayedColumn(){const e=this.gos.get("enableRtl"),t=["getDisplayedLeftColumns","getDisplayedCenterColumns","getDisplayedRightColumns"];e&&t.reverse();for(let i=0;i<t.length;i++){const s=this[t[i]]();if(s.length)return e?last(s):s[0]}return null}setColumnHeaderHeight(e,t){if(e.setAutoHeaderHeight(t)){const s={type:Events.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,column:e,columns:[e],source:"autosizeColumnHeaderHeight"};this.eventService.dispatchEvent(s)}}getColumnGroupHeaderRowHeight(){return this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight()}getColumnHeaderRowHeight(){const e=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),t=this.getAllDisplayedColumns().filter(i=>i.isAutoHeaderHeight()).map(i=>i.getAutoHeaderHeight()||0);return Math.max(e,...t)}getHeaderHeight(){var e;return(e=this.gos.get("headerHeight"))!=null?e:this.environment.getFromTheme(25,"headerHeight")}getFloatingFiltersHeight(){var e;return(e=this.gos.get("floatingFiltersHeight"))!=null?e:this.getHeaderHeight()}getGroupHeaderHeight(){var e;return(e=this.gos.get("groupHeaderHeight"))!=null?e:this.getHeaderHeight()}getPivotHeaderHeight(){var e;return(e=this.gos.get("pivotHeaderHeight"))!=null?e:this.getHeaderHeight()}getPivotGroupHeaderHeight(){var e;return(e=this.gos.get("pivotGroupHeaderHeight"))!=null?e:this.getGroupHeaderHeight()}queueResizeOperations(){this.shouldQueueResizeOperations=!0}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(e=>e()),this.resizeOperationQueue=[]}resetColumnDefIntoColumn(e,t){const i=e.getUserProvidedColDef();if(!i)return!1;const s=this.columnFactory.addColumnDefaultAndTypes(i,e.getColId());return e.setColDef(s,i,t),!0}isColumnGroupingLocked(e){const t=this.gos.get("groupLockGroupColumns");if(!e.isRowGroupActive()||t===0)return!1;if(t===-1)return!0;const i=this.rowGroupColumns.findIndex(s=>s.getColId()===e.getColId());return t>i}generateColumnStateForRowGroupAndPivotIndexes(e,t){let i={};const s=(o,r,n,l,a,d)=>{if(!r.length||!this.primaryColumns)return[];const u=Object.keys(o),h=new Set(u),c=new Set(u),p=new Set(r.map(w=>{const y=w.getColId();return c.delete(y),y}).concat(u)),g=[],f={};let m=0;for(let w=0;w<this.primaryColumns.length;w++){const y=this.primaryColumns[w].getColId();p.has(y)&&(g.push(y),f[y]=m++)}let v=1e3,C=!1,E=0;const S=w=>{const y=f[w];for(let R=E;R<y;R++){const A=g[R];c.has(A)&&(o[A][a]=v++,c.delete(A))}E=y};r.forEach(w=>{const y=w.getColId();if(h.has(y))S(y),o[y][a]=v++;else{const R=w.getColDef();(R[a]===null||R[a]===void 0&&R[d]==null)&&(C||(R[n]||R[n]===void 0&&R[l]?S(y):(c.forEach(L=>{o[L][a]=v+f[L]}),v+=g.length,C=!0)),i[y]||(i[y]={colId:y}),i[y][a]=v++)}})};return s(e,this.rowGroupColumns,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),s(t,this.pivotColumns,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(i)}onColumnsReady(){const e=this.gos.get("autoSizeStrategy");if(!e)return;const{type:t}=e;setTimeout(()=>{if(t==="fitGridWidth"){const{columnLimits:i,defaultMinWidth:s,defaultMaxWidth:o}=e,r=i?.map(({colId:n,minWidth:l,maxWidth:a})=>({key:n,minWidth:l,maxWidth:a}));this.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth:s,defaultMaxWidth:o,columnLimits:r})}else t==="fitProvidedWidth"&&this.sizeColumnsToFit(e.width,"sizeColumnsToFit")})}onFirstDataRendered(){const e=this.gos.get("autoSizeStrategy");if(e?.type!=="fitCellContents")return;const{colIds:t,skipHeader:i}=e;setTimeout(()=>{t?this.autoSizeColumns({columns:t,skipHeader:i,source:"autosizeColumns"}):this.autoSizeAllColumns("autosizeColumns",i)})}};__decorateClass([Autowired("expressionService")],ColumnModel.prototype,"expressionService",2),__decorateClass([Autowired("columnFactory")],ColumnModel.prototype,"columnFactory",2),__decorateClass([Autowired("displayedGroupCreator")],ColumnModel.prototype,"displayedGroupCreator",2),__decorateClass([Autowired("ctrlsService")],ColumnModel.prototype,"ctrlsService",2),__decorateClass([Autowired("autoWidthCalculator")],ColumnModel.prototype,"autoWidthCalculator",2),__decorateClass([Autowired("columnAnimationService")],ColumnModel.prototype,"columnAnimationService",2),__decorateClass([Autowired("autoGroupColService")],ColumnModel.prototype,"autoGroupColService",2),__decorateClass([Autowired("valueCache")],ColumnModel.prototype,"valueCache",2),__decorateClass([Autowired("animationFrameService")],ColumnModel.prototype,"animationFrameService",2),__decorateClass([Autowired("sortController")],ColumnModel.prototype,"sortController",2),__decorateClass([Autowired("columnDefFactory")],ColumnModel.prototype,"columnDefFactory",2),__decorateClass([Optional("aggFuncService")],ColumnModel.prototype,"aggFuncService",2),__decorateClass([PostConstruct],ColumnModel.prototype,"init",1),__decorateClass([PreDestroy],ColumnModel.prototype,"destroyColumns",1),__decorateClass([__decorateParam(0,Qualifier("loggerFactory"))],ColumnModel.prototype,"setBeans",1),ColumnModel=__decorateClass([Bean("columnModel")],ColumnModel);function convertSourceType(e){return e==="gridOptionsUpdated"?"gridOptionsChanged":e}function depthFirstAllColumnTreeSearch(e,t,i){if(e)for(let s=0;s<e.length;s++){const o=e[s];if(o instanceof ColumnGroup){const r=t?o.getDisplayedChildren():o.getChildren();depthFirstAllColumnTreeSearch(r,t,i)}i(o)}}var DisplayedGroupCreator=class extends BeanStub{createDisplayedGroups(e,t,i,s){const o=this.mapOldGroupsById(s),r=[];let n=e;for(;n.length;){const l=n;n=[];let a=0;const d=u=>{const h=a;a=u;const c=l[h],g=(c instanceof ColumnGroup?c.getProvidedColumnGroup():c).getOriginalParent();if(g==null){for(let m=h;m<u;m++)r.push(l[m]);return}const f=this.createColumnGroup(g,t,o,i);for(let m=h;m<u;m++)f.addChild(l[m]);n.push(f)};for(let u=1;u<l.length;u++){const h=l[u],p=(h instanceof ColumnGroup?h.getProvidedColumnGroup():h).getOriginalParent(),g=l[a],m=(g instanceof ColumnGroup?g.getProvidedColumnGroup():g).getOriginalParent();p!==m&&d(u)}a<l.length&&d(l.length)}return this.setupParentsIntoColumns(r,null),r}createColumnGroup(e,t,i,s){const o=e.getGroupId(),r=t.getInstanceIdForKey(o),n=ColumnGroup.createUniqueId(o,r);let l=i[n];return l&&l.getProvidedColumnGroup()!==e&&(l=null),exists(l)?l.reset():(l=new ColumnGroup(e,o,r,s),this.context.createBean(l)),l}mapOldGroupsById(e){const t={},i=s=>{s.forEach(o=>{if(o instanceof ColumnGroup){const r=o;t[o.getUniqueId()]=r,i(r.getChildren())}})};return e&&i(e),t}setupParentsIntoColumns(e,t){e.forEach(i=>{if(i.setParent(t),i instanceof ColumnGroup){const s=i;this.setupParentsIntoColumns(s.getChildren(),s)}})}};DisplayedGroupCreator=__decorateClass([Bean("displayedGroupCreator")],DisplayedGroupCreator);var INITIAL_GRID_OPTION_KEYS={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,excludeHiddenColumnsFromQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,enableChartToolPanelsButton:!0,suppressChartToolPanelsButton:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressParentsInRowNodes:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,suppressAggAtRootLevel:!0,removePivotHeaderRowWhenSingleValueColumn:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,functionsPassive:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0},_PropertyKeys=class{};_PropertyKeys.STRING_PROPERTIES=["rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow"],_PropertyKeys.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy"],_PropertyKeys.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"],_PropertyKeys.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"],_PropertyKeys.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressParentsInRowNodes","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressAggAtRootLevel","suppressFocusAfterRefresh","functionsPassive","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","excludeHiddenColumnsFromQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterMovesDown","enterMovesDownAfterEdit","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","enableChartToolPanelsButton","suppressChartToolPanelsButton","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideFilterAllLevels","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","maintainColumnOrder","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval"],_PropertyKeys.OTHER_PROPERTIES=["suppressStickyTotalRow"],_PropertyKeys.FUNCTIONAL_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher"],_PropertyKeys.CALLBACK_PROPERTIES=["getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering","chartMenuItems","groupTotalRow"],_PropertyKeys.FUNCTION_PROPERTIES=[..._PropertyKeys.FUNCTIONAL_PROPERTIES,..._PropertyKeys.CALLBACK_PROPERTIES],_PropertyKeys.ALL_PROPERTIES=[..._PropertyKeys.ARRAY_PROPERTIES,..._PropertyKeys.OBJECT_PROPERTIES,..._PropertyKeys.STRING_PROPERTIES,..._PropertyKeys.NUMBER_PROPERTIES,..._PropertyKeys.FUNCTION_PROPERTIES,..._PropertyKeys.BOOLEAN_PROPERTIES,..._PropertyKeys.OTHER_PROPERTIES];var PropertyKeys=_PropertyKeys,_ComponentUtil=class ${static getCallbackForEvent(t){return!t||t.length<2?t:"on"+t[0].toUpperCase()+t.substring(1)}static getGridOptionKeys(){return this.ALL_PROPERTIES_AND_CALLBACKS}static combineAttributesAndGridOptions(t,i){typeof t!="object"&&(t={});const s=__spreadValues({},t);return $.getGridOptionKeys().forEach(r=>{const n=i[r];typeof n<"u"&&n!==$.VUE_OMITTED_PROPERTY&&(s[r]=n)}),s}static processOnChange(t,i,s){if(!t)return;const o={};let r=!1;if(Object.keys(t).filter(l=>$.ALL_PROPERTIES_AND_CALLBACKS_SET.has(l)).forEach(l=>{o[l]=t[l],r=!0}),!r)return;i.__internalUpdateGridOptions(o,!0);const n={type:Events.EVENT_COMPONENT_STATE_CHANGED};iterateObject(o,(l,a)=>{n[l]=a}),i.dispatchEvent(n)}};_ComponentUtil.EVENTS=values(Events),_ComponentUtil.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY",_ComponentUtil.EXCLUDED_INTERNAL_EVENTS=[Events.EVENT_SCROLLBAR_WIDTH_CHANGED,Events.EVENT_CHECKBOX_CHANGED,Events.EVENT_HEIGHT_SCALE_CHANGED,Events.EVENT_BODY_HEIGHT_CHANGED,Events.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,Events.EVENT_SCROLL_VISIBILITY_CHANGED,Events.EVENT_COLUMN_HOVER_CHANGED,Events.EVENT_FLASH_CELLS,Events.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,Events.EVENT_DISPLAYED_ROWS_CHANGED,Events.EVENT_LEFT_PINNED_WIDTH_CHANGED,Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED,Events.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,Events.EVENT_STORE_UPDATED,Events.EVENT_COLUMN_PANEL_ITEM_DRAG_START,Events.EVENT_COLUMN_PANEL_ITEM_DRAG_END,Events.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,Events.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,Events.EVENT_FULL_WIDTH_ROW_FOCUSED,Events.EVENT_HEADER_HEIGHT_CHANGED,Events.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,Events.EVENT_CELL_FOCUS_CLEARED,Events.EVENT_GRID_STYLES_CHANGED,Events.EVENT_FILTER_DESTROYED,Events.EVENT_ROW_DATA_UPDATE_STARTED,Events.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,Events.EVENT_DATA_TYPES_INFERRED,Events.EVENT_FIELD_VALUE_CHANGED,Events.EVENT_FIELD_PICKER_VALUE_SELECTED,Events.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED,Events.EVENT_SUPPRESS_MENU_HIDE_CHANGED,Events.EVENT_SUPPRESS_FIELD_DOT_NOTATION,Events.EVENT_ROW_COUNT_READY,Events.EVENT_SIDE_BAR_UPDATED],_ComponentUtil.PUBLIC_EVENTS=_ComponentUtil.EVENTS.filter(e=>!includes(_ComponentUtil.EXCLUDED_INTERNAL_EVENTS,e)),_ComponentUtil.EVENT_CALLBACKS=_ComponentUtil.EVENTS.map(e=>_ComponentUtil.getCallbackForEvent(e)),_ComponentUtil.BOOLEAN_PROPERTIES=PropertyKeys.BOOLEAN_PROPERTIES,_ComponentUtil.ALL_PROPERTIES=PropertyKeys.ALL_PROPERTIES,_ComponentUtil.ALL_PROPERTIES_AND_CALLBACKS=[..._ComponentUtil.ALL_PROPERTIES,..._ComponentUtil.EVENT_CALLBACKS],_ComponentUtil.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(_ComponentUtil.ALL_PROPERTIES_AND_CALLBACKS);var ComponentUtil=_ComponentUtil,AgStackComponentsRegistry=class extends BeanStub{constructor(){super(...arguments),this.componentsMappedByName={}}setupComponents(e){e&&e.forEach(t=>this.addComponent(t))}addComponent(e){const i=e.componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase().toUpperCase();this.componentsMappedByName[i]=e.componentClass}getComponentClass(e){return this.componentsMappedByName[e]}};AgStackComponentsRegistry=__decorateClass([Bean("agStackComponentsRegistry")],AgStackComponentsRegistry);var aria_exports={};__export(aria_exports,{getAriaCheckboxStateName:()=>getAriaCheckboxStateName,getAriaLabel:()=>getAriaLabel,getAriaLevel:()=>getAriaLevel,getAriaPosInSet:()=>getAriaPosInSet,getAriaSortState:()=>getAriaSortState,removeAriaExpanded:()=>removeAriaExpanded,removeAriaSort:()=>removeAriaSort,setAriaActiveDescendant:()=>setAriaActiveDescendant,setAriaAtomic:()=>setAriaAtomic,setAriaChecked:()=>setAriaChecked,setAriaColCount:()=>setAriaColCount,setAriaColIndex:()=>setAriaColIndex,setAriaColSpan:()=>setAriaColSpan,setAriaControls:()=>setAriaControls,setAriaDescribedBy:()=>setAriaDescribedBy,setAriaDisabled:()=>setAriaDisabled,setAriaExpanded:()=>setAriaExpanded,setAriaHidden:()=>setAriaHidden,setAriaLabel:()=>setAriaLabel,setAriaLabelledBy:()=>setAriaLabelledBy,setAriaLevel:()=>setAriaLevel,setAriaLive:()=>setAriaLive,setAriaMultiSelectable:()=>setAriaMultiSelectable,setAriaPosInSet:()=>setAriaPosInSet,setAriaRelevant:()=>setAriaRelevant,setAriaRole:()=>setAriaRole,setAriaRowCount:()=>setAriaRowCount,setAriaRowIndex:()=>setAriaRowIndex,setAriaSelected:()=>setAriaSelected,setAriaSetSize:()=>setAriaSetSize,setAriaSort:()=>setAriaSort});function toggleAriaAttribute(e,t,i){i==null||typeof i=="string"&&i==""?removeAriaAttribute(e,t):setAriaAttribute(e,t,i)}function setAriaAttribute(e,t,i){e.setAttribute(ariaAttributeName(t),i.toString())}function removeAriaAttribute(e,t){e.removeAttribute(ariaAttributeName(t))}function ariaAttributeName(e){return`aria-${e}`}function setAriaRole(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function getAriaSortState(e){let t;return e==="asc"?t="ascending":e==="desc"?t="descending":e==="mixed"?t="other":t="none",t}function getAriaLevel(e){return parseInt(e.getAttribute("aria-level"),10)}function getAriaPosInSet(e){return parseInt(e.getAttribute("aria-posinset"),10)}function getAriaLabel(e){return e.getAttribute("aria-label")}function setAriaLabel(e,t){toggleAriaAttribute(e,"label",t)}function setAriaLabelledBy(e,t){toggleAriaAttribute(e,"labelledby",t)}function setAriaDescribedBy(e,t){toggleAriaAttribute(e,"describedby",t)}function setAriaLive(e,t){toggleAriaAttribute(e,"live",t)}function setAriaAtomic(e,t){toggleAriaAttribute(e,"atomic",t)}function setAriaRelevant(e,t){toggleAriaAttribute(e,"relevant",t)}function setAriaLevel(e,t){toggleAriaAttribute(e,"level",t)}function setAriaDisabled(e,t){toggleAriaAttribute(e,"disabled",t)}function setAriaHidden(e,t){toggleAriaAttribute(e,"hidden",t)}function setAriaActiveDescendant(e,t){toggleAriaAttribute(e,"activedescendant",t)}function setAriaExpanded(e,t){setAriaAttribute(e,"expanded",t)}function removeAriaExpanded(e){removeAriaAttribute(e,"expanded")}function setAriaSetSize(e,t){setAriaAttribute(e,"setsize",t)}function setAriaPosInSet(e,t){setAriaAttribute(e,"posinset",t)}function setAriaMultiSelectable(e,t){setAriaAttribute(e,"multiselectable",t)}function setAriaRowCount(e,t){setAriaAttribute(e,"rowcount",t)}function setAriaRowIndex(e,t){setAriaAttribute(e,"rowindex",t)}function setAriaColCount(e,t){setAriaAttribute(e,"colcount",t)}function setAriaColIndex(e,t){setAriaAttribute(e,"colindex",t)}function setAriaColSpan(e,t){setAriaAttribute(e,"colspan",t)}function setAriaSort(e,t){setAriaAttribute(e,"sort",t)}function removeAriaSort(e){removeAriaAttribute(e,"sort")}function setAriaSelected(e,t){toggleAriaAttribute(e,"selected",t)}function setAriaChecked(e,t){setAriaAttribute(e,"checked",t===void 0?"mixed":t)}function setAriaControls(e,t){toggleAriaAttribute(e,"controls",t.id),setAriaLabelledBy(t,e.id)}function getAriaCheckboxStateName(e,t){return t===void 0?e("ariaIndeterminate","indeterminate"):t===!0?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}var browser_exports={};__export(browser_exports,{browserSupportsPreventScroll:()=>browserSupportsPreventScroll,getBodyHeight:()=>getBodyHeight,getBodyWidth:()=>getBodyWidth,getMaxDivHeight:()=>getMaxDivHeight,getSafariVersion:()=>getSafariVersion,getScrollbarWidth:()=>getScrollbarWidth,getTabIndex:()=>getTabIndex,isBrowserChrome:()=>isBrowserChrome,isBrowserFirefox:()=>isBrowserFirefox,isBrowserSafari:()=>isBrowserSafari,isIOSUserAgent:()=>isIOSUserAgent,isInvisibleScrollbar:()=>isInvisibleScrollbar,isMacOsUserAgent:()=>isMacOsUserAgent});var isSafari,safariVersion,isChrome,isFirefox,isMacOs,isIOS,invisibleScrollbar,browserScrollbarWidth;function isBrowserSafari(){return isSafari===void 0&&(isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),isSafari}function getSafariVersion(){if(safariVersion===void 0)if(isBrowserSafari()){const e=navigator.userAgent.match(/version\/(\d+)/i);e&&(safariVersion=e[1]!=null?parseFloat(e[1]):0)}else safariVersion=0;return safariVersion}function isBrowserChrome(){if(isChrome===void 0){const e=window;isChrome=!!e.chrome&&(!!e.chrome.webstore||!!e.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return isChrome}function isBrowserFirefox(){return isFirefox===void 0&&(isFirefox=/(firefox)/i.test(navigator.userAgent)),isFirefox}function isMacOsUserAgent(){return isMacOs===void 0&&(isMacOs=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),isMacOs}function isIOSUserAgent(){return isIOS===void 0&&(isIOS=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),isIOS}function browserSupportsPreventScroll(){return!isBrowserSafari()||getSafariVersion()>=15}function getTabIndex(e){if(!e)return null;const t=e.tabIndex,i=e.getAttribute("tabIndex");return t===-1&&(i===null||i===""&&!isBrowserFirefox())?null:t.toString()}function getMaxDivHeight(){if(!document.body)return-1;let e=1e6;const t=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,i=document.createElement("div");for(document.body.appendChild(i);;){const s=e*2;if(i.style.height=s+"px",s>t||i.clientHeight!==s)break;e=s}return document.body.removeChild(i),e}function getBodyWidth(){var e,t,i;return(i=(e=document.body)==null?void 0:e.clientWidth)!=null?i:window.innerHeight||((t=document.documentElement)==null?void 0:t.clientWidth)||-1}function getBodyHeight(){var e,t,i;return(i=(e=document.body)==null?void 0:e.clientHeight)!=null?i:window.innerHeight||((t=document.documentElement)==null?void 0:t.clientHeight)||-1}function getScrollbarWidth(){return browserScrollbarWidth==null&&initScrollbarWidthAndVisibility(),browserScrollbarWidth}function initScrollbarWidthAndVisibility(){const e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let i=t.offsetWidth-t.clientWidth;i===0&&t.clientWidth===0&&(i=null),t.parentNode&&t.parentNode.removeChild(t),i!=null&&(browserScrollbarWidth=i,invisibleScrollbar=i===0)}function isInvisibleScrollbar(){return invisibleScrollbar==null&&initScrollbarWidthAndVisibility(),invisibleScrollbar}var date_exports={};__export(date_exports,{dateToFormattedString:()=>dateToFormattedString,parseDateTimeFromString:()=>parseDateTimeFromString,serialiseDate:()=>serialiseDate});var number_exports={};__export(number_exports,{cleanNumber:()=>cleanNumber,createArrayOfNumbers:()=>createArrayOfNumbers,decToHex:()=>decToHex,formatNumberCommas:()=>formatNumberCommas,formatNumberTwoDecimalPlacesAndCommas:()=>formatNumberTwoDecimalPlacesAndCommas,padStartWidthZeros:()=>padStartWidthZeros,sum:()=>sum});function padStartWidthZeros(e,t){return e.toString().padStart(t,"0")}function createArrayOfNumbers(e,t){const i=[];for(let s=e;s<=t;s++)i.push(s);return i}function cleanNumber(e){return typeof e=="string"&&(e=parseInt(e,10)),typeof e=="number"?Math.floor(e):null}function decToHex(e,t){let i="";for(let s=0;s<t;s++)i+=String.fromCharCode(e&255),e>>>=8;return i}function formatNumberTwoDecimalPlacesAndCommas(e,t,i){return typeof e!="number"?"":formatNumberCommas(Math.round(e*100)/100,t,i)}function formatNumberCommas(e,t,i){return typeof e!="number"?"":e.toString().replace(".",i).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${t}`)}function sum(e){return e==null?null:e.reduce((t,i)=>t+i,0)}function serialiseDate(e,t=!0,i="-"){if(!e)return null;let s=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(o=>padStartWidthZeros(o,2)).join(i);return t&&(s+=" "+[e.getHours(),e.getMinutes(),e.getSeconds()].map(o=>padStartWidthZeros(o,2)).join(":")),s}var calculateOrdinal=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function dateToFormattedString(e,t="YYYY-MM-DD"){const i=padStartWidthZeros(e.getFullYear(),4),s=["January","February","March","April","May","June","July","August","September","October","November","December"],o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],r={YYYY:()=>i.slice(i.length-4,i.length),YY:()=>i.slice(i.length-2,i.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>s[e.getMonth()],MMM:()=>s[e.getMonth()].slice(0,3),MM:()=>padStartWidthZeros(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${calculateOrdinal(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${calculateOrdinal(e.getDate())}`,DD:()=>padStartWidthZeros(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>o[e.getDay()],ddd:()=>o[e.getDay()].slice(0,3),dd:()=>o[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${calculateOrdinal(e.getDay())}`,d:()=>`${e.getDay()}`},n=new RegExp(Object.keys(r).join("|"),"g");return t.replace(n,l=>l in r?r[l]():l)}function parseDateTimeFromString(e){if(!e)return null;const[t,i]=e.split(" ");if(!t)return null;const s=t.split("-").map(h=>parseInt(h,10));if(s.filter(h=>!isNaN(h)).length!==3)return null;const[o,r,n]=s,l=new Date(o,r-1,n);if(l.getFullYear()!==o||l.getMonth()!==r-1||l.getDate()!==n)return null;if(!i||i==="00:00:00")return l;const[a,d,u]=i.split(":").map(h=>parseInt(h,10));return a>=0&&a<24&&l.setHours(a),d>=0&&d<60&&l.setMinutes(d),u>=0&&u<60&&l.setSeconds(u),l}var dom_exports={};__export(dom_exports,{FOCUSABLE_EXCLUDE:()=>FOCUSABLE_EXCLUDE,FOCUSABLE_SELECTOR:()=>FOCUSABLE_SELECTOR,addOrRemoveAttribute:()=>addOrRemoveAttribute,addStylesToElement:()=>addStylesToElement,bindCellRendererToHtmlElement:()=>bindCellRendererToHtmlElement,clearElement:()=>clearElement,copyNodeList:()=>copyNodeList,ensureDomOrder:()=>ensureDomOrder,formatSize:()=>formatSize,getAbsoluteHeight:()=>getAbsoluteHeight,getAbsoluteWidth:()=>getAbsoluteWidth,getElementRectWithOffset:()=>getElementRectWithOffset,getElementSize:()=>getElementSize,getInnerHeight:()=>getInnerHeight,getInnerWidth:()=>getInnerWidth,getScrollLeft:()=>getScrollLeft,insertWithDomOrder:()=>insertWithDomOrder,isElementChildOfClass:()=>isElementChildOfClass,isFocusableFormField:()=>isFocusableFormField,isHorizontalScrollShowing:()=>isHorizontalScrollShowing,isInDOM:()=>isInDOM,isNodeOrElement:()=>isNodeOrElement,isRtlNegativeScroll:()=>isRtlNegativeScroll,isVerticalScrollShowing:()=>isVerticalScrollShowing,isVisible:()=>isVisible,iterateNamedNodeMap:()=>iterateNamedNodeMap,loadTemplate:()=>loadTemplate,nodeListForEach:()=>nodeListForEach,radioCssClass:()=>radioCssClass,removeFromParent:()=>removeFromParent,setDisabled:()=>setDisabled,setDisplayed:()=>setDisplayed,setDomChildOrder:()=>setDomChildOrder,setElementHeight:()=>setElementHeight,setElementWidth:()=>setElementWidth,setFixedHeight:()=>setFixedHeight,setFixedWidth:()=>setFixedWidth,setScrollLeft:()=>setScrollLeft,setVisible:()=>setVisible});var rtlNegativeScroll;function radioCssClass(e,t,i){const s=e.parentElement;let o=s&&s.firstChild;for(;o;)t&&o.classList.toggle(t,o===e),i&&o.classList.toggle(i,o!==e),o=o.nextSibling}var FOCUSABLE_SELECTOR="[tabindex], input, select, button, textarea, [href]",FOCUSABLE_EXCLUDE="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function isFocusableFormField(e){const t=Element.prototype.matches||Element.prototype.msMatchesSelector,s=t.call(e,"input, select, button, textarea"),o=t.call(e,FOCUSABLE_EXCLUDE),r=isVisible(e);return s&&!o&&r}function setDisplayed(e,t,i={}){const{skipAriaHidden:s}=i;e.classList.toggle("ag-hidden",!t),s||setAriaHidden(e,!t)}function setVisible(e,t,i={}){const{skipAriaHidden:s}=i;e.classList.toggle("ag-invisible",!t),s||setAriaHidden(e,!t)}function setDisabled(e,t){const i="disabled",s=t?o=>o.setAttribute(i,""):o=>o.removeAttribute(i);s(e),nodeListForEach(e.querySelectorAll("input"),o=>s(o))}function isElementChildOfClass(e,t,i){let s=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,typeof i=="number"){if(++s>i)break}else if(e===i)break}return!1}function getElementSize(e){const{height:t,width:i,borderTopWidth:s,borderRightWidth:o,borderBottomWidth:r,borderLeftWidth:n,paddingTop:l,paddingRight:a,paddingBottom:d,paddingLeft:u,marginTop:h,marginRight:c,marginBottom:p,marginLeft:g,boxSizing:f}=window.getComputedStyle(e);return{height:parseFloat(t||"0"),width:parseFloat(i||"0"),borderTopWidth:parseFloat(s||"0"),borderRightWidth:parseFloat(o||"0"),borderBottomWidth:parseFloat(r||"0"),borderLeftWidth:parseFloat(n||"0"),paddingTop:parseFloat(l||"0"),paddingRight:parseFloat(a||"0"),paddingBottom:parseFloat(d||"0"),paddingLeft:parseFloat(u||"0"),marginTop:parseFloat(h||"0"),marginRight:parseFloat(c||"0"),marginBottom:parseFloat(p||"0"),marginLeft:parseFloat(g||"0"),boxSizing:f}}function getInnerHeight(e){const t=getElementSize(e);return t.boxSizing==="border-box"?t.height-t.paddingTop-t.paddingBottom:t.height}function getInnerWidth(e){const t=getElementSize(e);return t.boxSizing==="border-box"?t.width-t.paddingLeft-t.paddingRight:t.width}function getAbsoluteHeight(e){const t=getElementSize(e),i=t.marginBottom+t.marginTop;return Math.ceil(e.offsetHeight+i)}function getAbsoluteWidth(e){const t=getElementSize(e),i=t.marginLeft+t.marginRight;return Math.ceil(e.offsetWidth+i)}function getElementRectWithOffset(e){const t=e.getBoundingClientRect(),{borderTopWidth:i,borderLeftWidth:s,borderRightWidth:o,borderBottomWidth:r}=getElementSize(e);return{top:t.top+(i||0),left:t.left+(s||0),right:t.right+(o||0),bottom:t.bottom+(r||0)}}function isRtlNegativeScroll(){if(typeof rtlNegativeScroll=="boolean")return rtlNegativeScroll;const e=document.createElement("div");return e.style.direction="rtl",e.style.width="1px",e.style.height="1px",e.style.position="fixed",e.style.top="0px",e.style.overflow="hidden",e.dir="rtl",e.innerHTML=`<div style="width: 2px">
    11|             <span style="display: inline-block; width: 1px"></span>
    12|             <span style="display: inline-block; width: 1px"></span>
    13|         </div>`,document.body.appendChild(e),e.scrollLeft=1,rtlNegativeScroll=Math.floor(e.scrollLeft)===0,document.body.removeChild(e),rtlNegativeScroll}function getScrollLeft(e,t){let i=e.scrollLeft;return t&&(i=Math.abs(i),isBrowserChrome()&&!isRtlNegativeScroll()&&(i=e.scrollWidth-e.clientWidth-i)),i}function setScrollLeft(e,t,i){i&&(isRtlNegativeScroll()?t*=-1:(isBrowserSafari()||isBrowserChrome())&&(t=e.scrollWidth-e.clientWidth-t)),e.scrollLeft=t}function clearElement(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}function removeFromParent(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function isInDOM(e){return!!e.offsetParent}function isVisible(e){const t=e;return t.checkVisibility?t.checkVisibility({checkVisibilityCSS:!0}):!(!isInDOM(e)||window.getComputedStyle(e).visibility!=="visible")}function loadTemplate(e){const t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function ensureDomOrder(e,t,i){i&&i.nextSibling===t||(i?i.nextSibling?e.insertBefore(t,i.nextSibling):e.appendChild(t):e.firstChild&&e.firstChild!==t&&e.insertAdjacentElement("afterbegin",t))}function setDomChildOrder(e,t){for(let i=0;i<t.length;i++){const s=t[i],o=e.children[i];o!==s&&e.insertBefore(s,o)}}function insertWithDomOrder(e,t,i){i?i.insertAdjacentElement("afterend",t):e.firstChild?e.insertAdjacentElement("afterbegin",t):e.appendChild(t)}function addStylesToElement(e,t){if(t)for(const[i,s]of Object.entries(t)){if(!i||!i.length||s==null)continue;const o=camelCaseToHyphenated(i),r=s.toString(),n=r.replace(/\s*!important/g,""),l=n.length!=r.length?"important":void 0;e.style.setProperty(o,n,l)}}function isHorizontalScrollShowing(e){return e.clientWidth<e.scrollWidth}function isVerticalScrollShowing(e){return e.clientHeight<e.scrollHeight}function setElementWidth(e,t){t==="flex"?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):setFixedWidth(e,t)}function setFixedWidth(e,t){t=formatSize(t),e.style.width=t.toString(),e.style.maxWidth=t.toString(),e.style.minWidth=t.toString()}function setElementHeight(e,t){t==="flex"?(e.style.removeProperty("height"),e.style.removeProperty("minHeight"),e.style.removeProperty("maxHeight"),e.style.flex="1 1 auto"):setFixedHeight(e,t)}function setFixedHeight(e,t){t=formatSize(t),e.style.height=t.toString(),e.style.maxHeight=t.toString(),e.style.minHeight=t.toString()}function formatSize(e){return typeof e=="number"?`${e}px`:e}function isNodeOrElement(e){return e instanceof Node||e instanceof HTMLElement}function copyNodeList(e){if(e==null)return[];const t=[];return nodeListForEach(e,i=>t.push(i)),t}function iterateNamedNodeMap(e,t){if(e)for(let i=0;i<e.length;i++){const s=e[i];t(s.name,s.value)}}function addOrRemoveAttribute(e,t,i){i==null?e.removeAttribute(t):e.setAttribute(t,i.toString())}function nodeListForEach(e,t){if(e!=null)for(let i=0;i<e.length;i++)t(e[i])}function bindCellRendererToHtmlElement(e,t){e.then(i=>{const s=i.getGui();s!=null&&(typeof s=="object"?t.appendChild(s):t.innerHTML=s)})}var fuzzyMatch_exports={};__export(fuzzyMatch_exports,{fuzzyCheckStrings:()=>fuzzyCheckStrings,fuzzySuggestions:()=>fuzzySuggestions});function fuzzyCheckStrings(e,t,i){const s={},o=e.filter(r=>!t.some(n=>n===r));return o.length>0&&o.forEach(r=>s[r]=fuzzySuggestions(r,i).values),s}function fuzzySuggestions(e,t,i,s){let o=t.map((l,a)=>({value:l,relevance:stringWeightedDistances(e.toLowerCase(),l.toLocaleLowerCase()),idx:a}));if(o.sort((l,a)=>a.relevance-l.relevance),i&&(o=o.filter(l=>l.relevance!==0)),o.length>0&&s&&s>0){const a=o[0].relevance*s;o=o.filter(d=>a-d.relevance<0)}const r=[],n=[];for(const l of o)r.push(l.value),n.push(l.idx);return{values:r,indices:n}}function stringWeightedDistances(e,t){const i=e.replace(/\s/g,""),s=t.replace(/\s/g,"");let o=0,r=-1;for(let n=0;n<i.length;n++){const l=s.indexOf(i[n],r+1);l!==-1&&(r=l,o+=100-r*100/1e4*100)}return o}var icon_exports={};__export(icon_exports,{createIcon:()=>createIcon,createIconNoSpan:()=>createIconNoSpan,iconNameClassMap:()=>iconNameClassMap});var iconNameClassMap={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",menuAlt:"menu-alt",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus",chartsMenuEdit:"chart",chartsMenuAdvancedSettings:"settings",chartsMenuAdd:"plus"};function createIcon(e,t,i){const s=createIconNoSpan(e,t,i);if(s){const{className:r}=s;if(typeof r=="string"&&r.indexOf("ag-icon")>-1||typeof r=="object"&&r["ag-icon"])return s}const o=document.createElement("span");return o.appendChild(s),o}function createIconNoSpan(e,t,i,s){let o=null;const r=i&&i.getColDef().icons;if(r&&(o=r[e]),t&&!o){const n=t.get("icons");n&&(o=n[e])}if(o){let n;if(typeof o=="function")n=o();else if(typeof o=="string")n=o;else throw new Error("icon from grid options needs to be a string or a function");if(typeof n=="string")return loadTemplate(n);if(isNodeOrElement(n))return n;console.warn("AG Grid: iconRenderer should return back a string or a dom object")}else{const n=document.createElement("span");let l=iconNameClassMap[e];return l||(s?l=e:(console.warn(`AG Grid: Did not find icon ${e}`),l="")),n.setAttribute("class",`ag-icon ag-icon-${l}`),n.setAttribute("unselectable","on"),setAriaRole(n,"presentation"),n}}var keyboard_exports={};__export(keyboard_exports,{isDeleteKey:()=>isDeleteKey,isEventFromPrintableCharacter:()=>isEventFromPrintableCharacter,isUserSuppressingHeaderKeyboardEvent:()=>isUserSuppressingHeaderKeyboardEvent,isUserSuppressingKeyboardEvent:()=>isUserSuppressingKeyboardEvent,normaliseQwertyAzerty:()=>normaliseQwertyAzerty});var KeyCode=class{};KeyCode.BACKSPACE="Backspace",KeyCode.TAB="Tab",KeyCode.ENTER="Enter",KeyCode.ESCAPE="Escape",KeyCode.SPACE=" ",KeyCode.LEFT="ArrowLeft",KeyCode.UP="ArrowUp",KeyCode.RIGHT="ArrowRight",KeyCode.DOWN="ArrowDown",KeyCode.DELETE="Delete",KeyCode.F2="F2",KeyCode.PAGE_UP="PageUp",KeyCode.PAGE_DOWN="PageDown",KeyCode.PAGE_HOME="Home",KeyCode.PAGE_END="End",KeyCode.A="KeyA",KeyCode.C="KeyC",KeyCode.D="KeyD",KeyCode.V="KeyV",KeyCode.X="KeyX",KeyCode.Y="KeyY",KeyCode.Z="KeyZ";var A_KEYCODE=65,C_KEYCODE=67,V_KEYCODE=86,D_KEYCODE=68,Z_KEYCODE=90,Y_KEYCODE=89;function isEventFromPrintableCharacter(e){return e.altKey||e.ctrlKey||e.metaKey?!1:e.key.length===1}function isUserSuppressingKeyboardEvent(e,t,i,s,o){const r=s?s.getColDef().suppressKeyboardEvent:void 0;if(!r)return!1;const n=e.addGridCommonParams({event:t,editing:o,column:s,node:i,data:i.data,colDef:s.getColDef()});return!!(r&&r(n))}function isUserSuppressingHeaderKeyboardEvent(e,t,i,s){const o=s.getDefinition(),r=o&&o.suppressHeaderKeyboardEvent;if(!exists(r))return!1;const n=e.addGridCommonParams({colDef:o,column:s,headerRowIndex:i,event:t});return!!r(n)}function normaliseQwertyAzerty(e){const{keyCode:t}=e;let i;switch(t){case A_KEYCODE:i=KeyCode.A;break;case C_KEYCODE:i=KeyCode.C;break;case V_KEYCODE:i=KeyCode.V;break;case D_KEYCODE:i=KeyCode.D;break;case Z_KEYCODE:i=KeyCode.Z;break;case Y_KEYCODE:i=KeyCode.Y;break;default:i=e.code}return i}function isDeleteKey(e,t=!1){return e===KeyCode.DELETE?!0:!t&&e===KeyCode.BACKSPACE?isMacOsUserAgent():!1}var mouse_exports={};__export(mouse_exports,{areEventsNear:()=>areEventsNear});function areEventsNear(e,t,i){if(i===0)return!1;const s=Math.abs(e.clientX-t.clientX),o=Math.abs(e.clientY-t.clientY);return Math.max(s,o)<=i}var rowNode_exports={};__export(rowNode_exports,{sortRowNodesByOrder:()=>sortRowNodesByOrder});function sortRowNodesByOrder(e,t){if(!e)return!1;const i=(n,l)=>{const a=t[n.id],d=t[l.id],u=a!==void 0,h=d!==void 0,c=u&&h,p=!u&&!h;return c?a-d:p?n.__objectId-l.__objectId:u?1:-1};let s,o,r=!1;for(let n=0;n<e.length-1;n++)if(s=e[n],o=e[n+1],i(s,o)>0){r=!0;break}return r?(e.sort(i),!0):!1}var set_exports={};__export(set_exports,{convertToSet:()=>convertToSet});function convertToSet(e){const t=new Set;return e.forEach(i=>t.add(i)),t}var utils=__spreadValues(__spreadValues(__spreadValues(__spreadValues(__spreadValues(__spreadValues(__spreadValues(__spreadValues(__spreadValues(__spreadValues(__spreadValues(__spreadValues(__spreadValues(__spreadValues(__spreadValues(__spreadValues(__spreadValues(__spreadValues({},aria_exports),array_exports),browser_exports),date_exports),dom_exports),event_exports),function_exports),fuzzyMatch_exports),generic_exports),icon_exports),keyboard_exports),map_exports),mouse_exports),number_exports),object_exports),rowNode_exports),set_exports),string_exports),_=utils,NumberSequence=class{constructor(e=0,t=1){this.nextValue=e,this.step=t}next(){const e=this.nextValue;return this.nextValue+=this.step,e}peek(){return this.nextValue}skip(e){this.nextValue+=e}},AgPromiseStatus=(e=>(e[e.IN_PROGRESS=0]="IN_PROGRESS",e[e.RESOLVED=1]="RESOLVED",e))(AgPromiseStatus||{}),AgPromise=class Y{constructor(t){this.status=0,this.resolution=null,this.waiters=[],t(i=>this.onDone(i),i=>this.onReject(i))}static all(t){return new Y(i=>{let s=t.length;const o=new Array(s);t.forEach((r,n)=>{r.then(l=>{o[n]=l,s--,s===0&&i(o)})})})}static resolve(t=null){return new Y(i=>i(t))}then(t){return new Y(i=>{this.status===1?i(t(this.resolution)):this.waiters.push(s=>i(t(s)))})}resolveNow(t,i){return this.status===1?i(this.resolution):t}onDone(t){this.status=1,this.resolution=t,this.waiters.forEach(i=>i(t))}onReject(t){console.warn("TBI")}},Timer=class{constructor(){this.timestamp=new Date().getTime()}print(e){const t=new Date().getTime()-this.timestamp;console.info(`${e} = ${t}`),this.timestamp=new Date().getTime()}},CssClassManager=class{constructor(e){this.cssClassStates={},this.getGui=e}addCssClass(e){const t=(e||"").split(" ");if(t.length>1){t.forEach(s=>this.addCssClass(s));return}if(this.cssClassStates[e]!==!0&&e.length){const s=this.getGui();s&&s.classList.add(e),this.cssClassStates[e]=!0}}removeCssClass(e){const t=(e||"").split(" ");if(t.length>1){t.forEach(s=>this.removeCssClass(s));return}if(this.cssClassStates[e]!==!1&&e.length){const s=this.getGui();s&&s.classList.remove(e),this.cssClassStates[e]=!1}}containsCssClass(e){const t=this.getGui();return t?t.classList.contains(e):!1}addOrRemoveCssClass(e,t){if(!e)return;if(e.indexOf(" ")>=0){const s=(e||"").split(" ");if(s.length>1){s.forEach(o=>this.addOrRemoveCssClass(o,t));return}}if(this.cssClassStates[e]!==t&&e.length){const s=this.getGui();s&&s.classList.toggle(e,t),this.cssClassStates[e]=t}}},_TooltipStateManager=class N extends BeanStub{constructor(t,i,s,o){super(),this.parentComp=t,this.tooltipShowDelayOverride=i,this.tooltipHideDelayOverride=s,this.shouldDisplayTooltip=o,this.SHOW_QUICK_TOOLTIP_DIFF=1e3,this.FADE_OUT_TOOLTIP_TIMEOUT=1e3,this.INTERACTIVE_HIDE_DELAY=100,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const t=this.parentComp.getGui();this.tooltipTrigger===0&&(this.addManagedListener(t,"mouseenter",this.onMouseEnter.bind(this)),this.addManagedListener(t,"mouseleave",this.onMouseLeave.bind(this))),this.tooltipTrigger===1&&(this.addManagedListener(t,"focusin",this.onFocusIn.bind(this)),this.addManagedListener(t,"focusout",this.onFocusOut.bind(this))),this.addManagedListener(t,"mousemove",this.onMouseMove.bind(this)),this.interactionEnabled||(this.addManagedListener(t,"mousedown",this.onMouseDown.bind(this)),this.addManagedListener(t,"keydown",this.onKeyDown.bind(this)))}getGridOptionsTooltipDelay(t){const i=this.gos.get(t);return i<0&&warnOnce(`${t} should not be lower than 0`),Math.max(200,i)}getTooltipDelay(t){var i,s;return t==="show"?(i=this.tooltipShowDelayOverride)!=null?i:this.getGridOptionsTooltipDelay("tooltipShowDelay"):(s=this.tooltipHideDelayOverride)!=null?s:this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const t=this.gos.get("tooltipTrigger");return!t||t==="hover"?0:1}onMouseEnter(t){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!isIOSUserAgent()&&(N.isLocked?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(t)},this.INTERACTIVE_HIDE_DELAY):this.prepareToShowTooltip(t))}onMouseMove(t){this.lastMouseEvent&&(this.lastMouseEvent=t),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(t){var i;const s=t.relatedTarget,o=this.parentComp.getGui(),r=(i=this.tooltipComp)==null?void 0:i.getGui();this.isInteractingWithTooltip||o.contains(s)||this.interactionEnabled&&r?.contains(s)||this.setToDoNothing()}onKeyDown(){this.setToDoNothing()}prepareToShowTooltip(t){if(this.state!=0||N.isLocked)return;let i=0;t&&(i=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=t||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),i),this.state=1}isLastTooltipHiddenRecently(){const t=new Date().getTime(),i=N.lastTooltipHideTime;return t-i<this.SHOW_QUICK_TOOLTIP_DIFF}setToDoNothing(){this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){const t=__spreadValues({},this.parentComp.getTooltipParams());if(!exists(t.value)||this.shouldDisplayTooltip&&!this.shouldDisplayTooltip()){this.setToDoNothing();return}this.state=2,this.tooltipInstanceCount++;const i=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(t).newAgStackInstance().then(i)}hideTooltip(t){if(!t&&this.isInteractingWithTooltip)return;this.tooltipComp&&(this.destroyTooltipComp(),N.lastTooltipHideTime=new Date().getTime());const i={type:Events.EVENT_TOOLTIP_HIDE,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(i),this.state=0}newTooltipComponentCallback(t,i){if(this.state!==2||this.tooltipInstanceCount!==t){this.getContext().destroyBean(i);return}const o=i.getGui();this.tooltipComp=i,o.classList.contains("ag-tooltip")||o.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&o.classList.add("ag-tooltip-animate"),this.interactionEnabled&&o.classList.add("ag-tooltip-interactive");const r=this.localeService.getLocaleTextFunc(),n=this.popupService.addPopup({eChild:o,ariaLabel:r("ariaLabelTooltip","Tooltip")});n&&(this.tooltipPopupDestroyFunc=n.hideFunc),this.positionTooltip(),this.tooltipTrigger===1&&(this.onBodyScrollEventCallback=this.addManagedListener(this.eventService,Events.EVENT_BODY_SCROLL,this.setToDoNothing.bind(this)),this.onColumnMovedEventCallback=this.addManagedListener(this.eventService,Events.EVENT_COLUMN_MOVED,this.setToDoNothing.bind(this))),this.interactionEnabled&&(this.tooltipTrigger===0?(this.tooltipMouseEnterListener=this.addManagedListener(o,"mouseenter",this.onTooltipMouseEnter.bind(this))||null,this.tooltipMouseLeaveListener=this.addManagedListener(o,"mouseleave",this.onTooltipMouseLeave.bind(this))||null):(this.tooltipFocusInListener=this.addManagedListener(o,"focusin",this.onTooltipFocusIn.bind(this))||null,this.tooltipFocusOutListener=this.addManagedListener(o,"focusout",this.onTooltipFocusOut.bind(this))||null));const l={type:Events.EVENT_TOOLTIP_SHOW,tooltipGui:o,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(l),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isInteractingWithTooltip=!1,this.lockService()}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}onTooltipFocusOut(t){var i;const s=this.parentComp.getGui(),o=(i=this.tooltipComp)==null?void 0:i.getGui(),r=t.relatedTarget;o?.contains(r)||(this.isInteractingWithTooltip=!1,s.contains(r)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){const t={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent(__spreadProps(__spreadValues({},t),{mouseEvent:this.lastMouseEvent})):this.popupService.positionPopupByComponent(__spreadProps(__spreadValues({},t),{eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const t=this.tooltipPopupDestroyFunc,i=this.tooltipComp,s=this.tooltipTrigger===0?this.FADE_OUT_TOOLTIP_TIMEOUT:0;window.setTimeout(()=>{t(),this.getContext().destroyBean(i)},s),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(t=>{t&&t()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){N.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},this.INTERACTIVE_HIDE_DELAY)}unlockService(){N.isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};_TooltipStateManager.isLocked=!1,__decorateClass([Autowired("popupService")],_TooltipStateManager.prototype,"popupService",2),__decorateClass([Autowired("userComponentFactory")],_TooltipStateManager.prototype,"userComponentFactory",2),__decorateClass([PostConstruct],_TooltipStateManager.prototype,"postConstruct",1);var TooltipStateManager=_TooltipStateManager,TooltipFeature=class extends BeanStub{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}postConstruct(){this.refreshToolTip()}setBrowserTooltip(e){const t="title",i=this.ctrl.getGui();i&&(e!=null&&e!=""?i.setAttribute(t,e):i.removeAttribute(t))}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){var e,t,i,s;if(this.tooltipManager!=null)return;const o={getTooltipParams:()=>this.getTooltipParams(),getGui:()=>this.ctrl.getGui()};this.tooltipManager=this.createBean(new TooltipStateManager(o,(t=(e=this.ctrl).getTooltipShowDelayOverride)==null?void 0:t.call(e),(s=(i=this.ctrl).getTooltipHideDelayOverride)==null?void 0:s.call(i),this.ctrl.shouldDisplayTooltip),this.beans.context)}refreshToolTip(){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context))):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}getTooltipParams(){const e=this.ctrl,t=e.getColumn?e.getColumn():void 0,i=e.getColDef?e.getColDef():void 0,s=e.getRowNode?e.getRowNode():void 0;return{location:e.getLocation(),colDef:i,column:t,rowIndex:e.getRowIndex?e.getRowIndex():void 0,node:s,data:s?s.data:void 0,value:this.getTooltipText(),valueFormatted:e.getValueFormatted?e.getValueFormatted():void 0,hideTooltipCallback:()=>{var o;return(o=this.tooltipManager)==null?void 0:o.hideTooltip(!0)}}}getTooltipText(){return this.tooltip}destroy(){this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)),super.destroy()}};__decorateClass([Autowired("beans")],TooltipFeature.prototype,"beans",2),__decorateClass([PostConstruct],TooltipFeature.prototype,"postConstruct",1);var compIdSequence=new NumberSequence,_Component=class X extends BeanStub{constructor(t){super(),this.displayed=!0,this.visible=!0,this.compId=compIdSequence.next(),this.cssClassManager=new CssClassManager(()=>this.eGui),t&&this.setTemplate(t)}preConstructOnComponent(){this.usingBrowserTooltips=this.gos.get("enableBrowserTooltips")}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(t){const{newTooltipText:i,showDelayOverride:s,hideDelayOverride:o,location:r,shouldDisplayTooltip:n}=t||{};this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.tooltipText!==i&&(this.tooltipText=i);const l=()=>this.tooltipText;i!=null&&(this.tooltipFeature=this.createBean(new TooltipFeature({getTooltipValue:l,getGui:()=>this.getGui(),getLocation:()=>r??"UNKNOWN",getColDef:t?.getColDef,getColumn:t?.getColumn,getTooltipShowDelayOverride:s!=null?()=>s:void 0,getTooltipHideDelayOverride:o!=null?()=>o:void 0,shouldDisplayTooltip:n})))}createChildComponentsFromTags(t,i){copyNodeList(t.childNodes).forEach(o=>{if(!(o instanceof HTMLElement))return;const r=this.createComponentFromElement(o,n=>{n.getGui()&&this.copyAttributesFromNode(o,n.getGui())},i);if(r){if(r.addItems&&o.children.length){this.createChildComponentsFromTags(o,i);const n=Array.prototype.slice.call(o.children);r.addItems(n)}this.swapComponentForNode(r,t,o)}else o.childNodes&&this.createChildComponentsFromTags(o,i)})}createComponentFromElement(t,i,s){const o=t.nodeName,r=s?s[t.getAttribute("ref")]:void 0,n=this.agStackComponentsRegistry.getComponentClass(o);if(n){X.elementGettingCreated=t;const l=new n(r);return l.setParentComponent(this),this.createBean(l,null,i),l}return null}copyAttributesFromNode(t,i){iterateNamedNodeMap(t.attributes,(s,o)=>i.setAttribute(s,o))}swapComponentForNode(t,i,s){const o=t.getGui();i.replaceChild(o,s),i.insertBefore(document.createComment(s.nodeName),o),this.addDestroyFunc(this.destroyBean.bind(this,t)),this.swapInComponentForQuerySelectors(t,s)}swapInComponentForQuerySelectors(t,i){const s=this;this.iterateOverQuerySelectors(o=>{s[o.attributeName]===i&&(s[o.attributeName]=t)})}iterateOverQuerySelectors(t){let i=Object.getPrototypeOf(this);for(;i!=null;){const s=i.__agComponentMetaData,o=getFunctionName(i.constructor);s&&s[o]&&s[o].querySelectors&&s[o].querySelectors.forEach(r=>t(r)),i=Object.getPrototypeOf(i)}}activateTabIndex(t){const i=this.gos.get("tabIndex");t||(t=[]),t.length||t.push(this.getGui()),t.forEach(s=>s.setAttribute("tabindex",i.toString()))}setTemplate(t,i){const s=loadTemplate(t);this.setTemplateFromElement(s,i)}setTemplateFromElement(t,i){this.eGui=t,this.eGui.__agComponent=this,this.wireQuerySelectors(),this.getContext()&&this.createChildComponentsFromTags(this.getGui(),i)}createChildComponentsPreConstruct(){this.getGui()&&this.createChildComponentsFromTags(this.getGui())}wireQuerySelectors(){if(!this.eGui)return;const t=this;this.iterateOverQuerySelectors(i=>{const s=r=>t[i.attributeName]=r;if(i.refSelector&&this.getAttribute("ref")===i.refSelector)s(this.eGui);else{const r=this.eGui.querySelector(i.querySelector);r&&s(r.__agComponent||r)}})}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(t){this.parentComponent=t}getParentComponent(){return this.parentComponent}setGui(t){this.eGui=t}queryForHtmlElement(t){return this.eGui.querySelector(t)}queryForHtmlInputElement(t){return this.eGui.querySelector(t)}appendChild(t,i){if(t!=null)if(i||(i=this.eGui),isNodeOrElement(t))i.appendChild(t);else{const s=t;i.appendChild(s.getGui())}}isDisplayed(){return this.displayed}setVisible(t,i={}){if(t!==this.visible){this.visible=t;const{skipAriaHidden:s}=i;setVisible(this.eGui,t,{skipAriaHidden:s})}}setDisplayed(t,i={}){if(t!==this.displayed){this.displayed=t;const{skipAriaHidden:s}=i;setDisplayed(this.eGui,t,{skipAriaHidden:s});const o={type:X.EVENT_DISPLAYED_CHANGED,visible:this.displayed};this.dispatchEvent(o)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const t=this.eGui;t&&t.__agComponent&&(t.__agComponent=void 0),super.destroy()}addGuiEventListener(t,i,s){this.eGui.addEventListener(t,i,s),this.addDestroyFunc(()=>this.eGui.removeEventListener(t,i))}addCssClass(t){this.cssClassManager.addCssClass(t)}removeCssClass(t){this.cssClassManager.removeCssClass(t)}containsCssClass(t){return this.cssClassManager.containsCssClass(t)}addOrRemoveCssClass(t,i){this.cssClassManager.addOrRemoveCssClass(t,i)}getAttribute(t){const{eGui:i}=this;return i?i.getAttribute(t):null}getRefElement(t){return this.queryForHtmlElement(`[ref="${t}"]`)}};_Component.EVENT_DISPLAYED_CHANGED="displayedChanged",__decorateClass([Autowired("agStackComponentsRegistry")],_Component.prototype,"agStackComponentsRegistry",2),__decorateClass([PreConstruct],_Component.prototype,"preConstructOnComponent",1),__decorateClass([PreConstruct],_Component.prototype,"createChildComponentsPreConstruct",1);var Component=_Component;function QuerySelector(e){return querySelectorFunc.bind(this,e,void 0)}function RefSelector(e){return querySelectorFunc.bind(this,`[ref=${e}]`,e)}function querySelectorFunc(e,t,i,s,o){if(e===null){console.error("AG Grid: QuerySelector selector should not be null");return}if(typeof o=="number"){console.error("AG Grid: QuerySelector should be on an attribute");return}addToObjectProps(i,"querySelectors",{attributeName:s,querySelector:e,refSelector:t})}function addToObjectProps(e,t,i){const s=getOrCreateProps2(e,getFunctionName(e.constructor));s[t]||(s[t]=[]),s[t].push(i)}function getOrCreateProps2(e,t){return e.__agComponentMetaData||(e.__agComponentMetaData={}),e.__agComponentMetaData[t]||(e.__agComponentMetaData[t]={}),e.__agComponentMetaData[t]}var ReadOnlyFloatingFilter=class extends Component{constructor(){super(`
    14|             <div class="ag-floating-filter-input" role="presentation">
    15|                 <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>
    16|             </div>`)}destroy(){super.destroy()}init(e){this.params=e;const t=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),i=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${i("ariaFilterInput","Filter Input")}`)}onParentModelChanged(e){if(e==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(t=>{if(t.getModelAsString){const i=t.getModelAsString(e);this.eFloatingFilterText.setValue(i)}})}onParamsUpdated(e){this.refresh(e)}refresh(e){this.init(e)}};__decorateClass([RefSelector("eFloatingFilterText")],ReadOnlyFloatingFilter.prototype,"eFloatingFilterText",2),__decorateClass([Autowired("columnModel")],ReadOnlyFloatingFilter.prototype,"columnModel",2);var DateCompWrapper=class{constructor(e,t,i,s,o){this.alive=!0,this.context=e,this.eParent=s,t.getDateCompDetails(i).newAgStackInstance().then(l=>{if(!this.alive){e.destroyBean(l);return}this.dateComp=l,l&&(s.appendChild(l.getGui()),l.afterGuiAttached&&l.afterGuiAttached(),this.tempValue&&l.setDate(this.tempValue),this.disabled!=null&&this.setDateCompDisabled(this.disabled),o?.(this))})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){this.dateComp?this.dateComp.setDate(e):this.tempValue=e}setDisabled(e){this.dateComp?this.setDateCompDisabled(e):this.disabled=e}setDisplayed(e){setDisplayed(this.eParent,e)}setInputPlaceholder(e){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(e)}setInputAriaLabel(e){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(e)}afterGuiAttached(e){this.dateComp&&typeof this.dateComp.afterGuiAttached=="function"&&this.dateComp.afterGuiAttached(e)}updateParams(e){var t,i;let s=!1;(t=this.dateComp)!=null&&t.refresh&&typeof this.dateComp.refresh=="function"&&this.dateComp.refresh(e)!==null&&(s=!0),!s&&((i=this.dateComp)!=null&&i.onParamsUpdated)&&typeof this.dateComp.onParamsUpdated=="function"&&this.dateComp.onParamsUpdated(e)!==null&&warnOnce("Custom date component method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}setDateCompDisabled(e){this.dateComp!=null&&this.dateComp.setDisabled!=null&&this.dateComp.setDisabled(e)}},OptionsFactory=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions||t,this.mapCustomOptions(),this.selectDefaultItem(e)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){this.filterOptions&&this.filterOptions.forEach(e=>{if(typeof e=="string")return;const t=[["displayKey"],["displayName"],["predicate","test"]],i=s=>s.some(o=>e[o]!=null)?!0:(console.warn(`AG Grid: ignoring FilterOptionDef as it doesn't contain one of '${s}'`),!1);if(!t.every(i)){this.filterOptions=this.filterOptions.filter(s=>s===e)||[];return}this.customFilterOptions[e.displayKey]=e})}selectDefaultItem(e){if(e.defaultOption)this.defaultOption=e.defaultOption;else if(this.filterOptions.length>=1){const t=this.filterOptions[0];typeof t=="string"?this.defaultOption=t:t.displayKey?this.defaultOption=t.displayKey:console.warn("AG Grid: invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else console.warn("AG Grid: no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(e){return this.customFilterOptions[e]}},FILTER_LOCALE_TEXT={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"},_ManagedFocusFeature=class re extends BeanStub{constructor(t,i={}){super(),this.eFocusableElement=t,this.callbacks=i,this.callbacks=__spreadValues({shouldStopEventPropagation:()=>!1,onTabKeyDown:s=>{if(s.defaultPrevented)return;const o=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,s.shiftKey);o&&(o.focus(),s.preventDefault())}},i)}postConstruct(){this.eFocusableElement.classList.add(re.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedListener(this.eFocusableElement,"focusin",this.callbacks.onFocusIn),this.callbacks.onFocusOut&&this.addManagedListener(this.eFocusableElement,"focusout",this.callbacks.onFocusOut)}addKeyDownListeners(t){this.addManagedListener(t,"keydown",i=>{if(!(i.defaultPrevented||isStopPropagationForAgGrid(i))){if(this.callbacks.shouldStopEventPropagation(i)){stopPropagationForAgGrid(i);return}i.key===KeyCode.TAB?this.callbacks.onTabKeyDown(i):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(i)}})}};_ManagedFocusFeature.FOCUS_MANAGED_CLASS="ag-focus-managed",__decorateClass([Autowired("focusService")],_ManagedFocusFeature.prototype,"focusService",2),__decorateClass([PostConstruct],_ManagedFocusFeature.prototype,"postConstruct",1);var ManagedFocusFeature=_ManagedFocusFeature,RESIZE_CONTAINER_STYLE="ag-resizer-wrapper",RESIZE_TEMPLATE=`<div class="${RESIZE_CONTAINER_STYLE}">
    17|         <div ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>
    18|         <div ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>
    19|         <div ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>
    20|         <div ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>
    21|         <div ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>


# ====================================================================
# FILE: community-modules/core/dist/types/src/utils/object.d.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-11 ---
     1| export declare const SKIP_JS_BUILTINS: Set<string>;
     2| export declare function iterateObject<T>(object: {
     3|     [p: string]: T;
     4| } | T[] | null | undefined, callback: (key: string, value: T) => void): void;
     5| export declare function cloneObject<T extends {}>(object: T): T;
     6| export declare function deepCloneDefinition<T>(object: T, keysToSkip?: string[]): T | undefined;
     7| export declare function getAllValuesInObject<T extends Object, K extends keyof T, O extends T[K]>(obj: T): O[];
     8| export declare function mergeDeep(dest: any, source: any, copyUndefined?: boolean, makeCopyOfSimpleObjects?: boolean): void;
     9| export declare function getValueUsingField(data: any, field: string, fieldContainsDots: boolean): any;
    10| export declare function removeAllReferences<T>(obj: any, preserveKeys: (keyof T)[] | undefined, preDestroyLink: string): void;
    11| export declare function isNonNullObject(value: any): boolean;


# ====================================================================
# FILE: community-modules/core/dist/types/src/utils/utils.d.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 2-42 ---
     2| export declare const _: {
     3|     utf8_encode(s: string | null): string;
     4|     capitalise(str: string): string;
     5|     escapeString(toEscape?: string | null | undefined, skipEscapingHtmlChars?: boolean | undefined): string | null;
     6|     camelCaseToHumanText(camelCase: string | undefined): string | null;
     7|     camelCaseToHyphenated(camelCase: string): string;
     8|     convertToSet<T>(list: T[]): Set<T>;
     9|     sortRowNodesByOrder(rowNodes: import("../main").RowNode<any>[], rowNodeOrder: {
    10|         [id: string]: number;
    11|     }): boolean;
    12|     iterateObject<T_1>(object: {
    13|         [p: string]: T_1;
    14|     } | T_1[] | null | undefined, callback: (key: string, value: T_1) => void): void;
    15|     cloneObject<T_2 extends {}>(object: T_2): T_2;
    16|     deepCloneDefinition<T_3>(object: T_3, keysToSkip?: string[] | undefined): T_3 | undefined;
    17|     getAllValuesInObject<T_4 extends Object, K extends keyof T_4, O extends T_4[K]>(obj: T_4): O[];
    18|     mergeDeep(dest: any, source: any, copyUndefined?: boolean, makeCopyOfSimpleObjects?: boolean): void;
    19|     getValueUsingField(data: any, field: string, fieldContainsDots: boolean): any;
    20|     removeAllReferences<T_5>(obj: any, preserveKeys: (keyof T_5)[] | undefined, preDestroyLink: string): void;
    21|     isNonNullObject(value: any): boolean;
    22|     SKIP_JS_BUILTINS: Set<string>;
    23|     padStartWidthZeros(value: number, totalStringSize: number): string;
    24|     createArrayOfNumbers(first: number, last: number): number[];
    25|     cleanNumber(value: any): number | null;
    26|     decToHex(number: number, bytes: number): string;
    27|     formatNumberTwoDecimalPlacesAndCommas(value: number, thousandSeparator: string, decimalSeparator: string): string;
    28|     formatNumberCommas(value: number, thousandSeparator: string, decimalSeparator: string): string;
    29|     sum(values: number[] | null): number | null;
    30|     areEventsNear(e1: MouseEvent | Touch, e2: MouseEvent | Touch, pixelCount: number): boolean;
    31|     convertToMap<K_1, V>(arr: [K_1, V][]): Map<K_1, V>;
    32|     mapById<V_1>(arr: V_1[], callback: (obj: V_1) => string): Map<string, V_1>;
    33|     keys<T_6>(map: Map<T_6, any>): T_6[];
    34|     isEventFromPrintableCharacter(event: KeyboardEvent): boolean;
    35|     isUserSuppressingKeyboardEvent(gos: import("../gridOptionsService").GridOptionsService, keyboardEvent: KeyboardEvent, rowNode: import("../main").IRowNode<any>, column: import("../main").Column<any>, editing: boolean): boolean;
    36|     isUserSuppressingHeaderKeyboardEvent(gos: import("../gridOptionsService").GridOptionsService, keyboardEvent: KeyboardEvent, headerRowIndex: number, column: import("../main").Column<any> | import("../main").ColumnGroup): boolean;
    37|     normaliseQwertyAzerty(keyboardEvent: KeyboardEvent): string;
    38|     isDeleteKey(key: string, alwaysReturnFalseOnBackspace?: boolean): boolean;
    39|     createIcon(iconName: string, gos: import("../gridOptionsService").GridOptionsService, column: import("../main").Column<any> | null): Element;
    40|     createIconNoSpan(iconName: string, gos: import("../gridOptionsService").GridOptionsService, column?: import("../main").Column<any> | null | undefined, forceCreate?: boolean | undefined): Element | undefined;
    41|     iconNameClassMap: {
    42|         [key: string]: string;


# ====================================================================
# FILE: community-modules/core/src/utils/object.ts
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-90 ---
     1| import { exists } from './generic';
     2| export const SKIP_JS_BUILTINS = new Set<string>(['__proto__', 'constructor', 'prototype']);
     3| export function iterateObject<T>(
     4|     object: { [p: string]: T } | T[] | null | undefined,
     5|     callback: (key: string, value: T) => void
     6| ) {
     7|     if (object == null) {
     8|         return;
     9|     }
    10|     if (Array.isArray(object)) {
    11|         for (let i = 0; i < object.length; i++) {
    12|             callback(i.toString(), object[i]);
    13|         }
    14|         return;
    15|     }
    16|     for (const [key, value] of Object.entries<T>(object)) {
    17|         callback(key, value);
    18|     }
    19| }
    20| export function cloneObject<T extends {}>(object: T): T {
    21|     const copy = {} as T;
    22|     const keys = Object.keys(object);
    23|     for (let i = 0; i < keys.length; i++) {
    24|         if (SKIP_JS_BUILTINS.has(keys[i])) {
    25|             continue;
    26|         }
    27|         const key = keys[i];
    28|         const value = (object as any)[key];
    29|         (copy as any)[key] = value;
    30|     }
    31|     return copy;
    32| }
    33| export function deepCloneDefinition<T>(object: T, keysToSkip?: string[]): T | undefined {
    34|     if (!object) { return; }
    35|     const obj = object as any;
    36|     const res: any = {};
    37|     Object.keys(obj).forEach((key) => {
    38|         if ((keysToSkip && keysToSkip.indexOf(key) >= 0) || SKIP_JS_BUILTINS.has(key)) {
    39|             return;
    40|         }
    41|         const value = obj[key];
    42|         const sourceIsSimpleObject = isNonNullObject(value) && value.constructor === Object;
    43|         if (sourceIsSimpleObject) {
    44|             res[key] = deepCloneDefinition(value);
    45|         } else {
    46|             res[key] = value;
    47|         }
    48|     });
    49|     return res;
    50| }
    51| export function getAllValuesInObject<T extends Object, K extends keyof T, O extends T[K]>(obj: T): O[] {
    52|     if (!obj) { return []; }
    53|     const anyObject = Object as any;
    54|     if (typeof anyObject.values === 'function') {
    55|         return anyObject.values(obj);
    56|     }
    57|     const ret: any[] = [];
    58|     for (const key in obj) {
    59|         if (obj.hasOwnProperty(key) && obj.propertyIsEnumerable(key)) {
    60|             ret.push(obj[key]);
    61|         }
    62|     }
    63|     return ret;
    64| }
    65| export function mergeDeep(dest: any, source: any, copyUndefined = true, makeCopyOfSimpleObjects = false): void {
    66|     if (!exists(source)) { return; }
    67|     iterateObject(source, (key: string, sourceValue: any) => {
    68|         if (SKIP_JS_BUILTINS.has(key)) {
    69|             return;
    70|         }
    71|         let destValue: any = dest[key];
    72|         if (destValue === sourceValue) { return; }
    73|         if (makeCopyOfSimpleObjects) {
    74|             const objectIsDueToBeCopied = destValue == null && sourceValue != null;
    75|             if (objectIsDueToBeCopied) {
    76|                 const sourceIsSimpleObject = typeof sourceValue === 'object' && sourceValue.constructor === Object;
    77|                 const dontCopy = sourceIsSimpleObject;
    78|                 if (dontCopy) {
    79|                     destValue = {};
    80|                     dest[key] = destValue;
    81|                 }
    82|             }
    83|         }
    84|         if (isNonNullObject(sourceValue) && isNonNullObject(destValue) && !Array.isArray(destValue)) {
    85|             mergeDeep(destValue, sourceValue, copyUndefined, makeCopyOfSimpleObjects);
    86|         } else if (copyUndefined || sourceValue !== undefined) {
    87|             dest[key] = sourceValue;
    88|         }
    89|     });
    90| }


# ====================================================================
# FILE: community-modules/core/src/version.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export const VERSION = '31.3.4';


# ====================================================================
# FILE: community-modules/csv-export/dist/package/main.cjs.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 696-736 ---
   696|   (0, import_core2.Autowired)("columnModel")
   697| ], GridSerializer.prototype, "columnModel", 2);
   698| __decorateClass([
   699|   (0, import_core2.Autowired)("rowModel")
   700| ], GridSerializer.prototype, "rowModel", 2);
   701| __decorateClass([
   702|   (0, import_core2.Autowired)("pinnedRowModel")
   703| ], GridSerializer.prototype, "pinnedRowModel", 2);
   704| __decorateClass([
   705|   (0, import_core2.Autowired)("selectionService")
   706| ], GridSerializer.prototype, "selectionService", 2);
   707| __decorateClass([
   708|   (0, import_core2.Autowired)("rowNodeSorter")
   709| ], GridSerializer.prototype, "rowNodeSorter", 2);
   710| __decorateClass([
   711|   (0, import_core2.Autowired)("sortController")
   712| ], GridSerializer.prototype, "sortController", 2);
   713| GridSerializer = __decorateClass([
   714|   (0, import_core2.Bean)("gridSerializer")
   715| ], GridSerializer);
   716| var VERSION = "31.3.4";
   717| var CsvExportModule = {
   718|   version: VERSION,
   719|   moduleName: import_core3.ModuleNames.CsvExportModule,
   720|   beans: [CsvCreator, GridSerializer]
   721| };
   722| var LINE_SEPARATOR2 = "\r\n";
   723| var XmlFactory = class {
   724|   static createHeader(headerElement = {}) {
   725|     const headerStart = "<?";
   726|     const headerEnd = "?>";
   727|     const keys = ["version"];
   728|     if (!headerElement.version) {
   729|       headerElement.version = "1.0";
   730|     }
   731|     if (headerElement.encoding) {
   732|       keys.push("encoding");
   733|     }
   734|     if (headerElement.standalone) {
   735|       keys.push("standalone");
   736|     }


# ====================================================================
# FILE: community-modules/csv-export/dist/package/main.cjs.min.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-3 ---
     1| var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropNames=Object.getOwnPropertyNames,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,r)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues=(e,t)=>{for(var r in t||(t={}))__hasOwnProp.call(t,r)&&__defNormalProp(e,r,t[r]);if(__getOwnPropSymbols)for(var r of __getOwnPropSymbols(t))__propIsEnum.call(t,r)&&__defNormalProp(e,r,t[r]);return e},__spreadProps=(e,t)=>__defProps(e,__getOwnPropDescs(t)),__export=(e,t)=>{for(var r in t)__defProp(e,r,{get:t[r],enumerable:!0})},__copyProps=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of __getOwnPropNames(t))!__hasOwnProp.call(e,s)&&s!==r&&__defProp(e,s,{get:()=>t[s],enumerable:!(o=__getOwnPropDesc(t,s))||o.enumerable});return e},__toCommonJS=e=>__copyProps(__defProp({},"__esModule",{value:!0}),e),__decorateClass=(e,t,r,o)=>{for(var s=o>1?void 0:o?__getOwnPropDesc(t,r):t,n=e.length-1,i;n>=0;n--)(i=e[n])&&(s=(o?i(t,r,s):i(s))||s);return o&&s&&__defProp(t,r,s),s},__async=(e,t,r)=>new Promise((o,s)=>{var n=l=>{try{a(r.next(l))}catch(u){s(u)}},i=l=>{try{a(r.throw(l))}catch(u){s(u)}},a=l=>l.done?o(l.value):Promise.resolve(l.value).then(n,i);a((r=r.apply(e,t)).next())}),main_exports={};__export(main_exports,{BaseCreator:()=>BaseCreator,BaseGridSerializingSession:()=>BaseGridSerializingSession,CsvCreator:()=>CsvCreator,CsvExportModule:()=>CsvExportModule,Downloader:()=>Downloader,GridSerializer:()=>GridSerializer,RowType:()=>RowType,XmlFactory:()=>XmlFactory,ZipContainer:()=>ZipContainer}),module.exports=__toCommonJS(main_exports);var BaseCreator=class{setBeans(e){this.beans=e}getFileName(e){const t=this.getDefaultFileExtension();return(e==null||!e.length)&&(e=this.getDefaultFileName()),e.indexOf(".")===-1?`${e}.${t}`:e}getData(e){const t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},BaseGridSerializingSession=class{constructor(e){this.groupColumns=[];const{columnModel:t,valueService:r,gos:o,processCellCallback:s,processHeaderCallback:n,processGroupHeaderCallback:i,processRowGroupCallback:a}=e;this.columnModel=t,this.valueService=r,this.gos=o,this.processCellCallback=s,this.processHeaderCallback=n,this.processGroupHeaderCallback=i,this.processRowGroupCallback=a}prepare(e){this.groupColumns=e.filter(t=>!!t.getColDef().showRowGroup)}extractHeaderValue(e){const t=this.getHeaderName(this.processHeaderCallback,e);return t??""}extractRowCellValue(e,t,r,o,s){const i=(!this.gos.get("groupHideOpenParents")||s.footer)&&this.shouldRenderGroupSummaryCell(s,e,t)?this.createValueForGroupNode(e,s):this.valueService.getValue(e,s);return this.processCell({accumulatedRowIndex:r,rowNode:s,column:e,value:i,processCellCallback:this.processCellCallback,type:o})}shouldRenderGroupSummaryCell(e,t,r){var o;if(!(e&&e.group))return!1;if(this.groupColumns.indexOf(t)!==-1){if(((o=e.groupData)==null?void 0:o[t.getId()])!=null||this.gos.isRowModelType("serverSide")&&e.group)return!0;if(e.footer&&e.level===-1){const a=t.getColDef();return a==null||a.showRowGroup===!0||a.showRowGroup===this.columnModel.getRowGroupColumns()[0].getId()}}const i=this.gos.isGroupUseEntireRow(this.columnModel.isPivotMode());return r===0&&i}getHeaderName(e,t){return e?e(this.gos.addGridCommonParams({column:t})):this.columnModel.getDisplayNameForColumn(t,"csv",!0)}createValueForGroupNode(e,t){if(this.processRowGroupCallback)return this.processRowGroupCallback(this.gos.addGridCommonParams({column:e,node:t}));const r=this.gos.get("treeData"),o=this.gos.get("suppressGroupMaintainValueType"),s=l=>{var u,c;if(r||o)return l.key;const p=(u=l.groupData)==null?void 0:u[e.getId()];return!p||!l.rowGroupColumn||l.rowGroupColumn.getColDef().useValueFormatterForExport===!1?p:(c=this.valueService.formatValue(l.rowGroupColumn,l,p))!=null?c:p},n=t.footer,i=[s(t)];if(!this.gos.isGroupMultiAutoColumn())for(;t.parent;)t=t.parent,i.push(s(t));const a=i.reverse().join(" -> ");return n?`Total ${a}`:a}processCell(e){var t;const{accumulatedRowIndex:r,rowNode:o,column:s,value:n,processCellCallback:i,type:a}=e;return i?{value:(t=i(this.gos.addGridCommonParams({accumulatedRowIndex:r,column:s,node:o,value:n,type:a,parseValue:l=>this.valueService.parseValue(s,o,l,this.valueService.getValue(s,o)),formatValue:l=>{var u;return(u=this.valueService.formatValue(s,o,l))!=null?u:l}})))!=null?t:""}:s.getColDef().useValueFormatterForExport!==!1?{value:n??"",valueFormatted:this.valueService.formatValue(s,o,n)}:{value:n??""}}},import_core=require("@ag-grid-community/core"),Downloader=class{static download(e,t){const r=document.defaultView||window;if(!r){console.warn("AG Grid: There is no `window` associated with the current `document`");return}const o=document.createElement("a"),s=r.URL.createObjectURL(t);o.setAttribute("href",s),o.setAttribute("download",e),o.style.display="none",document.body.appendChild(o),o.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:r})),document.body.removeChild(o),r.setTimeout(()=>{r.URL.revokeObjectURL(s)},0)}},LINE_SEPARATOR=`\r
     2| `,CsvSerializingSession=class extends BaseGridSerializingSession{constructor(e){super(e),this.isFirstLine=!0,this.result="";const{suppressQuotes:t,columnSeparator:r}=e;this.suppressQuotes=t,this.columnSeparator=r}addCustomContent(e){e&&(typeof e=="string"?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,LINE_SEPARATOR),this.result+=e):e.forEach(t=>{this.beginNewLine(),t.forEach((r,o)=>{o!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(r.data.value||""),r.mergeAcross&&this.appendEmptyCells(r.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,r,o){r!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(o)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){t!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,r){var o;t!=0&&(this.result+=this.columnSeparator);const s=this.extractRowCellValue(e,t,t,"csv",r);this.result+=this.putInQuotes((o=s.valueFormatted)!=null?o:s.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(e==null)return'""';let t;return typeof e=="string"?t=e:typeof e.toString=="function"?t=e.toString():(console.warn("AG Grid: unknown value type during csv conversion"),t=""),'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=LINE_SEPARATOR),this.isFirstLine=!1}},CsvCreator=class extends BaseCreator{postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gos:this.gos})}getMergedParams(e){const t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed()){console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration.");return}const t=this.getMergedParams(e),r=this.getData(t),o=new Blob(["\uFEFF",r],{type:"text/plain"}),s=typeof t.fileName=="function"?t.fileName(this.gos.getGridCommonParams()):t.fileName;Downloader.download(this.getFileName(s),o)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e,t=!1){const r=t?Object.assign({},e):this.getMergedParams(e);return this.getData(r)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){const{columnModel:t,valueService:r,gos:o}=this,{processCellCallback:s,processHeaderCallback:n,processGroupHeaderCallback:i,processRowGroupCallback:a,suppressQuotes:l,columnSeparator:u}=e;return new CsvSerializingSession({columnModel:t,valueService:r,gos:o,processCellCallback:s||void 0,processHeaderCallback:n||void 0,processGroupHeaderCallback:i||void 0,processRowGroupCallback:a||void 0,suppressQuotes:l||!1,columnSeparator:u||","})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};__decorateClass([(0,import_core.Autowired)("columnModel")],CsvCreator.prototype,"columnModel",2),__decorateClass([(0,import_core.Autowired)("valueService")],CsvCreator.prototype,"valueService",2),__decorateClass([(0,import_core.Autowired)("gridSerializer")],CsvCreator.prototype,"gridSerializer",2),__decorateClass([(0,import_core.Autowired)("gridOptionsService")],CsvCreator.prototype,"gos",2),__decorateClass([import_core.PostConstruct],CsvCreator.prototype,"postConstruct",1),CsvCreator=__decorateClass([(0,import_core.Bean)("csvCreator")],CsvCreator);var import_core3=require("@ag-grid-community/core"),import_core2=require("@ag-grid-community/core"),RowType=(e=>(e[e.HEADER_GROUPING=0]="HEADER_GROUPING",e[e.HEADER=1]="HEADER",e[e.BODY=2]="BODY",e))(RowType||{}),GridSerializer=class extends import_core2.BeanStub{serialize(e,t={}){const{allColumns:r,columnKeys:o,skipRowGroups:s}=t,n=this.getColumnsToExport(r,s,o);return import_core2._.compose(this.prepareSession(n),this.prependContent(t),this.exportColumnGroups(t,n),this.exportHeaders(t,n),this.processPinnedTopRows(t,n),this.processRows(t,n),this.processPinnedBottomRows(t,n),this.appendContent(t))(e).parse()}processRow(e,t,r,o){const s=t.shouldRowBeSkipped||(()=>!1),n=this.gos.get("groupRemoveSingleChildren"),i=this.gos.get("groupRemoveLowestSingleChildren"),l=t.rowPositions!=null||!!t.onlySelected,u=this.gos.get("groupHideOpenParents")&&!l,c=this.columnModel.isPivotMode()?o.leafGroup:!o.group,p=!!o.footer,h=t.skipRowGroups,d=i&&o.leafGroup,w=o.allChildrenCount===1&&(n||d);if(!c&&!p&&(t.skipRowGroups||w||u)||t.onlySelected&&!o.isSelected()||t.skipPinnedTop&&o.rowPinned==="top"||t.skipPinnedBottom&&o.rowPinned==="bottom"||o.level===-1&&!c&&!p||s(this.gos.addGridCommonParams({node:o})))return;const v=e.onNewBodyRow(o);if(r.forEach((g,f)=>{v.onColumn(g,f,o)}),t.getCustomContentBelowRow){const g=t.getCustomContentBelowRow(this.gos.addGridCommonParams({node:o}));g&&e.addCustomContent(g)}}appendContent(e){return t=>{const r=e.appendContent;return r&&t.addCustomContent(r),t}}prependContent(e){return t=>{const r=e.prependContent;return r&&t.addCustomContent(r),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return r=>{if(!e.skipColumnGroupHeaders){const o=new import_core2.GroupInstanceIdCreator,s=this.displayedGroupCreator.createDisplayedGroups(t,o,null);this.recursivelyAddHeaderGroups(s,r,e.processGroupHeaderCallback)}return r}}exportHeaders(e,t){return r=>{if(!e.skipColumnHeaders){const o=r.onNewHeaderRow();t.forEach((s,n)=>{o.onColumn(s,n,void 0)})}return r}}processPinnedTopRows(e,t){return r=>{const o=this.processRow.bind(this,r,e,t);return e.rowPositions?e.rowPositions.filter(s=>s.rowPinned==="top").sort((s,n)=>s.rowIndex-n.rowIndex).map(s=>this.pinnedRowModel.getPinnedTopRow(s.rowIndex)).forEach(o):this.pinnedRowModel.forEachPinnedTopRow(o),r}}processRows(e,t){return r=>{const o=this.rowModel,s=o.getType(),n=s==="clientSide",i=s==="serverSide",a=!n&&e.onlySelected,l=this.processRow.bind(this,r,e,t),{exportedRows:u="filteredAndSorted"}=e;if(e.rowPositions)e.rowPositions.filter(c=>c.rowPinned==null).sort((c,p)=>c.rowIndex-p.rowIndex).map(c=>o.getRow(c.rowIndex)).forEach(l);else if(this.columnModel.isPivotMode())n?o.forEachPivotNode(l,!0):i?o.forEachNodeAfterFilterAndSort(l,!0):o.forEachNode(l);else if(e.onlySelectedAllPages||a){const c=this.selectionService.getSelectedNodes();this.replicateSortedOrder(c),c.forEach(l)}else u==="all"?o.forEachNode(l):n||i?o.forEachNodeAfterFilterAndSort(l,!0):o.forEachNode(l);return r}}replicateSortedOrder(e){const t=this.sortController.getSortOptions(),r=(o,s)=>{var n,i,a,l;return o.rowIndex!=null&&s.rowIndex!=null?o.rowIndex-s.rowIndex:o.level===s.level?((n=o.parent)==null?void 0:n.id)===((i=s.parent)==null?void 0:i.id)?this.rowNodeSorter.compareRowNodes(t,{rowNode:o,currentPos:(a=o.rowIndex)!=null?a:-1},{rowNode:s,currentPos:(l=s.rowIndex)!=null?l:-1}):r(o.parent,s.parent):o.level>s.level?r(o.parent,s):r(o,s.parent)};e.sort(r)}processPinnedBottomRows(e,t){return r=>{const o=this.processRow.bind(this,r,e,t);return e.rowPositions?e.rowPositions.filter(s=>s.rowPinned==="bottom").sort((s,n)=>s.rowIndex-n.rowIndex).map(s=>this.pinnedRowModel.getPinnedBottomRow(s.rowIndex)).forEach(o):this.pinnedRowModel.forEachPinnedBottomRow(o),r}}getColumnsToExport(e=!1,t=!1,r){const o=this.columnModel.isPivotMode();if(r&&r.length)return this.columnModel.getGridColumns(r);const s=this.gos.get("treeData");let n=[];return e&&!o?n=this.columnModel.getAllGridColumns():n=this.columnModel.getAllDisplayedColumns(),t&&!s&&(n=n.filter(i=>i.getColId()!==import_core2.GROUP_AUTO_COLUMN_ID)),n}recursivelyAddHeaderGroups(e,t,r){const o=[];e.forEach(s=>{const n=s;n.getChildren&&n.getChildren().forEach(i=>o.push(i))}),e.length>0&&e[0]instanceof import_core2.ColumnGroup&&this.doAddHeaderHeader(t,e,r),o&&o.length>0&&this.recursivelyAddHeaderGroups(o,t,r)}doAddHeaderHeader(e,t,r){const o=e.onNewHeaderGroupingRow();let s=0;t.forEach(n=>{const i=n;let a;r?a=r(this.gos.addGridCommonParams({columnGroup:i})):a=this.columnModel.getDisplayNameForColumnGroup(i,"header");const l=i.getLeafColumns().reduce((u,c,p,h)=>{let d=import_core2._.last(u);return c.getColumnGroupShow()==="open"?(!d||d[1]!=null)&&(d=[p],u.push(d)):d&&d[1]==null&&(d[1]=p-1),p===h.length-1&&d&&d[1]==null&&(d[1]=p),u},[]);o.onColumn(i,a||"",s++,i.getLeafColumns().length-1,l)})}};__decorateClass([(0,import_core2.Autowired)("displayedGroupCreator")],GridSerializer.prototype,"displayedGroupCreator",2),__decorateClass([(0,import_core2.Autowired)("columnModel")],GridSerializer.prototype,"columnModel",2),__decorateClass([(0,import_core2.Autowired)("rowModel")],GridSerializer.prototype,"rowModel",2),__decorateClass([(0,import_core2.Autowired)("pinnedRowModel")],GridSerializer.prototype,"pinnedRowModel",2),__decorateClass([(0,import_core2.Autowired)("selectionService")],GridSerializer.prototype,"selectionService",2),__decorateClass([(0,import_core2.Autowired)("rowNodeSorter")],GridSerializer.prototype,"rowNodeSorter",2),__decorateClass([(0,import_core2.Autowired)("sortController")],GridSerializer.prototype,"sortController",2),GridSerializer=__decorateClass([(0,import_core2.Bean)("gridSerializer")],GridSerializer);var VERSION="31.3.4",CsvExportModule={version:VERSION,moduleName:import_core3.ModuleNames.CsvExportModule,beans:[CsvCreator,GridSerializer]},LINE_SEPARATOR2=`\r
     3| `,XmlFactory=class{static createHeader(e={}){const t="<?",r="?>",o=["version"];e.version||(e.version="1.0"),e.encoding&&o.push("encoding"),e.standalone&&o.push("standalone");const s=o.map(n=>`${n}="${e[n]}"`).join(" ");return`${t}xml ${s} ${r}`}static createXml(e,t){let r="";e.properties&&(e.properties.prefixedAttributes&&e.properties.prefixedAttributes.forEach(s=>{Object.keys(s.map).forEach(n=>{r+=this.returnAttributeIfPopulated(s.prefix+n,s.map[n],t)})}),e.properties.rawMap&&Object.keys(e.properties.rawMap).forEach(s=>{r+=this.returnAttributeIfPopulated(s,e.properties.rawMap[s],t)}));let o="<"+e.name+r;return!e.children&&e.textNode==null?o+"/>"+LINE_SEPARATOR2:e.textNode!=null?o+">"+e.textNode+"</"+e.name+">"+LINE_SEPARATOR2:(o+=">"+LINE_SEPARATOR2,e.children&&e.children.forEach(s=>{o+=this.createXml(s,t)}),o+"</"+e.name+">"+LINE_SEPARATOR2)}static returnAttributeIfPopulated(e,t,r){if(!t&&t!==""&&t!==0)return"";let o=t;return typeof t=="boolean"&&r&&(o=r(t)),` ${e}="${o}"`}},import_core4=require("@ag-grid-community/core"),convertTime=e=>{let t=e.getHours();return t<<=6,t=t|e.getMinutes(),t<<=5,t=t|e.getSeconds()/2,t},convertDate=e=>{let t=e.getFullYear()-1980;return t<<=4,t=t|e.getMonth()+1,t<<=5,t=t|e.getDate(),t};function convertDecToHex(e,t){let r="";for(let o=0;o<t;o++)r+=String.fromCharCode(e&255),e>>>=8;return r}var getCrcFromCrc32TableAndByteArray=e=>{if(!e.length)return 0;let t=-1,r=0,o=0,s=0;for(let n=0;n<e.length;n++)r=e[n],o=(t^r)&255,s=crcTable[o],t=t>>>8^s;return t^-1},getCrcFromCrc32Table=e=>e.length?getCrcFromCrc32TableAndByteArray(typeof e=="string"?new TextEncoder().encode(e):e):0,crcTable=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),compressBlob=e=>__async(void 0,null,function*(){let t=0;const r=[],o=new WritableStream({write:i=>{r.push(i),t+=i.length}}),s=new ReadableStream({start:i=>{const a=new FileReader;a.onload=l=>{var u;(u=l.target)!=null&&u.result&&i.enqueue(l.target.result),i.close()},a.readAsArrayBuffer(e)}}),n=new window.CompressionStream("deflate-raw");return yield s.pipeThrough(n).pipeTo(o),{size:t,content:new Blob(r)}}),deflateLocalFile=e=>__async(void 0,null,function*(){const t=new Blob([e]),{size:r,content:o}=yield compressBlob(t),s=new Uint8Array(yield o.arrayBuffer());return{size:r,content:s}}),{utf8_encode}=import_core4._,getDeflatedHeaderAndContent=(e,t)=>__async(void 0,null,function*(){const{content:r}=e,{size:o,content:s}=r?getDecodedContent(r):{size:0,content:Uint8Array.from([])};let n,i,a=!1;if(e.type==="file"&&s&&o>0){const c=yield deflateLocalFile(s);n=c.content,i=c.size,a=!0}const u=getHeaders(e,a,t,o,s,i);return __spreadProps(__spreadValues({},u),{content:n||s,isCompressed:a})}),getHeaderAndContent=(e,t)=>{const{content:r}=e,{content:o}=r?getDecodedContent(r):{content:Uint8Array.from([])},s=getHeaders(e,!1,t,o.length,o,void 0);return __spreadProps(__spreadValues({},s),{content:o,isCompressed:!1})},getHeaders=(e,t,r,o,s,n)=>{const{content:i,path:a,created:l}=e,u=convertTime(l),c=convertDate(l),p=getCrcFromCrc32Table(s),h=n!==void 0?n:o,d=utf8_encode(a),w=d!==a;let C="";if(w){const f=convertDecToHex(1,1)+convertDecToHex(getCrcFromCrc32Table(d),4)+d;C="up"+convertDecToHex(f.length,2)+f}const m="\0"+(w?"\0\b":"\0\0")+convertDecToHex(t?8:0,2)+convertDecToHex(u,2)+convertDecToHex(c,2)+convertDecToHex(h?p:0,4)+convertDecToHex(n??o,4)+convertDecToHex(o,4)+convertDecToHex(d.length,2)+convertDecToHex(C.length,2),v="PK"+m+d+C,g="PK\0"+m+"\0\0\0\0\0\0"+(i?"\0\0\0\0":"\0\0\0")+convertDecToHex(r,4)+d+C;return{localFileHeader:Uint8Array.from(v,f=>f.charCodeAt(0)),centralDirectoryHeader:Uint8Array.from(g,f=>f.charCodeAt(0))}},buildCentralDirectoryEnd=(e,t,r)=>{const o="PK\0\0\0\0"+convertDecToHex(e,2)+convertDecToHex(e,2)+convertDecToHex(t,4)+convertDecToHex(r,4)+"\0\0";return Uint8Array.from(o,s=>s.charCodeAt(0))},convertStringToByteArray=e=>{const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t},getDecodedContent=e=>{let t;if(typeof e=="string"){const r=atob(e.split(";base64,")[1]);t=convertStringToByteArray(r)}else t=e;return{size:t.length,content:t}},ZipContainer=class{static addFolders(e){e.forEach(this.addFolder.bind(this))}static addFolder(e){this.folders.push({path:e,created:new Date,isBase64:!1,type:"folder"})}static addFile(e,t,r=!1){this.files.push({path:e,created:new Date,content:r?t:new TextEncoder().encode(t),isBase64:r,type:"file"})}static getZipFile(e="application/zip"){return __async(this,null,function*(){const t=yield this.buildCompressedFileStream();return this.clearStream(),new Blob([t],{type:e})})}static getUncompressedZipFile(e="application/zip"){const t=this.buildFileStream();return this.clearStream(),new Blob([t],{type:e})}static clearStream(){this.folders=[],this.files=[]}static packageFiles(e){let t=new Uint8Array(0),r=new Uint8Array(0),o=0,s=0;for(const a of e){const{localFileHeader:l,centralDirectoryHeader:u,content:c}=a,p=new Uint8Array(t.length+l.length);p.set(t),p.set(l,t.length),t=p;const h=new Uint8Array(t.length+c.length);h.set(t),h.set(c,t.length),t=h;const d=new Uint8Array(r.length+u.length);d.set(r),d.set(u,r.length),r=d,o+=l.length+c.length,s+=u.length}const n=buildCentralDirectoryEnd(e.length,s,o),i=new Uint8Array(t.length+r.length+n.length);return i.set(t),i.set(r,t.length),i.set(n,t.length+r.length),i}static buildCompressedFileStream(){return __async(this,null,function*(){const e=[...this.folders,...this.files],t=[];let r=0;for(const o of e){const s=yield getDeflatedHeaderAndContent(o,r),{localFileHeader:n,content:i}=s;t.push(s),r+=n.length+i.length}return this.packageFiles(t)})}static buildFileStream(){const e=[...this.folders,...this.files],t=[];let r=0;for(const o of e){const s=getHeaderAndContent(o,r),{localFileHeader:n,content:i}=s;t.push(s),r+=n.length+i.length}return this.packageFiles(t)}};ZipContainer.folders=[],ZipContainer.files=[];


# ====================================================================
# FILE: community-modules/csv-export/dist/types/src/version.d.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export declare const VERSION = "31.3.4";


# ====================================================================
# FILE: community-modules/csv-export/src/version.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export const VERSION = '31.3.4';


# ====================================================================
# FILE: community-modules/infinite-row-model/dist/package/main.cjs.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 590-616 ---
   590|   (0, import_core3.Autowired)("sortController")
   591| ], InfiniteRowModel.prototype, "sortController", 2);
   592| __decorateClass([
   593|   (0, import_core3.Autowired)("selectionService")
   594| ], InfiniteRowModel.prototype, "selectionService", 2);
   595| __decorateClass([
   596|   (0, import_core3.Autowired)("rowRenderer")
   597| ], InfiniteRowModel.prototype, "rowRenderer", 2);
   598| __decorateClass([
   599|   (0, import_core3.Autowired)("rowNodeBlockLoader")
   600| ], InfiniteRowModel.prototype, "rowNodeBlockLoader", 2);
   601| __decorateClass([
   602|   import_core3.PostConstruct
   603| ], InfiniteRowModel.prototype, "init", 1);
   604| __decorateClass([
   605|   import_core3.PreDestroy
   606| ], InfiniteRowModel.prototype, "destroyDatasource", 1);
   607| InfiniteRowModel = __decorateClass([
   608|   (0, import_core3.Bean)("rowModel")
   609| ], InfiniteRowModel);
   610| var VERSION = "31.3.4";
   611| var InfiniteRowModelModule = {
   612|   version: VERSION,
   613|   moduleName: import_core4.ModuleNames.InfiniteRowModelModule,
   614|   rowModel: "infinite",
   615|   beans: [InfiniteRowModel]
   616| };


# ====================================================================
# FILE: community-modules/infinite-row-model/dist/package/main.cjs.min.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| var __defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__hasOwnProp=Object.prototype.hasOwnProperty,__export=(o,e)=>{for(var t in e)__defProp(o,t,{get:e[t],enumerable:!0})},__copyProps=(o,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of __getOwnPropNames(e))!__hasOwnProp.call(o,r)&&r!==t&&__defProp(o,r,{get:()=>e[r],enumerable:!(s=__getOwnPropDesc(e,r))||s.enumerable});return o},__toCommonJS=o=>__copyProps(__defProp({},"__esModule",{value:!0}),o),__decorateClass=(o,e,t,s)=>{for(var r=s>1?void 0:s?__getOwnPropDesc(e,t):e,i=o.length-1,a;i>=0;i--)(a=o[i])&&(r=(s?a(e,t,r):a(r))||r);return s&&r&&__defProp(e,t,r),r},__decorateParam=(o,e)=>(t,s)=>e(t,s,o),main_exports={};__export(main_exports,{InfiniteRowModelModule:()=>InfiniteRowModelModule}),module.exports=__toCommonJS(main_exports);var import_core4=require("@ag-grid-community/core"),import_core3=require("@ag-grid-community/core"),import_core2=require("@ag-grid-community/core"),import_core=require("@ag-grid-community/core"),InfiniteBlock=class extends import_core.RowNodeBlock{constructor(o,e,t){super(o),this.parentCache=e,this.params=t,this.startRow=o*t.blockSize,this.endRow=this.startRow+t.blockSize}postConstruct(){this.createRowNodes()}getBlockStateJson(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}}setDataAndId(o,e,t){import_core._.exists(e)?o.setDataAndId(e,t.toString()):o.setDataAndId(void 0,void 0)}loadFromDatasource(){const o=this.createLoadParams();if(import_core._.missing(this.params.datasource.getRows)){console.warn("AG Grid: datasource is missing getRows method");return}window.setTimeout(()=>{this.params.datasource.getRows(o)},0)}processServerFail(){}createLoadParams(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gos.getGridCommonParams().context}}forEachNode(o,e,t){this.rowNodes.forEach((s,r)=>{this.startRow+r<t&&o(s,e.next())})}getLastAccessed(){return this.lastAccessed}getRow(o,e=!1){e||(this.lastAccessed=this.params.lastAccessedSequence.next());const t=o-this.startRow;return this.rowNodes[t]}getStartRow(){return this.startRow}getEndRow(){return this.endRow}createRowNodes(){this.rowNodes=[];for(let o=0;o<this.params.blockSize;o++){const e=this.startRow+o,t=new import_core.RowNode(this.beans);t.setRowHeight(this.params.rowHeight),t.uiLevel=0,t.setRowIndex(e),t.setRowTop(this.params.rowHeight*e),this.rowNodes.push(t)}}processServerResult(o){this.rowNodes.forEach((t,s)=>{const r=o.rowData?o.rowData[s]:void 0;!t.id&&t.alreadyRendered&&r&&(this.rowNodes[s]=new import_core.RowNode(this.beans),this.rowNodes[s].setRowIndex(t.rowIndex),this.rowNodes[s].setRowTop(t.rowTop),this.rowNodes[s].setRowHeight(t.rowHeight),t.clearRowTopAndRowIndex()),this.setDataAndId(this.rowNodes[s],r,this.startRow+s)});const e=o.rowCount!=null&&o.rowCount>=0?o.rowCount:void 0;this.parentCache.pageLoaded(this,e)}destroyRowNodes(){this.rowNodes.forEach(o=>{o.clearRowTopAndRowIndex()})}};__decorateClass([(0,import_core.Autowired)("beans")],InfiniteBlock.prototype,"beans",2),__decorateClass([import_core.PostConstruct],InfiniteBlock.prototype,"postConstruct",1),__decorateClass([import_core.PreDestroy],InfiniteBlock.prototype,"destroyRowNodes",1);var _InfiniteCache=class u extends import_core2.BeanStub{constructor(e){super(),this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount,this.params=e}setBeans(e){this.logger=e.create("InfiniteCache")}getRow(e,t=!1){const s=Math.floor(e/this.params.blockSize);let r=this.blocks[s];if(!r){if(t)return;r=this.createBlock(s)}return r.getRow(e)}createBlock(e){const t=this.createBean(new InfiniteBlock(e,this,this.params));return this.blocks[t.getId()]=t,this.blockCount++,this.purgeBlocksIfNeeded(t),this.params.rowNodeBlockLoader.addBlock(t),t}refreshCache(){if(this.blockCount==0){this.purgeCache();return}this.getBlocksInOrder().forEach(t=>t.setStateWaitingToLoad()),this.params.rowNodeBlockLoader.checkBlockToLoad()}destroyAllBlocks(){this.getBlocksInOrder().forEach(e=>this.destroyBlock(e))}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(this.logger.log(`onPageLoaded: page = ${e.getId()}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){const t=this.getBlocksInOrder().filter(n=>n!=e),s=(n,h)=>h.getLastAccessed()-n.getLastAccessed();t.sort(s);const r=this.params.maxBlocksInCache>0,i=r?this.params.maxBlocksInCache-1:null,a=u.MAX_EMPTY_BLOCKS_TO_KEEP-1;t.forEach((n,h)=>{const c=n.getState()===InfiniteBlock.STATE_WAITING_TO_LOAD&&h>=a,d=r?h>=i:!1;if(c||d){if(this.isBlockCurrentlyDisplayed(n)||this.isBlockFocused(n))return;this.removeBlockFromCache(n)}})}isBlockFocused(e){const t=this.focusService.getFocusCellToUseAfterRefresh();if(!t||t.rowPinned!=null)return!1;const s=e.getStartRow(),r=e.getEndRow();return t.rowIndex>=s&&t.rowIndex<r}isBlockCurrentlyDisplayed(e){const t=e.getStartRow(),s=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(t,s)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if(typeof t=="number"&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const r=(e.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<r&&(this.rowCount=r)}}setRowCount(e,t){this.rowCount=e,import_core2._.exists(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){const t=new import_core2.NumberSequence;this.getBlocksInOrder().forEach(s=>s.forEachNode(e,t,this.rowCount))}getBlocksInOrder(){const e=(s,r)=>s.getId()-r.getId();return import_core2._.getAllValuesInObject(this.blocks).sort(e)}destroyBlock(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){if(this.isAlive()){this.destroyAllBlocksPastVirtualRowCount();const e={type:import_core2.Events.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(e)}}destroyAllBlocksPastVirtualRowCount(){const e=[];this.getBlocksInOrder().forEach(t=>{t.getId()*this.params.blockSize>=this.rowCount&&e.push(t)}),e.length>0&&e.forEach(t=>this.destroyBlock(t))}purgeCache(){this.getBlocksInOrder().forEach(e=>this.removeBlockFromCache(e)),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){const s=[];let r=-1,i=!1;const a=new import_core2.NumberSequence;import_core2._.missing(e)&&(i=!0);let n=!1;return this.getBlocksInOrder().forEach(c=>{if(!n){if(i&&r+1!==c.getId()){n=!0;return}r=c.getId(),c.forEachNode(d=>{const l=d===e||d===t;(i||l)&&s.push(d),l&&(i=!i)},a,this.rowCount)}}),n||i?[]:s}};_InfiniteCache.MAX_EMPTY_BLOCKS_TO_KEEP=2,__decorateClass([(0,import_core2.Autowired)("rowRenderer")],_InfiniteCache.prototype,"rowRenderer",2),__decorateClass([(0,import_core2.Autowired)("focusService")],_InfiniteCache.prototype,"focusService",2),__decorateClass([__decorateParam(0,(0,import_core2.Qualifier)("loggerFactory"))],_InfiniteCache.prototype,"setBeans",1),__decorateClass([import_core2.PreDestroy],_InfiniteCache.prototype,"destroyAllBlocks",1);var InfiniteCache=_InfiniteCache,InfiniteRowModel=class extends import_core3.BeanStub{getRowBounds(o){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*o}}ensureRowHeightsValid(o,e,t,s){return!1}init(){this.gos.isRowModelType("infinite")&&(this.rowHeight=this.gos.getRowHeightAsNumber(),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache()),this.verifyProps())}verifyProps(){this.gos.exists("initialGroupOrderComparator")&&import_core3._.warnOnce("initialGroupOrderComparator cannot be used with Infinite Row Model as sorting is done on the server side")}start(){this.setDatasource(this.gos.get("datasource"))}destroyDatasource(){this.datasource&&(this.getContext().destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedListener(this.eventService,import_core3.Events.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,import_core3.Events.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,import_core3.Events.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,import_core3.Events.EVENT_STORE_UPDATED,this.onCacheUpdated.bind(this)),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=this.gos.getRowHeightAsNumber(),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onFilterChanged(){this.reset()}onSortChanged(){this.reset()}onColumnEverything(){let o;this.cacheParams?o=this.isSortModelDifferent():o=!0,o&&this.reset()}isSortModelDifferent(){return!import_core3._.jsonEquals(this.cacheParams.sortModel,this.sortController.getSortModel())}getType(){return"infinite"}setDatasource(o){this.destroyDatasource(),this.datasource=o,o&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(o,e){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(o,e):[]}reset(){if(!this.datasource)return;this.gos.getCallback("getRowId")!=null||this.selectionService.reset("rowDataChanged"),this.resetCache()}createModelUpdatedEvent(){return{type:import_core3.Events.EVENT_MODEL_UPDATED,newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1}}resetCache(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.gos.get("infiniteInitialRowCount"),maxBlocksInCache:this.gos.get("maxBlocksInCache"),rowHeight:this.gos.getRowHeightAsNumber(),overflowSize:this.gos.get("cacheOverflowSize"),blockSize:this.gos.get("cacheBlockSize"),lastAccessedSequence:new import_core3.NumberSequence},this.infiniteCache=this.createBean(new InfiniteCache(this.cacheParams)),this.eventService.dispatchEventOnce({type:import_core3.Events.EVENT_ROW_COUNT_READY});const o=this.createModelUpdatedEvent();this.eventService.dispatchEvent(o)}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)});const o=this.createModelUpdatedEvent();this.eventService.dispatchEvent(o)}destroyCache(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))}onCacheUpdated(){const o=this.createModelUpdatedEvent();this.eventService.dispatchEvent(o)}getRow(o){if(this.infiniteCache&&!(o>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(o)}getRowNode(o){let e;return this.forEachNode(t=>{t.id===o&&(e=t)}),e}forEachNode(o){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(o)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(o){return o}getRowIndexAtPixel(o){if(this.rowHeight!==0){const e=Math.floor(o/this.rowHeight),t=this.getRowCount()-1;return e>t?t:e}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(o){return!!this.getRowNode(o.id)}refreshCache(){this.infiniteCache&&this.infiniteCache.refreshCache()}purgeCache(){this.infiniteCache&&this.infiniteCache.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?this.infiniteCache.isLastRowIndexKnown():!1}setRowCount(o,e){this.infiniteCache&&this.infiniteCache.setRowCount(o,e)}};__decorateClass([(0,import_core3.Autowired)("filterManager")],InfiniteRowModel.prototype,"filterManager",2),__decorateClass([(0,import_core3.Autowired)("sortController")],InfiniteRowModel.prototype,"sortController",2),__decorateClass([(0,import_core3.Autowired)("selectionService")],InfiniteRowModel.prototype,"selectionService",2),__decorateClass([(0,import_core3.Autowired)("rowRenderer")],InfiniteRowModel.prototype,"rowRenderer",2),__decorateClass([(0,import_core3.Autowired)("rowNodeBlockLoader")],InfiniteRowModel.prototype,"rowNodeBlockLoader",2),__decorateClass([import_core3.PostConstruct],InfiniteRowModel.prototype,"init",1),__decorateClass([import_core3.PreDestroy],InfiniteRowModel.prototype,"destroyDatasource",1),InfiniteRowModel=__decorateClass([(0,import_core3.Bean)("rowModel")],InfiniteRowModel);var VERSION="31.3.4",InfiniteRowModelModule={version:VERSION,moduleName:import_core4.ModuleNames.InfiniteRowModelModule,rowModel:"infinite",beans:[InfiniteRowModel]};


# ====================================================================
# FILE: community-modules/infinite-row-model/dist/types/src/version.d.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export declare const VERSION = "31.3.4";


# ====================================================================
# FILE: community-modules/infinite-row-model/src/version.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export const VERSION = '31.3.4';


# ====================================================================
# FILE: community-modules/theming/src/version.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export const VERSION = '31.3.4';


# ====================================================================
# FILE: documentation/ag-grid-docs/src/components/about/About.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-548 ---
     1| import styles from './About.module.scss';
     2| export const About = () => {
     3|     return (
     4|         <div className={styles.aboutPage}>
     5|             <div className="layout-max-width-small">
     6|                 <section>
     7|                     <h1>About AG Grid</h1>
     8|                 </section>
     9|                 <section>
    10|                     <article>
    11|                         <br />
    12|                         <p>
    13|                             Born out of frustration with existing solutions, <strong>AG Grid</strong> evolved from a
    14|                             side project to becoming the leading JavaScript datagrid on the market. We are a company
    15|                             built by developers for developers, and - true to our roots - we offer{' '}
    16|                             <strong>AG Grid Community</strong>: a free and open-source project that delivers world class
    17|                             grid performance. <strong>AG Grid Enterprise</strong> is our commercially-licensed offering
    18|                             which has enjoyed widespread adoption and facilitates us to keep delivering on our mission.
    19|                         </p>
    20|                         <p>
    21|                             Today, <strong>AG Grid</strong> is a self-funded, bootstrapped company with thousands of
    22|                             customers globally. Even though we've already created the world's best Javascript datagrid,
    23|                             our work isn't over: we're forging ahead with the development of new features to show the
    24|                             world whats possible in a Javascript datagrid.
    25|                         </p>
    26|                     </article>
    27|                 </section>
    28|                 <section>
    29|                     <h2>Our Principles</h2>
    30|                     <article>
    31|                         <p>
    32|                             We believe that a datagrid should be framework-agnostic, providing developers with
    33|                             flexibility and future-proofing their work. This philosophy is mirrored in our name; AG'
    34|                             stands for agnostic. Our experience is in building Enterprise applications: we know that the
    35|                             datagrid is at the core of an Enterprise application, and needs to deliver performance and a
    36|                             rich feature set. We pride ourselves on offering what others typically charge for.{' '}
    37|                             <strong>AG Grid Community</strong> delivers features comparable to our competition, free of
    38|                             charge.
    39|                         </p>
    40|                     </article>
    41|                 </section>
    42|                 <section>
    43|                     <h2>The Dev Team</h2>
    44|                     <article className={styles.team}>
    45|                         <div>
    46|                             <img
    47|                                 height={250}
    48|                                 width={250}
    49|                                 src={'/images/team/niall.jpg'}
    50|                                 alt="Niall Crosby, CEO / Founder"
    51|                             />
    52|                             <h3>Niall Crosby</h3>
    53|                             <p>CEO / Founder</p>
    54|                         </div>
    55|                         <div>
    56|                             <img
    57|                                 height={250}
    58|                                 width={250}
    59|                                 src={'/images/team/rob.jpg'}
    60|                                 alt="Rob Clarke, VP Engineering"
    61|                             />
    62|                             <h3>Rob Clarke</h3>
    63|                             <p>CTO</p>
    64|                         </div>
    65|                         <div>
    66|                             <img
    67|                                 height={250}
    68|                                 width={250}
    69|                                 src={'/images/team/sean.jpg'}
    70|                                 alt="Sean Landsman, Lead Developer"
    71|                             />
    72|                             <h3>Sean Landsman</h3>
    73|                             <p>
    74|                                 Lead Developer,
    75|                                 <br />
    76|                                 Frameworks
    77|                             </p>
    78|                         </div>
    79|                         <div>
    80|                             <img
    81|                                 height={250}
    82|                                 width={250}
    83|                                 src={'/images/team/gil.jpg'}
    84|                                 alt="Guilherme Lopes, Lead Developer"
    85|                             />
    86|                             <h3>Guilherme Lopes</h3>
    87|                             <p>
    88|                                 Lead Developer,
    89|                                 <br />
    90|                                 UI
    91|                             </p>
    92|                         </div>
    93|                         <div>
    94|                             <img
    95|                                 height={250}
    96|                                 width={250}
    97|                                 src={'/images/team/stephen.jpeg'}
    98|                                 alt="Stephen Cooper, Developer"
    99|                             />
   100|                             <h3>Stephen Cooper</h3>
   101|                             <p>
   102|                                 Developer,
   103|                                 <br />
   104|                                 Grid Core
   105|                             </p>
   106|                         </div>
   107|                         <div>
   108|                             <img
   109|                                 height={250}
   110|                                 width={250}
   111|                                 src={'/images/team/andy.jpg'}
   112|                                 alt="Andrew Glazier, Developer"
   113|                             />
   114|                             <h3>Andrew Glazier</h3>
   115|                             <p>
   116|                                 Developer,
   117|                                 <br />
   118|                                 Grid Core
   119|                             </p>
   120|                         </div>
   121|                         <div>
   122|                             <img height={250} width={250} src={'/images/team/tak.png'} alt="Tak Tran, Developer" />
   123|                             <h3>Tak Tran</h3>
   124|                             <p>
   125|                                 Developer,
   126|                                 <br />
   127|                                 Grid Core
   128|                             </p>
   129|                         </div>
   130|                         <div>
   131|                             <img
   132|                                 height={250}
   133|                                 width={250}
   134|                                 src={'/images/team/peter.jpg'}
   135|                                 alt="Peter Reynolds, Developer"
   136|                             />
   137|                             <h3>Peter Reynolds</h3>
   138|                             <p>
   139|                                 Developer,
   140|                                 <br />
   141|                                 Grid Core
   142|                             </p>
   143|                         </div>
   144|                         <div>
   145|                             <img
   146|                                 height={250}
   147|                                 width={250}
   148|                                 src={'/images/team/alanT.jpg'}
   149|                                 alt="Alan Treadway, Developer"
   150|                             />
   151|                             <h3>Alan Treadway</h3>
   152|                             <p>
   153|                                 Lead Developer,
   154|                                 <br />
   155|                                 Data Visualisation
   156|                             </p>
   157|                         </div>
   158|                         <div>
   159|                             <img height={250} width={250} src={'/images/team/mana.jpeg'} alt="Mana Peirov, Developer" />
   160|                             <h3>Mana Peirov</h3>
   161|                             <p>
   162|                                 Developer,
   163|                                 <br />
   164|                                 Data Visualisation
   165|                             </p>
   166|                         </div>
   167|                         <div>
   168|                             <img height={250} width={250} src={'/images/team/ido.jpg'} alt="Ido Moshe, Developer" />
   169|                             <h3>Ido Moshe</h3>
   170|                             <p>
   171|                                 Developer,
   172|                                 <br />
   173|                                 Data Visualisation
   174|                             </p>
   175|                         </div>
   176|                         <div>
   177|                             <img height={250} width={250} src={'/images/team/oli.jpg'} alt="Oli Legat, Developer" />
   178|                             <h3>Oli Legat</h3>
   179|                             <p>
   180|                                 Developer,
   181|                                 <br />
   182|                                 Data Visualisation
   183|                             </p>
   184|                         </div>
   185|                         <div>
   186|                             <img
   187|                                 height={250}
   188|                                 width={250}
   189|                                 src={'/images/team/jacob.jpg'}
   190|                                 alt="Jacob Parker, Developer"
   191|                             />
   192|                             <h3>Jacob Parker</h3>
   193|                             <p>
   194|                                 Developer,
   195|                                 <br />
   196|                                 Data Visualisation
   197|                             </p>
   198|                         </div>
   199|                         <div>
   200|                             <img
   201|                                 height={250}
   202|                                 width={250}
   203|                                 src={'/images/team/alberto.jpg'}
   204|                                 alt="Alberto Gutierrez, Head of Customer Services"
   205|                             />
   206|                             <h3>Alberto Gutierrez</h3>
   207|                             <p>Head of Customer Services</p>
   208|                         </div>
   209|                         <div>
   210|                             <img
   211|                                 height={250}
   212|                                 width={250}
   213|                                 src={'/images/team/kiril.jpg'}
   214|                                 alt="Kiril Matev, Technical Product Manager"
   215|                             />
   216|                             <h3>Kiril Matev</h3>
   217|                             <p>Technical Product Manager</p>
   218|                         </div>
   219|                         <div>
   220|                             <img
   221|                                 height={250}
   222|                                 width={250}
   223|                                 src={'/images/team/david.jpg'}
   224|                                 alt="David Glickman, Technical Product Analyst"
   225|                             />
   226|                             <h3>David Glickman</h3>
   227|                             <p>Technical Product Analyst</p>
   228|                         </div>
   229|                         <div>
   230|                             <img
   231|                                 height={250}
   232|                                 width={250}
   233|                                 src={'/images/team/zoheil.jpg'}
   234|                                 alt="Zoheil Khaleqi, Technical Product Analyst"
   235|                             />
   236|                             <h3>Zoheil Khaleqi</h3>
   237|                             <p>Technical Product Analyst</p>
   238|                         </div>
   239|                         <div>
   240|                             <img
   241|                                 height={250}
   242|                                 width={250}
   243|                                 src={'/images/team/adamW.jpg'}
   244|                                 alt="Adam Wang, Technical Product Analyst"
   245|                             />
   246|                             <h3>Adam Wang</h3>
   247|                             <p>Technical Product Analyst</p>
   248|                         </div>
   249|                         <div>
   250|                             <img
   251|                                 height={250}
   252|                                 width={250}
   253|                                 src={'/images/team/hesam.jpg'}
   254|                                 alt="Hesam Yousefipour, Technical Product Analyst"
   255|                             />
   256|                             <h3>Hesam Yousefipour</h3>
   257|                             <p>Technical Product Analyst</p>
   258|                         </div>
   259|                         <div>
   260|                             <img
   261|                                 height={250}
   262|                                 width={250}
   263|                                 src={'/images/team/viqas.jpg'}
   264|                                 alt="Viqas Hussain, Lead Developer"
   265|                             />
   266|                             <h3>Viqas Hussain</h3>
   267|                             <p>
   268|                                 Lead Developer,
   269|                                 <br />
   270|                                 E-commerce
   271|                             </p>
   272|                         </div>
   273|                         <div>
   274|                             <img
   275|                                 height={250}
   276|                                 width={250}
   277|                                 src={'/images/team/mark.jpg'}
   278|                                 alt="Mark Durrant, Lead UX Designer"
   279|                             />
   280|                             <h3>Mark Durrant</h3>
   281|                             <p>Lead UX Designer</p>
   282|                         </div>
   283|                         <div>
   284|                             <img
   285|                                 height={250}
   286|                                 width={250}
   287|                                 src={'/images/team/kyler.jpg'}
   288|                                 alt="Kyler Phillips, Lead UX Designer"
   289|                             />
   290|                             <h3>Kyler Phillips</h3>
   291|                             <p>Product Designer</p>
   292|                         </div>
   293|                         <div>
   294|                             <img
   295|                                 height={250}
   296|                                 width={250}
   297|                                 src={'/images/team/james.jpg'}
   298|                                 alt="James Swinton-Bland, Developer relations lead"
   299|                             />
   300|                             <h3>
   301|                                 James
   302|                                 <br />
   303|                                 Swinton-Bland
   304|                             </h3>
   305|                             <p>Developer Relations Lead</p>
   306|                         </div>
   307|                         <div>
   308|                             <img
   309|                                 height={250}
   310|                                 width={250}
   311|                                 src={'/images/team/abi.jpg'}
   312|                                 alt="Abi Glazier, Developer relations"
   313|                             />
   314|                             <h3>Abi Glazier</h3>
   315|                             <p>Developer Relations</p>
   316|                         </div>
   317|                     </article>
   318|                 </section>
   319|                 <section>
   320|                     <h2>The Operations Team</h2>
   321|                     <article className={styles.team}>
   322|                         <div>
   323|                             <img
   324|                                 height={250}
   325|                                 width={250}
   326|                                 src={'/images/team/dimo.jpg'}
   327|                                 alt="Dimo Iliev, Managing Director"
   328|                             />
   329|                             <h3>Dimo Iliev</h3>
   330|                             <p>Managing Director</p>
   331|                         </div>
   332|                         <div>
   333|                             <img
   334|                                 height={250}
   335|                                 width={250}
   336|                                 src={'/images/team/simon.jpg'}
   337|                                 alt="Simon Kenny, Customer Experience Manager"
   338|                             />
   339|                             <h3>Simon Kenny</h3>
   340|                             <p>Sales Director</p>
   341|                         </div>
   342|                         <div>
   343|                             <img
   344|                                 height={250}
   345|                                 width={250}
   346|                                 src={'/images/team/nathan.jpeg'}
   347|                                 alt="Nathan Gauge-Klein, General Counsel"
   348|                             />
   349|                             <h3>
   350|                                 Nathan
   351|                                 <br />
   352|                                 Gauge-Klein
   353|                             </h3>
   354|                             <p>General Counsel</p>
   355|                         </div>
   356|                         <div>
   357|                             <img
   358|                                 height={250}
   359|                                 width={250}
   360|                                 src={'/images/team/victoria.jpeg'}
   361|                                 alt="Victoria Tennant, Head of Renewals Department"
   362|                             />
   363|                             <h3>Victoria Tennant</h3>
   364|                             <p>Head of Renewals Department</p>
   365|                         </div>
   366|                         <div>
   367|                             <img
   368|                                 height={250}
   369|                                 width={250}
   370|                                 src={'/images/team/dimple.jpg'}
   371|                                 alt="Dimple Unalkat, Head of Initials Department"
   372|                             />
   373|                             <h3>Dimple Unalkat</h3>
   374|                             <p>Head of Initials Department</p>
   375|                         </div>
   376|                         <div>
   377|                             <img
   378|                                 height={250}
   379|                                 width={250}
   380|                                 src={'/images/team/sachshell.png'}
   381|                                 alt="Sachshell Rhoden, Customer Experience Manager"
   382|                             />
   383|                             <h3>Sachshell Rhoden</h3>
   384|                             <p>Sales Operations Manager</p>
   385|                         </div>
   386|                         <div>
   387|                             <img
   388|                                 height={250}
   389|                                 width={250}
   390|                                 src={'/images/team/alison.jpeg'}
   391|                                 alt="Alison Bunworth, Business Development Manager"
   392|                             />
   393|                             <h3>Alison Bunworth</h3>
   394|                             <p>Business Development Manager</p>
   395|                         </div>
   396|                         <div>
   397|                             <img
   398|                                 height={250}
   399|                                 width={250}
   400|                                 src={'/images/team/jordan.jpeg'}
   401|                                 alt="Jordan Shekoni, Customer Experience Manager"
   402|                             />
   403|                             <h3>Jordan Shekoni</h3>
   404|                             <p>Key Account Manager</p>
   405|                         </div>
   406|                         <div>
   407|                             <img
   408|                                 height={250}
   409|                                 width={250}
   410|                                 src={'/images/team/seweety.jpeg'}
   411|                                 alt="Seweety Kumar, Renewals Team Lead"
   412|                             />
   413|                             <h3>Seweety Kumar</h3>
   414|                             <p>Renewals Team Lead</p>
   415|                         </div>
   416|                         <div>
   417|                             <img
   418|                                 height={250}
   419|                                 width={250}
   420|                                 src={'/images/team/robD.jpg'}
   421|                                 alt="Rob Dunkiert, Customer Experience Manager"
   422|                             />
   423|                             <h3>Rob Dunkiert</h3>
   424|                             <p>Customer Experience Manager</p>
   425|                         </div>
   426|                         <div>
   427|                             <img
   428|                                 height={250}
   429|                                 width={250}
   430|                                 src={'/images/team/laiyan.jpeg'}
   431|                                 alt="Laiyan Woo, Customer Experience Manager"
   432|                             />
   433|                             <h3>Laiyan Woo</h3>
   434|                             <p>Customer Experience Manager</p>
   435|                         </div>
   436|                         <div>
   437|                             <img
   438|                                 height={250}
   439|                                 width={250}
   440|                                 src={'/images/team/amir.jpeg'}
   441|                                 alt="Amir Hussain, Customer Experience Manager"
   442|                             />
   443|                             <h3>Amir Hussain</h3>
   444|                             <p>Customer Experience Manager</p>
   445|                         </div>
   446|                         <div>
   447|                             <img
   448|                                 height={250}
   449|                                 width={250}
   450|                                 src={'/images/team/tobi.jpg'}
   451|                                 alt="Tobi Aguda, Customer Experience Manager"
   452|                             />
   453|                             <h3>Tobi Aguda</h3>
   454|                             <p>Customer Experience Manager</p>
   455|                         </div>
   456|                         <div>
   457|                             <img
   458|                                 height={250}
   459|                                 width={250}
   460|                                 src={'/images/team/kylie.jpg'}
   461|                                 alt="Kylie Slevin, Customer Experience Manager"
   462|                             />
   463|                             <h3>Kylie Slevin</h3>
   464|                             <p>Customer Experience Manager</p>
   465|                         </div>
   466|                         <div>
   467|                             <img
   468|                                 height={250}
   469|                                 width={250}
   470|                                 src={'/images/team/alexR.jpg'}
   471|                                 alt="Alex Russell, Customer Experience Manager"
   472|                             />
   473|                             <h3>Alex Russell</h3>
   474|                             <p>Customer Experience Manager</p>
   475|                         </div>
   476|                         <div>
   477|                             <img
   478|                                 height={250}
   479|                                 width={250}
   480|                                 src={'/images/team/lex.jpg'}
   481|                                 alt="Alex Openshaw, Customer Experience Manager"
   482|                             />
   483|                             <h3>Alex Openshaw</h3>
   484|                             <p>Customer Experience Manager</p>
   485|                         </div>
   486|                         <div>
   487|                             <img
   488|                                 height={250}
   489|                                 width={250}
   490|                                 src={'/images/team/jay.jpg'}
   491|                                 alt="Jay Thompson, Customer Experience Manager"
   492|                             />
   493|                             <h3>Jay Thompson</h3>
   494|                             <p>Customer Experience Manager</p>
   495|                         </div>
   496|                         <div>
   497|                             <img
   498|                                 height={250}
   499|                                 width={250}
   500|                                 src={'/images/team/adamM.jpg'}
   501|                                 alt="Adam Mulcahy, Customer Experience Manager"
   502|                             />
   503|                             <h3>Adam Mulcahy</h3>
   504|                             <p>Customer Experience Manager</p>
   505|                         </div>
   506|                         <div>
   507|                             <img
   508|                                 height={250}
   509|                                 width={250}
   510|                                 src={'/images/team/kathryn.png'}
   511|                                 alt="Kathryn Knapman, Customer Experience Manager"
   512|                             />
   513|                             <h3>Kathryn Knapman</h3>
   514|                             <p>
   515|                                 PA to CEO,
   516|                                 <br />& Office Manager
   517|                             </p>
   518|                         </div>
   519|                     </article>
   520|                 </section>
   521|                 <section>
   522|                     <h2>Contact Us</h2>
   523|                     <article className={styles.footer}>
   524|                         <div>
   525|                             <h3>Our Address</h3>
   526|                             <address>
   527|                                 <strong>AG Grid Ltd.</strong>
   528|                                 <br />
   529|                                 Bank Chambers
   530|                                 <br />
   531|                                 6 Borough High Street
   532|                                 <br />
   533|                                 London
   534|                                 <br />
   535|                                 SE1 9QQ
   536|                                 <br />
   537|                                 United Kingdom
   538|                             </address>
   539|                             <p>
   540|                                 Email Enquiries: <a href="mailto:info@ag-grid.com">info@ag-grid.com</a>
   541|                             </p>
   542|                         </div>
   543|                     </article>
   544|                 </section>
   545|             </div>
   546|         </div>
   547|     );
   548| };


# ====================================================================
# FILE: documentation/ag-grid-docs/src/components/example-grid/Example.jsx
# Total hunks: 3
# ====================================================================
# --- HUNK 1: Lines 532-572 ---
   532| const ExampleInner = ({ darkMode }) => {
   533|     const gridRef = useRef(null);
   534|     const loadInstance = useRef(0);
   535|     const [gridTheme, setGridTheme] = useState('quartz');
   536|     useEffect(() => {
   537|         const themeFromURL = new URLSearchParams(window.location.search).get('theme');
   538|         if (themeFromURL) {
   539|             setGridTheme(themeFromURL);
   540|         }
   541|     }, []);
   542|     const [base64Flags, setBase64Flags] = useState();
   543|     const [defaultCols, setDefaultCols] = useState();
   544|     const [isSmall, setIsSmall] = useState(false);
   545|     const [defaultColCount, setDefaultColCount] = useState();
   546|     const [columnDefs, setColumnDefs] = useState();
   547|     const [rowData, setRowData] = useState();
   548|     const [message, setMessage] = useState();
   549|     const [showMessage, setShowMessage] = useState(false);
   550|     const [rowCols, setRowCols] = useState([]);
   551|     const [dataSize, setDataSize] = useState();
   552|     const [initialLoad, setInitialLoad] = useState(true);
   553|     const modules = useMemo(
   554|         () => [
   555|             ClientSideRowModelModule,
   556|             CsvExportModule,
   557|             ClipboardModule,
   558|             ColumnsToolPanelModule,
   559|             ExcelExportModule,
   560|             FiltersToolPanelModule,
   561|             GridChartsModule,
   562|             MasterDetailModule,
   563|             MenuModule,
   564|             MultiFilterModule,
   565|             RangeSelectionModule,
   566|             RichSelectModule,
   567|             RowGroupingModule,
   568|             SetFilterModule,
   569|             SideBarModule,
   570|             StatusBarModule,
   571|             SparklinesModule,
   572|         ],

# --- HUNK 2: Lines 821-861 ---
   821|         }
   822|         for (let col = defaultColCount; col < colCount; col++) {
   823|             var value;
   824|             const randomBit = pseudoRandom().toString().substring(2, 5);
   825|             value = colNames[col % colNames.length] + '-' + randomBit + ' - (' + (row + 1) + ',' + col + ')';
   826|             rowItem['col' + col] = value;
   827|         }
   828|         return rowItem;
   829|     };
   830|     const createData = () => {
   831|         loadInstance.current = loadInstance.current + 1;
   832|         const loadInstanceCopy = loadInstance.current;
   833|         if (gridRef.current && gridRef.current.api) {
   834|             gridRef.current.api.showLoadingOverlay();
   835|         }
   836|         const colDefs = createCols();
   837|         const rowCount = getRowCount();
   838|         const colCount = getColCount();
   839|         let row = 0;
   840|         const data = [];
   841|         setShowMessage(!initialLoad); 
   842|         setMessage(` Generating rows`);
   843|         const loopCount = rowCount > 10000 ? 10000 : 1000;
   844|         const intervalId = setInterval(() => {
   845|             if (loadInstanceCopy !== loadInstance.current) {
   846|                 clearInterval(intervalId);
   847|                 return;
   848|             }
   849|             for (let i = 0; i < loopCount; i++) {
   850|                 if (row < rowCount) {
   851|                     const rowItem = createRowItem(row, colCount);
   852|                     data.push(rowItem);
   853|                     row++;
   854|                 } else {
   855|                     break;
   856|                 }
   857|             }
   858|             setMessage(` Generating rows ${row}`);
   859|             if (row >= rowCount) {
   860|                 setShowMessage(false);
   861|                 setMessage('');

# --- HUNK 3: Lines 950-990 ---
   950|     const getColCount = () => {
   951|         return parseInt(dataSize.split('x')[1], 10);
   952|     };
   953|     const getRowCount = () => {
   954|         const rows = parseFloat(dataSize.split('x')[0]);
   955|         return rows * 1000;
   956|     };
   957|     const createCols = () => {
   958|         const colCount = getColCount();
   959|         const columns = defaultCols.slice(0, colCount);
   960|         for (let col = defaultColCount; col < colCount; col++) {
   961|             const colName = colNames[col % colNames.length];
   962|             const colDef = { headerName: colName, field: 'col' + col, width: 200, editable: true };
   963|             columns.push(colDef);
   964|         }
   965|         return columns;
   966|     };
   967|     useEffect(() => {
   968|         if (dataSize) {
   969|             createData();
   970|             setInitialLoad(false);
   971|         }
   972|     }, [dataSize]);
   973|     const isAutoTheme = gridTheme.includes('auto');
   974|     let themeClass = gridTheme;
   975|     if (!themeClass.startsWith('ag-theme-')) {
   976|         themeClass = 'ag-theme-' + themeClass;
   977|         if (darkMode) {
   978|             themeClass += '-dark';
   979|         }
   980|     }
   981|     const isDarkTheme = themeClass.includes('dark');
   982|     const defaultChartThemes = ['ag-default', 'ag-material', 'ag-sheets', 'ag-polychroma', 'ag-vivid'];
   983|     const [chartThemes, setChartThemes] = useState(defaultChartThemes);
   984|     useEffect(() => {
   985|         setChartThemes(darkMode ? defaultChartThemes.map((theme) => theme + '-dark') : defaultChartThemes);
   986|     }, [darkMode]);
   987|     return (
   988|         <>
   989|             <div className={styles.exampleWrapper}>
   990|                 <Toolbar


# ====================================================================
# FILE: documentation/ag-grid-docs/src/features/docs/components/Header.tsx
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 10-49 ---
    10|     framework: Framework;
    11|     isEnterprise?: boolean;
    12|     suppressFrameworkHeader?: boolean;
    13|     path: string;
    14|     menuItems: MenuItem[];
    15| }
    16| export const Header: FunctionComponent<Props> = ({
    17|     title,
    18|     framework,
    19|     isEnterprise,
    20|     suppressFrameworkHeader,
    21|     path,
    22|     menuItems,
    23| }) => {
    24|     useSyncFrameworkStoreState(framework);
    25|     return (
    26|         <header className={styles.docsPageHeader}>
    27|             <div id="top" className={styles.docsPageTitle}>
    28|                 <div className={styles.pageTitleContainer}>
    29|                     <div className={styles.pageTitleGroup}>
    30|                         <h1>
    31|                             {!suppressFrameworkHeader && (
    32|                                 <span className={styles.headerFramework}>
    33|                                     {`${getFrameworkDisplayText(framework)} Data Grid`}
    34|                                 </span>
    35|                             )}{title}
    36|                         </h1>
    37|                     </div>
    38|                     <FrameworkSelectorInsideDocs path={path} currentFramework={framework} menuItems={menuItems} />
    39|                 </div>
    40|                 {isEnterprise && (
    41|                     <span className={styles.enterpriseLabel}>
    42|                         Enterprise
    43|                         <Icon name="enterprise" />
    44|                     </span>
    45|                 )}
    46|             </div>
    47|         </header>
    48|     );
    49| };


# ====================================================================
# FILE: documentation/ag-grid-docs/src/utils/htaccess/redirects.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 2497-2536 ---
  2497|     { from: '/javascript-data-grid/filter-provided/', to: '/javascript-data-grid/filtering/' },
  2498|     { from: '/angular-data-grid/filter-provided/', to: '/angular-data-grid/filtering/' },
  2499|     { from: '/react-data-grid/filter-provided/', to: '/react-data-grid/filtering/' },
  2500|     { from: '/vue-data-grid/filter-provided/', to: '/vue-data-grid/filtering/' },
  2501|     { from: '/javascript-data-grid/filter-provided-simple/', to: '/javascript-data-grid/filtering/' },
  2502|     { from: '/angular-data-grid/filter-provided-simple/', to: '/angular-data-grid/filtering/' },
  2503|     { from: '/react-data-grid/filter-provided-simple/', to: '/react-data-grid/filtering/' },
  2504|     { from: '/vue-data-grid/filter-provided-simple/', to: '/vue-data-grid/filtering/' },
  2505|     { from: '/javascript-data-grid/filter-custom/', to: '/javascript-data-grid/component-filter/' },
  2506|     { from: '/angular-data-grid/filter-custom/', to: '/angular-data-grid/component-filter/' },
  2507|     { from: '/react-data-grid/filter-custom/', to: '/react-data-grid/component-filter/' },
  2508|     { from: '/vue-data-grid/filter-custom/', to: '/vue-data-grid/component-filter/' },
  2509|     { from: '/javascript-data-grid/grid-features/', to: 'https://www.ag-grid.com/' },
  2510|     { from: '/angular-data-grid/grid-features/', to: 'https://www.ag-grid.com/' },
  2511|     { from: '/react-data-grid/grid-features/', to: 'https://www.ag-grid.com/' },
  2512|     { from: '/vue-data-grid/grid-features/', to: 'https://www.ag-grid.com/' },
  2513|     { fromPattern: '^/javascript-data-grid/$', to: 'https://www.ag-grid.com/javascript-data-grid/getting-started/' },
  2514|     { fromPattern: '^/react-data-grid/$', to: 'https://www.ag-grid.com/react-data-grid/getting-started/' },
  2515|     { fromPattern: '^/angular-data-grid/$', to: 'https://www.ag-grid.com/angular-data-grid/getting-started/' },
  2516|     { fromPattern: '^/vue-data-grid/$', to: 'https://www.ag-grid.com/vue-data-grid/getting-started/' },
  2517|     { fromPattern: '^/javascript-charts.*', to: 'https://charts.ag-grid.com/javascript/quick-start/' },
  2518|     { fromPattern: '^/angular-charts.*', to: 'https://charts.ag-grid.com/angular/quick-start/' },
  2519|     { fromPattern: '^/react-charts.*', to: 'https://charts.ag-grid.com/react/quick-start/' },
  2520|     { fromPattern: '^/vue-charts.*', to: 'https://charts.ag-grid.com/vue/quick-start/' },
  2521|     { fromPattern: '^/documentation/javascript/charts.*', to: 'https://charts.ag-grid.com/javascript/quick-start/' },
  2522|     { fromPattern: '^/documentation/angular/charts.*', to: 'https://charts.ag-grid.com/angular/quick-start/' },
  2523|     { fromPattern: '^/documentation/react/charts.*', to: 'https://charts.ag-grid.com/react/quick-start/' },
  2524|     { fromPattern: '^/documentation/vue/charts.*', to: 'https://charts.ag-grid.com/vue/quick-start/' },
  2525|     { from: '/javascript-data-grid/component-types/', to: '/javascript-data-grid/components/' },
  2526|     { from: '/angular-data-grid/component-types/', to: '/angular-data-grid/components/' },
  2527|     { from: '/react-data-grid/component-types/', to: '/react-data-grid/components/' },
  2528|     { from: '/vue-data-grid/component-types/', to: '/vue-data-grid/components/' },
  2529|     { from: '/javascript-data-grid/expressions-and-context/', to: '/javascript-data-grid/context/' },
  2530|     { from: '/angular-data-grid/expressions-and-context/', to: '/angular-data-grid/context/' },
  2531|     { from: '/react-data-grid/expressions-and-context/', to: '/react-data-grid/context/' },
  2532|     { from: '/vue-data-grid/expressions-and-context/', to: '/vue-data-grid/context/' },
  2533|     { from: '/javascript-data-grid/cell-rendering/', to: '/javascript-data-grid/component-cell-renderer/' },
  2534|     { from: '/angular-data-grid/cell-rendering/', to: '/angular-data-grid/component-cell-renderer/' },
  2535|     { from: '/react-data-grid/cell-rendering/', to: '/react-data-grid/component-cell-renderer/' },
  2536|     { from: '/vue-data-grid/cell-rendering/', to: '/vue-data-grid/component-cell-renderer/' },


# ====================================================================
# FILE: enterprise-modules/advanced-filter/dist/package/main.cjs.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 3626-3657 ---
  3626|   (0, import_core15.Autowired)("valueService")
  3627| ], AdvancedFilterService.prototype, "valueService", 2);
  3628| __decorateClass([
  3629|   (0, import_core15.Autowired)("columnModel")
  3630| ], AdvancedFilterService.prototype, "columnModel", 2);
  3631| __decorateClass([
  3632|   (0, import_core15.Autowired)("dataTypeService")
  3633| ], AdvancedFilterService.prototype, "dataTypeService", 2);
  3634| __decorateClass([
  3635|   (0, import_core15.Autowired)("rowModel")
  3636| ], AdvancedFilterService.prototype, "rowModel", 2);
  3637| __decorateClass([
  3638|   (0, import_core15.Autowired)("advancedFilterExpressionService")
  3639| ], AdvancedFilterService.prototype, "advancedFilterExpressionService", 2);
  3640| __decorateClass([
  3641|   import_core15.PostConstruct
  3642| ], AdvancedFilterService.prototype, "postConstruct", 1);
  3643| AdvancedFilterService = __decorateClass([
  3644|   (0, import_core15.Bean)("advancedFilterService")
  3645| ], AdvancedFilterService);
  3646| var VERSION = "31.3.4";
  3647| var AdvancedFilterModule = {
  3648|   version: VERSION,
  3649|   moduleName: import_core16.ModuleNames.AdvancedFilterModule,
  3650|   beans: [AdvancedFilterService, AdvancedFilterExpressionService],
  3651|   agStackComponents: [
  3652|     { componentName: "agAdvancedFilter", componentClass: AdvancedFilterComp }
  3653|   ],
  3654|   dependantModules: [
  3655|     import_core17.EnterpriseCoreModule
  3656|   ]
  3657| };


# ====================================================================
# FILE: enterprise-modules/advanced-filter/dist/package/main.cjs.min.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 46-66 ---
    46|                     <div class="ag-advanced-filter-builder-item-tree-lines" aria-hidden="true">
    47|                         <div class="ag-advanced-filter-builder-item-tree-line-vertical-top ag-advanced-filter-builder-item-tree-line-horizontal"></div>
    48|                     </div>
    49|                 </div>
    50|             </div>
    51|         `),this.item=e,this.focusWrapper=t}postConstruct(){var e;import_core10._.setAriaLevel(this.focusWrapper,2);const t=getAdvancedFilterBuilderAddButtonParams(r=>this.advancedFilterExpressionService.translate(r),(e=this.gos.get("advancedFilterBuilderParams"))==null?void 0:e.addSelectWidth),i=this.createManagedBean(new AddDropdownComp(t));this.addManagedListener(i,import_core10.Events.EVENT_FIELD_PICKER_VALUE_SELECTED,({value:r})=>{this.dispatchEvent({type:AdvancedFilterBuilderEvents.EVENT_ADDED,item:this.item,isJoin:r.key==="join"})}),this.eItem.appendChild(i.getGui()),this.createManagedBean(new import_core10.TooltipFeature({getGui:()=>i.getGui(),getLocation:()=>"advancedFilter",getTooltipValue:()=>this.advancedFilterExpressionService.translate("advancedFilterBuilderAddButtonTooltip")})),this.createManagedBean(new AdvancedFilterBuilderItemNavigationFeature(this.getGui(),this.focusWrapper,i)),import_core10._.setAriaLabel(this.focusWrapper,this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderItem",[this.advancedFilterExpressionService.translate("advancedFilterBuilderAddButtonTooltip"),`${this.item.level+1}`]))}afterAdd(){}};__decorateClass([(0,import_core10.Autowired)("beans")],AdvancedFilterBuilderItemAddComp.prototype,"beans",2),__decorateClass([(0,import_core10.Autowired)("advancedFilterExpressionService")],AdvancedFilterBuilderItemAddComp.prototype,"advancedFilterExpressionService",2),__decorateClass([(0,import_core10.RefSelector)("eItem")],AdvancedFilterBuilderItemAddComp.prototype,"eItem",2),__decorateClass([import_core10.PostConstruct],AdvancedFilterBuilderItemAddComp.prototype,"postConstruct",1);var AdvancedFilterBuilderComp=class extends import_core11.Component{constructor(){super(`
    52|             <div role="presentation" class="ag-advanced-filter-builder" tabindex="-1">
    53|                 <div role="presentation" class="ag-advanced-filter-builder-list" ref="eList"></div>
    54|                 <div role="presentation" class="ag-advanced-filter-builder-button-panel">
    55|                     <button class="ag-button ag-standard-button ag-advanced-filter-builder-apply-button" ref="eApplyFilterButton"></button>
    56|                     <button class="ag-button ag-standard-button ag-advanced-filter-builder-cancel-button" ref="eCancelFilterButton"></button>
    57|                 </div>
    58|             </div>`),this.validationMessage=null}postConstruct(){var e;const{showMoveButtons:t}=(e=this.gos.get("advancedFilterBuilderParams"))!=null?e:{};this.showMove=!!t,this.addManagedPropertyListener("advancedFilterBuilderParams",({currentValue:i})=>{this.showMove=!!i?.showMoveButtons,this.refreshList(!1)}),this.filterModel=this.setupFilterModel(),this.setupVirtualList(),this.dragFeature=this.createManagedBean(new AdvancedFilterBuilderDragFeature(this,this.virtualList)),this.setupButtons()}refresh(){let e=this.virtualList.getLastFocusedRow();this.setupFilterModel(),this.validateItems(),this.refreshList(!1),e!=null&&(this.virtualList.getComponentAt(e)||(e=0),this.virtualList.focusRow(e))}getNumItems(){return this.items.length}moveItem(e,t){!t||!e||this.moveItemToIndex(e,t.rowIndex,t.position)}afterGuiAttached(){this.virtualList.focusRow(0)}setupVirtualList(){this.virtualList=this.createManagedBean(new import_core11.VirtualList({cssIdentifier:"advanced-filter-builder",ariaRole:"tree",listName:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderList")})),this.virtualList.setComponentCreator(this.createItemComponent.bind(this)),this.virtualList.setComponentUpdater(this.updateItemComponent.bind(this)),this.virtualList.setRowHeight(40),this.eList.appendChild(this.virtualList.getGui()),this.virtualList.setModel({getRowCount:()=>this.items.length,getRow:e=>this.items[e],areRowsEqual:(e,t)=>e===t}),this.buildList(),this.virtualList.refresh()}setupButtons(){this.eApplyFilterButton.innerText=this.advancedFilterExpressionService.translate("advancedFilterBuilderApply"),this.activateTabIndex([this.eApplyFilterButton]),this.addManagedListener(this.eApplyFilterButton,"click",()=>{this.advancedFilterService.setModel(this.filterModel),this.filterManager.onFilterChanged({source:"advancedFilter"}),this.close()}),this.validationTooltipFeature=this.createManagedBean(new import_core11.TooltipFeature({getGui:()=>this.eApplyFilterButton,getLocation:()=>"advancedFilter",getTooltipValue:()=>this.validationMessage,getTooltipShowDelayOverride:()=>1e3})),this.validate(),this.addManagedListener(this.eApplyFilterButton,"mouseenter",()=>this.addOrRemoveCssClass("ag-advanced-filter-builder-validation",!0)),this.addManagedListener(this.eApplyFilterButton,"mouseleave",()=>this.addOrRemoveCssClass("ag-advanced-filter-builder-validation",!1)),this.eCancelFilterButton.innerText=this.advancedFilterExpressionService.translate("advancedFilterBuilderCancel"),this.activateTabIndex([this.eCancelFilterButton]),this.addManagedListener(this.eCancelFilterButton,"click",()=>this.close())}removeItemFromParent(e){const t=e.parent.conditions.indexOf(e.filterModel);return e.parent.conditions.splice(t,1),t}moveItemToIndex(e,t,i){var r;const s=this.items[t],a=((r=s.filterModel)==null?void 0:r.filterType)==="join"&&i==="bottom",n=a?s.filterModel:s.parent;if(!n||this.isChildOrSelf(n,e.filterModel)||s===e)return;this.removeItemFromParent(e);let o;a?o=0:(o=n.conditions.indexOf(s.filterModel),o===-1?o=n.conditions.length:i==="bottom"&&(o+=1)),n.conditions.splice(o,0,e.filterModel),this.refreshList(!1)}isChildOrSelf(e,t){return e===t||t.filterType==="join"&&t.conditions.some(i=>this.isChildOrSelf(e,i))}setupFilterModel(){const e=this.formatFilterModel(this.advancedFilterService.getModel());return this.stringifiedModel=JSON.stringify(e),e}formatFilterModel(e){return e=e??{filterType:"join",type:"AND",conditions:[]},e.filterType!=="join"&&(e={filterType:"join",type:"AND",conditions:[e]}),e}buildList(){const e=(t,i,r,s)=>{i.push({filterModel:t,level:r,parent:s,valid:!0,showMove:this.showMove}),t.filterType==="join"&&(t.conditions.forEach(a=>e(a,i,r+1,t)),r===0&&i.push({filterModel:null,level:r+1,parent:t,valid:!0}))};this.items=[],e(this.filterModel,this.items,0)}refreshList(e){if(!e){const t=[];this.items.forEach(i=>{i.valid||t.push(i.filterModel)}),this.buildList(),t.length&&this.items.forEach(i=>{i.filterModel&&t.includes(i.filterModel)&&(i.valid=!1)})}this.virtualList.refresh(e),this.validate()}updateItemComponent(e,t){const i=this.items.indexOf(e),r=(o,l)=>{const d=this.items.find(p=>p.filterModel===o),u=d?.parent;if(u){const{conditions:p}=u;r(u,l),l.push(p[p.length-1]===o)}},s=[],{filterModel:a}=e;a&&(r(a,s),s[0]=!1);const n=a?.filterType==="join"&&!!a.conditions.length;t.setState({disableMoveUp:i===1,disableMoveDown:!this.canMoveDown(e,i),treeLines:s,showStartTreeLine:n})}createItemComponent(e,t){const i=this.createBean(e.filterModel?new AdvancedFilterBuilderItemComp(e,this.dragFeature,t):new AdvancedFilterBuilderItemAddComp(e,t));return i.addManagedListener(i,AdvancedFilterBuilderEvents.EVENT_REMOVED,({item:r})=>this.removeItem(r)),i.addManagedListener(i,AdvancedFilterBuilderEvents.EVENT_VALUE_CHANGED,()=>this.validate()),i.addManagedListener(i,AdvancedFilterBuilderEvents.EVENT_ADDED,({item:r,isJoin:s})=>this.addItem(r,s)),i.addManagedListener(i,AdvancedFilterBuilderEvents.EVENT_MOVED,({item:r,backwards:s})=>this.moveItemUpDown(r,s)),i instanceof AdvancedFilterBuilderItemComp&&this.updateItemComponent(e,i),i}addItem(e,t){var i;const{parent:r,level:s,filterModel:a}=e,n=a?.filterType==="join",o=t?{filterType:"join",type:"AND",conditions:[]}:{},l=n?a:r;let d=n?0:l.conditions.indexOf(a);d>=0?(n||(d+=1),l.conditions.splice(d,0,o)):l.conditions.push(o);let u=this.items.indexOf(e);const p=u>=0;if(p){e.filterModel&&u++;const h=[{filterModel:o,level:n?s+1:s,parent:l,valid:t,showMove:this.showMove}];this.items.splice(u,0,...h)}this.refreshList(p),p&&((i=this.virtualList.getComponentAt(u))==null||i.afterAdd())}removeItem(e){var t;const i=e.parent,{filterModel:r}=e,s=i.conditions.indexOf(r);i.conditions.splice(s,1);const a=((t=e.filterModel)==null?void 0:t.filterType)==="join",n=this.items.indexOf(e),o=!a&&n>=0;o&&this.items.splice(n,1),this.refreshList(o),n>=0&&this.virtualList.focusRow(n)}moveItemUpDown(e,t){const i=this.items.indexOf(e),r=t?i-1:i+1;if(r===0||!t&&!this.canMoveDown(e,i))return;const s=this.items[r],a=this.removeItemFromParent(e),{level:n,filterModel:o,parent:l}=e,{level:d,filterModel:u,parent:p}=s;if(t)if(d===n&&u.filterType==="join")u.conditions.push(o);else if(d<=n){const c=p.conditions.indexOf(u);p.conditions.splice(c,0,o)}else l.conditions[a-1].conditions.push(o);else if(d===n)if(u.filterType==="join")u.conditions.splice(0,0,o);else{const c=p.conditions.indexOf(u);p.conditions.splice(c+1,0,o)}else if(a<l.conditions.length)l.conditions.splice(a+1,0,o);else{const c=this.items.find(g=>g.filterModel===l),m=c.parent.conditions.indexOf(c.filterModel)+1;c.parent.conditions.splice(m,0,o)}this.refreshList(!1);const h=this.items.findIndex(({filterModel:c})=>c===o);if(h>=0){const c=this.virtualList.getComponentAt(h);c instanceof AdvancedFilterBuilderItemComp&&c.focusMoveButton(t)}}canMoveDown(e,t){return!(e.level===1&&t===this.items.length-2||e.level===1&&e.parent.conditions[e.parent.conditions.length-1]===e.filterModel)}close(){this.advancedFilterService.getCtrl().toggleFilterBuilder("ui")}validate(){let e=!this.items.every(({valid:t})=>t);e?this.validationMessage=this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationIncomplete"):(e=JSON.stringify(this.filterModel)===this.stringifiedModel,e?this.validationMessage=this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationAlreadyApplied"):this.validationMessage=null),import_core11._.setDisabled(this.eApplyFilterButton,e),this.validationTooltipFeature.refreshToolTip()}validateItems(){const e=i=>{i.type=void 0},t=i=>{delete i.filter};this.items.forEach(i=>{if(!i.valid||!i.filterModel||i.filterModel.filterType==="join")return;const{filterModel:r}=i,{colId:s}=r,a=this.advancedFilterExpressionService.getColumnAutocompleteEntries().find(({key:d})=>d===s),n=this.advancedFilterExpressionService.getColumnDetails(r.colId);if(!a||!n.column){i.valid=!1,r.colId=void 0,e(r),t(r);return}const l=this.advancedFilterExpressionService.getDataTypeExpressionOperator(n.baseCellDataType).operators[r.type];if(!l){i.valid=!1,e(r),t(r);return}if(l.numOperands>0&&!import_core11._.exists(r.filter)){i.valid=!1;return}})}};__decorateClass([(0,import_core11.RefSelector)("eList")],AdvancedFilterBuilderComp.prototype,"eList",2),__decorateClass([(0,import_core11.RefSelector)("eApplyFilterButton")],AdvancedFilterBuilderComp.prototype,"eApplyFilterButton",2),__decorateClass([(0,import_core11.RefSelector)("eCancelFilterButton")],AdvancedFilterBuilderComp.prototype,"eCancelFilterButton",2),__decorateClass([(0,import_core11.Autowired)("filterManager")],AdvancedFilterBuilderComp.prototype,"filterManager",2),__decorateClass([(0,import_core11.Autowired)("advancedFilterService")],AdvancedFilterBuilderComp.prototype,"advancedFilterService",2),__decorateClass([(0,import_core11.Autowired)("advancedFilterExpressionService")],AdvancedFilterBuilderComp.prototype,"advancedFilterExpressionService",2),__decorateClass([(0,import_core11.Autowired)("beans")],AdvancedFilterBuilderComp.prototype,"beans",2),__decorateClass([import_core11.PostConstruct],AdvancedFilterBuilderComp.prototype,"postConstruct",1);var _AdvancedFilterCtrl=class F extends import_core12.BeanStub{constructor(t){super(),this.enabled=t}postConstruct(){this.hasAdvancedFilterParent=!!this.gos.get("advancedFilterParent"),this.ctrlsService.whenReady(()=>this.setAdvancedFilterComp()),this.addManagedListener(this.eventService,import_core12.Events.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,({enabled:t})=>this.onEnabledChanged(t)),this.addManagedPropertyListener("advancedFilterParent",()=>this.updateComps()),this.addDestroyFunc(()=>{this.destroyAdvancedFilterComp(),this.destroyBean(this.eBuilderComp),this.eBuilderDialog&&this.eBuilderDialog.isAlive()&&this.destroyBean(this.eBuilderDialog)})}setupHeaderComp(t){this.eHeaderComp=this.createManagedBean(new AdvancedFilterHeaderComp(this.enabled&&!this.hasAdvancedFilterParent)),t.insertAdjacentElement("beforebegin",this.eHeaderComp.getGui())}focusHeaderComp(){return this.eHeaderComp?(this.eHeaderComp.getFocusableElement().focus(),!0):!1}refreshComp(){var t,i;(t=this.eFilterComp)==null||t.refresh(),(i=this.eHeaderComp)==null||i.refresh()}refreshBuilderComp(){var t;(t=this.eBuilderComp)==null||t.refresh()}getHeaderHeight(){var t,i;return(i=(t=this.eHeaderComp)==null?void 0:t.getHeight())!=null?i:0}setInputDisabled(t){var i,r;(i=this.eFilterComp)==null||i.setInputDisabled(t),(r=this.eHeaderComp)==null||r.setInputDisabled(t)}toggleFilterBuilder(t,i){if(i&&this.eBuilderDialog||i===!1&&!this.eBuilderDialog)return;if(this.eBuilderDialog){this.builderDestroySource=t,this.destroyBean(this.eBuilderDialog);return}this.setInputDisabled(!0);const{width:r,height:s,minWidth:a}=this.getBuilderDialogSize();this.eBuilderComp=this.createBean(new AdvancedFilterBuilderComp),this.eBuilderDialog=this.createBean(new import_core12.AgDialog({title:this.advancedFilterExpressionService.translate("advancedFilterBuilderTitle"),component:this.eBuilderComp,width:r,height:s,resizable:!0,movable:!0,maximizable:!0,centered:!0,closable:!0,minWidth:a,afterGuiAttached:()=>{var n;return(n=this.eBuilderComp)==null?void 0:n.afterGuiAttached()}})),this.dispatchFilterBuilderVisibleChangedEvent(t,!0),this.eBuilderDialog.addEventListener(import_core12.AgDialog.EVENT_DESTROYED,()=>{var n;this.destroyBean(this.eBuilderComp),this.eBuilderComp=void 0,this.eBuilderDialog=void 0,this.setInputDisabled(!1),this.dispatchEvent({type:F.EVENT_BUILDER_CLOSED}),this.dispatchFilterBuilderVisibleChangedEvent((n=this.builderDestroySource)!=null?n:"ui",!1),this.builderDestroySource=void 0})}dispatchFilterBuilderVisibleChangedEvent(t,i){const r={type:import_core12.Events.EVENT_ADVANCED_FILTER_BUILDER_VISIBLE_CHANGED,source:t,visible:i};this.eventService.dispatchEvent(r)}getBuilderDialogSize(){var t,i;const r=(i=(t=this.gos.get("advancedFilterBuilderParams"))==null?void 0:t.minWidth)!=null?i:500,s=this.popupService.getPopupParent(),a=Math.round(import_core12._.getAbsoluteWidth(s))-2,n=Math.round(import_core12._.getAbsoluteHeight(s)*.75)-2,o=Math.min(Math.max(600,r),a),l=Math.min(600,n);return{width:o,height:l,minWidth:r}}onEnabledChanged(t){this.enabled=t,this.updateComps()}updateComps(){this.setAdvancedFilterComp(),this.setHeaderCompEnabled(),this.eventService.dispatchEvent({type:import_core12.Events.EVENT_HEADER_HEIGHT_CHANGED})}setAdvancedFilterComp(){if(this.destroyAdvancedFilterComp(),!this.enabled)return;const t=this.gos.get("advancedFilterParent");if(this.hasAdvancedFilterParent=!!t,t){const i=this.createBean(new AdvancedFilterComp),r=i.getGui(),{allThemes:s}=this.environment.getTheme();s.length&&r.classList.add(...s),r.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr"),t.appendChild(r),this.eFilterComp=i}}setHeaderCompEnabled(){var t;(t=this.eHeaderComp)==null||t.setEnabled(this.enabled&&!this.hasAdvancedFilterParent)}destroyAdvancedFilterComp(){this.eFilterComp&&(import_core12._.removeFromParent(this.eFilterComp.getGui()),this.destroyBean(this.eFilterComp))}};_AdvancedFilterCtrl.EVENT_BUILDER_CLOSED="advancedFilterBuilderClosed",__decorateClass([(0,import_core12.Autowired)("focusService")],_AdvancedFilterCtrl.prototype,"focusService",2),__decorateClass([(0,import_core12.Autowired)("ctrlsService")],_AdvancedFilterCtrl.prototype,"ctrlsService",2),__decorateClass([(0,import_core12.Autowired)("popupService")],_AdvancedFilterCtrl.prototype,"popupService",2),__decorateClass([(0,import_core12.Autowired)("advancedFilterExpressionService")],_AdvancedFilterCtrl.prototype,"advancedFilterExpressionService",2),__decorateClass([import_core12.PostConstruct],_AdvancedFilterCtrl.prototype,"postConstruct",1);var AdvancedFilterCtrl=_AdvancedFilterCtrl,AdvancedFilterComp=class extends import_core13.Component{constructor(){super(`
    59|             <div class="ag-advanced-filter" role="presentation" tabindex="-1">
    60|                 <ag-autocomplete ref="eAutocomplete"></ag-autocomplete>
    61|                 <button class="ag-button ag-standard-button ag-advanced-filter-apply-button" ref="eApplyFilterButton"></button>
    62|                 <button class="ag-advanced-filter-builder-button" ref="eBuilderFilterButton">
    63|                     <span ref="eBuilderFilterButtonIcon" aria-hidden="true"></span>
    64|                     <span class="ag-advanced-filter-builder-button-label" ref="eBuilderFilterButtonLabel"></span>
    65|                 </button>
    66|             </div>`),this.expressionParser=null,this.isApplyDisabled=!0,this.builderOpen=!1}postConstruct(){this.eAutocomplete.setListGenerator((e,t)=>this.generateAutocompleteListParams(t)).setValidator(()=>this.validateValue()).setForceLastSelection((e,t)=>this.forceLastSelection(e,t)).setInputAriaLabel(this.advancedFilterExpressionService.translate("ariaAdvancedFilterInput")).setListAriaLabel(this.advancedFilterExpressionService.translate("ariaLabelAdvancedFilterAutocomplete")),this.refresh(),this.addManagedListener(this.eAutocomplete,import_core13.AgAutocomplete.EVENT_VALUE_CHANGED,({value:e})=>this.onValueChanged(e)),this.addManagedListener(this.eAutocomplete,import_core13.AgAutocomplete.EVENT_VALUE_CONFIRMED,({isValid:e})=>this.onValueConfirmed(e)),this.addManagedListener(this.eAutocomplete,import_core13.AgAutocomplete.EVENT_OPTION_SELECTED,({position:e,updateEntry:t,autocompleteType:i})=>this.onOptionSelected(e,t,i)),this.addManagedListener(this.eAutocomplete,import_core13.AgAutocomplete.EVENT_VALID_CHANGED,({isValid:e,validationMessage:t})=>this.onValidChanged(e,t)),this.setupApplyButton(),this.setupBuilderButton()}refresh(){const e=this.advancedFilterService.getExpressionDisplayValue();this.eAutocomplete.setValue({value:e??"",position:e?.length,updateListOnlyIfOpen:!0})}setInputDisabled(e){this.eAutocomplete.setInputDisabled(e),import_core13._.setDisabled(this.eApplyFilterButton,e||this.isApplyDisabled)}getTooltipParams(){const e=super.getTooltipParams();return e.location="advancedFilter",e}setupApplyButton(){this.eApplyFilterButton.innerText=this.advancedFilterExpressionService.translate("advancedFilterApply"),this.activateTabIndex([this.eApplyFilterButton]),this.addManagedListener(this.eApplyFilterButton,"click",()=>this.onValueConfirmed(this.eAutocomplete.isValid())),import_core13._.setDisabled(this.eApplyFilterButton,this.isApplyDisabled)}setupBuilderButton(){this.eBuilderFilterButtonIcon.appendChild(import_core13._.createIconNoSpan("advancedFilterBuilder",this.gos)),this.eBuilderFilterButtonLabel.innerText=this.advancedFilterExpressionService.translate("advancedFilterBuilder"),this.activateTabIndex([this.eBuilderFilterButton]),this.addManagedListener(this.eBuilderFilterButton,"click",()=>this.openBuilder()),this.addManagedListener(this.advancedFilterService.getCtrl(),AdvancedFilterCtrl.EVENT_BUILDER_CLOSED,()=>this.closeBuilder())}onValueChanged(e){var t;e=import_core13._.makeNull(e),this.advancedFilterService.setExpressionDisplayValue(e),this.expressionParser=this.advancedFilterService.createExpressionParser(e);const i=(t=this.expressionParser)==null?void 0:t.parseExpression();i&&i!==e&&this.eAutocomplete.setValue({value:i,silent:!0,restoreFocus:!0})}onValueConfirmed(e){!e||this.isApplyDisabled||(import_core13._.setDisabled(this.eApplyFilterButton,!0),this.advancedFilterService.applyExpression(),this.filterManager.onFilterChanged({source:"advancedFilter"}))}onOptionSelected(e,t,i){const{updatedValue:r,updatedPosition:s,hideAutocomplete:a}=this.updateExpression(e,t,i);this.eAutocomplete.setValue({value:r,position:s,updateListOnlyIfOpen:a,restoreFocus:!0})}validateValue(){var e,t,i;return(e=this.expressionParser)!=null&&e.isValid()?null:(i=(t=this.expressionParser)==null?void 0:t.getValidationMessage())!=null?i:null}onValidChanged(e,t){this.isApplyDisabled=!e||this.advancedFilterService.isCurrentExpressionApplied(),import_core13._.setDisabled(this.eApplyFilterButton,this.isApplyDisabled),this.setTooltip({newTooltipText:t,showDelayOverride:1e3})}generateAutocompleteListParams(e){return this.expressionParser?this.expressionParser.getAutocompleteListParams(e):this.advancedFilterExpressionService.getDefaultAutocompleteListParams("")}updateExpression(e,t,i){var r,s;return this.advancedFilterExpressionService.updateAutocompleteCache(t,i),(s=(r=this.expressionParser)==null?void 0:r.updateExpression(e,t,i))!=null?s:this.advancedFilterService.getDefaultExpression(t)}forceLastSelection({key:e,displayValue:t},i){return!!i.toLocaleLowerCase().match(`^${(t??e).toLocaleLowerCase()}\\s*$`)}openBuilder(){this.builderOpen||(this.builderOpen=!0,import_core13._.setDisabled(this.eBuilderFilterButton,!0),this.advancedFilterService.getCtrl().toggleFilterBuilder("ui"))}closeBuilder(){this.builderOpen&&(this.builderOpen=!1,import_core13._.setDisabled(this.eBuilderFilterButton,!1),this.eBuilderFilterButton.focus())}};__decorateClass([(0,import_core13.RefSelector)("eAutocomplete")],AdvancedFilterComp.prototype,"eAutocomplete",2),__decorateClass([(0,import_core13.RefSelector)("eApplyFilterButton")],AdvancedFilterComp.prototype,"eApplyFilterButton",2),__decorateClass([(0,import_core13.RefSelector)("eBuilderFilterButton")],AdvancedFilterComp.prototype,"eBuilderFilterButton",2),__decorateClass([(0,import_core13.RefSelector)("eBuilderFilterButtonIcon")],AdvancedFilterComp.prototype,"eBuilderFilterButtonIcon",2),__decorateClass([(0,import_core13.RefSelector)("eBuilderFilterButtonLabel")],AdvancedFilterComp.prototype,"eBuilderFilterButtonLabel",2),__decorateClass([(0,import_core13.Autowired)("advancedFilterService")],AdvancedFilterComp.prototype,"advancedFilterService",2),__decorateClass([(0,import_core13.Autowired)("advancedFilterExpressionService")],AdvancedFilterComp.prototype,"advancedFilterExpressionService",2),__decorateClass([(0,import_core13.Autowired)("filterManager")],AdvancedFilterComp.prototype,"filterManager",2),__decorateClass([import_core13.PostConstruct],AdvancedFilterComp.prototype,"postConstruct",1);var import_core14=require("@ag-grid-community/core"),ADVANCED_FILTER_LOCALE_TEXT={ariaAdvancedFilterBuilderItem:e=>`${e[0]}. Level ${e[1]}. Press ENTER to edit.`,ariaAdvancedFilterBuilderItemValidation:e=>`${e[0]}. Level ${e[1]}. ${e[2]} Press ENTER to edit.`,ariaAdvancedFilterBuilderList:"Advanced Filter Builder List",ariaAdvancedFilterBuilderFilterItem:"Filter Condition",ariaAdvancedFilterBuilderGroupItem:"Filter Group",ariaAdvancedFilterBuilderColumn:"Column",ariaAdvancedFilterBuilderOption:"Option",ariaAdvancedFilterBuilderValue:"Value",ariaAdvancedFilterBuilderJoinOperator:"Join Operator",ariaAdvancedFilterInput:"Advanced Filter Input",ariaLabelAdvancedFilterAutocomplete:"Advanced Filter Autocomplete",advancedFilterContains:"contains",advancedFilterNotContains:"does not contain",advancedFilterTextEquals:"equals",advancedFilterTextNotEqual:"does not equal",advancedFilterStartsWith:"begins with",advancedFilterEndsWith:"ends with",advancedFilterBlank:"is blank",advancedFilterNotBlank:"is not blank",advancedFilterEquals:"=",advancedFilterNotEqual:"!=",advancedFilterGreaterThan:">",advancedFilterGreaterThanOrEqual:">=",advancedFilterLessThan:"<",advancedFilterLessThanOrEqual:"<=",advancedFilterTrue:"is true",advancedFilterFalse:"is false",advancedFilterAnd:"AND",advancedFilterOr:"OR",advancedFilterApply:"Apply",advancedFilterBuilder:"Builder",advancedFilterValidationMissingColumn:"Column is missing",advancedFilterValidationMissingOption:"Option is missing",advancedFilterValidationMissingValue:"Value is missing",advancedFilterValidationInvalidColumn:"Column not found",advancedFilterValidationInvalidOption:"Option not found",advancedFilterValidationMissingQuote:"Value is missing an end quote",advancedFilterValidationNotANumber:"Value is not a number",advancedFilterValidationInvalidDate:"Value is not a valid date",advancedFilterValidationMissingCondition:"Condition is missing",advancedFilterValidationJoinOperatorMismatch:"Join operators within a condition must be the same",advancedFilterValidationInvalidJoinOperator:"Join operator not found",advancedFilterValidationMissingEndBracket:"Missing end bracket",advancedFilterValidationExtraEndBracket:"Too many end brackets",advancedFilterValidationMessage:e=>`Expression has an error. ${e[0]} - ${e[1]}.`,advancedFilterValidationMessageAtEnd:e=>`Expression has an error. ${e[0]} at end of expression.`,advancedFilterBuilderTitle:"Advanced Filter",advancedFilterBuilderApply:"Apply",advancedFilterBuilderCancel:"Cancel",advancedFilterBuilderAddButtonTooltip:"Add Filter or Group",advancedFilterBuilderRemoveButtonTooltip:"Remove",advancedFilterBuilderMoveUpButtonTooltip:"Move Up",advancedFilterBuilderMoveDownButtonTooltip:"Move Down",advancedFilterBuilderAddJoin:"Add Group",advancedFilterBuilderAddCondition:"Add Filter",advancedFilterBuilderSelectColumn:"Select a column",advancedFilterBuilderSelectOption:"Select an option",advancedFilterBuilderEnterValue:"Enter a value...",advancedFilterBuilderValidationAlreadyApplied:"Current filter already applied.",advancedFilterBuilderValidationIncomplete:"Not all conditions are complete.",advancedFilterBuilderValidationSelectColumn:"Must select a column.",advancedFilterBuilderValidationSelectOption:"Must select an option.",advancedFilterBuilderValidationEnterValue:"Must enter a value."};function getSearchString(e,t,i){if(!e)return"";const r=i-t;return r?e.slice(0,e.length-r):e}function updateExpression(e,t,i,r,s,a,n){const o=i+(!e.length||n?0:1);let l=0;return s&&(e[o]===" "?l=1:(r+=" ",a&&(r+='"'))),{updatedValue:e.slice(0,t)+r+e.slice(o),updatedPosition:t+r.length+l}}function findStartPosition(e,t,i){let r=t;for(;r<i&&e[r]===" ";)r++;return r}function findEndPosition(e,t,i,r){let s=t,a=!1;for(;s<e.length;){const n=e[s];if(n==="("){r&&e[s-1]===" "?a=!0:s=s-1;break}else if(n===" "||i&&n===")"){s=s-1;break}s++}return{endPosition:s,isEmpty:a}}function checkAndUpdateExpression(e,t,i,r){i!==t&&(e.expression=updateExpression(e.expression,r-t.length+1,r,i).updatedValue)}function escapeQuotes(e){return e.replace(/(['"])/,"\\$1")}var ColumnParser=class{constructor(e,t){this.params=e,this.startPosition=t,this.type="column",this.valid=!0,this.hasStartChar=!1,this.hasEndChar=!1,this.colName=""}parse(e,t){if(e===ColFilterExpressionParser.COL_START_CHAR&&!this.colName)this.hasStartChar=!0;else if(e===ColFilterExpressionParser.COL_END_CHAR&&this.hasStartChar){if(this.parseColumn(!1,t))return this.hasEndChar=!0,!1;this.colName+=e}else this.colName+=e}getDisplayValue(){return(this.hasStartChar?ColFilterExpressionParser.COL_START_CHAR:"")+this.colName+(this.hasEndChar?ColFilterExpressionParser.COL_END_CHAR:"")}getColId(){return this.colId}complete(e){this.parseColumn(!0,e)}getValidationError(){var e;return this.valid?null:{message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationInvalidColumn"),startPosition:this.startPosition,endPosition:(e=this.endPosition)!=null?e:this.params.expression.length-1}}parseColumn(e,t){var i;this.endPosition=t;const r=this.params.advancedFilterExpressionService.getColId(this.colName);return r&&this.hasStartChar&&(this.colId=r.colId,checkAndUpdateExpression(this.params,this.colName,r.columnName,t-1),this.colName=r.columnName,this.column=this.params.columnModel.getPrimaryColumn(this.colId),this.column)?(this.baseCellDataType=(i=this.params.dataTypeService.getBaseDataType(this.column))!=null?i:"text",!0):(e&&(this.valid=!1),this.baseCellDataType="text",!1)}},OperatorParser=class{constructor(e,t,i){this.params=e,this.startPosition=t,this.baseCellDataType=i,this.type="operator",this.valid=!0,this.expectedNumOperands=0,this.operator=""}parse(e,t){if(e===" "||e===")"){if(this.parseOperator(!1,t-1))return!0;this.operator+=e}else this.operator+=e}complete(e){this.parseOperator(!0,e)}getValidationError(){var e;return this.valid?null:{message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationInvalidOption"),startPosition:this.startPosition,endPosition:(e=this.endPosition)!=null?e:this.params.expression.length-1}}getDisplayValue(){return this.operator}getOperatorKey(){return this.parsedOperator}parseOperator(e,t){const i=this.params.advancedFilterExpressionService.getDataTypeExpressionOperator(this.baseCellDataType),r=i.findOperator(this.operator);if(this.endPosition=t,r){this.parsedOperator=r;const a=i.operators[r];this.expectedNumOperands=a.numOperands;const n=a.displayValue;return checkAndUpdateExpression(this.params,this.operator,n,t),this.operator=n,!0}return(e||!(r===null))&&(this.valid=!1),!1}},OperandParser=class{constructor(e,t,i,r){this.params=e,this.startPosition=t,this.baseCellDataType=i,this.column=r,this.type="operand",this.valid=!0,this.operand="",this.validationMessage=null}parse(e,t){if(e===" ")if(this.quotes)this.operand+=e;else return this.parseOperand(!1,t),!0;else if(e===")"){if(this.baseCellDataType==="number"||!this.quotes)return this.parseOperand(!1,t-1),!0;this.operand+=e}else if(!this.operand&&!this.quotes&&(e==="'"||e==='"'))this.quotes=e;else{if(this.quotes&&e===this.quotes)return this.parseOperand(!1,t),!1;this.operand+=e}}complete(e){this.parseOperand(!0,e)}getValidationError(){var e;return this.validationMessage?{message:this.validationMessage,startPosition:this.startPosition,endPosition:(e=this.endPosition)!=null?e:this.params.expression.length-1}:null}getRawValue(){return this.operand}getModelValue(){return this.modelValue}parseOperand(e,t){const{advancedFilterExpressionService:i}=this.params;if(this.endPosition=t,this.modelValue=this.operand,e&&this.quotes)this.valid=!1,this.validationMessage=i.translate("advancedFilterValidationMissingQuote");else if(this.modelValue==="")this.valid=!1,this.validationMessage=i.translate("advancedFilterValidationMissingValue");else{const r=i.getOperandModelValue(this.operand,this.baseCellDataType,this.column);switch(r!=null&&(this.modelValue=r),this.baseCellDataType){case"number":(this.quotes||isNaN(this.modelValue))&&(this.valid=!1,this.validationMessage=i.translate("advancedFilterValidationNotANumber"));break;case"date":case"dateString":r==null&&(this.valid=!1,this.validationMessage=i.translate("advancedFilterValidationInvalidDate"));break}}}},ColFilterExpressionParser=class{constructor(e,t){this.params=e,this.startPosition=t,this.isAwaiting=!0}parseExpression(){var e,t;let i=this.startPosition;const{expression:r}=this.params;for(;i<r.length;){const s=r[i];if(!(s===" "&&this.isAwaiting)){if(this.isAwaiting=!1,!this.parser){let n;this.columnParser?this.operatorParser?(this.operandParser=new OperandParser(this.params,i,this.columnParser.baseCellDataType,this.columnParser.column),n=this.operandParser):(this.operatorParser=new OperatorParser(this.params,i,this.columnParser.baseCellDataType),n=this.operatorParser):(this.columnParser=new ColumnParser(this.params,i),n=this.columnParser),this.parser=n}const a=this.parser.parse(s,i);if(a!=null){if(this.isComplete())return this.returnEndPosition(a?i-1:i,!0);this.parser=void 0,this.isAwaiting=!0}}i++}return(t=(e=this.parser)==null?void 0:e.complete)==null||t.call(e,i-1),this.returnEndPosition(i)}isValid(){return this.isComplete()&&this.columnParser.valid&&this.operatorParser.valid&&(!this.operandParser||this.operandParser.valid)}getValidationError(){var e,t,i,r,s;const a=(s=(i=(e=this.columnParser)==null?void 0:e.getValidationError())!=null?i:(t=this.operatorParser)==null?void 0:t.getValidationError())!=null?s:(r=this.operandParser)==null?void 0:r.getValidationError();if(a)return a;const n=this.params.expression.length;let o;return this.columnParser?this.operatorParser?this.operatorParser.expectedNumOperands&&!this.operandParser&&(o="advancedFilterValidationMissingValue"):o="advancedFilterValidationMissingOption":o="advancedFilterValidationMissingColumn",o?{message:this.params.advancedFilterExpressionService.translate(o),startPosition:n,endPosition:n}:null}getFunctionString(e){return this.getFunctionCommon(e,(t,i,r,s)=>{const a=escapeQuotes(r),n=t==null?"":`, params.operands[${t}]`;return`params.operators[${i}].evaluator(expressionProxy.getValue('${a}', node), node, params.evaluatorParams[${s}]${n})`})}getFunctionParsed(e){return this.getFunctionCommon(e,(t,i,r,s)=>(a,n,o)=>o.operators[i].evaluator(a.getValue(r,n),n,o.evaluatorParams[s],t==null?void 0:o.operands[t]))}getAutocompleteListParams(e){if(this.isColumnPosition(e))return this.getColumnAutocompleteListParams(e);if(this.isOperatorPosition(e))return this.getOperatorAutocompleteListParams(e);if(!this.isBeyondEndPosition(e))return{enabled:!1}}updateExpression(e,t,i){var r,s,a,n,o;const{expression:l}=this.params;if(this.isColumnPosition(e))return updateExpression(this.params.expression,this.startPosition,(r=this.columnParser)!=null&&r.getColId()?this.columnParser.endPosition:findEndPosition(l,e).endPosition,this.params.advancedFilterExpressionService.getColumnValue(t),!0);if(this.isOperatorPosition(e)){const d=this.getBaseCellDataTypeFromOperatorAutocompleteType(i),u=this.hasOperand(d,t.key),p=u&&this.doesOperandNeedQuotes(d);let h;if(((s=this.operatorParser)==null?void 0:s.startPosition)!=null&&e<this.operatorParser.startPosition)h=updateExpression(l,e,e,(a=t.displayValue)!=null?a:t.key,u,p);else{let c,m=!1;if((n=this.operatorParser)!=null&&n.getOperatorKey())c=this.operatorParser.endPosition;else{const{endPosition:g,isEmpty:v}=findEndPosition(l,e,!0,!0);c=g,m=v}h=updateExpression(l,findStartPosition(l,this.columnParser.endPosition+1,c),c,(o=t.displayValue)!=null?o:t.key,u,p,m)}return __spreadProps(__spreadValues({},h),{hideAutocomplete:!u})}return null}getModel(){const e=this.columnParser.getColId(),t={filterType:this.columnParser.baseCellDataType,colId:e,type:this.operatorParser.getOperatorKey()};return this.operatorParser.expectedNumOperands&&(t.filter=this.operandParser.getModelValue()),t}getFunctionCommon(e,t){var i,r;const s=this.columnParser.getColId(),a=(i=this.operatorParser)==null?void 0:i.getOperatorKey(),{operators:n,evaluatorParams:o,operands:l}=e,d=this.params.advancedFilterExpressionService.getExpressionOperator(this.columnParser.baseCellDataType,a),u=this.addToListAndGetIndex(n,d),p=this.params.advancedFilterExpressionService.getExpressionEvaluatorParams(s),h=this.addToListAndGetIndex(o,p),c=((r=this.operatorParser)==null?void 0:r.expectedNumOperands)===0?void 0:this.addToListAndGetIndex(l,this.getOperandValue());return t(c,u,s,h)}getOperandValue(){let e=this.operandParser.getRawValue();const{baseCellDataType:t,column:i}=this.columnParser;switch(t){case"number":e=Number(e);break;case"date":case"dateString":e=this.params.valueService.parseValue(i,null,e,void 0);break}return t==="dateString"?this.params.dataTypeService.getDateParserFunction(i)(e):e}isComplete(){return!!(this.operatorParser&&(!this.operatorParser.expectedNumOperands||this.operatorParser.expectedNumOperands&&this.operandParser))}isColumnPosition(e){return!this.columnParser||this.columnParser.endPosition==null||e<=this.columnParser.endPosition+1}isOperatorPosition(e){return!this.operatorParser||this.operatorParser.endPosition==null||e<=this.operatorParser.endPosition+1}isBeyondEndPosition(e){return this.isComplete()&&this.endPosition!=null&&e>this.endPosition+1&&this.endPosition+1<this.params.expression.length}returnEndPosition(e,t){return this.endPosition=t?e:e-1,e}getColumnAutocompleteListParams(e){return this.params.advancedFilterExpressionService.generateAutocompleteListParams(this.params.advancedFilterExpressionService.getColumnAutocompleteEntries(),"column",this.getColumnSearchString(e))}getColumnSearchString(e){var t,i,r,s,a;const n=(i=(t=this.columnParser)==null?void 0:t.getDisplayValue())!=null?i:"",o=getSearchString(n,e,((r=this.columnParser)==null?void 0:r.endPosition)==null?this.params.expression.length:this.columnParser.endPosition+1),l=((s=this.columnParser)==null?void 0:s.hasStartChar)&&o.length>0,d=((a=this.columnParser)==null?void 0:a.hasEndChar)&&o.length===n.length+2;return l?o.slice(1,d?-1:void 0):o}getOperatorAutocompleteListParams(e){var t,i,r,s,a;const n=(t=this.columnParser)==null?void 0:t.column;if(!n)return{enabled:!1};const o=this.columnParser.baseCellDataType,l=((i=this.operatorParser)==null?void 0:i.startPosition)!=null&&e<this.operatorParser.startPosition?"":getSearchString((s=(r=this.operatorParser)==null?void 0:r.getDisplayValue())!=null?s:"",e,((a=this.operatorParser)==null?void 0:a.endPosition)==null?this.params.expression.length:this.operatorParser.endPosition+1);return this.params.advancedFilterExpressionService.generateAutocompleteListParams(this.params.advancedFilterExpressionService.getOperatorAutocompleteEntries(n,o),`operator-${o}`,l)}getBaseCellDataTypeFromOperatorAutocompleteType(e){return e?.replace("operator-","")}hasOperand(e,t){var i,r;return!e||!t||((r=(i=this.params.advancedFilterExpressionService.getExpressionOperator(e,t))==null?void 0:i.numOperands)!=null?r:0)>0}doesOperandNeedQuotes(e){return e!=="number"}addToListAndGetIndex(e,t){const i=e.length;return e.push(t),i}};ColFilterExpressionParser.COL_START_CHAR="[",ColFilterExpressionParser.COL_END_CHAR="]";function findMatch(e,t,i){let r=!1;const s=e.toLocaleLowerCase(),a=s+" ",n=Object.entries(t).find(([o,l])=>{const d=i(l).toLocaleLowerCase();return d.startsWith(a)&&(r=!0),d===s});return n?n[0]:r?null:void 0}function getEntries(e,t){return(t??Object.keys(e)).map(r=>({key:r,displayValue:e[r].displayValue}))}var TextFilterExpressionOperators=class{constructor(e){this.params=e,this.initOperators()}getEntries(e){return getEntries(this.operators,e)}findOperator(e){return findMatch(e,this.operators,({displayValue:t})=>t)}initOperators(){const{translate:e}=this.params;this.operators={contains:{displayValue:e("advancedFilterContains"),evaluator:(t,i,r,s)=>this.evaluateExpression(t,i,r,s,!1,(a,n)=>a.includes(n)),numOperands:1},notContains:{displayValue:e("advancedFilterNotContains"),evaluator:(t,i,r,s)=>this.evaluateExpression(t,i,r,s,!0,(a,n)=>!a.includes(n)),numOperands:1},equals:{displayValue:e("advancedFilterTextEquals"),evaluator:(t,i,r,s)=>this.evaluateExpression(t,i,r,s,!1,(a,n)=>a===n),numOperands:1},notEqual:{displayValue:e("advancedFilterTextNotEqual"),evaluator:(t,i,r,s)=>this.evaluateExpression(t,i,r,s,!0,(a,n)=>a!=n),numOperands:1},startsWith:{displayValue:e("advancedFilterStartsWith"),evaluator:(t,i,r,s)=>this.evaluateExpression(t,i,r,s,!1,(a,n)=>a.startsWith(n)),numOperands:1},endsWith:{displayValue:e("advancedFilterEndsWith"),evaluator:(t,i,r,s)=>this.evaluateExpression(t,i,r,s,!1,(a,n)=>a.endsWith(n)),numOperands:1},blank:{displayValue:e("advancedFilterBlank"),evaluator:t=>t==null||typeof t=="string"&&t.trim().length===0,numOperands:0},notBlank:{displayValue:e("advancedFilterNotBlank"),evaluator:t=>t!=null&&(typeof t!="string"||t.trim().length>0),numOperands:0}}}evaluateExpression(e,t,i,r,s,a){return e==null?s:i.caseSensitive?a(i.valueConverter(e,t),r):a(i.valueConverter(e,t).toLocaleLowerCase(),r.toLocaleLowerCase())}},ScalarFilterExpressionOperators=class{constructor(e){this.params=e,this.initOperators()}getEntries(e){return getEntries(this.operators,e)}findOperator(e){return findMatch(e,this.operators,({displayValue:t})=>t)}initOperators(){const{translate:e,equals:t}=this.params;this.operators={equals:{displayValue:e("advancedFilterEquals"),evaluator:(i,r,s,a)=>this.evaluateSingleOperandExpression(i,r,s,a,!!s.includeBlanksInEquals,t),numOperands:1},notEqual:{displayValue:e("advancedFilterNotEqual"),evaluator:(i,r,s,a)=>this.evaluateSingleOperandExpression(i,r,s,a,!!s.includeBlanksInEquals,(n,o)=>!t(n,o)),numOperands:1},greaterThan:{displayValue:e("advancedFilterGreaterThan"),evaluator:(i,r,s,a)=>this.evaluateSingleOperandExpression(i,r,s,a,!!s.includeBlanksInGreaterThan,(n,o)=>n>o),numOperands:1},greaterThanOrEqual:{displayValue:e("advancedFilterGreaterThanOrEqual"),evaluator:(i,r,s,a)=>this.evaluateSingleOperandExpression(i,r,s,a,!!s.includeBlanksInGreaterThan,(n,o)=>n>=o),numOperands:1},lessThan:{displayValue:e("advancedFilterLessThan"),evaluator:(i,r,s,a)=>this.evaluateSingleOperandExpression(i,r,s,a,!!s.includeBlanksInLessThan,(n,o)=>n<o),numOperands:1},lessThanOrEqual:{displayValue:e("advancedFilterLessThanOrEqual"),evaluator:(i,r,s,a)=>this.evaluateSingleOperandExpression(i,r,s,a,!!s.includeBlanksInLessThan,(n,o)=>n<=o),numOperands:1},blank:{displayValue:e("advancedFilterBlank"),evaluator:i=>i==null,numOperands:0},notBlank:{displayValue:e("advancedFilterNotBlank"),evaluator:i=>i!=null,numOperands:0}}}evaluateSingleOperandExpression(e,t,i,r,s,a){return e==null?s:a(i.valueConverter(e,t),r)}},BooleanFilterExpressionOperators=class{constructor(e){this.params=e,this.initOperators()}getEntries(e){return getEntries(this.operators,e)}findOperator(e){return findMatch(e,this.operators,({displayValue:t})=>t)}initOperators(){const{translate:e}=this.params;this.operators={true:{displayValue:e("advancedFilterTrue"),evaluator:t=>!!t,numOperands:0},false:{displayValue:e("advancedFilterFalse"),evaluator:t=>t===!1,numOperands:0},blank:{displayValue:e("advancedFilterBlank"),evaluator:t=>t==null,numOperands:0},notBlank:{displayValue:e("advancedFilterNotBlank"),evaluator:t=>t!=null,numOperands:0}}}},AdvancedFilterExpressionService=class extends import_core14.BeanStub{constructor(){super(...arguments),this.columnNameToIdMap={},this.columnAutocompleteEntries=null,this.expressionEvaluatorParams={}}postConstruct(){this.expressionJoinOperators=this.generateExpressionJoinOperators(),this.expressionOperators=this.generateExpressionOperators()}parseJoinOperator(e){var t;const{type:i}=e;return(t=this.expressionJoinOperators[i])!=null?t:i}getColumnDisplayValue(e){const{colId:t}=e,r=this.getColumnAutocompleteEntries().find(({key:a})=>a===t);let s;return r?(s=r.displayValue,this.columnNameToIdMap[s.toLocaleUpperCase()]={colId:t,columnName:s}):s=t,s}getOperatorDisplayValue(e){var t,i;return(i=(t=this.getExpressionOperator(e.filterType,e.type))==null?void 0:t.displayValue)!=null?i:e.type}getOperandModelValue(e,t,i){var r;switch(t){case"number":return import_core14._.exists(e)?Number(e):null;case"date":return import_core14._.serialiseDate(this.valueService.parseValue(i,null,e,void 0),!1);case"dateString":const s=this.valueService.parseValue(i,null,e,void 0);return import_core14._.serialiseDate((r=this.dataTypeService.getDateParserFunction(i)(s))!=null?r:null,!1)}return e}getOperandDisplayValue(e,t){var i,r;const{colId:s,filter:a}=e,n=this.columnModel.getPrimaryColumn(s);let o="";if(a!=null){let l;switch(e.filterType){case"number":l=(i=import_core14._.toStringOrNull(a))!=null?i:"";break;case"date":const d=import_core14._.parseDateTimeFromString(a);l=n?this.valueService.formatValue(n,null,d):null;break;case"dateString":const u=import_core14._.parseDateTimeFromString(a),p=n?this.dataTypeService.getDateFormatterFunction(n)(u??void 0):null;l=n?this.valueService.formatValue(n,null,p):null;break}e.filterType!=="number"&&(l=(r=l??import_core14._.toStringOrNull(a))!=null?r:"",t||(l=`"${l}"`)),o=t?l:` ${l}`}return o}parseColumnFilterModel(e){var t,i;const r=(t=this.getColumnDisplayValue(e))!=null?t:"",s=(i=this.getOperatorDisplayValue(e))!=null?i:"",a=this.getOperandDisplayValue(e);return`[${r}] ${s}${a}`}updateAutocompleteCache(e,t){if(t==="column"){const{key:i,displayValue:r}=e;this.columnNameToIdMap[e.displayValue.toLocaleUpperCase()]={colId:i,columnName:r}}}translate(e,t){let i=ADVANCED_FILTER_LOCALE_TEXT[e];return typeof i=="function"&&(i=i(t)),this.localeService.getLocaleTextFunc()(e,i,t)}generateAutocompleteListParams(e,t,i){return{enabled:!0,type:t,searchString:i,entries:e}}getColumnAutocompleteEntries(){var e;if(this.columnAutocompleteEntries)return this.columnAutocompleteEntries;const t=(e=this.columnModel.getAllPrimaryColumns())!=null?e:[],i=[],r=this.gos.get("includeHiddenColumnsInAdvancedFilter");return t.forEach(s=>{s.getColDef().filter&&(r||s.isVisible()||s.isRowGroupActive())&&i.push({key:s.getColId(),displayValue:this.columnModel.getDisplayNameForColumn(s,"advancedFilter")})}),i.sort((s,a)=>{var n,o;const l=(n=s.displayValue)!=null?n:"",d=(o=a.displayValue)!=null?o:"";return l<d?-1:d>l?1:0}),i}getOperatorAutocompleteEntries(e,t){const i=this.getActiveOperators(e);return this.getDataTypeExpressionOperator(t).getEntries(i)}getJoinOperatorAutocompleteEntries(){return Object.entries(this.expressionJoinOperators).map(([e,t])=>({key:e,displayValue:t}))}getDefaultAutocompleteListParams(e){return this.generateAutocompleteListParams(this.getColumnAutocompleteEntries(),"column",e)}getDataTypeExpressionOperator(e){return this.expressionOperators[e]}getExpressionOperator(e,t){var i,r;return(r=(i=this.getDataTypeExpressionOperator(e))==null?void 0:i.operators)==null?void 0:r[t]}getExpressionJoinOperators(){return this.expressionJoinOperators}getColId(e){const t=e.toLocaleUpperCase(),i=this.columnNameToIdMap[t];if(i)return i;const s=this.getColumnAutocompleteEntries().find(({displayValue:a})=>a.toLocaleUpperCase()===t);if(s){const{key:a,displayValue:n}=s,o={colId:a,columnName:n};return this.columnNameToIdMap[t]=o,o}return null}getExpressionEvaluatorParams(e){let t=this.expressionEvaluatorParams[e];if(t)return t;const i=this.columnModel.getPrimaryColumn(e);if(!i)return{valueConverter:a=>a};switch(this.dataTypeService.getBaseDataType(i)){case"dateString":t={valueConverter:this.dataTypeService.getDateParserFunction(i)};break;case"object":i.getColDef().filterValueGetter?t={valueConverter:a=>a}:t={valueConverter:(a,n)=>{var o;return(o=this.valueService.formatValue(i,n,a))!=null?o:typeof a.toString=="function"?a.toString():""}};break;case"text":case void 0:t={valueConverter:a=>import_core14._.toStringOrNull(a)};break;default:t={valueConverter:a=>a};break}const{filterParams:s}=i.getColDef();return s&&["caseSensitive","includeBlanksInEquals","includeBlanksInLessThan","includeBlanksInGreaterThan"].forEach(a=>{const n=s[a];n&&(t[a]=n)}),this.expressionEvaluatorParams[e]=t,t}getColumnDetails(e){var t,i;const r=(t=this.columnModel.getPrimaryColumn(e))!=null?t:void 0,s=(i=r?this.dataTypeService.getBaseDataType(r):void 0)!=null?i:"text";return{column:r,baseCellDataType:s}}generateExpressionOperators(){const e=(t,i)=>this.translate(t,i);return{text:new TextFilterExpressionOperators({translate:e}),boolean:new BooleanFilterExpressionOperators({translate:e}),object:new TextFilterExpressionOperators({translate:e}),number:new ScalarFilterExpressionOperators({translate:e,equals:(t,i)=>t===i}),date:new ScalarFilterExpressionOperators({translate:e,equals:(t,i)=>t.getTime()===i.getTime()}),dateString:new ScalarFilterExpressionOperators({translate:e,equals:(t,i)=>t.getTime()===i.getTime()})}}getColumnValue({displayValue:e}){return`${ColFilterExpressionParser.COL_START_CHAR}${e}${ColFilterExpressionParser.COL_END_CHAR}`}generateExpressionJoinOperators(){return{AND:this.translate("advancedFilterAnd"),OR:this.translate("advancedFilterOr")}}getActiveOperators(e){var t;const i=(t=e.getColDef().filterParams)==null?void 0:t.filterOptions;return i&&i.every(s=>typeof s=="string")?i:void 0}resetColumnCaches(){this.columnAutocompleteEntries=null,this.columnNameToIdMap={},this.expressionEvaluatorParams={}}};__decorateClass([(0,import_core14.Autowired)("valueService")],AdvancedFilterExpressionService.prototype,"valueService",2),__decorateClass([(0,import_core14.Autowired)("columnModel")],AdvancedFilterExpressionService.prototype,"columnModel",2),__decorateClass([(0,import_core14.Autowired)("dataTypeService")],AdvancedFilterExpressionService.prototype,"dataTypeService",2),__decorateClass([import_core14.PostConstruct],AdvancedFilterExpressionService.prototype,"postConstruct",1),AdvancedFilterExpressionService=__decorateClass([(0,import_core14.Bean)("advancedFilterExpressionService")],AdvancedFilterExpressionService);var import_core15=require("@ag-grid-community/core"),OperatorParser2=class{constructor(e){this.params=e,this.operators=[],this.operatorStartPositions=[],this.operatorEndPositions=[],this.activeOperator=0,this.validationError=null}parseExpression(e){this.operators.push(""),this.operatorStartPositions.push(e),this.operatorEndPositions.push(void 0);const{expression:t}=this.params;for(;e<t.length;){const i=t[e];if(i===" "){if(this.parseOperator(e-1))return this.activeOperator++,e-1;this.operators[this.activeOperator]+=i}else this.operators[this.activeOperator]+=i;e++}return this.parseOperator(e-1),e}isValid(){return!this.validationError&&(!this.operators.length||!!this.parsedOperator)}getValidationError(){return this.validationError}getFunction(){return this.parsedOperator==="OR"?"||":"&&"}getModel(){return this.parsedOperator==="OR"?"OR":"AND"}getAutocompleteListParams(e,t){let i;if(t==null)i="";else{const s=this.operators[t],a=this.operatorEndPositions[t];i=getSearchString(s,e,a==null?this.params.expression.length:a+1)}let r=this.params.advancedFilterExpressionService.getJoinOperatorAutocompleteEntries();return(t||t==null&&this.activeOperator)&&(r=r.filter(({key:s})=>s===this.parsedOperator)),this.params.advancedFilterExpressionService.generateAutocompleteListParams(r,"join",i)}updateExpression(e,t,i){var r,s;let{expression:a}=this.params;const n=(r=t.displayValue)!=null?r:t.key;if(i===0)for(let d=this.operatorEndPositions.length-1;d>0;d--){const u=this.operatorEndPositions[d];u!=null&&(a=updateExpression(a,this.operatorStartPositions[d],u,n).updatedValue)}const o=this.operatorStartPositions.length>i?this.operatorStartPositions[i]:e,l=(s=this.operatorEndPositions.length>i?this.operatorEndPositions[i]:void 0)!=null?s:findEndPosition(a,e,!0).endPosition;return updateExpression(a,o,l,n,!0)}getNumOperators(){return this.operators.length}getLastOperatorEndPosition(){return this.operatorEndPositions[this.operatorEndPositions.length-1]}parseOperator(e){const t=this.operators.length>this.activeOperator?this.operators[this.activeOperator]:"",i=this.params.advancedFilterExpressionService.getExpressionJoinOperators(),r=findMatch(t,i,s=>s);if(r){this.operatorEndPositions[this.activeOperator]=e;const s=i[r];if(this.activeOperator){if(r!==this.parsedOperator)return this.validationError||(this.validationError={message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationJoinOperatorMismatch"),startPosition:e-t.length+1,endPosition:e}),!1}else this.parsedOperator=r;return t!==s&&(checkAndUpdateExpression(this.params,t,s,e),this.operators[this.activeOperator]=s),!0}else return r===null?!1:(this.validationError||(this.validationError={message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationInvalidJoinOperator"),startPosition:e-t.length+1,endPosition:e}),!0)}},JoinFilterExpressionParser=class y{constructor(t,i){this.params=t,this.startPosition=i,this.expectingExpression=!0,this.expectingOperator=!1,this.expressionParsers=[],this.operatorParser=new OperatorParser2(this.params),this.missingEndBracket=!1,this.extraEndBracket=!1}parseExpression(){let t=this.startPosition;const{expression:i}=this.params;for(;t<i.length;){const r=i[t];if(r==="("&&!this.expectingOperator){const s=new y(this.params,t+1);t=s.parseExpression(),this.expressionParsers.push(s),this.expectingExpression=!1,this.expectingOperator=!0}else{if(r===")")return this.endPosition=t-1,this.startPosition===0&&(this.extraEndBracket=!0),t;if(r!==" ")if(this.expectingExpression){const s=new ColFilterExpressionParser(this.params,t);t=s.parseExpression(),this.expressionParsers.push(s),this.expectingExpression=!1,this.expectingOperator=!0}else this.expectingOperator&&(t=this.operatorParser.parseExpression(t),this.expectingOperator=!1,this.expectingExpression=!0)}t++}return this.startPosition>0&&(this.missingEndBracket=!0),t}isValid(){return!this.missingEndBracket&&!this.extraEndBracket&&this.expressionParsers.length===this.operatorParser.getNumOperators()+1&&this.operatorParser.isValid()&&this.expressionParsers.every(t=>t.isValid())}getValidationError(){const t=this.operatorParser.getValidationError();for(let r=0;r<this.expressionParsers.length;r++){const s=this.expressionParsers[r].getValidationError();if(s)return t&&t.startPosition<s.startPosition?t:s}if(t)return t;if(this.extraEndBracket)return{message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationExtraEndBracket"),startPosition:this.endPosition+1,endPosition:this.endPosition+1};let i;return this.expressionParsers.length===this.operatorParser.getNumOperators()?i="advancedFilterValidationMissingCondition":this.missingEndBracket&&(i="advancedFilterValidationMissingEndBracket"),i?{message:this.params.advancedFilterExpressionService.translate(i),startPosition:this.params.expression.length,endPosition:this.params.expression.length}:null}getFunctionString(t){const i=this.expressionParsers.length>1,r=this.expressionParsers.map(s=>s.getFunctionString(t)).join(` ${this.operatorParser.getFunction()} `);return i?`(${r})`:r}getFunctionParsed(t){const i=this.operatorParser.getFunction(),r=this.expressionParsers.map(a=>a.getFunctionParsed(t)),s=i==="&&"?"every":"some";return(a,n,o)=>r[s](l=>l(a,n,o))}getAutocompleteListParams(t){if(this.endPosition!=null&&t>this.endPosition+1)return;if(!this.expressionParsers.length)return this.getColumnAutocompleteListParams();const i=this.getExpressionParserIndex(t);if(i==null)return this.params.expression[t]==="("?{enabled:!1}:this.getColumnAutocompleteListParams();const s=this.expressionParsers[i].getAutocompleteListParams(t);if(!s){if(i<this.expressionParsers.length-1)return this.operatorParser.getAutocompleteListParams(t,i);if(this.expressionParsers.length===this.operatorParser.getNumOperators()){const a=this.operatorParser.getLastOperatorEndPosition();return a==null||t<=a+1?this.operatorParser.getAutocompleteListParams(t,this.operatorParser.getNumOperators()-1):this.getColumnAutocompleteListParams()}return this.params.expression[t-1]===")"?{enabled:!1}:this.operatorParser.getAutocompleteListParams(t)}return s}updateExpression(t,i,r){var s;const a=this.params.expression,n=this.getExpressionParserIndex(t);if(n==null){const d=r==="column"?this.params.advancedFilterExpressionService.getColumnValue(i):(s=i.displayValue)!=null?s:i.key;return updateExpression(a,this.startPosition,this.startPosition,d,!0)}const l=this.expressionParsers[n].updateExpression(t,i,r);return l??(r==="column"?updateExpression(a,t,a.length-1,this.params.advancedFilterExpressionService.getColumnValue(i),!0):this.endPosition!=null&&t>this.endPosition+1?null:this.operatorParser.updateExpression(t,i,n))}getModel(){return this.expressionParsers.length>1?{filterType:"join",type:this.operatorParser.getModel(),conditions:this.expressionParsers.map(t=>t.getModel())}:this.expressionParsers[0].getModel()}getColumnAutocompleteListParams(){return this.params.advancedFilterExpressionService.generateAutocompleteListParams(this.params.advancedFilterExpressionService.getColumnAutocompleteEntries(),"column","")}getExpressionParserIndex(t){let i;for(let r=0;r<this.expressionParsers.length&&!(this.expressionParsers[r].startPosition>t);r++)i=r;return i}},FilterExpressionParser=class{constructor(e){this.params=e,this.valid=!1}parseExpression(){this.joinExpressionParser=new JoinFilterExpressionParser(this.params,0);const e=this.joinExpressionParser.parseExpression();return this.valid=e>=this.params.expression.length-1&&this.joinExpressionParser.isValid(),this.params.expression}isValid(){return this.valid}getValidationMessage(){const e=this.joinExpressionParser.getValidationError();if(!e)return null;const{message:t,startPosition:i,endPosition:r}=e;return i<this.params.expression.length?this.params.advancedFilterExpressionService.translate("advancedFilterValidationMessage",[t,this.params.expression.slice(i,r+1).trim()]):this.params.advancedFilterExpressionService.translate("advancedFilterValidationMessageAtEnd",[t])}getFunctionString(){const e=this.createFunctionParams();return{functionString:`return ${this.joinExpressionParser.getFunctionString(e)};`,params:e}}getFunctionParsed(){const e=this.createFunctionParams();return{expressionFunction:this.joinExpressionParser.getFunctionParsed(e),params:e}}getAutocompleteListParams(e){var t;return(t=this.joinExpressionParser.getAutocompleteListParams(e))!=null?t:{enabled:!1}}updateExpression(e,t,i){return this.joinExpressionParser.updateExpression(e,t,i)}getModel(){return this.isValid()?this.joinExpressionParser.getModel():null}createFunctionParams(){return{operands:[],operators:[],evaluatorParams:[]}}},AdvancedFilterService=class extends import_core15.BeanStub{constructor(){super(...arguments),this.appliedExpression=null,this.expression=null,this.isValid=!0}postConstruct(){this.setEnabled(this.gos.get("enableAdvancedFilter"),!0),this.ctrl=this.createManagedBean(new AdvancedFilterCtrl(this.enabled)),this.expressionProxy={getValue:(e,t)=>{const i=this.columnModel.getPrimaryColumn(e);return i?this.valueService.getValue(i,t,!0):void 0}},this.addManagedPropertyListener("enableAdvancedFilter",e=>this.setEnabled(!!e.currentValue)),this.addManagedListener(this.eventService,import_core15.Events.EVENT_NEW_COLUMNS_LOADED,e=>this.onNewColumnsLoaded(e)),this.addManagedPropertyListener("includeHiddenColumnsInAdvancedFilter",()=>this.updateValidity())}isEnabled(){return this.enabled}isFilterPresent(){return!!this.expressionFunction}doesFilterPass(e){return this.expressionFunction(this.expressionProxy,e,this.expressionParams)}getModel(){var e;const t=this.createExpressionParser(this.appliedExpression);return t?.parseExpression(),(e=t?.getModel())!=null?e:null}setModel(e){const t=(r,s)=>{if(r.filterType==="join"){const a=this.advancedFilterExpressionService.parseJoinOperator(r),n=r.conditions.map(o=>t(o)).filter(o=>import_core15._.exists(o)).join(` ${a} `);return s||r.conditions.length<=1?n:`(${n})`}else return this.advancedFilterExpressionService.parseColumnFilterModel(r)},i=e?t(e,!0):null;this.setExpressionDisplayValue(i),this.applyExpression(),this.ctrl.refreshComp(),this.ctrl.refreshBuilderComp()}getExpressionDisplayValue(){return this.expression}setExpressionDisplayValue(e){this.expression=e}isCurrentExpressionApplied(){return this.appliedExpression===this.expression}createExpressionParser(e){return e?new FilterExpressionParser({expression:e,columnModel:this.columnModel,dataTypeService:this.dataTypeService,valueService:this.valueService,advancedFilterExpressionService:this.advancedFilterExpressionService}):null}getDefaultExpression(e){const t=this.advancedFilterExpressionService.getColumnValue(e)+" ";return{updatedValue:t,updatedPosition:t.length}}isHeaderActive(){return!this.gos.get("advancedFilterParent")}getCtrl(){return this.ctrl}setEnabled(e,t){const i=this.enabled,r=this.rowModel.getType(),s=r==="clientSide"||r==="serverSide";if(e&&!r&&import_core15._.warnOnce("Advanced Filter is only supported with the Client-Side Row Model or Server-Side Row Model."),this.enabled=e&&s,!t&&this.enabled!==i){const a={type:import_core15.Events.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,enabled:this.enabled};this.eventService.dispatchEvent(a)}}applyExpression(){const e=this.createExpressionParser(this.expression);e?.parseExpression(),this.applyExpressionFromParser(e)}applyExpressionFromParser(e){if(this.isValid=!e||e.isValid(),!e||!this.isValid){this.expressionFunction=null,this.expressionParams=null,this.appliedExpression=null;return}const{expressionFunction:t,params:i}=this.getFunction(e);this.expressionFunction=t,this.expressionParams=i,this.appliedExpression=this.expression}getFunction(e){if(this.gos.get("suppressAdvancedFilterEval"))return e.getFunctionParsed();{const{functionString:t,params:i}=e.getFunctionString();return{expressionFunction:new Function("expressionProxy","node","params",t),params:i}}}updateValidity(){this.advancedFilterExpressionService.resetColumnCaches();const e=this.createExpressionParser(this.expression);e?.parseExpression();const i=(!e||e.isValid())!==this.isValid;return this.applyExpressionFromParser(e),this.ctrl.refreshComp(),this.ctrl.refreshBuilderComp(),i}onNewColumnsLoaded(e){if(e.source!=="gridInitializing"||!this.dataTypeService.isPendingInference())return;this.ctrl.setInputDisabled(!0);const t=this.addManagedListener(this.eventService,import_core15.Events.EVENT_DATA_TYPES_INFERRED,()=>{t?.(),this.ctrl.setInputDisabled(!1)})}};__decorateClass([(0,import_core15.Autowired)("valueService")],AdvancedFilterService.prototype,"valueService",2),__decorateClass([(0,import_core15.Autowired)("columnModel")],AdvancedFilterService.prototype,"columnModel",2),__decorateClass([(0,import_core15.Autowired)("dataTypeService")],AdvancedFilterService.prototype,"dataTypeService",2),__decorateClass([(0,import_core15.Autowired)("rowModel")],AdvancedFilterService.prototype,"rowModel",2),__decorateClass([(0,import_core15.Autowired)("advancedFilterExpressionService")],AdvancedFilterService.prototype,"advancedFilterExpressionService",2),__decorateClass([import_core15.PostConstruct],AdvancedFilterService.prototype,"postConstruct",1),AdvancedFilterService=__decorateClass([(0,import_core15.Bean)("advancedFilterService")],AdvancedFilterService);var VERSION="31.3.4",AdvancedFilterModule={version:VERSION,moduleName:import_core16.ModuleNames.AdvancedFilterModule,beans:[AdvancedFilterService,AdvancedFilterExpressionService],agStackComponents:[{componentName:"agAdvancedFilter",componentClass:AdvancedFilterComp}],dependantModules:[import_core17.EnterpriseCoreModule]};


# ====================================================================
# FILE: enterprise-modules/advanced-filter/dist/types/src/version.d.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export declare const VERSION = "31.3.4";


# ====================================================================
# FILE: enterprise-modules/advanced-filter/src/version.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export const VERSION = '31.3.4';


# ====================================================================
# FILE: enterprise-modules/charts-enterprise/dist/types/src/version.d.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export declare const VERSION = "31.3.4";


# ====================================================================
# FILE: enterprise-modules/charts-enterprise/src/version.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export const VERSION = '31.3.4';


# ====================================================================
# FILE: enterprise-modules/charts/dist/package/main.cjs.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 10798-10838 ---
 10798| ], _GridChartComp.prototype, "eTitleEditContainer", 2);
 10799| __decorateClass([
 10800|   (0, import_core56.Autowired)("chartCrossFilterService")
 10801| ], _GridChartComp.prototype, "crossFilterService", 2);
 10802| __decorateClass([
 10803|   (0, import_core56.Autowired)("chartTranslationService")
 10804| ], _GridChartComp.prototype, "chartTranslationService", 2);
 10805| __decorateClass([
 10806|   (0, import_core56.Autowired)("chartMenuService")
 10807| ], _GridChartComp.prototype, "chartMenuService", 2);
 10808| __decorateClass([
 10809|   (0, import_core56.Autowired)("focusService")
 10810| ], _GridChartComp.prototype, "focusService", 2);
 10811| __decorateClass([
 10812|   (0, import_core56.Autowired)("popupService")
 10813| ], _GridChartComp.prototype, "popupService", 2);
 10814| __decorateClass([
 10815|   import_core56.PostConstruct
 10816| ], _GridChartComp.prototype, "init", 1);
 10817| var GridChartComp = _GridChartComp;
 10818| var VERSION = "31.3.4";
 10819| var DEBUG = false;
 10820| function upgradeChartModel(model) {
 10821|   const originalVersion = model.version;
 10822|   if (model.version == null) {
 10823|     model.version = heuristicVersionDetection(model);
 10824|   }
 10825|   model = migrateIfBefore("23.0.0", model, migrateV23);
 10826|   model = migrateIfBefore("24.0.0", model, migrateV24);
 10827|   model = migrateIfBefore("25.1.0", model, migrateV25_1);
 10828|   model = migrateIfBefore("26.0.0", model, migrateV26);
 10829|   model = migrateIfBefore("26.1.0", model, migrateV26_1);
 10830|   model = migrateIfBefore("26.2.0", model, migrateV26_2);
 10831|   model = migrateIfBefore("28.0.0", model, migrateV28);
 10832|   model = migrateIfBefore("28.2.0", model, migrateV28_2);
 10833|   model = migrateIfBefore("29.0.0", model, migrateV29);
 10834|   model = migrateIfBefore("29.1.0", model, migrateV29_1);
 10835|   model = migrateIfBefore("29.2.0", model, migrateV29_2);
 10836|   model = migrateIfBefore("30.0.0", model, migrateV30);
 10837|   model = migrateIfBefore("31.0.0", model, migrateV31);
 10838|   model = cleanup(model);


# ====================================================================
# FILE: enterprise-modules/charts/dist/package/main.cjs.min.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 153-193 ---
   153|             <div ref="eMiniChartsContainer" class="ag-chart-settings-mini-charts-container ag-scrollable-container"></div>
   154|             <div ref="eNavBar" class="ag-chart-settings-nav-bar">
   155|                 <div ref="ePrevBtn" class="ag-chart-settings-prev">
   156|                     <button type="button" class="ag-button ag-chart-settings-prev-button"></button>
   157|                 </div>
   158|                 <div ref="eCardSelector" class="ag-chart-settings-card-selector"></div>
   159|                 <div ref="eNextBtn" class="ag-chart-settings-next">
   160|                     <button type="button" class="ag-button ag-chart-settings-next-button"></button>
   161|                 </div>
   162|             </div>
   163|         </div>`,__decorateClass([(0,import_core47.RefSelector)("eMiniChartsContainer")],_ChartSettingsPanel.prototype,"eMiniChartsContainer",2),__decorateClass([(0,import_core47.RefSelector)("eNavBar")],_ChartSettingsPanel.prototype,"eNavBar",2),__decorateClass([(0,import_core47.RefSelector)("eCardSelector")],_ChartSettingsPanel.prototype,"eCardSelector",2),__decorateClass([(0,import_core47.RefSelector)("ePrevBtn")],_ChartSettingsPanel.prototype,"ePrevBtn",2),__decorateClass([(0,import_core47.RefSelector)("eNextBtn")],_ChartSettingsPanel.prototype,"eNextBtn",2),__decorateClass([import_core47.PostConstruct],_ChartSettingsPanel.prototype,"postConstruct",1);var ChartSettingsPanel=_ChartSettingsPanel,_TabbedChartMenu=class B extends import_core48.Component{constructor(e,t){super(),this.panels=e,this.chartMenuContext=t,this.tabs=[]}init(){this.panels.forEach(e=>{const t=e.replace("chart","").toLowerCase(),r=this.createPanel(t),i=this.createTab(e,t,r);this.tabs.push(i),this.addDestroyFunc(()=>this.destroyBean(r))}),this.tabbedLayout=new import_core48.TabbedLayout({items:this.tabs,cssClass:"ag-chart-tabbed-menu",keepScrollPosition:!0,suppressFocusBodyOnOpen:!0,suppressTrapFocus:!0,enableCloseButton:!this.chartMenuService.isLegacyFormat(),closeButtonAriaLabel:this.chartTranslationService.translate("ariaChartMenuClose"),onCloseClicked:()=>{var e;(e=this.eventSource)==null||e.focus({preventScroll:!0}),this.dispatchEvent({type:B.EVENT_CLOSED})}}),this.getContext().createBean(this.tabbedLayout)}createTab(e,t,r){const i=document.createElement("div");i.classList.add("ag-chart-tab",`ag-chart-${t}`),this.getContext().createBean(r),i.appendChild(r.getGui());const s=document.createElement("div"),n=this.chartTranslationService.translate(t);return s.innerText=n,{title:s,titleLabel:n,bodyPromise:import_core48.AgPromise.resolve(i),getScrollableContainer:()=>i.querySelector(".ag-scrollable-container")||i,name:e}}showTab(e){const t=this.tabs[e];this.tabbedLayout.showItem(t)}getGui(){return this.tabbedLayout&&this.tabbedLayout.getGui()}showMenu(e,t){var r;this.eventSource=e,t||(r=this.tabbedLayout)==null||r.focusHeader(!0)}destroy(){this.parentComponent&&this.parentComponent.isAlive()&&this.destroyBean(this.parentComponent),super.destroy()}createPanel(e){const{chartController:t,chartOptionsService:r}=this.chartMenuContext;switch(e){case B.TAB_DATA:return new ChartDataPanel(t,r);case B.TAB_FORMAT:return new FormatPanel(this.chartMenuContext);default:return new ChartSettingsPanel(t)}}};_TabbedChartMenu.EVENT_CLOSED="closed",_TabbedChartMenu.TAB_DATA="data",_TabbedChartMenu.TAB_FORMAT="format",__decorateClass([(0,import_core48.Autowired)("chartTranslationService")],_TabbedChartMenu.prototype,"chartTranslationService",2),__decorateClass([(0,import_core48.Autowired)("chartMenuService")],_TabbedChartMenu.prototype,"chartMenuService",2),__decorateClass([import_core48.PostConstruct],_TabbedChartMenu.prototype,"init",1);var TabbedChartMenu=_TabbedChartMenu,import_core49=require("@ag-grid-community/core"),ChartToolbar=class extends import_core49.Component{constructor(){super('<div class="ag-chart-menu" ref="eMenu"></div>'),this.buttonListenersDestroyFuncs=[]}updateParams(a){const{buttons:e}=a;this.createButtons(e)}createButtons(a){this.buttonListenersDestroyFuncs.forEach(t=>t?.()),this.buttonListenersDestroyFuncs=[];const e=this.eMenu;import_core49._.clearElement(e),a.forEach(t=>{const{buttonName:r,iconName:i,callback:s}=t,n=this.createButton(i),o=this.chartTranslationService.translate(r+"ToolbarTooltip");o&&n instanceof HTMLElement&&(n.title=o),this.buttonListenersDestroyFuncs.push(this.addManagedListener(n,"click",l=>s(l.target))),e.appendChild(n)})}createButton(a){let e=import_core49._.createIconNoSpan(a,this.gos,void 0,!0);return e.classList.add("ag-chart-menu-icon"),this.chartMenuService.isLegacyFormat()||(e=this.wrapButton(e)),e}wrapButton(a){const e=this.gos.getDocument().createElement("button");return e.appendChild(a),e.classList.add("ag-chart-menu-toolbar-button"),e}destroy(){this.buttonListenersDestroyFuncs=[],super.destroy()}};__decorateClass([(0,import_core49.Autowired)("chartTranslationService")],ChartToolbar.prototype,"chartTranslationService",2),__decorateClass([(0,import_core49.Autowired)("chartMenuService")],ChartToolbar.prototype,"chartMenuService",2),__decorateClass([(0,import_core49.RefSelector)("eMenu")],ChartToolbar.prototype,"eMenu",2);var _ChartMenu=class _e extends import_core50.Component{constructor(e,t,r){super(_e.TEMPLATE),this.eChartContainer=e,this.eMenuPanelContainer=t,this.chartMenuContext=r,this.buttons={chartSettings:{iconName:"menu",callback:()=>this.showMenu({panel:this.defaultPanel})},chartData:{iconName:"menu",callback:()=>this.showMenu({panel:"chartData"})},chartFormat:{iconName:"menu",callback:()=>this.showMenu({panel:"chartFormat"})},chartLink:{iconName:"linked",callback:()=>this.chartMenuService.toggleLinked(this.chartMenuContext)},chartUnlink:{iconName:"unlinked",callback:()=>this.chartMenuService.toggleLinked(this.chartMenuContext)},chartDownload:{iconName:"save",callback:()=>this.chartMenuService.downloadChart(this.chartMenuContext)},chartMenu:{iconName:"menuAlt",callback:i=>this.showMenuList(i)}},this.panels=[],this.menuVisible=!1,this.chartController=r.chartController}postConstruct(){this.legacyFormat=this.chartMenuService.isLegacyFormat(),this.chartToolbar=this.createManagedBean(new ChartToolbar),this.getGui().appendChild(this.chartToolbar.getGui()),this.legacyFormat&&this.createLegacyToggleButton(),this.refreshToolbarAndPanels(),this.addManagedListener(this.eventService,import_core50.Events.EVENT_CHART_CREATED,e=>{var t;e.chartId===this.chartController.getChartId()&&((t=this.gos.get("chartToolPanelsDef"))!=null&&t.defaultToolPanel)&&this.showMenu({panel:this.defaultPanel,animate:!1,suppressFocus:!0})}),this.addManagedListener(this.chartController,ChartController.EVENT_CHART_LINKED_CHANGED,this.refreshToolbarAndPanels.bind(this)),this.refreshMenuClasses(),this.legacyFormat&&!this.gos.get("suppressChartToolPanelsButton")&&this.panels.length>0&&(this.getGui().classList.add("ag-chart-tool-panel-button-enable"),this.eHideButton&&this.addManagedListener(this.eHideButton,"click",this.toggleMenu.bind(this))),this.legacyFormat||this.getGui().classList.add("ag-chart-menu-wrapper"),this.addManagedListener(this.chartController,ChartController.EVENT_CHART_API_UPDATE,this.refreshToolbarAndPanels.bind(this))}isVisible(){return this.menuVisible}getExtraPaddingDirections(){const e=["chartMenu","chartLink","chartUnlink","chartDownload"],t=["chartSettings","chartData","chartFormat"],r=[];return e.some(i=>this.chartToolbarOptions.includes(i))&&r.push("top"),t.some(i=>this.chartToolbarOptions.includes(i))&&r.push(this.gos.get("enableRtl")?"left":"right"),r}createLegacyToggleButton(){const e=this.gos.getDocument();this.eHideButton=e.createElement("button"),this.eHideButton.classList.add("ag-button","ag-chart-menu-close"),this.eHideButtonIcon=e.createElement("span"),this.eHideButtonIcon.classList.add("ag-icon","ag-icon-contracted"),this.eHideButton.appendChild(this.eHideButtonIcon),this.getGui().appendChild(this.eHideButton)}refreshToolbarAndPanels(){this.initToolbarOptionsAndPanels(),this.updateToolbar()}initToolbarOptionsAndPanels(){const{panels:e,defaultPanel:t,chartToolbarOptions:r}=this.chartMenuService.getToolbarOptionsAndPanels(this.chartController);this.panels=e,this.defaultPanel=t,this.chartToolbarOptions=r}updateToolbar(){const e=this.chartToolbarOptions.map(t=>{const{iconName:r,callback:i}=this.buttons[t];return{buttonName:t,iconName:r,callback:i}});this.chartToolbar.updateParams({buttons:e})}createMenuPanel(e){const t=this.environment.chartMenuPanelWidth(),r=this.menuPanel=this.createBean(new import_core50.AgPanel({minWidth:t,width:t,height:"100%",closable:!0,hideTitleBar:!0,cssIdentifier:"chart-menu"}));return r.setParentComponent(this),this.eMenuPanelContainer.appendChild(r.getGui()),this.tabbedMenu=this.createBean(new TabbedChartMenu(this.panels,this.chartMenuContext)),this.addManagedListener(this.tabbedMenu,TabbedChartMenu.EVENT_CLOSED,()=>{this.hideMenu(!1)}),this.addManagedListener(r,import_core50.Component.EVENT_DESTROYED,()=>this.destroyBean(this.tabbedMenu)),new import_core50.AgPromise(i=>{window.setTimeout(()=>{r.setBodyComponent(this.tabbedMenu),this.tabbedMenu.showTab(e),i(r),this.legacyFormat&&this.addManagedListener(this.eChartContainer,"click",s=>{this.getGui().contains(s.target)||this.menuVisible&&this.hideMenu()})},100)})}showContainer(e,t){this.menuPanel&&(this.menuVisible=!0,this.showParent(this.menuPanel.getWidth()),this.refreshMenuClasses(),this.tabbedMenu.showMenu(e,t))}toggleMenu(){this.menuVisible?this.hideMenu(this.legacyFormat):this.showMenu({animate:this.legacyFormat})}showMenu(e){const{panel:t,animate:r=!0,eventSource:i,suppressFocus:s}=e;if(r||this.eMenuPanelContainer.classList.add("ag-no-transition"),this.menuPanel&&!t)this.showContainer(i,s);else{const n=t||this.defaultPanel;let o=this.panels.indexOf(n);o<0&&(console.warn(`AG Grid: '${t}' is not a valid Chart Tool Panel name`),o=this.panels.indexOf(this.defaultPanel)),this.menuPanel?(this.tabbedMenu.showTab(o),this.showContainer(i,s)):this.createMenuPanel(o).then(()=>this.showContainer(i,s))}r||setTimeout(()=>{this.isAlive()&&this.eMenuPanelContainer.classList.remove("ag-no-transition")},500)}hideMenu(e=!0){e||this.eMenuPanelContainer.classList.add("ag-no-transition"),this.hideParent(),window.setTimeout(()=>{this.menuVisible=!1,this.refreshMenuClasses(),e||this.eMenuPanelContainer.classList.remove("ag-no-transition")},500)}refreshMenuClasses(){this.eChartContainer.classList.toggle("ag-chart-menu-visible",this.menuVisible),this.eChartContainer.classList.toggle("ag-chart-menu-hidden",!this.menuVisible),this.legacyFormat&&!this.gos.get("suppressChartToolPanelsButton")&&(this.eHideButtonIcon.classList.toggle("ag-icon-contracted",this.menuVisible),this.eHideButtonIcon.classList.toggle("ag-icon-expanded",!this.menuVisible))}showParent(e){this.eMenuPanelContainer.style.minWidth=`${e}px`}hideParent(){this.eMenuPanelContainer.style.minWidth="0"}showMenuList(e){this.chartMenuListFactory.showMenuList({eventSource:e,showMenu:()=>this.showMenu({animate:!1,eventSource:e}),chartMenuContext:this.chartMenuContext})}destroy(){super.destroy(),this.menuPanel&&this.menuPanel.isAlive()&&this.destroyBean(this.menuPanel),this.tabbedMenu&&this.tabbedMenu.isAlive()&&this.destroyBean(this.tabbedMenu)}};_ChartMenu.TEMPLATE="<div></div>",__decorateClass([(0,import_core50.Autowired)("chartMenuService")],_ChartMenu.prototype,"chartMenuService",2),__decorateClass([(0,import_core50.Autowired)("chartMenuListFactory")],_ChartMenu.prototype,"chartMenuListFactory",2),__decorateClass([import_core50.PostConstruct],_ChartMenu.prototype,"postConstruct",1);var ChartMenu=_ChartMenu,import_core51=require("@ag-grid-community/core"),_TitleEdit=class we extends import_core51.Component{constructor(e){super(we.TEMPLATE),this.chartMenu=e,this.destroyableChartListeners=[],this.editing=!1}init(){this.addManagedListener(this.getGui(),"keydown",e=>{this.editing&&e.key==="Enter"&&!e.shiftKey&&(this.handleEndEditing(),e.preventDefault())}),this.addManagedListener(this.getGui(),"input",()=>{this.editing&&this.updateHeight()}),this.addManagedListener(this.getGui(),"blur",()=>this.endEditing())}refreshTitle(e){this.chartController=e.chartController,this.chartOptionsService=e.chartOptionsService,this.chartMenuUtils=e.chartMenuParamsFactory.getChartOptions();for(const l of this.destroyableChartListeners)l();this.destroyableChartListeners=[];const r=this.chartController.getChartProxy().getChart(),i=r.canvasElement,s=this.addManagedListener(i,"dblclick",l=>{const{title:c}=r;if(c&&c.node.containsPoint(l.offsetX,l.offsetY)){const h=c.node.computeBBox(),u=c.node.inverseTransformPoint(h.x,h.y);this.startEditing(__spreadValues(__spreadValues({},h),u),i.width)}});let n=!1;const o=this.addManagedListener(i,"mousemove",l=>{const{title:c}=r,h=!!(c&&c.enabled&&c.node.containsPoint(l.offsetX,l.offsetY));n!==h&&(i.style.cursor=h?"pointer":""),n=h});this.destroyableChartListeners=[s,o]}startEditing(e,t){if(this.chartMenuService.isLegacyFormat()&&this.chartMenu&&this.chartMenu.isVisible()||this.editing)return;this.editing=!0;const i=Math.max(Math.min(e.width+20,t),300),s=this.getGui();s.classList.add("currently-editing");const n=s.style;n.fontFamily=this.chartMenuUtils.getValue("title.fontFamily"),n.fontWeight=this.chartMenuUtils.getValue("title.fontWeight"),n.fontStyle=this.chartMenuUtils.getValue("title.fontStyle"),n.fontSize=this.chartMenuUtils.getValue("title.fontSize")+"px",n.color=this.chartMenuUtils.getValue("title.color");const o=this.chartMenuUtils.getValue("title.text"),l=o===this.chartTranslationService.translate("titlePlaceholder");s.value=l?"":o;const c=o.split(/\r?\n/g).length;n.left=Math.round(e.x+e.width/2-i/2-1)+"px",n.top=Math.round(e.y+e.height/2-c*this.getLineHeight()/2-2)+"px",n.width=Math.round(i)+"px",n.lineHeight=this.getLineHeight()+"px",this.updateHeight(),s.focus()}updateHeight(){const e=this.getGui(),t=this.chartMenuUtils.getValue("title.text").split(/\r?\n/g).length,r=e.value.split(/\r?\n/g).length;e.style.height=Math.round(Math.max(t,r)*this.getLineHeight())+4+"px"}getLineHeight(){const e=this.chartMenuUtils.getValue("title.lineHeight");return e?parseInt(e):Math.round(parseInt(this.chartMenuUtils.getValue("title.fontSize"))*1.2)}handleEndEditing(){const e=this.chartMenuUtils.getValue("title.color");this.chartMenuUtils.setValue("title.color","rgba(0, 0, 0, 0)"),this.chartOptionsService.awaitChartOptionUpdate(()=>this.endEditing()),this.chartOptionsService.awaitChartOptionUpdate(()=>{this.chartMenuUtils.setValue("title.color",e)})}endEditing(){if(!this.editing)return;this.editing=!1;const e=this.getGui().value;e&&e.trim()!==""?(this.chartMenuUtils.setValue("title.text",e),this.chartMenuUtils.setValue("title.enabled",!0)):(this.chartMenuUtils.setValue("title.text",""),this.chartMenuUtils.setValue("title.enabled",!1)),this.getGui().classList.remove("currently-editing"),this.chartOptionsService.awaitChartOptionUpdate(()=>{this.eventService.dispatchEvent({type:"chartTitleEdit"})})}};_TitleEdit.TEMPLATE=`<textarea
   164|              class="ag-chart-title-edit"
   165|              style="padding:0; border:none; border-radius: 0; min-height: 0; text-align: center; resize: none;" />
   166|         `,__decorateClass([(0,import_core51.Autowired)("chartTranslationService")],_TitleEdit.prototype,"chartTranslationService",2),__decorateClass([(0,import_core51.Autowired)("chartMenuService")],_TitleEdit.prototype,"chartMenuService",2),__decorateClass([import_core51.PostConstruct],_TitleEdit.prototype,"init",1);var TitleEdit=_TitleEdit,import_core52=require("@ag-grid-community/core"),import_ag_charts_community29=require("ag-charts-community");function deproxy(a){return a.chart!=null?a.chart:a}var ChartProxy=class{constructor(a){this.chartProxyParams=a,this.clearThemeOverrides=!1,this.isEnterpriseCharts=import_ag_charts_community29._ModuleSupport.enterpriseModule.isEnterprise,this.chart=a.chartInstance,this.chartType=a.chartType,this.crossFiltering=a.crossFiltering,this.crossFilterCallback=a.crossFilterCallback,this.standaloneChartType=getSeriesType(this.chartType),this.chart==null?this.chart=import_ag_charts_community29.AgCharts.create(this.getCommonChartOptions()):this.clearThemeOverrides=!0}crossFilteringReset(){}update(a){import_ag_charts_community29.AgCharts.update(this.getChartRef(),this.getUpdateOptions(a,this.getCommonChartOptions(a.updatedOverrides)))}updateThemeOverrides(a){import_ag_charts_community29.AgCharts.updateDelta(this.getChartRef(),{theme:{overrides:a}})}getChart(){return deproxy(this.chart)}getChartRef(){return this.chart}downloadChart(a,e,t){const{chart:r}=this,i=deproxy(r),s=e||(i.title?i.title.text:"chart"),{width:n,height:o}=a||{};import_ag_charts_community29.AgCharts.download(r,{width:n,height:o,fileName:s,fileFormat:t})}getChartImageDataURL(a){return this.getChart().getCanvasDataURL(a)}getChartOptions(){return this.chart.getOptions()}getChartThemeOverrides(){var a;return(a=this.getChartOptions().theme.overrides)!=null?a:{}}getChartPalette(){return import_ag_charts_community29._Theme.getChartTheme(this.getChartOptions().theme).palette}setPaired(a){const e=getSeriesType(this.chartProxyParams.chartType);import_ag_charts_community29.AgCharts.updateDelta(this.chart,{theme:{overrides:{[e]:{paired:a}}}})}isPaired(){const a=getSeriesType(this.chartProxyParams.chartType);return get(this.getChartThemeOverrides(),`${a}.paired`,!0)}lookupCustomChartTheme(a){return lookupCustomChartTheme(this.chartProxyParams,a)}getSeriesGroupType(){}transformCategoryData(a,e){return a.map((t,r)=>{const i=t[e],s=i&&i.toString?i.toString():"",n=__spreadValues({},t);return n[e]={id:r,value:i,toString:()=>s},n})}getCommonChartOptions(a){var e,t;const r=this.clearThemeOverrides?{}:(t=(e=this.chart)==null?void 0:e.getOptions())!=null?t:{},i=this.chart!=null?this.getActiveFormattingPanelOverrides():void 0;this.clearThemeOverrides=!1;const s=createAgChartTheme(this.chartProxyParams,this,this.isEnterpriseCharts,this.getChartThemeDefaults(),a??i),n=__spreadProps(__spreadValues({},r),{mode:"integrated"});return n.theme=s,n.container=this.chartProxyParams.parentElement,n}getChartThemeDefaults(){const a=this.getSeriesChartThemeDefaults(),e=a?{[this.standaloneChartType]:a}:{},t={enabled:!0,snap:!0,label:{enabled:!1}};return __spreadValues({common:{navigator:{enabled:!1},zoom:{enabled:!0},animation:{enabled:!0,duration:500},axes:{number:{crosshair:t},category:{crosshair:t},log:{crosshair:t},time:{crosshair:t}}}},e)}getSeriesChartThemeDefaults(){}getActiveFormattingPanelOverrides(){var a,e;if(this.clearThemeOverrides)return{};const t=(a=this.chart)==null?void 0:a.getOptions().theme;return(e=t?.overrides)!=null?e:{}}destroy({keepChartInstance:a=!1}={}){if(a)return this.chart.resetAnimations(),this.chart;this.destroyChart()}destroyChart(){this.chart&&(this.chart.destroy(),this.chart=void 0)}},CartesianChartProxy=class extends ChartProxy{constructor(a){super(a),this.crossFilteringAllPoints=new Set,this.crossFilteringSelectedPoints=[]}getUpdateOptions(a,e){const t=this.getAxes(a,e);return __spreadProps(__spreadValues({},e),{data:this.getData(a,t),axes:t,series:this.getSeries(a)})}getData(a,e){const t=["area","line"].includes(this.standaloneChartType);return this.crossFiltering&&t?this.getCrossFilterData(a):this.getDataTransformedData(a,e)}getDataTransformedData(a,e){const t=e[0].type,{categories:r,data:i}=a,[s]=r;switch(t){case"category":return this.transformCategoryData(i,s.id);case"time":return this.transformTimeData(i,s.id);default:return i}}getXAxisType(a){return a.grouping?"grouped-category":this.isXAxisOfType(a,"time",e=>e instanceof Date)?"time":this.isXAxisOfType(a,"number")?"number":"category"}isXAxisOfType(a,e,t){const[r]=a.categories;if(r?.chartDataType)return r.chartDataType===e;if(!t)return!1;const i=a.data[0];return i?t(i[r.id]):!1}transformTimeData(a,e){var t;return((t=a[0])==null?void 0:t[e])instanceof Date?a:a.map(i=>{const s=i[e];return typeof s=="string"?__spreadProps(__spreadValues({},i),{[e]:new Date(s)}):i})}crossFilteringReset(){this.crossFilteringSelectedPoints=[],this.crossFilteringAllPoints.clear()}crossFilteringPointSelected(a){return this.crossFilteringSelectedPoints.length==0||this.crossFilteringSelectedPoints.includes(a)}crossFilteringDeselectedPoints(){return this.crossFilteringSelectedPoints.length>0&&this.crossFilteringAllPoints.size!==this.crossFilteringSelectedPoints.length}extractLineAreaCrossFilterSeries(a,e){const[t]=e.categories,r=i=>this.standaloneChartType==="area"?e.getCrossFilteringContext().lastSelectedChartId===e.chartId?i+"-total":i:i+"-total";return a.map(i=>(i.yKey=r(i.yKey),i.listeners={nodeClick:s=>{const n=s.datum[i.xKey],o=s.event.metaKey||s.event.ctrlKey;this.crossFilteringAddSelectedPoint(o,n),this.crossFilterCallback(s)}},i.marker={formatter:s=>{const n=s.datum[t.id];return{fill:s.highlighted?"yellow":s.fill,size:s.highlighted?14:this.crossFilteringPointSelected(n)?8:0}}},this.standaloneChartType==="area"&&(i.fillOpacity=this.crossFilteringDeselectedPoints()?.3:1),this.standaloneChartType==="line"&&(i.strokeOpacity=this.crossFilteringDeselectedPoints()?.3:1),i))}getCrossFilterData(a){this.crossFilteringAllPoints.clear();const[e]=a.categories,t=a.fields[0].colId,r=`${t}-filtered-out`,i=a.getCrossFilteringContext().lastSelectedChartId;return a.data.map(s=>{const n=s[e.id];this.crossFilteringAllPoints.add(n);const o=this.crossFilteringPointSelected(n);return this.standaloneChartType==="area"&&i===a.chartId&&(s[`${t}-total`]=o?s[t]:s[t]+s[r]),this.standaloneChartType==="line"&&(s[`${t}-total`]=o?s[t]:s[t]+s[r]),s})}crossFilteringAddSelectedPoint(a,e){a?this.crossFilteringSelectedPoints.push(e):this.crossFilteringSelectedPoints=[e]}isHorizontal(a){const e=this.standaloneChartType;if(e!=="waterfall"&&e!=="box-plot"&&e!=="range-bar")return!1;const t=a.theme,r=i=>{var s,n,o;const l=(o=(n=(s=i?.overrides)==null?void 0:s[e])==null?void 0:n.series)==null?void 0:o.direction;return l!=null?l==="horizontal":typeof i?.baseTheme=="object"?r(i.baseTheme):!1};return r(t)}},import_ag_charts_community30=require("ag-charts-community");function hexToRGBA(a,e){const t=parseInt(a.slice(1,3),16),r=parseInt(a.slice(3,5),16),i=parseInt(a.slice(5,7),16);return e?`rgba(${t}, ${r}, ${i}, ${e})`:`rgba(${t}, ${r}, ${i})`}function changeOpacity(a,e){return a.map(t=>{const r=import_ag_charts_community30._Util.Color.fromString(t);return new import_ag_charts_community30._Util.Color(r.r,r.g,r.b,e).toHexString()})}var HORIZONTAL_CHART_TYPES=new Set(["bar","groupedBar","stackedBar","normalizedBar"]),BarChartProxy=class extends CartesianChartProxy{constructor(a){super(a)}getAxes(a){const e=[{type:this.getXAxisType(a),position:this.isHorizontal()?"left":"bottom"},{type:"number",position:this.isHorizontal()?"bottom":"left"}];if(this.isNormalised()){const t=e[1];t.label=__spreadProps(__spreadValues({},t.label),{formatter:r=>Math.round(r.value)+"%"})}return e}getSeries(a){const[e]=a.categories,t=a.fields.map(r=>({type:this.standaloneChartType,direction:this.isHorizontal()?"horizontal":"vertical",stacked:this.crossFiltering||isStacked(this.chartType),normalizedTo:this.isNormalised()?100:void 0,xKey:e.id,xName:e.name,yKey:r.colId,yName:r.displayName}));return this.crossFiltering?this.extractCrossFilterSeries(t):t}extractCrossFilterSeries(a){const e=this.getChartPalette(),t=(s,n)=>__spreadProps(__spreadValues({},s),{highlightStyle:{item:{fill:void 0}},fill:e?.fills[n],stroke:e?.strokes[n],listeners:{nodeClick:this.crossFilterCallback}}),r=s=>{const n=s.yKey+"-filtered-out";return __spreadProps(__spreadValues({},deepMerge({},s)),{yKey:n,fill:hexToRGBA(s.fill,"0.3"),stroke:hexToRGBA(s.stroke,"0.3"),showInLegend:!1})},i=[];for(let s=0;s<a.length;s++){const n=t(a[s],s);i.push(n),i.push(r(n))}return i}isNormalised(){const a=["normalizedColumn","normalizedBar"];return!this.crossFiltering&&import_core52._.includes(a,this.chartType)}isHorizontal(){return HORIZONTAL_CHART_TYPES.has(this.chartType)}},AreaChartProxy=class extends CartesianChartProxy{constructor(a){super(a)}getAxes(a){const e=[{type:this.getXAxisType(a),position:"bottom"},{type:"number",position:"left"}];if(this.isNormalised()){const t=e[1];t.label=__spreadProps(__spreadValues({},t.label),{formatter:r=>Math.round(r.value)+"%"})}return e}getSeries(a){const[e]=a.categories,t=a.fields.map(r=>({type:this.standaloneChartType,xKey:e.id,xName:e.name,yKey:r.colId,yName:r.displayName,normalizedTo:this.chartType==="normalizedArea"?100:void 0,stacked:["normalizedArea","stackedArea"].includes(this.chartType)}));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(t,a):t}isNormalised(){return!this.crossFiltering&&this.chartType==="normalizedArea"}},LineChartProxy=class extends CartesianChartProxy{constructor(a){super(a)}getAxes(a){return[{type:this.getXAxisType(a),position:"bottom"},{type:"number",position:"left"}]}getSeries(a){const[e]=a.categories,t=a.fields.map(r=>({type:this.standaloneChartType,xKey:e.id,xName:e.name,yKey:r.colId,yName:r.displayName}));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(t,a):t}},PolarChartProxy=class extends ChartProxy{constructor(a){super(a)}getAxes(a){const e=this.standaloneChartType==="radial-bar";return[{type:e?"angle-number":"angle-category"},{type:e?"radius-category":"radius-number"}]}getSeries(a){const{fields:e,categories:t,seriesGroupType:r}=a,[i]=t,s=this.standaloneChartType==="radial-bar",n=this.getSeriesGroupTypeOptions(r);return e.map(o=>{var l,c;return __spreadValues({type:this.standaloneChartType,angleKey:s?o.colId:i.id,angleName:s?(l=o.displayName)!=null?l:void 0:i.name,radiusKey:s?i.id:o.colId,radiusName:s?i.name:(c=o.displayName)!=null?c:void 0},n)})}getSeriesGroupType(){var a,e;const t=this.standaloneChartType;if(!["nightingale","radial-bar","radial-column"].includes(t))return;const r=(e=(a=this.getChart().series)==null?void 0:a[0])==null?void 0:e.properties.toJson(),i=()=>r.normalizedTo?"normalized":"stacked";return t==="nightingale"?r.grouped?"grouped":i():r.stacked?i():"grouped"}getUpdateOptions(a,e){const t=this.getAxes(a);return __spreadProps(__spreadValues({},e),{data:this.getData(a,t),axes:t,series:this.getSeries(a)})}getData(a,e){if(e.some(r=>r.type==="angle-category"||r.type==="radius-category")){const[r]=a.categories;return this.transformCategoryData(a.data,r.id)}else return a.data}getSeriesGroupTypeOptions(a){return a?{grouped:a==="grouped"||void 0,stacked:a!=="grouped"||void 0,normalizedTo:a==="normalized"?100:void 0}:{}}},PieChartProxy=class Oe extends ChartProxy{constructor(e){super(e)}getUpdateOptions(e,t){return __spreadProps(__spreadValues({},t),{data:this.crossFiltering?this.getCrossFilterData(e):e.data,series:this.getSeries(e)})}getSeries(e){const[t]=e.categories,r=e.fields.length,i={currentOffset:0,offsetAmount:r>1?20:40},s=this.getFields(e).map(n=>{var o;const l={type:this.standaloneChartType,angleKey:n.colId,angleName:n.displayName,sectorLabelKey:n.colId,calloutLabelName:t.name,calloutLabelKey:t.id};if(this.chartType==="donut"||this.chartType==="doughnut"){const{outerRadiusOffset:c,innerRadiusOffset:h}=Oe.calculateOffsets(i),u=n.displayName?{title:{text:n.displayName,showInLegend:r>1}}:void 0;return __spreadProps(__spreadValues(__spreadProps(__spreadValues({},l),{type:"donut",outerRadiusOffset:c,innerRadiusOffset:h}),u),{calloutLine:{colors:(o=this.getChartPalette())==null?void 0:o.strokes}})}return l});return this.crossFiltering?this.extractCrossFilterSeries(s):s}getCrossFilterData(e){const t=e.fields[0].colId,r=`${t}-filtered-out`;return e.data.map(i=>{const s=i[t]+i[r];return i[`${t}-total`]=s,i[r]=1,i[t]=i[t]/s,i})}extractCrossFilterSeries(e){const t=this.getChartPalette(),r=l=>__spreadProps(__spreadValues({},l),{legendItemKey:l.calloutLabelKey,calloutLabel:{enabled:!1},highlightStyle:{item:{fill:void 0}},radiusKey:l.angleKey,angleKey:l.angleKey+"-total",radiusMin:0,radiusMax:1,listeners:{nodeClick:this.crossFilterCallback}}),i=(l,c)=>{var h,u;return __spreadProps(__spreadValues({},deepMerge({},o)),{radiusKey:c+"-filtered-out",fills:changeOpacity((h=l.fills)!=null?h:t.fills,.3),strokes:changeOpacity((u=l.strokes)!=null?u:t.strokes,.3),showInLegend:!1})},s=e[0],n=s.angleKey,o=r(s);return[i(s,n),o]}static calculateOffsets(e){const t=e.currentOffset;e.currentOffset-=e.offsetAmount;const r=e.currentOffset;return e.currentOffset-=e.offsetAmount,{outerRadiusOffset:t,innerRadiusOffset:r}}getFields(e){return this.chartType==="pie"?e.fields.slice(0,1):e.fields}},ScatterChartProxy=class extends CartesianChartProxy{constructor(a){super(a)}getAxes(a){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]}getSeries(a){const[e]=a.categories,t=this.isPaired(),r=this.getSeriesDefinitions(a.fields,t),i=e.id===ChartDataModel.DEFAULT_CATEGORY?void 0:e,s=r.map(n=>{var o,l,c,h,u;return n?.sizeField?{type:"bubble",xKey:n.xField.colId,xName:(o=n.xField.displayName)!=null?o:void 0,yKey:n.yField.colId,yName:(l=n.yField.displayName)!=null?l:void 0,title:`${n.yField.displayName} vs ${n.xField.displayName}`,sizeKey:n.sizeField.colId,sizeName:(c=n.sizeField.displayName)!=null?c:"",labelKey:i?i.id:n.yField.colId,labelName:i?i.name:void 0}:{type:"scatter",xKey:n.xField.colId,xName:(h=n.xField.displayName)!=null?h:void 0,yKey:n.yField.colId,yName:(u=n.yField.displayName)!=null?u:void 0,title:`${n.yField.displayName} vs ${n.xField.displayName}`,labelKey:i?i.id:n.yField.colId,labelName:i?i.name:void 0}});return this.crossFiltering?this.extractCrossFilterSeries(s,a):s}extractCrossFilterSeries(a,e){const{data:t}=e,r=this.getChartPalette(),i=c=>`${c}-filtered-out`,s=(c,h)=>{var u;const d=[1/0,-1/0];if(h!=null)for(const p of c){const g=(u=p[h])!=null?u:p[i(h)];g<d[0]&&(d[0]=g),g>d[1]&&(d[1]=g)}if(d[0]<=d[1])return d},n=(c,h)=>{const u=r?.fills[h],d=r?.strokes[h];let p;if(c.type==="bubble"){const{sizeKey:C}=c;p=s(t,C)}const g=__spreadProps(__spreadValues({},c.marker),{fill:u,stroke:d,domain:p});return __spreadProps(__spreadValues({},c),{marker:g,highlightStyle:{item:{fill:"yellow"}},listeners:__spreadProps(__spreadValues({},c.listeners),{nodeClick:this.crossFilterCallback})})},o=c=>{let{yKey:h,xKey:u}=c,d={};return c.type==="bubble"&&(d={sizeKey:i(c.sizeKey)}),__spreadProps(__spreadValues(__spreadValues({},c),d),{yKey:i(h),xKey:i(u),marker:__spreadProps(__spreadValues({},c.marker),{fillOpacity:.3,strokeOpacity:.3}),showInLegend:!1,listeners:__spreadProps(__spreadValues({},c.listeners),{nodeClick:p=>{const g=p.datum[i(u)],C=__spreadProps(__spreadValues({},p),{xKey:u,datum:__spreadProps(__spreadValues({},p.datum),{[u]:g})});this.crossFilterCallback(C)}})})},l=a.map(n);return[...l,...l.map(o)]}getSeriesDefinitions(a,e){if(a.length<2)return[];const t=this.chartType==="bubble";if(e)return t?a.map((i,s)=>s%3===0?{xField:i,yField:a[s+1],sizeField:a[s+2]}:null).filter(i=>i&&i.yField&&i.sizeField):a.map((i,s)=>s%2===0?{xField:i,yField:a[s+1]}:null).filter(i=>i&&i.yField);const r=a[0];return t?a.map((i,s)=>s%2===1?{xField:r,yField:i,sizeField:a[s+1]}:null).filter(i=>i&&i.sizeField):a.filter((i,s)=>s>0).map(i=>({xField:r,yField:i}))}},StatisticalChartProxy=class extends CartesianChartProxy{constructor(a){super(a)}getAxes(a,e){return[{type:this.getXAxisType(a),position:this.isHorizontal(e)?"left":"bottom"},{type:"number",position:this.isHorizontal(e)?"bottom":"left"}]}computeSeriesStatistics(a,e){const{data:t,fields:r}=a,[i]=a.categories,s=i.id||ChartDataModel.DEFAULT_CATEGORY,n=this.groupDataByCategory(s,t);return Array.from(n).map(([o,l])=>{const c={[i.id]:o};return r.forEach((h,u)=>{const d=l.map(p=>p[h.colId]).filter(p=>typeof p=="number"&&!isNaN(p));Object.entries(e(d)).forEach(([p,g])=>{const C=`${p}:${u}`;c[C]=d.length>0?g:null})}),c})}groupDataByCategory(a,e){const t=r=>{if(a===ChartDataModel.DEFAULT_CATEGORY)return 1;const i=r[a];return i==null?"":i instanceof Date?i.getTime():i};return e.reduce((r,i)=>{let s=t(i);const n=r.get(s);return n?n.push(i):r.set(s,[i]),r},new Map)}},RangeChartProxy=class extends StatisticalChartProxy{constructor(a){super(a)}getSeries(a){const[e]=a.categories;return a.fields.map((t,r)=>{var i;return{type:this.standaloneChartType,xKey:e.id,xName:e.name,yName:(i=t.displayName)!=null?i:void 0,yLowName:"Min",yHighName:"Max",yLowKey:`min:${r}`,yHighKey:`max:${r}`}})}getData(a){return this.computeSeriesStatistics(a,e=>({min:Math.min(...e),max:Math.max(...e)}))}},HistogramChartProxy=class extends CartesianChartProxy{constructor(a){super(a)}getSeries(a){const e=a.fields[0];return[{type:this.standaloneChartType,xKey:e.colId,xName:e.displayName,yName:this.chartProxyParams.translate("histogramFrequency"),areaPlot:!1}]}getAxes(a){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]}},BoxPlotChartProxy=class extends StatisticalChartProxy{constructor(a){super(a)}getSeries(a){const[e]=a.categories;return a.fields.map((t,r)=>{var i;return{type:this.standaloneChartType,xKey:e.id,xName:e.name,yName:(i=t.displayName)!=null?i:void 0,minName:"Min",q1Name:"Q1",medianName:"Median",q3Name:"Q3",maxName:"Max",minKey:`min:${r}`,q1Key:`q1:${r}`,medianKey:`median:${r}`,q3Key:`q3:${r}`,maxKey:`max:${r}`}})}getData(a){return this.computeSeriesStatistics(a,e=>{const t=e.sort((r,i)=>r-i);return{min:t[0],q1:this.quantile(t,.25),median:this.quantile(t,.5),q3:this.quantile(t,.75),max:t[t.length-1]}})}quantile(a,e){const t=(a.length-1)*e,r=Math.floor(t),i=t-r;return a[r+1]!==void 0?a[r]+i*(a[r+1]-a[r]):a[r]}};function flatMap(a,e){return a.reduce((t,r,i,s)=>t.concat(e(r,i,s)),new Array)}var HEATMAP_CATEGORY_KEY="AG-GRID-DEFAULT-HEATMAP-CATEGORY-KEY",HEATMAP_SERIES_KEY="AG-GRID-DEFAULT-HEATMAP-SERIES-KEY",HEATMAP_VALUE_KEY="AG-GRID-DEFAULT-HEATMAP-VALUE-KEY",HeatmapChartProxy=class extends ChartProxy{constructor(a){super(a)}getUpdateOptions(a,e){const t=HEATMAP_SERIES_KEY,r=HEATMAP_VALUE_KEY,i=HEATMAP_CATEGORY_KEY;return __spreadProps(__spreadValues({},e),{series:this.getSeries(a,t,r,i),data:this.getData(a,t,r,i)})}getSeries(a,e,t,r){const[i]=a.categories;return[{type:this.standaloneChartType,yKey:r,xKey:e,colorKey:t,yName:i.name,xName:void 0,colorName:void 0}]}getData(a,e,t,r){const[i]=a.categories;return flatMap(a.data,(s,n)=>{const o=s[i.id],l=o==null?"":String(o),c={id:n,value:o,toString:()=>l};return a.fields.map(({colId:h,displayName:u})=>__spreadProps(__spreadValues({},s),{[e]:u,[t]:s[h],[r]:c}))})}getSeriesChartThemeDefaults(){return{gradientLegend:{gradient:{preferredLength:200}},series:{tooltip:{renderer:renderHeatmapTooltip}}}}};function renderHeatmapTooltip(a){const{xKey:e,yKey:t,colorKey:r,yName:i,datum:s}=a;return{title:"",content:[{label:i,value:s[t]},{label:s[e],value:r&&s[r]}].map(({label:l,value:c})=>`<b>${sanitizeHtml(String(l))}:</b> ${sanitizeHtml(String(c))}`).join("<br>")}}function sanitizeHtml(a){const e={"&":"&amp;","<":"&lt;",">":"&gt;"},t=`[${Object.keys(e).join("")}]`,r=new RegExp(t,"g");return a.replace(r,i=>e[i])}var WaterfallChartProxy=class extends CartesianChartProxy{constructor(a){super(a)}getAxes(a,e){return[{type:this.getXAxisType(a),position:this.isHorizontal(e)?"left":"bottom"},{type:"number",position:this.isHorizontal(e)?"bottom":"left"}]}getSeries(a){var e;const[t]=a.categories,[r]=a.fields;return[{type:this.standaloneChartType,xKey:t.id,xName:t.name,yKey:r.colId,yName:(e=r.displayName)!=null?e:void 0}]}},import_core53=require("@ag-grid-community/core"),import_ag_charts_community31=require("ag-charts-community"),CARTESIAN_AXIS_TYPES=["number","category","time","grouped-category"],POLAR_AXIS_TYPES=["angle-category","angle-number","radius-category","radius-number"],VALID_AXIS_TYPES=[...CARTESIAN_AXIS_TYPES,...POLAR_AXIS_TYPES],ChartOptionsService=class De extends import_core53.BeanStub{constructor(e){super(),this.chartController=e}getChartThemeOverridesProxy(){return{getValue:e=>this.getChartOption(e),setValue:(e,t)=>this.setChartThemeOverrides([{expression:e,value:t}]),setValues:e=>this.setChartThemeOverrides(e)}}getAxisThemeOverridesProxy(){return{getValue:e=>this.getAxisProperty(e),setValue:(e,t)=>this.setAxisThemeOverrides([{expression:e,value:t}]),setValues:e=>this.setAxisThemeOverrides(e)}}getCartesianAxisOptionsProxy(e){return{getValue:t=>this.getCartesianAxisProperty(e,t),setValue:(t,r)=>this.setCartesianAxisOptions(e,[{expression:t,value:r}]),setValues:t=>this.setCartesianAxisOptions(e,t)}}getCartesianAxisThemeOverridesProxy(e){return{getValue:t=>this.getCartesianAxisProperty(e,t),setValue:(t,r)=>this.setCartesianAxisThemeOverrides(e,[{expression:t,value:r}]),setValues:t=>this.setCartesianAxisThemeOverrides(e,t)}}getCartesianAxisAppliedThemeOverridesProxy(e){return{getValue:t=>this.getCartesianAxisThemeOverride(e,t==="*"?null:t),setValue:(t,r)=>this.setCartesianAxisThemeOverrides(e,[{expression:t==="*"?null:t,value:r}]),setValues:t=>this.setCartesianAxisThemeOverrides(e,t)}}getSeriesOptionsProxy(e){return{getValue:(t,r)=>this.getSeriesOption(e(),t,r),setValue:(t,r)=>this.setSeriesOptions(e(),[{expression:t,value:r}]),setValues:t=>this.setSeriesOptions(e(),t)}}getPersistedChartThemeOverrides(e,t,r,i){const s=this.getRetainedChartThemeOverrideKeys(r,i),n=this.getRetainedChartAxisThemeOverrideKeys(null,r,i),o=this.createChartOptions();for(const l of s){const c=this.retrieveChartOptionsThemeOverride(e,r,l);c!==void 0&&this.assignChartOptionsThemeOverride(o,i,l,c)}return t&&this.assignPersistedAxisOverrides({existingAxes:t,retainedChartAxisThemeOverrideKeys:n,existingChartOptions:e,targetChartOptions:o,existingChartType:r,targetChartType:i}),o.theme.overrides}assignPersistedAxisOverrides(e){const{existingAxes:t,retainedChartAxisThemeOverrideKeys:r,existingChartOptions:i,targetChartOptions:s,existingChartType:n,targetChartType:o}=e;for(const{expression:l,targetAxisTypes:c}of r)for(const h of t.map(u=>u.type)){const u=this.retrieveChartOptionsThemeOverride(i,n,["axes",h,l].join("."));if(u!==void 0)for(const d of c)this.assignChartOptionsThemeOverride(s,o,["axes",d,l].join("."),u)}}getRetainedChartThemeOverrideKeys(e,t){const r=["animation"],i=["zoom","navigator"],s=((n,o)=>{const l=new Array;return isCartesian(getSeriesType(n))&&isCartesian(getSeriesType(o))&&l.push(...i),l})(e,t);return[...r,...s]}getRetainedChartAxisThemeOverrideKeys(e,t,r){return isCartesian(getSeriesType(t))&&isCartesian(getSeriesType(r))?this.getRetainedCartesianAxisThemeOverrideKeys(e).map(s=>({expression:s,targetAxisTypes:CARTESIAN_AXIS_TYPES})):[]}getRetainedCartesianAxisThemeOverrideKeys(e){const t=e==="xAxis"?["",".top",".bottom"]:e==="yAxis"?["",".left",".right"]:["",".left",".right",".top",".bottom"],r=["crosshair"],i=new Array;for(const s of r)for(const n of t)i.push(`${s}${n}`);return i}getChartOption(e){return get(this.getChart(),e,void 0)}setChartThemeOverrides(e){const t=this.getChartType(),r=this.createChartOptions();for(const{expression:i,value:s}of e)this.assignChartOptionsThemeOverride(r,t,i,s);this.applyChartOptions(r)}applyChartOptions(e,t){if(Object.keys(e).length===0)return;this.updateChart(e),!t?.silent&&this.raiseChartOptionsChangedEvent()}awaitChartOptionUpdate(e){this.chartController.getChartProxy().getChart().waitForUpdate().then(()=>e()).catch(r=>console.error("AG Grid - chart update failed",r))}getAxisProperty(e){var t;return get((t=this.getChart().axes)==null?void 0:t[0],e,void 0)}setAxisThemeOverrides(e){var t;const r=this.getChart(),i=this.getChartType();let s=this.createChartOptions();for(const{expression:n,value:o}of e){const l=(t=r.axes)==null?void 0:t.filter(c=>{const h=n.split(".");let u=c;for(const d of h){if(!(d in u))return!1;u=u[d]}return!0});if(l)for(const c of l)this.isValidAxisType(c)&&this.assignChartAxisThemeOverride(s,i,c.type,null,n,o)}this.applyChartOptions(s)}getCartesianAxisProperty(e,t){const r=this.getChartAxes(),i=this.getCartesianAxis(r,e);return get(i,t,void 0)}getCartesianAxisThemeOverride(e,t){const r=this.getChartAxes(),i=this.getCartesianAxis(r,e);if(!i||!this.isValidAxisType(i))return;const s=this.getChartType(),n=this.getChart().getOptions();return this.retrieveChartAxisThemeOverride(n,s,i.type,e==="yAxis"?["left","right"]:["bottom","top"],t)}setCartesianAxisThemeOverrides(e,t){const r=this.getChartAxes(),i=this.getCartesianAxis(r,e);if(!i||!this.isValidAxisType(i))return;const s=this.getChartType();let n=this.createChartOptions();for(const{expression:o,value:l}of t)this.assignChartAxisThemeOverride(n,s,i.type,e==="yAxis"?["left","right"]:["bottom","top"],o,l);this.applyChartOptions(n)}setCartesianAxisOptions(e,t){this.updateCartesianAxisOptions(e,(r,i,s)=>{const n=i.indexOf(s);for(const{expression:o,value:l}of t)this.assignChartOption(r,`axes.${n}.${o}`,l)})}updateCartesianAxisOptions(e,t){const r=this.getChart().getOptions(),i="axes"in r?r.axes:void 0;if(!r||!i)return;const s=this.getChartAxes(),n=this.getCartesianAxis(s,e);if(!n)return;let o=this.createChartOptions();o.axes=i,t(o,s,n,r),this.applyChartOptions(o)}setCartesianCategoryAxisType(e,t){this.updateCartesianAxisOptions(e,(r,i,s,n)=>{const o=this.getChartType();this.assignPersistedAxisOverrides({existingAxes:[s],retainedChartAxisThemeOverrideKeys:this.getRetainedChartAxisThemeOverrideKeys(e,o,o),existingChartOptions:n,targetChartOptions:r,existingChartType:o,targetChartType:o}),this.assignChartOption(r,"axes.0.type",t),this.chartController.setCategoryAxisType(t)})}getCartesianAxis(e,t){if(!(e.length<2))switch(t){case"xAxis":return e[0].direction==="x"?e[0]:e[1];case"yAxis":return e[1].direction==="y"?e[1]:e[0]}}getSeriesOption(e,t,r){const i=this.getChart().series.find(s=>De.isMatchingSeries(e,s));return get(r?i:i?.properties.toJson(),t,void 0)}setSeriesOptions(e,t){let r=this.createChartOptions();for(const{expression:i,value:s}of t)this.assignChartOptionsSeriesThemeOverride(r,e,`series.${i}`,s);this.applyChartOptions(r)}getPairedMode(){return this.chartController.getChartProxy().isPaired()}setPairedMode(e){this.chartController.getChartProxy().setPaired(e)}getChartAxes(){var e;return(e=this.getChart().axes)!=null?e:[]}retrieveChartAxisThemeOverride(e,t,r,i,s){if(i)for(const n of i){const o=this.retrieveChartOptionsThemeOverride(e,t,["axes",r,n,...s?[s]:[]].join("."));if(o!==void 0)return o}else return this.retrieveChartOptionsThemeOverride(e,t,["axes",r,...s?[s]:[]].join("."))}assignChartAxisThemeOverride(e,t,r,i,s,n){if(i)for(const o of i)this.assignChartOptionsThemeOverride(e,t,["axes",r,o,...s?[s]:[]].join("."),n);else this.assignChartOptionsThemeOverride(e,t,["axes",r,...s?[s]:[]].join("."),n)}isValidAxisType(e){return VALID_AXIS_TYPES.includes(e.type)}getChartType(){return this.chartController.getChartType()}getChart(){return this.chartController.getChartProxy().getChart()}updateChart(e){const t=this.chartController.getChartProxy().getChartRef();t.skipAnimations(),import_ag_charts_community31.AgCharts.updateDelta(t,e)}createChartOptions(){return{theme:{overrides:{}}}}retrieveChartOptionsThemeOverride(e,t,r){const i=this.getChartThemeOverridesSeriesTypeKeys(t);for(const s of i){const n=this.retrieveChartOptionsSeriesThemeOverride(e,s,r);if(n!==void 0)return n}}assignChartOptionsThemeOverride(e,t,r,i){const s=this.getChartThemeOverridesSeriesTypeKeys(t);for(const n of s)this.assignChartOptionsSeriesThemeOverride(e,n,r,i)}retrieveChartOptionsSeriesThemeOverride(e,t,r){return this.retrieveChartOption(e,["theme","overrides",t,...r?[r]:[]].join("."))}assignChartOptionsSeriesThemeOverride(e,t,r,i){this.assignChartOption(e,["theme","overrides",t,...r?[r]:[]].join("."),i)}getChartThemeOverridesSeriesTypeKeys(e){const t=this.chartController.getChartSeriesTypes(e);return this.chartController.isComboChart()&&t.push("common"),t}retrieveChartOption(e,t){return get(e,t,void 0)}assignChartOption(e,t,r){set(e,t,r)}raiseChartOptionsChangedEvent(){const e=this.chartController.getChartModel(),t={type:import_core53.Events.EVENT_CHART_OPTIONS_CHANGED,chartId:e.chartId,chartType:e.chartType,chartThemeName:this.chartController.getChartThemeName(),chartOptions:e.chartOptions};this.eventService.dispatchEvent(t)}static isMatchingSeries(e,t){return isSeriesType(e)&&t.type===e}destroy(){super.destroy()}},ComboChartProxy=class extends CartesianChartProxy{constructor(a){super(a)}getAxes(a){const e=a?a.fields:[],t=new Map(e.map(n=>[n.colId,n])),{primaryYKeys:r,secondaryYKeys:i}=this.getYKeys(e,a.seriesChartTypes),s=[{type:this.getXAxisType(a),position:"bottom"}];return r.length>0&&s.push({type:"number",keys:r,position:"left"}),i.length>0&&i.forEach(n=>{const o=t.get(n);if(!(o&&o.colId===n))return;const c={type:"number",keys:[n],position:"right"};s.push(c)}),s}getSeries(a){const{fields:e,seriesChartTypes:t}=a,[r]=a.categories;return e.map(i=>{const s=t.find(n=>n.colId===i.colId);if(s){const n=s.chartType,l=["groupedColumn","groupedBar"].includes(n)?{grouped:!0}:{};return __spreadValues({type:getSeriesType(n),xKey:r.id,yKey:i.colId,yName:i.displayName,stacked:["stackedArea","stackedColumn"].includes(n)},l)}})}getYKeys(a,e){const t=[],r=[];return a.forEach(i=>{const s=i.colId,n=e.find(o=>o.colId===s);n&&(n.secondaryAxis?r.push(s):t.push(s))}),{primaryYKeys:t,secondaryYKeys:r}}},import_core54=require("@ag-grid-community/core"),CHART_TOOL_PANEL_ALLOW_LIST=["chartSettings","chartData","chartFormat"],CHART_TOOLBAR_ALLOW_LIST=["chartUnlink","chartLink","chartDownload"],CHART_TOOL_PANEL_MENU_OPTIONS={settings:"chartSettings",data:"chartData",format:"chartFormat"},ChartMenuService=class extends import_core54.BeanStub{isLegacyFormat(){return!this.chartService.isEnterprise()}downloadChart(a,e,t,r){a.chartController.getChartProxy().downloadChart(e,t,r)}toggleLinked(a){a.chartController.detachChartRange()}openAdvancedSettings(a,e){this.advancedSettingsMenuFactory.showMenu(a,e)}hideAdvancedSettings(){this.advancedSettingsMenuFactory.hideMenu()}getToolbarOptionsAndPanels(a){var e,t,r;const i=this.isLegacyFormat(),s=!!this.gos.get("chartToolPanelsDef")||!i;let n,o,l;if(s){const c=i?[a.isChartLinked()?"chartLink":"chartUnlink","chartDownload"]:["chartMenu"],h=this.gos.getCallback("getChartToolbarItems");l=h?h({defaultItems:c}).filter(g=>{if(!(i?CHART_TOOLBAR_ALLOW_LIST:[...CHART_TOOLBAR_ALLOW_LIST,"chartMenu"]).includes(g)){let C;return CHART_TOOL_PANEL_ALLOW_LIST.includes(g)?C=`'${g}' is a Chart Tool Panel option and will be ignored since 'chartToolPanelsDef' is used. Please use 'chartToolPanelsDef.panels' grid option instead`:g==="chartMenu"?C="'chartMenu' is only allowed as a Chart Toolbar Option when using AG Charts Enterprise":C=`'${g}' is not a valid Chart Toolbar Option`,import_core54._.warnOnce(C),!1}return!0}):c;const d=(t=(e=this.gos.get("chartToolPanelsDef"))==null?void 0:e.panels)==null?void 0:t.map(g=>{const C=CHART_TOOL_PANEL_MENU_OPTIONS[g];return C||import_core54._.warnOnce(`Invalid panel in chartToolPanelsDef.panels: '${g}'`),C}).filter(g=>!!g);n=d||Object.values(CHART_TOOL_PANEL_MENU_OPTIONS),a.isPivotChart()&&(n=n.filter(g=>g!=="chartData"));const p=(r=this.gos.get("chartToolPanelsDef"))==null?void 0:r.defaultToolPanel;o=p&&CHART_TOOL_PANEL_MENU_OPTIONS[p]||n[0],i&&(l=n.length>0?[n[0],...l]:l)}else{let c=["chartSettings","chartData","chartFormat",a.isChartLinked()?"chartLink":"chartUnlink","chartDownload"];const h=this.gos.getCallback("getChartToolbarItems");if(h){const d=this.gos.get("suppressChartToolPanelsButton");c=h({defaultItems:d?c:CHART_TOOLBAR_ALLOW_LIST}).filter(g=>{if(!CHART_TOOL_PANEL_ALLOW_LIST.includes(g)&&!CHART_TOOLBAR_ALLOW_LIST.includes(g))return import_core54._.warnOnce(`'${g}' is not a valid Chart Toolbar Option`),!1;if(!d&&CHART_TOOL_PANEL_ALLOW_LIST.includes(g)){const C=`'${g}' is a Chart Tool Panel option and will be ignored. Please use 'chartToolPanelsDef.panels' grid option instead`;return import_core54._.warnOnce(C),!1}return!0}),d||(c=c.concat(CHART_TOOL_PANEL_ALLOW_LIST))}a.isPivotChart()&&(c=c.filter(d=>d!=="chartData"));const u=["chartUnlink","chartLink","chartDownload"];n=c.filter(d=>u.indexOf(d)===-1),o=n[0],l=c.filter(d=>u.indexOf(d)!==-1||n.length&&d===n[0])}return{panels:n,defaultPanel:o,chartToolbarOptions:l}}doesChartToolbarExist(a){const{chartToolbarOptions:e}=this.getToolbarOptionsAndPanels(a);return["chartMenu",...CHART_TOOLBAR_ALLOW_LIST].some(t=>e.includes(t))}doChartToolPanelsExist(a){const{panels:e}=this.getToolbarOptionsAndPanels(a);return e.length>0}};__decorateClass([(0,import_core54.Autowired)("chartService")],ChartMenuService.prototype,"chartService",2),__decorateClass([(0,import_core54.Autowired)("advancedSettingsMenuFactory")],ChartMenuService.prototype,"advancedSettingsMenuFactory",2),ChartMenuService=__decorateClass([(0,import_core54.Bean)("chartMenuService")],ChartMenuService);var CATEGORY_LABEL_KEY="AG-GRID-DEFAULT-LABEL-KEY";function createCategoryHierarchy(a,e){const t=buildNestedHierarchy(a,r,i);return formatCategoryHierarchy(t);function r(n){return e.length}function i(n,o){const l=e[o],c=n[l];return s(c)}function s(n){return n==null?null:String(n)}}function createAutoGroupHierarchy(a,e){const t=buildNestedHierarchy(a,r,i);return formatCategoryHierarchy(t);function r(s){var n,o;return(o=(n=e(s))==null?void 0:n.length)!=null?o:0}function i(s,n){const o=e(s);if(!o)return null;const l=o.length-1-n;return o[l]}}function formatCategoryHierarchy(a,e=null,t){const{depth:r,rootValues:i,value:s,children:n}=a;if(i)return i.map(l=>__spreadValues({[CATEGORY_LABEL_KEY]:e},l));if(r===0)return[__spreadValues({[CATEGORY_LABEL_KEY]:e},s)];const o=[];for(const[l,c]of n.entries())o.push(...formatCategoryHierarchy(c,l,!0));return t?[__spreadValues({[CATEGORY_LABEL_KEY]:e,children:o},s??{})]:o}function buildNestedHierarchy(a,e,t){const r={depth:0,children:new Map};return a.forEach(s=>{const n=e(s);i(s,n,t,0,r)}),r;function i(s,n,o,l,c){if(l===n)return l===0?(c.rootValues||(c.rootValues=[]),c.rootValues.push(s)):c.value=s,c;{const h=o(s,l),u=c.children.get(h),d=i(s,n,o,l+1,u||{depth:0,children:new Map});return c.children.set(h,d),c.depth=Math.max(1+d.depth,c.depth),c}}}var import_core55=require("@ag-grid-community/core"),HierarchicalChartProxy=class extends ChartProxy{constructor(a){super(a)}getUpdateOptions(a,e){const{fields:t}=a,[r,i]=t;return __spreadProps(__spreadValues({},e),{series:this.getSeries(r,i),data:this.getData(a,r,i)})}getSeriesChartThemeDefaults(){return{gradientLegend:{gradient:{preferredLength:200}}}}getSeries(a,e){var t,r;return[{type:this.standaloneChartType,labelKey:CATEGORY_LABEL_KEY,sizeKey:a?.colId,sizeName:(t=a?.displayName)!=null?t:void 0,colorKey:e?.colId,colorName:(r=e?.displayName)!=null?r:void 0}]}getData(a,e,t){var r;const{categories:i,data:s,groupData:n,grouping:o}=a;if(o){const l=t?s.concat((r=n?.map(c=>{const h=__spreadValues({},c);return delete h[e.colId],h}))!=null?r:[]):s;return createAutoGroupHierarchy(l,c=>{var h,u;return(u=(h=c[import_core55.GROUP_AUTO_COLUMN_ID])==null?void 0:h.labels)!=null?u:null})}else{const l=i.map(({id:c})=>c);return createCategoryHierarchy(s,l)}}},_GridChartComp=class H extends import_core56.Component{constructor(e){super(H.TEMPLATE),this.params=e}init(){const e=__spreadProps(__spreadValues({},this.params),{chartType:getCanonicalChartType(this.params.chartType),chartThemeName:this.getThemeName()}),t=this.gos.get("enableRtl");this.addCssClass(t?"ag-rtl":"ag-ltr");const r=this.createBean(new ChartDataModel(e));this.chartController=this.createManagedBean(new ChartController(r)),this.chartOptionsService=this.createManagedBean(new ChartOptionsService(this.chartController)),this.validateCustomThemes(),this.createChart(),this.params.insideDialog&&this.addDialog(),this.addMenu(),this.addTitleEditComp(),this.addManagedListener(this.getGui(),"focusin",this.setActiveChartCellRange.bind(this)),this.addManagedListener(this.chartController,ChartController.EVENT_CHART_MODEL_UPDATE,this.update.bind(this)),this.addManagedPropertyListeners(["chartThemeOverrides","chartThemes"],this.reactivePropertyUpdate.bind(this)),this.update(),this.raiseChartCreatedEvent()}createChart(){var e;let t;this.chartProxy&&(t=this.chartProxy.destroy({keepChartInstance:!0}));const r=(o,l)=>{const c=this.params.crossFilteringContext;c.lastSelectedChartId=l?"":this.chartController.getChartId(),l&&this.params.crossFilteringResetCallback(),this.crossFilterService.filter(o,l)},i=this.chartController.getChartType(),s={chartType:i,chartInstance:t,getChartThemeName:this.getChartThemeName.bind(this),getChartThemes:this.getChartThemes.bind(this),customChartThemes:this.gos.get("customChartThemes"),getGridOptionsChartThemeOverrides:()=>this.getGridOptionsChartThemeOverrides(),getExtraPaddingDirections:()=>{var o,l;return(l=(o=this.chartMenu)==null?void 0:o.getExtraPaddingDirections())!=null?l:[]},apiChartThemeOverrides:this.params.chartThemeOverrides,crossFiltering:(e=this.params.crossFiltering)!=null?e:!1,crossFilterCallback:r,parentElement:this.eChart,grouping:this.chartController.isGrouping(),chartThemeToRestore:this.params.chartThemeName,chartOptionsToRestore:this.params.chartOptionsToRestore,chartPaletteToRestore:this.params.chartPaletteToRestore,seriesChartTypes:this.chartController.getSeriesChartTypes(),translate:o=>this.chartTranslationService.translate(o)};if(this.params.chartOptionsToRestore=void 0,this.chartType=i,this.chartProxy=H.createChartProxy(s),!this.chartProxy){console.warn("AG Grid: invalid chart type supplied: ",s.chartType);return}const n=this.eChart.querySelector("canvas");n&&n.classList.add("ag-charts-canvas"),this.chartController.setChartProxy(this.chartProxy),this.createMenuContext(),this.titleEdit&&this.titleEdit.refreshTitle(this.chartMenuContext)}createMenuContext(){if(this.chartMenuContext)return;const e=this.createManagedBean(new ChartMenuParamsFactory(this.chartOptionsService.getChartThemeOverridesProxy())),t=this.createManagedBean(new ChartMenuParamsFactory(this.chartOptionsService.getAxisThemeOverridesProxy()));this.chartMenuContext={chartController:this.chartController,chartOptionsService:this.chartOptionsService,chartMenuParamsFactory:e,chartAxisMenuParamsFactory:t}}getChartThemeName(){return this.chartController.getChartThemeName()}getChartThemes(){return this.chartController.getThemeNames()}getGridOptionsChartThemeOverrides(){return this.gos.get("chartThemeOverrides")}static createChartProxy(e){switch(e.chartType){case"column":case"bar":case"groupedColumn":case"stackedColumn":case"normalizedColumn":case"groupedBar":case"stackedBar":case"normalizedBar":return new BarChartProxy(e);case"pie":case"donut":case"doughnut":return new PieChartProxy(e);case"area":case"stackedArea":case"normalizedArea":return new AreaChartProxy(e);case"line":return new LineChartProxy(e);case"scatter":case"bubble":return new ScatterChartProxy(e);case"histogram":return new HistogramChartProxy(e);case"radarLine":case"radarArea":case"nightingale":case"radialColumn":case"radialBar":return new PolarChartProxy(e);case"rangeBar":case"rangeArea":return new RangeChartProxy(e);case"boxPlot":return new BoxPlotChartProxy(e);case"treemap":case"sunburst":return new HierarchicalChartProxy(e);case"heatmap":return new HeatmapChartProxy(e);case"waterfall":return new WaterfallChartProxy(e);case"columnLineCombo":case"areaColumnCombo":case"customCombo":return new ComboChartProxy(e);default:throw`AG Grid: Unable to create chart as an invalid chartType = '${e.chartType}' was supplied.`}}addDialog(){const e=this.chartTranslationService.translate(this.params.pivotChart?"pivotChartTitle":"rangeChartTitle"),{width:t,height:r}=this.getBestDialogSize();this.chartDialog=new import_core56.AgDialog({resizable:!0,movable:!0,maximizable:!0,title:e,width:t,height:r,component:this,centered:!0,closable:!0}),this.getContext().createBean(this.chartDialog),this.chartDialog.addEventListener(import_core56.AgDialog.EVENT_DESTROYED,()=>{this.destroy(),this.chartMenuService.hideAdvancedSettings()})}getBestDialogSize(){const e=this.popupService.getPopupParent(),t=import_core56._.getAbsoluteWidth(e)*.75,r=import_core56._.getAbsoluteHeight(e)*.75,i=.553,s=this.chartProxy.getChart();let n=this.params.insideDialog?850:s.width,o=this.params.insideDialog?470:s.height;return(n>t||o>r)&&(n=Math.min(n,t),o=Math.round(n*i),o>r&&(o=r,n=Math.min(n,Math.round(o/i)))),{width:n,height:o}}addMenu(){this.params.crossFiltering||(this.chartMenu=this.createBean(new ChartMenu(this.eChartContainer,this.eMenuContainer,this.chartMenuContext)),this.eChartContainer.appendChild(this.chartMenu.getGui()))}addTitleEditComp(){this.titleEdit=this.createBean(new TitleEdit(this.chartMenu)),this.eTitleEditContainer.appendChild(this.titleEdit.getGui()),this.chartProxy&&this.titleEdit.refreshTitle(this.chartMenuContext)}update(e){if(e?.chartId&&!this.chartController.update(e))return;const t=this.chartTypeChanged(e),r=t||this.chartEmpty?(s=>{const n=this.chartType,o=s,l=this.chartProxy.getChart(),c=l?.getOptions(),h=l?.axes;return this.chartOptionsService.getPersistedChartThemeOverrides(c,h,n,o??n)})(t):void 0;t&&this.createChart();const i=r&&e?.chartThemeOverrides?deepMerge(r,e.chartThemeOverrides):r||e?.chartThemeOverrides;this.updateChart(i),e?.chartId&&this.chartProxy.getChart().waitForUpdate().then(()=>{this.chartController.raiseChartApiUpdateEvent()})}updateChart(e){const{chartProxy:t}=this,r=this.chartController.getSelectedValueColState(),i=this.chartController.getChartData(),s=this.handleEmptyChart(i,r.length);if(this.chartEmpty=s,s){e&&this.chartController.updateThemeOverrides(e);return}let n=this.chartController.getChartUpdateParams(e);t.update(n),this.chartProxy.getChart().waitForUpdate().then(()=>{this.chartController.raiseChartUpdatedEvent()}),this.titleEdit.refreshTitle(this.chartMenuContext)}chartTypeChanged(e){const[t,r]=[this.chartController.getChartType(),e?.chartType],i=r?getCanonicalChartType(r):void 0;return this.chartType!==t?i??t:i&&t!==i?i:null}getChartModel(){return this.chartController.getChartModel()}getChartImageDataURL(e){return this.chartProxy.getChartImageDataURL(e)}handleEmptyChart(e,t){const r=this.chartController.isPivotChart()&&!this.chartController.isPivotMode(),i=this.chartController.getChartType();let s=1;this.chartController.isActiveXYChart()?s=i==="bubble"?3:2:isHierarchical(getSeriesType(i))&&(s=0);const n=t<s||e.length===0;if(this.eChart){const o=r||n;import_core56._.setDisplayed(this.eChart,!o),import_core56._.setDisplayed(this.eEmpty,o)}return r?(this.eEmpty.innerText=this.chartTranslationService.translate("pivotChartRequiresPivotMode"),!0):n?(this.eEmpty.innerText=this.chartTranslationService.translate("noDataToChart"),!0):!1}downloadChart(e,t,r){this.chartProxy.downloadChart(e,t,r)}openChartToolPanel(e){const t=e&&CHART_TOOL_PANEL_MENU_OPTIONS[e];this.chartMenu.showMenu({panel:t})}closeChartToolPanel(){this.chartMenu.hideMenu()}getChartId(){return this.chartController.getChartId()}getUnderlyingChart(){return this.chartProxy.getChartRef()}crossFilteringReset(){this.chartProxy.crossFilteringReset()}setActiveChartCellRange(e){this.getGui().contains(e.relatedTarget)||(this.chartController.setChartRange(!0),this.focusService.clearFocusedCell())}getThemeName(){const e=this.gos.get("chartThemes")||DEFAULT_THEMES;if(e.length===0)throw new Error("Cannot create chart: no chart themes available.");const{chartThemeName:t}=this.params;return import_core56._.includes(e,t)?t:e[0]}getAllKeysInObjects(e){const t={};return e.filter(r=>r!=null).forEach(r=>{Object.keys(r).forEach(i=>t[i]=null)}),Object.keys(t)}validateCustomThemes(){const e=this.getChartThemes(),t=this.gos.get("customChartThemes");t&&this.getAllKeysInObjects([t]).forEach(r=>{import_core56._.includes(e,r)||console.warn("AG Grid: a custom chart theme with the name '"+r+"' has been supplied but not added to the 'chartThemes' list")})}reactivePropertyUpdate(){this.chartController.setChartThemeName(this.getThemeName(),!0);const e=this.getChartId(),t=this.chartController.isCrossFilterChart()?"crossFilter":this.getChartModel().modelType,r=this.gos.get("chartThemeOverrides")||{};this.update({type:`${t}ChartUpdate`,chartId:e,chartThemeOverrides:r})}raiseChartCreatedEvent(){const e={type:import_core56.Events.EVENT_CHART_CREATED,chartId:this.chartController.getChartId()};this.chartProxy.getChart().waitForUpdate().then(()=>{this.eventService.dispatchEvent(e)})}raiseChartDestroyedEvent(){const e={type:import_core56.Events.EVENT_CHART_DESTROYED,chartId:this.chartController.getChartId()};this.eventService.dispatchEvent(e)}destroy(){var e;super.destroy(),this.chartProxy&&this.chartProxy.destroy(),this.destroyBean(this.chartMenu),this.destroyBean(this.titleEdit),this.chartDialog&&this.chartDialog.isAlive()&&this.destroyBean(this.chartDialog),(e=this.onDestroyColorSchemeChangeListener)==null||e.call(this);const t=this.getGui();import_core56._.clearElement(t),import_core56._.removeFromParent(t),this.raiseChartDestroyedEvent()}};_GridChartComp.TEMPLATE=`<div class="ag-chart" tabindex="-1">
   167|             <div ref="eChartContainer" tabindex="-1" class="ag-chart-components-wrapper">
   168|                 <div ref="eChart" class="ag-chart-canvas-wrapper"></div>
   169|                 <div ref="eEmpty" class="ag-chart-empty-text ag-unselectable"></div>
   170|             </div>
   171|             <div ref="eTitleEditContainer"></div>
   172|             <div ref="eMenuContainer" class="ag-chart-docked-container" style="min-width: 0px;"></div>
   173|         </div>`,__decorateClass([(0,import_core56.RefSelector)("eChart")],_GridChartComp.prototype,"eChart",2),__decorateClass([(0,import_core56.RefSelector)("eChartContainer")],_GridChartComp.prototype,"eChartContainer",2),__decorateClass([(0,import_core56.RefSelector)("eMenuContainer")],_GridChartComp.prototype,"eMenuContainer",2),__decorateClass([(0,import_core56.RefSelector)("eEmpty")],_GridChartComp.prototype,"eEmpty",2),__decorateClass([(0,import_core56.RefSelector)("eTitleEditContainer")],_GridChartComp.prototype,"eTitleEditContainer",2),__decorateClass([(0,import_core56.Autowired)("chartCrossFilterService")],_GridChartComp.prototype,"crossFilterService",2),__decorateClass([(0,import_core56.Autowired)("chartTranslationService")],_GridChartComp.prototype,"chartTranslationService",2),__decorateClass([(0,import_core56.Autowired)("chartMenuService")],_GridChartComp.prototype,"chartMenuService",2),__decorateClass([(0,import_core56.Autowired)("focusService")],_GridChartComp.prototype,"focusService",2),__decorateClass([(0,import_core56.Autowired)("popupService")],_GridChartComp.prototype,"popupService",2),__decorateClass([import_core56.PostConstruct],_GridChartComp.prototype,"init",1);var GridChartComp=_GridChartComp,VERSION="31.3.4",DEBUG=!1;function upgradeChartModel(a){const e=a.version;return a.version==null&&(a.version=heuristicVersionDetection(a)),a=migrateIfBefore("23.0.0",a,migrateV23),a=migrateIfBefore("24.0.0",a,migrateV24),a=migrateIfBefore("25.1.0",a,migrateV25_1),a=migrateIfBefore("26.0.0",a,migrateV26),a=migrateIfBefore("26.1.0",a,migrateV26_1),a=migrateIfBefore("26.2.0",a,migrateV26_2),a=migrateIfBefore("28.0.0",a,migrateV28),a=migrateIfBefore("28.2.0",a,migrateV28_2),a=migrateIfBefore("29.0.0",a,migrateV29),a=migrateIfBefore("29.1.0",a,migrateV29_1),a=migrateIfBefore("29.2.0",a,migrateV29_2),a=migrateIfBefore("30.0.0",a,migrateV30),a=migrateIfBefore("31.0.0",a,migrateV31),a=cleanup(a),a=migrateIfBefore(VERSION,a,t=>t),DEBUG&&e!==a.version&&console.log("AG Grid: ChartModel migration complete",{model:a}),a}function migrateV23(a){return a=jsonRename("chartOptions.legend.item.marker.type","shape",a),a=jsonRename("chartOptions.seriesDefaults.marker.type","shape",a),a=jsonRename("chartOptions.legend.padding","spacing",a),a}function migrateV24(a){var e;a=jsonDelete("chartOptions.seriesDefaults.marker.minSize",a);const t=a,{chartType:r,chartPalette:i,chartOptions:s}=t,n=s,{xAxis:o,yAxis:l}=n,c=__objRest(n,["xAxis","yAxis"]),h=__objRest(t,["chartType","chartPalette","chartOptions"]),u=getLegacyAxisType(r),d=u?.map((g,C)=>__spreadValues({type:g},C===0?o:l));return __spreadValues({chartType:r,chartThemeName:(e={borneo:"ag-default",material:"ag-material",bright:"ag-vivid"}[i])!=null?e:"ag-default",chartOptions:__spreadProps(__spreadValues({},c),{axes:d,xAxis:o,yAxis:l})},h)}function migrateV25_1(a){return a=jsonRename("chartOptions.seriesDefaults.label.minRequiredAngle","minAngle",a),a}function migrateV26(a){return a=jsonMutate("chartOptions.seriesDefaults.highlightStyle",a,t=>{var r=t,{dimOpacity:i}=r,s=__objRest(r,["dimOpacity"]);return __spreadValues(__spreadValues({},s),i!=null?{series:{dimOpacity:i}}:{})}),a=jsonDelete("chart",a),a=jsonDelete("chartOptions.seriesDefaults.tooltipClass",a),a=jsonDelete("chartOptions.seriesDefaults.tooltipTracking",a),a=jsonDeleteDefault("chartOptions.axes[].label.rotation",0,a),a=jsonDeleteDefault("chartOptions.axes[].label.rotation",335,a),a}function migrateV26_1(a){const e=t=>{var r=t,{item:i,series:s}=r,n=__objRest(r,["item","series"]);return __spreadValues({item:__spreadValues(__spreadValues({},n),i)},s?{series:s}:{})};return a=jsonMutate("chartOptions.seriesDefaults.highlightStyle",a,e),a=jsonMutate("chartOptions.series[].highlightStyle",a,e),a}function migrateV26_2(a){a=jsonMove("chartOptions.seriesDefaults.fill.opacity","chartOptions.seriesDefaults.fillOpacity",a),a=jsonMove("chartOptions.seriesDefaults.stroke.opacity","chartOptions.seriesDefaults.strokeOpacity",a),a=jsonMove("chartOptions.seriesDefaults.stroke.width","chartOptions.seriesDefaults.strokeWidth",a),a=jsonDelete("chartOptions.seriesDefaults.fill",a),a=jsonDelete("chartOptions.seriesDefaults.stroke",a),a=jsonDelete("chartOptions.seriesDefaults.callout.colors",a),a=jsonDelete("chartOptions.xAxis",a),a=jsonDelete("chartOptions.yAxis",a);const e=a,{chartType:t,chartOptions:r}=e,i=r,{axes:s,series:n,seriesDefaults:o}=i,l=__objRest(i,["axes","series","seriesDefaults"]),c=__objRest(e,["chartType","chartOptions"]),h=getCanonicalChartType(t),u=getSeriesType(h),d=[u],p={};if(!isPieChartSeries(u)){const C={top:{},bottom:{},left:{},right:{}},m=s.map(f=>{var v=f,{type:y}=v,S=__objRest(v,["type"]);return{[y]:__spreadValues(__spreadValues({},C),S)}}).reduce(merge,{});ALL_AXIS_TYPES.filter(f=>m[f]==null).forEach(f=>{m[f]=__spreadValues({},C)}),p.axes=m}const g=d.map(C=>({[C]:__spreadValues(__spreadProps(__spreadValues({},p),{series:o}),l)})).reduce(merge,{});return a=__spreadProps(__spreadValues({},c),{chartType:h,chartOptions:g}),a}function migrateV28(a){return a=jsonDelete("chartOptions.*.title.padding",a),a=jsonDelete("chartOptions.*.subtitle.padding",a),a=jsonDelete("chartOptions.*.axes.*.title.padding",a),a=jsonBackfill("chartOptions.*.axes.*.title.enabled",!1,a),a}function migrateV28_2(a){return a=jsonRename("chartOptions.pie.series.callout","calloutLine",a),a=jsonRename("chartOptions.pie.series.label","calloutLabel",a),a=jsonRename("chartOptions.pie.series.labelKey","sectorLabelKey",a),a=jsonRename("chartOptions.pie.series.labelName","sectorLabelName",a),a=jsonRename("chartOptions.donut.series.callout","calloutLine",a),a=jsonRename("chartOptions.donut.series.label","calloutLabel",a),a=jsonRename("chartOptions.donut.series.labelKey","sectorLabelKey",a),a=jsonRename("chartOptions.donut.series.labelName","sectorLabelName",a),a}function migrateV29(a){return a=jsonMoveIfMissing("chartOptions.scatter.series.fill","chartOptions.scatter.series.marker.fill",a),a=jsonMoveIfMissing("chartOptions.scatter.series.fillOpacity","chartOptions.scatter.series.marker.fillOpacity",a),a=jsonMoveIfMissing("chartOptions.scatter.series.stroke","chartOptions.scatter.series.marker.stroke",a),a=jsonMoveIfMissing("chartOptions.scatter.series.strokeOpacity","chartOptions.scatter.series.marker.strokeOpacity",a),a=jsonMoveIfMissing("chartOptions.scatter.series.strokeWidth","chartOptions.scatter.series.marker.strokeWidth",a),a=jsonMove("chartOptions.scatter.series.paired","chartOptions.scatter.paired",a),a}function migrateV29_1(a){return a=jsonDelete("chartOptions.axes[].tick.count",a),a}function migrateV29_2(a){return a=jsonMutate("chartOptions.*.tooltip",a,t=>{var r=t,{tracking:i}=r,s=__objRest(r,["tracking"]),n,o,l,c;const h=__spreadValues({},s);return i===!1?((n=h.position)!=null||(h.position={type:"pointer"}),(o=h.range)!=null||(h.range="nearest")):i===!0&&((l=h.position)!=null||(h.position={type:"node"}),(c=h.range)!=null||(h.range="nearest")),h}),a}function migrateV30(a){return a=jsonRename("chartOptions.pie.series.labelKey","sectorLabelKey",a),a=jsonRename("chartOptions.pie.series.labelName","sectorLabelName",a),a=migrateV29_1(a),a=migrateV29_2(a),a=jsonDelete("chartOptions.*.series.flipXY",a),a=jsonAdd("chartOptions.common.legend.enabled",!0,a),a=jsonBackfill("chartOptions.common.legend.position","right",a),a}function migrateV31(a){const e={"ag-pastel":"ag-sheets","ag-solar":"ag-polychroma"},t=jsonRename("chartOptions.column","bar",a),r=e[t.chartThemeName]||t.chartThemeName;return __spreadProps(__spreadValues({},t),{chartThemeName:r})}function cleanup(a){return a=jsonDelete("chartOptions.*.width",a),a=jsonDelete("chartOptions.*.height",a),a=jsonBackfill("chartOptions.*.axes.category.label.autoRotate",!0,a),a}function heuristicVersionDetection(a){var e,t;const r=a;if(a.version!=null)return a.version;const i=(u,...d)=>Object.keys(u||{}).some(p=>d.includes(p)),s=r.chartOptions,n=i(s,"seriesDefaults")?s?.seriesDefaults:s?.[Object.keys(s)[0]],o={"27.0.0":i(r,"seriesChartTypes"),"26.2.0":!i(s,"seriesDefaults"),"26.1.0":i(n?.highlightStyle,"item"),"26.0.0":i(n?.highlightStyle,"series"),"25.1.0":i(n?.label,"minAngle"),"25.0.0":i(r,"modelType","aggFunc","unlinkChart","suppressChartRanges")||i(n,"lineDash","lineDashOffset"),"24.0.0":i(r,"chartThemeName","chart")||i(s,"series"),"23.2.0":i(s,"navigator"),"23.0.0":i((t=(e=s?.legend)==null?void 0:e.item)==null?void 0:t.marker,"shape"),"22.1.0":i(r,"chartPalette","chartType")},l="27.1.0",c=Object.entries(o).filter(([u,d])=>d);DEBUG&&console.log("AG Grid: ChartModel migration",{heuristicVersionCandidates:c});const[h=l]=c[0];return DEBUG&&console.log("AG Grid: ChartModel migration",{heuristicVersion:h}),h}function migrateIfBefore(a,e,t){if(versionNumber(a)>versionNumber(e.version)){DEBUG&&console.log("AG Grid: ChartModel migration",{migratingTo:a});const r=t(e);return r.version=a,DEBUG&&console.log("AG Grid: ChartModel migration",{migratedTo:a,result:r}),r}return e}function versionParts(a){const e=typeof a=="string"?a.split(".").map(t=>Number(t)):[];if(e.length!==3||e.some(t=>isNaN(t)))throw new Error("AG Grid - Illegal version string: "+a);return{major:e[0],minor:e[1],patch:e[2]}}function versionNumber(a){const{major:e,minor:t,patch:r}=versionParts(a);return e*1e4+t*100+r}function jsonDeleteDefault(a,e,t){return jsonMutateProperty(a,!0,t,(r,i)=>{r[i]===e&&delete r[i]})}function jsonBackfill(a,e,t){return jsonMutateProperty(a,!1,t,(r,i)=>{r[i]==null&&(r[i]=e)})}function jsonAdd(a,e,t){var r;typeof a=="string"&&(a=a.split("."));const i=a[0];return a.length>1&&(t[i]=jsonAdd(a.slice(1),e,(r=t[i])!=null?r:{})),Object.keys(t).includes(i)||(t[i]=e),t}function jsonMove(a,e,t){let r,i=!1;return t=jsonMutateProperty(a,!0,t,(s,n)=>{i=!0,r=s[n],delete s[n]}),i?jsonMutateProperty(e,!1,t,(s,n)=>{s[n]=r}):t}function jsonMoveIfMissing(a,e,t){let r,i=!1;return t=jsonMutateProperty(a,!0,t,(s,n)=>{i=!0,r=s[n],delete s[n]}),i?jsonMutateProperty(e,!1,t,(s,n)=>{s[n]===void 0&&(s[n]=r)}):t}function jsonRename(a,e,t){return jsonMutateProperty(a,!0,t,(r,i)=>{r[e]=r[i],delete r[i]})}function jsonDelete(a,e){return jsonMutateProperty(a,!0,e,(t,r)=>delete t[r])}function jsonMutateProperty(a,e,t,r){const i=a instanceof Array?a:a.split("."),s=i.slice(0,i.length-1),n=i[i.length-1];return jsonMutate(s,t,o=>{const l=Object.keys(o).includes(n);if(e&&!l)return o;const c=__spreadValues({},o);return r(c,n),c})}function jsonMutate(a,e,t){const r=a instanceof Array?a:a.split(".");if(e=__spreadValues({},e),r.length===0)return t(e);if(r[0].startsWith("{")){const i=r[0].substring(1,r[0].lastIndexOf("}")).split(",");for(const s of i)e[s]!=null&&(e[s]=jsonMutate(r.slice(1),e[s],t))}else if(r[0].endsWith("[]")){const i=r[0].substring(0,a[0].indexOf("["));e[i]instanceof Array&&(e[i]=e[i].map(s=>jsonMutate(r.slice(1),s,t)))}else if(r[0]==="*")for(const i in e)e[i]=jsonMutate(r.slice(1),e[i],t);else e[r[0]]!=null&&(e[r[0]]=jsonMutate(r.slice(1),e[r[0]],t));return e}var merge=(a,e)=>__spreadValues(__spreadValues({},a),e),ChartService=class extends import_core57.BeanStub{constructor(){super(...arguments),this.activeCharts=new Set,this.activeChartComps=new Set,this.crossFilteringContext={lastSelectedChartId:""},this.isEnterprise=()=>import_ag_charts_community32._ModuleSupport.enterpriseModule.isEnterprise}updateChart(a){if(this.activeChartComps.size===0){console.warn("AG Grid - No active charts to update.");return}const e=[...this.activeChartComps].find(t=>t.getChartId()===a.chartId);if(!e){console.warn(`AG Grid - Unable to update chart. No active chart found with ID: ${a.chartId}.`);return}e.update(a)}getChartModels(){const a=[],e=t=>__spreadProps(__spreadValues({},t),{version:VERSION});return this.activeChartComps.forEach(t=>a.push(e(t.getChartModel()))),a}getChartRef(a){let e;return this.activeCharts.forEach(t=>{t.chartId===a&&(e=t)}),e}getChartComp(a){let e;return this.activeChartComps.forEach(t=>{t.getChartId()===a&&(e=t)}),e}getChartImageDataURL(a){let e;return this.activeChartComps.forEach(t=>{t.getChartId()===a.chartId&&(e=t.getChartImageDataURL(a.fileFormat))}),e}downloadChart(a){const e=Array.from(this.activeChartComps).find(t=>t.getChartId()===a.chartId);e?.downloadChart(a.dimensions,a.fileName,a.fileFormat)}openChartToolPanel(a){const e=Array.from(this.activeChartComps).find(t=>t.getChartId()===a.chartId);e?.openChartToolPanel(a.panel)}closeChartToolPanel(a){const e=Array.from(this.activeChartComps).find(t=>t.getChartId()===a);e?.closeChartToolPanel()}createChartFromCurrentRange(a="groupedColumn"){const e=this.getSelectedRange();return this.createChart({cellRange:e,chartType:a})}restoreChart(a,e){if(!a){console.warn("AG Grid - unable to restore chart as no chart model is provided");return}a.version!==VERSION&&(a=upgradeChartModel(a));let t,r,i,s;if(a.modelType==="pivot"?(this.gos.updateGridOptions({options:{pivotMode:!0},source:"pivotChart"}),t=this.createCellRange(void 0,!0),r=!0,i=!0):(t=this.createCellRange(a.cellRange),s=a.chartPalette),!!t)return this.createChart(__spreadProps(__spreadValues({},a),{cellRange:t,pivotChart:r,suppressChartRanges:i,chartContainer:e,chartOptionsToRestore:a.chartOptions,chartPaletteToRestore:s}))}createRangeChart(a){const e=this.createCellRange(a.cellRange);if(e)return this.createChart(__spreadProps(__spreadValues({},a),{cellRange:e}))}createPivotChart(a){this.gos.updateGridOptions({options:{pivotMode:!0},source:"pivotChart"});const e=this.createCellRange(void 0,!0);if(e)return this.createChart(__spreadProps(__spreadValues({},a),{cellRange:e,pivotChart:!0,suppressChartRanges:!0}))}createCrossFilterChart(a){const e=this.createCellRange(a.cellRange);if(!e)return;const r=typeof a.suppressChartRanges<"u"&&a.suppressChartRanges!==null?a.suppressChartRanges:!0;return this.createChart(__spreadProps(__spreadValues({},a),{cellRange:e,suppressChartRanges:r,crossFiltering:!0}))}createChart(a){const e=ChartParamsValidator.validateCreateParams(a);if(!e)return;a=e===!0?a:e;const{chartType:t,chartContainer:r}=a,i=this.gos.getCallback("createChartContainer"),s=__spreadProps(__spreadValues({},a),{chartId:this.generateId(),chartType:getCanonicalChartType(t),insideDialog:!(r||i),crossFilteringContext:this.crossFilteringContext,crossFilteringResetCallback:()=>this.activeChartComps.forEach(l=>l.crossFilteringReset())}),n=new GridChartComp(s);this.context.createBean(n);const o=this.createChartRef(n);if(r){r.appendChild(n.getGui());const l=this.environment.getTheme();l.el&&!l.el.contains(r)&&r.classList.add(l.theme)}else i?i(o):n.addEventListener(GridChartComp.EVENT_DESTROYED,()=>{this.activeChartComps.delete(n),this.activeCharts.delete(o)});return o}createChartRef(a){const e={destroyChart:()=>{this.activeCharts.has(e)&&(this.context.destroyBean(a),this.activeChartComps.delete(a),this.activeCharts.delete(e))},chartElement:a.getGui(),chart:a.getUnderlyingChart(),chartId:a.getChartModel().chartId};return this.activeCharts.add(e),this.activeChartComps.add(a),e}getSelectedRange(){var a,e;const t=(e=(a=this.rangeService)==null?void 0:a.getCellRanges())!=null?e:[];return t.length>0?t[0]:{columns:[]}}generateId(){return`id-${Math.random().toString(36).substring(2,18)}`}createCellRange(a,e){var t;const r=e?{rowStartIndex:null,rowStartPinned:void 0,rowEndIndex:null,rowEndPinned:void 0,columns:this.columnModel.getAllDisplayedColumns().map(s=>s.getColId())}:a,i=r&&((t=this.rangeService)==null?void 0:t.createPartialCellRangeFromRangeParams(r,!0));return i||console.warn(`AG Grid - unable to create chart as ${e?"there are no columns in the grid":"no range is selected"}.`),i}destroyAllActiveCharts(){this.activeCharts.forEach(a=>a.destroyChart())}};ChartService.CHARTS_VERSION=import_ag_charts_community32.VERSION,__decorateClass([(0,import_core57.Autowired)("columnModel")],ChartService.prototype,"columnModel",2),__decorateClass([(0,import_core57.Optional)("rangeService")],ChartService.prototype,"rangeService",2),__decorateClass([import_core57.PreDestroy],ChartService.prototype,"destroyAllActiveCharts",1),ChartService=__decorateClass([(0,import_core57.Bean)("chartService")],ChartService);var import_core58=require("@ag-grid-community/core"),ChartTranslationService=class extends import_core58.BeanStub{translate(a){const e=this.localeService.getLocaleTextFunc(),t=ChartTranslationService.DEFAULT_TRANSLATIONS[a];return e(a,t)}};ChartTranslationService.DEFAULT_TRANSLATIONS={pivotChartTitle:"Pivot Chart",rangeChartTitle:"Range Chart",settings:"Chart",data:"Data",format:"Format",categories:"Categories",defaultCategory:"(None)",series:"Series",switchCategorySeries:"Switch Category / Series",categoryValues:"Category Values",seriesLabels:"Series Labels",aggregate:"Aggregate",xyValues:"X Y Values",paired:"Paired Mode",axis:"Axis",xAxis:"Horizontal Axis",yAxis:"Vertical Axis",polarAxis:"Polar Axis",radiusAxis:"Radius Axis",navigator:"Navigator",zoom:"Zoom",animation:"Animation",crosshair:"Crosshair",color:"Color",thickness:"Thickness",preferredLength:"Preferred Length",xType:"X Type",axisType:"Axis Type",automatic:"Automatic",category:"Category",number:"Number",time:"Time",timeFormat:"Time Format",autoRotate:"Auto Rotate",labelRotation:"Rotation",circle:"Circle",orientation:"Orientation",polygon:"Polygon",fixed:"Fixed",parallel:"Parallel",perpendicular:"Perpendicular",radiusAxisPosition:"Position",ticks:"Ticks",gridLines:"Grid Lines",width:"Width",height:"Height",length:"Length",padding:"Padding",spacing:"Spacing",chart:"Chart",title:"Title",titlePlaceholder:"Chart title - double click to edit",background:"Background",font:"Font",top:"Top",right:"Right",bottom:"Bottom",left:"Left",labels:"Labels",calloutLabels:"Callout Labels",sectorLabels:"Sector Labels",positionRatio:"Position Ratio",size:"Size",shape:"Shape",minSize:"Minimum Size",maxSize:"Maximum Size",legend:"Legend",position:"Position",markerSize:"Marker Size",markerStroke:"Marker Stroke",markerPadding:"Marker Padding",itemSpacing:"Item Spacing",itemPaddingX:"Item Padding X",itemPaddingY:"Item Padding Y",layoutHorizontalSpacing:"Horizontal Spacing",layoutVerticalSpacing:"Vertical Spacing",strokeWidth:"Stroke Width",offset:"Offset",offsets:"Offsets",tooltips:"Tooltips",callout:"Callout",markers:"Markers",shadow:"Shadow",blur:"Blur",xOffset:"X Offset",yOffset:"Y Offset",lineWidth:"Line Width",lineDash:"Line Dash",lineDashOffset:"Dash Offset",scrollingZoom:"Scrolling",scrollingStep:"Scrolling Step",selectingZoom:"Selecting",durationMillis:"Duration (ms)",crosshairLabel:"Label",crosshairSnap:"Snap to Node",normal:"Normal",bold:"Bold",italic:"Italic",boldItalic:"Bold Italic",predefined:"Predefined",fillOpacity:"Fill Opacity",strokeColor:"Line Color",strokeOpacity:"Line Opacity",miniChart:"Mini-Chart",histogramBinCount:"Bin count",connectorLine:"Connector Line",seriesItems:"Series Items",seriesItemType:"Item Type",seriesItemPositive:"Positive",seriesItemNegative:"Negative",seriesItemLabels:"Item Labels",columnGroup:"Column",barGroup:"Bar",pieGroup:"Pie",lineGroup:"Line",scatterGroup:"X Y (Scatter)",areaGroup:"Area",polarGroup:"Polar",statisticalGroup:"Statistical",hierarchicalGroup:"Hierarchical",specializedGroup:"Specialized",combinationGroup:"Combination",groupedColumnTooltip:"Grouped",stackedColumnTooltip:"Stacked",normalizedColumnTooltip:"100% Stacked",groupedBarTooltip:"Grouped",stackedBarTooltip:"Stacked",normalizedBarTooltip:"100% Stacked",pieTooltip:"Pie",donutTooltip:"Donut",lineTooltip:"Line",groupedAreaTooltip:"Area",stackedAreaTooltip:"Stacked",normalizedAreaTooltip:"100% Stacked",scatterTooltip:"Scatter",bubbleTooltip:"Bubble",histogramTooltip:"Histogram",radialColumnTooltip:"Radial Column",radialBarTooltip:"Radial Bar",radarLineTooltip:"Radar Line",radarAreaTooltip:"Radar Area",nightingaleTooltip:"Nightingale",rangeBarTooltip:"Range Bar",rangeAreaTooltip:"Range Area",boxPlotTooltip:"Box Plot",treemapTooltip:"Treemap",sunburstTooltip:"Sunburst",heatmapTooltip:"Heatmap",waterfallTooltip:"Waterfall",columnLineComboTooltip:"Column & Line",areaColumnComboTooltip:"Area & Column",customComboTooltip:"Custom Combination",innerRadius:"Inner Radius",startAngle:"Start Angle",endAngle:"End Angle",reverseDirection:"Reverse Direction",groupPadding:"Group Padding",seriesPadding:"Series Padding",group:"Group",tile:"Tile",whisker:"Whisker",cap:"Cap",capLengthRatio:"Length Ratio",labelPlacement:"Placement",inside:"Inside",outside:"Outside",noDataToChart:"No data available to be charted.",pivotChartRequiresPivotMode:"Pivot Chart requires Pivot Mode enabled.",chartSettingsToolbarTooltip:"Menu",chartLinkToolbarTooltip:"Linked to Grid",chartUnlinkToolbarTooltip:"Unlinked from Grid",chartDownloadToolbarTooltip:"Download Chart",chartMenuToolbarTooltip:"Menu",chartEdit:"Edit Chart",chartAdvancedSettings:"Advanced Settings",chartLink:"Link to Grid",chartUnlink:"Unlink from Grid",chartDownload:"Download Chart",histogramFrequency:"Frequency",seriesChartType:"Series Chart Type",seriesType:"Series Type",secondaryAxis:"Secondary Axis",seriesAdd:"Add a series",categoryAdd:"Add a category",area:"Area",bar:"Bar",column:"Column",line:"Line",scatter:"Scatter",histogram:"Histogram",radialColumn:"Radial Column",radialBar:"Radial Bar",radarLine:"Radar Line",radarArea:"Radar Area",nightingale:"Nightingale",rangeBar:"Range Bar",rangeArea:"Range Area",treemap:"Treemap",sunburst:"Sunburst",waterfall:"Waterfall",boxPlot:"Box Plot",pie:"Pie",donut:"Donut",stackedArea:"StackedArea",groupedColumn:"Grouped Column",stackedColumn:"Stacked Column",advancedSettings:"Advanced Settings",ariaChartMenuClose:"Close Chart Edit Menu",timeFormatSlashesDDMMYYYY:"DD/MM/YYYY",timeFormatSlashesMMDDYYYY:"MM/DD/YYYY",timeFormatSlashesDDMMYY:"DD/MM/YY",timeFormatSlashesMMDDYY:"MM/DD/YY",timeFormatDotsDDMYY:"DD.M.YY",timeFormatDotsMDDYY:"M.DD.YY",timeFormatDashesYYYYMMDD:"YYYY-MM-DD",timeFormatSpacesDDMMMMYYYY:"DD MMMM YYYY",timeFormatHHMMSS:"HH:MM:SS",timeFormatHHMMSSAmPm:"HH:MM:SS AM/PM",sum:"Sum",first:"First",last:"Last",min:"Min",max:"Max",count:"Count",avg:"Average",direction:"Direction",horizontal:"Horizontal",vertical:"Vertical",seriesGroupType:"Group Type",groupedSeriesGroupType:"Grouped",stackedSeriesGroupType:"Stacked",normalizedSeriesGroupType:"100% Stacked"},ChartTranslationService=__decorateClass([(0,import_core58.Bean)("chartTranslationService")],ChartTranslationService);var import_core59=require("@ag-grid-community/core"),ChartCrossFilterService=class extends import_core59.BeanStub{filter(a,e=!1){const t=this.gridApi.getFilterModel();if(e){this.resetFilters(t);return}let r=ChartCrossFilterService.extractFilterColId(a);this.isValidColumnFilter(r)?this.updateFilters(t,a,r):console.warn("AG Grid: cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: '"+r+"'")}resetFilters(a){Object.keys(a).length>0&&(this.gridApi.setFilterModel(null),this.gridApi.onFilterChanged())}updateFilters(a,e,t){let r=ChartCrossFilterService.extractFilterColId(e),i=e.datum[r];if(i===void 0)return;let s=i.toString();if(e.event.metaKey||e.event.ctrlKey){const n=this.getCurrentGridValuesForCategory(t),o=import_core59._.includes(n,s);let l;o?l=n.filter(c=>c!==s):(l=n,l.push(s)),a[t]=this.getUpdatedFilterModel(t,l)}else{const n=[s];a={[t]:this.getUpdatedFilterModel(t,n)}}this.gridApi.setFilterModel(a)}getUpdatedFilterModel(a,e){return this.getColumnFilterType(a)==="agMultiColumnFilter"?{filterType:"multi",filterModels:[null,{filterType:"set",values:e}]}:{filterType:"set",values:e}}getCurrentGridValuesForCategory(a){let e=[];const t=this.getColumnById(a);return this.gridApi.forEachNodeAfterFilter(r=>{if(t&&!r.group){const i=this.valueService.getValue(t,r)+"";e.includes(i)||e.push(i)}}),e}static extractFilterColId(a){return a.xKey||a.calloutLabelKey}isValidColumnFilter(a){a.indexOf("-filtered-out")&&(a=a.replace("-filtered-out",""));let e=this.getColumnFilterType(a);return typeof e=="boolean"?e:import_core59._.includes(["agSetColumnFilter","agMultiColumnFilter"],e)}getColumnFilterType(a){let e=this.getColumnById(a);if(e)return e.getColDef().filter}getColumnById(a){return this.columnModel.getGridColumn(a)}};__decorateClass([(0,import_core59.Autowired)("gridApi")],ChartCrossFilterService.prototype,"gridApi",2),__decorateClass([(0,import_core59.Autowired)("columnModel")],ChartCrossFilterService.prototype,"columnModel",2),__decorateClass([(0,import_core59.Autowired)("valueService")],ChartCrossFilterService.prototype,"valueService",2),ChartCrossFilterService=__decorateClass([(0,import_core59.Bean)("chartCrossFilterService")],ChartCrossFilterService);var VERSION_CHECKING_FIRST_GRID_MAJOR_VERSION=28,VERSION_CHECKING_FIRST_CHARTS_MAJOR_VERSION=6;function isValidVersion(a){return a&&a.match(/\d+\.\d+\.\d+/)}function isValidMajorVersion({gridMajorVersion:a,chartsMajorVersion:e}){const t=parseInt(a,10),r=parseInt(e,10),i=t-VERSION_CHECKING_FIRST_GRID_MAJOR_VERSION,s=r-VERSION_CHECKING_FIRST_CHARTS_MAJOR_VERSION,n=i>=0;return i===s&&n}function gridChartVersion(a){if(!a||!isValidVersion(a))return;const[e,t]=a.split(".")||[],r=`${e}.${t}.x`,s=parseInt(e,10)-VERSION_CHECKING_FIRST_GRID_MAJOR_VERSION+VERSION_CHECKING_FIRST_CHARTS_MAJOR_VERSION;if(s<0)return;const o=`${s}.${t}.x`;return{gridMajorMinor:r,chartsMajorMinor:o}}function validGridChartsVersionErrorMessage({type:a,gridVersion:e,chartsVersion:t}){const r="AG Grid: AG Grid version is incompatible. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.";if(!e)return r;const i=gridChartVersion(e);if(!i)return r;const{gridMajorMinor:s,chartsMajorMinor:n}=i;return a==="incompatible"?`AG Grid version ${e} and AG Charts version ${t} is not supported. AG Grid version ${s} should be used with AG Chart ${n}. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.`:a==="invalidCharts"?`AG Grid version ${s} should be used with AG Chart ${n}. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.`:r}function validGridChartsVersion({gridVersion:a,chartsVersion:e}){if(!isValidVersion(e))return{isValid:!1,message:validGridChartsVersionErrorMessage({type:"invalidCharts",gridVersion:a,chartsVersion:e})};if(!isValidVersion(a))return{isValid:!1,message:validGridChartsVersionErrorMessage({type:"invalidGrid",gridVersion:a,chartsVersion:e})};const[t,r]=a.split(".")||[],[i,s,n]=e.split(".")||[],o=isValidMajorVersion({gridMajorVersion:t,chartsMajorVersion:i});return o&&r===s||n.includes("beta")?{isValid:!0}:!o||r!==s?{isValid:!1,message:validGridChartsVersionErrorMessage({type:"incompatible",gridVersion:a,chartsVersion:e})}:{isValid:!1,message:validGridChartsVersionErrorMessage({type:"invalid",gridVersion:a,chartsVersion:e})}}var import_core60=require("@ag-grid-community/core"),ChartMenuListFactory=class extends import_core60.BeanStub{showMenuList(a){const{eventSource:e,showMenu:t,chartMenuContext:r}=a,i=this.chartMenuService.doChartToolPanelsExist(r.chartController),s=this.mapWithStockItems(this.getMenuItems(r.chartController,i),r,t,e,i);if(!s.length)return;const n=this.createBean(new ChartMenuList(s));this.activeChartMenuList=n;let o=-1,l="left";this.gos.get("enableRtl")&&(o=1,l="right");const c=n.getGui();this.popupService.addPopup({modal:!0,eChild:c,closeOnEsc:!0,closedCallback:()=>{this.destroyBean(n),this.activeChartMenuList=void 0;const h=this.gos.getDocument(),u=this.gos.getActiveDomElement();(!u||u===h.body)&&e.focus({preventScroll:!0})},afterGuiAttached:h=>n.afterGuiAttached(h),positionCallback:()=>{this.popupService.positionPopupByComponent({type:"chartMenu",eventSource:e,ePopup:c,alignSide:l,nudgeX:4*o,nudgeY:4,position:"under",keepWithinBounds:!0})},ariaLabel:"Chart Menu"})}getMenuItems(a,e){const t=[...e?["chartEdit"]:[],...a.isEnterprise()?["chartAdvancedSettings"]:[],a.isChartLinked()?"chartUnlink":"chartLink","chartDownload"],r=this.gos.get("chartMenuItems");return r?Array.isArray(r)?r:r(this.gos.addGridCommonParams({defaultItems:t})):t}mapWithStockItems(a,e,t,r,i){if(!a)return[];const s=[];return a.forEach(n=>{let o;if(typeof n=="string"?o=this.getStockMenuItem(n,e,t,r,i):o=__spreadValues({},n),!o)return;const{subMenu:l}=o;Array.isArray(l)&&(o.subMenu=this.mapWithStockItems(l,e,t,r,i)),s.push(o)}),s}getStockMenuItem(a,e,t,r,i){switch(a){case"chartEdit":return i?this.createMenuItem(this.chartTranslationService.translate("chartEdit"),"chartsMenuEdit",t):null;case"chartAdvancedSettings":return this.createMenuItem(this.chartTranslationService.translate("chartAdvancedSettings"),"chartsMenuAdvancedSettings",()=>this.chartMenuService.openAdvancedSettings(e,r));case"chartUnlink":return e.chartController.isChartLinked()?this.createMenuItem(this.chartTranslationService.translate("chartUnlink"),"unlinked",()=>this.chartMenuService.toggleLinked(e)):null;case"chartLink":return e.chartController.isChartLinked()?null:this.createMenuItem(this.chartTranslationService.translate("chartLink"),"linked",()=>this.chartMenuService.toggleLinked(e));case"chartDownload":return this.createMenuItem(this.chartTranslationService.translate("chartDownload"),"save",()=>this.chartMenuService.downloadChart(e))}return null}createMenuItem(a,e,t){return{name:a,icon:import_core60._.createIconNoSpan(e,this.gos,null),action:t}}destroy(){this.destroyBean(this.activeChartMenuList),super.destroy()}};__decorateClass([(0,import_core60.Autowired)("popupService")],ChartMenuListFactory.prototype,"popupService",2),__decorateClass([(0,import_core60.Autowired)("chartMenuService")],ChartMenuListFactory.prototype,"chartMenuService",2),__decorateClass([(0,import_core60.Autowired)("chartTranslationService")],ChartMenuListFactory.prototype,"chartTranslationService",2),ChartMenuListFactory=__decorateClass([(0,import_core60.Bean)("chartMenuListFactory")],ChartMenuListFactory);var ChartMenuList=class extends import_core60.Component{constructor(a){super(`
   174|             <div ref="eChartsMenu" role="presentation" class="ag-menu ag-chart-menu-popup"></div>
   175|         `),this.menuItems=a}init(){this.mainMenuList=this.createManagedBean(new import_core60.AgMenuList(0)),this.mainMenuList.addMenuItems(this.menuItems),this.mainMenuList.addEventListener(import_core60.AgMenuItemComponent.EVENT_CLOSE_MENU,this.onHidePopup.bind(this)),this.eChartsMenu.appendChild(this.mainMenuList.getGui())}onHidePopup(){var a;(a=this.hidePopupFunc)==null||a.call(this)}afterGuiAttached({hidePopup:a}){a&&(this.hidePopupFunc=a,this.addDestroyFunc(a)),this.focusService.focusInto(this.mainMenuList.getGui())}};__decorateClass([(0,import_core60.Autowired)("focusService")],ChartMenuList.prototype,"focusService",2),__decorateClass([(0,import_core60.RefSelector)("eChartsMenu")],ChartMenuList.prototype,"eChartsMenu",2),__decorateClass([import_core60.PostConstruct],ChartMenuList.prototype,"init",1);var import_core66=require("@ag-grid-community/core"),import_core65=require("@ag-grid-community/core"),import_core61=require("@ag-grid-community/core"),_AnimationPanel=class ke extends import_core61.Component{constructor(e){super(),this.chartMenuParamsFactory=e}init(){const e=this.chartMenuParamsFactory.addEnableParams("animation.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("animation"),suppressEnabledCheckbox:!0,useToggle:!0}),t=this.chartMenuParamsFactory.getDefaultNumberInputParams("animation.duration","durationMillis",{min:0});this.setTemplate(ke.TEMPLATE,{animationGroup:e,animationHeightInput:t})}};_AnimationPanel.TEMPLATE=`<div>
   176|             <ag-group-component ref="animationGroup">
   177|                 <ag-input-number-field ref="animationHeightInput"></ag-input>
   178|             </ag-group-component>
   179|         </div>`,__decorateClass([(0,import_core61.Autowired)("chartTranslationService")],_AnimationPanel.prototype,"chartTranslationService",2),__decorateClass([import_core61.PostConstruct],_AnimationPanel.prototype,"init",1);var AnimationPanel=_AnimationPanel,import_core62=require("@ag-grid-community/core"),_CrosshairPanel=class Ie extends import_core62.Component{constructor(e){super(),this.chartMenuParamsFactory=e}init(){const e=this.chartMenuParamsFactory.addEnableParams("crosshair.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("crosshair"),suppressEnabledCheckbox:!0,useToggle:!0}),t=this.chartMenuParamsFactory.getDefaultCheckboxParams("crosshair.label.enabled","crosshairLabel"),r=this.chartMenuParamsFactory.getDefaultCheckboxParams("crosshair.snap","crosshairSnap"),i=this.chartMenuParamsFactory.getDefaultColorPickerParams("crosshair.stroke","color");this.setTemplate(Ie.TEMPLATE,{crosshairGroup:e,crosshairLabelCheckbox:t,crosshairSnapCheckbox:r,crosshairStrokeColorPicker:i})}};_CrosshairPanel.TEMPLATE=`<div>
   180|             <ag-group-component ref="crosshairGroup">
   181|                 <ag-checkbox ref="crosshairLabelCheckbox"></ag-checkbox>
   182|                 <ag-checkbox ref="crosshairSnapCheckbox"></ag-checkbox>
   183|                 <ag-color-picker ref="crosshairStrokeColorPicker"></ag-color-picker>
   184|             </ag-group-component>
   185|         </div>`,__decorateClass([(0,import_core62.Autowired)("chartTranslationService")],_CrosshairPanel.prototype,"chartTranslationService",2),__decorateClass([import_core62.PostConstruct],_CrosshairPanel.prototype,"init",1);var CrosshairPanel=_CrosshairPanel,import_core63=require("@ag-grid-community/core"),_NavigatorPanel=class Le extends import_core63.Component{constructor(e){super(),this.chartMenuParamsFactory=e}init(){const e=this.chartMenuParamsFactory.addEnableParams("navigator.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("navigator"),suppressEnabledCheckbox:!0,useToggle:!0}),t=this.chartMenuParamsFactory.getDefaultSliderParams("navigator.height","height",60);t.minValue=10;const r=this.chartMenuParamsFactory.getDefaultCheckboxParams("navigator.miniChart.enabled","miniChart");this.setTemplate(Le.TEMPLATE,{navigatorGroup:e,navigatorHeightSlider:t,navigatorMiniChartCheckbox:r})}};_NavigatorPanel.TEMPLATE=`<div>
   186|             <ag-group-component ref="navigatorGroup">
   187|                 <ag-slider ref="navigatorHeightSlider"></ag-slider>
   188|                 <ag-checkbox ref="navigatorMiniChartCheckbox"></ag-checkbox>
   189|             </ag-group-component>
   190|         </div>`,__decorateClass([(0,import_core63.Autowired)("chartTranslationService")],_NavigatorPanel.prototype,"chartTranslationService",2),__decorateClass([import_core63.PostConstruct],_NavigatorPanel.prototype,"init",1);var NavigatorPanel=_NavigatorPanel,import_core64=require("@ag-grid-community/core"),_ZoomPanel=class Re extends import_core64.Component{constructor(e){super(),this.chartMenuParamsFactory=e}init(){const e=this.chartMenuParamsFactory.addEnableParams("zoom.enabled",{cssIdentifier:"charts-advanced-settings-top-level",direction:"vertical",suppressOpenCloseIcons:!0,title:this.chartTranslationService.translate("zoom"),suppressEnabledCheckbox:!0,useToggle:!0}),t=this.chartMenuParamsFactory.getDefaultCheckboxParams("zoom.enableScrolling","scrollingZoom"),r=this.chartMenuParamsFactory.getDefaultSliderParams("zoom.scrollingStep","scrollingStep",1);r.step=.01,r.minValue=r.step;const i=this.chartMenuParamsFactory.getDefaultCheckboxParams("zoom.enableSelecting","selectingZoom");t.onValueChange=(s=>n=>{s&&(s(n),this.zoomScrollingStepInput.setDisabled(!n))})(t.onValueChange),this.setTemplate(Re.TEMPLATE,{zoomGroup:e,zoomScrollingCheckbox:t,zoomScrollingStepInput:r,zoomSelectingCheckbox:i}),this.zoomScrollingStepInput.setDisabled(!t.value)}};_ZoomPanel.TEMPLATE=`<div>
   191|             <ag-group-component ref="zoomGroup">
   192|                 <ag-checkbox ref="zoomSelectingCheckbox"></ag-checkbox>
   193|                 <ag-checkbox ref="zoomScrollingCheckbox"></ag-checkbox>


# ====================================================================
# FILE: enterprise-modules/charts/dist/types/src/version.d.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export declare const VERSION = "31.3.4";


# ====================================================================
# FILE: enterprise-modules/charts/src/version.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export const VERSION = '31.3.4';


# ====================================================================
# FILE: enterprise-modules/clipboard/dist/package/main.cjs.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 850-879 ---
   850|   (0, import_core.Autowired)("columnModel")
   851| ], ClipboardService.prototype, "columnModel", 2);
   852| __decorateClass([
   853|   (0, import_core.Autowired)("cellNavigationService")
   854| ], ClipboardService.prototype, "cellNavigationService", 2);
   855| __decorateClass([
   856|   (0, import_core.Autowired)("cellPositionUtils")
   857| ], ClipboardService.prototype, "cellPositionUtils", 2);
   858| __decorateClass([
   859|   (0, import_core.Autowired)("rowPositionUtils")
   860| ], ClipboardService.prototype, "rowPositionUtils", 2);
   861| __decorateClass([
   862|   (0, import_core.Optional)("rangeService")
   863| ], ClipboardService.prototype, "rangeService", 2);
   864| __decorateClass([
   865|   import_core.PostConstruct
   866| ], ClipboardService.prototype, "init", 1);
   867| ClipboardService = __decorateClass([
   868|   (0, import_core.Bean)("clipboardService")
   869| ], ClipboardService);
   870| var VERSION = "31.3.4";
   871| var ClipboardModule = {
   872|   version: VERSION,
   873|   moduleName: import_core2.ModuleNames.ClipboardModule,
   874|   beans: [ClipboardService],
   875|   dependantModules: [
   876|     import_core3.EnterpriseCoreModule,
   877|     import_csv_export.CsvExportModule
   878|   ]
   879| };


# ====================================================================
# FILE: enterprise-modules/clipboard/dist/package/main.cjs.min.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-4 ---
     1| var __defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__hasOwnProp=Object.prototype.hasOwnProperty,__export=(t,e)=>{for(var s in e)__defProp(t,s,{get:e[s],enumerable:!0})},__copyProps=(t,e,s,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of __getOwnPropNames(e))!__hasOwnProp.call(t,r)&&r!==s&&__defProp(t,r,{get:()=>e[r],enumerable:!(o=__getOwnPropDesc(e,r))||o.enumerable});return t},__toCommonJS=t=>__copyProps(__defProp({},"__esModule",{value:!0}),t),__decorateClass=(t,e,s,o)=>{for(var r=o>1?void 0:o?__getOwnPropDesc(e,s):e,l=t.length-1,i;l>=0;l--)(i=t[l])&&(r=(o?i(e,s,r):i(r))||r);return o&&r&&__defProp(e,s,r),r},main_exports={};__export(main_exports,{ClipboardModule:()=>ClipboardModule}),module.exports=__toCommonJS(main_exports);var import_core2=require("@ag-grid-community/core"),import_core3=require("@ag-grid-enterprise/core"),import_csv_export=require("@ag-grid-community/csv-export"),import_core=require("@ag-grid-community/core"),SOURCE_PASTE="paste",EXPORT_TYPE_DRAG_COPY="dragCopy",EXPORT_TYPE_CLIPBOARD="clipboard",apiError=t=>`AG Grid: Unable to use the Clipboard API (navigator.clipboard.${t}()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API.`,ClipboardService=class extends import_core.BeanStub{constructor(){super(...arguments),this.lastPasteOperationTime=0,this.navigatorApiFailed=!1}init(){this.logger=this.loggerFactory.create("ClipboardService"),this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(t=>{this.gridCtrl=t.gridCtrl})}pasteFromClipboard(){this.logger.log("pasteFromClipboard"),!this.gos.get("suppressClipboardApi")&&!this.navigatorApiFailed&&navigator.clipboard&&navigator.clipboard.readText?navigator.clipboard.readText().then(this.processClipboardData.bind(this)).catch(e=>{import_core._.doOnce(()=>{console.warn(e),console.warn(apiError("readText"))},"clipboardApiError"),this.navigatorApiFailed=!0,this.pasteFromClipboardLegacy()}):this.pasteFromClipboardLegacy()}pasteFromClipboardLegacy(){let t=!1;const e=s=>{const o=new Date().getTime();o-this.lastPasteOperationTime<50&&(t=!0,s.preventDefault()),this.lastPasteOperationTime=o};this.executeOnTempElement(s=>{s.addEventListener("paste",e),s.focus({preventScroll:!0})},s=>{const o=s.value;t?this.refocusLastFocusedCell():this.processClipboardData(o),s.removeEventListener("paste",e)})}refocusLastFocusedCell(){const t=this.focusService.getFocusedCell();t&&this.focusService.setFocusedCell({rowIndex:t.rowIndex,column:t.column,rowPinned:t.rowPinned,forceBrowserFocus:!0})}getClipboardDelimiter(){const t=this.gos.get("clipboardDelimiter");return import_core._.exists(t)?t:"	"}processClipboardData(t){if(t==null)return;let e=ClipboardService.stringToArray(t,this.getClipboardDelimiter());const s=this.gos.getCallback("processDataFromClipboard");if(s&&(e=s({data:e})),e==null)return;this.gos.get("suppressLastEmptyLineOnPaste")&&this.removeLastLineIfBlank(e);const o=(r,l,i,a)=>{var c;((c=this.rangeService)==null?void 0:c.isMoreThanOneCell())&&!this.hasOnlyOneValueToPaste(e)?this.pasteIntoActiveRange(this.rangeService,e,r,l,a):this.pasteStartingFromFocusedCell(e,r,l,i,a)};this.doPasteOperation(o)}static stringToArray(t,e=","){const s=[],o=l=>l==="\r"||l===`
     2| `;let r=!1;if(t==="")return[[""]];for(let l=0,i=0,a=0;a<t.length;a++){const c=t[a-1],u=t[a],n=t[a+1],d=()=>{s[l]||(s[l]=[]),s[l][i]||(s[l][i]="")};if(d(),u==='"'&&(r?n==='"'?(s[l][i]+='"',a++):r=!1:(c===void 0||c===e||o(c))&&(r=!0)),!r&&u!=='"'){if(u===e){i++,d();continue}else if(o(u)){i=0,l++,d(),u==="\r"&&n===`
     3| `&&a++;continue}}s[l][i]+=u}return s}doPasteOperation(t){const e="clipboard";this.eventService.dispatchEvent({type:import_core.Events.EVENT_PASTE_START,source:e});let s;if(this.clientSideRowModel){const c=this.gos.get("aggregateOnlyChangedColumns");s=new import_core.ChangedPath(c,this.clientSideRowModel.getRootNode())}const o={},r=[],l=this.focusService.getFocusedCell();t(o,r,l,s);const i=[...r];s&&(this.clientSideRowModel.doAggregate(s),s.forEachChangedNodeDepthFirst(c=>{i.push(c)})),this.rowRenderer.refreshCells({rowNodes:i}),this.dispatchFlashCells(o),this.fireRowChanged(r),this.refocusLastFocusedCell();const a={type:import_core.Events.EVENT_PASTE_END,source:e};this.eventService.dispatchEvent(a)}pasteIntoActiveRange(t,e,s,o,r){const l=this.getRangeSize(t)%e.length!=0;let i=0,a=0;const c=(u,n,d,p)=>{if(p-i>=e.length){if(l)return;i+=a,a=0}const g=e[p-i];o.push(n);const f=this.gos.getCallback("processCellFromClipboard");d.forEach((C,v)=>{if(!C.isCellEditable(n)||C.isSuppressPaste(n))return;v>=g.length&&(v=v%g.length);const w=this.processCell(n,C,g[v],EXPORT_TYPE_DRAG_COPY,f,!0);n.setDataValue(C,w,SOURCE_PASTE),r&&r.addParentNode(n.parent,[C]);const{rowIndex:m,rowPinned:b}=u,S=this.cellPositionUtils.createIdFromValues({rowIndex:m,column:C,rowPinned:b});s[S]=!0}),a++};this.iterateActiveRanges(!1,c)}getDisplayedColumnsStartingAt(t){let e=t;const s=[];for(;e!=null;)s.push(e),e=this.columnModel.getDisplayedColAfter(e);return s}pasteStartingFromFocusedCell(t,e,s,o,r){if(!o)return;const l={rowIndex:o.rowIndex,rowPinned:o.rowPinned},i=this.getDisplayedColumnsStartingAt(o.column);this.isPasteSingleValueIntoRange(t)?this.pasteSingleValueIntoRange(t,s,e,r):this.pasteMultipleValues(t,l,s,i,e,EXPORT_TYPE_CLIPBOARD,r)}isPasteSingleValueIntoRange(t){return this.hasOnlyOneValueToPaste(t)&&this.rangeService!=null&&!this.rangeService.isEmpty()}pasteSingleValueIntoRange(t,e,s,o){const r=t[0][0],l=(i,a,c)=>{e.push(a),c.forEach(u=>this.updateCellValue(a,u,r,s,EXPORT_TYPE_CLIPBOARD,o))};this.iterateActiveRanges(!1,l)}hasOnlyOneValueToPaste(t){return t.length===1&&t[0].length===1}copyRangeDown(){if(!this.rangeService||this.rangeService.isEmpty())return;const t=[],e=(s,o,r,l)=>{const i=this.gos.getCallback("processCellForClipboard"),a=this.gos.getCallback("processCellFromClipboard"),c=(u,n,d)=>{t.length?(o.push(n),d.forEach((p,h)=>{if(!p.isCellEditable(n)||p.isSuppressPaste(n))return;const g=this.processCell(n,p,t[h],EXPORT_TYPE_DRAG_COPY,a,!0);n.setDataValue(p,g,SOURCE_PASTE),l&&l.addParentNode(n.parent,[p]);const{rowIndex:f,rowPinned:C}=u,v=this.cellPositionUtils.createIdFromValues({rowIndex:f,column:p,rowPinned:C});s[v]=!0})):d.forEach(p=>{const h=this.processCell(n,p,this.valueService.getValue(p,n),EXPORT_TYPE_DRAG_COPY,i,!1,!0);t.push(h)})};this.iterateActiveRanges(!0,c)};this.doPasteOperation(e)}removeLastLineIfBlank(t){const e=import_core._.last(t);if(e&&e.length===1&&e[0]===""){if(t.length===1)return;import_core._.removeFromArray(t,e)}}fireRowChanged(t){this.gos.get("editType")==="fullRow"&&t.forEach(e=>{const s={type:import_core.Events.EVENT_ROW_VALUE_CHANGED,node:e,data:e.data,rowIndex:e.rowIndex,rowPinned:e.rowPinned};this.eventService.dispatchEvent(s)})}pasteMultipleValues(t,e,s,o,r,l,i){let a=e;const c=this.clientSideRowModel!=null&&!this.gos.get("enableGroupEdit")&&!this.gos.get("treeData"),u=()=>{for(;;){if(!a)return null;const n=this.rowPositionUtils.getRowNode(a);if(a=this.cellNavigationService.getRowBelow({rowPinned:a.rowPinned,rowIndex:a.rowIndex}),n==null)return null;if(!(n.detail||n.footer||c&&n.group))return n}};t.forEach(n=>{const d=u();d&&(n.forEach((p,h)=>this.updateCellValue(d,o[h],p,r,l,i)),s.push(d))})}updateCellValue(t,e,s,o,r,l){if(!t||!e||!e.isCellEditable(t)||e.isSuppressPaste(t)||t.group&&e.isValueActive())return;const i=this.processCell(t,e,s,r,this.gos.getCallback("processCellFromClipboard"),!0);t.setDataValue(e,i,SOURCE_PASTE);const{rowIndex:a,rowPinned:c}=t,u=this.cellPositionUtils.createIdFromValues({rowIndex:a,column:e,rowPinned:c});o[u]=!0,l&&l.addParentNode(t.parent,[e])}copyToClipboard(t={}){this.copyOrCutToClipboard(t)}cutToClipboard(t={},e="api"){if(this.gos.get("suppressCutToClipboard"))return;const s={type:import_core.Events.EVENT_CUT_START,source:e};this.eventService.dispatchEvent(s),this.copyOrCutToClipboard(t,!0);const o={type:import_core.Events.EVENT_CUT_END,source:e};this.eventService.dispatchEvent(o)}copyOrCutToClipboard(t,e){let{includeHeaders:s,includeGroupHeaders:o}=t;this.logger.log(`copyToClipboard: includeHeaders = ${s}`),s==null&&(s=this.gos.get("copyHeadersToClipboard")),o==null&&(o=this.gos.get("copyGroupHeadersToClipboard"));const r={includeHeaders:s,includeGroupHeaders:o},l=!this.gos.get("suppressCopyRowsToClipboard");let i=null;this.rangeService&&!this.rangeService.isEmpty()&&!this.shouldSkipSingleCellRange(this.rangeService)?(this.copySelectedRangeToClipboard(r),i=0):l&&!this.selectionService.isEmpty()?(this.copySelectedRowsToClipboard(r),i=1):this.focusService.isAnyCellFocused()&&(this.copyFocusedCellToClipboard(r),i=2),e&&i!==null&&this.clearCellsAfterCopy(i)}clearCellsAfterCopy(t){if(this.eventService.dispatchEvent({type:import_core.Events.EVENT_KEY_SHORTCUT_CHANGED_CELL_START}),t===0)this.rangeService.clearCellRangeCellValues({cellEventSource:"clipboardService"});else if(t===1)this.clearSelectedRows();else{const e=this.focusService.getFocusedCell();if(e==null)return;const s=this.rowPositionUtils.getRowNode(e);s&&this.clearCellValue(s,e.column)}this.eventService.dispatchEvent({type:import_core.Events.EVENT_KEY_SHORTCUT_CHANGED_CELL_END})}clearSelectedRows(){const t=this.selectionService.getSelectedNodes(),e=this.columnModel.getAllDisplayedColumns();for(const s of t)for(const o of e)this.clearCellValue(s,o)}clearCellValue(t,e){var s;if(!e.isCellEditable(t))return;const o=(s=this.valueService.parseValue(e,t,"",t.getValueFromValueService(e)))!=null?s:null;t.setDataValue(e,o,"clipboardService")}shouldSkipSingleCellRange(t){return this.gos.get("suppressCopySingleCellRanges")&&!t.isMoreThanOneCell()}iterateActiveRanges(t,e,s){if(!this.rangeService||this.rangeService.isEmpty())return;const o=this.rangeService.getCellRanges();t?this.iterateActiveRange(o[0],e,s,!0):o.forEach((r,l)=>this.iterateActiveRange(r,e,s,l===o.length-1))}iterateActiveRange(t,e,s,o){if(!this.rangeService)return;let r=this.rangeService.getRangeStartRow(t);const l=this.rangeService.getRangeEndRow(t);s&&t.columns&&s(t.columns);let i=0,a=!1;for(;!a&&r!=null;){const c=this.rowPositionUtils.getRowNode(r);a=this.rowPositionUtils.sameRow(r,l),e(r,c,t.columns,i++,a&&o),r=this.cellNavigationService.getRowBelow(r)}}copySelectedRangeToClipboard(t={}){if(!this.rangeService||this.rangeService.isEmpty())return;const e=this.rangeService.areAllRangesAbleToMerge(),{data:s,cellsToFlash:o}=e?this.buildDataFromMergedRanges(this.rangeService,t):this.buildDataFromRanges(this.rangeService,t);this.copyDataToClipboard(s),this.dispatchFlashCells(o)}buildDataFromMergedRanges(t,e){const s=new Set,o=t.getCellRanges(),r=new Map,l=[],i={};o.forEach(n=>{n.columns.forEach(h=>s.add(h));const{rowPositions:d,cellsToFlash:p}=this.getRangeRowPositionsAndCellsToFlash(t,n);d.forEach(h=>{const g=`${h.rowIndex}-${h.rowPinned||"null"}`;r.get(g)||(r.set(g,!0),l.push(h))}),Object.assign(i,p)});const a=this.columnModel.getAllDisplayedColumns(),c=Array.from(s);return c.sort((n,d)=>{const p=a.indexOf(n),h=a.indexOf(d);return p-h}),{data:this.buildExportParams({columns:c,rowPositions:l,includeHeaders:e.includeHeaders,includeGroupHeaders:e.includeGroupHeaders}),cellsToFlash:i}}buildDataFromRanges(t,e){const s=t.getCellRanges(),o=[],r={};return s.forEach(l=>{const{rowPositions:i,cellsToFlash:a}=this.getRangeRowPositionsAndCellsToFlash(t,l);Object.assign(r,a),o.push(this.buildExportParams({columns:l.columns,rowPositions:i,includeHeaders:e.includeHeaders,includeGroupHeaders:e.includeGroupHeaders}))}),{data:o.join(`
     4| `),cellsToFlash:r}}getRangeRowPositionsAndCellsToFlash(t,e){const s=[],o={},r=t.getRangeStartRow(e),l=t.getRangeEndRow(e);let i=r;for(;i&&(s.push(i),e.columns.forEach(a=>{const{rowIndex:c,rowPinned:u}=i,n=this.cellPositionUtils.createIdFromValues({rowIndex:c,column:a,rowPinned:u});o[n]=!0}),!this.rowPositionUtils.sameRow(i,l));)i=this.cellNavigationService.getRowBelow(i);return{rowPositions:s,cellsToFlash:o}}getCellsToFlashFromRowNodes(t){const e=this.columnModel.getAllDisplayedColumns(),s={};for(let o=0;o<t.length;o++){const{rowIndex:r,rowPinned:l}=t[o];if(r!=null)for(let i=0;i<e.length;i++){const a=e[i],c=this.cellPositionUtils.createIdFromValues({rowIndex:r,column:a,rowPinned:l});s[c]=!0}}return s}copyFocusedCellToClipboard(t={}){const e=this.focusService.getFocusedCell();if(e==null)return;const s=this.cellPositionUtils.createId(e),o={rowPinned:e.rowPinned,rowIndex:e.rowIndex},r=e.column,l=this.buildExportParams({columns:[r],rowPositions:[o],includeHeaders:t.includeHeaders,includeGroupHeaders:t.includeGroupHeaders});this.copyDataToClipboard(l),this.dispatchFlashCells({[s]:!0})}copySelectedRowsToClipboard(t={}){const{columnKeys:e,includeHeaders:s,includeGroupHeaders:o}=t,r=this.buildExportParams({columns:e,includeHeaders:s,includeGroupHeaders:o});this.copyDataToClipboard(r);const l=this.selectionService.getSelectedNodes()||[];this.dispatchFlashCells(this.getCellsToFlashFromRowNodes(l))}buildExportParams(t){const{columns:e,rowPositions:s,includeHeaders:o=!1,includeGroupHeaders:r=!1}=t,l={columnKeys:e,rowPositions:s,skipColumnHeaders:!o,skipColumnGroupHeaders:!r,suppressQuotes:!0,columnSeparator:this.getClipboardDelimiter(),onlySelected:!s,processCellCallback:this.gos.getCallback("processCellForClipboard"),processRowGroupCallback:i=>this.processRowGroupCallback(i),processHeaderCallback:this.gos.getCallback("processHeaderForClipboard"),processGroupHeaderCallback:this.gos.getCallback("processGroupHeaderForClipboard")};return this.csvCreator.getDataAsCsv(l,!0)}processRowGroupCallback(t){const{node:e,column:s}=t,o=this.gos.get("treeData"),r=this.gos.get("suppressGroupMaintainValueType");let i=(()=>{var c,u;if(o||r||!s)return e.key;const n=(c=e.groupData)==null?void 0:c[s.getId()];return!n||!e.rowGroupColumn||e.rowGroupColumn.getColDef().useValueFormatterForExport===!1?n:(u=this.valueService.formatValue(e.rowGroupColumn,e,n))!=null?u:n})();if(t.node.footer){let c="";i&&i.length&&(c=` ${i}`),i=`Total${c}`}const a=this.gos.getCallback("processCellForClipboard");if(a){let c=e.rowGroupColumn;return!c&&e.footer&&e.level===-1&&(c=this.columnModel.getRowGroupColumns()[0]),a({value:i,node:e,column:c,type:"clipboard",formatValue:u=>{var n;return(n=this.valueService.formatValue(c,e,u))!=null?n:u},parseValue:u=>this.valueService.parseValue(c,e,u,this.valueService.getValue(c,e))})}return i}dispatchFlashCells(t){window.setTimeout(()=>{const e={type:import_core.Events.EVENT_FLASH_CELLS,cells:t};this.eventService.dispatchEvent(e)},0)}processCell(t,e,s,o,r,l,i){var a;return r?r({column:e,node:t,value:s,type:o,formatValue:u=>{var n;return(n=this.valueService.formatValue(e,t??null,u))!=null?n:u},parseValue:u=>this.valueService.parseValue(e,t??null,u,this.valueService.getValue(e,t))}):l&&e.getColDef().useValueParserForImport!==!1?this.valueService.parseValue(e,t??null,s,this.valueService.getValue(e,t)):i&&e.getColDef().useValueFormatterForExport!==!1&&(a=this.valueService.formatValue(e,t??null,s))!=null?a:s}copyDataToClipboard(t){const e=this.gos.getCallback("sendToClipboard");if(e){e({data:t});return}if(!this.gos.get("suppressClipboardApi")&&navigator.clipboard){navigator.clipboard.writeText(t).catch(o=>{import_core._.doOnce(()=>{console.warn(o),console.warn(apiError("writeText"))},"clipboardApiError"),this.copyDataToClipboardLegacy(t)});return}this.copyDataToClipboardLegacy(t)}copyDataToClipboardLegacy(t){this.executeOnTempElement(e=>{const s=this.gos.getDocument(),o=this.gos.getActiveDomElement();e.value=t||" ",e.select(),e.focus({preventScroll:!0}),s.execCommand("copy")||console.warn("AG Grid: Browser did not allow document.execCommand('copy'). Ensure api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons."),o!=null&&o.focus!=null&&o.focus({preventScroll:!0})})}executeOnTempElement(t,e){const s=this.gos.getDocument(),o=s.createElement("textarea");o.style.width="1px",o.style.height="1px",o.style.top=s.documentElement.scrollTop+"px",o.style.left=s.documentElement.scrollLeft+"px",o.style.position="absolute",o.style.opacity="0";const r=this.gridCtrl.getGui();r.appendChild(o);try{t(o)}catch{console.warn("AG Grid: Browser does not support document.execCommand('copy') for clipboard operations")}e?window.setTimeout(()=>{e(o),r.removeChild(o)},100):r.removeChild(o)}getRangeSize(t){const e=t.getCellRanges();let s=0,o=0;return e.length>0&&(s=t.getRangeStartRow(e[0]).rowIndex,o=t.getRangeEndRow(e[0]).rowIndex),s-o+1}};__decorateClass([(0,import_core.Autowired)("csvCreator")],ClipboardService.prototype,"csvCreator",2),__decorateClass([(0,import_core.Autowired)("loggerFactory")],ClipboardService.prototype,"loggerFactory",2),__decorateClass([(0,import_core.Autowired)("selectionService")],ClipboardService.prototype,"selectionService",2),__decorateClass([(0,import_core.Autowired)("rowModel")],ClipboardService.prototype,"rowModel",2),__decorateClass([(0,import_core.Autowired)("ctrlsService")],ClipboardService.prototype,"ctrlsService",2),__decorateClass([(0,import_core.Autowired)("valueService")],ClipboardService.prototype,"valueService",2),__decorateClass([(0,import_core.Autowired)("focusService")],ClipboardService.prototype,"focusService",2),__decorateClass([(0,import_core.Autowired)("rowRenderer")],ClipboardService.prototype,"rowRenderer",2),__decorateClass([(0,import_core.Autowired)("columnModel")],ClipboardService.prototype,"columnModel",2),__decorateClass([(0,import_core.Autowired)("cellNavigationService")],ClipboardService.prototype,"cellNavigationService",2),__decorateClass([(0,import_core.Autowired)("cellPositionUtils")],ClipboardService.prototype,"cellPositionUtils",2),__decorateClass([(0,import_core.Autowired)("rowPositionUtils")],ClipboardService.prototype,"rowPositionUtils",2),__decorateClass([(0,import_core.Optional)("rangeService")],ClipboardService.prototype,"rangeService",2),__decorateClass([import_core.PostConstruct],ClipboardService.prototype,"init",1),ClipboardService=__decorateClass([(0,import_core.Bean)("clipboardService")],ClipboardService);var VERSION="31.3.4",ClipboardModule={version:VERSION,moduleName:import_core2.ModuleNames.ClipboardModule,beans:[ClipboardService],dependantModules:[import_core3.EnterpriseCoreModule,import_csv_export.CsvExportModule]};


# ====================================================================
# FILE: enterprise-modules/clipboard/dist/types/src/version.d.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export declare const VERSION = "31.3.4";


# ====================================================================
# FILE: enterprise-modules/clipboard/src/version.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export const VERSION = '31.3.4';


# ====================================================================
# FILE: enterprise-modules/column-tool-panel/dist/package/main.cjs.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1975-2013 ---
  1975|       rowGroup: column.isRowGroupActive(),
  1976|       aggFunc: column.isValueActive() ? column.getAggFunc() : void 0
  1977|     };
  1978|   }
  1979| };
  1980| __decorateClass([
  1981|   (0, import_core11.Autowired)("aggFuncService")
  1982| ], ModelItemUtils.prototype, "aggFuncService", 2);
  1983| __decorateClass([
  1984|   (0, import_core11.Autowired)("columnModel")
  1985| ], ModelItemUtils.prototype, "columnModel", 2);
  1986| __decorateClass([
  1987|   (0, import_core11.Autowired)("gridOptionsService")
  1988| ], ModelItemUtils.prototype, "gos", 2);
  1989| __decorateClass([
  1990|   (0, import_core11.Autowired)("eventService")
  1991| ], ModelItemUtils.prototype, "eventService", 2);
  1992| ModelItemUtils = __decorateClass([
  1993|   (0, import_core11.Bean)("modelItemUtils")
  1994| ], ModelItemUtils);
  1995| var VERSION = "31.3.4";
  1996| var ColumnsToolPanelModule = {
  1997|   version: VERSION,
  1998|   moduleName: import_core12.ModuleNames.ColumnsToolPanelModule,
  1999|   beans: [ModelItemUtils],
  2000|   agStackComponents: [
  2001|     { componentName: "AgPrimaryColsHeader", componentClass: PrimaryColsHeaderPanel },
  2002|     { componentName: "AgPrimaryColsList", componentClass: PrimaryColsListPanel },
  2003|     { componentName: "AgPrimaryCols", componentClass: PrimaryColsPanel }
  2004|   ],
  2005|   userComponents: [
  2006|     { componentName: "agColumnsToolPanel", componentClass: ColumnToolPanel }
  2007|   ],
  2008|   dependantModules: [
  2009|     import_core13.EnterpriseCoreModule,
  2010|     import_row_grouping2.RowGroupingModule,
  2011|     import_side_bar.SideBarModule
  2012|   ]
  2013| };


# ====================================================================
# FILE: enterprise-modules/column-tool-panel/dist/package/main.cjs.min.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-20 ---
     1| var __defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(o,e,t)=>e in o?__defProp(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,__spreadValues=(o,e)=>{for(var t in e||(e={}))__hasOwnProp.call(e,t)&&__defNormalProp(o,t,e[t]);if(__getOwnPropSymbols)for(var t of __getOwnPropSymbols(e))__propIsEnum.call(e,t)&&__defNormalProp(o,t,e[t]);return o},__export=(o,e)=>{for(var t in e)__defProp(o,t,{get:e[t],enumerable:!0})},__copyProps=(o,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of __getOwnPropNames(e))!__hasOwnProp.call(o,i)&&i!==t&&__defProp(o,i,{get:()=>e[i],enumerable:!(s=__getOwnPropDesc(e,i))||s.enumerable});return o},__toCommonJS=o=>__copyProps(__defProp({},"__esModule",{value:!0}),o),__decorateClass=(o,e,t,s)=>{for(var i=s>1?void 0:s?__getOwnPropDesc(e,t):e,n=o.length-1,a;n>=0;n--)(a=o[n])&&(i=(s?a(e,t,i):a(i))||i);return s&&i&&__defProp(e,t,i),i},main_exports={};__export(main_exports,{ColumnsToolPanelModule:()=>ColumnsToolPanelModule,PrimaryColsPanel:()=>PrimaryColsPanel}),module.exports=__toCommonJS(main_exports);var import_core12=require("@ag-grid-community/core"),import_core13=require("@ag-grid-enterprise/core"),import_core=require("@ag-grid-community/core"),_PrimaryColsHeaderPanel=class h extends import_core.Component{constructor(){super(h.TEMPLATE)}postConstruct(){this.createExpandIcons(),this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eExpand,"keydown",t=>{t.key===import_core.KeyCode.SPACE&&(t.preventDefault(),this.onExpandClicked())}),this.addManagedListener(this.eSelect.getInputElement(),"click",this.onSelectClicked.bind(this)),this.addManagedPropertyListener("functionsReadOnly",()=>this.onFunctionsReadOnlyPropChanged()),this.eFilterTextField.setAutoComplete(!1).onValueChange(()=>this.onFilterTextChanged()),this.addManagedListener(this.eFilterTextField.getInputElement(),"keydown",this.onMiniFilterKeyDown.bind(this)),this.addManagedListener(this.eventService,import_core.Events.EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this));const e=this.localeService.getLocaleTextFunc();this.eSelect.setInputAriaLabel(e("ariaColumnSelectAll","Toggle Select All Columns")),this.eFilterTextField.setInputAriaLabel(e("ariaFilterColumnsInput","Filter Columns Input")),this.activateTabIndex([this.eExpand])}onFunctionsReadOnlyPropChanged(){const e=this.gos.get("functionsReadOnly");this.eSelect.setReadOnly(e),this.eSelect.addOrRemoveCssClass("ag-column-select-column-readonly",e)}init(e){this.params=e;const t=this.gos.get("functionsReadOnly");this.eSelect.setReadOnly(t),this.eSelect.addOrRemoveCssClass("ag-column-select-column-readonly",t),this.columnModel.isReady()&&this.showOrHideOptions()}createExpandIcons(){this.eExpand.appendChild(this.eExpandChecked=import_core._.createIconNoSpan("columnSelectOpen",this.gos)),this.eExpand.appendChild(this.eExpandUnchecked=import_core._.createIconNoSpan("columnSelectClosed",this.gos)),this.eExpand.appendChild(this.eExpandIndeterminate=import_core._.createIconNoSpan("columnSelectIndeterminate",this.gos)),this.setExpandState(0)}showOrHideOptions(){const e=!this.params.suppressColumnFilter,t=!this.params.suppressColumnSelectAll,s=!this.params.suppressColumnExpandAll,i=this.columnModel.isPrimaryColumnGroupsPresent(),n=this.localeService.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(n("searchOoo","Search...")),import_core._.setDisplayed(this.eFilterTextField.getGui(),e),import_core._.setDisplayed(this.eSelect.getGui(),t),import_core._.setDisplayed(this.eExpand,s&&i)}onFilterTextChanged(){this.onFilterTextChangedDebounced||(this.onFilterTextChangedDebounced=import_core._.debounce(()=>{const e=this.eFilterTextField.getValue();this.dispatchEvent({type:"filterChanged",filterText:e})},h.DEBOUNCE_DELAY)),this.onFilterTextChangedDebounced()}onMiniFilterKeyDown(e){e.key===import_core.KeyCode.ENTER&&setTimeout(()=>this.onSelectClicked(),h.DEBOUNCE_DELAY)}onSelectClicked(){this.dispatchEvent({type:this.selectState?"unselectAll":"selectAll"})}onExpandClicked(){this.dispatchEvent({type:this.expandState===0?"collapseAll":"expandAll"})}setExpandState(e){this.expandState=e,import_core._.setDisplayed(this.eExpandChecked,this.expandState===0),import_core._.setDisplayed(this.eExpandUnchecked,this.expandState===1),import_core._.setDisplayed(this.eExpandIndeterminate,this.expandState===2)}setSelectionState(e){this.selectState=e,this.eSelect.setValue(this.selectState)}};_PrimaryColsHeaderPanel.DEBOUNCE_DELAY=300,_PrimaryColsHeaderPanel.TEMPLATE=`<div class="ag-column-select-header" role="presentation">
     2|             <div ref="eExpand" class="ag-column-select-header-icon"></div>
     3|             <ag-checkbox ref="eSelect" class="ag-column-select-header-checkbox"></ag-checkbox>
     4|             <ag-input-text-field class="ag-column-select-header-filter-wrapper" ref="eFilterTextField"></ag-input-text-field>
     5|         </div>`,__decorateClass([(0,import_core.Autowired)("columnModel")],_PrimaryColsHeaderPanel.prototype,"columnModel",2),__decorateClass([(0,import_core.RefSelector)("eExpand")],_PrimaryColsHeaderPanel.prototype,"eExpand",2),__decorateClass([(0,import_core.RefSelector)("eSelect")],_PrimaryColsHeaderPanel.prototype,"eSelect",2),__decorateClass([(0,import_core.RefSelector)("eFilterTextField")],_PrimaryColsHeaderPanel.prototype,"eFilterTextField",2),__decorateClass([import_core.PostConstruct],_PrimaryColsHeaderPanel.prototype,"postConstruct",1);var PrimaryColsHeaderPanel=_PrimaryColsHeaderPanel,import_core7=require("@ag-grid-community/core"),import_core5=require("@ag-grid-community/core"),import_core4=require("@ag-grid-community/core"),import_core2=require("@ag-grid-community/core"),_ColumnModelItem=class m{constructor(e,t,s,i=!1,n){this.eventService=new import_core2.EventService,this.displayName=e,this.dept=s,this.group=i,i?(this.columnGroup=t,this.expanded=n,this.children=[]):this.column=t}isGroup(){return this.group}getDisplayName(){return this.displayName}getColumnGroup(){return this.columnGroup}getColumn(){return this.column}getDept(){return this.dept}isExpanded(){return!!this.expanded}getChildren(){return this.children}isPassesFilter(){return this.passesFilter}setExpanded(e){e!==this.expanded&&(this.expanded=e,this.eventService.dispatchEvent({type:m.EVENT_EXPANDED_CHANGED}))}setPassesFilter(e){this.passesFilter=e}addEventListener(e,t){this.eventService.addEventListener(e,t)}removeEventListener(e,t){this.eventService.removeEventListener(e,t)}};_ColumnModelItem.EVENT_EXPANDED_CHANGED="expandedChanged";var ColumnModelItem=_ColumnModelItem,import_core3=require("@ag-grid-community/core"),ToolPanelContextMenu=class extends import_core3.Component{constructor(o,e,t){super('<div class="ag-menu"></div>'),this.column=o,this.mouseEvent=e,this.parentEl=t,this.displayName=null}postConstruct(){if(this.initializeProperties(this.column),this.buildMenuItemMap(),this.column instanceof import_core3.Column?this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnToolPanel"):this.displayName=this.columnModel.getDisplayNameForProvidedColumnGroup(null,this.column,"columnToolPanel"),this.isActive()){this.mouseEvent.preventDefault();const o=this.getMappedMenuItems();if(o.length===0)return;this.displayContextMenu(o)}}initializeProperties(o){o instanceof import_core3.ProvidedColumnGroup?this.columns=o.getLeafColumns():this.columns=[o],this.allowGrouping=this.columns.some(e=>e.isPrimary()&&e.isAllowRowGroup()),this.allowValues=this.columns.some(e=>e.isPrimary()&&e.isAllowValue()),this.allowPivoting=this.columnModel.isPivotMode()&&this.columns.some(e=>e.isPrimary()&&e.isAllowPivot())}buildMenuItemMap(){const o=this.localeService.getLocaleTextFunc();this.menuItemMap=new Map,this.menuItemMap.set("rowGroup",{allowedFunction:e=>e.isPrimary()&&e.isAllowRowGroup()&&!this.columnModel.isColumnGroupingLocked(e),activeFunction:e=>e.isRowGroupActive(),activateLabel:()=>`${o("groupBy","Group by")} ${this.displayName}`,deactivateLabel:()=>`${o("ungroupBy","Un-Group by")} ${this.displayName}`,activateFunction:()=>{const e=this.columnModel.getRowGroupColumns();this.columnModel.setRowGroupColumns(this.addColumnsToList(e),"toolPanelUi")},deActivateFunction:()=>{const e=this.columnModel.getRowGroupColumns();this.columnModel.setRowGroupColumns(this.removeColumnsFromList(e),"toolPanelUi")},addIcon:"menuAddRowGroup",removeIcon:"menuRemoveRowGroup"}),this.menuItemMap.set("value",{allowedFunction:e=>e.isPrimary()&&e.isAllowValue(),activeFunction:e=>e.isValueActive(),activateLabel:()=>o("addToValues",`Add ${this.displayName} to values`,[this.displayName]),deactivateLabel:()=>o("removeFromValues",`Remove ${this.displayName} from values`,[this.displayName]),activateFunction:()=>{const e=this.columnModel.getValueColumns();this.columnModel.setValueColumns(this.addColumnsToList(e),"toolPanelUi")},deActivateFunction:()=>{const e=this.columnModel.getValueColumns();this.columnModel.setValueColumns(this.removeColumnsFromList(e),"toolPanelUi")},addIcon:"valuePanel",removeIcon:"valuePanel"}),this.menuItemMap.set("pivot",{allowedFunction:e=>this.columnModel.isPivotMode()&&e.isPrimary()&&e.isAllowPivot(),activeFunction:e=>e.isPivotActive(),activateLabel:()=>o("addToLabels",`Add ${this.displayName} to labels`,[this.displayName]),deactivateLabel:()=>o("removeFromLabels",`Remove ${this.displayName} from labels`,[this.displayName]),activateFunction:()=>{const e=this.columnModel.getPivotColumns();this.columnModel.setPivotColumns(this.addColumnsToList(e),"toolPanelUi")},deActivateFunction:()=>{const e=this.columnModel.getPivotColumns();this.columnModel.setPivotColumns(this.removeColumnsFromList(e),"toolPanelUi")},addIcon:"pivotPanel",removeIcon:"pivotPanel"})}addColumnsToList(o){return[...o].concat(this.columns.filter(e=>o.indexOf(e)===-1))}removeColumnsFromList(o){return o.filter(e=>this.columns.indexOf(e)===-1)}displayContextMenu(o){const e=this.getGui(),t=this.createBean(new import_core3.AgMenuList),s=this.localeService.getLocaleTextFunc();let i=()=>{};e.appendChild(t.getGui()),t.addMenuItems(o),t.addManagedListener(t,import_core3.AgMenuItemComponent.EVENT_CLOSE_MENU,()=>{this.parentEl.focus(),i()});const n=this.popupService.addPopup({modal:!0,eChild:e,closeOnEsc:!0,afterGuiAttached:()=>this.focusService.focusInto(t.getGui()),ariaLabel:s("ariaLabelContextMenu","Context Menu"),closedCallback:a=>{a instanceof KeyboardEvent&&this.parentEl.focus(),this.destroyBean(t)}});n&&(i=n.hideFunc),this.popupService.positionPopupUnderMouseEvent({type:"columnContextMenu",mouseEvent:this.mouseEvent,ePopup:e})}isActive(){return this.allowGrouping||this.allowValues||this.allowPivoting}getMappedMenuItems(){const o=[];for(const e of this.menuItemMap.values()){const t=this.columns.some(i=>e.allowedFunction(i)&&!e.activeFunction(i)),s=this.columns.some(i=>e.allowedFunction(i)&&e.activeFunction(i));t&&o.push({name:e.activateLabel(this.displayName),icon:import_core3._.createIconNoSpan(e.addIcon,this.gos,null),action:()=>e.activateFunction()}),s&&o.push({name:e.deactivateLabel(this.displayName),icon:import_core3._.createIconNoSpan(e.removeIcon,this.gos,null),action:()=>e.deActivateFunction()})}return o}};__decorateClass([(0,import_core3.Autowired)("columnModel")],ToolPanelContextMenu.prototype,"columnModel",2),__decorateClass([(0,import_core3.Autowired)("popupService")],ToolPanelContextMenu.prototype,"popupService",2),__decorateClass([(0,import_core3.Autowired)("focusService")],ToolPanelContextMenu.prototype,"focusService",2),__decorateClass([import_core3.PostConstruct],ToolPanelContextMenu.prototype,"postConstruct",1);var _ToolPanelColumnGroupComp=class g extends import_core4.Component{constructor(e,t,s,i){super(),this.modelItem=e,this.allowDragging=t,this.eventType=s,this.focusWrapper=i,this.processingColumnStateChange=!1,this.modelItem=e,this.columnGroup=e.getColumnGroup(),this.columnDept=e.getDept(),this.displayName=e.getDisplayName(),this.allowDragging=t}init(){this.setTemplate(g.TEMPLATE),this.eDragHandle=import_core4._.createIconNoSpan("columnDrag",this.gos),this.eDragHandle.classList.add("ag-drag-handle","ag-column-select-column-group-drag-handle");const e=this.cbSelect.getGui(),t=this.cbSelect.getInputElement();e.insertAdjacentElement("afterend",this.eDragHandle),t.setAttribute("tabindex","-1"),this.eLabel.innerHTML=this.displayName?this.displayName:"",this.setupExpandContract(),this.addCssClass("ag-column-select-indent-"+this.columnDept),this.addManagedListener(this.eventService,import_core4.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.addManagedListener(this.cbSelect,import_core4.Events.EVENT_FIELD_VALUE_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.modelItem,ColumnModelItem.EVENT_EXPANDED_CHANGED,this.onExpandChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.addManagedListener(this.focusWrapper,"contextmenu",this.onContextMenu.bind(this)),this.setOpenClosedIcons(),this.setupDragging(),this.onColumnStateChanged(),this.addVisibilityListenersToAllChildren(),this.refreshAriaExpanded(),this.refreshAriaLabel(),this.setupTooltip(),import_core4.CssClassApplier.getToolPanelClassesFromColDef(this.columnGroup.getColGroupDef(),this.gos,null,this.columnGroup).forEach(i=>this.addOrRemoveCssClass(i,!0))}getColumns(){return this.columnGroup.getLeafColumns()}setupTooltip(){const e=this.columnGroup.getColGroupDef();if(!e)return;const t=this.gos.get("tooltipShowMode")==="whenTruncated";let s;t&&(s=()=>this.eLabel.scrollWidth>this.eLabel.clientWidth);const i=()=>{const n=e.headerTooltip;this.setTooltip({newTooltipText:n,location:"columnToolPanelColumnGroup",shouldDisplayTooltip:s})};i(),this.addManagedListener(this.eventService,import_core4.Events.EVENT_NEW_COLUMNS_LOADED,i)}getTooltipParams(){const e=super.getTooltipParams();return e.location="columnToolPanelColumnGroup",e}handleKeyDown(e){switch(e.key){case import_core4.KeyCode.LEFT:e.preventDefault(),this.modelItem.setExpanded(!1);break;case import_core4.KeyCode.RIGHT:e.preventDefault(),this.modelItem.setExpanded(!0);break;case import_core4.KeyCode.SPACE:e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected());break}}onContextMenu(e){const{columnGroup:t,gos:s}=this;if(s.get("functionsReadOnly"))return;const i=this.createBean(new ToolPanelContextMenu(t,e,this.focusWrapper));this.addDestroyFunc(()=>{i.isAlive()&&this.destroyBean(i)})}addVisibilityListenersToAllChildren(){this.columnGroup.getLeafColumns().forEach(e=>{this.addManagedListener(e,import_core4.Column.EVENT_VISIBLE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(e,import_core4.Column.EVENT_VALUE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(e,import_core4.Column.EVENT_PIVOT_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(e,import_core4.Column.EVENT_ROW_GROUP_CHANGED,this.onColumnStateChanged.bind(this))})}setupDragging(){if(!this.allowDragging){import_core4._.setDisplayed(this.eDragHandle,!1);return}let e=!this.gos.get("suppressDragLeaveHidesColumns");const t={type:import_core4.DragSourceType.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDefaultIconName:()=>e?import_core4.DragAndDropService.ICON_HIDE:import_core4.DragAndDropService.ICON_NOT_ALLOWED,getDragItem:()=>this.createDragItem(),onDragStarted:()=>{e=!this.gos.get("suppressDragLeaveHidesColumns");const s={type:import_core4.Events.EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:this.columnGroup};this.eventService.dispatchEvent(s)},onDragStopped:()=>{const s={type:import_core4.Events.EVENT_COLUMN_PANEL_ITEM_DRAG_END};this.eventService.dispatchEvent(s)},onGridEnter:s=>{e&&this.modelItemUtils.updateColumns({columns:this.columnGroup.getLeafColumns(),visibleState:s?.visibleState,pivotState:s?.pivotState,eventType:this.eventType})},onGridExit:()=>{e&&this.onChangeCommon(!1)}};this.dragAndDropService.addDragSource(t,!0),this.addDestroyFunc(()=>this.dragAndDropService.removeDragSource(t))}createDragItem(){const e=this.columnGroup.getLeafColumns(),t={},s={};return e.forEach(i=>{const n=i.getId();t[n]=i.isVisible(),s[n]=this.modelItemUtils.createPivotState(i)}),{columns:e,visibleState:t,pivotState:s}}setupExpandContract(){this.eGroupClosedIcon.appendChild(import_core4._.createIcon("columnSelectClosed",this.gos,null)),this.eGroupOpenedIcon.appendChild(import_core4._.createIcon("columnSelectOpen",this.gos,null)),this.addManagedListener(this.eGroupClosedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.addManagedListener(this.eGroupOpenedIcon,"click",this.onExpandOrContractClicked.bind(this));const e=new import_core4.TouchListener(this.eColumnGroupIcons,!0);this.addManagedListener(e,import_core4.TouchListener.EVENT_TAP,this.onExpandOrContractClicked.bind(this)),this.addDestroyFunc(e.destroy.bind(e))}onLabelClicked(){const e=!this.cbSelect.getValue();this.onChangeCommon(e)}onCheckboxChanged(e){this.onChangeCommon(e.selected)}getVisibleLeafColumns(){const e=[],t=s=>{s.forEach(i=>{i.isPassesFilter()&&(i.isGroup()?t(i.getChildren()):e.push(i.getColumn()))})};return t(this.modelItem.getChildren()),e}onChangeCommon(e){this.refreshAriaLabel(),!this.processingColumnStateChange&&this.modelItemUtils.selectAllChildren(this.modelItem.getChildren(),e,this.eventType)}refreshAriaLabel(){const e=this.localeService.getLocaleTextFunc(),t=e("ariaColumnGroup","Column Group"),s=this.cbSelect.getValue(),i=s===void 0?e("ariaIndeterminate","indeterminate"):s?e("ariaVisible","visible"):e("ariaHidden","hidden"),n=e("ariaToggleVisibility","Press SPACE to toggle visibility");import_core4._.setAriaLabel(this.focusWrapper,`${this.displayName} ${t}`),this.cbSelect.setInputAriaLabel(`${n} (${i})`),import_core4._.setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)}onColumnStateChanged(){const e=this.workOutSelectedValue(),t=this.workOutReadOnlyValue();this.processingColumnStateChange=!0,this.cbSelect.setValue(e),this.cbSelect.setReadOnly(t),this.addOrRemoveCssClass("ag-column-select-column-group-readonly",t),this.processingColumnStateChange=!1}workOutSelectedValue(){const e=this.columnModel.isPivotMode(),t=this.getVisibleLeafColumns();let s=0,i=0;if(t.forEach(n=>{!e&&n.getColDef().lockVisible||(this.isColumnChecked(n,e)?s++:i++)}),!(s>0&&i>0))return s>0}workOutReadOnlyValue(){const e=this.columnModel.isPivotMode();let t=0;return this.columnGroup.getLeafColumns().forEach(s=>{e?s.isAnyFunctionAllowed()&&t++:s.getColDef().lockVisible||t++}),t===0}isColumnChecked(e,t){if(t){const s=e.isPivotActive(),i=e.isRowGroupActive(),n=e.isValueActive();return s||i||n}return e.isVisible()}onExpandOrContractClicked(){const e=this.modelItem.isExpanded();this.modelItem.setExpanded(!e)}onExpandChanged(){this.setOpenClosedIcons(),this.refreshAriaExpanded()}setOpenClosedIcons(){const e=this.modelItem.isExpanded();import_core4._.setDisplayed(this.eGroupClosedIcon,!e),import_core4._.setDisplayed(this.eGroupOpenedIcon,e)}refreshAriaExpanded(){import_core4._.setAriaExpanded(this.focusWrapper,this.modelItem.isExpanded())}getDisplayName(){return this.displayName}onSelectAllChanged(e){const t=this.cbSelect.getValue();!this.cbSelect.isReadOnly()&&(e&&!t||!e&&t)&&this.cbSelect.toggle()}isSelected(){return this.cbSelect.getValue()}isSelectable(){return!this.cbSelect.isReadOnly()}setSelected(e){this.cbSelect.setValue(e,!0)}};_ToolPanelColumnGroupComp.TEMPLATE=`<div class="ag-column-select-column-group" aria-hidden="true">
     6|             <span class="ag-column-group-icons" ref="eColumnGroupIcons" >
     7|                 <span class="ag-column-group-closed-icon" ref="eGroupClosedIcon"></span>
     8|                 <span class="ag-column-group-opened-icon" ref="eGroupOpenedIcon"></span>
     9|             </span>
    10|             <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>
    11|             <span class="ag-column-select-column-label" ref="eLabel"></span>
    12|         </div>`,__decorateClass([(0,import_core4.Autowired)("columnModel")],_ToolPanelColumnGroupComp.prototype,"columnModel",2),__decorateClass([(0,import_core4.Autowired)("dragAndDropService")],_ToolPanelColumnGroupComp.prototype,"dragAndDropService",2),__decorateClass([(0,import_core4.Autowired)("modelItemUtils")],_ToolPanelColumnGroupComp.prototype,"modelItemUtils",2),__decorateClass([(0,import_core4.RefSelector)("cbSelect")],_ToolPanelColumnGroupComp.prototype,"cbSelect",2),__decorateClass([(0,import_core4.RefSelector)("eLabel")],_ToolPanelColumnGroupComp.prototype,"eLabel",2),__decorateClass([(0,import_core4.RefSelector)("eGroupOpenedIcon")],_ToolPanelColumnGroupComp.prototype,"eGroupOpenedIcon",2),__decorateClass([(0,import_core4.RefSelector)("eGroupClosedIcon")],_ToolPanelColumnGroupComp.prototype,"eGroupClosedIcon",2),__decorateClass([(0,import_core4.RefSelector)("eColumnGroupIcons")],_ToolPanelColumnGroupComp.prototype,"eColumnGroupIcons",2),__decorateClass([import_core4.PostConstruct],_ToolPanelColumnGroupComp.prototype,"init",1);var ToolPanelColumnGroupComp=_ToolPanelColumnGroupComp,PrimaryColsListPanelItemDragFeature=class extends import_core5.BeanStub{constructor(o,e){super(),this.comp=o,this.virtualList=e}postConstruct(){this.createManagedBean(new import_core5.VirtualListDragFeature(this.comp,this.virtualList,{dragSourceType:import_core5.DragSourceType.ToolPanel,listItemDragStartEvent:import_core5.Events.EVENT_COLUMN_PANEL_ITEM_DRAG_START,listItemDragEndEvent:import_core5.Events.EVENT_COLUMN_PANEL_ITEM_DRAG_END,eventSource:this.eventService,getCurrentDragValue:o=>this.getCurrentDragValue(o),isMoveBlocked:o=>this.isMoveBlocked(o),getNumRows:o=>o.getDisplayedColsList().length,moveItem:(o,e)=>this.moveItem(o,e)}))}getCurrentDragValue(o){return o.column}isMoveBlocked(o){return this.gos.get("suppressMovableColumns")?!0:!!this.getCurrentColumns(o).find(i=>{const n=i.getColDef();return!!n.suppressMovable||!!n.lockPosition})}moveItem(o,e){const t=this.getTargetIndex(o,e),s=this.getCurrentColumns(o);t!=null&&this.columnModel.moveColumns(s,t,"toolPanelUi")}getMoveDiff(o,e){const t=this.columnModel.getAllGridColumns(),s=this.getCurrentColumns(o),i=s[0],n=s.length;return t.indexOf(i)<e?n:0}getCurrentColumns(o){return o instanceof import_core5.ProvidedColumnGroup?o.getLeafColumns():[o]}getTargetIndex(o,e){if(!e)return null;const t=e.component;let s=e.position==="top",i;if(t instanceof ToolPanelColumnGroupComp?(i=t.getColumns()[0],s=!0):i=t.getColumn(),this.getCurrentColumns(o).indexOf(i)!==-1)return null;const a=this.columnModel.getAllGridColumns().indexOf(i),l=s?a:a+1,r=this.getMoveDiff(o,l);return l-r}};__decorateClass([(0,import_core5.Autowired)("columnModel")],PrimaryColsListPanelItemDragFeature.prototype,"columnModel",2),__decorateClass([import_core5.PostConstruct],PrimaryColsListPanelItemDragFeature.prototype,"postConstruct",1);var import_core6=require("@ag-grid-community/core"),_ToolPanelColumnComp=class C extends import_core6.Component{constructor(e,t,s,i){super(),this.allowDragging=t,this.groupsExist=s,this.focusWrapper=i,this.processingColumnStateChange=!1,this.column=e.getColumn(),this.columnDept=e.getDept(),this.displayName=e.getDisplayName()}init(){this.setTemplate(C.TEMPLATE),this.eDragHandle=import_core6._.createIconNoSpan("columnDrag",this.gos),this.eDragHandle.classList.add("ag-drag-handle","ag-column-select-column-drag-handle");const e=this.cbSelect.getGui(),t=this.cbSelect.getInputElement();e.insertAdjacentElement("afterend",this.eDragHandle),t.setAttribute("tabindex","-1");const s=import_core6._.escapeString(this.displayName);this.eLabel.innerHTML=s;const i=this.columnDept;this.groupsExist&&this.addCssClass("ag-column-select-add-group-indent"),this.addCssClass(`ag-column-select-indent-${i}`),this.setupDragging(),this.addManagedListener(this.eventService,import_core6.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,import_core6.Column.EVENT_VALUE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,import_core6.Column.EVENT_PIVOT_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,import_core6.Column.EVENT_ROW_GROUP_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,import_core6.Column.EVENT_VISIBLE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.addManagedListener(this.focusWrapper,"contextmenu",this.onContextMenu.bind(this)),this.addManagedPropertyListener("functionsReadOnly",this.onColumnStateChanged.bind(this)),this.addManagedListener(this.cbSelect,import_core6.Events.EVENT_FIELD_VALUE_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.onColumnStateChanged(),this.refreshAriaLabel(),this.setupTooltip(),import_core6.CssClassApplier.getToolPanelClassesFromColDef(this.column.getColDef(),this.gos,this.column,null).forEach(a=>this.addOrRemoveCssClass(a,!0))}getColumn(){return this.column}setupTooltip(){const e=this.gos.get("tooltipShowMode")==="whenTruncated";let t;e&&(t=()=>this.eLabel.scrollWidth>this.eLabel.clientWidth);const s=()=>{const i=this.column.getColDef().headerTooltip;this.setTooltip({newTooltipText:i,location:"columnToolPanelColumn",shouldDisplayTooltip:t})};s(),this.addManagedListener(this.eventService,import_core6.Events.EVENT_NEW_COLUMNS_LOADED,s)}getTooltipParams(){const e=super.getTooltipParams();return e.location="columnToolPanelColumn",e.colDef=this.column.getColDef(),e}onContextMenu(e){const{column:t,gos:s}=this;if(s.get("functionsReadOnly"))return;const i=this.createBean(new ToolPanelContextMenu(t,e,this.focusWrapper));this.addDestroyFunc(()=>{i.isAlive()&&this.destroyBean(i)})}handleKeyDown(e){e.key===import_core6.KeyCode.SPACE&&(e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected()))}onLabelClicked(){if(this.gos.get("functionsReadOnly"))return;const e=!this.cbSelect.getValue();this.onChangeCommon(e)}onCheckboxChanged(e){this.onChangeCommon(e.selected)}onChangeCommon(e){this.cbSelect.isReadOnly()||(this.refreshAriaLabel(),!this.processingColumnStateChange&&this.modelItemUtils.setColumn(this.column,e,"toolPanelUi"))}refreshAriaLabel(){const e=this.localeService.getLocaleTextFunc(),t=e("ariaColumn","Column"),s=this.cbSelect.getValue()?e("ariaVisible","visible"):e("ariaHidden","hidden"),i=e("ariaToggleVisibility","Press SPACE to toggle visibility");import_core6._.setAriaLabel(this.focusWrapper,`${this.displayName} ${t}`),this.cbSelect.setInputAriaLabel(`${i} (${s})`),import_core6._.setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)}setupDragging(){if(!this.allowDragging){import_core6._.setDisplayed(this.eDragHandle,!1);return}let e=!this.gos.get("suppressDragLeaveHidesColumns");const t={type:import_core6.DragSourceType.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDefaultIconName:()=>e?import_core6.DragAndDropService.ICON_HIDE:import_core6.DragAndDropService.ICON_NOT_ALLOWED,getDragItem:()=>this.createDragItem(),onDragStarted:()=>{e=!this.gos.get("suppressDragLeaveHidesColumns");const s={type:import_core6.Events.EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:this.column};this.eventService.dispatchEvent(s)},onDragStopped:()=>{const s={type:import_core6.Events.EVENT_COLUMN_PANEL_ITEM_DRAG_END};this.eventService.dispatchEvent(s)},onGridEnter:s=>{e&&this.modelItemUtils.updateColumns({columns:[this.column],visibleState:s?.visibleState,pivotState:s?.pivotState,eventType:"toolPanelUi"})},onGridExit:()=>{e&&this.onChangeCommon(!1)}};this.dragAndDropService.addDragSource(t,!0),this.addDestroyFunc(()=>this.dragAndDropService.removeDragSource(t))}createDragItem(){const e=this.column.getColId(),t={[e]:this.column.isVisible()},s={[e]:this.modelItemUtils.createPivotState(this.column)};return{columns:[this.column],visibleState:t,pivotState:s}}onColumnStateChanged(){this.processingColumnStateChange=!0;const e=this.columnModel.isPivotMode();if(e){const n=this.column.isAnyFunctionActive();this.cbSelect.setValue(n)}else this.cbSelect.setValue(this.column.isVisible());let t=!0,s=!0;if(e){const n=this.gos.get("functionsReadOnly"),a=!this.column.isAnyFunctionAllowed();t=!n&&!a,s=t}else{const{enableRowGroup:n,enableValue:a,lockPosition:l,suppressMovable:r,lockVisible:u}=this.column.getColDef(),c=!!n||!!a,d=!!l||!!r;t=!u,s=c||!d}this.cbSelect.setReadOnly(!t),this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!s),this.addOrRemoveCssClass("ag-column-select-column-readonly",!s&&!t);const i=e&&this.gos.get("functionsPassive");this.cbSelect.setPassive(i),this.processingColumnStateChange=!1}getDisplayName(){return this.displayName}onSelectAllChanged(e){e!==this.cbSelect.getValue()&&(this.cbSelect.isReadOnly()||this.cbSelect.toggle())}isSelected(){return this.cbSelect.getValue()}isSelectable(){return!this.cbSelect.isReadOnly()}isExpandable(){return!1}setExpanded(e){console.warn("AG Grid: can not expand a column item that does not represent a column group header")}};_ToolPanelColumnComp.TEMPLATE=`<div class="ag-column-select-column" aria-hidden="true">
    13|             <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>
    14|             <span class="ag-column-select-column-label" ref="eLabel"></span>
    15|         </div>`,__decorateClass([(0,import_core6.Autowired)("columnModel")],_ToolPanelColumnComp.prototype,"columnModel",2),__decorateClass([(0,import_core6.Autowired)("dragAndDropService")],_ToolPanelColumnComp.prototype,"dragAndDropService",2),__decorateClass([(0,import_core6.Autowired)("modelItemUtils")],_ToolPanelColumnComp.prototype,"modelItemUtils",2),__decorateClass([(0,import_core6.RefSelector)("eLabel")],_ToolPanelColumnComp.prototype,"eLabel",2),__decorateClass([(0,import_core6.RefSelector)("cbSelect")],_ToolPanelColumnComp.prototype,"cbSelect",2),__decorateClass([import_core6.PostConstruct],_ToolPanelColumnComp.prototype,"init",1);var ToolPanelColumnComp=_ToolPanelColumnComp,UIColumnModel=class{constructor(o){this.items=o}getRowCount(){return this.items.length}getRow(o){return this.items[o]}},PRIMARY_COLS_LIST_PANEL_CLASS="ag-column-select-list",_PrimaryColsListPanel=class v extends import_core7.Component{constructor(){super(v.TEMPLATE),this.destroyColumnItemFuncs=[],this.hasLoadedInitialState=!1,this.isInitialState=!1}destroyColumnTree(){this.allColsTree=[],this.destroyColumnItemFuncs.forEach(e=>e()),this.destroyColumnItemFuncs=[]}init(e,t,s){this.params=e,this.allowDragging=t,this.eventType=s,this.params.suppressSyncLayoutWithGrid||this.addManagedListener(this.eventService,import_core7.Events.EVENT_COLUMN_MOVED,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,import_core7.Events.EVENT_NEW_COLUMNS_LOADED,this.onColumnsChanged.bind(this)),[import_core7.Events.EVENT_COLUMN_PIVOT_CHANGED,import_core7.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,import_core7.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,import_core7.Events.EVENT_COLUMN_VALUE_CHANGED,import_core7.Events.EVENT_COLUMN_VISIBLE,import_core7.Events.EVENT_NEW_COLUMNS_LOADED].forEach(n=>{this.addManagedListener(this.eventService,n,this.fireSelectionChangedEvent.bind(this))}),this.expandGroupsByDefault=!this.params.contractColumnSelection,this.virtualList=this.createManagedBean(new import_core7.VirtualList({cssIdentifier:"column-select",ariaRole:"tree"})),this.appendChild(this.virtualList.getGui()),this.virtualList.setComponentCreator((n,a)=>(import_core7._.setAriaLevel(a,n.getDept()+1),this.createComponentFromItem(n,a))),this.columnModel.isReady()&&this.onColumnsChanged(),!this.params.suppressColumnMove&&this.createManagedBean(new PrimaryColsListPanelItemDragFeature(this,this.virtualList))}createComponentFromItem(e,t){if(e.isGroup()){const i=new ToolPanelColumnGroupComp(e,this.allowDragging,this.eventType,t);return this.getContext().createBean(i),i}const s=new ToolPanelColumnComp(e,this.allowDragging,this.groupsExist,t);return this.getContext().createBean(s),s}onColumnsChanged(){this.hasLoadedInitialState||(this.hasLoadedInitialState=!0,this.isInitialState=!!this.params.initialState);const e=this.getExpandedStates(),t=this.columnModel.isPivotMode();!this.params.suppressSyncLayoutWithGrid&&!t?this.buildTreeFromWhatGridIsDisplaying():this.buildTreeFromProvidedColumnDefs(),this.setExpandedStates(e),this.markFilteredColumns(),this.flattenAndFilterModel(),this.isInitialState=!1}getDisplayedColsList(){return this.displayedColsList}getExpandedStates(){const e={};if(this.isInitialState){const{expandedGroupIds:t}=this.params.initialState;return t.forEach(s=>{e[s]=!0}),e}return this.allColsTree?(this.forEachItem(t=>{if(!t.isGroup())return;const s=t.getColumnGroup();s&&(e[s.getId()]=t.isExpanded())}),e):{}}setExpandedStates(e){if(!this.allColsTree)return;const{isInitialState:t}=this;this.forEachItem(s=>{if(!s.isGroup())return;const i=s.getColumnGroup();if(i){const n=e[i.getId()];(n!=null||t)&&s.setExpanded(!!n)}})}buildTreeFromWhatGridIsDisplaying(){this.colDefService.syncLayoutWithGrid(this.setColumnLayout.bind(this))}setColumnLayout(e){const t=this.colDefService.createColumnTree(e);this.buildListModel(t),this.groupsExist=e.some(s=>s&&typeof s.children<"u"),this.markFilteredColumns(),this.flattenAndFilterModel()}buildTreeFromProvidedColumnDefs(){this.buildListModel(this.columnModel.getPrimaryColumnTree()),this.groupsExist=this.columnModel.isPrimaryColumnGroupsPresent()}buildListModel(e){const t=this.onColumnExpanded.bind(this),s=l=>{l.addEventListener(ColumnModelItem.EVENT_EXPANDED_CHANGED,t);const r=l.removeEventListener.bind(l,ColumnModelItem.EVENT_EXPANDED_CHANGED,t);this.destroyColumnItemFuncs.push(r)},i=(l,r,u)=>{l.forEach(c=>{c instanceof import_core7.ProvidedColumnGroup?n(c,r,u):a(c,r,u)})},n=(l,r,u)=>{const c=l.getColGroupDef();if(c&&c.suppressColumnsToolPanel)return;if(l.isPadding()){i(l.getChildren(),r,u);return}const y=this.columnModel.getDisplayNameForProvidedColumnGroup(null,l,"columnToolPanel"),p=new ColumnModelItem(y,l,r,!0,this.expandGroupsByDefault);u.push(p),s(p),i(l.getChildren(),r+1,p.getChildren())},a=(l,r,u)=>{if(l.getColDef()&&l.getColDef().suppressColumnsToolPanel)return;const d=this.columnModel.getDisplayNameForColumn(l,"columnToolPanel");u.push(new ColumnModelItem(d,l,r))};this.destroyColumnTree(),i(e,0,this.allColsTree)}onColumnExpanded(){this.flattenAndFilterModel()}flattenAndFilterModel(){this.displayedColsList=[];const e=s=>{s.isPassesFilter()&&(this.displayedColsList.push(s),s.isGroup()&&s.isExpanded()&&s.getChildren().forEach(e))};this.allColsTree.forEach(e),this.virtualList.setModel(new UIColumnModel(this.displayedColsList));const t=this.virtualList.getLastFocusedRow();this.virtualList.refresh(),t!=null&&this.focusRowIfAlive(t),this.notifyListeners(),this.refreshAriaLabel()}refreshAriaLabel(){const e=this.localeService.getLocaleTextFunc(),t=e("ariaColumnPanelList","Column List"),s=e("columns","Columns"),i=this.displayedColsList.length;import_core7._.setAriaLabel(this.virtualList.getAriaElement(),`${t} ${i} ${s}`)}focusRowIfAlive(e){window.setTimeout(()=>{this.isAlive()&&this.virtualList.focusRow(e)},0)}forEachItem(e){const t=s=>{s.forEach(i=>{e(i),i.isGroup()&&t(i.getChildren())})};this.allColsTree&&t(this.allColsTree)}doSetExpandedAll(e){this.forEachItem(t=>{t.isGroup()&&t.setExpanded(e)})}setGroupsExpanded(e,t){if(!t){this.doSetExpandedAll(e);return}const s=[];this.forEachItem(n=>{if(!n.isGroup())return;const a=n.getColumnGroup().getId();t.indexOf(a)>=0&&(n.setExpanded(e),s.push(a))});const i=t.filter(n=>!import_core7._.includes(s,n));i.length>0&&console.warn("AG Grid: unable to find group(s) for supplied groupIds:",i)}getExpandState(){let e=0,t=0;return this.forEachItem(s=>{s.isGroup()&&(s.isExpanded()?e++:t++)}),e>0&&t>0?2:t>0?1:0}doSetSelectedAll(e){this.modelItemUtils.selectAllChildren(this.allColsTree,e,this.eventType)}getSelectionState(){let e=0,t=0;const s=this.columnModel.isPivotMode();if(this.forEachItem(i=>{if(i.isGroup()||!i.isPassesFilter())return;const n=i.getColumn(),a=n.getColDef();let l;if(s){if(!n.isAllowPivot()&&!n.isAllowRowGroup()&&!n.isAllowValue())return;l=n.isValueActive()||n.isPivotActive()||n.isRowGroupActive()}else{if(a.lockVisible)return;l=n.isVisible()}l?e++:t++}),!(e>0&&t>0))return!(e===0||t>0)}setFilterText(e){this.filterText=import_core7._.exists(e)?e.toLowerCase():null,this.markFilteredColumns(),this.flattenAndFilterModel()}markFilteredColumns(){const e=s=>{if(!import_core7._.exists(this.filterText))return!0;const i=s.getDisplayName();return i==null||i.toLowerCase().indexOf(this.filterText)!==-1},t=(s,i)=>{let n=!1;if(s.isGroup()){const l=e(s);s.getChildren().forEach(r=>{const u=t(r,l||i);u&&(n=u)})}const a=i||n?!0:e(s);return s.setPassesFilter(a),a};this.allColsTree.forEach(s=>t(s,!1))}notifyListeners(){this.fireGroupExpandedEvent(),this.fireSelectionChangedEvent()}fireGroupExpandedEvent(){const e=this.getExpandState();this.dispatchEvent({type:"groupExpanded",state:e})}fireSelectionChangedEvent(){if(!this.allColsTree)return;const e=this.getSelectionState();this.dispatchEvent({type:"selectionChanged",state:e})}getExpandedGroups(){const e=[];return this.allColsTree&&this.forEachItem(t=>{t.isGroup()&&t.isExpanded()&&e.push(t.getColumnGroup().getId())}),e}};_PrimaryColsListPanel.TEMPLATE=`<div class="${PRIMARY_COLS_LIST_PANEL_CLASS}" role="presentation"></div>`,__decorateClass([(0,import_core7.Autowired)("columnModel")],_PrimaryColsListPanel.prototype,"columnModel",2),__decorateClass([(0,import_core7.Autowired)("toolPanelColDefService")],_PrimaryColsListPanel.prototype,"colDefService",2),__decorateClass([(0,import_core7.Autowired)("modelItemUtils")],_PrimaryColsListPanel.prototype,"modelItemUtils",2),__decorateClass([import_core7.PreDestroy],_PrimaryColsListPanel.prototype,"destroyColumnTree",1);var PrimaryColsListPanel=_PrimaryColsListPanel,import_core10=require("@ag-grid-community/core"),import_core8=require("@ag-grid-community/core"),PivotModePanel=class extends import_core8.Component{createTemplate(){return`<div class="ag-pivot-mode-panel">
    16|                 <ag-toggle-button ref="cbPivotMode" class="ag-pivot-mode-select"></ag-toggle-button>
    17|             </div>`}init(){this.setTemplate(this.createTemplate()),this.cbPivotMode.setValue(this.columnModel.isPivotMode());const o=this.localeService.getLocaleTextFunc();this.cbPivotMode.setLabel(o("pivotMode","Pivot Mode")),this.addManagedListener(this.cbPivotMode,import_core8.Events.EVENT_FIELD_VALUE_CHANGED,this.onBtPivotMode.bind(this)),this.addManagedListener(this.eventService,import_core8.Events.EVENT_NEW_COLUMNS_LOADED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,import_core8.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this))}onBtPivotMode(){const o=!!this.cbPivotMode.getValue();if(o!==this.columnModel.isPivotMode()){this.gos.updateGridOptions({options:{pivotMode:o},source:"toolPanelUi"});const{api:e}=this;e&&e.refreshHeader()}}onPivotModeChanged(){const o=this.columnModel.isPivotMode();this.cbPivotMode.setValue(o)}};__decorateClass([(0,import_core8.Autowired)("columnModel")],PivotModePanel.prototype,"columnModel",2),__decorateClass([(0,import_core8.Autowired)("gridApi")],PivotModePanel.prototype,"api",2),__decorateClass([(0,import_core8.RefSelector)("cbPivotMode")],PivotModePanel.prototype,"cbPivotMode",2),__decorateClass([import_core8.PreConstruct],PivotModePanel.prototype,"init",1);var import_row_grouping=require("@ag-grid-enterprise/row-grouping"),import_core9=require("@ag-grid-community/core"),_PrimaryColsPanel=class f extends import_core9.Component{constructor(){super(f.TEMPLATE)}init(e,t,s){this.allowDragging=e,this.params=t,this.eventType=s,this.primaryColsHeaderPanel.init(this.params);const i=this.params.suppressColumnFilter,n=this.params.suppressColumnSelectAll;this.params.suppressColumnExpandAll&&i&&n&&this.primaryColsHeaderPanel.setDisplayed(!1),this.addManagedListener(this.primaryColsListPanel,"groupExpanded",this.onGroupExpanded.bind(this)),this.addManagedListener(this.primaryColsListPanel,"selectionChanged",this.onSelectionChange.bind(this)),this.primaryColsListPanel.init(this.params,this.allowDragging,this.eventType),this.addManagedListener(this.primaryColsHeaderPanel,"expandAll",this.onExpandAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"collapseAll",this.onCollapseAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"selectAll",this.onSelectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"unselectAll",this.onUnselectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"filterChanged",this.onFilterChanged.bind(this)),this.positionableFeature=new import_core9.PositionableFeature(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature)}toggleResizable(e){this.positionableFeature.setResizable(e?{bottom:!0}:!1)}onExpandAll(){this.primaryColsListPanel.doSetExpandedAll(!0)}onCollapseAll(){this.primaryColsListPanel.doSetExpandedAll(!1)}expandGroups(e){this.primaryColsListPanel.setGroupsExpanded(!0,e)}collapseGroups(e){this.primaryColsListPanel.setGroupsExpanded(!1,e)}setColumnLayout(e){this.primaryColsListPanel.setColumnLayout(e)}onFilterChanged(e){this.primaryColsListPanel.setFilterText(e.filterText)}syncLayoutWithGrid(){this.primaryColsListPanel.onColumnsChanged()}onSelectAll(){this.primaryColsListPanel.doSetSelectedAll(!0)}onUnselectAll(){this.primaryColsListPanel.doSetSelectedAll(!1)}onGroupExpanded(e){this.primaryColsHeaderPanel.setExpandState(e.state),this.params.onStateUpdated()}onSelectionChange(e){this.primaryColsHeaderPanel.setSelectionState(e.state)}getExpandedGroups(){return this.primaryColsListPanel.getExpandedGroups()}};_PrimaryColsPanel.TEMPLATE=`<div class="ag-column-select">
    18|             <ag-primary-cols-header ref="primaryColsHeaderPanel"></ag-primary-cols-header>
    19|             <ag-primary-cols-list ref="primaryColsListPanel"></ag-primary-cols-list>
    20|         </div>`,__decorateClass([(0,import_core9.RefSelector)("primaryColsHeaderPanel")],_PrimaryColsPanel.prototype,"primaryColsHeaderPanel",2),__decorateClass([(0,import_core9.RefSelector)("primaryColsListPanel")],_PrimaryColsPanel.prototype,"primaryColsListPanel",2);var PrimaryColsPanel=_PrimaryColsPanel,_ColumnToolPanel=class E extends import_core10.Component{constructor(){super(E.TEMPLATE),this.initialised=!1,this.childDestroyFuncs=[]}setVisible(e){super.setDisplayed(e),e&&!this.initialised&&this.init(this.params)}init(e){const t=this.gos.addGridCommonParams({suppressColumnMove:!1,suppressColumnSelectAll:!1,suppressColumnFilter:!1,suppressColumnExpandAll:!1,contractColumnSelection:!1,suppressPivotMode:!1,suppressRowGroups:!1,suppressValues:!1,suppressPivots:!1,suppressSyncLayoutWithGrid:!1});if(this.params=__spreadValues(__spreadValues({},t),e),this.isRowGroupingModuleLoaded()&&!this.params.suppressPivotMode&&(this.pivotModePanel=this.createBean(new PivotModePanel),this.childDestroyFuncs.push(()=>this.destroyBean(this.pivotModePanel)),this.appendChild(this.pivotModePanel)),this.primaryColsPanel=this.createBean(new PrimaryColsPanel),this.childDestroyFuncs.push(()=>this.destroyBean(this.primaryColsPanel)),this.primaryColsPanel.init(!0,this.params,"toolPanelUi"),this.primaryColsPanel.addCssClass("ag-column-panel-column-select"),this.appendChild(this.primaryColsPanel),this.isRowGroupingModuleLoaded()){this.params.suppressRowGroups||(this.rowGroupDropZonePanel=this.createBean(new import_row_grouping.RowGroupDropZonePanel(!1)),this.childDestroyFuncs.push(()=>this.destroyBean(this.rowGroupDropZonePanel)),this.appendChild(this.rowGroupDropZonePanel)),this.params.suppressValues||(this.valuesDropZonePanel=this.createBean(new import_row_grouping.ValuesDropZonePanel(!1)),this.childDestroyFuncs.push(()=>this.destroyBean(this.valuesDropZonePanel)),this.appendChild(this.valuesDropZonePanel)),this.params.suppressPivots||(this.pivotDropZonePanel=this.createBean(new import_row_grouping.PivotDropZonePanel(!1)),this.childDestroyFuncs.push(()=>this.destroyBean(this.pivotDropZonePanel)),this.appendChild(this.pivotDropZonePanel)),this.setLastVisible();const s=this.addManagedListener(this.eventService,import_core10.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>{this.resetChildrenHeight(),this.setLastVisible()});this.childDestroyFuncs.push(()=>s())}this.initialised=!0}setPivotModeSectionVisible(e){this.isRowGroupingModuleLoaded()&&(this.pivotModePanel?this.pivotModePanel.setDisplayed(e):e&&(this.pivotModePanel=this.createBean(new PivotModePanel),this.getGui().insertBefore(this.pivotModePanel.getGui(),this.getGui().firstChild),this.childDestroyFuncs.push(()=>this.destroyBean(this.pivotModePanel))),this.setLastVisible())}setRowGroupsSectionVisible(e){this.isRowGroupingModuleLoaded()&&(this.rowGroupDropZonePanel?this.rowGroupDropZonePanel.setDisplayed(e):e&&(this.rowGroupDropZonePanel=this.createManagedBean(new import_row_grouping.RowGroupDropZonePanel(!1)),this.appendChild(this.rowGroupDropZonePanel)),this.setLastVisible())}setValuesSectionVisible(e){this.isRowGroupingModuleLoaded()&&(this.valuesDropZonePanel?this.valuesDropZonePanel.setDisplayed(e):e&&(this.valuesDropZonePanel=this.createManagedBean(new import_row_grouping.ValuesDropZonePanel(!1)),this.appendChild(this.valuesDropZonePanel)),this.setLastVisible())}setPivotSectionVisible(e){this.isRowGroupingModuleLoaded()&&(this.pivotDropZonePanel?this.pivotDropZonePanel.setDisplayed(e):e&&(this.pivotDropZonePanel=this.createManagedBean(new import_row_grouping.PivotDropZonePanel(!1)),this.appendChild(this.pivotDropZonePanel),this.pivotDropZonePanel.setDisplayed(e)),this.setLastVisible())}setResizers(){[this.primaryColsPanel,this.rowGroupDropZonePanel,this.valuesDropZonePanel,this.pivotDropZonePanel].forEach(e=>{if(!e)return;const t=e.getGui();e.toggleResizable(!t.classList.contains("ag-last-column-drop")&&!t.classList.contains("ag-hidden"))})}setLastVisible(){const e=this.getGui();Array.prototype.slice.call(e.querySelectorAll(".ag-column-drop")).forEach(n=>n.classList.remove("ag-last-column-drop"));const s=e.querySelectorAll(".ag-column-drop:not(.ag-hidden)"),i=import_core10._.last(s);i&&i.classList.add("ag-last-column-drop"),this.setResizers()}resetChildrenHeight(){const t=this.getGui().children;for(let s=0;s<t.length;s++){const i=t[s];i.style.removeProperty("height"),i.style.removeProperty("flex")}}isRowGroupingModuleLoaded(){return import_core10.ModuleRegistry.__assertRegistered(import_core10.ModuleNames.RowGroupingModule,"Row Grouping",this.context.getGridId())}expandColumnGroups(e){this.primaryColsPanel.expandGroups(e)}collapseColumnGroups(e){this.primaryColsPanel.collapseGroups(e)}setColumnLayout(e){this.primaryColsPanel.setColumnLayout(e)}syncLayoutWithGrid(){this.primaryColsPanel.syncLayoutWithGrid()}destroyChildren(){this.childDestroyFuncs.forEach(e=>e()),this.childDestroyFuncs.length=0,import_core10._.clearElement(this.getGui())}refresh(e){return this.destroyChildren(),this.init(e),!0}getState(){return{expandedGroupIds:this.primaryColsPanel.getExpandedGroups()}}destroy(){this.destroyChildren(),super.destroy()}};_ColumnToolPanel.TEMPLATE='<div class="ag-column-panel"></div>';var ColumnToolPanel=_ColumnToolPanel,import_row_grouping2=require("@ag-grid-enterprise/row-grouping"),import_side_bar=require("@ag-grid-enterprise/side-bar"),import_core11=require("@ag-grid-community/core"),ModelItemUtils=class{selectAllChildren(o,e,t){const s=this.extractAllLeafColumns(o);this.setAllColumns(s,e,t)}setColumn(o,e,t){this.setAllColumns([o],e,t)}setAllColumns(o,e,t){this.columnModel.isPivotMode()?this.setAllPivot(o,e,t):this.setAllVisible(o,e,t)}extractAllLeafColumns(o){const e=[],t=s=>{s.forEach(i=>{i.isPassesFilter()&&(i.isGroup()?t(i.getChildren()):e.push(i.getColumn()))})};return t(o),e}setAllVisible(o,e,t){const s=[];o.forEach(i=>{i.getColDef().lockVisible||i.isVisible()!=e&&s.push({colId:i.getId(),hide:!e})}),s.length>0&&this.columnModel.applyColumnState({state:s},t)}setAllPivot(o,e,t){this.gos.get("functionsPassive")?this.setAllPivotPassive(o,e):this.setAllPivotActive(o,e,t)}setAllPivotPassive(o,e){const t=this.columnModel.getPivotColumns().slice(),s=this.columnModel.getValueColumns().slice(),i=this.columnModel.getRowGroupColumns().slice();let n=!1,a=!1,l=!1;const c=e?d=>{d.isAnyFunctionActive()||(d.isAllowValue()?(s.push(d),a=!0):d.isAllowRowGroup()?(i.push(d),n=!0):d.isAllowPivot()&&(t.push(d),l=!0))}:d=>{d.isAnyFunctionActive()&&(t.indexOf(d)>=0&&(import_core11._.removeFromArray(t,d),n=!0),s.indexOf(d)>=0&&(import_core11._.removeFromArray(s,d),a=!0),i.indexOf(d)>=0&&(import_core11._.removeFromArray(i,d),l=!0))};if(o.forEach(c),n){const d={type:import_core11.Events.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns:t};this.eventService.dispatchEvent(d)}if(l){const d={type:import_core11.Events.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns:i};this.eventService.dispatchEvent(d)}if(a){const d={type:import_core11.Events.EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns:i};this.eventService.dispatchEvent(d)}}setAllPivotActive(o,e,t){const s=[],a=e?l=>{if(!l.isAnyFunctionActive())if(l.isAllowValue()){const r=typeof l.getAggFunc()=="string"?l.getAggFunc():this.aggFuncService.getDefaultAggFunc(l);s.push({colId:l.getId(),aggFunc:r})}else l.isAllowRowGroup()?s.push({colId:l.getId(),rowGroup:!0}):l.isAllowPivot()&&s.push({colId:l.getId(),pivot:!0})}:l=>{(l.isPivotActive()||l.isRowGroupActive()||l.isValueActive())&&s.push({colId:l.getId(),pivot:!1,rowGroup:!1,aggFunc:null})};o.forEach(a),s.length>0&&this.columnModel.applyColumnState({state:s},t)}updateColumns(o){const{columns:e,visibleState:t,pivotState:s,eventType:i}=o,n=e.map(a=>{const l=a.getColId();if(this.columnModel.isPivotMode()){const r=s?.[l];return{colId:l,pivot:r?.pivot,rowGroup:r?.rowGroup,aggFunc:r?.aggFunc}}else return{colId:l,hide:!t?.[l]}});this.columnModel.applyColumnState({state:n},i)}createPivotState(o){return{pivot:o.isPivotActive(),rowGroup:o.isRowGroupActive(),aggFunc:o.isValueActive()?o.getAggFunc():void 0}}};__decorateClass([(0,import_core11.Autowired)("aggFuncService")],ModelItemUtils.prototype,"aggFuncService",2),__decorateClass([(0,import_core11.Autowired)("columnModel")],ModelItemUtils.prototype,"columnModel",2),__decorateClass([(0,import_core11.Autowired)("gridOptionsService")],ModelItemUtils.prototype,"gos",2),__decorateClass([(0,import_core11.Autowired)("eventService")],ModelItemUtils.prototype,"eventService",2),ModelItemUtils=__decorateClass([(0,import_core11.Bean)("modelItemUtils")],ModelItemUtils);var VERSION="31.3.4",ColumnsToolPanelModule={version:VERSION,moduleName:import_core12.ModuleNames.ColumnsToolPanelModule,beans:[ModelItemUtils],agStackComponents:[{componentName:"AgPrimaryColsHeader",componentClass:PrimaryColsHeaderPanel},{componentName:"AgPrimaryColsList",componentClass:PrimaryColsListPanel},{componentName:"AgPrimaryCols",componentClass:PrimaryColsPanel}],userComponents:[{componentName:"agColumnsToolPanel",componentClass:ColumnToolPanel}],dependantModules:[import_core13.EnterpriseCoreModule,import_row_grouping2.RowGroupingModule,import_side_bar.SideBarModule]};


# ====================================================================
# FILE: enterprise-modules/column-tool-panel/dist/types/src/version.d.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export declare const VERSION = "31.3.4";


# ====================================================================
# FILE: enterprise-modules/column-tool-panel/src/version.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export const VERSION = '31.3.4';


# ====================================================================
# FILE: enterprise-modules/core/dist/package/main.cjs.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 536-564 ---
   536|     this.setDisplayed(show);
   537|     if (show) {
   538|       this.eLicenseTextRef.innerText = this.licenseManager.getWatermarkMessage();
   539|       window.setTimeout(() => this.addCssClass("ag-opacity-zero"), 0);
   540|       window.setTimeout(() => this.setDisplayed(false), 5e3);
   541|     }
   542|   }
   543|   shouldDisplayWatermark() {
   544|     return this.licenseManager.isDisplayWatermark();
   545|   }
   546| };
   547| __decorateClass([
   548|   (0, import_core2.Autowired)("licenseManager")
   549| ], WatermarkComp.prototype, "licenseManager", 2);
   550| __decorateClass([
   551|   (0, import_core2.RefSelector)("eLicenseTextRef")
   552| ], WatermarkComp.prototype, "eLicenseTextRef", 2);
   553| __decorateClass([
   554|   import_core2.PostConstruct
   555| ], WatermarkComp.prototype, "postConstruct", 1);
   556| var VERSION = "31.3.4";
   557| var EnterpriseCoreModule = {
   558|   version: VERSION,
   559|   moduleName: import_core3.ModuleNames.EnterpriseCoreModule,
   560|   beans: [GridLicenseManager],
   561|   agStackComponents: [
   562|     { componentName: "AgWatermark", componentClass: WatermarkComp }
   563|   ]
   564| };


# ====================================================================
# FILE: enterprise-modules/core/dist/package/main.cjs.min.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-3 ---
     1| var __defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__hasOwnProp=Object.prototype.hasOwnProperty,__export=(a,e)=>{for(var t in e)__defProp(a,t,{get:e[t],enumerable:!0})},__copyProps=(a,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of __getOwnPropNames(e))!__hasOwnProp.call(a,s)&&s!==t&&__defProp(a,s,{get:()=>e[s],enumerable:!(i=__getOwnPropDesc(e,s))||i.enumerable});return a},__toCommonJS=a=>__copyProps(__defProp({},"__esModule",{value:!0}),a),__decorateClass=(a,e,t,i)=>{for(var s=i>1?void 0:i?__getOwnPropDesc(e,t):e,r=a.length-1,n;r>=0;r--)(n=a[r])&&(s=(i?n(e,t,s):n(s))||s);return i&&s&&__defProp(e,t,s),s},main_exports={};__export(main_exports,{EnterpriseCoreModule:()=>EnterpriseCoreModule,LicenseManager:()=>GridLicenseManager}),module.exports=__toCommonJS(main_exports);var import_core3=require("@ag-grid-community/core"),import_core=require("@ag-grid-community/core"),MD5=class{constructor(){this.ieCompatibility=!1}init(){this.ieCompatibility=this.md5("hello")!="5d41402abc4b2a76b9719d911017c592"}md5cycle(a,e){let t=a[0],i=a[1],s=a[2],r=a[3];t=this.ff(t,i,s,r,e[0],7,-680876936),r=this.ff(r,t,i,s,e[1],12,-389564586),s=this.ff(s,r,t,i,e[2],17,606105819),i=this.ff(i,s,r,t,e[3],22,-1044525330),t=this.ff(t,i,s,r,e[4],7,-176418897),r=this.ff(r,t,i,s,e[5],12,1200080426),s=this.ff(s,r,t,i,e[6],17,-1473231341),i=this.ff(i,s,r,t,e[7],22,-45705983),t=this.ff(t,i,s,r,e[8],7,1770035416),r=this.ff(r,t,i,s,e[9],12,-1958414417),s=this.ff(s,r,t,i,e[10],17,-42063),i=this.ff(i,s,r,t,e[11],22,-1990404162),t=this.ff(t,i,s,r,e[12],7,1804603682),r=this.ff(r,t,i,s,e[13],12,-40341101),s=this.ff(s,r,t,i,e[14],17,-1502002290),i=this.ff(i,s,r,t,e[15],22,1236535329),t=this.gg(t,i,s,r,e[1],5,-165796510),r=this.gg(r,t,i,s,e[6],9,-1069501632),s=this.gg(s,r,t,i,e[11],14,643717713),i=this.gg(i,s,r,t,e[0],20,-373897302),t=this.gg(t,i,s,r,e[5],5,-701558691),r=this.gg(r,t,i,s,e[10],9,38016083),s=this.gg(s,r,t,i,e[15],14,-660478335),i=this.gg(i,s,r,t,e[4],20,-405537848),t=this.gg(t,i,s,r,e[9],5,568446438),r=this.gg(r,t,i,s,e[14],9,-1019803690),s=this.gg(s,r,t,i,e[3],14,-187363961),i=this.gg(i,s,r,t,e[8],20,1163531501),t=this.gg(t,i,s,r,e[13],5,-1444681467),r=this.gg(r,t,i,s,e[2],9,-51403784),s=this.gg(s,r,t,i,e[7],14,1735328473),i=this.gg(i,s,r,t,e[12],20,-1926607734),t=this.hh(t,i,s,r,e[5],4,-378558),r=this.hh(r,t,i,s,e[8],11,-2022574463),s=this.hh(s,r,t,i,e[11],16,1839030562),i=this.hh(i,s,r,t,e[14],23,-35309556),t=this.hh(t,i,s,r,e[1],4,-1530992060),r=this.hh(r,t,i,s,e[4],11,1272893353),s=this.hh(s,r,t,i,e[7],16,-155497632),i=this.hh(i,s,r,t,e[10],23,-1094730640),t=this.hh(t,i,s,r,e[13],4,681279174),r=this.hh(r,t,i,s,e[0],11,-358537222),s=this.hh(s,r,t,i,e[3],16,-722521979),i=this.hh(i,s,r,t,e[6],23,76029189),t=this.hh(t,i,s,r,e[9],4,-640364487),r=this.hh(r,t,i,s,e[12],11,-421815835),s=this.hh(s,r,t,i,e[15],16,530742520),i=this.hh(i,s,r,t,e[2],23,-995338651),t=this.ii(t,i,s,r,e[0],6,-198630844),r=this.ii(r,t,i,s,e[7],10,1126891415),s=this.ii(s,r,t,i,e[14],15,-1416354905),i=this.ii(i,s,r,t,e[5],21,-57434055),t=this.ii(t,i,s,r,e[12],6,1700485571),r=this.ii(r,t,i,s,e[3],10,-1894986606),s=this.ii(s,r,t,i,e[10],15,-1051523),i=this.ii(i,s,r,t,e[1],21,-2054922799),t=this.ii(t,i,s,r,e[8],6,1873313359),r=this.ii(r,t,i,s,e[15],10,-30611744),s=this.ii(s,r,t,i,e[6],15,-1560198380),i=this.ii(i,s,r,t,e[13],21,1309151649),t=this.ii(t,i,s,r,e[4],6,-145523070),r=this.ii(r,t,i,s,e[11],10,-1120210379),s=this.ii(s,r,t,i,e[2],15,718787259),i=this.ii(i,s,r,t,e[9],21,-343485551),a[0]=this.add32(t,a[0]),a[1]=this.add32(i,a[1]),a[2]=this.add32(s,a[2]),a[3]=this.add32(r,a[3])}cmn(a,e,t,i,s,r){return e=this.add32(this.add32(e,a),this.add32(i,r)),this.add32(e<<s|e>>>32-s,t)}ff(a,e,t,i,s,r,n){return this.cmn(e&t|~e&i,a,e,s,r,n)}gg(a,e,t,i,s,r,n){return this.cmn(e&i|t&~i,a,e,s,r,n)}hh(a,e,t,i,s,r,n){return this.cmn(e^t^i,a,e,s,r,n)}ii(a,e,t,i,s,r,n){return this.cmn(t^(e|~i),a,e,s,r,n)}md51(a){const e=a.length,t=[1732584193,-271733879,-1732584194,271733878];let i;for(i=64;i<=a.length;i+=64)this.md5cycle(t,this.md5blk(a.substring(i-64,i)));a=a.substring(i-64);const s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<a.length;i++)s[i>>2]|=a.charCodeAt(i)<<(i%4<<3);if(s[i>>2]|=128<<(i%4<<3),i>55)for(this.md5cycle(t,s),i=0;i<16;i++)s[i]=0;return s[14]=e*8,this.md5cycle(t,s),t}md5blk(a){const e=[];for(let t=0;t<64;t+=4)e[t>>2]=a.charCodeAt(t)+(a.charCodeAt(t+1)<<8)+(a.charCodeAt(t+2)<<16)+(a.charCodeAt(t+3)<<24);return e}rhex(a){const e="0123456789abcdef".split("");let t="",i=0;for(;i<4;i++)t+=e[a>>i*8+4&15]+e[a>>i*8&15];return t}hex(a){for(let e=0;e<a.length;e++)a[e]=this.rhex(a[e]);return a.join("")}md5(a){return this.hex(this.md51(a))}add32(a,e){return this.ieCompatibility?this.add32Compat(a,e):this.add32Std(a,e)}add32Std(a,e){return a+e&4294967295}add32Compat(a,e){const t=(a&65535)+(e&65535);return(a>>16)+(e>>16)+(t>>16)<<16|t&65535}};function missingOrEmpty(a){return a==null||a.length===0}var LICENSE_TYPES={"01":"GRID","02":"CHARTS","0102":"BOTH"},_LicenseManager=class c{constructor(e){this.watermarkMessage=void 0,this.totalMessageLength=124,this.document=e,this.md5=new MD5,this.md5.init()}validateLicense(){const e=this.getLicenseDetails(c.licenseKey),t=`AG Grid ${e.currentLicenseType==="BOTH"?"and AG Charts ":""}Enterprise`,i=e.suppliedLicenseType===void 0?"":`AG ${e.suppliedLicenseType==="BOTH"?"Grid and AG Charts":e.suppliedLicenseType==="GRID"?"Grid":"Charts"} Enterprise`;if(e.missing)(!this.isWebsiteUrl()||this.isForceWatermark())&&this.outputMissingLicenseKey(t);else if(e.expired){const s=c.getGridReleaseDate(),r=c.formatDate(s);this.outputExpiredKey(e.expiry,r,t,i)}else e.valid?e.isTrial&&e.trialExpired&&this.outputExpiredTrialKey(e.expiry,t,i):this.outputInvalidLicenseKey(!!e.incorrectLicenseType,t,i)}static extractExpiry(e){const t=e.substring(e.lastIndexOf("_")+1,e.length);return new Date(parseInt(c.decode(t),10))}static extractLicenseComponents(e){let t=e.replace(/[\u200B-\u200D\uFEFF]/g,"");if(t=t.replace(/\r?\n|\r/g,""),e.length<=32)return{md5:null,license:e,version:null,isTrial:null};const i=t.length-32,s=t.substring(i),r=t.substring(0,i),[n,o,l]=c.extractBracketedInformation(t);return{md5:s,license:r,version:n,isTrial:o,type:l}}getLicenseDetails(e){const t=c.chartsLicenseManager?"BOTH":"GRID";if(missingOrEmpty(e))return{licenseKey:e,valid:!1,missing:!0,currentLicenseType:t};const i=c.getGridReleaseDate(),{md5:s,license:r,version:n,isTrial:o,type:l}=c.extractLicenseComponents(e);let h=s===this.md5.md5(r)&&e.indexOf("For_Trialing_ag-Grid_Only")===-1,p,u,d=null,f=!1,g;function m(){p=d<new Date,u=void 0}if(h&&(d=c.extractExpiry(r),h=!isNaN(d.getTime()),h))switch(u=i>d,n){case"legacy":case"2":{o&&m();break}case"3":missingOrEmpty(l)?h=!1:(g=l,l!==LICENSE_TYPES["01"]&&l!==LICENSE_TYPES["0102"]||t==="BOTH"&&g!=="BOTH"?(h=!1,f=!0):o&&m())}return h?{licenseKey:e,valid:h,expiry:c.formatDate(d),expired:u,version:n,isTrial:o,trialExpired:p,incorrectLicenseType:f,currentLicenseType:t,suppliedLicenseType:g}:{licenseKey:e,valid:h,incorrectLicenseType:f,currentLicenseType:t,suppliedLicenseType:g}}isDisplayWatermark(){return this.isForceWatermark()||!this.isLocalhost()&&!this.isWebsiteUrl()&&!missingOrEmpty(this.watermarkMessage)}getWatermarkMessage(){return this.watermarkMessage||""}getHostname(){const t=(this.document.defaultView||window).location,{hostname:i=""}=t;return i}isForceWatermark(){const t=(this.document.defaultView||window).location,{pathname:i}=t;return i?i.indexOf("forceWatermark")!==-1:!1}isWebsiteUrl(){return this.getHostname().match(/^((?:[\w-]+\.)?ag-grid\.com)$/)!==null}isLocalhost(){return this.getHostname().match(/^(?:127\.0\.0\.1|localhost)$/)!==null}static formatDate(e){const t=["January","February","March","April","May","June","July","August","September","October","November","December"],i=e.getDate(),s=e.getMonth(),r=e.getFullYear();return i+" "+t[s]+" "+r}static getGridReleaseDate(){return new Date(parseInt(c.decode(c.RELEASE_INFORMATION),10))}static decode(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let i="",s,r,n,o,l,h,p,u=0;const d=e.replace(/[^A-Za-z0-9+/=]/g,"");for(;u<d.length;)o=t.indexOf(d.charAt(u++)),l=t.indexOf(d.charAt(u++)),h=t.indexOf(d.charAt(u++)),p=t.indexOf(d.charAt(u++)),s=o<<2|l>>4,r=(l&15)<<4|h>>2,n=(h&3)<<6|p,i=i+String.fromCharCode(s),h!=64&&(i=i+String.fromCharCode(r)),p!=64&&(i=i+String.fromCharCode(n));return i=c.utf8_decode(i),i}static utf8_decode(e){e=e.replace(/rn/g,"n");let t="";for(let i=0;i<e.length;i++){const s=e.charCodeAt(i);s<128?t+=String.fromCharCode(s):s>127&&s<2048?(t+=String.fromCharCode(s>>6|192),t+=String.fromCharCode(s&63|128)):(t+=String.fromCharCode(s>>12|224),t+=String.fromCharCode(s>>6&63|128),t+=String.fromCharCode(s&63|128))}return t}static setChartsLicenseManager(e){this.chartsLicenseManager=e}static setLicenseKey(e){this.licenseKey=e,this.chartsLicenseManager&&this.chartsLicenseManager.setLicenseKey(e,!0)}static extractBracketedInformation(e){if(!e.includes("["))return["legacy",!1,void 0];const t=e.match(/\[(.*?)\]/g).map(o=>o.replace("[","").replace("]",""));if(!t||t.length===0)return["legacy",!1,void 0];const i=t.filter(o=>o==="TRIAL").length===1,s=t.filter(o=>o.indexOf("v")===0)[0],r=s?s.replace("v",""):"legacy",n=LICENSE_TYPES[t.filter(o=>LICENSE_TYPES[o])[0]];return[r,i,n]}centerPadAndOutput(e){const t=this.totalMessageLength-e.length;console.error(e.padStart(t/2+e.length,"*").padEnd(this.totalMessageLength,"*"))}padAndOutput(e,t="*",i=""){console.error(e.padEnd(this.totalMessageLength-i.length,t)+i)}outputInvalidLicenseKey(e,t,i){e?(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${t} License `),this.centerPadAndOutput(" Incompatible License Key "),this.padAndOutput(`* Your license key is for ${i} only and does not cover you for ${t}.`," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to obtain a combined license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")):(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${t} License `),this.centerPadAndOutput(" Invalid License Key "),this.padAndOutput("* Your license key is not valid - please contact info@ag-grid.com to obtain a valid license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="Invalid License"}outputExpiredTrialKey(e,t,i){this.centerPadAndOutput(""),this.centerPadAndOutput(` ${t} License `),this.centerPadAndOutput(" Trial Period Expired. "),this.padAndOutput(`* Your trial only license for ${i} expired on ${e}.`," ","*"),this.padAndOutput("* Please email info@ag-grid.com to purchase a license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="Trial Period Expired"}outputMissingLicenseKey(e){this.centerPadAndOutput(""),this.centerPadAndOutput(` ${e} License `),this.centerPadAndOutput(" License Key Not Found "),this.padAndOutput(`* All ${e} features are unlocked for trial.`," ","*"),this.padAndOutput("* If you want to hide the watermark please email info@ag-grid.com for a trial license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="For Trial Use Only"}outputExpiredKey(e,t,i,s){this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Incompatible Software Version "),this.padAndOutput(`* Your license key works with versions of ${s} released before ${e}.`," ","*"),this.padAndOutput(`* The version you are trying to use was released on ${t}.`," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to renew your license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="License Expired"}};_LicenseManager.RELEASE_INFORMATION="MTcxNTc3NTcyODYxNg==";var LicenseManager=_LicenseManager,GridLicenseManager=class extends import_core.BeanStub{validateLicense(){this.licenseManager=new LicenseManager(this.gos.getDocument()),this.licenseManager.validateLicense()}static getLicenseDetails(a){return new LicenseManager(null).getLicenseDetails(a)}isDisplayWatermark(){return this.licenseManager.isDisplayWatermark()}getWatermarkMessage(){return this.licenseManager.getWatermarkMessage()}static setLicenseKey(a){LicenseManager.setLicenseKey(a)}static setChartsLicenseManager(a){LicenseManager.setChartsLicenseManager(a)}};__decorateClass([import_core.PreConstruct],GridLicenseManager.prototype,"validateLicense",1),GridLicenseManager=__decorateClass([(0,import_core.Bean)("licenseManager")],GridLicenseManager);var import_core2=require("@ag-grid-community/core"),WatermarkComp=class extends import_core2.Component{constructor(){super(`<div class="ag-watermark">
     2|                 <div ref="eLicenseTextRef" class="ag-watermark-text"></div>
     3|             </div>`)}postConstruct(){const a=this.shouldDisplayWatermark();this.setDisplayed(a),a&&(this.eLicenseTextRef.innerText=this.licenseManager.getWatermarkMessage(),window.setTimeout(()=>this.addCssClass("ag-opacity-zero"),0),window.setTimeout(()=>this.setDisplayed(!1),5e3))}shouldDisplayWatermark(){return this.licenseManager.isDisplayWatermark()}};__decorateClass([(0,import_core2.Autowired)("licenseManager")],WatermarkComp.prototype,"licenseManager",2),__decorateClass([(0,import_core2.RefSelector)("eLicenseTextRef")],WatermarkComp.prototype,"eLicenseTextRef",2),__decorateClass([import_core2.PostConstruct],WatermarkComp.prototype,"postConstruct",1);var VERSION="31.3.4",EnterpriseCoreModule={version:VERSION,moduleName:import_core3.ModuleNames.EnterpriseCoreModule,beans:[GridLicenseManager],agStackComponents:[{componentName:"AgWatermark",componentClass:WatermarkComp}]};


# ====================================================================
# FILE: enterprise-modules/core/dist/types/src/version.d.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export declare const VERSION = "31.3.4";


# ====================================================================
# FILE: enterprise-modules/core/src/version.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export const VERSION = '31.3.4';


# ====================================================================
# FILE: enterprise-modules/excel-export/dist/package/main.cjs.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 3754-3787 ---
  3754| __decorateClass([
  3755|   (0, import_core8.Autowired)("valueService")
  3756| ], ExcelCreator.prototype, "valueService", 2);
  3757| __decorateClass([
  3758|   (0, import_core8.Autowired)("stylingService")
  3759| ], ExcelCreator.prototype, "stylingService", 2);
  3760| __decorateClass([
  3761|   (0, import_core8.Autowired)("gridSerializer")
  3762| ], ExcelCreator.prototype, "gridSerializer", 2);
  3763| __decorateClass([
  3764|   (0, import_core8.Autowired)("gridOptionsService")
  3765| ], ExcelCreator.prototype, "gos", 2);
  3766| __decorateClass([
  3767|   import_core8.PostConstruct
  3768| ], ExcelCreator.prototype, "postConstruct", 1);
  3769| ExcelCreator = __decorateClass([
  3770|   (0, import_core8.Bean)("excelCreator")
  3771| ], ExcelCreator);
  3772| var import_csv_export4 = require("@ag-grid-community/csv-export");
  3773| var import_csv_export5 = require("@ag-grid-community/csv-export");
  3774| var VERSION = "31.3.4";
  3775| var ExcelExportModule = {
  3776|   version: VERSION,
  3777|   moduleName: import_core9.ModuleNames.ExcelExportModule,
  3778|   beans: [
  3779|     ExcelCreator,
  3780|     import_csv_export4.GridSerializer,
  3781|     import_csv_export4.CsvCreator
  3782|   ],
  3783|   dependantModules: [
  3784|     import_csv_export5.CsvExportModule,
  3785|     import_core10.EnterpriseCoreModule
  3786|   ]
  3787| };


# ====================================================================
# FILE: enterprise-modules/excel-export/dist/package/main.cjs.min.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-2 ---
     1| var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropNames=Object.getOwnPropertyNames,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,r)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues=(e,t)=>{for(var r in t||(t={}))__hasOwnProp.call(t,r)&&__defNormalProp(e,r,t[r]);if(__getOwnPropSymbols)for(var r of __getOwnPropSymbols(t))__propIsEnum.call(t,r)&&__defNormalProp(e,r,t[r]);return e},__spreadProps=(e,t)=>__defProps(e,__getOwnPropDescs(t)),__export=(e,t)=>{for(var r in t)__defProp(e,r,{get:t[r],enumerable:!0})},__copyProps=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of __getOwnPropNames(t))!__hasOwnProp.call(e,o)&&o!==r&&__defProp(e,o,{get:()=>t[o],enumerable:!(a=__getOwnPropDesc(t,o))||a.enumerable});return e},__toCommonJS=e=>__copyProps(__defProp({},"__esModule",{value:!0}),e),__decorateClass=(e,t,r,a)=>{for(var o=a>1?void 0:a?__getOwnPropDesc(t,r):t,s=e.length-1,n;s>=0;s--)(n=e[s])&&(o=(a?n(t,r,o):n(o))||o);return a&&o&&__defProp(t,r,o),o},main_exports={};__export(main_exports,{ExcelExportModule:()=>ExcelExportModule,exportMultipleSheetsAsExcel:()=>exportMultipleSheetsAsExcel,getMultipleSheetsAsExcel:()=>getMultipleSheetsAsExcel}),module.exports=__toCommonJS(main_exports);var import_core9=require("@ag-grid-community/core"),import_core10=require("@ag-grid-enterprise/core"),import_core8=require("@ag-grid-community/core"),import_core5=require("@ag-grid-community/core"),coreFactory={getTemplate(e){const r=new Date().toJSON();return{name:"cp:coreProperties",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance"}}]},children:[{name:"dc:creator",textNode:e},{name:"dc:title",textNode:"Workbook"},{name:"dcterms:created",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:r},{name:"dcterms:modified",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:r}]}}},core_default=coreFactory,contentTypeFactory={getTemplate(e){const{name:t,ContentType:r,Extension:a,PartName:o}=e;return{name:t,properties:{rawMap:{Extension:a,PartName:o,ContentType:r}}}}},contentType_default=contentTypeFactory,contentTypesFactory={getTemplate(e){const t=new Array(e).fill(void 0).map((p,m)=>({name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",PartName:`/xl/worksheets/sheet${m+1}.xml`})),r=ExcelXlsxFactory.worksheetImages.size,a=ExcelXlsxFactory.worksheetHeaderFooterImages.size,o=ExcelXlsxFactory.worksheetDataTables.size,s={};ExcelXlsxFactory.workbookImageIds.forEach(p=>{const m=p.type==="jpg"?"jpeg":p.type;s[m]=!0});const n=new Array(r).fill(void 0).map((p,m)=>({name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml",PartName:`/xl/drawings/drawing${m+1}.xml`})),i=new Array(o).fill(void 0).map((p,m)=>({name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml",PartName:`/xl/tables/${ExcelXlsxFactory.getTableNameFromIndex(m)}.xml`})),l=Object.keys(s).map(p=>({name:"Default",ContentType:`image/${p}`,Extension:p}));a&&l.push({name:"Default",Extension:"vml",ContentType:"application/vnd.openxmlformats-officedocument.vmlDrawing"});const c=[...l,{name:"Default",Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"},{name:"Default",ContentType:"application/xml",Extension:"xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",PartName:"/xl/workbook.xml"},...t,{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml",PartName:"/xl/theme/theme1.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",PartName:"/xl/styles.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",PartName:"/xl/sharedStrings.xml"},...n,...i,{name:"Override",ContentType:"application/vnd.openxmlformats-package.core-properties+xml",PartName:"/docProps/core.xml"}].map(p=>contentType_default.getTemplate(p));return{name:"Types",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"}},children:c}}},contentTypes_default=contentTypesFactory,import_csv_export=require("@ag-grid-community/csv-export"),INCH_TO_EMU=9525,numberFormatMap={0:1,"0.00":2,"#,##0":3,"#,##0.00":4,"0%":9,"0.00%":10,"0.00E+00":11,"# ?/?":12,"# ??/??":13,"mm-dd-yy":14,"d-mmm-yy":15,"d-mmm":16,"mmm-yy":17,"h:mm AM/PM":18,"h:mm:ss AM/PM":19,"h:mm":20,"h:mm:ss":21,"m/d/yy h:mm":22,"#,##0 ;(#,##0)":37,"#,##0 ;[Red](#,##0)":38,"#,##0.00;(#,##0.00)":39,"#,##0.00;[Red](#,##0.00)":40,"mm:ss":45,"[h]:mm:ss":46,"mmss.0":47,"##0.0E+0":48,"@":49},pixelsToPoint=e=>Math.round(e*72/96),pointsToPixel=e=>Math.round(e*96/72),pixelsToEMU=e=>Math.ceil(e*INCH_TO_EMU),getFontFamilyId=e=>{if(e===void 0)return;const r=["Automatic","Roman","Swiss","Modern","Script","Decorative"].indexOf(e||"Automatic");return Math.max(r,0)},getHeightFromProperty=(e,t)=>{if(!t)return;let r;return typeof t=="number"?r=t:r=t({rowIndex:e}),pixelsToPoint(r)},setExcelImageTotalWidth=(e,t)=>{const{colSpan:r,column:a}=e.position;if(e.width)if(r){const o=t.slice(a-1,a+r-1);let s=0;for(let n=0;n<o.length;n++){const i=o[n].getActualWidth();if(e.width<s+i){e.position.colSpan=n+1,e.totalWidth=e.width,e.width=e.totalWidth-s;break}s+=i}}else e.totalWidth=e.width},setExcelImageTotalHeight=(e,t)=>{const{rowSpan:r,row:a}=e.position;if(e.height)if(r){let o=0,s=0;for(let n=a;n<a+r;n++){const i=pointsToPixel(getHeightFromProperty(n,t)||20);if(e.height<o+i){e.position.rowSpan=s+1,e.totalHeight=e.height,e.height=e.totalHeight-o;break}o+=i,s++}}else e.totalHeight=e.height},createXmlPart=(e,t)=>{const r=import_csv_export.XmlFactory.createHeader({encoding:"UTF-8",standalone:"yes"}),a=import_csv_export.XmlFactory.createXml(e);return t?a:`${r}${a}`},getExcelColumnName=e=>{const a=String.fromCharCode,o=Math.floor(e/26),s=e%26;return!o||e===26?a(65+e-1):s?o<26?a(65+o-1)+a(65+s-1):getExcelColumnName(o)+a(65+s-1):getExcelColumnName(o-1)+"Z"},getAnchor=(e,t)=>({name:`xdr:${e}`,children:[{name:"xdr:col",textNode:t.col.toString()},{name:"xdr:colOff",textNode:t.offsetX.toString()},{name:"xdr:row",textNode:t.row.toString()},{name:"xdr:rowOff",textNode:t.offsetY.toString()}]}),getExt=e=>{const t=[{name:"a:ext",properties:{rawMap:{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}},children:[{name:"a16:creationId",properties:{rawMap:{id:"{822E6D20-D7BC-2841-A643-D49A6EF008A2}","xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main"}}}]}];switch(e.recolor&&e.recolor.toLowerCase()){case"grayscale":case"sepia":case"washout":t.push({name:"a:ext",properties:{rawMap:{uri:"{C183D7F6-B498-43B3-948B-1728B52AA6E4}"}},children:[{name:"adec:decorative",properties:{rawMap:{val:"0","xmlns:adec":"http://schemas.microsoft.com/office/drawing/2017/decorative"}}}]})}return{name:"a:extLst",children:t}},getNvPicPr=(e,t)=>({name:"xdr:nvPicPr",children:[{name:"xdr:cNvPr",properties:{rawMap:{id:t,name:e.id,descr:e.altText!=null?e.altText:void 0}},children:[getExt(e)]},{name:"xdr:cNvPicPr",properties:{rawMap:{preferRelativeResize:"0"}},children:[{name:"a:picLocks"}]}]}),getColorDetails=e=>{if(!e.saturation&&!e.tint)return;const t=[];return e.saturation&&t.push({name:"a:satMod",properties:{rawMap:{val:e.saturation*1e3}}}),e.tint&&t.push({name:"a:tint",properties:{rawMap:{val:e.tint*1e3}}}),t},getDuoTone=(e,t)=>({name:"a:duotone",children:[{name:"a:prstClr",properties:{rawMap:{val:e.color}},children:getColorDetails(e)},{name:"a:srgbClr",properties:{rawMap:{val:t.color}},children:getColorDetails(t)}]}),getBlipFill=(e,t)=>{let r;if(e.transparency){const a=Math.min(Math.max(e.transparency,0),100);r=[{name:"a:alphaModFix",properties:{rawMap:{amt:1e5-Math.round(a*1e3)}}}]}if(e.recolor)switch(r||(r=[]),e.recolor.toLocaleLowerCase()){case"grayscale":r.push({name:"a:grayscl"});break;case"sepia":r.push(getDuoTone({color:"black"},{color:"D9C3A5",tint:50,saturation:180}));break;case"washout":r.push({name:"a:lum",properties:{rawMap:{bright:"70000",contrast:"-70000"}}});break;default:}return{name:"xdr:blipFill",children:[{name:"a:blip",properties:{rawMap:{cstate:"print","r:embed":`rId${t}`,"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}},children:r},{name:"a:stretch",children:[{name:"a:fillRect"}]}]}},getSpPr=(e,t)=>{const r={name:"a:xfrm",children:[{name:"a:off",properties:{rawMap:{x:0,y:0}}},{name:"a:ext",properties:{rawMap:{cx:t.width,cy:t.height}}}]};if(e.rotation){const s=e.rotation;r.properties={rawMap:{rot:Math.min(Math.max(s,0),360)*6e4}}}return{name:"xdr:spPr",children:[r,{name:"a:prstGeom",properties:{rawMap:{prst:"rect"}},children:[{name:"a:avLst"}]}]}},getImageBoxSize=e=>{e.fitCell=!!e.fitCell||!e.width||!e.height;const{position:t={},fitCell:r,width:a=0,height:o=0,totalHeight:s,totalWidth:n}=e,{offsetX:i=0,offsetY:l=0,row:c=1,rowSpan:p=1,column:m=1,colSpan:h=1}=t;return{from:{row:c-1,col:m-1,offsetX:pixelsToEMU(i),offsetY:pixelsToEMU(l)},to:{row:c-1+(r?1:p-1),col:m-1+(r?1:h-1),offsetX:pixelsToEMU(a+i),offsetY:pixelsToEMU(o+l)},height:pixelsToEMU(s||o),width:pixelsToEMU(n||a)}},getPicture=(e,t,r,a)=>({name:"xdr:pic",children:[getNvPicPr(e,t+1),getBlipFill(e,r+1),getSpPr(e,a)]}),drawingFactory={getTemplate(e){const{sheetIndex:t}=e,r=ExcelXlsxFactory.worksheetImages.get(t),a=ExcelXlsxFactory.worksheetImageIds.get(t),o=r.map((s,n)=>{const i=getImageBoxSize(s);return{name:"xdr:twoCellAnchor",properties:{rawMap:{editAs:"absolute"}},children:[getAnchor("from",i.from),getAnchor("to",i.to),getPicture(s,n,a.get(s.id).index,i),{name:"xdr:clientData"}]}});return{name:"xdr:wsDr",properties:{rawMap:{"xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main","xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing"}},children:o}}},drawing_default=drawingFactory,tableFactory={getTemplate(e,t){const{name:r,columns:a,rowCount:o,displayName:s,headerRowIndex:n,showRowStripes:i,showColumnStripes:l,showFilterButtons:c,highlightFirstColumn:p,highlightLastColumn:m}=e||{};if(!e||!r||!Array.isArray(a)||!a.length||!o)return{name:"table"};const h=a.map((w,x)=>({name:"filterColumn",properties:{rawMap:{colId:x.toString(),hiddenButton:c[x]?0:1}}})),u=n+1,d=(t+1).toString(),g=`A${u}`,v=`${String.fromCharCode(64+a.length)}${u+o}`,f=`${g}:${v}`,y=t?`${s}_${t+1}`:s;return{name:"table",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"xr xr3","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision","xmlns:xr3":"http://schemas.microsoft.com/office/spreadsheetml/2016/revision3",name:r,displayName:y,ref:f,totalsRowShown:0,id:d}},children:[{name:"autoFilter",properties:{rawMap:{ref:f}},children:h},{name:"tableColumns",properties:{rawMap:{count:a.length}},children:a.map((w,x)=>({name:"tableColumn",properties:{rawMap:{id:(x+1).toString(),name:w,dataCellStyle:"Normal"}}}))},{name:"tableStyleInfo",properties:{rawMap:{name:"TableStyleLight1",showFirstColumn:p?1:0,showLastColumn:m?1:0,showRowStripes:i?1:0,showColumnStripes:l?1:0}}}]}}},table_default=tableFactory,getColorChildren=e=>{const[t,r,a,o]=e;return{name:`a:${t}`,children:[{name:`a:${r}`,properties:{rawMap:{val:a,lastClr:o}}}]}},colorScheme={getTemplate(){return{name:"a:clrScheme",properties:{rawMap:{name:"Office"}},children:[getColorChildren(["dk1","sysClr","windowText","000000"]),getColorChildren(["lt1","sysClr","window","FFFFFF"]),getColorChildren(["dk2","srgbClr","44546A"]),getColorChildren(["lt2","srgbClr","E7E6E6"]),getColorChildren(["accent1","srgbClr","4472C4"]),getColorChildren(["accent2","srgbClr","ED7D31"]),getColorChildren(["accent3","srgbClr","A5A5A5"]),getColorChildren(["accent4","srgbClr","FFC000"]),getColorChildren(["accent5","srgbClr","5B9BD5"]),getColorChildren(["accent6","srgbClr","70AD47"]),getColorChildren(["hlink","srgbClr","0563C1"]),getColorChildren(["folHlink","srgbClr","954F72"])]}}},colorScheme_default=colorScheme,getFont=e=>{const[t,r,a,o]=e;return{name:`a:${t}`,properties:{rawMap:{script:a,typeface:r,panose:o}}}},fontScheme={getTemplate(){return{name:"a:fontScheme",properties:{rawMap:{name:"Office"}},children:[{name:"a:majorFont",children:[getFont(["latin","Calibri Light",void 0,"020F0302020204030204"]),getFont(["ea",""]),getFont(["cs",""]),getFont(["font","\u6E38\u30B4\u30B7\u30C3\u30AF Light","Jpan"]),getFont(["font","\uB9D1\uC740 \uACE0\uB515","Hang"]),getFont(["font","\u7B49\u7EBF Light","Hans"]),getFont(["font","\u65B0\u7D30\u660E\u9AD4","Hant"]),getFont(["font","Times New Roman","Arab"]),getFont(["font","Times New Roman","Hebr"]),getFont(["font","Tahoma","Thai"]),getFont(["font","Nyala","Ethi"]),getFont(["font","Vrinda","Beng"]),getFont(["font","Shruti","Gujr"]),getFont(["font","MoolBoran","Khmr"]),getFont(["font","Tunga","Knda"]),getFont(["font","Raavi","Guru"]),getFont(["font","Euphemia","Cans"]),getFont(["font","Plantagenet Cherokee","Cher"]),getFont(["font","Microsoft Yi Baiti","Yiii"]),getFont(["font","Microsoft Himalaya","Tibt"]),getFont(["font","MV Boli","Thaa"]),getFont(["font","Mangal","Deva"]),getFont(["font","Gautami","Telu"]),getFont(["font","Latha","Taml"]),getFont(["font","Estrangelo Edessa","Syrc"]),getFont(["font","Kalinga","Orya"]),getFont(["font","Kartika","Mlym"]),getFont(["font","DokChampa","Laoo"]),getFont(["font","Iskoola Pota","Sinh"]),getFont(["font","Mongolian Baiti","Mong"]),getFont(["font","Times New Roman","Viet"]),getFont(["font","Microsoft Uighur","Uigh"]),getFont(["font","Sylfaen","Geor"]),getFont(["font","Arial","Armn"]),getFont(["font","Leelawadee UI","Bugi"]),getFont(["font","Microsoft JhengHei","Bopo"]),getFont(["font","Javanese Text","Java"]),getFont(["font","Segoe UI","Lisu"]),getFont(["font","Myanmar Text","Mymr"]),getFont(["font","Ebrima","Nkoo"]),getFont(["font","Nirmala UI","Olck"]),getFont(["font","Ebrima","Osma"]),getFont(["font","Phagspa","Phag"]),getFont(["font","Estrangelo Edessa","Syrn"]),getFont(["font","Estrangelo Edessa","Syrj"]),getFont(["font","Estrangelo Edessa","Syre"]),getFont(["font","Nirmala UI","Sora"]),getFont(["font","Microsoft Tai Le","Tale"]),getFont(["font","Microsoft New Tai Lue","Talu"]),getFont(["font","Ebrima","Tfng"])]},{name:"a:minorFont",children:[getFont(["latin","Calibri",void 0,"020F0502020204030204"]),getFont(["ea",""]),getFont(["cs",""]),getFont(["font","\u6E38\u30B4\u30B7\u30C3\u30AF","Jpan"]),getFont(["font","\uB9D1\uC740 \uACE0\uB515","Hang"]),getFont(["font","\u7B49\u7EBF","Hans"]),getFont(["font","\u65B0\u7D30\u660E\u9AD4","Hant"]),getFont(["font","Arial","Arab"]),getFont(["font","Arial","Hebr"]),getFont(["font","Tahoma","Thai"]),getFont(["font","Nyala","Ethi"]),getFont(["font","Vrinda","Beng"]),getFont(["font","Shruti","Gujr"]),getFont(["font","DaunPenh","Khmr"]),getFont(["font","Tunga","Knda"]),getFont(["font","Raavi","Guru"]),getFont(["font","Euphemia","Cans"]),getFont(["font","Plantagenet Cherokee","Cher"]),getFont(["font","Microsoft Yi Baiti","Yiii"]),getFont(["font","Microsoft Himalaya","Tibt"]),getFont(["font","MV Boli","Thaa"]),getFont(["font","Mangal","Deva"]),getFont(["font","Gautami","Telu"]),getFont(["font","Latha","Taml"]),getFont(["font","Estrangelo Edessa","Syrc"]),getFont(["font","Kalinga","Orya"]),getFont(["font","Kartika","Mlym"]),getFont(["font","DokChampa","Laoo"]),getFont(["font","Iskoola Pota","Sinh"]),getFont(["font","Mongolian Baiti","Mong"]),getFont(["font","Arial","Viet"]),getFont(["font","Microsoft Uighur","Uigh"]),getFont(["font","Sylfaen","Geor"]),getFont(["font","Arial","Armn"]),getFont(["font","Leelawadee UI","Bugi"]),getFont(["font","Microsoft JhengHei","Bopo"]),getFont(["font","Javanese Text","Java"]),getFont(["font","Segoe UI","Lisu"]),getFont(["font","Myanmar Text","Mymr"]),getFont(["font","Ebrima","Nkoo"]),getFont(["font","Nirmala UI","Olck"]),getFont(["font","Ebrima","Osma"]),getFont(["font","Phagspa","Phag"]),getFont(["font","Estrangelo Edessa","Syrn"]),getFont(["font","Estrangelo Edessa","Syrj"]),getFont(["font","Estrangelo Edessa","Syre"]),getFont(["font","Nirmala UI","Sora"]),getFont(["font","Microsoft Tai Le","Tale"]),getFont(["font","Microsoft New Tai Lue","Talu"]),getFont(["font","Ebrima","Tfng"])]}]}}},fontScheme_default=fontScheme,getPropertyVal=(e,t,r)=>({name:`a:${e}`,properties:{rawMap:{val:t}},children:r}),getGs=e=>{const[t,r,a,o,s,n]=e,i=[];return i.push(getPropertyVal("satMod",a)),o&&i.push(getPropertyVal("lumMod",o)),s&&i.push(getPropertyVal("tint",s)),n&&i.push(getPropertyVal("shade",n)),{name:"a:gs",properties:{rawMap:{pos:t}},children:[{name:"a:schemeClr",properties:{rawMap:{val:r}},children:i}]}},getSolidFill=(e,t)=>({name:"a:solidFill",children:[getPropertyVal("schemeClr",e,t)]}),getGradFill=e=>{const[t,r,a,o,s]=e,[n,i]=s;return{name:"a:gradFill",properties:{rawMap:{rotWithShape:t}},children:[{name:"a:gsLst",children:[getGs(r),getGs(a),getGs(o)]},{name:"a:lin",properties:{rawMap:{ang:n,scaled:i}}}]}},getLine=e=>{const[t,r,a,o]=e;return{name:"a:ln",properties:{rawMap:{w:t,cap:r,cmpd:a,algn:o}},children:[getSolidFill("phClr"),getPropertyVal("prstDash","solid"),{name:"a:miter",properties:{rawMap:{lim:"800000"}}}]}},getEffectStyle=e=>{const t=[];if(e){const[r,a,o,s,n]=e;t.push({name:"a:outerShdw",properties:{rawMap:{blurRad:r,dist:a,dir:o,algn:s,rotWithShape:n}},children:[getPropertyVal("srgbClr","000000",[getPropertyVal("alpha","63000")])]})}return{name:"a:effectStyle",children:[Object.assign({},{name:"a:effectLst"},t.length?{children:t}:{})]}},getFillStyleList=()=>({name:"a:fillStyleLst",children:[getSolidFill("phClr"),getGradFill(["1",["0","phClr","105000","110000","67000"],["50000","phClr","103000","105000","73000"],["100000","phClr","109000","105000","81000"],["5400000","0"]]),getGradFill(["1",["0","phClr","103000","102000","94000"],["50000","phClr","110000","100000",void 0,"100000"],["100000","phClr","120000","99000",void 0,"78000"],["5400000","0"]])]}),getLineStyleList=()=>({name:"a:lnStyleLst",children:[getLine(["6350","flat","sng","ctr"]),getLine(["12700","flat","sng","ctr"]),getLine(["19050","flat","sng","ctr"])]}),getEffectStyleList=()=>({name:"a:effectStyleLst",children:[getEffectStyle(),getEffectStyle(),getEffectStyle(["57150","19050","5400000","ctr","0"])]}),getBgFillStyleList=()=>({name:"a:bgFillStyleLst",children:[getSolidFill("phClr"),getSolidFill("phClr",[getPropertyVal("tint","95000"),getPropertyVal("satMod","170000")]),getGradFill(["1",["0","phClr","150000","102000","93000","98000"],["50000","phClr","130000","103000","98000","90000"],["100000","phClr","120000",void 0,void 0,"63000"],["5400000","0"]])]}),formatScheme={getTemplate(){return{name:"a:fmtScheme",properties:{rawMap:{name:"Office"}},children:[getFillStyleList(),getLineStyleList(),getEffectStyleList(),getBgFillStyleList()]}}},formatScheme_default=formatScheme,themeElements={getTemplate(){return{name:"a:themeElements",children:[colorScheme_default.getTemplate(),fontScheme_default.getTemplate(),formatScheme_default.getTemplate()]}}},themeElements_default=themeElements,officeTheme={getTemplate(){return{name:"a:theme",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{a:"http://schemas.openxmlformats.org/drawingml/2006/main"}}],rawMap:{name:"Office Theme"}},children:[themeElements_default.getTemplate(),{name:"a:objectDefaults"},{name:"a:extraClrSchemeLst"}]}}},office_default=officeTheme,import_core=require("@ag-grid-community/core"),buildSharedString=e=>{const t=[];for(const r of e.keys()){const a=r.toString(),o={name:"t",textNode:import_core._.escapeString(a)};a.trim().length!==a.length&&(o.properties={rawMap:{"xml:space":"preserve"}}),t.push({name:"si",children:[o]})}return t},sharedStrings={getTemplate(e){return{name:"sst",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:e.size,uniqueCount:e.size}},children:buildSharedString(e)}}},sharedStrings_default=sharedStrings,import_core2=require("@ag-grid-community/core");function prepareString(e){const t=e.split(/(\[[^\]]*\])/);for(let r=0;r<t.length;r++){let a=t[r];a.length&&(a.startsWith("[")||(a=a.replace(/\$/g,'"$"')),t[r]=import_core2._.escapeString(a))}return t.join("")}var numberFormatFactory={getTemplate(e){let{formatCode:t,numFmtId:r}=e;return t.length&&(t=prepareString(t)),{name:"numFmt",properties:{rawMap:{formatCode:t,numFmtId:r}}}}},numberFormat_default=numberFormatFactory,numberFormatsFactory={getTemplate(e){return{name:"numFmts",properties:{rawMap:{count:e.length}},children:e.map(t=>numberFormat_default.getTemplate(t))}}},numberFormats_default=numberFormatsFactory,fontFactory={getTemplate(e){const{size:t,colorTheme:r,color:a="FF000000",fontName:o="Calibri",family:s,scheme:n,italic:i,bold:l,strikeThrough:c,outline:p,shadow:m,underline:h,verticalAlign:u}=e,d=[{name:"sz",properties:{rawMap:{val:t}}},{name:"color",properties:{rawMap:{theme:r,rgb:a}}},{name:"name",properties:{rawMap:{val:o}}}];return s&&d.push({name:"family",properties:{rawMap:{val:s}}}),n&&d.push({name:"scheme",properties:{rawMap:{val:n}}}),i&&d.push({name:"i"}),l&&d.push({name:"b"}),c&&d.push({name:"strike"}),p&&d.push({name:"outline"}),m&&d.push({name:"shadow"}),h&&d.push({name:"u",properties:{rawMap:{val:h}}}),u&&d.push({name:"vertAlign",properties:{rawMap:{val:u}}}),{name:"font",children:d}}},font_default=fontFactory,fontsFactory={getTemplate(e){return{name:"fonts",properties:{rawMap:{count:e.length}},children:e.map(t=>font_default.getTemplate(t))}}},fonts_default=fontsFactory,fillFactory={getTemplate(e){const{patternType:t,fgTheme:r,fgTint:a,fgRgb:o,bgRgb:s,bgIndexed:n}=e,i={name:"patternFill",properties:{rawMap:{patternType:t}}};return(r||a||o)&&(i.children=[{name:"fgColor",properties:{rawMap:{theme:r,tint:a,rgb:o}}}]),(n||s)&&(i.children||(i.children=[]),i.children.push({name:"bgColor",properties:{rawMap:{indexed:n,rgb:s}}})),{name:"fill",children:[i]}}},fill_default=fillFactory,fillsFactory={getTemplate(e){return{name:"fills",properties:{rawMap:{count:e.length}},children:e.map(t=>fill_default.getTemplate(t))}}},fills_default=fillsFactory,getWeightName=e=>{switch(e){case 1:return"thin";case 2:return"medium";case 3:return"thick";default:return"hair"}},mappedBorderNames={None:"None",Dot:"Dotted",Dash:"Dashed",Double:"Double",DashDot:"DashDot",DashDotDot:"DashDotDot",SlantDashDot:"SlantDashDot"},mediumBorders=["Dashed","DashDot","DashDotDot"],colorMap={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinDiagStripe:"lightUp",ThinHorzCross:"lightGrid",ThinDiagCross:"lightTrellis",Gray125:"gray125",Gray0625:"gray0625"},horizontalAlignmentMap={Automatic:"general",Left:"left",Center:"center",Right:"right",Fill:"fill",Justify:"justify",CenterAcrossSelection:"centerContinuous",Distributed:"distributed",JustifyDistributed:"justify"},verticalAlignmentMap={Automatic:void 0,Top:"top",Bottom:"bottom",Center:"center",Justify:"justify",Distributed:"distributed",JustifyDistributed:"justify"},convertLegacyPattern=e=>e?colorMap[e]||e:"none",convertLegacyColor=e=>e==null?e:(e.charAt(0)==="#"&&(e=e.substring(1)),e.length===6?"FF"+e:e),convertLegacyBorder=(e,t)=>{if(!e)return"thin";const r=getWeightName(t),a=mappedBorderNames[e];return e==="Continuous"?r:r==="medium"&&mediumBorders.indexOf(a)!==-1?`medium${a}`:a.charAt(0).toLowerCase()+a.substring(1)},convertLegacyHorizontalAlignment=e=>horizontalAlignmentMap[e]||"general",convertLegacyVerticalAlignment=e=>verticalAlignmentMap[e]||void 0,getBorderColor=e=>({name:"color",properties:{rawMap:{rgb:convertLegacyColor(e||"#000000")}}}),borderFactory={getTemplate(e){const{left:t,right:r,top:a,bottom:o,diagonal:s}=e,n=t?[getBorderColor(t.color)]:void 0,i=r?[getBorderColor(r.color)]:void 0,l=a?[getBorderColor(a.color)]:void 0,c=o?[getBorderColor(o.color)]:void 0,p=s?[getBorderColor(s.color)]:void 0;return{name:"border",children:[{name:"left",properties:{rawMap:{style:t&&t.style}},children:n},{name:"right",properties:{rawMap:{style:r&&r.style}},children:i},{name:"top",properties:{rawMap:{style:a&&a.style}},children:l},{name:"bottom",properties:{rawMap:{style:o&&o.style}},children:c},{name:"diagonal",properties:{rawMap:{style:s&&s.style}},children:p}]}}},border_default=borderFactory,bordersFactory={getTemplate(e){return{name:"borders",properties:{rawMap:{count:e.length}},children:e.map(t=>border_default.getTemplate(t))}}},borders_default=bordersFactory,getReadingOrderId=e=>{const r=["Context","LeftToRight","RightToLeft"].indexOf(e);return Math.max(r,0)},alignmentFactory={getTemplate(e){const{horizontal:t,indent:r,readingOrder:a,rotate:o,shrinkToFit:s,vertical:n,wrapText:i}=e;return{name:"alignment",properties:{rawMap:{horizontal:t&&convertLegacyHorizontalAlignment(t),indent:r,readingOrder:a&&getReadingOrderId(a),textRotation:o,shrinkToFit:s,vertical:n&&convertLegacyVerticalAlignment(n),wrapText:i}}}}},alignment_default=alignmentFactory,protectionFactory={getTemplate(e){const t=e.protected===!1?0:1;return{name:"protection",properties:{rawMap:{hidden:e.hideFormula===!0?1:0,locked:t}}}}},protection_default=protectionFactory,xfFactory={getTemplate(e){const{alignment:t,borderId:r,fillId:a,fontId:o,numFmtId:s,protection:n,quotePrefix:i,xfId:l}=e,c=[];return t&&c.push(alignment_default.getTemplate(t)),n&&c.push(protection_default.getTemplate(n)),{name:"xf",properties:{rawMap:{applyAlignment:t?1:void 0,applyProtection:n?1:void 0,applyBorder:r?1:void 0,applyFill:a?1:void 0,borderId:r,fillId:a,applyFont:o?1:void 0,fontId:o,applyNumberFormat:s?1:void 0,numFmtId:s,quotePrefix:i?1:void 0,xfId:l}},children:c.length?c:void 0}}},xf_default=xfFactory,cellStylesXfsFactory={getTemplate(e){return{name:"cellStyleXfs",properties:{rawMap:{count:e.length}},children:e.map(t=>xf_default.getTemplate(t))}}},cellStyleXfs_default=cellStylesXfsFactory,cellXfsFactory={getTemplate(e){return{name:"cellXfs",properties:{rawMap:{count:e.length}},children:e.map(t=>xf_default.getTemplate(t))}}},cellXfs_default=cellXfsFactory,borderFactory2={getTemplate(e){const{builtinId:t,name:r,xfId:a}=e;return{name:"cellStyle",properties:{rawMap:{builtinId:t,name:r,xfId:a}}}}},cellStyle_default=borderFactory2,cellStylesFactory={getTemplate(e){return{name:"cellStyles",properties:{rawMap:{count:e.length}},children:e.map(t=>cellStyle_default.getTemplate(t))}}},cellStyles_default=cellStylesFactory,stylesMap,registeredNumberFmts,registeredFonts,registeredFills,registeredBorders,registeredCellStyleXfs,registeredCellXfs,registeredCellStyles,currentSheet,getStyleName=(e,t)=>(e.indexOf("mixedStyle")!==-1&&t>1&&(e+=`_${t}`),e),resetStylesheetValues=()=>{stylesMap={base:0},registeredNumberFmts=[],registeredFonts=[{fontName:"Calibri",colorTheme:"1",family:"2",scheme:"minor"}],registeredFills=[{patternType:"none"},{patternType:"gray125"}],registeredBorders=[{left:void 0,right:void 0,top:void 0,bottom:void 0,diagonal:void 0}],registeredCellStyleXfs=[{borderId:0,fillId:0,fontId:0,numFmtId:0}],registeredCellXfs=[{borderId:0,fillId:0,fontId:0,numFmtId:0,xfId:0}],registeredCellStyles=[{builtinId:0,name:"Normal",xfId:0}]},registerFill=e=>{const t=convertLegacyPattern(e.pattern),r=convertLegacyColor(e.color),a=convertLegacyColor(e.patternColor);let o=registeredFills.findIndex(s=>{const{patternType:n,fgRgb:i,bgRgb:l}=s;return!(n!=t||i!=r||l!=a)});return o===-1&&(o=registeredFills.length,registeredFills.push({patternType:t,fgRgb:r,bgRgb:a})),o},registerNumberFmt=e=>{if(numberFormatMap[e])return numberFormatMap[e];let t=registeredNumberFmts.findIndex(r=>r.formatCode===e);return t===-1?(t=registeredNumberFmts.length+164,registeredNumberFmts.push({formatCode:e,numFmtId:t})):t=registeredNumberFmts[t].numFmtId,t},registerBorders=e=>{const{borderBottom:t,borderTop:r,borderLeft:a,borderRight:o}=e;let s,n,i,l,c,p,m,h;a&&(i=convertLegacyBorder(a.lineStyle,a.weight),m=convertLegacyColor(a.color)),o&&(l=convertLegacyBorder(o.lineStyle,o.weight),h=convertLegacyColor(o.color)),t&&(s=convertLegacyBorder(t.lineStyle,t.weight),c=convertLegacyColor(t.color)),r&&(n=convertLegacyBorder(r.lineStyle,r.weight),p=convertLegacyColor(r.color));let u=registeredBorders.findIndex(d=>{const{left:g,right:v,top:f,bottom:y}=d;if(!g&&(i||m)||!v&&(l||h)||!f&&(n||p)||!y&&(s||c))return!1;const{style:w,color:x}=g||{},{style:b,color:T}=v||{},{style:C,color:M}=f||{},{style:F,color:I}=y||{};return!(w!=i||x!=m||b!=l||T!=h||C!=n||M!=p||F!=s||I!=c)});return u===-1&&(u=registeredBorders.length,registeredBorders.push({left:{style:i,color:m},right:{style:l,color:h},top:{style:n,color:p},bottom:{style:s,color:c},diagonal:{style:void 0,color:void 0}})),u},registerFont=e=>{const{fontName:t="Calibri",color:r,size:a,bold:o,italic:s,outline:n,shadow:i,strikeThrough:l,underline:c,family:p,verticalAlign:m}=e,h=convertLegacyColor(r),u=getFontFamilyId(p),d=c?c.toLocaleLowerCase():void 0,g=m?m.toLocaleLowerCase():void 0;let v=registeredFonts.findIndex(f=>!(f.fontName!=t||f.color!=h||f.size!=a||f.bold!=o||f.italic!=s||f.outline!=n||f.shadow!=i||f.strikeThrough!=l||f.underline!=d||f.verticalAlign!=g||f.family!=u));return v===-1&&(v=registeredFonts.length,registeredFonts.push({fontName:t,color:h,size:a,bold:o,italic:s,outline:n,shadow:i,strikeThrough:l,underline:d,verticalAlign:g,family:u?.toString()})),v},registerStyle=e=>{const{alignment:t,borders:r,font:a,interior:o,numberFormat:s,protection:n,quotePrefix:i}=e;let{id:l}=e,c=0,p=0,m=0,h=0;l&&(l=getStyleName(l,currentSheet),stylesMap[l]==null&&(o&&(c=registerFill(o)),r&&(p=registerBorders(r)),a&&(m=registerFont(a)),s&&(h=registerNumberFmt(s.format)),stylesMap[l]=registeredCellXfs.length,registeredCellXfs.push({alignment:t,borderId:p||0,fillId:c||0,fontId:m||0,numFmtId:h||0,protection:n,quotePrefix:i,xfId:0})))},stylesheetFactory={getTemplate(e){const t=numberFormats_default.getTemplate(registeredNumberFmts),r=fonts_default.getTemplate(registeredFonts.map(l=>__spreadProps(__spreadValues({},l),{size:l.size!=null?l.size:e}))),a=fills_default.getTemplate(registeredFills),o=borders_default.getTemplate(registeredBorders),s=cellStyleXfs_default.getTemplate(registeredCellStyleXfs),n=cellXfs_default.getTemplate(registeredCellXfs),i=cellStyles_default.getTemplate(registeredCellStyles);return resetStylesheetValues(),{name:"styleSheet",properties:{rawMap:{"mc:Ignorable":"x14ac x16r2 xr",xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision"}},children:[t,r,a,o,s,n,i,{name:"tableStyles",properties:{rawMap:{count:0,defaultPivotStyle:"PivotStyleLight16",defaultTableStyle:"TableStyleMedium2"}}}]}}},getStyleId=(e,t)=>stylesMap[getStyleName(e,t)]||0,registerStyles=(e,t)=>{currentSheet=t,currentSheet===1&&resetStylesheetValues(),e.forEach(registerStyle)},stylesheet_default=stylesheetFactory,sheetFactory={getTemplate(e,t){const r=(t+1).toString();return{name:"sheet",properties:{rawMap:{name:e,sheetId:r,"r:id":`rId${r}`}}}}},sheet_default=sheetFactory,sheetsFactory={getTemplate(e){return{name:"sheets",children:e.map((t,r)=>sheet_default.getTemplate(t,r))}}},sheets_default=sheetsFactory,workbookFactory={getTemplate(e){return{name:"workbook",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:[sheets_default.getTemplate(e)]}}},workbook_default=workbookFactory,import_core4=require("@ag-grid-community/core"),getExcelCellWidth=e=>Math.ceil((e-12)/7+1),columnFactory={getTemplate(e){const{min:t,max:r,outlineLevel:a,s:o,width:s,hidden:n,bestFit:i}=e;let l=1,c="0";return s>1&&(l=getExcelCellWidth(s),c="1"),{name:"col",properties:{rawMap:{min:t,max:r,outlineLevel:a??void 0,width:l,style:o,hidden:n?"1":"0",bestFit:i?"1":"0",customWidth:c}}}}},column_default=columnFactory,import_core3=require("@ag-grid-community/core"),convertLegacyType=e=>{const t=e.charAt(0).toLowerCase();return t==="s"?"inlineStr":t},cellFactory={getTemplate(e,t,r){const{ref:a,data:o,styleId:s}=e,{type:n,value:i}=o||{type:"empty",value:null};let l=n;n==="f"?l="str":n.charAt(0)===n.charAt(0).toUpperCase()&&(l=convertLegacyType(n));const c={name:"c",properties:{rawMap:{r:a,t:l==="empty"?void 0:l,s:s?getStyleId(s,r):void 0}}};if(l==="empty")return c;let p;return l==="str"&&n==="f"?p=[{name:"f",textNode:import_core3._.escapeString(i)}]:l==="inlineStr"?p=[{name:"is",children:[{name:"t",textNode:import_core3._.escapeString(i)}]}]:p=[{name:"v",textNode:i}],Object.assign({},c,{children:p})}},cell_default=cellFactory,addEmptyCells=(e,t)=>{const r=[];let a=0;for(let o=0;o<e.length;o++){const s=e[o];s.mergeAcross&&(r.push({pos:o,excelPos:a}),a+=s.mergeAcross),a++}if(r.length)for(let o=r.length-1;o>=0;o--){const s=[],n=e[r[o].pos];for(let i=1;i<=n.mergeAcross;i++)s.push({ref:`${getExcelColumnName(r[o].excelPos+1+i)}${t+1}`,styleId:n.styleId,data:{type:"empty",value:null}});s.length&&e.splice(r[o].pos+1,0,...s)}},shouldDisplayCell=e=>{var t;return((t=e.data)==null?void 0:t.value)!==""||e.styleId!==void 0},rowFactory={getTemplate(e,t,r){const{collapsed:a,hidden:o,height:s,outlineLevel:n,cells:i=[]}=e;addEmptyCells(i,t);const l=i.filter(shouldDisplayCell).map((c,p)=>cell_default.getTemplate(c,p,r));return{name:"row",properties:{rawMap:{r:t+1,collapsed:a?"1":"0",hidden:o?"1":"0",ht:s,customHeight:s!=null?"1":"0",spans:"1:1",outlineLevel:n||void 0}},children:l}}},row_default=rowFactory,mergeCellFactory={getTemplate(e){return{name:"mergeCell",properties:{rawMap:{ref:e}}}}},mergeCell_default=mergeCellFactory,getMergedCellsAndAddColumnGroups=(e,t,r)=>{const a=[],o=[];e.forEach((i,l)=>{const c=i.cells;let p=0,m;c.forEach((h,u)=>{const d=u+p+1,g=getExcelColumnName(d),v=l+1;if(h.mergeAcross){p+=h.mergeAcross;const y=getExcelColumnName(u+p+1);a.push(`${g}${v}:${y}${v}`)}t[d-1]||(t[d-1]={});const{collapsibleRanges:f}=h;f&&f.forEach(y=>{o.push([d+y[0],d+y[1]])}),m=t[d-1],m.min=d,m.max=d,h.ref=`${g}${v}`})}),o.sort((i,l)=>i[0]!==l[0]?i[0]-l[0]:l[1]-i[1]);const s=new Map,n=new Map;return o.filter(i=>{const l=i.toString();return s.get(l)?!1:(s.set(l,!0),!0)}).forEach(i=>{const l=t.find(p=>p.min==i[0]&&p.max==i[1]),c=n.get(i[0]);t.push({min:i[0],max:i[1],outlineLevel:r?void 0:c||1,width:(l||{width:100}).width}),n.set(i[0],(c||0)+1)}),a},getPageOrientation=e=>!e||e!=="Portrait"&&e!=="Landscape"?"portrait":e.toLocaleLowerCase(),getPageSize=e=>{if(e==null)return 1;const r=["Letter","Letter Small","Tabloid","Ledger","Legal","Statement","Executive","A3","A4","A4 Small","A5","A6","B4","B5","Folio","Envelope","Envelope DL","Envelope C5","Envelope B5","Envelope C3","Envelope C4","Envelope C6","Envelope Monarch","Japanese Postcard","Japanese Double Postcard"].indexOf(e);return r===-1?1:r+1},addColumns=e=>t=>(e.length&&t.children.push({name:"cols",children:e.map(r=>column_default.getTemplate(r))}),t),addSheetData=(e,t)=>r=>(e.length&&r.children.push({name:"sheetData",children:e.map((a,o)=>row_default.getTemplate(a,o,t))}),r),addMergeCells=e=>t=>(e.length&&t.children.push({name:"mergeCells",properties:{rawMap:{count:e.length}},children:e.map(r=>mergeCell_default.getTemplate(r))}),t),addPageMargins=e=>t=>{const{top:r=.75,right:a=.7,bottom:o=.75,left:s=.7,header:n=.3,footer:i=.3}=e;return t.children.push({name:"pageMargins",properties:{rawMap:{bottom:o,footer:i,header:n,left:s,right:a,top:r}}}),t},addPageSetup=e=>t=>(e&&t.children.push({name:"pageSetup",properties:{rawMap:{horizontalDpi:0,verticalDpi:0,orientation:getPageOrientation(e.orientation),paperSize:getPageSize(e.pageSize)}}}),t),replaceHeaderFooterTokens=e=>{const t={"&[Page]":"&P","&[Pages]":"&N","&[Date]":"&D","&[Time]":"&T","&[Tab]":"&A","&[Path]":"&Z","&[File]":"&F","&[Picture]":"&G"};return import_core4._.iterateObject(t,(r,a)=>{e=e.replace(r,a)}),e},getHeaderPosition=e=>e==="Center"?"C":e==="Right"?"R":"L",applyHeaderFontStyle=(e,t)=>(t&&(e+="&amp;&quot;",e+=t.fontName||"Calibri",t.bold!==t.italic?e+=t.bold?",Bold":",Italic":t.bold?e+=",Bold Italic":e+=",Regular",e+="&quot;",t.size&&(e+=`&amp;${t.size}`),t.strikeThrough&&(e+="&amp;S"),t.underline&&(e+=`&amp;${t.underline==="Double"?"E":"U"}`),t.color&&(e+=`&amp;K${t.color.replace("#","").toUpperCase()}`)),e),processHeaderFooterContent=(e,t,r)=>e.reduce((a,o,s)=>{const n=getHeaderPosition(o.position),i=applyHeaderFontStyle(`${a}&amp;${n}`,o.font),l=["Left","Center","Right"];o.position||(o.position=l[s]);const{image:c}=o;if(o.value==="&[Picture]"&&c){const p=`${n}${t}${r}`;ExcelXlsxFactory.addHeaderFooterImageToMap(c,p)}return`${i}${import_core4._.escapeString(replaceHeaderFooterTokens(o.value))}`},""),buildHeaderFooter=e=>{const t=["all","first","even"],r=[];return t.forEach(a=>{const o=e[a],s=a==="all"?"odd":a;if(o)for(const[n,i]of Object.entries(o)){const l=`${n.charAt(0).toUpperCase()}${n.slice(1)}`,c=n[0].toUpperCase();if(i){const p=a==="all"?"":a.toUpperCase();r.push({name:`${s}${l}`,properties:{rawMap:{"xml:space":"preserve"}},textNode:processHeaderFooterContent(i,c,p)})}}}),r},addHeaderFooter=e=>t=>{if(!e)return t;const r=e.first!=null?1:0,a=e.even!=null?1:0;return t.children.push({name:"headerFooter",properties:{rawMap:{differentFirst:r,differentOddEven:a}},children:buildHeaderFooter(e)}),t},addExcelTableRel=e=>t=>(e&&t.children.push({name:"tableParts",properties:{rawMap:{count:"1"}},children:[{name:"tablePart",properties:{rawMap:{"r:id":`rId${++t.rIdCounter}`}}}]}),t),addDrawingRel=e=>t=>{const r=ExcelXlsxFactory.worksheetImages.get(e);return r?.length&&t.children.push({name:"drawing",properties:{rawMap:{"r:id":`rId${++t.rIdCounter}`}}}),t},addVmlDrawingRel=e=>t=>(ExcelXlsxFactory.worksheetHeaderFooterImages.get(e)&&t.children.push({name:"legacyDrawingHF",properties:{rawMap:{"r:id":`rId${++t.rIdCounter}`}}}),t),addSheetPr=()=>e=>(e.children.push({name:"sheetPr",children:[{name:"outlinePr",properties:{rawMap:{summaryBelow:0}}}]}),e),addSheetFormatPr=e=>t=>{const r=e.reduce((a,o)=>o.outlineLevel&&o.outlineLevel>a?o.outlineLevel:a,0);return t.children.push({name:"sheetFormatPr",properties:{rawMap:{baseColWidth:10,defaultRowHeight:16,outlineLevelRow:r||void 0}}}),t},worksheetFactory={getTemplate(e){const{worksheet:t,currentSheet:r,config:a}=e,{margins:o={},pageSetup:s,headerFooterConfig:n,suppressColumnOutline:i}=a,{table:l}=t,{rows:c,columns:p}=l,m=p&&p.length?getMergedCellsAndAddColumnGroups(c,p,!!i):[],{worksheetDataTables:h}=ExcelXlsxFactory,u=h.get(r),d=import_core4._.compose(addSheetPr(),addSheetFormatPr(c),addColumns(p),addSheetData(c,r+1),addMergeCells(m),addPageMargins(o),addPageSetup(s),addHeaderFooter(n),addDrawingRel(r),addVmlDrawingRel(r),addExcelTableRel(u)),{children:g}=d({children:[],rIdCounter:0});return{name:"worksheet",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:g}}},worksheet_default=worksheetFactory,relationshipFactory={getTemplate(e){const{Id:t,Type:r,Target:a}=e;return{name:"Relationship",properties:{rawMap:{Id:t,Type:r,Target:a}}}}},relationship_default=relationshipFactory,relationshipsFactory={getTemplate(e){const t=e.map(r=>relationship_default.getTemplate(r));return{name:"Relationships",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}},children:t}}},relationships_default=relationshipsFactory,getShapeLayout=()=>({name:"o:shapelayout",properties:{prefixedAttributes:[{prefix:"v:",map:{ext:"edit"}}]},children:[{name:"o:idmap",properties:{prefixedAttributes:[{prefix:"v:",map:{ext:"edit"}}],rawMap:{data:"1"}}}]}),getStroke=()=>({name:"v:stroke",properties:{rawMap:{joinstyle:"miter"}}}),getFormulas=e=>({name:"v:formulas",children:e.map(t=>({name:"v:f",properties:{rawMap:{eqn:t}}}))}),getPath=()=>({name:"v:path",properties:{prefixedAttributes:[{prefix:"o:",map:{connecttype:"rect",extrusionok:"f"}}],rawMap:{gradientshapeok:"t"}}}),getLock=e=>{const{aspectratio:t,rotation:r}=e||{},a={};return t&&(a.aspectratio="t"),r&&(a.rotation="t"),{name:"o:lock",properties:{prefixedAttributes:[{prefix:"v:",map:{ext:"edit"}}],rawMap:a}}};function mapNumber(e,t,r,a,o){return(e-t)/(r-t)*(o-a)+a}var gainMap={0:"0",5:"6554f",10:"13107f",15:"19661f",20:"26214f",25:".5",30:"39322f",35:"45875f",40:"52429f",45:"58982f",50:"1",55:"72818f",60:"1.25",65:"93623f",70:"109227f",75:"2",80:"2.5",85:"3.4",90:"5",95:"10",96:"12.5",97:"1092267f",98:"25",99:"50",100:"2147483647f"},getImageData=(e,t)=>{var r;let a;const{recolor:o,brightness:s,contrast:n,id:i}=e;return o&&(a={},(o==="Washout"||o==="Grayscale")&&(a.gain="19661f",a.blacklevel="22938f"),(o==="Black & White"||o==="Grayscale")&&(a.grayscale="t",o==="Black & White"&&(a.bilevel="t"))),(!o||o==="Grayscale")&&(a||(a={}),n!=null&&n!==50&&(a.gain=(r=gainMap[n])!=null?r:"1"),s!=null&&s!==50&&(a.blacklevel=mapNumber(s,0,100,-.5,.5).toString())),{name:"v:imagedata",properties:{prefixedAttributes:[{prefix:"o:",map:{relid:`rId${t}`,title:i}}],rawMap:a}}},getShapeType=()=>{const e=["if lineDrawn pixelLineWidth 0","sum @0 1 0","sum 0 0 @1","prod @2 1 2","prod @3 21600 pixelWidth","prod @3 21600 pixelHeight","sum @0 0 1","prod @6 1 2","prod @7 21600 pixelWidth","sum @8 21600 0","prod @7 21600 pixelHeight","sum @10 21600 0"];return{name:"v:shapetype",properties:{prefixedAttributes:[{prefix:"o:",map:{spt:"75",preferrelative:"t"}}],rawMap:{coordsize:"21600,21600",filled:"f",id:"_x0000_t75",path:"m@4@5l@4@11@9@11@9@5xe",stroked:"f"}},children:[getStroke(),getFormulas(e),getPath(),getLock({aspectratio:!0})]}},pixelToPoint=e=>Math.floor((e??0)*.74999943307122),getShape=(e,t)=>{const{width:r=0,height:a=0,altText:o}=e,s=pixelToPoint(r),n=pixelToPoint(a);return{name:"v:shape",properties:{rawMap:{id:e.headerFooterPosition,"o:spid":"_x0000_s1025",style:`position: absolute; margin-left: 0; margin-top: 10in; margin-bottom: 0; margin-right: 0; width: ${s}pt; height: ${n}pt; z-index: ${t+1}`,type:"#_x0000_t75",alt:o}},children:[getImageData(e,t+1),getLock({rotation:!0})]}},vmlDrawingFactory={getTemplate(e){const t=ExcelXlsxFactory.worksheetHeaderFooterImages.get(e.sheetIndex)||[],r=[getShapeLayout(),getShapeType(),...t.map((a,o)=>getShape(a,o))];return{name:"xml",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{v:"urn:schemas-microsoft-com:vml",o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel"}}]},children:r}}},vmlDrawing_default=vmlDrawingFactory,_ExcelXlsxFactory=class S{static createExcel(t,r,a){this.addSheetName(r),registerStyles(t,this.sheetNames.length);let o=Object.assign({},a);return a.exportAsExcelTable&&(a.columnModel.isPivotActive()&&(this.showExcelTableNonCompatibleFeaturesWarning("pivot mode"),o.exportAsExcelTable=!1),a.gos.get("masterDetail")&&(this.showExcelTableNonCompatibleFeaturesWarning("master/detail"),o.exportAsExcelTable=!1)),this.processTableConfig(r,o),this.createWorksheet(r,o)}static showExcelTableNonCompatibleFeaturesWarning(t){console.warn(`AG Grid: Excel table export does not work with ${t}. The exported Excel file will not contain any Excel tables.
     2| Please turn off ${t} to enable Excel table exports.`)}static getTableNameFromIndex(t){return`table${t+1}`}static getSanitizedTableName(t){return t.replace(/^[^a-zA-Z_]+/,"_").replace(/\s/g,"_").replace(/[^a-zA-Z0-9_]/g,"_")}static addTableToSheet(t,r){if(this.worksheetDataTables.has(t)){console.warn("Unable to add data table to Excel sheet: A table already exists.");return}this.worksheetDataTables.set(t,r)}static processTableConfig(t,r){var a;if(!r.exportAsExcelTable)return;const o=typeof r.exportAsExcelTable=="boolean"?{}:r.exportAsExcelTable,{name:s,showColumnStripes:n,showRowStripes:i,showFilterButton:l,highlightFirstColumn:c,highlightLastColumn:p}=o,m=this.getSanitizedTableName(s||S.defaultTableDisplayName),h=this.sheetNames.length-1,{table:u}=t,{rows:d,columns:g}=u,v=r.columnModel.getHeaderRowCount(),f=v-1,y=d.length,w=g.length,x=[],b=[];for(let T=0;T<w;T++){const C=g[T];x.push(C.displayName||""),b.push(l==="match"||l===void 0?(a=C.filterAllowed)!=null?a:!1:l)}if(!x||!x.length||!y||!m){console.warn("Unable to add data table to Excel sheet: Missing required parameters.");return}this.addTableToSheet(h,{name:this.getTableNameFromIndex(h),displayName:m,columns:x,showFilterButtons:b,headerRowIndex:f,rowCount:y-v,showRowStripes:i??!0,showColumnStripes:n??!1,highlightFirstColumn:c??!1,highlightLastColumn:p??!1})}static addHeaderFooterImageToMap(t,r){const a=this.sheetNames.length-1,o=t;o.headerFooterPosition=r,this.buildImageMap({imageToAdd:o,idx:a});let s=this.worksheetHeaderFooterImages.get(a);s||(s=[],this.worksheetHeaderFooterImages.set(a,s)),s.find(n=>n.id===t.id)||s.push(t)}static addBodyImageToMap(t,r,a,o,s){let n=this.sheetNames.length;const{row:i,column:l}=t.position||{},c=t;o&&(r!=null&&a!=null&&(!i||!l)&&(t.position||(t.position={}),t.position=Object.assign({},t.position,{row:r,column:o.indexOf(a)+1})),setExcelImageTotalWidth(c,o),setExcelImageTotalHeight(c,s)),this.buildImageMap({imageToAdd:c,idx:n});let p=this.worksheetImageIds.get(n);p||(p=new Map,this.worksheetImageIds.set(n,p));const m=this.worksheetImages.get(n);m?m.push(c):this.worksheetImages.set(n,[c]),p.get(t.id)||p.set(t.id,{index:p.size,type:t.imageType})}static buildImageMap(t){const{imageToAdd:r,idx:a}=t,o=this.images.get(r.id);if(o){const s=o.find(n=>n.sheetId===a);s?s.image.push(r):o.push({sheetId:a,image:[r]})}else this.images.set(r.id,[{sheetId:a,image:[r]}]),this.workbookImageIds.set(r.id,{type:r.imageType,index:this.workbookImageIds.size})}static addSheetName(t){const r=import_core5._.escapeString(t.name)||"";let a="";for(;this.sheetNames.indexOf(`${r}${a}`)!==-1;)a===""?a="_1":a=`_${parseInt(a.slice(1),10)+1}`;t.name=`${r}${a}`,this.sheetNames.push(t.name)}static getStringPosition(t){return this.sharedStrings.has(t)?this.sharedStrings.get(t):(this.sharedStrings.set(t,this.sharedStrings.size),this.sharedStrings.size-1)}static resetFactory(){this.sharedStrings=new Map,this.images=new Map,this.worksheetImages=new Map,this.worksheetHeaderFooterImages=new Map,this.workbookImageIds=new Map,this.worksheetImageIds=new Map,this.worksheetDataTables=new Map,this.sheetNames=[],this.factoryMode=import_core5.ExcelFactoryMode.SINGLE_SHEET}static createWorkbook(){return createXmlPart(workbook_default.getTemplate(this.sheetNames))}static createStylesheet(t){return createXmlPart(stylesheet_default.getTemplate(t))}static createSharedStrings(){return createXmlPart(sharedStrings_default.getTemplate(this.sharedStrings))}static createCore(t){return createXmlPart(core_default.getTemplate(t))}static createContentTypes(t){return createXmlPart(contentTypes_default.getTemplate(t))}static createRels(){const t=relationships_default.getTemplate([{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Target:"xl/workbook.xml"},{Id:"rId2",Type:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",Target:"docProps/core.xml"}]);return createXmlPart(t)}static createTheme(){return createXmlPart(office_default.getTemplate())}static createTable(t,r){return createXmlPart(table_default.getTemplate(t,r))}static createWorkbookRels(t){const r=new Array(t).fill(void 0).map((o,s)=>({Id:`rId${s+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",Target:`worksheets/sheet${s+1}.xml`})),a=relationships_default.getTemplate([...r,{Id:`rId${t+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Target:"theme/theme1.xml"},{Id:`rId${t+2}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Target:"styles.xml"},{Id:`rId${t+3}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Target:"sharedStrings.xml"}]);return createXmlPart(a)}static createDrawing(t){return createXmlPart(drawing_default.getTemplate({sheetIndex:t}))}static createDrawingRel(t){const r=this.worksheetImageIds.get(t)||[],a=[];for(const[o,s]of r)a.push({Id:`rId${s.index+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:`../media/image${this.workbookImageIds.get(o).index+1}.${s.type}`});return createXmlPart(relationships_default.getTemplate(a))}static createVmlDrawing(t){return createXmlPart(vmlDrawing_default.getTemplate({sheetIndex:t}),!0)}static createVmlDrawingRel(t){const r=this.worksheetHeaderFooterImages.get(t)||[],a=[];for(let o=0;o<r.length;o++){const s=r[o],n=this.workbookImageIds.get(s.id);if(!n)continue;const{index:i,type:l}=n,c=l==="jpg"?"jpeg":l;a.push({Id:`rId${o+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:`../media/image${i+1}.${c}`})}return createXmlPart(relationships_default.getTemplate(a))}static createRelationships({drawingIndex:t,vmlDrawingIndex:r,tableIndex:a}={}){if(t===void 0&&r===void 0&&a===void 0)return"";const o=[];t!=null&&o.push({Id:`rId${o.length+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:`../drawings/drawing${t+1}.xml`}),r!=null&&o.push({Id:`rId${o.length+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",Target:`../drawings/vmlDrawing${r+1}.vml`}),a!=null&&o.push({Id:`rId${o.length+1}`,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/table",Target:`../tables/${this.getTableNameFromIndex(a)}.xml`});const s=relationships_default.getTemplate(o);return createXmlPart(s)}static createWorksheet(t,r){return createXmlPart(worksheet_default.getTemplate({worksheet:t,currentSheet:this.sheetNames.length-1,config:r}))}};_ExcelXlsxFactory.sharedStrings=new Map,_ExcelXlsxFactory.sheetNames=[],_ExcelXlsxFactory.images=new Map,_ExcelXlsxFactory.worksheetImages=new Map,_ExcelXlsxFactory.worksheetHeaderFooterImages=new Map,_ExcelXlsxFactory.workbookImageIds=new Map,_ExcelXlsxFactory.worksheetImageIds=new Map,_ExcelXlsxFactory.worksheetDataTables=new Map,_ExcelXlsxFactory.defaultTableDisplayName="AG-GRID-TABLE",_ExcelXlsxFactory.factoryMode=import_core5.ExcelFactoryMode.SINGLE_SHEET;var ExcelXlsxFactory=_ExcelXlsxFactory,import_csv_export3=require("@ag-grid-community/csv-export"),import_core7=require("@ag-grid-community/core"),import_csv_export2=require("@ag-grid-community/csv-export"),ExcelSerializingSession=class extends import_csv_export2.BaseGridSerializingSession{constructor(e){super(e),this.mixedStyles={},this.mixedStyleCounter=0,this.rows=[],this.config=Object.assign({},e),this.stylesByIds={},this.config.baseExcelStyles.forEach(t=>{this.stylesByIds[t.id]=t}),this.excelStyles=[...this.config.baseExcelStyles,{id:"_quotePrefix",quotePrefix:1}]}addCustomContent(e){e.forEach(t=>{const r=this.rows.length+1;let a;!this.config.suppressRowOutline&&t.outlineLevel!=null&&(a=t.outlineLevel);const o={height:getHeightFromProperty(r,t.height||this.config.rowHeight),cells:(t.cells||[]).map((s,n)=>{var i,l,c;const p=this.addImage(r,this.columnsToExport[n],(i=s.data)==null?void 0:i.value);let m=null;s.styleId&&(m=typeof s.styleId=="string"?[s.styleId]:s.styleId);const h=this.getStyleId(m);if(p)return this.createCell(h,this.getDataTypeForValue(p.value),p.value==null?"":p.value);const u=(c=(l=s.data)==null?void 0:l.value)!=null?c:"",d=this.getDataTypeForValue(u);return s.mergeAcross?this.createMergedCell(h,d,u,s.mergeAcross):this.createCell(h,d,u)}),outlineLevel:a};t.collapsed!=null&&(o.collapsed=t.collapsed),t.hidden!=null&&(o.hidden=t.hidden),this.rows.push(o)})}onNewHeaderGroupingRow(){const e=[];return this.rows.push({cells:e,height:getHeightFromProperty(this.rows.length+1,this.config.headerRowHeight)}),{onColumn:(t,r,a,o,s)=>{const n=this.config.styleLinker({rowType:import_csv_export2.RowType.HEADER_GROUPING,rowIndex:1,value:`grouping-${r}`,columnGroup:t});e.push(__spreadProps(__spreadValues({},this.createMergedCell(this.getStyleId(n),this.getDataTypeForValue("string"),r,o)),{collapsibleRanges:s}))}}}onNewHeaderRow(){return this.onNewRow(this.onNewHeaderColumn,this.config.headerRowHeight)}onNewBodyRow(e){const t=this.onNewRow(this.onNewBodyColumn,this.config.rowHeight);return e&&this.addRowOutlineIfNecessary(e),t}prepare(e){super.prepare(e),this.columnsToExport=[...e],this.cols=e.map((t,r)=>this.convertColumnToExcel(t,r))}parse(){const e=this.rows.reduce((r,a)=>Math.max(r,a.cells.length),0);for(;this.cols.length<e;)this.cols.push(this.convertColumnToExcel(null,this.cols.length+1));const t={name:this.config.sheetName,table:{columns:this.cols,rows:this.rows}};return this.createExcel(t)}addRowOutlineIfNecessary(e){const{gos:t,suppressRowOutline:r,rowGroupExpandState:a="expanded"}=this.config;if(t.get("groupHideOpenParents")||r||e.level==null)return;const s=e.footer?1:0,n=import_core7._.last(this.rows);if(n.outlineLevel=e.level+s,a==="expanded")return;const i=a==="collapsed";if(e.isExpandable()){const l=!i&&e.expanded;n.collapsed=!l}n.hidden=!!e.parent&&e.parent.level!==-1&&(i||this.isAnyParentCollapsed(e.parent))}isAnyParentCollapsed(e){for(;e&&e.level!==-1;){if(!e.expanded)return!0;e=e.parent}return!1}convertColumnToExcel(e,t){const r=this.config.columnWidth,a=e?this.extractHeaderValue(e):void 0,o=a??"",s=e?e.isFilterAllowed():!1;return r?typeof r=="number"?{width:r,displayName:o,filterAllowed:s}:{width:r({column:e,index:t}),displayName:o,filterAllowed:s}:e?{width:Math.max(e.getActualWidth(),75),displayName:o,filterAllowed:s}:{displayName:o,filterAllowed:s}}onNewHeaderColumn(e,t){return r=>{const a=this.extractHeaderValue(r),o=this.config.styleLinker({rowType:import_csv_export2.RowType.HEADER,rowIndex:e,value:a,column:r});t.push(this.createCell(this.getStyleId(o),this.getDataTypeForValue("string"),a))}}onNewBodyColumn(e,t){let r=0;return(a,o,s)=>{if(r>0){r-=1;return}const{value:n,valueFormatted:i}=this.extractRowCellValue(a,o,e,"excel",s),l=this.config.styleLinker({rowType:import_csv_export2.RowType.BODY,rowIndex:e,value:n,column:a,node:s}),c=this.getStyleId(l),p=a.getColSpan(s),m=this.addImage(e,a,n);m?t.push(this.createCell(c,this.getDataTypeForValue(m.value),m.value==null?"":m.value)):p>1?(r=p-1,t.push(this.createMergedCell(c,this.getDataTypeForValue(n),n,p-1))):t.push(this.createCell(c,this.getDataTypeForValue(n),n,i))}}onNewRow(e,t){const r=[];return this.rows.push({cells:r,height:getHeightFromProperty(this.rows.length+1,t)}),{onColumn:e.bind(this,this.rows.length,r)()}}createExcel(e){const{excelStyles:t,config:r}=this;return ExcelXlsxFactory.createExcel(t,e,r)}getDataTypeForValue(e){return e===void 0?"empty":this.isNumerical(e)?"n":"s"}getTypeFromStyle(e,t){if(this.isFormula(t))return"f";if(e&&e.dataType)switch(e.dataType.toLocaleLowerCase()){case"formula":return"f";case"string":return"s";case"number":return"n";case"datetime":return"d";case"error":return"e";case"boolean":return"b";default:console.warn(`AG Grid: Unrecognized data type for excel export [${e.id}.dataType=${e.dataType}]`)}return null}addImage(e,t,r){if(!this.config.addImageToCell)return;const a=this.config.addImageToCell(e,t,r);if(a)return ExcelXlsxFactory.addBodyImageToMap(a.image,e,t,this.columnsToExport,this.config.rowHeight),a}createCell(e,t,r,a){const o=this.getStyleById(e);!o?.dataType&&t==="s"&&a&&(r=a);const s=this.getTypeFromStyle(o,r)||t,{value:n,escaped:i}=this.getCellValue(s,r),l=[];return o&&l.push(e),i&&l.push("_quotePrefix"),e=this.getStyleId(l)||void 0,{styleId:e,data:{type:s,value:n}}}createMergedCell(e,t,r,a){const o=r??"";return{styleId:this.getStyleById(e)?e:void 0,data:{type:t,value:t==="s"?ExcelXlsxFactory.getStringPosition(o).toString():r},mergeAcross:a}}getCellValue(e,t){let r=!1;if(t==null&&(e="s",t=""),e==="s")t&&t[0]==="'"&&(r=!0,t=t.slice(1)),t=ExcelXlsxFactory.getStringPosition(t).toString();else if(e==="f")t=t.slice(1);else if(e==="n"){const a=Number(t);isNaN(a)?t="":t!==""&&(t=a.toString())}return{value:t,escaped:r}}getStyleId(e){if(!e||!e.length)return null;if(e.length===1)return e[0];const t=e.join("-");return this.mixedStyles[t]||this.addNewMixedStyle(e),this.mixedStyles[t].excelID}deepCloneObject(e){return JSON.parse(JSON.stringify(e))}addNewMixedStyle(e){this.mixedStyleCounter+=1;const t=`mixedStyle${this.mixedStyleCounter}`,r={};for(const o of e)for(const s of this.excelStyles)s.id===o&&import_core7._.mergeDeep(r,this.deepCloneObject(s));r.id=t,r.name=t;const a=e.join("-");this.mixedStyles[a]={excelID:t,key:a,result:r},this.excelStyles.push(r),this.stylesByIds[t]=r}isFormula(e){return e==null?!1:this.config.autoConvertFormulas&&e.toString().startsWith("=")}isNumerical(e){return typeof e=="bigint"?!0:isFinite(e)&&e!==""&&!isNaN(parseFloat(e))}getStyleById(e){return e==null?null:this.stylesByIds[e]||null}},createExcelXMLCoreFolderStructure=()=>{import_csv_export3.ZipContainer.addFolders(["_rels/","docProps/","xl/","xl/theme/","xl/_rels/","xl/worksheets/"]);const{images:e}=ExcelXlsxFactory;if(!e.size)return;import_csv_export3.ZipContainer.addFolders(["xl/worksheets/_rels","xl/drawings/","xl/drawings/_rels","xl/media/"]);let t=0;e.forEach(r=>{const a=r[0].image[0],{base64:o,imageType:s}=a,n=s==="jpg"?"jpeg":s;import_csv_export3.ZipContainer.addFile(`xl/media/image${++t}.${n}`,o,!0)})},createExcelXmlWorksheets=e=>{let t=0,r=0,a=0;const{images:o,worksheetDataTables:s,worksheetImages:n,worksheetHeaderFooterImages:i}=ExcelXlsxFactory;for(let l=0;l<e.length;l++){const c=e[l];import_csv_export3.ZipContainer.addFile(`xl/worksheets/sheet${l+1}.xml`,c,!1);const p=o.size>0&&n.has(l),m=s.size>0&&s.has(l),h=o.size&&i.has(l);if(!p&&!m&&!h)continue;let u,d,g;p&&(createExcelXmlDrawings(l,t),d=t,t++),h&&(createExcelVmlDrawings(l,r),g=r,r++),m&&(u=a++);const v=`xl/worksheets/_rels/sheet${l+1}.xml.rels`;import_csv_export3.ZipContainer.addFile(v,ExcelXlsxFactory.createRelationships({tableIndex:u,drawingIndex:d,vmlDrawingIndex:g}))}},createExcelXmlDrawings=(e,t)=>{const r="xl/drawings",a=`${r}/drawing${t+1}.xml`,o=`${r}/_rels/drawing${t+1}.xml.rels`;import_csv_export3.ZipContainer.addFile(o,ExcelXlsxFactory.createDrawingRel(e)),import_csv_export3.ZipContainer.addFile(a,ExcelXlsxFactory.createDrawing(e))},createExcelVmlDrawings=(e,t)=>{const r="xl/drawings",a=`${r}/vmlDrawing${t+1}.vml`,o=`${r}/_rels/vmlDrawing${t+1}.vml.rels`;import_csv_export3.ZipContainer.addFile(a,ExcelXlsxFactory.createVmlDrawing(e)),import_csv_export3.ZipContainer.addFile(o,ExcelXlsxFactory.createVmlDrawingRel(e))},createExcelXmlTables=()=>{const{worksheetDataTables:e}=ExcelXlsxFactory,t=e,r=Array.from(t.keys());for(let a=0;a<r.length;a++){const o=r[a],s=t.get(o);s&&import_csv_export3.ZipContainer.addFile(`xl/tables/${s.name}.xml`,ExcelXlsxFactory.createTable(s,a))}},createExcelXmlCoreSheets=(e,t,r)=>{import_csv_export3.ZipContainer.addFile("xl/workbook.xml",ExcelXlsxFactory.createWorkbook()),import_csv_export3.ZipContainer.addFile("xl/styles.xml",ExcelXlsxFactory.createStylesheet(e)),import_csv_export3.ZipContainer.addFile("xl/sharedStrings.xml",ExcelXlsxFactory.createSharedStrings()),import_csv_export3.ZipContainer.addFile("xl/theme/theme1.xml",ExcelXlsxFactory.createTheme()),import_csv_export3.ZipContainer.addFile("xl/_rels/workbook.xml.rels",ExcelXlsxFactory.createWorkbookRels(r)),import_csv_export3.ZipContainer.addFile("docProps/core.xml",ExcelXlsxFactory.createCore(t)),import_csv_export3.ZipContainer.addFile("[Content_Types].xml",ExcelXlsxFactory.createContentTypes(r)),import_csv_export3.ZipContainer.addFile("_rels/.rels",ExcelXlsxFactory.createRels())},createExcelFileForExcel=(e,t={})=>{if(!e||e.length===0)return console.warn("AG Grid: Invalid params supplied to createExcelFileForExcel() - `ExcelExportParams.data` is empty."),ExcelXlsxFactory.resetFactory(),!1;const{fontSize:r=11,author:a="AG Grid"}=t;return createExcelXMLCoreFolderStructure(),createExcelXmlTables(),createExcelXmlWorksheets(e),createExcelXmlCoreSheets(r,a,e.length),ExcelXlsxFactory.resetFactory(),!0},getMultipleSheetsAsExcelCompressed=e=>{const{data:t,fontSize:r,author:a}=e,o=e.mimeType||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";return createExcelFileForExcel(t,{author:a,fontSize:r})?import_csv_export3.ZipContainer.getZipFile(o):Promise.resolve(void 0)},getMultipleSheetsAsExcel=e=>{const{data:t,fontSize:r,author:a}=e,o=e.mimeType||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";if(createExcelFileForExcel(t,{author:a,fontSize:r}))return import_csv_export3.ZipContainer.getUncompressedZipFile(o)},exportMultipleSheetsAsExcel=e=>{const{fileName:t="export.xlsx"}=e;getMultipleSheetsAsExcelCompressed(e).then(r=>{if(r){const a=typeof t=="function"?t():t;import_csv_export3.Downloader.download(a,r)}})},ExcelCreator=class extends import_csv_export3.BaseCreator{postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gos:this.gos})}getMergedParams(e){const t=this.gos.get("defaultExcelExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed()){console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration.");return}const t=this.getMergedParams(e),a={data:[this.getData(t)],fontSize:t.fontSize,author:t.author,mimeType:t.mimeType};this.packageCompressedFile(a).then(o=>{if(o){const{fileName:s}=t,n=typeof s=="function"?s(this.gos.getGridCommonParams()):s;import_csv_export3.Downloader.download(this.getFileName(n),o)}})}exportDataAsExcel(e){this.export(e)}getDataAsExcel(e){const t=this.getMergedParams(e),a={data:[this.getData(t)],fontSize:t.fontSize,author:t.author,mimeType:t.mimeType};return this.packageFile(a)}setFactoryMode(e){ExcelXlsxFactory.factoryMode=e}getFactoryMode(){return ExcelXlsxFactory.factoryMode}getSheetDataForExcel(e){const t=this.getMergedParams(e);return this.getData(t)}getMultipleSheetsAsExcel(e){return getMultipleSheetsAsExcel(e)}exportMultipleSheetsAsExcel(e){exportMultipleSheetsAsExcel(e)}getDefaultFileExtension(){return"xlsx"}createSerializingSession(e){const{columnModel:t,valueService:r,gos:a}=this;let o;if(e.sheetName!=null){const{sheetName:n}=e,i=typeof n=="function"?n(this.gos.getGridCommonParams()):n;o=String(i).substring(0,31)}else o="ag-grid";const s=__spreadProps(__spreadValues({},e),{sheetName:o,columnModel:t,valueService:r,gos:a,suppressRowOutline:e.suppressRowOutline||e.skipRowGroups,headerRowHeight:e.headerRowHeight||e.rowHeight,baseExcelStyles:this.gos.get("excelStyles")||[],styleLinker:this.styleLinker.bind(this)});return new ExcelSerializingSession(s)}styleLinker(e){const{rowType:t,rowIndex:r,value:a,column:o,columnGroup:s,node:n}=e,i=t===import_csv_export3.RowType.HEADER,l=t===import_csv_export3.RowType.HEADER_GROUPING,c=i?o:s;let p=[];if(i||l)return p.push("header"),l&&p.push("headerGroup"),c&&(p=p.concat(import_core8.CssClassApplier.getHeaderClassesFromColDef(c.getDefinition(),this.gos,o||null,s||null))),p;const m=this.gos.get("excelStyles"),h=["cell"];if(!m||!m.length)return h;const u=m.map(d=>d.id);return this.stylingService.processAllCellClasses(o.getDefinition(),this.gos.addGridCommonParams({value:a,data:n.data,node:n,colDef:o.getDefinition(),column:o,rowIndex:r}),d=>{u.indexOf(d)>-1&&h.push(d)}),h.sort((d,g)=>u.indexOf(d)<u.indexOf(g)?-1:1)}isExportSuppressed(){return this.gos.get("suppressExcelExport")}packageCompressedFile(e){return getMultipleSheetsAsExcelCompressed(e)}packageFile(e){return getMultipleSheetsAsExcel(e)}};__decorateClass([(0,import_core8.Autowired)("columnModel")],ExcelCreator.prototype,"columnModel",2),__decorateClass([(0,import_core8.Autowired)("valueService")],ExcelCreator.prototype,"valueService",2),__decorateClass([(0,import_core8.Autowired)("stylingService")],ExcelCreator.prototype,"stylingService",2),__decorateClass([(0,import_core8.Autowired)("gridSerializer")],ExcelCreator.prototype,"gridSerializer",2),__decorateClass([(0,import_core8.Autowired)("gridOptionsService")],ExcelCreator.prototype,"gos",2),__decorateClass([import_core8.PostConstruct],ExcelCreator.prototype,"postConstruct",1),ExcelCreator=__decorateClass([(0,import_core8.Bean)("excelCreator")],ExcelCreator);var import_csv_export4=require("@ag-grid-community/csv-export"),import_csv_export5=require("@ag-grid-community/csv-export"),VERSION="31.3.4",ExcelExportModule={version:VERSION,moduleName:import_core9.ModuleNames.ExcelExportModule,beans:[ExcelCreator,import_csv_export4.GridSerializer,import_csv_export4.CsvCreator],dependantModules:[import_csv_export5.CsvExportModule,import_core10.EnterpriseCoreModule]};


# ====================================================================
# FILE: enterprise-modules/excel-export/dist/types/src/version.d.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export declare const VERSION = "31.3.4";


# ====================================================================
# FILE: enterprise-modules/excel-export/src/version.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export const VERSION = '31.3.4';


# ====================================================================
# FILE: enterprise-modules/filter-tool-panel/dist/package/main.cjs.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 962-998 ---
   962|   getState() {
   963|     return this.filtersToolPanelListPanel.getExpandedFiltersAndGroups();
   964|   }
   965|   destroy() {
   966|     super.destroy();
   967|   }
   968| };
   969| _FiltersToolPanel.TEMPLATE = /* html */
   970| `<div class="ag-filter-toolpanel">
   971|             <ag-filters-tool-panel-header ref="filtersToolPanelHeaderPanel"></ag-filters-tool-panel-header>
   972|             <ag-filters-tool-panel-list ref="filtersToolPanelListPanel"></ag-filters-tool-panel-list>
   973|          </div>`;
   974| __decorateClass([
   975|   (0, import_core5.RefSelector)("filtersToolPanelHeaderPanel")
   976| ], _FiltersToolPanel.prototype, "filtersToolPanelHeaderPanel", 2);
   977| __decorateClass([
   978|   (0, import_core5.RefSelector)("filtersToolPanelListPanel")
   979| ], _FiltersToolPanel.prototype, "filtersToolPanelListPanel", 2);
   980| var FiltersToolPanel = _FiltersToolPanel;
   981| var import_side_bar = require("@ag-grid-enterprise/side-bar");
   982| var VERSION = "31.3.4";
   983| var FiltersToolPanelModule = {
   984|   version: VERSION,
   985|   moduleName: import_core6.ModuleNames.FiltersToolPanelModule,
   986|   beans: [],
   987|   agStackComponents: [
   988|     { componentName: "AgFiltersToolPanelHeader", componentClass: FiltersToolPanelHeaderPanel },
   989|     { componentName: "AgFiltersToolPanelList", componentClass: FiltersToolPanelListPanel }
   990|   ],
   991|   userComponents: [
   992|     { componentName: "agFiltersToolPanel", componentClass: FiltersToolPanel }
   993|   ],
   994|   dependantModules: [
   995|     import_side_bar.SideBarModule,
   996|     import_core7.EnterpriseCoreModule
   997|   ]
   998| };


# ====================================================================
# FILE: enterprise-modules/filter-tool-panel/dist/package/main.cjs.min.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-17 ---
     1| var __defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(l,e,t)=>e in l?__defProp(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,__spreadValues=(l,e)=>{for(var t in e||(e={}))__hasOwnProp.call(e,t)&&__defNormalProp(l,t,e[t]);if(__getOwnPropSymbols)for(var t of __getOwnPropSymbols(e))__propIsEnum.call(e,t)&&__defNormalProp(l,t,e[t]);return l},__export=(l,e)=>{for(var t in e)__defProp(l,t,{get:e[t],enumerable:!0})},__copyProps=(l,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of __getOwnPropNames(e))!__hasOwnProp.call(l,i)&&i!==t&&__defProp(l,i,{get:()=>e[i],enumerable:!(s=__getOwnPropDesc(e,i))||s.enumerable});return l},__toCommonJS=l=>__copyProps(__defProp({},"__esModule",{value:!0}),l),__decorateClass=(l,e,t,s)=>{for(var i=s>1?void 0:s?__getOwnPropDesc(e,t):e,r=l.length-1,o;r>=0;r--)(o=l[r])&&(i=(s?o(e,t,i):o(i))||i);return s&&i&&__defProp(e,t,i),i},main_exports={};__export(main_exports,{FiltersToolPanelModule:()=>FiltersToolPanelModule}),module.exports=__toCommonJS(main_exports);var import_core6=require("@ag-grid-community/core"),import_core7=require("@ag-grid-enterprise/core"),import_core=require("@ag-grid-community/core"),FiltersToolPanelHeaderPanel=class extends import_core.Component{preConstruct(){this.setTemplate(`<div class="ag-filter-toolpanel-search" role="presentation">
     2|                 <div ref="eExpand" class="ag-filter-toolpanel-expand"></div>
     3|                 <ag-input-text-field ref="eFilterTextField" class="ag-filter-toolpanel-search-input"></ag-input-text-field>
     4|             </div>`)}postConstruct(){const l=this.localeService.getLocaleTextFunc();this.eFilterTextField.setAutoComplete(!1).setInputAriaLabel(l("ariaFilterColumnsInput","Filter Columns Input")).onValueChange(this.onSearchTextChanged.bind(this)),this.createExpandIcons(),this.setExpandState(0),this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eventService,import_core.Events.EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this))}init(l){this.params=l,this.columnModel.isReady()&&this.showOrHideOptions()}createExpandIcons(){this.eExpand.appendChild(this.eExpandChecked=import_core._.createIconNoSpan("columnSelectOpen",this.gos)),this.eExpand.appendChild(this.eExpandUnchecked=import_core._.createIconNoSpan("columnSelectClosed",this.gos)),this.eExpand.appendChild(this.eExpandIndeterminate=import_core._.createIconNoSpan("columnSelectIndeterminate",this.gos))}showOrHideOptions(){const l=!this.params.suppressFilterSearch,e=!this.params.suppressExpandAll,t=this.localeService.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(t("searchOoo","Search..."));const s=r=>r.getOriginalParent()&&r.isFilterAllowed(),i=this.columnModel.getAllGridColumns().some(s);import_core._.setDisplayed(this.eFilterTextField.getGui(),l),import_core._.setDisplayed(this.eExpand,e&&i)}onSearchTextChanged(){this.onSearchTextChangedDebounced||(this.onSearchTextChangedDebounced=import_core._.debounce(()=>{this.dispatchEvent({type:"searchChanged",searchText:this.eFilterTextField.getValue()})},300)),this.onSearchTextChangedDebounced()}onExpandClicked(){const l=this.currentExpandState===0?{type:"collapseAll"}:{type:"expandAll"};this.dispatchEvent(l)}setExpandState(l){this.currentExpandState=l,import_core._.setDisplayed(this.eExpandChecked,this.currentExpandState===0),import_core._.setDisplayed(this.eExpandUnchecked,this.currentExpandState===1),import_core._.setDisplayed(this.eExpandIndeterminate,this.currentExpandState===2)}};__decorateClass([(0,import_core.Autowired)("columnModel")],FiltersToolPanelHeaderPanel.prototype,"columnModel",2),__decorateClass([(0,import_core.RefSelector)("eExpand")],FiltersToolPanelHeaderPanel.prototype,"eExpand",2),__decorateClass([(0,import_core.RefSelector)("eFilterTextField")],FiltersToolPanelHeaderPanel.prototype,"eFilterTextField",2),__decorateClass([import_core.PreConstruct],FiltersToolPanelHeaderPanel.prototype,"preConstruct",1),__decorateClass([import_core.PostConstruct],FiltersToolPanelHeaderPanel.prototype,"postConstruct",1);var import_core4=require("@ag-grid-community/core"),import_core2=require("@ag-grid-community/core"),_ToolPanelFilterComp=class m extends import_core2.Component{constructor(e,t){super(m.TEMPLATE),this.expandedCallback=t,this.expanded=!1,this.hideHeader=e}postConstruct(){this.eExpandChecked=import_core2._.createIconNoSpan("columnSelectOpen",this.gos),this.eExpandUnchecked=import_core2._.createIconNoSpan("columnSelectClosed",this.gos),this.eExpand.appendChild(this.eExpandChecked),this.eExpand.appendChild(this.eExpandUnchecked)}setColumn(e){this.column=e,this.eFilterName.innerText=this.columnModel.getDisplayNameForColumn(this.column,"filterToolPanel",!1)||"",this.addManagedListener(this.eFilterToolPanelHeader,"click",this.toggleExpanded.bind(this)),this.addManagedListener(this.eFilterToolPanelHeader,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(this.eventService,import_core2.Events.EVENT_FILTER_OPENED,this.onFilterOpened.bind(this)),this.addInIcon("filter",this.eFilterIcon,this.column),import_core2._.setDisplayed(this.eFilterIcon,this.isFilterActive(),{skipAriaHidden:!0}),import_core2._.setDisplayed(this.eExpandChecked,!1),this.hideHeader?(import_core2._.setDisplayed(this.eFilterToolPanelHeader,!1),this.eFilterToolPanelHeader.removeAttribute("tabindex")):this.eFilterToolPanelHeader.setAttribute("tabindex","0"),this.addManagedListener(this.column,import_core2.Column.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this))}onKeyDown(e){const{key:t}=e,{ENTER:s,SPACE:i,LEFT:r,RIGHT:o}=import_core2.KeyCode;t!==s&&t!==i&&t!==r&&t!==o||(e.preventDefault(),t===s||t===i?this.toggleExpanded():t===import_core2.KeyCode.LEFT?this.collapse():this.expand())}getColumn(){return this.column}getColumnFilterName(){return this.columnModel.getDisplayNameForColumn(this.column,"filterToolPanel",!1)}addCssClassToTitleBar(e){this.eFilterToolPanelHeader.classList.add(e)}addInIcon(e,t,s){if(t==null)return;const i=import_core2._.createIconNoSpan(e,this.gos,s);t.appendChild(i)}isFilterActive(){return this.filterManager.isFilterActive(this.column)}onFilterChanged(){import_core2._.setDisplayed(this.eFilterIcon,this.isFilterActive(),{skipAriaHidden:!0}),this.dispatchEvent({type:import_core2.Column.EVENT_FILTER_CHANGED})}toggleExpanded(){this.expanded?this.collapse():this.expand()}expand(){this.expanded||(this.expanded=!0,import_core2._.setAriaExpanded(this.eFilterToolPanelHeader,!0),import_core2._.setDisplayed(this.eExpandChecked,!0),import_core2._.setDisplayed(this.eExpandUnchecked,!1),this.addFilterElement(),this.expandedCallback())}addFilterElement(e){var t;const s=import_core2._.loadTemplate('<div class="ag-filter-toolpanel-instance-filter"></div>'),i=this.createManagedBean(new import_core2.FilterWrapperComp(this.column,"TOOLBAR"));this.filterWrapperComp=i,i.hasFilter()&&((t=i.getFilter())==null||t.then(r=>{this.underlyingFilter=r,r&&(s.appendChild(i.getGui()),this.agFilterToolPanelBody.appendChild(s),i.afterGuiAttached({container:"toolPanel",suppressFocus:e}))}))}collapse(){var e;this.expanded&&(this.expanded=!1,import_core2._.setAriaExpanded(this.eFilterToolPanelHeader,!1),this.removeFilterElement(),import_core2._.setDisplayed(this.eExpandChecked,!1),import_core2._.setDisplayed(this.eExpandUnchecked,!0),(e=this.filterWrapperComp)==null||e.afterGuiDetached(),this.destroyBean(this.filterWrapperComp),this.expandedCallback())}removeFilterElement(){import_core2._.clearElement(this.agFilterToolPanelBody)}isExpanded(){return this.expanded}refreshFilter(e){var t;if(!this.expanded)return;const s=this.underlyingFilter;s&&(e?typeof s.refreshVirtualList=="function"&&s.refreshVirtualList():(t=s.afterGuiDetached)==null||t.call(s))}onFilterOpened(e){e.source==="COLUMN_MENU"&&e.column===this.column&&this.expanded&&this.collapse()}};_ToolPanelFilterComp.TEMPLATE=`
     5|         <div class="ag-filter-toolpanel-instance">
     6|             <div class="ag-filter-toolpanel-header ag-filter-toolpanel-instance-header" ref="eFilterToolPanelHeader" role="button" aria-expanded="false">
     7|                 <div ref="eExpand" class="ag-filter-toolpanel-expand"></div>
     8|                 <span ref="eFilterName" class="ag-header-cell-text"></span>
     9|                 <span ref="eFilterIcon" class="ag-header-icon ag-filter-icon ag-filter-toolpanel-instance-header-icon" aria-hidden="true"></span>
    10|             </div>
    11|             <div class="ag-filter-toolpanel-instance-body ag-filter" ref="agFilterToolPanelBody"></div>
    12|         </div>`,__decorateClass([(0,import_core2.RefSelector)("eFilterToolPanelHeader")],_ToolPanelFilterComp.prototype,"eFilterToolPanelHeader",2),__decorateClass([(0,import_core2.RefSelector)("eFilterName")],_ToolPanelFilterComp.prototype,"eFilterName",2),__decorateClass([(0,import_core2.RefSelector)("agFilterToolPanelBody")],_ToolPanelFilterComp.prototype,"agFilterToolPanelBody",2),__decorateClass([(0,import_core2.RefSelector)("eFilterIcon")],_ToolPanelFilterComp.prototype,"eFilterIcon",2),__decorateClass([(0,import_core2.RefSelector)("eExpand")],_ToolPanelFilterComp.prototype,"eExpand",2),__decorateClass([(0,import_core2.Autowired)("filterManager")],_ToolPanelFilterComp.prototype,"filterManager",2),__decorateClass([(0,import_core2.Autowired)("columnModel")],_ToolPanelFilterComp.prototype,"columnModel",2),__decorateClass([import_core2.PostConstruct],_ToolPanelFilterComp.prototype,"postConstruct",1);var ToolPanelFilterComp=_ToolPanelFilterComp,import_core3=require("@ag-grid-community/core"),_ToolPanelFilterGroupComp=class c extends import_core3.Component{constructor(e,t,s,i,r){super(),this.columnGroup=e,this.childFilterComps=t,this.depth=i,this.expandedCallback=s,this.showingColumn=r}preConstruct(){const e={cssIdentifier:"filter-toolpanel",direction:"vertical"};this.setTemplate(c.TEMPLATE,{filterGroupComp:e})}init(){this.setGroupTitle(),this.filterGroupComp.setAlignItems("stretch"),this.filterGroupComp.addCssClass(`ag-filter-toolpanel-group-level-${this.depth}`),this.filterGroupComp.addCssClassToTitleBar(`ag-filter-toolpanel-group-level-${this.depth}-header`),this.childFilterComps.forEach(e=>{this.filterGroupComp.addItem(e),e.addCssClassToTitleBar(`ag-filter-toolpanel-group-level-${this.depth+1}-header`)}),this.refreshFilterClass(),this.addExpandCollapseListeners(),this.addFilterChangedListeners(),this.setupTooltip(),this.addInIcon("filter")}setupTooltip(){if(!this.showingColumn)return;const e=this.gos.get("tooltipShowMode")==="whenTruncated";let t;e&&(t=()=>{const r=this.filterGroupComp.getGui().querySelector(".ag-group-title");return r?r.scrollWidth>r.clientWidth:!0});const s=()=>{const i=this.columnGroup.getColDef().headerTooltip;this.setTooltip({newTooltipText:i,location:"filterToolPanelColumnGroup",shouldDisplayTooltip:t})};s(),this.addManagedListener(this.eventService,import_core3.Events.EVENT_NEW_COLUMNS_LOADED,s)}getTooltipParams(){const e=super.getTooltipParams();return e.location="filterToolPanelColumnGroup",e}addCssClassToTitleBar(e){this.filterGroupComp.addCssClassToTitleBar(e)}refreshFilters(e){this.childFilterComps.forEach(t=>{t instanceof c?t.refreshFilters(e):t.refreshFilter(e)})}isColumnGroup(){return this.columnGroup instanceof import_core3.ProvidedColumnGroup}isExpanded(){return this.filterGroupComp.isExpanded()}getChildren(){return this.childFilterComps}getFilterGroupName(){return this.filterGroupName?this.filterGroupName:""}getFilterGroupId(){return this.columnGroup.getId()}hideGroupItem(e,t){this.filterGroupComp.hideItem(e,t)}hideGroup(e){this.setDisplayed(!e)}addInIcon(e){const t=import_core3._.createIconNoSpan(e,this.gos);t&&t.classList.add("ag-filter-toolpanel-group-instance-header-icon"),this.filterGroupComp.addTitleBarWidget(t)}forEachToolPanelFilterChild(e){this.childFilterComps.forEach(t=>{t instanceof ToolPanelFilterComp&&e(t)})}addExpandCollapseListeners(){const e=this.isColumnGroup()?()=>this.expandedCallback():()=>this.forEachToolPanelFilterChild(s=>s.expand()),t=this.isColumnGroup()?()=>this.expandedCallback():()=>this.forEachToolPanelFilterChild(s=>s.collapse());this.addManagedListener(this.filterGroupComp,import_core3.AgGroupComponent.EVENT_EXPANDED,e),this.addManagedListener(this.filterGroupComp,import_core3.AgGroupComponent.EVENT_COLLAPSED,t)}getColumns(){return this.columnGroup instanceof import_core3.ProvidedColumnGroup?this.columnGroup.getLeafColumns():[this.columnGroup]}addFilterChangedListeners(){this.getColumns().forEach(e=>{this.addManagedListener(e,import_core3.Column.EVENT_FILTER_CHANGED,()=>this.refreshFilterClass())}),this.columnGroup instanceof import_core3.ProvidedColumnGroup||this.addManagedListener(this.eventService,import_core3.Events.EVENT_FILTER_OPENED,this.onFilterOpened.bind(this))}refreshFilterClass(){const e=this.getColumns(),t=()=>e.some(s=>s.isFilterActive());this.filterGroupComp.addOrRemoveCssClass("ag-has-filter",t())}onFilterOpened(e){e.source==="COLUMN_MENU"&&e.column===this.columnGroup&&this.isExpanded()&&this.collapse()}expand(){this.filterGroupComp.toggleGroupExpand(!0)}collapse(){this.filterGroupComp.toggleGroupExpand(!1)}setGroupTitle(){this.filterGroupName=this.columnGroup instanceof import_core3.ProvidedColumnGroup?this.getColumnGroupName(this.columnGroup):this.getColumnName(this.columnGroup),this.filterGroupComp.setTitle(this.filterGroupName||"")}getColumnGroupName(e){return this.columnModel.getDisplayNameForProvidedColumnGroup(null,e,"filterToolPanel")}getColumnName(e){return this.columnModel.getDisplayNameForColumn(e,"filterToolPanel",!1)}destroyFilters(){this.childFilterComps=this.destroyBeans(this.childFilterComps),import_core3._.clearElement(this.getGui())}destroy(){this.destroyFilters(),super.destroy()}};_ToolPanelFilterGroupComp.TEMPLATE=`<div class="ag-filter-toolpanel-group-wrapper">
    13|             <ag-group-component ref="filterGroupComp"></ag-group-component>
    14|         </div>`,__decorateClass([(0,import_core3.RefSelector)("filterGroupComp")],_ToolPanelFilterGroupComp.prototype,"filterGroupComp",2),__decorateClass([(0,import_core3.Autowired)("columnModel")],_ToolPanelFilterGroupComp.prototype,"columnModel",2),__decorateClass([import_core3.PreConstruct],_ToolPanelFilterGroupComp.prototype,"preConstruct",1),__decorateClass([import_core3.PostConstruct],_ToolPanelFilterGroupComp.prototype,"init",1);var ToolPanelFilterGroupComp=_ToolPanelFilterGroupComp,_FiltersToolPanelListPanel=class C extends import_core4.Component{constructor(){super(C.TEMPLATE),this.initialised=!1,this.hasLoadedInitialState=!1,this.isInitialState=!1,this.filterGroupComps=[],this.suppressOnColumnsChanged=!1,this.onColumnsChangedPending=!1}init(e){this.initialised=!0;const t=this.gos.addGridCommonParams({suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1});import_core4._.mergeDeep(t,e),this.params=t,this.params.suppressSyncLayoutWithGrid||this.addManagedListener(this.eventService,import_core4.Events.EVENT_COLUMN_MOVED,()=>this.onColumnsChanged()),this.addManagedListener(this.eventService,import_core4.Events.EVENT_NEW_COLUMNS_LOADED,()=>this.onColumnsChanged()),this.addManagedListener(this.eventService,import_core4.Events.EVENT_TOOL_PANEL_VISIBLE_CHANGED,s=>{s.key==="filters"&&this.refreshFilters(s.visible)}),this.addManagedListener(this.eventService,import_core4.Events.EVENT_DRAG_STARTED,()=>{this.suppressOnColumnsChanged=!0}),this.addManagedListener(this.eventService,import_core4.Events.EVENT_DRAG_STOPPED,()=>{this.suppressOnColumnsChanged=!1,this.onColumnsChangedPending&&(this.onColumnsChangedPending=!1,this.onColumnsChanged())}),this.columnModel.isReady()&&this.onColumnsChanged()}onColumnsChanged(){if(this.suppressOnColumnsChanged){this.onColumnsChangedPending=!0;return}const e=this.columnModel.isPivotMode();!this.params.suppressSyncLayoutWithGrid&&!e?this.syncFilterLayout():this.buildTreeFromProvidedColumnDefs(),this.refreshAriaLabel()}syncFilterLayout(){this.toolPanelColDefService.syncLayoutWithGrid(this.setFiltersLayout.bind(this)),this.refreshAriaLabel()}buildTreeFromProvidedColumnDefs(){const e=this.columnModel.getPrimaryColumnTree();this.recreateFilters(e)}setFiltersLayout(e){const t=this.toolPanelColDefService.createColumnTree(e);this.recreateFilters(t)}recreateFilters(e){const t=this.gos.getActiveDomElement();this.hasLoadedInitialState||(this.hasLoadedInitialState=!0,this.isInitialState=!!this.params.initialState);const s=this.getExpansionState();this.destroyFilters(),this.filterGroupComps=this.recursivelyAddComps(e,0,s);const i=this.filterGroupComps.length;i&&(this.filterGroupComps.forEach(r=>this.appendChild(r)),this.setFirstAndLastVisible(0,i-1)),import_core4._.exists(this.searchFilterText)&&this.searchFilters(this.searchFilterText),this.fireExpandedEvent(),this.getGui().contains(t)&&t.focus(),this.isInitialState=!1,this.refreshAriaLabel()}recursivelyAddComps(e,t,s){return import_core4._.flatten(e.map(i=>{if(i instanceof import_core4.ProvidedColumnGroup)return import_core4._.flatten(this.recursivelyAddFilterGroupComps(i,t,s));const r=i;if(!this.shouldDisplayFilter(r))return[];const o=t===0,n=new ToolPanelFilterComp(o,()=>this.onFilterExpanded());if(this.createBean(n),n.setColumn(r),s.get(r.getId())&&n.expand(),t>0)return n;const a=this.createBean(new ToolPanelFilterGroupComp(r,[n],this.onGroupExpanded.bind(this),t,!0));return a.addCssClassToTitleBar("ag-filter-toolpanel-header"),s.get(a.getFilterGroupId())||a.collapse(),a}))}refreshAriaLabel(){const e=this.localeService.getLocaleTextFunc(),t=e("ariaFilterPanelList","Filter List"),s=e("filters","Filters"),p=this.getGui().querySelectorAll(".ag-filter-toolpanel-group-item:not(.ag-filter-toolpanel-group-wrapper, .ag-hidden)").length;import_core4._.setAriaLabel(this.getAriaElement(),`${t} ${p} ${s}`)}recursivelyAddFilterGroupComps(e,t,s){if(!this.filtersExistInChildren(e.getChildren()))return;const i=e.getColGroupDef();if(i&&i.suppressFiltersToolPanel)return[];const r=e.isPadding()?t:t+1,o=import_core4._.flatten(this.recursivelyAddComps(e.getChildren(),r,s));if(e.isPadding())return o;const n=new ToolPanelFilterGroupComp(e,o,this.onGroupExpanded.bind(this),t,!1);this.createBean(n),n.addCssClassToTitleBar("ag-filter-toolpanel-header");const a=s.get(n.getFilterGroupId());return(this.isInitialState&&!a||a===!1)&&n.collapse(),[n]}filtersExistInChildren(e){return e.some(t=>t instanceof import_core4.ProvidedColumnGroup?this.filtersExistInChildren(t.getChildren()):this.shouldDisplayFilter(t))}shouldDisplayFilter(e){const t=e.getColDef()&&e.getColDef().suppressFiltersToolPanel;return e.isFilterAllowed()&&!t}getExpansionState(){const e=new Map;if(this.isInitialState){const{expandedColIds:s,expandedGroupIds:i}=this.params.initialState;return s.forEach(r=>e.set(r,!0)),i.forEach(r=>e.set(r,!0)),e}const t=s=>{e.set(s.getFilterGroupId(),s.isExpanded()),s.getChildren().forEach(i=>{i instanceof ToolPanelFilterGroupComp?t(i):e.set(i.getColumn().getId(),i.isExpanded())})};return this.filterGroupComps.forEach(t),e}refresh(){}setVisible(e){super.setDisplayed(e),e&&!this.initialised&&this.init(this.params)}expandFilterGroups(e,t){const s=[],i=r=>{const o=r.getFilterGroupId();(!t||import_core4._.includes(t,o))&&(e&&r.isColumnGroup()?r.expand():r.collapse(),s.push(o)),r.getChildren().forEach(a=>{a instanceof ToolPanelFilterGroupComp&&i(a)})};if(this.filterGroupComps.forEach(i),this.onGroupExpanded(),t){const r=t.filter(o=>s.indexOf(o)<0);r.length>0&&console.warn("AG Grid: unable to find groups for these supplied groupIds:",r)}}expandFilters(e,t){const s=[],i=r=>{if(r instanceof ToolPanelFilterGroupComp){let a=!1;return r.getChildren().forEach(p=>{i(p)&&(e?(r.expand(),a=!0):r.isColumnGroup()||r.collapse())}),a}const o=r.getColumn().getColId(),n=!t||import_core4._.includes(t,o);return n&&(e?r.expand():r.collapse(),s.push(o)),n};if(this.filterGroupComps.forEach(i),this.onGroupExpanded(),t){const r=t.filter(o=>s.indexOf(o)<0);r.length>0&&console.warn("AG Grid: unable to find columns for these supplied colIds:",r)}}onGroupExpanded(){this.fireExpandedEvent()}onFilterExpanded(){this.dispatchEvent({type:"filterExpanded"})}fireExpandedEvent(){let e=0,t=0;const s=r=>{r.isColumnGroup()&&(r.isExpanded()?e++:t++,r.getChildren().forEach(o=>{o instanceof ToolPanelFilterGroupComp&&s(o)}))};this.filterGroupComps.forEach(s);let i;e>0&&t>0?i=2:t>0?i=1:i=0,this.dispatchEvent({type:"groupExpanded",state:i})}performFilterSearch(e){this.searchFilterText=import_core4._.exists(e)?e.toLowerCase():null,this.searchFilters(this.searchFilterText)}searchFilters(e){const t=o=>!import_core4._.exists(e)||o.toLowerCase().indexOf(e)!==-1,s=(o,n)=>{if(!(o instanceof ToolPanelFilterGroupComp))return t(o.getColumnFilterName()||"");const a=o.getChildren(),p=t(o.getFilterGroupName()),h=n||p;if(h){o.hideGroup(!1);for(let d=0;d<a.length;d++)s(a[d],h),o.hideGroupItem(!1,d);return!0}let u=!1;return a.forEach((d,E)=>{const f=s(d,n);o.hideGroupItem(!f,E),f&&(u=!0)}),o.hideGroup(!u),u};let i,r;this.filterGroupComps.forEach((o,n)=>{s(o,!1),i===void 0?o.containsCssClass("ag-hidden")||(i=n,r=n):!o.containsCssClass("ag-hidden")&&r!==n&&(r=n)}),this.setFirstAndLastVisible(i,r),this.refreshAriaLabel()}setFirstAndLastVisible(e,t){this.filterGroupComps.forEach((s,i)=>{s.removeCssClass("ag-first-group-visible"),s.removeCssClass("ag-last-group-visible"),i===e&&s.addCssClass("ag-first-group-visible"),i===t&&s.addCssClass("ag-last-group-visible")})}refreshFilters(e){this.filterGroupComps.forEach(t=>t.refreshFilters(e))}getExpandedFiltersAndGroups(){const e=[],t=new Set,s=i=>{if(i instanceof ToolPanelFilterGroupComp){i.getChildren().forEach(o=>s(o));const r=i.getFilterGroupId();i.isExpanded()&&!t.has(r)&&e.push(r)}else i.isExpanded()&&t.add(i.getColumn().getColId())};return this.filterGroupComps.forEach(s),{expandedGroupIds:e,expandedColIds:Array.from(t)}}destroyFilters(){this.filterGroupComps=this.destroyBeans(this.filterGroupComps),import_core4._.clearElement(this.getGui())}destroy(){this.destroyFilters(),super.destroy()}};_FiltersToolPanelListPanel.TEMPLATE='<div class="ag-filter-list-panel"></div>',__decorateClass([(0,import_core4.Autowired)("toolPanelColDefService")],_FiltersToolPanelListPanel.prototype,"toolPanelColDefService",2),__decorateClass([(0,import_core4.Autowired)("columnModel")],_FiltersToolPanelListPanel.prototype,"columnModel",2);var FiltersToolPanelListPanel=_FiltersToolPanelListPanel,import_core5=require("@ag-grid-community/core"),_FiltersToolPanel=class g extends import_core5.Component{constructor(){super(g.TEMPLATE),this.initialised=!1,this.listenerDestroyFuncs=[]}init(e){this.initialised&&(this.listenerDestroyFuncs.forEach(r=>r()),this.listenerDestroyFuncs=[]),this.initialised=!0;const t=this.gos.addGridCommonParams({suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1});this.params=__spreadValues(__spreadValues({},t),e),this.filtersToolPanelHeaderPanel.init(this.params),this.filtersToolPanelListPanel.init(this.params);const s=this.params.suppressExpandAll,i=this.params.suppressFilterSearch;s&&i&&this.filtersToolPanelHeaderPanel.setDisplayed(!1),this.listenerDestroyFuncs.push(this.addManagedListener(this.filtersToolPanelHeaderPanel,"expandAll",this.onExpandAll.bind(this)),this.addManagedListener(this.filtersToolPanelHeaderPanel,"collapseAll",this.onCollapseAll.bind(this)),this.addManagedListener(this.filtersToolPanelHeaderPanel,"searchChanged",this.onSearchChanged.bind(this)),this.addManagedListener(this.filtersToolPanelListPanel,"filterExpanded",this.onFilterExpanded.bind(this)),this.addManagedListener(this.filtersToolPanelListPanel,"groupExpanded",this.onGroupExpanded.bind(this)))}setVisible(e){super.setDisplayed(e),e&&!this.initialised&&this.init(this.params)}onExpandAll(){this.filtersToolPanelListPanel.expandFilterGroups(!0)}onCollapseAll(){this.filtersToolPanelListPanel.expandFilterGroups(!1)}onSearchChanged(e){this.filtersToolPanelListPanel.performFilterSearch(e.searchText)}setFilterLayout(e){this.filtersToolPanelListPanel.setFiltersLayout(e)}onFilterExpanded(){this.params.onStateUpdated()}onGroupExpanded(e){this.filtersToolPanelHeaderPanel.setExpandState(e.state),this.params.onStateUpdated()}expandFilterGroups(e){this.filtersToolPanelListPanel.expandFilterGroups(!0,e)}collapseFilterGroups(e){this.filtersToolPanelListPanel.expandFilterGroups(!1,e)}expandFilters(e){this.filtersToolPanelListPanel.expandFilters(!0,e)}collapseFilters(e){this.filtersToolPanelListPanel.expandFilters(!1,e)}syncLayoutWithGrid(){this.filtersToolPanelListPanel.syncFilterLayout()}refresh(e){return this.init(e),!0}getState(){return this.filtersToolPanelListPanel.getExpandedFiltersAndGroups()}destroy(){super.destroy()}};_FiltersToolPanel.TEMPLATE=`<div class="ag-filter-toolpanel">
    15|             <ag-filters-tool-panel-header ref="filtersToolPanelHeaderPanel"></ag-filters-tool-panel-header>
    16|             <ag-filters-tool-panel-list ref="filtersToolPanelListPanel"></ag-filters-tool-panel-list>
    17|          </div>`,__decorateClass([(0,import_core5.RefSelector)("filtersToolPanelHeaderPanel")],_FiltersToolPanel.prototype,"filtersToolPanelHeaderPanel",2),__decorateClass([(0,import_core5.RefSelector)("filtersToolPanelListPanel")],_FiltersToolPanel.prototype,"filtersToolPanelListPanel",2);var FiltersToolPanel=_FiltersToolPanel,import_side_bar=require("@ag-grid-enterprise/side-bar"),VERSION="31.3.4",FiltersToolPanelModule={version:VERSION,moduleName:import_core6.ModuleNames.FiltersToolPanelModule,beans:[],agStackComponents:[{componentName:"AgFiltersToolPanelHeader",componentClass:FiltersToolPanelHeaderPanel},{componentName:"AgFiltersToolPanelList",componentClass:FiltersToolPanelListPanel}],userComponents:[{componentName:"agFiltersToolPanel",componentClass:FiltersToolPanel}],dependantModules:[import_side_bar.SideBarModule,import_core7.EnterpriseCoreModule]};


# ====================================================================
# FILE: enterprise-modules/filter-tool-panel/dist/types/src/version.d.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export declare const VERSION = "31.3.4";


# ====================================================================
# FILE: enterprise-modules/filter-tool-panel/src/version.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export const VERSION = '31.3.4';


# ====================================================================
# FILE: enterprise-modules/master-detail/dist/package/main.cjs.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 247-281 ---
   247|       modules: import_core2.ModuleRegistry.__getGridRegisteredModules(this.params.api.getGridId())
   248|     });
   249|     this.detailApi = api;
   250|     this.ctrl.registerDetailWithMaster(api, new import_core2.ColumnApi(api));
   251|     this.addDestroyFunc(() => {
   252|       api == null ? void 0 : api.destroy();
   253|     });
   254|   }
   255|   setRowData(rowData) {
   256|     this.detailApi && this.detailApi.setGridOption("rowData", rowData);
   257|   }
   258| };
   259| _DetailCellRenderer.TEMPLATE = /* html */
   260| `<div class="ag-details-row" role="gridcell">
   261|             <div ref="eDetailGrid" class="ag-details-grid" role="presentation"></div>
   262|         </div>`;
   263| __decorateClass([
   264|   (0, import_core2.RefSelector)("eDetailGrid")
   265| ], _DetailCellRenderer.prototype, "eDetailGrid", 2);
   266| var DetailCellRenderer = _DetailCellRenderer;
   267| var VERSION = "31.3.4";
   268| var MasterDetailModule = {
   269|   version: VERSION,
   270|   moduleName: import_core3.ModuleNames.MasterDetailModule,
   271|   beans: [],
   272|   userComponents: [
   273|     { componentName: "agDetailCellRenderer", componentClass: DetailCellRenderer }
   274|   ],
   275|   controllers: [
   276|     { controllerName: "detailCellRenderer", controllerClass: DetailCellRendererCtrl }
   277|   ],
   278|   dependantModules: [
   279|     import_core4.EnterpriseCoreModule
   280|   ]
   281| };


# ====================================================================
# FILE: enterprise-modules/master-detail/dist/package/main.cjs.min.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-3 ---
     1| var __defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(t,e,r)=>e in t?__defProp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,__spreadValues=(t,e)=>{for(var r in e||(e={}))__hasOwnProp.call(e,r)&&__defNormalProp(t,r,e[r]);if(__getOwnPropSymbols)for(var r of __getOwnPropSymbols(e))__propIsEnum.call(e,r)&&__defNormalProp(t,r,e[r]);return t},__export=(t,e)=>{for(var r in e)__defProp(t,r,{get:e[r],enumerable:!0})},__copyProps=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of __getOwnPropNames(e))!__hasOwnProp.call(t,s)&&s!==r&&__defProp(t,s,{get:()=>e[s],enumerable:!(i=__getOwnPropDesc(e,s))||i.enumerable});return t},__toCommonJS=t=>__copyProps(__defProp({},"__esModule",{value:!0}),t),__decorateClass=(t,e,r,i)=>{for(var s=i>1?void 0:i?__getOwnPropDesc(e,r):e,a=t.length-1,o;a>=0;a--)(o=t[a])&&(s=(i?o(e,r,s):o(s))||s);return i&&s&&__defProp(e,r,s),s},main_exports={};__export(main_exports,{MasterDetailModule:()=>MasterDetailModule}),module.exports=__toCommonJS(main_exports);var import_core3=require("@ag-grid-community/core"),import_core4=require("@ag-grid-enterprise/core"),import_core2=require("@ag-grid-community/core"),import_core=require("@ag-grid-community/core"),DetailCellRendererCtrl=class extends import_core.BeanStub{constructor(){super(...arguments),this.loadRowDataVersion=0}init(t,e){this.params=e,this.comp=t,e.pinned==null&&(this.setAutoHeightClasses(),this.setupRefreshStrategy(),this.addThemeToDetailGrid(),this.createDetailGrid(),this.loadRowData(),this.addManagedListener(this.eventService,import_core.Events.EVENT_FULL_WIDTH_ROW_FOCUSED,this.onFullWidthRowFocused.bind(this)))}onFullWidthRowFocused(t){const e=this.params,r={rowIndex:e.node.rowIndex,rowPinned:e.node.rowPinned},i={rowIndex:t.rowIndex,rowPinned:t.rowPinned};this.rowPositionUtils.sameRow(r,i)&&this.focusService.focusInto(this.comp.getGui(),t.fromBelow)}setAutoHeightClasses(){const t=this.gos.get("detailRowAutoHeight"),e=t?"ag-details-row-auto-height":"ag-details-row-fixed-height",r=t?"ag-details-grid-auto-height":"ag-details-grid-fixed-height";this.comp.addOrRemoveCssClass(e,!0),this.comp.addOrRemoveDetailGridCssClass(r,!0)}setupRefreshStrategy(){const t=this.params.refreshStrategy;if(t=="everything"||t=="nothing"||t=="rows"){this.refreshStrategy=t;return}t!=null&&console.warn("AG Grid: invalid cellRendererParams.refreshStrategy = '"+t+"' supplied, defaulting to refreshStrategy = 'rows'."),this.refreshStrategy="rows"}addThemeToDetailGrid(){const{theme:t}=this.environment.getTheme();t&&this.comp.addOrRemoveDetailGridCssClass(t,!0)}createDetailGrid(){if(import_core._.missing(this.params.detailGridOptions)){console.warn("AG Grid: could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions");return}const t=this.gos.get("detailRowAutoHeight"),e=__spreadValues({},this.params.detailGridOptions);t&&(e.domLayout="autoHeight"),this.comp.setDetailGrid(e)}registerDetailWithMaster(t,e){const r=this.params.node.id,i=this.params.api,s={id:r,api:t,columnApi:e},a=this.params.node;i.isDestroyed()||(i.addDetailGridInfo(r,s),a.detailGridInfo=s,this.addDestroyFunc(()=>{a.detailGridInfo===s&&(i.isDestroyed()||i.removeDetailGridInfo(r),a.detailGridInfo=null)}))}loadRowData(){var t,e,r;this.loadRowDataVersion++;const i=this.loadRowDataVersion;if(((t=this.params.detailGridOptions)==null?void 0:t.rowModelType)==="serverSide"){(r=(e=this.params.node.detailGridInfo)==null?void 0:e.api)==null||r.refreshServerSide({purge:!0});return}const s=this.params.getDetailRowData;if(!s){console.warn("AG Grid: could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData");return}const a=n=>{this.loadRowDataVersion===i&&this.comp.setRowData(n)},o={node:this.params.node,data:this.params.node.data,successCallback:a,context:this.gos.getGridCommonParams().context};s(o)}refresh(){switch(this.refreshStrategy){case"nothing":return!0;case"everything":return!1}return this.loadRowData(),!0}};__decorateClass([(0,import_core.Autowired)("rowPositionUtils")],DetailCellRendererCtrl.prototype,"rowPositionUtils",2),__decorateClass([(0,import_core.Autowired)("focusService")],DetailCellRendererCtrl.prototype,"focusService",2);var _DetailCellRenderer=class l extends import_core2.Component{init(e){this.params=e,this.selectAndSetTemplate();const r={addOrRemoveCssClass:(i,s)=>this.addOrRemoveCssClass(i,s),addOrRemoveDetailGridCssClass:(i,s)=>this.eDetailGrid.classList.toggle(i,s),setDetailGrid:i=>this.setDetailGrid(i),setRowData:i=>this.setRowData(i),getGui:()=>this.eDetailGrid};this.ctrl=this.createManagedBean(new DetailCellRendererCtrl),this.ctrl.init(r,e)}refresh(){return this.ctrl&&this.ctrl.refresh()}destroy(){super.destroy()}selectAndSetTemplate(){if(this.params.pinned){this.setTemplate('<div class="ag-details-row"></div>');return}const e=()=>{this.setTemplate(l.TEMPLATE)};if(import_core2._.missing(this.params.template))e();else if(typeof this.params.template=="string")this.setTemplate(this.params.template);else if(typeof this.params.template=="function"){const r=this.params.template,i=r(this.params);this.setTemplate(i)}else console.warn("AG Grid: detailCellRendererParams.template should be function or string"),e();this.eDetailGrid==null&&console.warn('AG Grid: reference to eDetailGrid was missing from the details template. Please add ref="eDetailGrid" to the template.')}setDetailGrid(e){if(!this.eDetailGrid)return;const r=this.context.getBean("agGridReact"),i=r?import_core2._.cloneObject(r):void 0,s=this.context.getBean("frameworkComponentWrapper"),a=this.getFrameworkOverrides(),o=(0,import_core2.createGrid)(this.eDetailGrid,e,{frameworkOverrides:a,providedBeanInstances:{agGridReact:i,frameworkComponentWrapper:s},modules:import_core2.ModuleRegistry.__getGridRegisteredModules(this.params.api.getGridId())});this.detailApi=o,this.ctrl.registerDetailWithMaster(o,new import_core2.ColumnApi(o)),this.addDestroyFunc(()=>{o?.destroy()})}setRowData(e){this.detailApi&&this.detailApi.setGridOption("rowData",e)}};_DetailCellRenderer.TEMPLATE=`<div class="ag-details-row" role="gridcell">
     2|             <div ref="eDetailGrid" class="ag-details-grid" role="presentation"></div>
     3|         </div>`,__decorateClass([(0,import_core2.RefSelector)("eDetailGrid")],_DetailCellRenderer.prototype,"eDetailGrid",2);var DetailCellRenderer=_DetailCellRenderer,VERSION="31.3.4",MasterDetailModule={version:VERSION,moduleName:import_core3.ModuleNames.MasterDetailModule,beans:[],userComponents:[{componentName:"agDetailCellRenderer",componentClass:DetailCellRenderer}],controllers:[{controllerName:"detailCellRenderer",controllerClass:DetailCellRendererCtrl}],dependantModules:[import_core4.EnterpriseCoreModule]};


# ====================================================================
# FILE: enterprise-modules/master-detail/dist/types/src/version.d.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export declare const VERSION = "31.3.4";


# ====================================================================
# FILE: enterprise-modules/master-detail/src/version.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export const VERSION = '31.3.4';


# ====================================================================
# FILE: enterprise-modules/menu/dist/package/main.cjs.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 999-1039 ---
   999|   (0, import_core3.Autowired)("rowPositionUtils")
  1000| ], MenuItemMapper.prototype, "rowPositionUtils", 2);
  1001| __decorateClass([
  1002|   (0, import_core3.Autowired)("chartMenuItemMapper")
  1003| ], MenuItemMapper.prototype, "chartMenuItemMapper", 2);
  1004| __decorateClass([
  1005|   (0, import_core3.Autowired)("menuService")
  1006| ], MenuItemMapper.prototype, "menuService", 2);
  1007| __decorateClass([
  1008|   (0, import_core3.Autowired)("sortController")
  1009| ], MenuItemMapper.prototype, "sortController", 2);
  1010| __decorateClass([
  1011|   (0, import_core3.Optional)("clipboardService")
  1012| ], MenuItemMapper.prototype, "clipboardService", 2);
  1013| __decorateClass([
  1014|   (0, import_core3.Optional)("aggFuncService")
  1015| ], MenuItemMapper.prototype, "aggFuncService", 2);
  1016| MenuItemMapper = __decorateClass([
  1017|   (0, import_core3.Bean)("menuItemMapper")
  1018| ], MenuItemMapper);
  1019| var VERSION = "31.3.4";
  1020| var import_core4 = require("@ag-grid-community/core");
  1021| var ChartMenuItemMapper = class extends import_core4.BeanStub {
  1022|   getChartItems(key) {
  1023|     var _a, _b;
  1024|     if (!this.chartService) {
  1025|       import_core4.ModuleRegistry.__assertRegistered(import_core4.ModuleNames.GridChartsModule, `the Context Menu key "${key}"`, this.context.getGridId());
  1026|       return void 0;
  1027|     }
  1028|     const builder = key === "pivotChart" ? new PivotMenuItemMapper(this.gos, this.chartService, this.localeService) : new RangeMenuItemMapper(this.gos, this.chartService, this.localeService);
  1029|     const isEnterprise = this.chartService.isEnterprise();
  1030|     let topLevelMenuItem = builder.getMenuItem();
  1031|     if (topLevelMenuItem && topLevelMenuItem.subMenu && !isEnterprise) {
  1032|       const filterEnterpriseItems = (m) => {
  1033|         var _a2;
  1034|         return __spreadProps(__spreadValues({}, m), {
  1035|           subMenu: (_a2 = m.subMenu) == null ? void 0 : _a2.filter((menu) => !menu._enterprise).map((menu) => filterEnterpriseItems(menu))
  1036|         });
  1037|       };
  1038|       topLevelMenuItem = filterEnterpriseItems(topLevelMenuItem);
  1039|     }


# ====================================================================
# FILE: enterprise-modules/menu/dist/package/main.cjs.min.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-3 ---
     1| var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropNames=Object.getOwnPropertyNames,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(t,e,o)=>e in t?__defProp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,__spreadValues=(t,e)=>{for(var o in e||(e={}))__hasOwnProp.call(e,o)&&__defNormalProp(t,o,e[o]);if(__getOwnPropSymbols)for(var o of __getOwnPropSymbols(e))__propIsEnum.call(e,o)&&__defNormalProp(t,o,e[o]);return t},__spreadProps=(t,e)=>__defProps(t,__getOwnPropDescs(e)),__export=(t,e)=>{for(var o in e)__defProp(t,o,{get:e[o],enumerable:!0})},__copyProps=(t,e,o,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of __getOwnPropNames(e))!__hasOwnProp.call(t,n)&&n!==o&&__defProp(t,n,{get:()=>e[n],enumerable:!(r=__getOwnPropDesc(e,n))||r.enumerable});return t},__toCommonJS=t=>__copyProps(__defProp({},"__esModule",{value:!0}),t),__decorateClass=(t,e,o,r)=>{for(var n=r>1?void 0:r?__getOwnPropDesc(e,o):e,i=t.length-1,s;i>=0;i--)(s=t[i])&&(n=(r?s(e,o,n):s(n))||n);return r&&n&&__defProp(e,o,n),n},main_exports={};__export(main_exports,{MenuModule:()=>MenuModule}),module.exports=__toCommonJS(main_exports);var import_core8=require("@ag-grid-community/core"),import_core9=require("@ag-grid-enterprise/core"),import_core=require("@ag-grid-community/core"),EnterpriseMenuFactory=class extends import_core.BeanStub{hideActiveMenu(){this.destroyBean(this.activeMenu)}showMenuAfterMouseEvent(t,e,o,r){const n=r?"filterMenuTab":void 0;this.showMenu(t,i=>{var s;const a=i.getGui();this.popupService.positionPopupUnderMouseEvent({type:o,column:t,mouseEvent:e,ePopup:a}),n&&((s=i.showTab)==null||s.call(i,n)),this.dispatchVisibleChangedEvent(!0,!1,t,n)},o,n,void 0,e.target)}showMenuAfterButtonClick(t,e,o,r){let n=-1,i="left";this.gos.get("enableRtl")&&(n=1,i="right");const s=r?"filterMenuTab":void 0,a=s?[s]:void 0,l=this.menuService.isLegacyMenuEnabled();let h=(l?9:4)*n,m=l?-23:4;this.showMenu(t,c=>{var d;const u=c.getGui();this.popupService.positionPopupByComponent({type:o,column:t,eventSource:e,ePopup:u,alignSide:i,nudgeX:h,nudgeY:m,position:"under",keepWithinBounds:!0}),s&&((d=c.showTab)==null||d.call(c,s)),this.dispatchVisibleChangedEvent(!0,!1,t,s)},o,s,a,e)}showMenu(t,e,o,r,n,i){var s;const{menu:a,eMenuGui:l,anchorToElement:h,restoreFocusParams:m}=this.getMenuParams(t,n,i),c=[];c.push(u=>{const g=a.getGui();this.destroyBean(a),t&&(t.setMenuVisible(!1,"contextMenu"),this.menuUtils.restoreFocusOnClose(m,g,u))});const d=this.localeService.getLocaleTextFunc();if(this.popupService.addPopup({modal:!0,eChild:l,closeOnEsc:!0,closedCallback:u=>{c.forEach(g=>g(u)),this.dispatchVisibleChangedEvent(!1,!1,t,r)},afterGuiAttached:u=>a.afterGuiAttached(Object.assign({},{container:o},u)),positionCallback:r?()=>e(a):void 0,ariaLabel:d("ariaLabelColumnMenu","Column Menu")}),r||((s=a.showTabBasedOnPreviousSelection)==null||s.call(a),e(a)),this.menuService.isColumnMenuAnchoringEnabled()){const u=this.popupService.setPopupPositionRelatedToElement(l,h);u&&t&&this.addStopAnchoring(u,t,c)}a.addEventListener(TabbedColumnMenu.EVENT_TAB_SELECTED,u=>{this.dispatchVisibleChangedEvent(!1,!0,t),this.lastSelectedTab=u.key,this.dispatchVisibleChangedEvent(!0,!0,t)}),t?.setMenuVisible(!0,"contextMenu"),this.activeMenu=a,a.addEventListener(import_core.BeanStub.EVENT_DESTROYED,()=>{this.activeMenu===a&&(this.activeMenu=null)})}addStopAnchoring(t,e,o){t.then(r=>{e.addEventListener("leftChanged",r),e.addEventListener("visibleChanged",r),o.push(()=>{e.removeEventListener("leftChanged",r),e.removeEventListener("visibleChanged",r)})})}getMenuParams(t,e,o){const r={column:t,headerPosition:this.focusService.getFocusedHeader(),columnIndex:this.columnModel.getAllDisplayedColumns().indexOf(t),eventSource:o},n=this.createMenu(t,r,e,o);return{menu:n,eMenuGui:n.getGui(),anchorToElement:o||this.ctrlsService.getGridBodyCtrl().getGui(),restoreFocusParams:r}}createMenu(t,e,o,r){return this.menuService.isLegacyMenuEnabled()?this.createBean(new TabbedColumnMenu(t,e,this.lastSelectedTab,o,r)):this.createBean(new ColumnContextMenu(t,e,r))}dispatchVisibleChangedEvent(t,e,o,r){var n,i;const s={type:import_core.Events.EVENT_COLUMN_MENU_VISIBLE_CHANGED,visible:t,switchingTab:e,key:(i=(n=this.lastSelectedTab)!=null?n:r)!=null?i:this.menuService.isLegacyMenuEnabled()?TabbedColumnMenu.TAB_GENERAL:"columnMenu",column:o??null};this.eventService.dispatchEvent(s)}isMenuEnabled(t){var e;if(!this.menuService.isLegacyMenuEnabled())return!0;const o=!this.filterManager.isFilterAllowed(t),r=(e=t.getColDef().menuTabs)!=null?e:TabbedColumnMenu.TABS_DEFAULT;return(o&&r.includes(TabbedColumnMenu.TAB_FILTER)?r.length-1:r.length)>0}showMenuAfterContextMenuEvent(t,e,o){this.menuUtils.onContextMenu(e,o,r=>(this.showMenuAfterMouseEvent(t,r,"columnMenu"),!0))}};__decorateClass([(0,import_core.Autowired)("popupService")],EnterpriseMenuFactory.prototype,"popupService",2),__decorateClass([(0,import_core.Autowired)("focusService")],EnterpriseMenuFactory.prototype,"focusService",2),__decorateClass([(0,import_core.Autowired)("ctrlsService")],EnterpriseMenuFactory.prototype,"ctrlsService",2),__decorateClass([(0,import_core.Autowired)("columnModel")],EnterpriseMenuFactory.prototype,"columnModel",2),__decorateClass([(0,import_core.Autowired)("filterManager")],EnterpriseMenuFactory.prototype,"filterManager",2),__decorateClass([(0,import_core.Autowired)("menuUtils")],EnterpriseMenuFactory.prototype,"menuUtils",2),__decorateClass([(0,import_core.Autowired)("menuService")],EnterpriseMenuFactory.prototype,"menuService",2),EnterpriseMenuFactory=__decorateClass([(0,import_core.Bean)("enterpriseMenuFactory")],EnterpriseMenuFactory);var _TabbedColumnMenu=class p extends import_core.BeanStub{constructor(e,o,r,n,i){super(),this.column=e,this.restoreFocusParams=o,this.initialSelection=r,this.restrictTo=n,this.sourceElement=i,this.tabFactories={},this.includeChecks={},this.tabFactories[p.TAB_GENERAL]=this.createMainPanel.bind(this),this.tabFactories[p.TAB_FILTER]=this.createFilterPanel.bind(this),this.tabFactories[p.TAB_COLUMNS]=this.createColumnsPanel.bind(this),this.includeChecks[p.TAB_GENERAL]=()=>!0,this.includeChecks[p.TAB_FILTER]=()=>e?this.filterManager.isFilterAllowed(e):!1,this.includeChecks[p.TAB_COLUMNS]=()=>!0}init(){const e=this.getTabsToCreate().map(o=>this.createTab(o));this.tabbedLayout=new import_core.TabbedLayout({items:e,cssClass:"ag-menu",onActiveItemClicked:this.onHidePopup.bind(this),onItemClicked:this.onTabItemClicked.bind(this)}),this.createBean(this.tabbedLayout),this.mainMenuList&&this.mainMenuList.setParentComponent(this.tabbedLayout),this.addDestroyFunc(()=>this.destroyBean(this.tabbedLayout))}getTabsToCreate(){var e,o;return this.restrictTo?this.restrictTo:((o=(e=this.column)==null?void 0:e.getColDef().menuTabs)!=null?o:p.TABS_DEFAULT).filter(r=>this.isValidMenuTabItem(r)).filter(r=>this.isNotSuppressed(r)).filter(r=>this.isModuleLoaded(r))}isModuleLoaded(e){return e===p.TAB_COLUMNS?import_core.ModuleRegistry.__isRegistered(import_core.ModuleNames.ColumnsToolPanelModule,this.context.getGridId()):!0}isValidMenuTabItem(e){let o=!0,r=p.TABS_DEFAULT;return this.restrictTo!=null&&(o=this.restrictTo.indexOf(e)>-1,r=this.restrictTo),o=o&&p.TABS_DEFAULT.indexOf(e)>-1,o||console.warn(`AG Grid: Trying to render an invalid menu item '${e}'. Check that your 'menuTabs' contains one of [${r}]`),o}isNotSuppressed(e){return this.includeChecks[e]()}createTab(e){return this.tabFactories[e]()}showTabBasedOnPreviousSelection(){this.showTab(this.initialSelection)}showTab(e){this.tabItemColumns&&e===p.TAB_COLUMNS?this.tabbedLayout.showItem(this.tabItemColumns):this.tabItemFilter&&e===p.TAB_FILTER?this.tabbedLayout.showItem(this.tabItemFilter):this.tabItemGeneral&&e===p.TAB_GENERAL?this.tabbedLayout.showItem(this.tabItemGeneral):this.tabbedLayout.showFirstItem()}onTabItemClicked(e){let o=null;switch(e.item){case this.tabItemColumns:o=p.TAB_COLUMNS;break;case this.tabItemFilter:o=p.TAB_FILTER;break;case this.tabItemGeneral:o=p.TAB_GENERAL;break}o&&this.activateTab(o)}activateTab(e){const o={type:p.EVENT_TAB_SELECTED,key:e};this.dispatchEvent(o)}createMainPanel(){return this.mainMenuList=this.columnMenuFactory.createMenu(this,this.column,()=>{var e;return(e=this.sourceElement)!=null?e:this.getGui()}),this.mainMenuList.addEventListener(import_core.AgMenuItemComponent.EVENT_CLOSE_MENU,this.onHidePopup.bind(this)),this.tabItemGeneral={title:import_core._.createIconNoSpan("menu",this.gos,this.column),titleLabel:p.TAB_GENERAL.replace("MenuTab",""),bodyPromise:import_core.AgPromise.resolve(this.mainMenuList.getGui()),name:p.TAB_GENERAL},this.tabItemGeneral}onHidePopup(e){this.menuUtils.closePopupAndRestoreFocusOnSelect(this.hidePopupFunc,this.restoreFocusParams,e)}createFilterPanel(){const e=this.column?this.createManagedBean(new import_core.FilterWrapperComp(this.column,"COLUMN_MENU")):null;if(!e?.hasFilter())throw new Error("AG Grid - Unable to instantiate filter");const o=n=>e.afterGuiAttached(n),r=()=>e.afterGuiDetached();return this.tabItemFilter={title:import_core._.createIconNoSpan("filter",this.gos,this.column),titleLabel:p.TAB_FILTER.replace("MenuTab",""),bodyPromise:import_core.AgPromise.resolve(e?.getGui()),afterAttachedCallback:o,afterDetachedCallback:r,name:p.TAB_FILTER},this.tabItemFilter}createColumnsPanel(){const e=document.createElement("div");e.classList.add("ag-menu-column-select-wrapper");const r=this.columnChooserFactory.createColumnSelectPanel(this,this.column).getGui();return r.classList.add("ag-menu-column-select"),e.appendChild(r),this.tabItemColumns={title:import_core._.createIconNoSpan("columns",this.gos,this.column),titleLabel:p.TAB_COLUMNS.replace("MenuTab",""),bodyPromise:import_core.AgPromise.resolve(e),name:p.TAB_COLUMNS},this.tabItemColumns}afterGuiAttached(e){const{container:o,hidePopup:r}=e;this.tabbedLayout.setAfterAttachedParams({container:o,hidePopup:r}),r&&(this.hidePopupFunc=r,this.addDestroyFunc(r))}getGui(){return this.tabbedLayout.getGui()}};_TabbedColumnMenu.EVENT_TAB_SELECTED="tabSelected",_TabbedColumnMenu.TAB_FILTER="filterMenuTab",_TabbedColumnMenu.TAB_GENERAL="generalMenuTab",_TabbedColumnMenu.TAB_COLUMNS="columnsMenuTab",_TabbedColumnMenu.TABS_DEFAULT=[_TabbedColumnMenu.TAB_GENERAL,_TabbedColumnMenu.TAB_FILTER,_TabbedColumnMenu.TAB_COLUMNS],__decorateClass([(0,import_core.Autowired)("filterManager")],_TabbedColumnMenu.prototype,"filterManager",2),__decorateClass([(0,import_core.Autowired)("columnChooserFactory")],_TabbedColumnMenu.prototype,"columnChooserFactory",2),__decorateClass([(0,import_core.Autowired)("columnMenuFactory")],_TabbedColumnMenu.prototype,"columnMenuFactory",2),__decorateClass([(0,import_core.Autowired)("menuUtils")],_TabbedColumnMenu.prototype,"menuUtils",2),__decorateClass([import_core.PostConstruct],_TabbedColumnMenu.prototype,"init",1);var TabbedColumnMenu=_TabbedColumnMenu,ColumnContextMenu=class extends import_core.Component{constructor(t,e,o){super(`
     2|             <div ref="eColumnMenu" role="presentation" class="ag-menu ag-column-menu"></div>
     3|         `),this.column=t,this.restoreFocusParams=e,this.sourceElement=o}init(){this.mainMenuList=this.columnMenuFactory.createMenu(this,this.column,()=>{var t;return(t=this.sourceElement)!=null?t:this.getGui()}),this.mainMenuList.addEventListener(import_core.AgMenuItemComponent.EVENT_CLOSE_MENU,this.onHidePopup.bind(this)),this.eColumnMenu.appendChild(this.mainMenuList.getGui())}onHidePopup(t){this.menuUtils.closePopupAndRestoreFocusOnSelect(this.hidePopupFunc,this.restoreFocusParams,t)}afterGuiAttached({hidePopup:t}){t&&(this.hidePopupFunc=t,this.addDestroyFunc(t)),this.focusService.focusInto(this.mainMenuList.getGui())}};__decorateClass([(0,import_core.Autowired)("columnMenuFactory")],ColumnContextMenu.prototype,"columnMenuFactory",2),__decorateClass([(0,import_core.Autowired)("menuUtils")],ColumnContextMenu.prototype,"menuUtils",2),__decorateClass([(0,import_core.Autowired)("focusService")],ColumnContextMenu.prototype,"focusService",2),__decorateClass([(0,import_core.RefSelector)("eColumnMenu")],ColumnContextMenu.prototype,"eColumnMenu",2),__decorateClass([import_core.PostConstruct],ColumnContextMenu.prototype,"init",1);var import_core2=require("@ag-grid-community/core"),CSS_MENU="ag-menu",CSS_CONTEXT_MENU_OPEN="ag-context-menu-open",ContextMenuFactory=class extends import_core2.BeanStub{hideActiveMenu(){this.destroyBean(this.activeMenu)}getMenuItems(t,e,o){const r=[];if(import_core2._.exists(t)&&import_core2.ModuleRegistry.__isRegistered(import_core2.ModuleNames.ClipboardModule,this.context.getGridId())&&e&&(this.gos.get("suppressCutToClipboard")||r.push("cut"),r.push("copy","copyWithHeaders","copyWithGroupHeaders","paste","separator")),this.gos.get("enableCharts")&&import_core2.ModuleRegistry.__isRegistered(import_core2.ModuleNames.GridChartsModule,this.context.getGridId())&&(this.columnModel.isPivotMode()&&r.push("pivotChart"),this.rangeService&&!this.rangeService.isEmpty()&&r.push("chartRange")),import_core2._.exists(t)){const a=!import_core2.ModuleRegistry.__isRegistered(import_core2.ModuleNames.CsvExportModule,this.context.getGridId()),l=!import_core2.ModuleRegistry.__isRegistered(import_core2.ModuleNames.ExcelExportModule,this.context.getGridId()),h=this.gos.get("suppressExcelExport")||l,m=this.gos.get("suppressCsvExport")||a;!import_core2._.isIOSUserAgent()&&(!h||!m)&&r.push("export")}const n=r.length?r:void 0,i=e?.getColDef().contextMenuItems;if(Array.isArray(i))return i;if(typeof i=="function")return i(this.gos.addGridCommonParams({column:e,node:t,value:o,defaultItems:n}));const s=this.gos.getCallback("getContextMenuItems");return s?s({column:e,node:t,value:o,defaultItems:n}):r}onContextMenu(t,e,o,r,n,i){this.menuUtils.onContextMenu(t,e,s=>this.showMenu(o,r,n,s,i))}showMenu(t,e,o,r,n){const i=this.getMenuItems(t,e,o),s=this.ctrlsService.getGridBodyCtrl().getGui();if(i===void 0||import_core2._.missingOrEmpty(i))return!1;const a=new ContextMenu(i,e,t,o);this.createBean(a);const l=a.getGui(),h={column:e,rowNode:t,type:"contextMenu",mouseEvent:r,ePopup:l,nudgeY:1},m=this.localeService.getLocaleTextFunc(),c=this.popupService.addPopup({modal:!0,eChild:l,closeOnEsc:!0,closedCallback:u=>{s.classList.remove(CSS_CONTEXT_MENU_OPEN),this.destroyBean(a),this.dispatchVisibleChangedEvent(!1,u===void 0?"api":"ui")},click:r,positionCallback:()=>{const u=this.gos.get("enableRtl");this.popupService.positionPopupUnderMouseEvent(__spreadProps(__spreadValues({},h),{nudgeX:u?(l.offsetWidth+1)*-1:1}))},anchorToElement:n,ariaLabel:m("ariaLabelContextMenu","Context Menu")});c&&(s.classList.add(CSS_CONTEXT_MENU_OPEN),a.afterGuiAttached({container:"contextMenu",hidePopup:c.hideFunc})),this.activeMenu&&this.hideActiveMenu(),this.activeMenu=a,a.addEventListener(import_core2.BeanStub.EVENT_DESTROYED,()=>{this.activeMenu===a&&(this.activeMenu=null)}),c&&a.addEventListener(import_core2.AgMenuItemComponent.EVENT_CLOSE_MENU,u=>{var g,C;return c.hideFunc({mouseEvent:(g=u.mouseEvent)!=null?g:void 0,keyboardEvent:(C=u.keyboardEvent)!=null?C:void 0,forceHide:!0})});const d=r&&r instanceof MouseEvent&&r.type==="mousedown";return this.dispatchVisibleChangedEvent(!0,d?"api":"ui"),!0}dispatchVisibleChangedEvent(t,e="ui"){const o={type:import_core2.Events.EVENT_CONTEXT_MENU_VISIBLE_CHANGED,visible:t,source:e};this.eventService.dispatchEvent(o)}};__decorateClass([(0,import_core2.Autowired)("popupService")],ContextMenuFactory.prototype,"popupService",2),__decorateClass([(0,import_core2.Autowired)("ctrlsService")],ContextMenuFactory.prototype,"ctrlsService",2),__decorateClass([(0,import_core2.Autowired)("columnModel")],ContextMenuFactory.prototype,"columnModel",2),__decorateClass([(0,import_core2.Autowired)("menuUtils")],ContextMenuFactory.prototype,"menuUtils",2),__decorateClass([(0,import_core2.Optional)("rangeService")],ContextMenuFactory.prototype,"rangeService",2),ContextMenuFactory=__decorateClass([(0,import_core2.Bean)("contextMenuFactory")],ContextMenuFactory);var ContextMenu=class extends import_core2.Component{constructor(t,e,o,r){super(`<div class="${CSS_MENU}" role="presentation"></div>`),this.menuItems=t,this.column=e,this.node=o,this.value=r,this.menuList=null,this.focusedCell=null}addMenuItems(){const t=this.createManagedBean(new import_core2.AgMenuList(0,{column:this.column,node:this.node,value:this.value})),e=this.menuItemMapper.mapWithStockItems(this.menuItems,null,()=>this.getGui());t.addMenuItems(e),this.appendChild(t),this.menuList=t,t.addEventListener(import_core2.AgMenuItemComponent.EVENT_CLOSE_MENU,o=>this.dispatchEvent(o))}afterGuiAttached(t){t.hidePopup&&this.addDestroyFunc(t.hidePopup),this.focusedCell=this.focusService.getFocusedCell(),this.menuList&&this.focusService.focusInto(this.menuList.getGui())}restoreFocusedCell(){const t=this.focusService.getFocusedCell();if(t&&this.focusedCell&&this.cellPositionUtils.equals(t,this.focusedCell)){const{rowIndex:e,rowPinned:o,column:r}=this.focusedCell,n=this.gos.getDocument(),i=this.gos.getActiveDomElement();(!i||i===n.body)&&this.focusService.setFocusedCell({rowIndex:e,column:r,rowPinned:o,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!this.focusService.isKeyboardMode()})}}destroy(){this.restoreFocusedCell(),super.destroy()}};__decorateClass([(0,import_core2.Autowired)("menuItemMapper")],ContextMenu.prototype,"menuItemMapper",2),__decorateClass([(0,import_core2.Autowired)("focusService")],ContextMenu.prototype,"focusService",2),__decorateClass([(0,import_core2.Autowired)("cellPositionUtils")],ContextMenu.prototype,"cellPositionUtils",2),__decorateClass([import_core2.PostConstruct],ContextMenu.prototype,"addMenuItems",1);var import_core3=require("@ag-grid-community/core"),MenuItemMapper=class extends import_core3.BeanStub{mapWithStockItems(t,e,o){if(!t)return[];const r=[];return t.forEach(n=>{let i;if(typeof n=="string"?i=this.getStockMenuItem(n,e,o):i=__spreadValues({},n),!i)return;const s=i,{subMenu:a}=s;a&&a instanceof Array&&(s.subMenu=this.mapWithStockItems(a,e,o)),i!=null&&r.push(i)}),r}getStockMenuItem(t,e,o){var r;const n=this.localeService.getLocaleTextFunc(),i=this.gos.get("skipHeaderOnAutoSize");switch(t){case"pinSubMenu":return{name:n("pinColumn","Pin Column"),icon:import_core3._.createIconNoSpan("menuPin",this.gos,null),subMenu:["clearPinned","pinLeft","pinRight"]};case"pinLeft":return{name:n("pinLeft","Pin Left"),action:()=>this.columnModel.setColumnsPinned([e],"left","contextMenu"),checked:!!e&&e.isPinnedLeft()};case"pinRight":return{name:n("pinRight","Pin Right"),action:()=>this.columnModel.setColumnsPinned([e],"right","contextMenu"),checked:!!e&&e.isPinnedRight()};case"clearPinned":return{name:n("noPin","No Pin"),action:()=>this.columnModel.setColumnsPinned([e],null,"contextMenu"),checked:!!e&&!e.isPinned()};case"valueAggSubMenu":return import_core3.ModuleRegistry.__assertRegistered(import_core3.ModuleNames.RowGroupingModule,"Aggregation from Menu",this.context.getGridId())?!e?.isPrimary()&&!e?.getColDef().pivotValueColumn?null:{name:n("valueAggregation","Value Aggregation"),icon:import_core3._.createIconNoSpan("menuValue",this.gos,null),subMenu:this.createAggregationSubMenu(e,this.aggFuncService)}:null;case"autoSizeThis":return{name:n("autosizeThiscolumn","Autosize This Column"),action:()=>this.columnModel.autoSizeColumn(e,"contextMenu",i)};case"autoSizeAll":return{name:n("autosizeAllColumns","Autosize All Columns"),action:()=>this.columnModel.autoSizeAllColumns("contextMenu",i)};case"rowGroup":return{name:n("groupBy","Group by")+" "+import_core3._.escapeString(this.columnModel.getDisplayNameForColumn(e,"header")),disabled:e?.isRowGroupActive()||!e?.getColDef().enableRowGroup,action:()=>this.columnModel.addRowGroupColumns([e],"contextMenu"),icon:import_core3._.createIconNoSpan("menuAddRowGroup",this.gos,null)};case"rowUnGroup":const s=import_core3._.createIconNoSpan("menuRemoveRowGroup",this.gos,null),a=e?.getColDef().showRowGroup,l=this.gos.get("groupLockGroupColumns");if(a===!0)return{name:n("ungroupAll","Un-Group All"),disabled:l===-1||l>=this.columnModel.getRowGroupColumns().length,action:()=>this.columnModel.setRowGroupColumns(this.columnModel.getRowGroupColumns().slice(0,l),"contextMenu"),icon:s};if(typeof a=="string"){const d=this.columnModel.getPrimaryColumn(a),u=d!=null?import_core3._.escapeString(this.columnModel.getDisplayNameForColumn(d,"header")):a;return{name:n("ungroupBy","Un-Group by")+" "+u,disabled:d!=null&&this.columnModel.isColumnGroupingLocked(d),action:()=>this.columnModel.removeRowGroupColumns([a],"contextMenu"),icon:s}}return{name:n("ungroupBy","Un-Group by")+" "+import_core3._.escapeString(this.columnModel.getDisplayNameForColumn(e,"header")),disabled:!e?.isRowGroupActive()||!e?.getColDef().enableRowGroup||this.columnModel.isColumnGroupingLocked(e),action:()=>this.columnModel.removeRowGroupColumns([e],"contextMenu"),icon:s};case"resetColumns":return{name:n("resetColumns","Reset Columns"),action:()=>this.columnModel.resetColumnState("contextMenu")};case"expandAll":return{name:n("expandAll","Expand All Row Groups"),action:()=>this.gridApi.expandAll()};case"contractAll":return{name:n("collapseAll","Collapse All Row Groups"),action:()=>this.gridApi.collapseAll()};case"copy":return import_core3.ModuleRegistry.__assertRegistered(import_core3.ModuleNames.ClipboardModule,"Copy from Menu",this.context.getGridId())?{name:n("copy","Copy"),shortcut:n("ctrlC","Ctrl+C"),icon:import_core3._.createIconNoSpan("clipboardCopy",this.gos,null),action:()=>this.clipboardService.copyToClipboard()}:null;case"copyWithHeaders":return import_core3.ModuleRegistry.__assertRegistered(import_core3.ModuleNames.ClipboardModule,"Copy with Headers from Menu",this.context.getGridId())?{name:n("copyWithHeaders","Copy with Headers"),icon:import_core3._.createIconNoSpan("clipboardCopy",this.gos,null),action:()=>this.clipboardService.copyToClipboard({includeHeaders:!0})}:null;case"copyWithGroupHeaders":return import_core3.ModuleRegistry.__assertRegistered(import_core3.ModuleNames.ClipboardModule,"Copy with Group Headers from Menu",this.context.getGridId())?{name:n("copyWithGroupHeaders","Copy with Group Headers"),icon:import_core3._.createIconNoSpan("clipboardCopy",this.gos,null),action:()=>this.clipboardService.copyToClipboard({includeHeaders:!0,includeGroupHeaders:!0})}:null;case"cut":if(import_core3.ModuleRegistry.__assertRegistered(import_core3.ModuleNames.ClipboardModule,"Cut from Menu",this.context.getGridId())){const d=this.focusService.getFocusedCell(),u=d?this.rowPositionUtils.getRowNode(d):null,g=u?d?.column.isCellEditable(u):!1;return{name:n("cut","Cut"),shortcut:n("ctrlX","Ctrl+X"),icon:import_core3._.createIconNoSpan("clipboardCut",this.gos,null),disabled:!g||this.gos.get("suppressCutToClipboard"),action:()=>this.clipboardService.cutToClipboard(void 0,"contextMenu")}}else return null;case"paste":return import_core3.ModuleRegistry.__assertRegistered(import_core3.ModuleNames.ClipboardModule,"Paste from Clipboard",this.context.getGridId())?{name:n("paste","Paste"),shortcut:n("ctrlV","Ctrl+V"),disabled:!0,icon:import_core3._.createIconNoSpan("clipboardPaste",this.gos,null),action:()=>this.clipboardService.pasteFromClipboard()}:null;case"export":const h=[],m=import_core3.ModuleRegistry.__isRegistered(import_core3.ModuleNames.CsvExportModule,this.context.getGridId()),c=import_core3.ModuleRegistry.__isRegistered(import_core3.ModuleNames.ExcelExportModule,this.context.getGridId());return!this.gos.get("suppressCsvExport")&&m&&h.push("csvExport"),!this.gos.get("suppressExcelExport")&&c&&h.push("excelExport"),{name:n("export","Export"),subMenu:h,icon:import_core3._.createIconNoSpan("save",this.gos,null)};case"csvExport":return{name:n("csvExport","CSV Export"),icon:import_core3._.createIconNoSpan("csvExport",this.gos,null),action:()=>this.gridApi.exportDataAsCsv({})};case"excelExport":return{name:n("excelExport","Excel Export"),icon:import_core3._.createIconNoSpan("excelExport",this.gos,null),action:()=>this.gridApi.exportDataAsExcel()};case"separator":return"separator";case"pivotChart":case"chartRange":return(r=this.chartMenuItemMapper.getChartItems(t))!=null?r:null;case"columnFilter":return e?{name:n("columnFilter","Column Filter"),icon:import_core3._.createIconNoSpan("filter",this.gos,null),action:()=>this.menuService.showFilterMenu({column:e,buttonElement:o(),containerType:"columnFilter",positionBy:"button"})}:null;case"columnChooser":return import_core3.ModuleRegistry.__isRegistered(import_core3.ModuleNames.ColumnsToolPanelModule,this.context.getGridId())?{name:n("columnChooser","Choose Columns"),icon:import_core3._.createIconNoSpan("columns",this.gos,null),action:()=>this.menuService.showColumnChooser({column:e,eventSource:o()})}:null;case"sortAscending":return{name:n("sortAscending","Sort Ascending"),icon:import_core3._.createIconNoSpan("sortAscending",this.gos,null),action:()=>this.sortController.setSortForColumn(e,"asc",!1,"columnMenu")};case"sortDescending":return{name:n("sortDescending","Sort Descending"),icon:import_core3._.createIconNoSpan("sortDescending",this.gos,null),action:()=>this.sortController.setSortForColumn(e,"desc",!1,"columnMenu")};case"sortUnSort":return{name:n("sortUnSort","Clear Sort"),icon:import_core3._.createIconNoSpan("sortUnSort",this.gos,null),action:()=>this.sortController.setSortForColumn(e,null,!1,"columnMenu")};default:return console.warn(`AG Grid: unknown menu item type ${t}`),null}}createAggregationSubMenu(t,e){const o=this.localeService.getLocaleTextFunc();let r;if(t.isPrimary())r=t;else{const i=t.getColDef().pivotValueColumn;r=import_core3._.exists(i)?i:void 0}const n=[];if(r){const i=r.isValueActive(),s=e.getFuncNames(r);n.push({name:o("noAggregation","None"),action:()=>{this.columnModel.removeValueColumns([r],"contextMenu"),this.columnModel.setColumnAggFunc(r,void 0,"contextMenu")},checked:!i}),s.forEach(a=>{n.push({name:o(a,e.getDefaultFuncLabel(a)),action:()=>{this.columnModel.setColumnAggFunc(r,a,"contextMenu"),this.columnModel.addValueColumns([r],"contextMenu")},checked:i&&r.getAggFunc()===a})})}return n}};__decorateClass([(0,import_core3.Autowired)("columnModel")],MenuItemMapper.prototype,"columnModel",2),__decorateClass([(0,import_core3.Autowired)("gridApi")],MenuItemMapper.prototype,"gridApi",2),__decorateClass([(0,import_core3.Autowired)("focusService")],MenuItemMapper.prototype,"focusService",2),__decorateClass([(0,import_core3.Autowired)("rowPositionUtils")],MenuItemMapper.prototype,"rowPositionUtils",2),__decorateClass([(0,import_core3.Autowired)("chartMenuItemMapper")],MenuItemMapper.prototype,"chartMenuItemMapper",2),__decorateClass([(0,import_core3.Autowired)("menuService")],MenuItemMapper.prototype,"menuService",2),__decorateClass([(0,import_core3.Autowired)("sortController")],MenuItemMapper.prototype,"sortController",2),__decorateClass([(0,import_core3.Optional)("clipboardService")],MenuItemMapper.prototype,"clipboardService",2),__decorateClass([(0,import_core3.Optional)("aggFuncService")],MenuItemMapper.prototype,"aggFuncService",2),MenuItemMapper=__decorateClass([(0,import_core3.Bean)("menuItemMapper")],MenuItemMapper);var VERSION="31.3.4",import_core4=require("@ag-grid-community/core"),ChartMenuItemMapper=class extends import_core4.BeanStub{getChartItems(t){var e,o;if(!this.chartService){import_core4.ModuleRegistry.__assertRegistered(import_core4.ModuleNames.GridChartsModule,`the Context Menu key "${t}"`,this.context.getGridId());return}const r=t==="pivotChart"?new PivotMenuItemMapper(this.gos,this.chartService,this.localeService):new RangeMenuItemMapper(this.gos,this.chartService,this.localeService),n=this.chartService.isEnterprise();let i=r.getMenuItem();if(i&&i.subMenu&&!n){const a=l=>{var h;return __spreadProps(__spreadValues({},l),{subMenu:(h=l.subMenu)==null?void 0:h.filter(m=>!m._enterprise).map(m=>a(m))})};i=a(i)}const s=(o=(e=this.gos.get("chartToolPanelsDef"))==null?void 0:e.settingsPanel)==null?void 0:o.chartGroupsDef;return s&&(i=ChartMenuItemMapper.filterAndOrderChartMenu(i,s,r.getConfigLookup())),this.cleanInternals(i)}cleanInternals(t){if(!t)return t;const e=o=>{var r;return o==null||delete o._key,o==null||delete o._enterprise,(r=o?.subMenu)==null||r.forEach(n=>e(n)),o};return e(t)}static buildLookup(t){let e={};const o=r=>{e[r._key]=r,r.subMenu&&r.subMenu.forEach(n=>o(n))};return o(t),e}static filterAndOrderChartMenu(t,e,o){var r;const n=this.buildLookup(t);let i=__spreadProps(__spreadValues({},t),{subMenu:[]});if(Object.entries(e).forEach(([s,a])=>{var l,h;const m=o[s];if(m===null)return;if(m==null){import_core4._.warnOnce(`invalid chartGroupsDef config '${s}'`);return}const c=n[m._key];if(c)if(c.subMenu){const d=a.map(u=>{const g=m[u];if(g==null){import_core4._.warnOnce(`invalid chartGroupsDef config '${s}.${u}'`);return}return n[g]}).filter(u=>u!==void 0);d.length>0&&(c.subMenu=d,(l=i.subMenu)==null||l.push(c))}else(h=i.subMenu)==null||h.push(c)}),((r=i.subMenu)==null?void 0:r.length)!=0)return i}};__decorateClass([(0,import_core4.Optional)("chartService")],ChartMenuItemMapper.prototype,"chartService",2),ChartMenuItemMapper=__decorateClass([(0,import_core4.Bean)("chartMenuItemMapper")],ChartMenuItemMapper);var PivotMenuItemMapper=class{constructor(t,e,o){this.gos=t,this.chartService=e,this.localeService=o}getMenuItem(){const t=this.localeService.getLocaleTextFunc(),e=(o,r,n,i,s=!1)=>({name:t(o,r),action:()=>this.chartService.createPivotChart({chartType:n}),_key:i,_enterprise:s});return{name:t("pivotChart","Pivot Chart"),_key:"pivotChart",subMenu:[{_key:"pivotColumnChart",name:t("columnChart","Column"),subMenu:[e("groupedColumn","Grouped&lrm;","groupedColumn","pivotGroupedColumn"),e("stackedColumn","Stacked&lrm;","stackedColumn","pivotStackedColumn"),e("normalizedColumn","100% Stacked&lrm;","normalizedColumn","pivotNormalizedColumn")]},{_key:"pivotBarChart",name:t("barChart","Bar"),subMenu:[e("groupedBar","Grouped&lrm;","groupedBar","pivotGroupedBar"),e("stackedBar","Stacked&lrm;","stackedBar","pivotStackedBar"),e("normalizedBar","100% Stacked&lrm;","normalizedBar","pivotNormalizedBar")]},{_key:"pivotPieChart",name:t("pieChart","Pie"),subMenu:[e("pie","Pie&lrm;","pie","pivotPie"),e("donut","Donut&lrm;","donut","pivotDonut")]},e("line","Line&lrm;","line","pivotLineChart"),{_key:"pivotXYChart",name:t("xyChart","X Y (Scatter)"),subMenu:[e("scatter","Scatter&lrm;","scatter","pivotScatter"),e("bubble","Bubble&lrm;","bubble","pivotBubble")]},{_key:"pivotAreaChart",name:t("areaChart","Area"),subMenu:[e("area","Area&lrm;","area","pivotArea"),e("stackedArea","Stacked&lrm;","stackedArea","pivotStackedArea"),e("normalizedArea","100% Stacked&lrm;","normalizedArea","pivotNormalizedArea")]},{_key:"pivotStatisticalChart",_enterprise:!1,name:t("statisticalChart","Statistical"),subMenu:[e("histogramChart","Histogram&lrm;","histogram","pivotHistogram",!1)]},{_key:"pivotHierarchicalChart",_enterprise:!0,name:t("hierarchicalChart","Hierarchical"),subMenu:[e("treemapChart","Treemap&lrm;","treemap","pivotTreemap",!0),e("sunburstChart","Sunburst&lrm;","sunburst","pivotSunburst",!0)]},{_key:"pivotCombinationChart",name:t("combinationChart","Combination"),subMenu:[e("columnLineCombo","Column & Line&lrm;","columnLineCombo","pivotColumnLineCombo"),e("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","pivotAreaColumnCombo")]}],icon:import_core4._.createIconNoSpan("chart",this.gos,void 0)}}getConfigLookup(){return{columnGroup:{_key:"pivotColumnChart",column:"pivotGroupedColumn",stackedColumn:"pivotStackedColumn",normalizedColumn:"pivotNormalizedColumn"},barGroup:{_key:"pivotBarChart",bar:"pivotGroupedBar",stackedBar:"pivotStackedBar",normalizedBar:"pivotNormalizedBar"},pieGroup:{_key:"pivotPieChart",pie:"pivotPie",donut:"pivotDonut",doughnut:"pivotDonut"},lineGroup:{_key:"pivotLineChart",line:"pivotLineChart"},scatterGroup:{_key:"pivotXYChart",bubble:"pivotBubble",scatter:"pivotScatter"},areaGroup:{_key:"pivotAreaChart",area:"pivotArea",stackedArea:"pivotStackedArea",normalizedArea:"pivotNormalizedArea"},combinationGroup:{_key:"pivotCombinationChart",columnLineCombo:"pivotColumnLineCombo",areaColumnCombo:"pivotAreaColumnCombo",customCombo:null},hierarchicalGroup:{_key:"pivotHierarchicalChart",treemap:"pivotTreemap",sunburst:"pivotSunburst"},statisticalGroup:{_key:"pivotStatisticalChart",histogram:"pivotHistogram",rangeBar:null,rangeArea:null,boxPlot:null},polarGroup:null,specializedGroup:null}}},RangeMenuItemMapper=class{constructor(t,e,o){this.gos=t,this.chartService=e,this.localeService=o}getMenuItem(){const t=this.localeService.getLocaleTextFunc(),e=(o,r,n,i,s=!1)=>({name:t(o,r),action:()=>this.chartService.createChartFromCurrentRange(n),_key:i,_enterprise:s});return{name:t("chartRange","Chart Range"),_key:"chartRange",subMenu:[{name:t("columnChart","Column"),subMenu:[e("groupedColumn","Grouped&lrm;","groupedColumn","rangeGroupedColumn"),e("stackedColumn","Stacked&lrm;","stackedColumn","rangeStackedColumn"),e("normalizedColumn","100% Stacked&lrm;","normalizedColumn","rangeNormalizedColumn")],_key:"rangeColumnChart"},{name:t("barChart","Bar"),subMenu:[e("groupedBar","Grouped&lrm;","groupedBar","rangeGroupedBar"),e("stackedBar","Stacked&lrm;","stackedBar","rangeStackedBar"),e("normalizedBar","100% Stacked&lrm;","normalizedBar","rangeNormalizedBar")],_key:"rangeBarChart"},{name:t("pieChart","Pie"),subMenu:[e("pie","Pie&lrm;","pie","rangePie"),e("donut","Donut&lrm;","donut","rangeDonut")],_key:"rangePieChart"},e("line","Line&lrm;","line","rangeLineChart"),{name:t("xyChart","X Y (Scatter)"),subMenu:[e("scatter","Scatter&lrm;","scatter","rangeScatter"),e("bubble","Bubble&lrm;","bubble","rangeBubble")],_key:"rangeXYChart"},{name:t("areaChart","Area"),subMenu:[e("area","Area&lrm;","area","rangeArea"),e("stackedArea","Stacked&lrm;","stackedArea","rangeStackedArea"),e("normalizedArea","100% Stacked&lrm;","normalizedArea","rangeNormalizedArea")],_key:"rangeAreaChart"},{name:t("polarChart","Polar"),subMenu:[e("radarLine","Radar Line&lrm;","radarLine","rangeRadarLine"),e("radarArea","Radar Area&lrm;","radarArea","rangeRadarArea"),e("nightingale","Nightingale&lrm;","nightingale","rangeNightingale"),e("radialColumn","Radial Column&lrm;","radialColumn","rangeRadialColumn"),e("radialBar","Radial Bar&lrm;","radialBar","rangeRadialBar")],_key:"rangePolarChart",_enterprise:!0},{name:t("statisticalChart","Statistical"),subMenu:[e("boxPlot","Box Plot&lrm;","boxPlot","rangeBoxPlot",!0),e("histogramChart","Histogram&lrm;","histogram","rangeHistogram",!1),e("rangeBar","Range Bar&lrm;","rangeBar","rangeRangeBar",!0),e("rangeArea","Range Area&lrm;","rangeArea","rangeRangeArea",!0)],_key:"rangeStatisticalChart",_enterprise:!1},{name:t("hierarchicalChart","Hierarchical"),subMenu:[e("treemap","Treemap&lrm;","treemap","rangeTreemap"),e("sunburst","Sunburst&lrm;","sunburst","rangeSunburst")],_key:"rangeHierarchicalChart",_enterprise:!0},{name:t("specializedChart","Specialized"),subMenu:[e("heatmap","Heatmap&lrm;","heatmap","rangeHeatmap"),e("waterfall","Waterfall&lrm;","waterfall","rangeWaterfall")],_key:"rangeSpecializedChart",_enterprise:!0},{name:t("combinationChart","Combination"),subMenu:[e("columnLineCombo","Column & Line&lrm;","columnLineCombo","rangeColumnLineCombo"),e("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","rangeAreaColumnCombo")],_key:"rangeCombinationChart"}],icon:import_core4._.createIconNoSpan("chart",this.gos,void 0)}}getConfigLookup(){return{columnGroup:{_key:"rangeColumnChart",column:"rangeGroupedColumn",stackedColumn:"rangeStackedColumn",normalizedColumn:"rangeNormalizedColumn"},barGroup:{_key:"rangeBarChart",bar:"rangeGroupedBar",stackedBar:"rangeStackedBar",normalizedBar:"rangeNormalizedBar"},pieGroup:{_key:"rangePieChart",pie:"rangePie",donut:"rangeDonut",doughnut:"rangeDonut"},lineGroup:{_key:"rangeLineChart",line:"rangeLineChart"},scatterGroup:{_key:"rangeXYChart",bubble:"rangeBubble",scatter:"rangeScatter"},areaGroup:{_key:"rangeAreaChart",area:"rangeArea",stackedArea:"rangeStackedArea",normalizedArea:"rangeNormalizedArea"},polarGroup:{_key:"rangePolarChart",radarLine:"rangeRadarLine",radarArea:"rangeRadarArea",nightingale:"rangeNightingale",radialColumn:"rangeRadialColumn",radialBar:"rangeRadialBar"},statisticalGroup:{_key:"rangeStatisticalChart",boxPlot:"rangeBoxPlot",histogram:"rangeHistogram",rangeBar:"rangeRangeBar",rangeArea:"rangeRangeArea"},hierarchicalGroup:{_key:"rangeHierarchicalChart",treemap:"rangeTreemap",sunburst:"rangeSunburst"},specializedGroup:{_key:"rangeSpecializedChart",heatmap:"rangeHeatmap",waterfall:"rangeWaterfall"},combinationGroup:{_key:"rangeCombinationChart",columnLineCombo:"rangeColumnLineCombo",areaColumnCombo:"rangeAreaColumnCombo",customCombo:null}}}},import_core5=require("@ag-grid-community/core"),import_column_tool_panel=require("@ag-grid-enterprise/column-tool-panel"),ColumnChooserFactory=class extends import_core5.BeanStub{createColumnSelectPanel(t,e,o,r){var n,i;const s=t.createManagedBean(new import_column_tool_panel.PrimaryColsPanel),a=(i=(n=r??e?.getColDef().columnChooserParams)!=null?n:e?.getColDef().columnsMenuParams)!=null?i:{},{contractColumnSelection:l,suppressColumnExpandAll:h,suppressColumnFilter:m,suppressColumnSelectAll:c,suppressSyncLayoutWithGrid:d,columnLayout:u}=a;return s.init(!!o,this.gos.addGridCommonParams({suppressColumnMove:!1,suppressValues:!1,suppressPivots:!1,suppressRowGroups:!1,suppressPivotMode:!1,contractColumnSelection:!!l,suppressColumnExpandAll:!!h,suppressColumnFilter:!!m,suppressColumnSelectAll:!!c,suppressSyncLayoutWithGrid:!!u||!!d,onStateUpdated:()=>{}}),"columnMenu"),u&&s.setColumnLayout(u),s}showColumnChooser({column:t,chooserParams:e,eventSource:o}){this.hideActiveColumnChooser();const r=this.createColumnSelectPanel(this,t,!0,e),n=this.localeService.getLocaleTextFunc(),i=this.columnModel.getAllDisplayedColumns().indexOf(t),s=t?this.focusService.getFocusedHeader():null;this.activeColumnChooserDialog=this.createBean(new import_core5.AgDialog({title:n("chooseColumns","Choose Columns"),component:r,width:300,height:300,resizable:!0,movable:!0,centered:!0,closable:!0,afterGuiAttached:()=>{var a;(a=this.focusService.findNextFocusableElement(r.getGui()))==null||a.focus(),this.dispatchVisibleChangedEvent(!0,t)},closedCallback:a=>{const l=this.activeColumnChooser.getGui();this.destroyBean(this.activeColumnChooser),this.activeColumnChooser=void 0,this.activeColumnChooserDialog=void 0,this.dispatchVisibleChangedEvent(!1,t),t&&this.menuUtils.restoreFocusOnClose({column:t,headerPosition:s,columnIndex:i,eventSource:o},l,a,!0)}})),this.activeColumnChooser=r}hideActiveColumnChooser(){this.activeColumnChooserDialog&&this.destroyBean(this.activeColumnChooserDialog)}dispatchVisibleChangedEvent(t,e){const o={type:import_core5.Events.EVENT_COLUMN_MENU_VISIBLE_CHANGED,visible:t,switchingTab:!1,key:"columnChooser",column:e??null};this.eventService.dispatchEvent(o)}};__decorateClass([(0,import_core5.Autowired)("focusService")],ColumnChooserFactory.prototype,"focusService",2),__decorateClass([(0,import_core5.Autowired)("menuUtils")],ColumnChooserFactory.prototype,"menuUtils",2),__decorateClass([(0,import_core5.Autowired)("columnModel")],ColumnChooserFactory.prototype,"columnModel",2),ColumnChooserFactory=__decorateClass([(0,import_core5.Bean)("columnChooserFactory")],ColumnChooserFactory);var import_core6=require("@ag-grid-community/core"),ColumnMenuFactory=class extends import_core6.BeanStub{createMenu(t,e,o){const r=t.createManagedBean(new import_core6.AgMenuList(0,{column:e??null,node:null,value:null})),n=this.getMenuItems(e),i=this.menuItemMapper.mapWithStockItems(n,e??null,o);return r.addMenuItems(i),r}getMenuItems(t){const e=this.getDefaultMenuOptions(t);let o;const r=t?.getColDef().mainMenuItems;if(Array.isArray(r))o=r;else if(typeof r=="function")o=r(this.gos.addGridCommonParams({column:t,defaultItems:e}));else{const n=this.gos.getCallback("getMainMenuItems");n&&t?o=n({column:t,defaultItems:e}):o=e}return import_core6._.removeRepeatsFromArray(o,ColumnMenuFactory.MENU_ITEM_SEPARATOR),o}getDefaultMenuOptions(t){const e=[],o=this.menuService.isLegacyMenuEnabled();if(!t)return o||e.push("columnChooser"),e.push("resetColumns"),e;const r=!t.getColDef().lockPinned,n=this.columnModel.getRowGroupColumns().length,i=n>0,s=t.isAllowValue(),a=t.isAllowRowGroup(),l=t.isPrimary(),h=this.columnModel.isPivotMode(),m=this.rowModel.getType()==="clientSide",c=this.gos.get("treeData"),d=l&&i&&s||!l;if(!o&&t.isSortable()){const C=t.getSort();C!=="asc"&&e.push("sortAscending"),C!=="desc"&&e.push("sortDescending"),C&&e.push("sortUnSort"),e.push(ColumnMenuFactory.MENU_ITEM_SEPARATOR)}return this.menuService.isFilterMenuItemEnabled(t)&&(e.push("columnFilter"),e.push(ColumnMenuFactory.MENU_ITEM_SEPARATOR)),r&&e.push("pinSubMenu"),d&&e.push("valueAggSubMenu"),(r||d)&&e.push(ColumnMenuFactory.MENU_ITEM_SEPARATOR),e.push("autoSizeThis"),e.push("autoSizeAll"),e.push(ColumnMenuFactory.MENU_ITEM_SEPARATOR),t.getColDef().showRowGroup?e.push("rowUnGroup"):a&&t.isPrimary()&&(t.isRowGroupActive()?this.columnModel.isColumnGroupingLocked(t)||e.push("rowUnGroup"):e.push("rowGroup")),e.push(ColumnMenuFactory.MENU_ITEM_SEPARATOR),o||e.push("columnChooser"),e.push("resetColumns"),m&&(c||n>(h?1:0))&&(e.push("expandAll"),e.push("contractAll")),e}};ColumnMenuFactory.MENU_ITEM_SEPARATOR="separator",__decorateClass([(0,import_core6.Autowired)("menuItemMapper")],ColumnMenuFactory.prototype,"menuItemMapper",2),__decorateClass([(0,import_core6.Autowired)("columnModel")],ColumnMenuFactory.prototype,"columnModel",2),__decorateClass([(0,import_core6.Autowired)("rowModel")],ColumnMenuFactory.prototype,"rowModel",2),__decorateClass([(0,import_core6.Autowired)("filterManager")],ColumnMenuFactory.prototype,"filterManager",2),__decorateClass([(0,import_core6.Autowired)("menuService")],ColumnMenuFactory.prototype,"menuService",2),ColumnMenuFactory=__decorateClass([(0,import_core6.Bean)("columnMenuFactory")],ColumnMenuFactory);var import_core7=require("@ag-grid-community/core"),MenuUtils=class extends import_core7.BeanStub{restoreFocusOnClose(t,e,o,r){const{eventSource:n}=t,i=o instanceof KeyboardEvent;if(!r&&!i||!n)return;const s=this.gos.getDocument(),a=this.gos.getActiveDomElement();!e.contains(a)&&a!==s.body||this.focusHeaderCell(t)}closePopupAndRestoreFocusOnSelect(t,e,o){let r;o&&o.keyboardEvent&&(r=o.keyboardEvent),t(r&&{keyboardEvent:r});const n=this.focusService.getFocusedCell(),i=this.gos.getDocument(),s=this.gos.getActiveDomElement();if(!s||s===i.body)if(n){const{rowIndex:a,rowPinned:l,column:h}=n;this.focusService.setFocusedCell({rowIndex:a,column:h,rowPinned:l,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}else this.focusHeaderCell(e)}onContextMenu(t,e,o){if(!this.gos.get("allowContextMenuWithControlKey")&&t&&(t.ctrlKey||t.metaKey)||(t&&this.blockMiddleClickScrollsIfNeeded(t),this.gos.get("suppressContextMenu")))return;const r=t??e.touches[0];if(o(r)){const n=t??e;n&&n.cancelable&&n.preventDefault()}}focusHeaderCell(t){const{column:e,columnIndex:o,headerPosition:r,eventSource:n}=t;if(this.columnModel.getAllDisplayedColumns().some(s=>s===e)&&n&&import_core7._.isVisible(n)){const s=this.focusService.findTabbableParent(n);s&&(e&&this.headerNavigationService.scrollToColumn(e),s.focus())}else if(r&&o!==-1){const s=this.columnModel.getAllDisplayedColumns(),a=s[o]||import_core7._.last(s);a&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:r.headerRowIndex,column:a}})}}blockMiddleClickScrollsIfNeeded(t){this.gos.get("suppressMiddleClickScrolls")&&t.which===2&&t.preventDefault()}};__decorateClass([(0,import_core7.Autowired)("focusService")],MenuUtils.prototype,"focusService",2),__decorateClass([(0,import_core7.Autowired)("headerNavigationService")],MenuUtils.prototype,"headerNavigationService",2),__decorateClass([(0,import_core7.Autowired)("columnModel")],MenuUtils.prototype,"columnModel",2),MenuUtils=__decorateClass([(0,import_core7.Bean)("menuUtils")],MenuUtils);var MenuModule={version:VERSION,moduleName:import_core8.ModuleNames.MenuModule,beans:[EnterpriseMenuFactory,ContextMenuFactory,MenuItemMapper,ChartMenuItemMapper,ColumnChooserFactory,ColumnMenuFactory,MenuUtils],dependantModules:[import_core9.EnterpriseCoreModule]};


# ====================================================================
# FILE: enterprise-modules/menu/dist/types/src/version.d.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export declare const VERSION = "31.3.4";


# ====================================================================
# FILE: enterprise-modules/menu/src/version.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export const VERSION = '31.3.4';


# ====================================================================
# FILE: enterprise-modules/multi-filter/dist/package/main.cjs.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 562-594 ---
   562|       filterDef,
   563|       () => this.filterManager.getDefaultFloatingFilter(this.params.column)
   564|     )) != null ? _a : "agReadOnlyFloatingFilter";
   565|     return this.userComponentFactory.getFloatingFilterCompDetails(filterDef, params, defaultComponentName);
   566|   }
   567|   parentMultiFilterInstance(cb) {
   568|     this.params.parentFilterInstance((parent) => {
   569|       if (!(parent instanceof MultiFilter)) {
   570|         throw new Error("AG Grid - MultiFloatingFilterComp expects MultiFilter as its parent");
   571|       }
   572|       cb(parent);
   573|     });
   574|   }
   575| };
   576| __decorateClass([
   577|   (0, import_core2.Autowired)("userComponentFactory")
   578| ], MultiFloatingFilterComp.prototype, "userComponentFactory", 2);
   579| __decorateClass([
   580|   (0, import_core2.Autowired)("filterManager")
   581| ], MultiFloatingFilterComp.prototype, "filterManager", 2);
   582| var VERSION = "31.3.4";
   583| var MultiFilterModule = {
   584|   version: VERSION,
   585|   moduleName: import_core3.ModuleNames.MultiFilterModule,
   586|   beans: [],
   587|   userComponents: [
   588|     { componentName: "agMultiColumnFilter", componentClass: MultiFilter },
   589|     { componentName: "agMultiColumnFloatingFilter", componentClass: MultiFloatingFilterComp }
   590|   ],
   591|   dependantModules: [
   592|     import_core4.EnterpriseCoreModule
   593|   ]
   594| };


# ====================================================================
# FILE: enterprise-modules/multi-filter/dist/package/main.cjs.min.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropNames=Object.getOwnPropertyNames,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(n,e,t)=>e in n?__defProp(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,__spreadValues=(n,e)=>{for(var t in e||(e={}))__hasOwnProp.call(e,t)&&__defNormalProp(n,t,e[t]);if(__getOwnPropSymbols)for(var t of __getOwnPropSymbols(e))__propIsEnum.call(e,t)&&__defNormalProp(n,t,e[t]);return n},__spreadProps=(n,e)=>__defProps(n,__getOwnPropDescs(e)),__export=(n,e)=>{for(var t in e)__defProp(n,t,{get:e[t],enumerable:!0})},__copyProps=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of __getOwnPropNames(e))!__hasOwnProp.call(n,s)&&s!==t&&__defProp(n,s,{get:()=>e[s],enumerable:!(i=__getOwnPropDesc(e,s))||i.enumerable});return n},__toCommonJS=n=>__copyProps(__defProp({},"__esModule",{value:!0}),n),__decorateClass=(n,e,t,i)=>{for(var s=i>1?void 0:i?__getOwnPropDesc(e,t):e,r=n.length-1,l;r>=0;r--)(l=n[r])&&(s=(i?l(e,t,s):l(s))||s);return i&&s&&__defProp(e,t,s),s},main_exports={};__export(main_exports,{MultiFilter:()=>MultiFilter,MultiFilterModule:()=>MultiFilterModule}),module.exports=__toCommonJS(main_exports);var import_core3=require("@ag-grid-community/core"),import_core4=require("@ag-grid-enterprise/core"),import_core=require("@ag-grid-community/core"),_MultiFilter=class p extends import_core.TabGuardComp{constructor(){super('<div class="ag-multi-filter ag-menu-list-compact"></div>'),this.filterDefs=[],this.filters=[],this.guiDestroyFuncs=[],this.filterGuis=[],this.activeFilterIndices=[],this.lastActivatedMenuItem=null,this.afterFiltersReadyFuncs=[]}postConstruct(){this.initialiseTabGuard({onFocusIn:e=>this.onFocusIn(e)})}static getFilterDefs(e){const{filters:t}=e;return t&&t.length>0?t:[{filter:"agTextColumnFilter"},{filter:"agSetColumnFilter"}]}init(e){this.params=e,this.filterDefs=p.getFilterDefs(e);const{column:t,filterChangedCallback:i}=e;this.column=t,this.filterChangedCallback=i;const s=[];return this.filterDefs.forEach((r,l)=>{const o=this.createFilter(r,l);o!=null&&s.push(o)}),new import_core.AgPromise(r=>{import_core.AgPromise.all(s).then(l=>{this.filters=l,this.refreshGui("columnMenu").then(()=>{r()})})}).then(()=>{this.afterFiltersReadyFuncs.forEach(r=>r()),this.afterFiltersReadyFuncs.length=0})}refreshGui(e){return e===this.lastOpenedInContainer?import_core.AgPromise.resolve():(this.removeAllChildrenExceptTabGuards(),this.destroyChildren(),import_core.AgPromise.all(this.filters.map((t,i)=>{const s=this.filterDefs[i],r=this.getFilterTitle(t,s);let l;if(s.display==="subMenu"&&e!=="toolPanel")l=this.insertFilterMenu(t,r).then(o=>o.getGui());else if(s.display==="subMenu"||s.display==="accordion"){const o=this.insertFilterGroup(t,r);l=import_core.AgPromise.resolve(o.getGui())}else l=import_core.AgPromise.resolve(t.getGui());return l})).then(t=>{t.forEach((i,s)=>{s>0&&this.appendChild(import_core._.loadTemplate('<div class="ag-filter-separator"></div>')),this.appendChild(i)}),this.filterGuis=t,this.lastOpenedInContainer=e}))}getFilterTitle(e,t){return t.title!=null?t.title:e instanceof import_core.ProvidedFilter?e.getFilterTitle():"Filter"}destroyChildren(){this.guiDestroyFuncs.forEach(e=>e()),this.guiDestroyFuncs.length=0,this.filterGuis.length=0}insertFilterMenu(e,t){const i=this.createBean(new import_core.AgMenuItemComponent);return i.init({menuItemDef:{name:t,subMenu:[],cssClasses:["ag-multi-filter-menu-item"],menuItem:import_core.AgMenuItemRenderer,menuItemParams:{cssClassPrefix:"ag-compact-menu-option",isCompact:!0}},level:0,isAnotherSubMenuOpen:()=>!1,childComponent:e,contextParams:{column:null,node:null,value:null}}).then(()=>{i.setParentComponent(this),this.guiDestroyFuncs.push(()=>this.destroyBean(i)),this.addManagedListener(i,import_core.AgMenuItemComponent.EVENT_MENU_ITEM_ACTIVATED,r=>{this.lastActivatedMenuItem&&this.lastActivatedMenuItem!==r.menuItem&&this.lastActivatedMenuItem.deactivate(),this.lastActivatedMenuItem=r.menuItem});const s=i.getGui();return i.addManagedListener(s,"keydown",r=>{const{key:l}=r;switch(l){case import_core.KeyCode.UP:case import_core.KeyCode.RIGHT:case import_core.KeyCode.DOWN:case import_core.KeyCode.LEFT:r.preventDefault(),l===import_core.KeyCode.RIGHT&&i.openSubMenu(!0);break}}),i.addManagedListener(s,"focusin",()=>i.activate()),i.addManagedListener(s,"focusout",()=>{!i.isSubMenuOpen()&&!i.isSubMenuOpening()&&i.deactivate()}),i})}insertFilterGroup(e,t){const i=this.createBean(new import_core.AgGroupComponent({title:t,cssIdentifier:"multi-filter"}));return this.guiDestroyFuncs.push(()=>this.destroyBean(i)),i.addItem(e.getGui()),i.toggleGroupExpand(!1),e.afterGuiAttached&&i.addManagedListener(i,import_core.AgGroupComponent.EVENT_EXPANDED,()=>e.afterGuiAttached({container:this.lastOpenedInContainer,suppressFocus:!0,hidePopup:this.hidePopup})),i}isFilterActive(){return this.filters.some(e=>e.isFilterActive())}getLastActiveFilterIndex(){return this.activeFilterIndices.length>0?this.activeFilterIndices[this.activeFilterIndices.length-1]:null}doesFilterPass(e,t){let i=!0;return this.filters.forEach(s=>{!i||s===t||!s.isFilterActive()||(i=s.doesFilterPass(e))}),i}getFilterType(){return"multi"}getModelFromUi(){return{filterType:this.getFilterType(),filterModels:this.filters.map(t=>{const i=t;return typeof i.getModelFromUi=="function"?i.getModelFromUi():null})}}getModel(){return this.isFilterActive()?{filterType:this.getFilterType(),filterModels:this.filters.map(t=>t.isFilterActive()?t.getModel():null)}:null}setModel(e){const t=(s,r)=>new import_core.AgPromise(l=>{const o=s.setModel(r);o?o.then(()=>l()):l()});let i=[];return e==null?i=this.filters.map((s,r)=>t(s,null).then(()=>{this.updateActiveList(r)})):this.filters.forEach((s,r)=>{const l=e.filterModels.length>r?e.filterModels[r]:null,o=t(s,l).then(()=>{this.updateActiveList(r)});i.push(o)}),import_core.AgPromise.all(i).then(()=>{})}applyModel(e="api"){let t=!1;return this.filters.forEach(i=>{i instanceof import_core.ProvidedFilter&&(t=i.applyModel(e)||t)}),t}getChildFilterInstance(e){return this.filters[e]}afterGuiAttached(e){let t;e?(this.hidePopup=e.hidePopup,t=this.refreshGui(e.container)):(this.hidePopup=void 0,t=import_core.AgPromise.resolve()),t.then(()=>{const{filterDefs:i}=this;let s=!1;i&&import_core._.forEachReverse(i,(o,u)=>{var a;const c=u===0,h=!c||o.display!=="inline",g=__spreadProps(__spreadValues({},e??{}),{suppressFocus:h}),f=(a=this.filters)==null?void 0:a[u];if(f&&(this.executeFunctionIfExistsOnFilter(f,"afterGuiAttached",g),c&&(s=!0)),c&&h){const d=this.filterGuis[u];d&&(d.focus(),s=!0)}});const r=this.gos.getDocument(),l=this.gos.getActiveDomElement();!s&&(!l||l===r.body||this.getGui().contains(l))&&this.forceFocusOutOfContainer(!0)})}afterGuiDetached(){this.executeFunctionIfExists("afterGuiDetached")}onAnyFilterChanged(){this.executeFunctionIfExists("onAnyFilterChanged")}onNewRowsLoaded(){this.executeFunctionIfExists("onNewRowsLoaded")}destroy(){this.filters.forEach(e=>this.destroyBean(e)),this.filters.length=0,this.destroyChildren(),this.hidePopup=void 0,super.destroy()}executeFunctionIfExists(e,...t){import_core._.forEachReverse(this.filters,i=>{this.executeFunctionIfExistsOnFilter(i,e,t)})}executeFunctionIfExistsOnFilter(e,t,...i){const s=e[t];typeof s=="function"&&s.apply(e,i)}createFilter(e,t){const{filterModifiedCallback:i,doesRowPassOtherFilter:s}=this.params;let r;const l=__spreadProps(__spreadValues({},this.filterManager.createFilterParams(this.column,this.column.getColDef())),{filterModifiedCallback:i,filterChangedCallback:a=>{this.executeWhenAllFiltersReady(()=>this.filterChanged(t,a))},doesRowPassOtherFilter:a=>s(a)&&this.doesFilterPass({node:a,data:a.data},r)}),o=this.userComponentFactory.getFilterDetails(e,l,"agTextColumnFilter");if(!o)return null;const u=o.newAgStackInstance();return u&&u.then(a=>r=a),u}executeWhenAllFiltersReady(e){this.filters&&this.filters.length>0?e():this.afterFiltersReadyFuncs.push(e)}updateActiveList(e){const t=this.filters[e];import_core._.removeFromArray(this.activeFilterIndices,e),t.isFilterActive()&&this.activeFilterIndices.push(e)}filterChanged(e,t){this.updateActiveList(e),this.filterChangedCallback(t);const i=this.filters[e];this.filters.forEach(s=>{s!==i&&typeof s.onAnyFilterChanged=="function"&&s.onAnyFilterChanged()})}onFocusIn(e){this.lastActivatedMenuItem!=null&&!this.lastActivatedMenuItem.getGui().contains(e.target)&&(this.lastActivatedMenuItem.deactivate(),this.lastActivatedMenuItem=null)}getModelAsString(e){var t,i,s,r;if(!this.filters||!((t=e?.filterModels)!=null&&t.length))return"";const l=(i=this.getLastActiveFilterIndex())!=null?i:0,o=this.filters[l];return(r=(s=o.getModelAsString)==null?void 0:s.call(o,e.filterModels[l]))!=null?r:""}};__decorateClass([(0,import_core.Autowired)("filterManager")],_MultiFilter.prototype,"filterManager",2),__decorateClass([(0,import_core.Autowired)("userComponentFactory")],_MultiFilter.prototype,"userComponentFactory",2),__decorateClass([import_core.PostConstruct],_MultiFilter.prototype,"postConstruct",1);var MultiFilter=_MultiFilter,import_core2=require("@ag-grid-community/core"),MultiFloatingFilterComp=class extends import_core2.Component{constructor(){super('<div class="ag-multi-floating-filter ag-floating-filter-input"></div>'),this.floatingFilters=[],this.compDetailsList=[]}init(n){this.params=n;const{compDetailsList:e}=this.getCompDetailsList(n);return this.setParams(e)}setParams(n){const e=[];return n.forEach(t=>{const i=t?.newAgStackInstance();i!=null&&(this.compDetailsList.push(t),e.push(i))}),import_core2.AgPromise.all(e).then(t=>{t.forEach((i,s)=>{this.floatingFilters.push(i);const r=i.getGui();this.appendChild(r),s>0&&import_core2._.setDisplayed(r,!1)})})}onParamsUpdated(n){this.refresh(n)}refresh(n){this.params=n;const{compDetailsList:e,floatingFilterParamsList:t}=this.getCompDetailsList(n);e.length===this.compDetailsList.length&&e.every((s,r)=>!this.filterManager.areFilterCompsDifferent(this.compDetailsList[r],s))?t.forEach((s,r)=>{var l;const o=this.floatingFilters[r];let u=!1;o.refresh&&o.refresh(s)!==null&&(u=!0),u||(l=o.onParamsUpdated)==null||l.call(o,s)}):(import_core2._.clearElement(this.getGui()),this.destroyBeans(this.floatingFilters),this.floatingFilters=[],this.compDetailsList=[],this.setParams(e))}getCompDetailsList(n){const e=[],t=[],i=n.filterParams;return MultiFilter.getFilterDefs(i).forEach((s,r)=>{const l=__spreadProps(__spreadValues({},n),{parentFilterInstance:u=>{this.parentMultiFilterInstance(a=>{const c=a.getChildFilterInstance(r);c!=null&&u(c)})}});import_core2._.mergeDeep(l.filterParams,s.filterParams);const o=this.getCompDetails(s,l);o&&(e.push(o),t.push(l))}),{compDetailsList:e,floatingFilterParamsList:t}}onParentModelChanged(n,e){e&&e.afterFloatingFilter||this.parentMultiFilterInstance(t=>{if(n==null)this.floatingFilters.forEach((i,s)=>{i.onParentModelChanged(null,e),import_core2._.setDisplayed(i.getGui(),s===0)});else{const i=t.getLastActiveFilterIndex();this.floatingFilters.forEach((s,r)=>{const l=n.filterModels.length>r?n.filterModels[r]:null;s.onParentModelChanged(l,e);const o=i==null?r===0:r===i;import_core2._.setDisplayed(s.getGui(),o)})}})}destroy(){this.destroyBeans(this.floatingFilters),this.floatingFilters.length=0,super.destroy()}getCompDetails(n,e){var t;let i=(t=this.userComponentFactory.getDefaultFloatingFilterType(n,()=>this.filterManager.getDefaultFloatingFilter(this.params.column)))!=null?t:"agReadOnlyFloatingFilter";return this.userComponentFactory.getFloatingFilterCompDetails(n,e,i)}parentMultiFilterInstance(n){this.params.parentFilterInstance(e=>{if(!(e instanceof MultiFilter))throw new Error("AG Grid - MultiFloatingFilterComp expects MultiFilter as its parent");n(e)})}};__decorateClass([(0,import_core2.Autowired)("userComponentFactory")],MultiFloatingFilterComp.prototype,"userComponentFactory",2),__decorateClass([(0,import_core2.Autowired)("filterManager")],MultiFloatingFilterComp.prototype,"filterManager",2);var VERSION="31.3.4",MultiFilterModule={version:VERSION,moduleName:import_core3.ModuleNames.MultiFilterModule,beans:[],userComponents:[{componentName:"agMultiColumnFilter",componentClass:MultiFilter},{componentName:"agMultiColumnFloatingFilter",componentClass:MultiFloatingFilterComp}],dependantModules:[import_core4.EnterpriseCoreModule]};


# ====================================================================
# FILE: enterprise-modules/multi-filter/dist/types/src/version.d.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export declare const VERSION = "31.3.4";


# ====================================================================
# FILE: enterprise-modules/multi-filter/src/version.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export const VERSION = '31.3.4';


# ====================================================================
# FILE: enterprise-modules/range-selection/dist/package/main.cjs.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1475-1507 ---
  1475|     const startRow = this.rangeService.getRangeStartRow(cellRange);
  1476|     const endRow = this.rangeService.getRangeEndRow(cellRange);
  1477|     const column = cellRange.columns[0];
  1478|     cellRange.startRow = startRow;
  1479|     cellRange.endRow = endRow;
  1480|     cellRange.startColumn = column;
  1481|   }
  1482| };
  1483| _RangeHandle.TEMPLATE = /* html */
  1484| `<div class="ag-range-handle"></div>`;
  1485| var RangeHandle = _RangeHandle;
  1486| var import_core5 = require("@ag-grid-community/core");
  1487| var SelectionHandleFactory = class extends import_core5.BeanStub {
  1488|   createSelectionHandle(type) {
  1489|     return this.createBean(type === import_core5.SelectionHandleType.RANGE ? new RangeHandle() : new FillHandle());
  1490|   }
  1491| };
  1492| SelectionHandleFactory = __decorateClass([
  1493|   (0, import_core5.Bean)("selectionHandleFactory")
  1494| ], SelectionHandleFactory);
  1495| var VERSION = "31.3.4";
  1496| var RangeSelectionModule = {
  1497|   version: VERSION,
  1498|   moduleName: import_core6.ModuleNames.RangeSelectionModule,
  1499|   beans: [RangeService, SelectionHandleFactory],
  1500|   agStackComponents: [
  1501|     { componentName: "AgFillHandle", componentClass: FillHandle },
  1502|     { componentName: "AgRangeHandle", componentClass: RangeHandle }
  1503|   ],
  1504|   dependantModules: [
  1505|     import_core7.EnterpriseCoreModule
  1506|   ]
  1507| };


# ====================================================================
# FILE: enterprise-modules/range-selection/dist/package/main.cjs.min.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropNames=Object.getOwnPropertyNames,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(t,e,s)=>e in t?__defProp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,__spreadValues=(t,e)=>{for(var s in e||(e={}))__hasOwnProp.call(e,s)&&__defNormalProp(t,s,e[s]);if(__getOwnPropSymbols)for(var s of __getOwnPropSymbols(e))__propIsEnum.call(e,s)&&__defNormalProp(t,s,e[s]);return t},__spreadProps=(t,e)=>__defProps(t,__getOwnPropDescs(e)),__export=(t,e)=>{for(var s in e)__defProp(t,s,{get:e[s],enumerable:!0})},__copyProps=(t,e,s,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of __getOwnPropNames(e))!__hasOwnProp.call(t,o)&&o!==s&&__defProp(t,o,{get:()=>e[o],enumerable:!(n=__getOwnPropDesc(e,o))||n.enumerable});return t},__toCommonJS=t=>__copyProps(__defProp({},"__esModule",{value:!0}),t),__decorateClass=(t,e,s,n)=>{for(var o=n>1?void 0:n?__getOwnPropDesc(e,s):e,i=t.length-1,l;i>=0;i--)(l=t[i])&&(o=(n?l(e,s,o):l(o))||o);return n&&o&&__defProp(e,s,o),o},main_exports={};__export(main_exports,{RangeSelectionModule:()=>RangeSelectionModule}),module.exports=__toCommonJS(main_exports);var import_core6=require("@ag-grid-community/core"),import_core7=require("@ag-grid-enterprise/core"),import_core=require("@ag-grid-community/core"),RangeService=class extends import_core.BeanStub{constructor(){super(...arguments),this.cellRanges=[],this.bodyScrollListener=this.onBodyScroll.bind(this),this.dragging=!1,this.intersectionRange=!1}init(){this.addManagedListener(this.eventService,import_core.Events.EVENT_NEW_COLUMNS_LOADED,()=>this.onColumnsChanged()),this.addManagedListener(this.eventService,import_core.Events.EVENT_COLUMN_VISIBLE,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,import_core.Events.EVENT_COLUMN_VALUE_CHANGED,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,import_core.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.removeAllCellRanges()),this.addManagedListener(this.eventService,import_core.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.removeAllCellRanges()),this.addManagedListener(this.eventService,import_core.Events.EVENT_COLUMN_PIVOT_CHANGED,()=>this.removeAllCellRanges()),this.addManagedListener(this.eventService,import_core.Events.EVENT_COLUMN_GROUP_OPENED,this.refreshLastRangeStart.bind(this)),this.addManagedListener(this.eventService,import_core.Events.EVENT_COLUMN_MOVED,this.refreshLastRangeStart.bind(this)),this.addManagedListener(this.eventService,import_core.Events.EVENT_COLUMN_PINNED,this.refreshLastRangeStart.bind(this)),this.ctrlsService.whenReady(t=>{const e=t.gridBodyCtrl;this.autoScrollService=new import_core.AutoScrollService({scrollContainer:e.getBodyViewportElement(),scrollAxis:"xy",getVerticalPosition:()=>e.getScrollFeature().getVScrollPosition().top,setVerticalPosition:s=>e.getScrollFeature().setVerticalScrollPosition(s),getHorizontalPosition:()=>e.getScrollFeature().getHScrollPosition().left,setHorizontalPosition:s=>e.getScrollFeature().setHorizontalScrollPosition(s),shouldSkipVerticalScroll:()=>!this.gos.isDomLayout("normal"),shouldSkipHorizontalScroll:()=>!e.getScrollFeature().isHorizontalScrollShowing()})})}onColumnsChanged(){this.refreshLastRangeStart();const t=this.columnModel.getAllDisplayedColumns();this.cellRanges.forEach(s=>{const n=s.columns;s.columns=s.columns.filter(i=>i.isVisible()&&t.indexOf(i)!==-1),!import_core._.areEqual(n,s.columns)&&this.dispatchChangedEvent(!1,!0,s.id)});const e=this.cellRanges.length;this.cellRanges=this.cellRanges.filter(s=>s.columns.length>0),e>this.cellRanges.length&&this.dispatchChangedEvent(!1,!0)}refreshLastRangeStart(){const t=import_core._.last(this.cellRanges);t&&this.refreshRangeStart(t)}isContiguousRange(t){const e=t.columns;if(!e.length)return!1;const s=this.columnModel.getAllDisplayedColumns(),n=e.map(o=>s.indexOf(o)).sort((o,i)=>o-i);return import_core._.last(n)-n[0]+1===e.length}getRangeStartRow(t){return t.startRow&&t.endRow?this.rowPositionUtils.before(t.startRow,t.endRow)?t.startRow:t.endRow:{rowIndex:0,rowPinned:this.pinnedRowModel.getPinnedTopRowCount()>0?"top":null}}getRangeEndRow(t){if(t.startRow&&t.endRow)return this.rowPositionUtils.before(t.startRow,t.endRow)?t.endRow:t.startRow;const e=this.pinnedRowModel.getPinnedBottomRowCount();return e>0?{rowIndex:e-1,rowPinned:"bottom"}:{rowIndex:this.rowModel.getRowCount()-1,rowPinned:null}}setRangeToCell(t,e=!1){if(!this.gos.get("enableRangeSelection"))return;const s=this.calculateColumnsBetween(t.column,t.column);if(!s)return;(this.gos.get("suppressMultiRangeSelection")||!e||import_core._.missing(this.cellRanges))&&this.removeAllCellRanges(!0);const o={rowIndex:t.rowIndex,rowPinned:t.rowPinned},i={startRow:o,endRow:o,columns:s,startColumn:t.column};this.cellRanges.push(i),this.setNewestRangeStartCell(t),this.onDragStop(),this.dispatchChangedEvent(!0,!0)}extendLatestRangeToCell(t){if(this.isEmpty()||!this.newestRangeStartCell)return;const e=import_core._.last(this.cellRanges);this.updateRangeEnd(e,t)}updateRangeEnd(t,e,s=!1){const n=e.column,o=this.calculateColumnsBetween(t.startColumn,n);!o||this.isLastCellOfRange(t,e)||(t.columns=o,t.endRow={rowIndex:e.rowIndex,rowPinned:e.rowPinned},s||this.dispatchChangedEvent(!0,!0,t.id))}refreshRangeStart(t){const{startColumn:e,columns:s}=t,n=(a,c)=>{const d=t.columns.filter(g=>g!==a);a?(t.startColumn=a,t.columns=c?[a,...d]:[...d,a]):t.columns=d},{left:o,right:i}=this.getRangeEdgeColumns(t);if(e===s[0]&&e!==o){n(o,!0);return}if(e===import_core._.last(s)&&e===i){n(i,!1);return}}getRangeEdgeColumns(t){const e=this.columnModel.getAllDisplayedColumns(),s=t.columns.map(n=>e.indexOf(n)).filter(n=>n>-1).sort((n,o)=>n-o);return{left:e[s[0]],right:e[import_core._.last(s)]}}extendLatestRangeInDirection(t){if(this.isEmpty()||!this.newestRangeStartCell)return;const e=t.key,s=t.ctrlKey||t.metaKey,n=import_core._.last(this.cellRanges),o=this.newestRangeStartCell,i=n.columns[0],l=import_core._.last(n.columns),r=n.endRow.rowIndex,a=n.endRow.rowPinned,d={column:o.column===i?l:i,rowIndex:r,rowPinned:a},g=this.cellNavigationService.getNextCellToFocus(e,d,s);if(g)return this.setCellRange({rowStartIndex:o.rowIndex,rowStartPinned:o.rowPinned,rowEndIndex:g.rowIndex,rowEndPinned:g.rowPinned,columnStart:o.column,columnEnd:g.column}),g}setCellRange(t){this.gos.get("enableRangeSelection")&&(this.removeAllCellRanges(!0),this.addCellRange(t))}setCellRanges(t){import_core._.shallowCompare(this.cellRanges,t)||(this.removeAllCellRanges(!0),t.forEach(e=>{e.columns&&e.startRow&&this.setNewestRangeStartCell({rowIndex:e.startRow.rowIndex,rowPinned:e.startRow.rowPinned,column:e.columns[0]}),this.cellRanges.push(e)}),this.dispatchChangedEvent(!1,!0))}setNewestRangeStartCell(t){this.newestRangeStartCell=t}clearCellRangeCellValues(t){let{cellRanges:e}=t;const{cellEventSource:s="rangeService",dispatchWrapperEvents:n,wrapperEventSource:o="deleteKey"}=t;if(n){const i={type:import_core.Events.EVENT_RANGE_DELETE_START,source:o};this.eventService.dispatchEvent(i)}if(e||(e=this.cellRanges),e.forEach(i=>{this.forEachRowInRange(i,l=>{var r;const a=this.rowPositionUtils.getRowNode(l);if(a)for(let c=0;c<i.columns.length;c++){const d=this.columnModel.getGridColumn(i.columns[c]);if(!d||!d.isCellEditable(a))continue;const g=(r=this.valueService.parseValue(d,a,"",a.getValueFromValueService(d)))!=null?r:null;a.setDataValue(d,g,s)}})}),n){const i={type:import_core.Events.EVENT_RANGE_DELETE_END,source:o};this.eventService.dispatchEvent(i)}}createCellRangeFromCellRangeParams(t){return this.createPartialCellRangeFromRangeParams(t,!1)}createPartialCellRangeFromRangeParams(t,e){let s,n=!1;if(t.columns)s=t.columns.map(l=>this.columnModel.getColumnWithValidation(l)).filter(l=>l);else{const l=this.columnModel.getColumnWithValidation(t.columnStart),r=this.columnModel.getColumnWithValidation(t.columnEnd);if(!l||!r)return;s=this.calculateColumnsBetween(l,r),s&&s.length&&(n=s[0]!==l)}if(!s||!e&&s.length===0)return;const o=t.rowStartIndex!=null?{rowIndex:t.rowStartIndex,rowPinned:t.rowStartPinned||null}:void 0,i=t.rowEndIndex!=null?{rowIndex:t.rowEndIndex,rowPinned:t.rowEndPinned||null}:void 0;return{startRow:o,endRow:i,columns:s,startColumn:n?import_core._.last(s):s[0]}}addCellRange(t){if(!this.gos.get("enableRangeSelection"))return;const e=this.createCellRangeFromCellRangeParams(t);e&&(e.startRow&&this.setNewestRangeStartCell({rowIndex:e.startRow.rowIndex,rowPinned:e.startRow.rowPinned,column:e.startColumn}),this.cellRanges.push(e),this.dispatchChangedEvent(!1,!0,e.id))}getCellRanges(){return this.cellRanges}isEmpty(){return this.cellRanges.length===0}isMoreThanOneCell(){const t=this.cellRanges.length;if(t===0)return!1;if(t>1)return!0;const e=this.cellRanges[0],s=this.getRangeStartRow(e),n=this.getRangeEndRow(e);return s.rowPinned!==n.rowPinned||s.rowIndex!==n.rowIndex||e.columns.length!==1}areAllRangesAbleToMerge(){const t=new Map;if(this.cellRanges.length<=1)return!0;this.cellRanges.forEach(n=>{this.forEachRowInRange(n,o=>{const i=`${o.rowPinned||"normal"}_${o.rowIndex}`,l=t.get(i),r=n.columns.map(a=>a.getId());if(l){const a=r.filter(c=>l.indexOf(c)===-1);l.push(...a)}else t.set(i,r)})});let s;for(const n of t.values()){const o=n.sort().join();if(s===void 0){s=o;continue}if(s!==o)return!1}return!0}forEachRowInRange(t,e){const s=this.getRangeStartRow(t),n=this.getRangeEndRow(t);let o=s;for(;o&&(e(o),!this.rowPositionUtils.sameRow(o,n));)o=this.cellNavigationService.getRowBelow(o)}removeAllCellRanges(t){this.isEmpty()||(this.onDragStop(),this.cellRanges.length=0,t||this.dispatchChangedEvent(!1,!0))}onBodyScroll(){this.dragging&&this.lastMouseEvent&&this.onDragging(this.lastMouseEvent)}isCellInAnyRange(t){return this.getCellRangeCount(t)>0}isCellInSpecificRange(t,e){const s=e.columns!==null&&import_core._.includes(e.columns,t.column),n=this.isRowInRange(t.rowIndex,t.rowPinned,e);return s&&n}isLastCellOfRange(t,e){const{startRow:s,endRow:n}=t,o=this.rowPositionUtils.before(s,n)?n:s,i=e.rowIndex===o.rowIndex&&e.rowPinned===o.rowPinned,l=t.columns[0],r=import_core._.last(t.columns),a=t.startColumn===l?r:l;return e.column===a&&i}isBottomRightCell(t,e){const s=this.columnModel.getAllDisplayedColumns(),n=t.columns.map(c=>s.indexOf(c)).sort((c,d)=>c-d),{startRow:o,endRow:i}=t,l=this.rowPositionUtils.before(o,i)?i:o,r=s.indexOf(e.column)===import_core._.last(n),a=e.rowIndex===l.rowIndex&&import_core._.makeNull(e.rowPinned)===import_core._.makeNull(l.rowPinned);return r&&a}getCellRangeCount(t){return this.isEmpty()?0:this.cellRanges.filter(e=>this.isCellInSpecificRange(t,e)).length}isRowInRange(t,e,s){const n=this.getRangeStartRow(s),o=this.getRangeEndRow(s),i={rowIndex:t,rowPinned:e||null},l=i.rowIndex===n.rowIndex&&i.rowPinned==n.rowPinned,r=i.rowIndex===o.rowIndex&&i.rowPinned==o.rowPinned;if(l||r)return!0;const a=!this.rowPositionUtils.before(i,n),c=this.rowPositionUtils.before(i,o);return a&&c}getDraggingRange(){return this.draggingRange}onDragStart(t){if(!this.gos.get("enableRangeSelection"))return;const{ctrlKey:e,metaKey:s,shiftKey:n}=t,o=e||s,l=!this.gos.get("suppressMultiRangeSelection")?o:!1,r=n&&import_core._.existsAndNotEmpty(this.cellRanges);!l&&(!r||import_core._.exists(import_core._.last(this.cellRanges).type))&&this.removeAllCellRanges(!0);const a=this.dragService.getStartTarget();if(a&&this.updateValuesOnMove(a),!!this.lastCellHovered){if(this.dragging=!0,this.lastMouseEvent=t,this.intersectionRange=l&&this.getCellRangeCount(this.lastCellHovered)>1,r||this.setNewestRangeStartCell(this.lastCellHovered),this.cellRanges.length>0)this.draggingRange=import_core._.last(this.cellRanges);else{const c={rowIndex:this.lastCellHovered.rowIndex,rowPinned:this.lastCellHovered.rowPinned};this.draggingRange={startRow:c,endRow:c,columns:[this.lastCellHovered.column],startColumn:this.newestRangeStartCell.column},this.cellRanges.push(this.draggingRange)}this.ctrlsService.getGridBodyCtrl().addScrollEventListener(this.bodyScrollListener),this.dispatchChangedEvent(!0,!1,this.draggingRange.id)}}intersectLastRange(t){if(t&&this.dragging||this.gos.get("suppressMultiRangeSelection")||this.isEmpty())return;const e=this.rowPositionUtils,s=import_core._.last(this.cellRanges),n=this.getRangeStartRow(s),o=this.getRangeEndRow(s),i=[];this.cellRanges.slice(0,-1).forEach(l=>{const r=this.getRangeStartRow(l),a=this.getRangeEndRow(l),c=l.columns,d=c.filter(h=>s.columns.indexOf(h)===-1);if(d.length===c.length){i.push(l);return}if(e.before(o,r)||e.before(a,n)){i.push(l);return}const g=i.length;if(e.before(r,n)){const h={columns:[...c],startColumn:s.startColumn,startRow:__spreadValues({},r),endRow:this.cellNavigationService.getRowAbove(n)};i.push(h)}if(d.length>0){const h={columns:d,startColumn:import_core._.includes(d,s.startColumn)?s.startColumn:d[0],startRow:this.rowMax([__spreadValues({},n),__spreadValues({},r)]),endRow:this.rowMin([__spreadValues({},o),__spreadValues({},a)])};i.push(h)}e.before(o,a)&&i.push({columns:[...c],startColumn:s.startColumn,startRow:this.cellNavigationService.getRowBelow(o),endRow:__spreadValues({},a)}),i.length-g===1&&(i[i.length-1].id=l.id)}),this.cellRanges=i,t&&this.dispatchChangedEvent(!1,!0)}rowMax(t){let e;return t.forEach(s=>{(e===void 0||this.rowPositionUtils.before(e,s))&&(e=s)}),e}rowMin(t){let e;return t.forEach(s=>{(e===void 0||this.rowPositionUtils.before(s,e))&&(e=s)}),e}updateValuesOnMove(t){const e=import_core._.getCtrlForEventTarget(this.gos,t,import_core.CellCtrl.DOM_DATA_KEY_CELL_CTRL),s=e?.getCellPosition();this.cellHasChanged=!1,!(!s||this.lastCellHovered&&this.cellPositionUtils.equals(s,this.lastCellHovered))&&(this.lastCellHovered&&(this.cellHasChanged=!0),this.lastCellHovered=s)}onDragging(t){if(!this.dragging||!t)return;this.updateValuesOnMove(t.target),this.lastMouseEvent=t;const e=this.lastCellHovered,s=i=>e&&e.rowPinned===i&&this.newestRangeStartCell.rowPinned===i,n=s("top")||s("bottom");if(this.autoScrollService.check(t,n),!this.cellHasChanged)return;const o=this.calculateColumnsBetween(this.newestRangeStartCell.column,e.column);o&&(this.draggingRange.endRow={rowIndex:e.rowIndex,rowPinned:e.rowPinned},this.draggingRange.columns=o,this.dispatchChangedEvent(!1,!1,this.draggingRange.id))}onDragStop(){if(!this.dragging)return;const{id:t}=this.draggingRange;this.autoScrollService.ensureCleared(),this.ctrlsService.getGridBodyCtrl().removeScrollEventListener(this.bodyScrollListener),this.lastMouseEvent=null,this.dragging=!1,this.draggingRange=void 0,this.lastCellHovered=void 0,this.intersectionRange&&(this.intersectionRange=!1,this.intersectLastRange()),this.dispatchChangedEvent(!1,!0,t)}dispatchChangedEvent(t,e,s){const n={type:import_core.Events.EVENT_RANGE_SELECTION_CHANGED,started:t,finished:e,id:s};this.eventService.dispatchEvent(n)}calculateColumnsBetween(t,e){const s=this.columnModel.getAllDisplayedColumns(),n=t===e,o=s.indexOf(t);if(o<0){console.warn(`AG Grid: column ${t.getId()} is not visible`);return}const i=n?o:s.indexOf(e);if(i<0){console.warn(`AG Grid: column ${e.getId()} is not visible`);return}if(n)return[t];const l=Math.min(o,i),r=l===o?i:o,a=[];for(let c=l;c<=r;c++)a.push(s[c]);return a}};__decorateClass([(0,import_core.Autowired)("rowModel")],RangeService.prototype,"rowModel",2),__decorateClass([(0,import_core.Autowired)("dragService")],RangeService.prototype,"dragService",2),__decorateClass([(0,import_core.Autowired)("columnModel")],RangeService.prototype,"columnModel",2),__decorateClass([(0,import_core.Autowired)("cellNavigationService")],RangeService.prototype,"cellNavigationService",2),__decorateClass([(0,import_core.Autowired)("pinnedRowModel")],RangeService.prototype,"pinnedRowModel",2),__decorateClass([(0,import_core.Autowired)("rowPositionUtils")],RangeService.prototype,"rowPositionUtils",2),__decorateClass([(0,import_core.Autowired)("cellPositionUtils")],RangeService.prototype,"cellPositionUtils",2),__decorateClass([(0,import_core.Autowired)("ctrlsService")],RangeService.prototype,"ctrlsService",2),__decorateClass([(0,import_core.Autowired)("valueService")],RangeService.prototype,"valueService",2),__decorateClass([import_core.PostConstruct],RangeService.prototype,"init",1),RangeService=__decorateClass([(0,import_core.Bean)("rangeService")],RangeService);var import_core3=require("@ag-grid-community/core"),import_core2=require("@ag-grid-community/core"),AbstractSelectionHandle=class extends import_core2.Component{constructor(){super(...arguments),this.changedCalculatedValues=!1,this.dragging=!1,this.shouldDestroyOnEndDragging=!1}init(){this.dragService.addDragSource({dragStartPixels:0,eElement:this.getGui(),onDragStart:this.onDragStart.bind(this),onDragging:t=>{this.dragging=!0,this.rangeService.autoScrollService.check(t),this.changedCalculatedValues&&(this.onDrag(t),this.changedCalculatedValues=!1)},onDragStop:t=>{this.dragging=!1,this.onDragEnd(t),this.clearValues(),this.rangeService.autoScrollService.ensureCleared(),document.body.classList.remove(this.getDraggingCssClass()),this.shouldDestroyOnEndDragging&&this.destroy()}}),this.addManagedListener(this.getGui(),"mousedown",this.preventRangeExtension.bind(this))}isDragging(){return this.dragging}getCellCtrl(){return this.cellCtrl}setCellCtrl(t){this.cellCtrl=t}getCellRange(){return this.cellRange}setCellRange(t){this.cellRange=t}getRangeStartRow(){return this.rangeStartRow}setRangeStartRow(t){this.rangeStartRow=t}getRangeEndRow(){return this.rangeEndRow}setRangeEndRow(t){this.rangeEndRow=t}getLastCellHovered(){return this.lastCellHovered}preventRangeExtension(t){t.stopPropagation()}onDragStart(t){this.cellHoverListener=this.addManagedListener(this.ctrlsService.get("gridCtrl").getGui(),"mousemove",this.updateValuesOnMove.bind(this)),document.body.classList.add(this.getDraggingCssClass())}getDraggingCssClass(){return`ag-dragging-${this.type===import_core2.SelectionHandleType.FILL?"fill":"range"}-handle`}updateValuesOnMove(t){const e=this.mouseEventService.getCellPositionForEvent(t);!e||this.lastCellHovered&&this.cellPositionUtils.equals(e,this.lastCellHovered)||(this.lastCellHovered=e,this.changedCalculatedValues=!0)}getType(){return this.type}refresh(t){const e=this.getCellCtrl(),s=this.getGui(),n=import_core2._.last(this.rangeService.getCellRanges()),o=n.startRow,i=n.endRow;if(o&&i&&(this.rowPositionUtils.before(i,o)?(this.setRangeStartRow(i),this.setRangeEndRow(o)):(this.setRangeStartRow(o),this.setRangeEndRow(i))),e!==t||!import_core2._.isVisible(s)){this.setCellCtrl(t);const l=t.getComp().getParentOfValue();l&&l.appendChild(s)}this.setCellRange(n)}clearValues(){this.lastCellHovered=void 0,this.removeListeners()}removeListeners(){this.cellHoverListener&&(this.cellHoverListener(),this.cellHoverListener=void 0)}destroy(){if(!this.shouldDestroyOnEndDragging&&this.isDragging()){import_core2._.setDisplayed(this.getGui(),!1),this.shouldDestroyOnEndDragging=!0;return}this.shouldDestroyOnEndDragging=!1,super.destroy(),this.removeListeners();const t=this.getGui();t.parentElement&&t.parentElement.removeChild(t)}};__decorateClass([(0,import_core2.Autowired)("rowRenderer")],AbstractSelectionHandle.prototype,"rowRenderer",2),__decorateClass([(0,import_core2.Autowired)("dragService")],AbstractSelectionHandle.prototype,"dragService",2),__decorateClass([(0,import_core2.Autowired)("rangeService")],AbstractSelectionHandle.prototype,"rangeService",2),__decorateClass([(0,import_core2.Autowired)("mouseEventService")],AbstractSelectionHandle.prototype,"mouseEventService",2),__decorateClass([(0,import_core2.Autowired)("columnModel")],AbstractSelectionHandle.prototype,"columnModel",2),__decorateClass([(0,import_core2.Autowired)("cellNavigationService")],AbstractSelectionHandle.prototype,"cellNavigationService",2),__decorateClass([(0,import_core2.Autowired)("navigationService")],AbstractSelectionHandle.prototype,"navigationService",2),__decorateClass([(0,import_core2.Autowired)("rowPositionUtils")],AbstractSelectionHandle.prototype,"rowPositionUtils",2),__decorateClass([(0,import_core2.Autowired)("cellPositionUtils")],AbstractSelectionHandle.prototype,"cellPositionUtils",2),__decorateClass([(0,import_core2.Autowired)("ctrlsService")],AbstractSelectionHandle.prototype,"ctrlsService",2),__decorateClass([import_core2.PostConstruct],AbstractSelectionHandle.prototype,"init",1);function findLineByLeastSquares(t){const e=t.length;let s=0;if(e<=1)return t;for(let g=0;g<t.length;g++){const h=t[g],m=h.toString().split("e-");if(m.length>1){s=Math.max(s,parseInt(m[1],10));continue}Math.floor(h)!==h&&(s=Math.max(s,h.toString().split(".")[1].length))}let n=0,o=0,i=0,l=0,r=0;for(let g=0;g<e;g++)r=t[g],n+=g,o+=r,l+=g*g,i+=g*r;const a=(e*i-n*o)/(e*l-n*n),c=o/e-a*n/e,d=[];for(let g=0;g<=e;g++)d.push(parseFloat((g*a+c).toFixed(s)));return d}var _FillHandle=class V extends AbstractSelectionHandle{constructor(){super(V.TEMPLATE),this.markedCells=[],this.cellValues=[],this.isUp=!1,this.isLeft=!1,this.isReduce=!1,this.type=import_core3.SelectionHandleType.FILL}updateValuesOnMove(e){super.updateValuesOnMove(e),this.initialXY||(this.initialXY=this.mouseEventService.getNormalisedPosition(e));const{x:s,y:n}=this.initialXY,{x:o,y:i}=this.mouseEventService.getNormalisedPosition(e),l=Math.abs(s-o),r=Math.abs(n-i),a=this.getFillHandleDirection();let c;a==="xy"?c=l>r?"x":"y":c=a,c!==this.dragAxis&&(this.dragAxis=c,this.changedCalculatedValues=!0)}onDrag(e){if(!this.initialPosition){const n=this.getCellCtrl();if(!n)return;this.initialPosition=n.getCellPosition()}const s=this.getLastCellHovered();s&&this.markPathFrom(this.initialPosition,s)}onDragEnd(e){if(this.initialXY=null,!this.markedCells.length)return;const s=this.dragAxis==="x",n=this.getCellRange(),o=n.columns.length,i=this.getRangeStartRow(),l=this.getRangeEndRow();let r;if(!this.isUp&&!this.isLeft)r=this.rangeService.createCellRangeFromCellRangeParams({rowStartIndex:i.rowIndex,rowStartPinned:i.rowPinned,columnStart:n.columns[0],rowEndIndex:s?l.rowIndex:this.lastCellMarked.rowIndex,rowEndPinned:s?l.rowPinned:this.lastCellMarked.rowPinned,columnEnd:s?this.lastCellMarked.column:n.columns[o-1]});else{const a=s?i:this.lastCellMarked;r=this.rangeService.createCellRangeFromCellRangeParams({rowStartIndex:a.rowIndex,rowStartPinned:a.rowPinned,columnStart:s?this.lastCellMarked.column:n.columns[0],rowEndIndex:l.rowIndex,rowEndPinned:l.rowPinned,columnEnd:n.columns[o-1]})}r&&(this.raiseFillStartEvent(),this.handleValueChanged(n,r,e),this.rangeService.setCellRanges([r]),this.raiseFillEndEvent(n,r))}getFillHandleDirection(){const e=this.gos.get("fillHandleDirection");return e?e!=="x"&&e!=="y"&&e!=="xy"?(import_core3._.warnOnce("valid values for fillHandleDirection are 'x', 'y' and 'xy'. Default to 'xy'."),"xy"):e:"xy"}raiseFillStartEvent(){const e={type:import_core3.Events.EVENT_FILL_START};this.eventService.dispatchEvent(e)}raiseFillEndEvent(e,s){const n={type:import_core3.Events.EVENT_FILL_END,initialRange:e,finalRange:s};this.eventService.dispatchEvent(n)}handleValueChanged(e,s,n){const o=this.rangeService.getRangeEndRow(e),i=this.rangeService.getRangeStartRow(e),l=this.rangeService.getRangeEndRow(s),r=this.rangeService.getRangeStartRow(s),a=this.dragAxis==="y";if(this.isReduce&&!this.gos.get("suppressClearOnFillReduction")){const v=a?e.columns:e.columns.filter(w=>s.columns.indexOf(w)<0),f=a?this.cellNavigationService.getRowBelow(l):r;f&&this.clearCellsInRange(f,o,v);return}const c=[],d=[],g=[],h=[];let m=!0,R=0;const u=()=>{c.length=0,d.length=0,g.length=0,h.length=0,R=0},p=(v,f)=>{let w=this.isUp?o:i,x=!1;for(a&&(m=!0,u());!x&&w;){const S=this.rowPositionUtils.getRowNode(w);if(!S)break;a&&v?P(c,v,S,()=>!this.rowPositionUtils.sameRow(w,this.isUp?i:o)):f&&(m=!0,u(),f.forEach(E=>P(c,E,S,()=>E!==(this.isLeft?e.columns[0]:import_core3._.last(e.columns))))),x=this.rowPositionUtils.sameRow(w,this.isUp?r:l),w=this.isUp?this.cellNavigationService.getRowAbove(w):this.cellNavigationService.getRowBelow(w)}},P=(v,f,w,x)=>{var S,E;let C,_=!1;if(m)C=this.valueService.getValue(f,w),d.push(C),g.push(this.valueService.getValue(f,w,void 0,!0)),h.push(this.valueService.formatValue(f,w,C)),m=x();else{const{value:O,fromUserFunction:I,sourceCol:y,sourceRowNode:N}=this.processValues({event:n,values:v,initialValues:d,initialNonAggregatedValues:g,initialFormattedValues:h,col:f,rowNode:w,idx:R++});if(C=O,f.isCellEditable(w)){const M=this.valueService.getValue(f,w);I||(y&&((S=y.getColDef())==null?void 0:S.useValueFormatterForExport)!==!1&&(C=(E=this.valueService.formatValue(y,N,C))!=null?E:C),f.getColDef().useValueParserForImport!==!1&&(C=this.valueService.parseValue(f,w,y?C:import_core3._.toStringOrNull(C),M))),!I||M!==C?w.setDataValue(f,C,"rangeService"):_=!0}}_||v.push({value:C,column:f,rowNode:w})};if(a)e.columns.forEach(v=>{p(v)});else{const v=this.isLeft?[...s.columns].reverse():s.columns;p(void 0,v)}}clearCellsInRange(e,s,n){const o={startRow:e,endRow:s,columns:n,startColumn:n[0]};this.rangeService.clearCellRangeCellValues({cellRanges:[o]})}processValues(e){const{event:s,values:n,initialValues:o,initialNonAggregatedValues:i,initialFormattedValues:l,col:r,rowNode:a,idx:c}=e,d=this.gos.getCallback("fillOperation"),g=this.dragAxis==="y";let h;if(g?h=this.isUp?"up":"down":h=this.isLeft?"left":"right",d){const R={event:s,values:n.map(({value:p})=>p),initialValues:o,initialNonAggregatedValues:i,initialFormattedValues:l,currentIndex:c,currentCellValue:this.valueService.getValue(r,a),direction:h,column:r,rowNode:a},u=d(R);if(u!==!1)return{value:u,fromUserFunction:!0}}const m=!n.some(({value:R})=>{const u=parseFloat(R);return isNaN(u)||u.toString()!==R.toString()});if(s.altKey||!m){if(m&&o.length===1){const P=this.isUp||this.isLeft?-1:1;return{value:parseFloat(import_core3._.last(n).value)+1*P,fromUserFunction:!1}}const{value:R,column:u,rowNode:p}=n[c%n.length];return{value:R,fromUserFunction:!1,sourceCol:u,sourceRowNode:p}}return{value:import_core3._.last(findLineByLeastSquares(n.map(({value:R})=>Number(R)))),fromUserFunction:!1}}clearValues(){this.clearMarkedPath(),this.clearCellValues(),this.lastCellMarked=void 0,super.clearValues()}clearMarkedPath(){this.markedCells.forEach(e=>{if(!e.isAlive())return;const s=e.getComp();s.addOrRemoveCssClass("ag-selection-fill-top",!1),s.addOrRemoveCssClass("ag-selection-fill-right",!1),s.addOrRemoveCssClass("ag-selection-fill-bottom",!1),s.addOrRemoveCssClass("ag-selection-fill-left",!1)}),this.markedCells.length=0,this.isUp=!1,this.isLeft=!1,this.isReduce=!1}clearCellValues(){this.cellValues.length=0}markPathFrom(e,s){if(this.clearMarkedPath(),this.clearCellValues(),this.dragAxis==="y"){if(this.rowPositionUtils.sameRow(s,e))return;const n=this.rowPositionUtils.before(s,e),o=this.getRangeStartRow(),i=this.getRangeEndRow();n&&(s.rowPinned==o.rowPinned&&s.rowIndex>=o.rowIndex||o.rowPinned!=i.rowPinned&&s.rowPinned==i.rowPinned&&s.rowIndex<=i.rowIndex)?(this.reduceVertical(e,s),this.isReduce=!0):(this.extendVertical(e,s,n),this.isReduce=!1)}else{const n=e.column,o=s.column;if(n===o)return;const i=this.columnModel.getAllDisplayedColumns(),l=i.indexOf(n),r=i.indexOf(o);r<=l&&r>=i.indexOf(this.getCellRange().columns[0])?(this.reduceHorizontal(e,s),this.isReduce=!0):(this.extendHorizontal(e,s,r<l),this.isReduce=!1)}this.lastCellMarked=s}extendVertical(e,s,n){const{navigationService:o,rangeService:i}=this;let l=e;do{const r=this.getCellRange(),a=r.columns.length;for(let c=0;c<a;c++){const d=r.columns[c],g={rowIndex:l.rowIndex,rowPinned:l.rowPinned},h=__spreadProps(__spreadValues({},g),{column:d}),m=i.isCellInSpecificRange(h,r),R=this.rowPositionUtils.sameRow(l,e);if(n&&(this.isUp=!0),!R){const u=o.getCellByPosition(h);if(u){this.markedCells.push(u);const p=u.getComp();m||(p.addOrRemoveCssClass("ag-selection-fill-left",c===0),p.addOrRemoveCssClass("ag-selection-fill-right",c===a-1)),p.addOrRemoveCssClass(n?"ag-selection-fill-top":"ag-selection-fill-bottom",this.rowPositionUtils.sameRow(l,s))}}}if(this.rowPositionUtils.sameRow(l,s))break}while(l=n?this.cellNavigationService.getRowAbove(l):this.cellNavigationService.getRowBelow(l))}reduceVertical(e,s){let n=e;do{const o=this.getCellRange(),i=o.columns.length,l=this.rowPositionUtils.sameRow(n,s);for(let r=0;r<i;r++){const a={rowIndex:n.rowIndex,rowPinned:n.rowPinned},c=__spreadProps(__spreadValues({},a),{column:o.columns[r]}),d=this.navigationService.getCellByPosition(c);d&&(this.markedCells.push(d),d.getComp().addOrRemoveCssClass("ag-selection-fill-bottom",this.rowPositionUtils.sameRow(n,s)))}if(l)break}while(n=this.cellNavigationService.getRowAbove(n))}extendHorizontal(e,s,n){const o=this.columnModel.getAllDisplayedColumns(),i=o.indexOf(n?s.column:e.column),l=o.indexOf(n?this.getCellRange().columns[0]:s.column),r=n?0:1,a=o.slice(i+r,l+r),c=this.getRangeStartRow(),d=this.getRangeEndRow();a.forEach(g=>{let h=c,m=!1;do{m=this.rowPositionUtils.sameRow(h,d);const R=this.navigationService.getCellByPosition({rowIndex:h.rowIndex,rowPinned:h.rowPinned,column:g});if(R){this.markedCells.push(R);const u=R.getComp();u.addOrRemoveCssClass("ag-selection-fill-top",this.rowPositionUtils.sameRow(h,c)),u.addOrRemoveCssClass("ag-selection-fill-bottom",this.rowPositionUtils.sameRow(h,d)),n?(this.isLeft=!0,u.addOrRemoveCssClass("ag-selection-fill-left",g===a[0])):u.addOrRemoveCssClass("ag-selection-fill-right",g===import_core3._.last(a))}h=this.cellNavigationService.getRowBelow(h)}while(!m)})}reduceHorizontal(e,s){const n=this.columnModel.getAllDisplayedColumns(),o=n.indexOf(s.column),i=n.indexOf(e.column),l=n.slice(o,i),r=this.getRangeStartRow(),a=this.getRangeEndRow();l.forEach(c=>{let d=r,g=!1;do{g=this.rowPositionUtils.sameRow(d,a);const h=this.navigationService.getCellByPosition({rowIndex:d.rowIndex,rowPinned:d.rowPinned,column:c});h&&(this.markedCells.push(h),h.getComp().addOrRemoveCssClass("ag-selection-fill-right",c===l[0])),d=this.cellNavigationService.getRowBelow(d)}while(!g)})}refresh(e){const s=this.rangeService.getCellRanges()[0];if(!s.startRow||!s.endRow){this.destroy();return}super.refresh(e)}};_FillHandle.TEMPLATE='<div class="ag-fill-handle"></div>',__decorateClass([(0,import_core3.Autowired)("valueService")],_FillHandle.prototype,"valueService",2);var FillHandle=_FillHandle,import_core4=require("@ag-grid-community/core"),_RangeHandle=class L extends AbstractSelectionHandle{constructor(){super(L.TEMPLATE),this.type=import_core4.SelectionHandleType.RANGE,this.rangeFixed=!1}onDrag(e){const s=this.getLastCellHovered();if(!s)return;const n=this.rangeService.getCellRanges(),o=import_core4._.last(n);this.rangeFixed||(this.fixRangeStartEnd(o),this.rangeFixed=!0),this.endPosition={rowIndex:s.rowIndex,rowPinned:s.rowPinned,column:s.column},n.length===2&&n[0].type===import_core4.CellRangeType.DIMENSION&&o.type===import_core4.CellRangeType.VALUE&&!this.rowPositionUtils.sameRow(this.endPosition,this.rangeService.getRangeEndRow(o))&&this.rangeService.updateRangeEnd(n[0],__spreadProps(__spreadValues({},this.endPosition),{column:n[0].columns[0]}),!0),this.rangeService.extendLatestRangeToCell(this.endPosition)}onDragEnd(e){const s=import_core4._.last(this.rangeService.getCellRanges());this.fixRangeStartEnd(s),this.rangeFixed=!1}fixRangeStartEnd(e){const s=this.rangeService.getRangeStartRow(e),n=this.rangeService.getRangeEndRow(e),o=e.columns[0];e.startRow=s,e.endRow=n,e.startColumn=o}};_RangeHandle.TEMPLATE='<div class="ag-range-handle"></div>';var RangeHandle=_RangeHandle,import_core5=require("@ag-grid-community/core"),SelectionHandleFactory=class extends import_core5.BeanStub{createSelectionHandle(t){return this.createBean(t===import_core5.SelectionHandleType.RANGE?new RangeHandle:new FillHandle)}};SelectionHandleFactory=__decorateClass([(0,import_core5.Bean)("selectionHandleFactory")],SelectionHandleFactory);var VERSION="31.3.4",RangeSelectionModule={version:VERSION,moduleName:import_core6.ModuleNames.RangeSelectionModule,beans:[RangeService,SelectionHandleFactory],agStackComponents:[{componentName:"AgFillHandle",componentClass:FillHandle},{componentName:"AgRangeHandle",componentClass:RangeHandle}],dependantModules:[import_core7.EnterpriseCoreModule]};


# ====================================================================
# FILE: enterprise-modules/range-selection/dist/types/src/version.d.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export declare const VERSION = "31.3.4";


# ====================================================================
# FILE: enterprise-modules/range-selection/src/version.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export const VERSION = '31.3.4';


# ====================================================================
# FILE: enterprise-modules/rich-select/dist/package/main.cjs.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 144-176 ---
   144|         if (allowTyping && (!eventKey2 || eventKey2.length !== 1)) {
   145|           focusableEl.select();
   146|         }
   147|       }
   148|       this.richSelect.showPicker();
   149|       const { eventKey } = params;
   150|       if (eventKey) {
   151|         if ((eventKey == null ? void 0 : eventKey.length) === 1) {
   152|           this.richSelect.searchTextFromString(eventKey);
   153|         }
   154|       }
   155|     });
   156|   }
   157|   getValue() {
   158|     return this.richSelect.getValue();
   159|   }
   160|   isPopup() {
   161|     return false;
   162|   }
   163| };
   164| var VERSION = "31.3.4";
   165| var RichSelectModule = {
   166|   version: VERSION,
   167|   moduleName: import_core2.ModuleNames.RichSelectModule,
   168|   beans: [],
   169|   userComponents: [
   170|     { componentName: "agRichSelect", componentClass: RichSelectCellEditor },
   171|     { componentName: "agRichSelectCellEditor", componentClass: RichSelectCellEditor }
   172|   ],
   173|   dependantModules: [
   174|     import_core3.EnterpriseCoreModule
   175|   ]
   176| };


# ====================================================================
# FILE: enterprise-modules/rich-select/dist/package/main.cjs.min.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| var __defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__hasOwnProp=Object.prototype.hasOwnProperty,__export=(e,r)=>{for(var t in r)__defProp(e,t,{get:r[t],enumerable:!0})},__copyProps=(e,r,t,a)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of __getOwnPropNames(r))!__hasOwnProp.call(e,i)&&i!==t&&__defProp(e,i,{get:()=>r[i],enumerable:!(a=__getOwnPropDesc(r,i))||a.enumerable});return e},__toCommonJS=e=>__copyProps(__defProp({},"__esModule",{value:!0}),e),main_exports={};__export(main_exports,{RichSelectModule:()=>RichSelectModule}),module.exports=__toCommonJS(main_exports);var import_core2=require("@ag-grid-community/core"),import_core3=require("@ag-grid-enterprise/core"),import_core=require("@ag-grid-community/core"),RichSelectCellEditor=class extends import_core.PopupComponent{constructor(){super('<div class="ag-cell-edit-wrapper"></div>')}init(e){this.params=e;const{cellStartedEdit:r,cellHeight:t,values:a}=e;import_core._.missing(a)&&console.warn("AG Grid: agRichSelectCellEditor requires cellEditorParams.values to be set");const{params:i,valuesPromise:s}=this.buildRichSelectParams();this.richSelect=this.createManagedBean(new import_core.AgRichSelect(i)),this.richSelect.addCssClass("ag-cell-editor"),this.appendChild(this.richSelect),s&&s.then(l=>{this.richSelect.setValueList({valueList:l,refresh:!0});const o=this.getSearchStringCallback(l);o&&this.richSelect.setSearchStringCreator(o)}),this.addManagedListener(this.richSelect,import_core.Events.EVENT_FIELD_PICKER_VALUE_SELECTED,this.onEditorPickerValueSelected.bind(this)),this.addManagedListener(this.richSelect.getGui(),"focusout",this.onEditorFocusOut.bind(this)),this.focusAfterAttached=r,import_core._.exists(t)&&this.richSelect.setRowHeight(t)}onEditorPickerValueSelected(e){this.params.stopEditing(!e.fromEnterKey)}onEditorFocusOut(e){this.richSelect.getGui().contains(e.relatedTarget)||this.params.stopEditing(!0)}buildRichSelectParams(){const{cellRenderer:e,value:r,values:t,formatValue:a,searchDebounceDelay:i,valueListGap:s,valueListMaxHeight:l,valueListMaxWidth:o,allowTyping:d,filterList:p,searchType:m,highlightMatch:g,valuePlaceholder:S,eventKey:n}=this.params,h={value:r,cellRenderer:e,searchDebounceDelay:i,valueFormatter:a,pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"virtual-list",pickerGap:s,allowTyping:d,filterList:p,searchType:m,highlightMatch:g,maxPickerHeight:l,maxPickerWidth:o,placeholder:S,initialInputValue:n?.length===1?n:void 0};let c,u;return typeof t=="function"?c=t(this.params):c=t??[],Array.isArray(c)?(h.valueList=c,h.searchStringCreator=this.getSearchStringCallback(c)):u=c,{params:h,valuesPromise:u}}getSearchStringCallback(e){const{colDef:r}=this.params;if(!(typeof e[0]!="object"||!r.keyCreator))return t=>t.map(a=>{const i=this.gos.addGridCommonParams({value:a,colDef:this.params.colDef,column:this.params.column,node:this.params.node,data:this.params.data});return r.keyCreator(i)})}afterGuiAttached(){const{focusAfterAttached:e,params:r}=this;setTimeout(()=>{if(!this.isAlive())return;if(e){const a=this.richSelect.getFocusableElement();a.focus();const{allowTyping:i,eventKey:s}=this.params;i&&(!s||s.length!==1)&&a.select()}this.richSelect.showPicker();const{eventKey:t}=r;t&&t?.length===1&&this.richSelect.searchTextFromString(t)})}getValue(){return this.richSelect.getValue()}isPopup(){return!1}},VERSION="31.3.4",RichSelectModule={version:VERSION,moduleName:import_core2.ModuleNames.RichSelectModule,beans:[],userComponents:[{componentName:"agRichSelect",componentClass:RichSelectCellEditor},{componentName:"agRichSelectCellEditor",componentClass:RichSelectCellEditor}],dependantModules:[import_core3.EnterpriseCoreModule]};


# ====================================================================
# FILE: enterprise-modules/rich-select/dist/types/src/version.d.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export declare const VERSION = "31.3.4";


# ====================================================================
# FILE: enterprise-modules/rich-select/src/version.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export const VERSION = '31.3.4';


# ====================================================================
# FILE: enterprise-modules/row-grouping/dist/package/main.cjs.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 2168-2208 ---
  2168|     if (!rowNode.hasChildren()) {
  2169|       rowNode.setAllChildrenCount(null);
  2170|       return;
  2171|     }
  2172|     if (this.gos.get("treeData")) {
  2173|       this.setAllChildrenCountTreeData(rowNode);
  2174|     } else {
  2175|       this.setAllChildrenCountGridGrouping(rowNode);
  2176|     }
  2177|   }
  2178| };
  2179| __decorateClass([
  2180|   (0, import_core11.Autowired)("filterManager")
  2181| ], FilterAggregatesStage.prototype, "filterManager", 2);
  2182| __decorateClass([
  2183|   (0, import_core11.Autowired)("columnModel")
  2184| ], FilterAggregatesStage.prototype, "columnModel", 2);
  2185| FilterAggregatesStage = __decorateClass([
  2186|   (0, import_core11.Bean)("filterAggregatesStage")
  2187| ], FilterAggregatesStage);
  2188| var VERSION = "31.3.4";
  2189| var import_core12 = require("@ag-grid-community/core");
  2190| var _GroupFilter = class _GroupFilter extends import_core12.TabGuardComp {
  2191|   constructor() {
  2192|     super(
  2193|       /* html */
  2194|       `
  2195|             <div class="ag-group-filter">
  2196|                 <div ref="eGroupField"></div>
  2197|                 <div ref="eUnderlyingFilter"></div>
  2198|             </div>
  2199|         `
  2200|     );
  2201|   }
  2202|   postConstruct() {
  2203|     this.initialiseTabGuard({});
  2204|   }
  2205|   init(params) {
  2206|     this.params = params;
  2207|     this.validateParams();
  2208|     return this.updateGroups().then(() => {


# ====================================================================
# FILE: enterprise-modules/row-grouping/dist/package/main.cjs.min.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-15 ---
     1| var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropNames=Object.getOwnPropertyNames,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,o)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,__spreadValues=(e,t)=>{for(var o in t||(t={}))__hasOwnProp.call(t,o)&&__defNormalProp(e,o,t[o]);if(__getOwnPropSymbols)for(var o of __getOwnPropSymbols(t))__propIsEnum.call(t,o)&&__defNormalProp(e,o,t[o]);return e},__spreadProps=(e,t)=>__defProps(e,__getOwnPropDescs(t)),__export=(e,t)=>{for(var o in t)__defProp(e,o,{get:t[o],enumerable:!0})},__copyProps=(e,t,o,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of __getOwnPropNames(t))!__hasOwnProp.call(e,n)&&n!==o&&__defProp(e,n,{get:()=>t[n],enumerable:!(r=__getOwnPropDesc(t,n))||r.enumerable});return e},__toCommonJS=e=>__copyProps(__defProp({},"__esModule",{value:!0}),e),__decorateClass=(e,t,o,r)=>{for(var n=r>1?void 0:r?__getOwnPropDesc(t,o):t,i=e.length-1,s;i>=0;i--)(s=e[i])&&(n=(r?s(t,o,n):s(n))||n);return r&&n&&__defProp(t,o,n),n},main_exports={};__export(main_exports,{PivotDropZonePanel:()=>PivotDropZonePanel,RowGroupDropZonePanel:()=>RowGroupDropZonePanel,RowGroupingModule:()=>RowGroupingModule,ValuesDropZonePanel:()=>ValuesDropZonePanel}),module.exports=__toCommonJS(main_exports);var import_core14=require("@ag-grid-community/core"),import_core15=require("@ag-grid-enterprise/core"),import_core=require("@ag-grid-community/core"),AggregationStage=class extends import_core.BeanStub{execute(e){const t=import_core._.missingOrEmpty(this.columnModel.getValueColumns()),o=!this.gos.getCallback("getGroupRowAgg"),r=e.changedPath&&e.changedPath.isActive();if(t&&o&&r)return;const n=this.createAggDetails(e);this.recursivelyCreateAggData(n)}createAggDetails(e){const t=this.columnModel.isPivotActive(),o=this.columnModel.getValueColumns(),r=t?this.columnModel.getPivotColumns():[];return{alwaysAggregateAtRootLevel:this.gos.get("alwaysAggregateAtRootLevel"),groupIncludeTotalFooter:!!this.gos.getGrandTotalRow(),changedPath:e.changedPath,valueColumns:o,pivotColumns:r,filteredOnly:!this.isSuppressAggFilteredOnly(),userAggFunc:this.gos.getCallback("getGroupRowAgg")}}isSuppressAggFilteredOnly(){return this.gos.getGroupAggFiltering()!==void 0||this.gos.get("suppressAggFilteredOnly")}recursivelyCreateAggData(e){const t=o=>{if(!o.hasChildren()){o.aggData&&o.setAggData(null);return}if(o.level===-1&&!e.groupIncludeTotalFooter){const i=!this.columnModel.isPivotMode();if(!e.alwaysAggregateAtRootLevel&&i){o.setAggData(null);return}}this.aggregateRowNode(o,e)};e.changedPath.forEachChangedNodeDepthFirst(t,!0)}aggregateRowNode(e,t){const o=t.valueColumns.length===0,r=t.pivotColumns.length===0;let n;t.userAggFunc?n=t.userAggFunc({nodes:e.childrenAfterFilter}):o?n=null:r?n=this.aggregateRowNodeUsingValuesOnly(e,t):n=this.aggregateRowNodeUsingValuesAndPivot(e),e.setAggData(n),e.sibling&&e.sibling.setAggData(n)}aggregateRowNodeUsingValuesAndPivot(e){var t,o;const r={},n=(t=this.columnModel.getSecondaryColumns())!=null?t:[];let i=!0;for(let s=0;s<n.length;s++){const l=n[s],u=l.getColDef();if(u.pivotTotalColumnIds!=null){i=!1;continue}const a=(o=u.pivotKeys)!=null?o:[];let c;e.leafGroup?c=this.getValuesFromMappedSet(e.childrenMapped,a,u.pivotValueColumn):c=this.getValuesPivotNonLeaf(e,u.colId),r[u.colId]=this.aggregateValues(c,u.pivotValueColumn.getAggFunc(),u.pivotValueColumn,e,l)}if(!i)for(let s=0;s<n.length;s++){const l=n[s],u=l.getColDef();if(u.pivotTotalColumnIds==null||!u.pivotTotalColumnIds.length)continue;const a=u.pivotTotalColumnIds.map(c=>r[c]);r[u.colId]=this.aggregateValues(a,u.pivotValueColumn.getAggFunc(),u.pivotValueColumn,e,l)}return r}aggregateRowNodeUsingValuesOnly(e,t){const o={},r=t.changedPath.isActive()?t.changedPath.getValueColumnsForNode(e,t.valueColumns):t.valueColumns,n=t.changedPath.isActive()?t.changedPath.getNotValueColumnsForNode(e,t.valueColumns):null,i=this.getValuesNormal(e,r,t.filteredOnly),s=e.aggData;return r.forEach((l,u)=>{o[l.getId()]=this.aggregateValues(i[u],l.getAggFunc(),l,e)}),n&&s&&n.forEach(l=>{o[l.getId()]=s[l.getId()]}),o}getValuesPivotNonLeaf(e,t){return e.childrenAfterFilter.map(o=>o.aggData[t])}getValuesFromMappedSet(e,t,o){let r=e;for(let n=0;n<t.length;n++){const i=t[n];r=r?r[i]:null}return r?r.map(n=>this.valueService.getValue(o,n)):[]}getValuesNormal(e,t,o){const r=[];t.forEach(()=>r.push([]));const n=t.length,i=o?e.childrenAfterFilter:e.childrenAfterGroup,s=i.length;for(let l=0;l<s;l++){const u=i[l];for(let a=0;a<n;a++){const c=t[a],d=this.valueService.getValue(c,u);r[a].push(d)}}return r}aggregateValues(e,t,o,r,n){const i=typeof t=="string"?this.aggFuncService.getAggFunc(t):t;if(typeof i!="function")return console.error(`AG Grid: unrecognised aggregation function ${t}`),null;const s=i,l=this.gos.addGridCommonParams({values:e,column:o,colDef:o?o.getColDef():void 0,pivotResultColumn:n,rowNode:r,data:r?r.data:void 0});return s(l)}};__decorateClass([(0,import_core.Autowired)("columnModel")],AggregationStage.prototype,"columnModel",2),__decorateClass([(0,import_core.Autowired)("valueService")],AggregationStage.prototype,"valueService",2),__decorateClass([(0,import_core.Autowired)("aggFuncService")],AggregationStage.prototype,"aggFuncService",2),AggregationStage=__decorateClass([(0,import_core.Bean)("aggregationStage")],AggregationStage);var import_core2=require("@ag-grid-community/core"),BatchRemover=class{constructor(){this.allSets={},this.allParents=[]}removeFromChildrenAfterGroup(e,t){const o=this.getSet(e);o.removeFromChildrenAfterGroup[t.id]=!0}isRemoveFromAllLeafChildren(e,t){return!!this.getSet(e).removeFromAllLeafChildren[t.id]}preventRemoveFromAllLeafChildren(e,t){const o=this.getSet(e);delete o.removeFromAllLeafChildren[t.id]}removeFromAllLeafChildren(e,t){const o=this.getSet(e);o.removeFromAllLeafChildren[t.id]=!0}getSet(e){return this.allSets[e.id]||(this.allSets[e.id]={removeFromAllLeafChildren:{},removeFromChildrenAfterGroup:{}},this.allParents.push(e)),this.allSets[e.id]}getAllParents(){return this.allParents}flush(){this.allParents.forEach(e=>{const t=this.allSets[e.id];e.childrenAfterGroup=e.childrenAfterGroup.filter(o=>!t.removeFromChildrenAfterGroup[o.id]),e.allLeafChildren=e.allLeafChildren.filter(o=>!t.removeFromAllLeafChildren[o.id]),e.updateHasChildren(),e.sibling&&(e.sibling.childrenAfterGroup=e.childrenAfterGroup,e.sibling.allLeafChildren=e.allLeafChildren)}),this.allSets={},this.allParents.length=0}},GroupStage=class extends import_core2.BeanStub{execute(e){const t=this.createGroupingDetails(e);if(t.transactions)this.handleTransaction(t);else{const o=e.afterColumnsChanged===!0;this.shotgunResetEverything(t,o)}t.usingTreeData||(this.positionLeafsAndGroups(e.changedPath),this.orderGroups(t)),this.selectableService.updateSelectableAfterGrouping()}positionLeafsAndGroups(e){e.forEachChangedNodeDepthFirst(t=>{if(t.childrenAfterGroup){const o=[],r=[];let n;t.childrenAfterGroup.forEach(i=>{var s;(s=i.childrenAfterGroup)!=null&&s.length?i.key===""&&!n?n=i:r.push(i):o.push(i)}),n&&r.push(n),t.childrenAfterGroup=[...o,...r]}},!1)}createGroupingDetails(e){var t;const{rowNode:o,changedPath:r,rowNodeTransactions:n,rowNodeOrder:i}=e,s=this.gos.get("treeData"),l=s?null:this.columnModel.getRowGroupColumns();return{includeParents:!this.gos.get("suppressParentsInRowNodes"),expandByDefault:this.gos.get("groupDefaultExpanded"),groupedCols:l,rootNode:o,pivotMode:this.columnModel.isPivotMode(),groupedColCount:s||!l?0:l.length,rowNodeOrder:i,transactions:n,changedPath:r,groupAllowUnbalanced:this.gos.get("groupAllowUnbalanced"),isGroupOpenByDefault:this.gos.getCallback("isGroupOpenByDefault"),initialGroupOrderComparator:this.gos.getCallback("initialGroupOrderComparator"),usingTreeData:s,suppressGroupMaintainValueType:this.gos.get("suppressGroupMaintainValueType"),getDataPath:s?this.gos.get("getDataPath"):void 0,keyCreators:(t=l?.map(a=>a.getColDef().keyCreator))!=null?t:[]}}handleTransaction(e){e.transactions.forEach(t=>{const o=e.usingTreeData?void 0:new BatchRemover;if(import_core2._.existsAndNotEmpty(t.remove)&&this.removeNodes(t.remove,e,o),import_core2._.existsAndNotEmpty(t.update)&&this.moveNodesInWrongPath(t.update,e,o),import_core2._.existsAndNotEmpty(t.add)&&this.insertNodes(t.add,e,!1),o){const r=o.getAllParents().slice();o.flush(),this.removeEmptyGroups(r,e)}}),e.rowNodeOrder&&this.sortChildren(e)}sortChildren(e){e.changedPath.forEachChangedNodeDepthFirst(t=>{if(!t.childrenAfterGroup)return;import_core2._.sortRowNodesByOrder(t.childrenAfterGroup,e.rowNodeOrder)&&e.changedPath.addParentNode(t)},!1,!0)}orderGroups(e){const t=e.initialGroupOrderComparator;import_core2._.exists(t)&&o(e.rootNode);function o(r){import_core2._.exists(r.childrenAfterGroup)&&!r.leafGroup&&(r.childrenAfterGroup.sort((i,s)=>t({nodeA:i,nodeB:s})),r.childrenAfterGroup.forEach(i=>o(i)))}}getExistingPathForNode(e,t){const o=[];let r=t.usingTreeData?e:e.parent;for(;r&&r!==t.rootNode;)o.push({key:r.key,rowGroupColumn:r.rowGroupColumn,field:r.field}),r=r.parent;return o.reverse(),o}moveNodesInWrongPath(e,t,o){e.forEach(r=>{t.changedPath.isActive()&&t.changedPath.addParentNode(r.parent);const n=u=>u.key,i=this.getExistingPathForNode(r,t).map(n),s=this.getGroupInfo(r,t).map(n);import_core2._.areEqual(i,s)||this.moveNode(r,t,o)})}moveNode(e,t,o){if(this.removeNodesInStages([e],t,o),this.insertOneNode(e,t,!0,o),e.setData(e.data),t.changedPath.isActive()){const r=e.parent;t.changedPath.addParentNode(r)}}removeNodes(e,t,o){this.removeNodesInStages(e,t,o),t.changedPath.isActive()&&e.forEach(r=>t.changedPath.addParentNode(r.parent))}removeNodesInStages(e,t,o){if(this.removeNodesFromParents(e,t,o),t.usingTreeData){this.postRemoveCreateFillerNodes(e,t);const r=e.map(n=>n.parent);this.removeEmptyGroups(r,t)}}forEachParentGroup(e,t,o){let r=t;for(;r&&r!==e.rootNode;)o(r),r=r.parent}removeNodesFromParents(e,t,o){const r=o==null,n=o||new BatchRemover;e.forEach(i=>{this.removeFromParent(i,n),this.forEachParentGroup(t,i.parent,s=>{n.removeFromAllLeafChildren(s,i)})}),r&&n.flush()}postRemoveCreateFillerNodes(e,t){e.forEach(o=>{if(o.hasChildren()){const n=this.getExistingPathForNode(o,t),i=this.findParentForNode(o,n,t);i.expanded=o.expanded,i.allLeafChildren=o.allLeafChildren,i.childrenAfterGroup=o.childrenAfterGroup,i.childrenMapped=o.childrenMapped,i.updateHasChildren(),i.childrenAfterGroup.forEach(s=>s.parent=i)}})}removeEmptyGroups(e,t){let o=!0;const r=n=>{const i=this.getChildrenMappedKey(n.key,n.rowGroupColumn),s=n.parent;return(s&&s.childrenMapped?!s.childrenMapped[i]:!0)?!1:!!n.isEmptyRowGroupNode()};for(;o;){o=!1;const n=new BatchRemover;e.forEach(i=>{this.forEachParentGroup(t,i,s=>{r(s)&&(o=!0,this.removeFromParent(s,n),s.setSelectedParams({newValue:!1,source:"rowGroupChanged"}))})}),n.flush()}}removeFromParent(e,t){e.parent&&(t?t.removeFromChildrenAfterGroup(e.parent,e):(import_core2._.removeFromArray(e.parent.childrenAfterGroup,e),e.parent.updateHasChildren()));const o=this.getChildrenMappedKey(e.key,e.rowGroupColumn);e.parent&&e.parent.childrenMapped&&(e.parent.childrenMapped[o]=void 0),e.setRowTop(null),e.setRowIndex(null)}addToParent(e,t){const o=this.getChildrenMappedKey(e.key,e.rowGroupColumn);t&&(t.childrenMapped!=null&&(t.childrenMapped[o]=e),t.childrenAfterGroup.push(e),t.updateHasChildren())}areGroupColsEqual(e,t){return e==null||t==null||e.pivotMode!==t.pivotMode?!1:import_core2._.areEqual(e.groupedCols,t.groupedCols)&&import_core2._.areEqual(e.keyCreators,t.keyCreators)}checkAllGroupDataAfterColsChanged(e){const t=o=>{o&&o.forEach(r=>{if(!e.usingTreeData&&!r.group)return;const i={field:r.field,key:r.key,rowGroupColumn:r.rowGroupColumn,leafNode:r.allLeafChildren[0]};this.setGroupData(r,i,e),t(r.childrenAfterGroup)})};t(e.rootNode.childrenAfterGroup)}shotgunResetEverything(e,t){if(this.noChangeInGroupingColumns(e,t))return;this.selectionService.filterFromSelection(i=>i&&!i.group);const{rootNode:o,groupedCols:r}=e;o.leafGroup=e.usingTreeData?!1:r.length===0,o.childrenAfterGroup=[],o.childrenMapped={},o.updateHasChildren();const n=o.sibling;n&&(n.childrenAfterGroup=o.childrenAfterGroup,n.childrenMapped=o.childrenMapped),this.insertNodes(o.allLeafChildren,e,!1)}noChangeInGroupingColumns(e,t){let o=!1;const r=this.columnModel.getGroupDisplayColumns(),n=r?r.map(i=>i.getId()).join("-"):"";return t&&(o=e.usingTreeData||this.areGroupColsEqual(e,this.oldGroupingDetails),this.oldGroupDisplayColIds!==n&&this.checkAllGroupDataAfterColsChanged(e)),this.oldGroupingDetails=e,this.oldGroupDisplayColIds=n,o}insertNodes(e,t,o){e.forEach(r=>{this.insertOneNode(r,t,o),t.changedPath.isActive()&&t.changedPath.addParentNode(r.parent)})}insertOneNode(e,t,o,r){const n=this.getGroupInfo(e,t),i=this.findParentForNode(e,n,t,r);i.group||console.warn("AG Grid: duplicate group keys for row data, keys should be unique",[i.data,e.data]),t.usingTreeData?this.swapGroupWithUserNode(i,e,o):(e.parent=i,e.level=n.length,i.childrenAfterGroup.push(e),i.updateHasChildren())}findParentForNode(e,t,o,r){let n=o.rootNode;return t.forEach((i,s)=>{n=this.getOrCreateNextNode(n,i,s,o),r?.isRemoveFromAllLeafChildren(n,e)?r?.preventRemoveFromAllLeafChildren(n,e):n.allLeafChildren.push(e)}),n}swapGroupWithUserNode(e,t,o){t.parent=e.parent,t.key=e.key,t.field=e.field,t.groupData=e.groupData,t.level=e.level,o||(t.expanded=e.expanded),t.leafGroup=e.leafGroup,t.rowGroupIndex=e.rowGroupIndex,t.allLeafChildren=e.allLeafChildren,t.childrenAfterGroup=e.childrenAfterGroup,t.childrenMapped=e.childrenMapped,t.sibling=e.sibling,t.updateHasChildren(),this.removeFromParent(e),t.childrenAfterGroup.forEach(r=>r.parent=t),this.addToParent(t,e.parent)}getOrCreateNextNode(e,t,o,r){const n=this.getChildrenMappedKey(t.key,t.rowGroupColumn);let i=e.childrenMapped?e.childrenMapped[n]:void 0;return i||(i=this.createGroup(t,e,o,r),this.addToParent(i,e)),i}createGroup(e,t,o,r){const n=new import_core2.RowNode(this.beans);return n.group=!0,n.field=e.field,n.rowGroupColumn=e.rowGroupColumn,this.setGroupData(n,e,r),n.key=e.key,n.id=this.createGroupId(n,t,r.usingTreeData,o),n.level=o,n.leafGroup=r.usingTreeData?!1:o===r.groupedColCount-1,n.allLeafChildren=[],n.setAllChildrenCount(0),n.rowGroupIndex=r.usingTreeData?null:o,n.childrenAfterGroup=[],n.childrenMapped={},n.updateHasChildren(),n.parent=r.includeParents?t:null,this.setExpandedInitialValue(r,n),n}createGroupId(e,t,o,r){let n;return o?n=(i,s,l)=>{if(l<0)return null;const u=s?n(s,s.parent,l-1):null;return`${u==null?"":u+"-"}${l}-${i.key}`}:n=(i,s)=>{if(!i.rowGroupColumn)return null;const l=s?n(s,s.parent,0):null;return`${l==null?"":l+"-"}${i.rowGroupColumn.getColId()}-${i.key}`},import_core2.RowNode.ID_PREFIX_ROW_GROUP+n(e,t,r)}setGroupData(e,t,o){e.groupData={},this.columnModel.getGroupDisplayColumns().forEach(n=>{if(o.usingTreeData){e.groupData[n.getColId()]=t.key;return}const s=e.rowGroupColumn;s!==null&&n.isRowGroupDisplayed(s.getId())&&(o.suppressGroupMaintainValueType?e.groupData[n.getColId()]=t.key:e.groupData[n.getColId()]=this.valueService.getValue(s,t.leafNode))})}getChildrenMappedKey(e,t){return t?t.getId()+"-"+e:e}setExpandedInitialValue(e,t){if(e.pivotMode&&t.leafGroup){t.expanded=!1;return}const o=e.isGroupOpenByDefault;if(o){const n={rowNode:t,field:t.field,key:t.key,level:t.level,rowGroupColumn:t.rowGroupColumn};t.expanded=o(n)==!0;return}const{expandByDefault:r}=e;if(e.expandByDefault===-1){t.expanded=!0;return}t.expanded=t.level<r}getGroupInfo(e,t){return t.usingTreeData?this.getGroupInfoFromCallback(e,t):this.getGroupInfoFromGroupColumns(e,t)}getGroupInfoFromCallback(e,t){const o=t.getDataPath?t.getDataPath(e.data):null;(o==null||o.length===0)&&import_core2._.warnOnce(`getDataPath() should not return an empty path for data ${e.data}`);const r=n=>({key:n,field:null,rowGroupColumn:null});return o?o.map(r):[]}getGroupInfoFromGroupColumns(e,t){const o=[];return t.groupedCols.forEach(r=>{let n=this.valueService.getKeyForNode(r,e),i=n!=null&&n!=="";if((t.pivotMode||!t.groupAllowUnbalanced)&&!i&&(n="",i=!0),i){const l={key:n,field:r.getColDef().field,rowGroupColumn:r,leafNode:e};o.push(l)}}),o}};__decorateClass([(0,import_core2.Autowired)("columnModel")],GroupStage.prototype,"columnModel",2),__decorateClass([(0,import_core2.Autowired)("selectableService")],GroupStage.prototype,"selectableService",2),__decorateClass([(0,import_core2.Autowired)("valueService")],GroupStage.prototype,"valueService",2),__decorateClass([(0,import_core2.Autowired)("beans")],GroupStage.prototype,"beans",2),__decorateClass([(0,import_core2.Autowired)("selectionService")],GroupStage.prototype,"selectionService",2),GroupStage=__decorateClass([(0,import_core2.Bean)("groupStage")],GroupStage);var import_core3=require("@ag-grid-community/core"),PivotColDefService=class extends import_core3.BeanStub{init(){const e=()=>{var o;return(o=this.gos.get("serverSidePivotResultFieldSeparator"))!=null?o:"_"};this.fieldSeparator=e(),this.addManagedPropertyListener("serverSidePivotResultFieldSeparator",()=>{this.fieldSeparator=e()});const t=()=>this.gos.get("pivotDefaultExpanded");this.pivotDefaultExpanded=t(),this.addManagedPropertyListener("pivotDefaultExpanded",()=>{this.pivotDefaultExpanded=t()})}createPivotColumnDefs(e){const t=this.createPivotColumnsFromUniqueValues(e);function o(i,s=[]){return i.forEach(l=>{l.children!==void 0?o(l.children,s):s.push(l)}),s}const r=o(t);this.addRowGroupTotals(t,r),this.addExpandablePivotGroups(t,r),this.addPivotTotalsToGroups(t,r);const n=r.map(i=>import_core3._.cloneObject(i));return{pivotColumnGroupDefs:t,pivotColumnDefs:n}}createPivotColumnsFromUniqueValues(e){const t=this.columnModel.getPivotColumns(),o=t.length;return this.recursivelyBuildGroup(0,e,[],o,t)}recursivelyBuildGroup(e,t,o,r,n){const i=this.columnModel.getValueColumns();if(e>=r)return this.buildMeasureCols(o);const s=n[e].getColDef(),l=this.headerNameComparator.bind(this,s.pivotComparator);if(i.length===1&&this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&e===r-1){const a=[];return import_core3._.iterateObject(t,c=>{const d=[...o,c],p=this.createColDef(i[0],c,d);p.columnGroupShow="open",a.push(p)}),a.sort(l),a}const u=[];return import_core3._.iterateObject(t,(a,c)=>{const d=this.pivotDefaultExpanded===-1||e<this.pivotDefaultExpanded,p=[...o,a];u.push({children:this.recursivelyBuildGroup(e+1,c,p,r,n),headerName:a,pivotKeys:p,columnGroupShow:"open",openByDefault:d,groupId:this.generateColumnGroupId(p)})}),u.sort(l),u}buildMeasureCols(e){const t=this.columnModel.getValueColumns();return t.length===0?[this.createColDef(null,"-",e)]:t.map(o=>{const r=this.columnModel.getDisplayNameForColumn(o,"header");return __spreadProps(__spreadValues({},this.createColDef(o,r,e)),{columnGroupShow:"open"})})}addExpandablePivotGroups(e,t){if(this.gos.get("suppressExpandablePivotGroups")||this.gos.get("pivotColumnGroupTotals"))return;const o=(r,n,i)=>{const s=r;if(s.children){const l=new Map;s.children.forEach(a=>{o(a,n,l)});const u=!s.children.some(a=>a.children);this.columnModel.getValueColumns().forEach(a=>{const c=this.columnModel.getDisplayNameForColumn(a,"header"),d=this.createColDef(a,c,r.pivotKeys);d.pivotTotalColumnIds=l.get(a.getColId()),d.columnGroupShow="closed",d.aggFunc=a.getAggFunc(),u||(r.children.push(d),n.push(d))}),this.merge(i,l)}else{const l=r;if(!l.pivotValueColumn)return;const u=l.pivotValueColumn.getColId(),a=i.has(u)?i.get(u):[];a.push(l.colId),i.set(u,a)}};e.forEach(r=>{o(r,t,new Map)})}addPivotTotalsToGroups(e,t){if(!this.gos.get("pivotColumnGroupTotals"))return;const o=this.gos.get("pivotColumnGroupTotals")==="after",r=this.columnModel.getValueColumns(),n=r.map(s=>s.getAggFunc());if(!n||n.length<1||!this.sameAggFuncs(n))return;const i=r[0];e.forEach(s=>{this.recursivelyAddPivotTotal(s,t,i,o)})}recursivelyAddPivotTotal(e,t,o,r){const n=e;if(!n.children){const s=e;return s.colId?[s.colId]:null}let i=[];if(n.children.forEach(s=>{const l=this.recursivelyAddPivotTotal(s,t,o,r);l&&(i=i.concat(l))}),n.children.length>1){const l=this.localeService.getLocaleTextFunc()("pivotColumnGroupTotals","Total"),u=this.createColDef(o,l,e.pivotKeys,!0);u.pivotTotalColumnIds=i,u.aggFunc=o.getAggFunc();const a=e.children;r?a.push(u):a.unshift(u),t.push(u)}return i}addRowGroupTotals(e,t){if(!this.gos.get("pivotRowTotals"))return;const o=this.gos.get("pivotRowTotals")==="after",r=this.columnModel.getValueColumns(),n=o?r.slice():r.slice().reverse();for(let i=0;i<n.length;i++){const s=n[i];let l=[];e.forEach(a=>{l=l.concat(this.extractColIdsForValueColumn(a,s))});const u=n.length>1||!this.gos.get("removePivotHeaderRowWhenSingleValueColumn");this.createRowGroupTotal(e,t,s,l,o,u)}}extractColIdsForValueColumn(e,t){const o=e;if(!o.children){const n=o;return n.pivotValueColumn===t&&n.colId?[n.colId]:[]}let r=[];return o.children.forEach(n=>{this.extractColIdsForValueColumn(n,t);const i=this.extractColIdsForValueColumn(n,t);r=r.concat(i)}),r}createRowGroupTotal(e,t,o,r,n,i){const s=this.columnModel.getValueColumns();let l;if(s.length===0)l=this.createColDef(null,"-",[]);else{const a=this.columnModel.getDisplayNameForColumn(o,"header");l=this.createColDef(o,a,[]),l.pivotTotalColumnIds=r}l.colId=PivotColDefService.PIVOT_ROW_TOTAL_PREFIX+l.colId,t.push(l);const u=i?{children:[l],pivotKeys:[],groupId:`${PivotColDefService.PIVOT_ROW_TOTAL_PREFIX}_pivotGroup_${o.getColId()}`}:l;n?e.push(u):e.unshift(u)}createColDef(e,t,o,r=!1){const n={};if(e){const i=e.getColDef();Object.assign(n,i),n.hide=!1}return n.headerName=t,n.colId=this.generateColumnId(o||[],e&&!r?e.getColId():""),n.field=n.colId,n.valueGetter=i=>{var s;return(s=i.data)==null?void 0:s[i.colDef.field]},n.pivotKeys=o,n.pivotValueColumn=e,n.filter===!0&&(n.filter="agNumberColumnFilter"),n}sameAggFuncs(e){if(e.length==1)return!0;for(let t=1;t<e.length;t++)if(e[t]!==e[0])return!1;return!0}headerNameComparator(e,t,o){return e?e(t.headerName,o.headerName):t.headerName&&!o.headerName?1:!t.headerName&&o.headerName?-1:!t.headerName||!o.headerName?0:t.headerName<o.headerName?-1:t.headerName>o.headerName?1:0}merge(e,t){t.forEach((o,r,n)=>{const s=[...e.has(r)?e.get(r):[],...o];e.set(r,s)})}generateColumnGroupId(e){return`pivotGroup_${this.columnModel.getPivotColumns().map(o=>o.getColId()).join("-")}_${e.join("-")}`}generateColumnId(e,t){return`pivot_${this.columnModel.getPivotColumns().map(r=>r.getColId()).join("-")}_${e.join("-")}_${t}`}createColDefsFromFields(e){const t={};for(let n=0;n<e.length;n++){const s=e[n].split(this.fieldSeparator);let l=t;for(let u=0;u<s.length;u++){const a=s[u];l[a]==null&&(l[a]={}),l=l[a]}}const o=(n,i,s,l)=>{var u;const a=[];for(let p in s){const f=s[p],m=o(`${n}${this.fieldSeparator}${p}`,p,f,l+1);a.push(m)}if(a.length===0){const p=this.columnModel.getPrimaryColumn(i);if(p){const m=(u=this.columnModel.getDisplayNameForColumn(p,"header"))!=null?u:i,h=this.createColDef(p,m,void 0,!1);return h.colId=n,h.aggFunc=p.getAggFunc(),h.valueGetter=C=>{var v;return(v=C.data)==null?void 0:v[n]},h}return{colId:n,headerName:i,valueGetter:m=>{var h;return(h=m.data)==null?void 0:h[n]}}}return this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&a.length===1&&"colId"in a[0]?(a[0].headerName=i,a[0]):{openByDefault:this.pivotDefaultExpanded===-1||l<this.pivotDefaultExpanded,groupId:n,headerName:i,children:a}},r=[];for(let n in t){const i=t[n],s=o(n,n,i,0);r.push(s)}return r}};PivotColDefService.PIVOT_ROW_TOTAL_PREFIX="PivotRowTotal_",__decorateClass([(0,import_core3.Autowired)("columnModel")],PivotColDefService.prototype,"columnModel",2),__decorateClass([import_core3.PostConstruct],PivotColDefService.prototype,"init",1),PivotColDefService=__decorateClass([(0,import_core3.Bean)("pivotColDefService")],PivotColDefService);var import_core4=require("@ag-grid-community/core"),PivotStage=class extends import_core4.BeanStub{constructor(){super(...arguments),this.uniqueValues={},this.lastTimeFailed=!1,this.maxUniqueValues=-1,this.currentUniqueCount=0}execute(e){const t=e.changedPath;this.columnModel.isPivotActive()?this.executePivotOn(t):this.executePivotOff(t)}executePivotOff(e){this.aggregationColumnsHashLastTime=null,this.uniqueValues={},this.columnModel.isSecondaryColumnsPresent()&&(this.columnModel.setSecondaryColumns(null,"rowModelUpdated"),e&&e.setInactive())}executePivotOn(e){var t;const o=(t=this.columnModel.getValueColumns().length)!=null?t:1,r=this.gos.get("pivotMaxGeneratedColumns");this.maxUniqueValues=r===-1?-1:r/o;let n;try{n=this.bucketUpRowNodes(e)}catch(g){if(g.message===PivotStage.EXCEEDED_MAX_UNIQUE_VALUES){this.columnModel.setSecondaryColumns([],"rowModelUpdated");const F={type:import_core4.Events.EVENT_PIVOT_MAX_COLUMNS_EXCEEDED,message:g.message};this.eventService.dispatchEvent(F),this.lastTimeFailed=!0;return}throw g}const i=this.setUniqueValues(n),s=this.columnModel.getValueColumns(),l=s.map(g=>`${g.getId()}-${g.getColDef().headerName}`).join("#"),u=s.map(g=>g.getAggFunc().toString()).join("#"),a=this.aggregationColumnsHashLastTime!==l,c=this.aggregationFuncsHashLastTime!==u;this.aggregationColumnsHashLastTime=l,this.aggregationFuncsHashLastTime=u;const d=this.columnModel.getRowGroupColumns().map(g=>g.getId()).join("#"),p=d!==this.groupColumnsHashLastTime;this.groupColumnsHashLastTime=d;const f=this.gos.get("pivotRowTotals"),m=this.gos.get("pivotColumnGroupTotals"),h=this.gos.get("suppressExpandablePivotGroups"),C=this.gos.get("removePivotHeaderRowWhenSingleValueColumn"),v=f!==this.pivotRowTotalsLastTime||m!==this.pivotColumnGroupTotalsLastTime||h!==this.suppressExpandablePivotGroupsLastTime||C!==this.removePivotHeaderRowWhenSingleValueColumnLastTime;if(this.pivotRowTotalsLastTime=f,this.pivotColumnGroupTotalsLastTime=m,this.suppressExpandablePivotGroupsLastTime=h,this.removePivotHeaderRowWhenSingleValueColumnLastTime=C,this.lastTimeFailed||i||a||p||c||v){const{pivotColumnGroupDefs:g,pivotColumnDefs:F}=this.pivotColDefService.createPivotColumnDefs(this.uniqueValues);this.pivotColumnDefs=F,this.columnModel.setSecondaryColumns(g,"rowModelUpdated"),e&&e.setInactive()}this.lastTimeFailed=!1}setUniqueValues(e){const t=JSON.stringify(e),o=JSON.stringify(this.uniqueValues);return t!==o?(this.uniqueValues=e,!0):!1}bucketUpRowNodes(e){this.currentUniqueCount=0;const t={};e.forEachChangedNodeDepthFirst(r=>{r.leafGroup&&(r.childrenMapped=null)});const o=r=>{var n;r.leafGroup?this.bucketRowNode(r,t):(n=r.childrenAfterFilter)==null||n.forEach(o)};return e.executeFromRootNode(o),t}bucketRowNode(e,t){const o=this.columnModel.getPivotColumns();o.length===0?e.childrenMapped=null:e.childrenMapped=this.bucketChildren(e.childrenAfterFilter,o,0,t),e.sibling&&(e.sibling.childrenMapped=e.childrenMapped)}bucketChildren(e,t,o,r){const n={},i=t[o];if(e.forEach(s=>{let l=this.valueService.getKeyForNode(i,s);if(import_core4._.missing(l)&&(l=""),!r[l]){this.currentUniqueCount+=1,r[l]={};const u=this.maxUniqueValues!==-1,a=this.currentUniqueCount>this.maxUniqueValues;if(u&&a)throw Error(PivotStage.EXCEEDED_MAX_UNIQUE_VALUES)}n[l]||(n[l]=[]),n[l].push(s)}),o===t.length-1)return n;{const s={};return import_core4._.iterateObject(n,(l,u)=>{s[l]=this.bucketChildren(u,t,o+1,r[l])}),s}}getPivotColumnDefs(){return this.pivotColumnDefs}};PivotStage.EXCEEDED_MAX_UNIQUE_VALUES="Exceeded maximum allowed pivot column count.",__decorateClass([(0,import_core4.Autowired)("valueService")],PivotStage.prototype,"valueService",2),__decorateClass([(0,import_core4.Autowired)("columnModel")],PivotStage.prototype,"columnModel",2),__decorateClass([(0,import_core4.Autowired)("pivotColDefService")],PivotStage.prototype,"pivotColDefService",2),PivotStage=__decorateClass([(0,import_core4.Bean)("pivotStage")],PivotStage);var import_core5=require("@ag-grid-community/core"),defaultAggFuncNames={sum:"Sum",first:"First",last:"Last",min:"Min",max:"Max",count:"Count",avg:"Average"},AggFuncService=class extends import_core5.BeanStub{constructor(){super(...arguments),this.aggFuncsMap={},this.initialised=!1}init(){this.initialised||(this.initialiseWithDefaultAggregations(),this.addAggFuncs(this.gos.get("aggFuncs")))}initialiseWithDefaultAggregations(){this.aggFuncsMap[AggFuncService.AGG_SUM]=aggSum,this.aggFuncsMap[AggFuncService.AGG_FIRST]=aggFirst,this.aggFuncsMap[AggFuncService.AGG_LAST]=aggLast,this.aggFuncsMap[AggFuncService.AGG_MIN]=aggMin,this.aggFuncsMap[AggFuncService.AGG_MAX]=aggMax,this.aggFuncsMap[AggFuncService.AGG_COUNT]=aggCount,this.aggFuncsMap[AggFuncService.AGG_AVG]=aggAvg,this.initialised=!0}isAggFuncPossible(e,t){const o=this.getFuncNames(e),r=import_core5._.includes(o,t),n=import_core5._.exists(this.aggFuncsMap[t]);return r&&n}getDefaultFuncLabel(e){var t;return(t=defaultAggFuncNames[e])!=null?t:e}getDefaultAggFunc(e){const t=e.getColDef().defaultAggFunc;if(import_core5._.exists(t)&&this.isAggFuncPossible(e,t))return t;if(this.isAggFuncPossible(e,AggFuncService.AGG_SUM))return AggFuncService.AGG_SUM;const o=this.getFuncNames(e);return import_core5._.existsAndNotEmpty(o)?o[0]:null}addAggFuncs(e){this.init(),import_core5._.iterateObject(e,(t,o)=>{this.aggFuncsMap[t]=o})}getAggFunc(e){return this.init(),this.aggFuncsMap[e]}getFuncNames(e){const t=e.getColDef().allowedAggFuncs;return t??Object.keys(this.aggFuncsMap).sort()}clear(){this.aggFuncsMap={}}};AggFuncService.AGG_SUM="sum",AggFuncService.AGG_FIRST="first",AggFuncService.AGG_LAST="last",AggFuncService.AGG_MIN="min",AggFuncService.AGG_MAX="max",AggFuncService.AGG_COUNT="count",AggFuncService.AGG_AVG="avg",__decorateClass([import_core5.PostConstruct],AggFuncService.prototype,"init",1),AggFuncService=__decorateClass([(0,import_core5.Bean)("aggFuncService")],AggFuncService);function aggSum(e){const{values:t}=e;let o=null;for(let r=0;r<t.length;r++){const n=t[r];typeof n=="number"?o===null?o=n:o+=typeof o=="number"?n:BigInt(n):typeof n=="bigint"&&(o===null?o=n:o=(typeof o=="bigint"?o:BigInt(o))+n)}return o}function aggFirst(e){return e.values.length>0?e.values[0]:null}function aggLast(e){return e.values.length>0?import_core5._.last(e.values):null}function aggMin(e){const{values:t}=e;let o=null;for(let r=0;r<t.length;r++){const n=t[r];(typeof n=="number"||typeof n=="bigint")&&(o===null||o>n)&&(o=n)}return o}function aggMax(e){const{values:t}=e;let o=null;for(let r=0;r<t.length;r++){const n=t[r];(typeof n=="number"||typeof n=="bigint")&&(o===null||o<n)&&(o=n)}return o}function aggCount(e){var t,o;const{values:r}=e;let n=0;for(let s=0;s<r.length;s++){const l=r[s];n+=l!=null&&typeof l.value=="number"?l.value:1}const i=(o=(t=e.rowNode)==null?void 0:t.aggData)==null?void 0:o[e.column.getColId()];return i&&i.value===n?i:{value:n,toString:function(){return this.value.toString()},toNumber:function(){return this.value}}}function aggAvg(e){var t,o,r;const{values:n}=e;let i=0,s=0;for(let a=0;a<n.length;a++){const c=n[a];let d=null;typeof c=="number"||typeof c=="bigint"?(d=c,s++):c!=null&&(typeof c.value=="number"||typeof c.value=="bigint")&&typeof c.count=="number"&&(d=c.value*(typeof c.value=="number"?c.count:BigInt(c.count)),s+=c.count),typeof d=="number"?i+=typeof i=="number"?d:BigInt(d):typeof d=="bigint"&&(i=(typeof i=="bigint"?i:BigInt(i))+d)}let l=null;s>0&&(l=i/(typeof i=="number"?s:BigInt(s)));const u=(r=(t=e.rowNode)==null?void 0:t.aggData)==null?void 0:r[(o=e.column)==null?void 0:o.getColId()];return u&&u.count===s&&u.value===l?u:{count:s,value:l,toString:function(){return typeof this.value=="number"||typeof this.value=="bigint"?this.value.toString():""},toNumber:function(){return this.value}}}var import_core10=require("@ag-grid-community/core"),import_core8=require("@ag-grid-community/core"),import_core7=require("@ag-grid-community/core"),import_core6=require("@ag-grid-community/core"),DropZoneColumnComp=class extends import_core6.PillDragComp{constructor(e,t,o,r,n){super(t,o,n,`
     2|                 <span role="option">
     3|                     <span ref="eDragHandle" class="ag-drag-handle ag-column-drop-cell-drag-handle" role="presentation"></span>
     4|                     <span ref="eText" class="ag-column-drop-cell-text" aria-hidden="true"></span>
     5|                     <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>
     6|                     <span ref="eButton" class="ag-column-drop-cell-button" role="presentation"></span>
     7|                 </span>
     8|             `),this.column=e,this.dropZonePurpose=r,this.popupShowing=!1}init(){this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnDrop"),super.init(),this.setupSort(),this.addManagedListener(this.eventService,import_core6.Column.EVENT_SORT_CHANGED,()=>{this.setupAria()}),this.isGroupingZone()&&this.addManagedPropertyListener("groupLockGroupColumns",()=>{this.refreshRemove(),this.refreshDraggable(),this.setupAria()})}getItem(){return this.column}getDisplayName(){return this.displayName}getTooltip(){return this.column.getColDef().headerTooltip}addAdditionalAriaInstructions(e,t){const o=this.gos.get("rowGroupPanelSuppressSort"),r=this.gos.get("functionsReadOnly");if(this.isAggregationZone()&&!r){const n=t("ariaDropZoneColumnValueItemDescription","Press ENTER to change the aggregation type");e.push(n)}if(this.isGroupingZone()&&this.column.isSortable()&&!o){const n=t("ariaDropZoneColumnGroupItemDescription","Press ENTER to sort");e.push(n)}super.addAdditionalAriaInstructions(e,t)}isDraggable(){return this.isReadOnly()}isRemovable(){return this.isReadOnly()}isReadOnly(){return!this.isGroupingAndLocked()&&!this.gos.get("functionsReadOnly")}getAriaDisplayName(){const e=this.localeService.getLocaleTextFunc(),{name:t,aggFuncName:o}=this.getColumnAndAggFuncName(),r=e("ariaDropZoneColumnComponentAggFuncSeparator"," of "),n={asc:e("ariaDropZoneColumnComponentSortAscending","ascending"),desc:e("ariaDropZoneColumnComponentSortDescending","descending")},i=this.column.getSort(),s=this.gos.get("rowGroupPanelSuppressSort");return[o&&`${o}${r}`,t,this.isGroupingZone()&&!s&&i&&`, ${n[i]}`].filter(l=>!!l).join("")}getColumnAndAggFuncName(){const e=this.displayName;let t="";if(this.isAggregationZone()){const o=this.column.getAggFunc(),r=typeof o=="string"?o:"agg";t=this.localeService.getLocaleTextFunc()(r,r)}return{name:e,aggFuncName:t}}setupSort(){const e=this.column.isSortable(),t=this.isGroupingZone();if(!(!e||!t)&&!this.gos.get("rowGroupPanelSuppressSort")){this.eSortIndicator.setupSort(this.column,!0);const o=r=>{r.preventDefault();const i=this.gos.get("multiSortKey")==="ctrl"?r.ctrlKey||r.metaKey:r.shiftKey;this.sortController.progressSort(this.column,i,"uiColumnSorted")};this.addGuiEventListener("click",o),this.addGuiEventListener("keydown",r=>{r.key===import_core6.KeyCode.ENTER&&this.isGroupingZone()&&o(r)})}}getDefaultIconName(){return import_core6.DragAndDropService.ICON_HIDE}createGetDragItem(){const{column:e}=this;return()=>{const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t}}}setupComponents(){super.setupComponents(),this.isAggregationZone()&&!this.gos.get("functionsReadOnly")&&this.addGuiEventListener("click",this.onShowAggFuncSelection.bind(this))}onKeyDown(e){super.onKeyDown(e),e.key===import_core6.KeyCode.ENTER&&this.isAggregationZone()&&!this.gos.get("functionsReadOnly")&&(e.preventDefault(),this.onShowAggFuncSelection())}getDisplayValue(){const{name:e,aggFuncName:t}=this.getColumnAndAggFuncName();return this.isAggregationZone()?`${t}(${e})`:e}onShowAggFuncSelection(){if(this.popupShowing)return;this.popupShowing=!0;const e=new import_core6.VirtualList({cssIdentifier:"select-agg-func"}),t=this.aggFuncService.getFuncNames(this.column),o=this.getGui(),r=e.getGui();e.setModel({getRow:function(c){return t[c]},getRowCount:function(){return t.length}}),this.getContext().createBean(e);const n=import_core6._.loadTemplate('<div class="ag-select-agg-func-popup"></div>');n.style.top="0px",n.style.left="0px",n.appendChild(r),n.style.width=`${o.clientWidth}px`;const i=this.addManagedListener(n,"focusout",c=>{!n.contains(c.relatedTarget)&&u&&u.hideFunc()}),s=c=>{this.destroyBean(e),this.popupShowing=!1,c?.key==="Escape"&&o.focus(),i&&i()},l=this.localeService.getLocaleTextFunc(),u=this.popupService.addPopup({modal:!0,eChild:n,closeOnEsc:!0,closedCallback:s,ariaLabel:l("ariaLabelAggregationFunction","Aggregation Function")});u&&e.setComponentCreator(this.createAggSelect.bind(this,u.hideFunc)),e.addGuiEventListener("keydown",c=>{if(c.key===import_core6.KeyCode.ENTER||c.key===import_core6.KeyCode.SPACE){const d=e.getLastFocusedRow();if(d==null)return;const p=e.getComponentAt(d);p&&p.selectItem()}}),this.popupService.positionPopupByComponent({type:"aggFuncSelect",eventSource:o,ePopup:n,keepWithinBounds:!0,column:this.column,position:"under"}),e.refresh();let a=t.findIndex(c=>c===this.column.getAggFunc());a===-1&&(a=0),e.focusRow(a)}createAggSelect(e,t){const o=()=>{if(e(),this.gos.get("functionsPassive")){const l={type:import_core6.Events.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST,columns:[this.column],aggFunc:t};this.eventService.dispatchEvent(l)}else this.columnModel.setColumnAggFunc(this.column,t,"toolPanelDragAndDrop")},r=this.localeService.getLocaleTextFunc(),n=t.toString(),i=r(n,n);return new AggItemComp(o,i)}isGroupingAndLocked(){return this.isGroupingZone()&&this.columnModel.isColumnGroupingLocked(this.column)}isAggregationZone(){return this.dropZonePurpose==="aggregation"}isGroupingZone(){return this.dropZonePurpose==="rowGroup"}getDragSourceType(){return import_core6.DragSourceType.ToolPanel}destroy(){super.destroy(),this.column=null}};__decorateClass([(0,import_core6.Autowired)("popupService")],DropZoneColumnComp.prototype,"popupService",2),__decorateClass([(0,import_core6.Autowired)("sortController")],DropZoneColumnComp.prototype,"sortController",2),__decorateClass([(0,import_core6.Autowired)("columnModel")],DropZoneColumnComp.prototype,"columnModel",2),__decorateClass([(0,import_core6.Optional)("aggFuncService")],DropZoneColumnComp.prototype,"aggFuncService",2),__decorateClass([(0,import_core6.RefSelector)("eSortIndicator")],DropZoneColumnComp.prototype,"eSortIndicator",2);var AggItemComp=class extends import_core6.Component{constructor(e,t){super('<div class="ag-select-agg-func-item"/>'),this.selectItem=e,this.getGui().innerText=t,this.addGuiEventListener("click",this.selectItem)}},BaseDropZonePanel=class extends import_core7.PillDropZonePanel{constructor(e,t){super(e),this.dropZonePurpose=t}init(e){super.init(e),this.addManagedListener(this.eventService,import_core7.Events.EVENT_NEW_COLUMNS_LOADED,this.refreshGui.bind(this)),this.addManagedPropertyListeners(["functionsReadOnly","rowGroupPanelSuppressSort","groupLockGroupColumns"],this.refreshGui.bind(this))}getItems(e){var t;return(t=e.columns)!=null?t:[]}isInterestedIn(e){return e===import_core7.DragSourceType.HeaderCell||e===import_core7.DragSourceType.ToolPanel}minimumAllowedNewInsertIndex(){const e=this.gos.get("groupLockGroupColumns"),t=this.columnModel.getRowGroupColumns().length;return e===-1?t:Math.min(e,t)}showOrHideColumnOnExit(e){return this.isRowGroupPanel()&&!this.gos.get("suppressRowGroupHidesColumns")&&!e.fromNudge}handleDragEnterEnd(e){if(this.showOrHideColumnOnExit(e)){const r=e.dragSource.getDragItem().columns;this.setColumnsVisible(r,!1,"uiColumnDragged")}}handleDragLeaveEnd(e){if(this.showOrHideColumnOnExit(e)){const o=e.dragSource.getDragItem();this.setColumnsVisible(o.columns,!0,"uiColumnDragged")}}setColumnsVisible(e,t,o){if(e){const r=e.filter(n=>!n.getColDef().lockVisible);this.columnModel.setColumnsVisible(r,t,o)}}isRowGroupPanel(){return this.dropZonePurpose==="rowGroup"}refreshOnDragStop(){return!this.gos.get("functionsPassive")}createPillComponent(e,t,o,r){return new DropZoneColumnComp(e,t,o,this.dropZonePurpose,r)}};__decorateClass([(0,import_core7.Autowired)("columnModel")],BaseDropZonePanel.prototype,"columnModel",2);var RowGroupDropZonePanel=class extends BaseDropZonePanel{constructor(e){super(e,"rowGroup")}passBeansUp(){const e=this.localeService.getLocaleTextFunc(),t=e("rowGroupColumnsEmptyMessage","Drag here to set row groups"),o=e("groups","Row Groups");super.init({icon:import_core8._.createIconNoSpan("rowGroupPanel",this.gos,null),emptyMessage:t,title:o}),this.addManagedListener(this.eventService,import_core8.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.refreshGui.bind(this))}getAriaLabel(){return this.localeService.getLocaleTextFunc()("ariaRowGroupDropZonePanelLabel","Row Groups")}getTooltipParams(){const e=super.getTooltipParams();return e.location="rowGroupColumnsList",e}isItemDroppable(e,t){return this.gos.get("functionsReadOnly")||!e.isPrimary()?!1:e.isAllowRowGroup()&&(!e.isRowGroupActive()||this.isSourceEventFromTarget(t))}updateItems(e){if(this.gos.get("functionsPassive")){const t={type:import_core8.Events.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns:e};this.eventService.dispatchEvent(t)}else this.columnModel.setRowGroupColumns(e,"toolPanelUi")}getIconName(){return this.isPotentialDndItems()?import_core8.DragAndDropService.ICON_GROUP:import_core8.DragAndDropService.ICON_NOT_ALLOWED}getExistingItems(){return this.columnModel.getRowGroupColumns()}};__decorateClass([import_core8.PostConstruct],RowGroupDropZonePanel.prototype,"passBeansUp",1);var import_core9=require("@ag-grid-community/core"),PivotDropZonePanel=class extends BaseDropZonePanel{constructor(e){super(e,"pivot")}passBeansUp(){const e=this.localeService.getLocaleTextFunc(),t=e("pivotColumnsEmptyMessage","Drag here to set column labels"),o=e("pivots","Column Labels");super.init({icon:import_core9._.createIconNoSpan("pivotPanel",this.gos,null),emptyMessage:t,title:o}),this.addManagedListener(this.eventService,import_core9.Events.EVENT_NEW_COLUMNS_LOADED,this.refresh.bind(this)),this.addManagedListener(this.eventService,import_core9.Events.EVENT_COLUMN_PIVOT_CHANGED,this.refresh.bind(this)),this.addManagedListener(this.eventService,import_core9.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.checkVisibility.bind(this)),this.refresh()}getAriaLabel(){return this.localeService.getLocaleTextFunc()("ariaPivotDropZonePanelLabel","Column Labels")}getTooltipParams(){const e=super.getTooltipParams();return e.location="pivotColumnsList",e}refresh(){this.checkVisibility(),this.refreshGui()}checkVisibility(){const e=this.columnModel.isPivotMode();if(this.isHorizontal())switch(this.gos.get("pivotPanelShow")){case"always":this.setDisplayed(e);break;case"onlyWhenPivoting":const t=this.columnModel.isPivotActive();this.setDisplayed(e&&t);break;default:this.setDisplayed(!1);break}else this.setDisplayed(e)}isItemDroppable(e,t){return this.gos.get("functionsReadOnly")||!e.isPrimary()?!1:e.isAllowPivot()&&(!e.isPivotActive()||this.isSourceEventFromTarget(t))}updateItems(e){if(this.gos.get("functionsPassive")){const t={type:import_core9.Events.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns:e};this.eventService.dispatchEvent(t)}else this.columnModel.setPivotColumns(e,"toolPanelUi")}getIconName(){return this.isPotentialDndItems()?import_core9.DragAndDropService.ICON_PIVOT:import_core9.DragAndDropService.ICON_NOT_ALLOWED}getExistingItems(){return this.columnModel.getPivotColumns()}};__decorateClass([import_core9.PostConstruct],PivotDropZonePanel.prototype,"passBeansUp",1);var GridHeaderDropZones=class extends import_core10.Component{constructor(){super()}postConstruct(){this.setGui(this.createNorthPanel()),this.addManagedListener(this.eventService,import_core10.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.onRowGroupChanged()),this.addManagedListener(this.eventService,import_core10.Events.EVENT_NEW_COLUMNS_LOADED,()=>this.onRowGroupChanged()),this.addManagedPropertyListener("rowGroupPanelShow",()=>this.onRowGroupChanged()),this.addManagedPropertyListener("pivotPanelShow",()=>this.onPivotPanelShow()),this.onRowGroupChanged()}createNorthPanel(){const e=document.createElement("div");return e.classList.add("ag-column-drop-wrapper"),import_core10._.setAriaRole(e,"presentation"),this.rowGroupComp=new RowGroupDropZonePanel(!0),this.createManagedBean(this.rowGroupComp),this.pivotComp=new PivotDropZonePanel(!0),this.createManagedBean(this.pivotComp),e.appendChild(this.rowGroupComp.getGui()),e.appendChild(this.pivotComp.getGui()),this.addManagedListener(this.rowGroupComp,import_core10.Component.EVENT_DISPLAYED_CHANGED,()=>this.onDropPanelVisible()),this.addManagedListener(this.pivotComp,import_core10.Component.EVENT_DISPLAYED_CHANGED,()=>this.onDropPanelVisible()),this.onDropPanelVisible(),e}onDropPanelVisible(){const e=this.rowGroupComp.isDisplayed()&&this.pivotComp.isDisplayed();this.rowGroupComp.addOrRemoveCssClass("ag-column-drop-horizontal-half-width",e),this.pivotComp.addOrRemoveCssClass("ag-column-drop-horizontal-half-width",e)}onRowGroupChanged(){if(!this.rowGroupComp)return;const e=this.gos.get("rowGroupPanelShow");if(e==="always")this.rowGroupComp.setDisplayed(!0);else if(e==="onlyWhenGrouping"){const t=!this.columnModel.isRowGroupEmpty();this.rowGroupComp.setDisplayed(t)}else this.rowGroupComp.setDisplayed(!1)}onPivotPanelShow(){if(!this.pivotComp)return;const e=this.gos.get("pivotPanelShow");if(e==="always")this.pivotComp.setDisplayed(!0);else if(e==="onlyWhenPivoting"){const t=this.columnModel.isPivotActive();this.pivotComp.setDisplayed(t)}else this.pivotComp.setDisplayed(!1)}};__decorateClass([(0,import_core10.Autowired)("columnModel")],GridHeaderDropZones.prototype,"columnModel",2),__decorateClass([import_core10.PostConstruct],GridHeaderDropZones.prototype,"postConstruct",1);var import_core11=require("@ag-grid-community/core"),FilterAggregatesStage=class extends import_core11.BeanStub{execute(e){const t=this.columnModel.isPivotMode(),o=this.filterManager.isAggregateFilterPresent()||this.filterManager.isAggregateQuickFilterPresent(),r=a=>!a.node.group,n=a=>a.node.leafGroup,i=this.gos.getGroupAggFiltering()||(t?n:r),{changedPath:s}=e,l=(a,c=!1)=>{a.childrenAfterFilter&&(a.childrenAfterAggFilter=a.childrenAfterFilter,c&&a.childrenAfterAggFilter.forEach(d=>l(d,c)),this.setAllChildrenCount(a)),a.sibling&&(a.sibling.childrenAfterAggFilter=a.childrenAfterAggFilter)},u=a=>{var c;a.childrenAfterAggFilter=((c=a.childrenAfterFilter)==null?void 0:c.filter(d=>{var p;return i({node:d})&&this.filterManager.doesRowPassAggregateFilters({rowNode:d})?(l(d,!0),!0):(p=d.childrenAfterAggFilter)==null?void 0:p.length}))||null,this.setAllChildrenCount(a),a.sibling&&(a.sibling.childrenAfterAggFilter=a.childrenAfterAggFilter)};s.forEachChangedNodeDepthFirst(o?u:l,!0)}setAllChildrenCountTreeData(e){let t=0;e.childrenAfterAggFilter.forEach(o=>{t++,t+=o.allChildrenCount}),e.setAllChildrenCount(t)}setAllChildrenCountGridGrouping(e){let t=0;e.childrenAfterAggFilter.forEach(o=>{o.group?t+=o.allChildrenCount:t++}),e.setAllChildrenCount(t)}setAllChildrenCount(e){if(!e.hasChildren()){e.setAllChildrenCount(null);return}this.gos.get("treeData")?this.setAllChildrenCountTreeData(e):this.setAllChildrenCountGridGrouping(e)}};__decorateClass([(0,import_core11.Autowired)("filterManager")],FilterAggregatesStage.prototype,"filterManager",2),__decorateClass([(0,import_core11.Autowired)("columnModel")],FilterAggregatesStage.prototype,"columnModel",2),FilterAggregatesStage=__decorateClass([(0,import_core11.Bean)("filterAggregatesStage")],FilterAggregatesStage);var VERSION="31.3.4",import_core12=require("@ag-grid-community/core"),_GroupFilter=class G extends import_core12.TabGuardComp{constructor(){super(`
     9|             <div class="ag-group-filter">
    10|                 <div ref="eGroupField"></div>
    11|                 <div ref="eUnderlyingFilter"></div>
    12|             </div>
    13|         `)}postConstruct(){this.initialiseTabGuard({})}init(t){return this.params=t,this.validateParams(),this.updateGroups().then(()=>{this.addManagedListener(this.eventService,import_core12.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.onColumnRowGroupChanged())})}validateParams(){const{colDef:t}=this.params;t.field&&import_core12._.warnOnce('Group Column Filter does not work with the colDef property "field". This property will be ignored.'),t.filterValueGetter&&import_core12._.warnOnce('Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.'),t.filterParams&&import_core12._.warnOnce('Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.')}updateGroups(){const t=this.updateGroupField();return this.getUnderlyingFilters(t)}getSourceColumns(){if(this.groupColumn=this.params.column,this.gos.get("treeData"))return import_core12._.warnOnce("Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter."),[];const t=this.columnModel.getSourceColumnsForGroupColumn(this.groupColumn);return t||(import_core12._.warnOnce("Group Column Filter only works on group columns. Please use a different filter."),[])}updateGroupField(){import_core12._.clearElement(this.eGroupField),this.eGroupFieldSelect&&this.destroyBean(this.eGroupFieldSelect);const t=this.getSourceColumns(),o=t.filter(r=>r.isFilterAllowed());return o.length?(t.length===1?(this.selectedColumn=o[0],import_core12._.setDisplayed(this.eGroupField,!1)):((!this.selectedColumn||!o.some(r=>r.getId()===this.selectedColumn.getId()))&&(this.selectedColumn=o[0]),this.createGroupFieldSelectElement(o),this.eGroupField.appendChild(this.eGroupFieldSelect.getGui()),this.eGroupField.appendChild(import_core12._.loadTemplate('<div class="ag-filter-separator"></div>')),import_core12._.setDisplayed(this.eGroupField,!0)),o):(this.selectedColumn=void 0,import_core12._.setDisplayed(this.eGroupField,!1),null)}createGroupFieldSelectElement(t){this.eGroupFieldSelect=this.createManagedBean(new import_core12.AgSelect);const o=this.localeService.getLocaleTextFunc();this.eGroupFieldSelect.setLabel(o("groupFilterSelect","Select field:")),this.eGroupFieldSelect.setLabelAlignment("top"),this.eGroupFieldSelect.addOptions(t.map(r=>{var n;return{value:r.getId(),text:(n=this.columnModel.getDisplayNameForColumn(r,"groupFilter",!1))!=null?n:void 0}})),this.eGroupFieldSelect.setValue(this.selectedColumn.getId()),this.eGroupFieldSelect.onValueChange(r=>this.updateSelectedColumn(r)),this.eGroupFieldSelect.addCssClass("ag-group-filter-field-select-wrapper"),t.length===1&&this.eGroupFieldSelect.setDisabled(!0)}getUnderlyingFilters(t){if(!t)return this.filterColumnPairs=void 0,this.selectedFilter=void 0,this.groupColumn.setFilterActive(!1,"columnRowGroupChanged"),import_core12.AgPromise.resolve();const o=[],r=[];return t.forEach(n=>{const i=this.filterManager.getOrCreateFilterWrapper(n,"COLUMN_MENU");i?.filterPromise&&o.push(i.filterPromise.then(s=>(s&&r.push({filter:s,column:n}),n.getId()===this.selectedColumn.getId()&&(this.selectedFilter=s??void 0),s)))}),import_core12.AgPromise.all(o).then(()=>{this.filterColumnPairs=r,this.groupColumn.setFilterActive(this.isFilterActive(),"columnRowGroupChanged")})}addUnderlyingFilterElement(){var t,o;if(import_core12._.clearElement(this.eUnderlyingFilter),!this.selectedColumn)return import_core12.AgPromise.resolve();const r=this.createManagedBean(new import_core12.FilterWrapperComp(this.selectedColumn,"COLUMN_MENU"));return this.filterWrapperComp=r,r.hasFilter()?(this.eUnderlyingFilter.appendChild(r.getGui()),(o=(t=r.getFilter())==null?void 0:t.then(()=>{var n,i;(n=r.afterGuiAttached)==null||n.call(r,this.afterGuiAttachedParams),!((i=this.afterGuiAttachedParams)!=null&&i.suppressFocus)&&this.eGroupFieldSelect&&!this.eGroupFieldSelect.isDisabled()&&this.eGroupFieldSelect.getFocusableElement().focus()}))!=null?o:import_core12.AgPromise.resolve()):import_core12.AgPromise.resolve()}updateSelectedColumn(t){var o;if(!t)return;(o=this.filterWrapperComp)==null||o.afterGuiDetached(),this.destroyBean(this.filterWrapperComp);const r=this.getFilterColumnPair(t);this.selectedColumn=r?.column,this.selectedFilter=r?.filter,this.dispatchEvent({type:G.EVENT_SELECTED_COLUMN_CHANGED}),this.addUnderlyingFilterElement()}isFilterActive(){var t;return!!((t=this.filterColumnPairs)!=null&&t.some(({filter:o})=>o.isFilterActive()))}doesFilterPass(){return!0}getModel(){return null}setModel(){return import_core12.AgPromise.resolve()}afterGuiAttached(t){this.afterGuiAttachedParams=t,this.addUnderlyingFilterElement()}afterGuiDetached(){var t,o;import_core12._.clearElement(this.eUnderlyingFilter),(o=(t=this.selectedFilter)==null?void 0:t.afterGuiDetached)==null||o.call(t)}onColumnRowGroupChanged(){this.updateGroups().then(()=>{this.dispatchEvent({type:G.EVENT_COLUMN_ROW_GROUP_CHANGED}),this.eventService.dispatchEvent({type:"filterAllowedUpdated"})})}getFilterColumnPair(t){var o;if(t)return(o=this.filterColumnPairs)==null?void 0:o.find(({column:r})=>r.getId()===t)}getSelectedFilter(){return this.selectedFilter}getSelectedColumn(){return this.selectedColumn}isFilterAllowed(){return!!this.selectedColumn}destroy(){super.destroy()}};_GroupFilter.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged",_GroupFilter.EVENT_SELECTED_COLUMN_CHANGED="selectedColumnChanged",__decorateClass([(0,import_core12.Autowired)("filterManager")],_GroupFilter.prototype,"filterManager",2),__decorateClass([(0,import_core12.Autowired)("columnModel")],_GroupFilter.prototype,"columnModel",2),__decorateClass([(0,import_core12.RefSelector)("eGroupField")],_GroupFilter.prototype,"eGroupField",2),__decorateClass([(0,import_core12.RefSelector)("eUnderlyingFilter")],_GroupFilter.prototype,"eUnderlyingFilter",2),__decorateClass([import_core12.PostConstruct],_GroupFilter.prototype,"postConstruct",1);var GroupFilter=_GroupFilter,import_core13=require("@ag-grid-community/core"),GroupFloatingFilterComp=class extends import_core13.Component{constructor(){super(`
    14|             <div ref="eFloatingFilter" class="ag-group-floating-filter ag-floating-filter-input" role="presentation"></div>
    15|         `),this.haveAddedColumnListeners=!1}init(e){this.params=e;const t=this.gos.get("groupDisplayType")==="multipleColumns";return new import_core13.AgPromise(o=>{this.params.parentFilterInstance(r=>{this.parentFilterInstance=r,t?this.setupUnderlyingFloatingFilterElement().then(()=>o()):(this.setupReadOnlyFloatingFilterElement(),o())})}).then(()=>{this.addManagedListener(this.parentFilterInstance,GroupFilter.EVENT_SELECTED_COLUMN_CHANGED,()=>this.onSelectedColumnChanged()),this.addManagedListener(this.parentFilterInstance,GroupFilter.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.onColumnRowGroupChanged())})}onParamsUpdated(e){this.refresh(e)}refresh(e){this.params=e,this.setParams()}setParams(){var e;const t=this.columnModel.getDisplayNameForColumn(this.params.column,"header",!0),o=this.localeService.getLocaleTextFunc();(e=this.eFloatingFilterText)==null||e.setInputAriaLabel(`${t} ${o("ariaFilterInput","Filter Input")}`)}setupReadOnlyFloatingFilterElement(){this.eFloatingFilterText||(this.eFloatingFilterText=this.createManagedBean(new import_core13.AgInputTextField),this.eFloatingFilterText.setDisabled(!0).addGuiEventListener("click",()=>this.params.showParentFilter()),this.setParams()),this.updateDisplayedValue(),this.eFloatingFilter.appendChild(this.eFloatingFilterText.getGui())}setupUnderlyingFloatingFilterElement(){this.showingUnderlyingFloatingFilter=!1,this.underlyingFloatingFilter=void 0,import_core13._.clearElement(this.eFloatingFilter);const e=this.parentFilterInstance.getSelectedColumn();if(e&&!e.isVisible()){const t=this.filterManager.getFloatingFilterCompDetails(e,this.params.showParentFilter);if(t)return this.compDetails=t,this.haveAddedColumnListeners||(this.haveAddedColumnListeners=!0,this.addManagedListener(e,import_core13.Column.EVENT_VISIBLE_CHANGED,this.onColumnVisibleChanged.bind(this)),this.addManagedListener(e,import_core13.Column.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this))),t.newAgStackInstance().then(o=>{var r,n;this.underlyingFloatingFilter=o,(n=this.underlyingFloatingFilter)==null||n.onParentModelChanged((r=this.parentFilterInstance.getSelectedFilter())==null?void 0:r.getModel()),this.appendChild(o.getGui()),this.showingUnderlyingFloatingFilter=!0})}return this.setupReadOnlyFloatingFilterElement(),import_core13.AgPromise.resolve()}onColumnVisibleChanged(){this.setupUnderlyingFloatingFilterElement()}onColDefChanged(e){var t,o,r;if(!e.column)return;const n=this.filterManager.getFloatingFilterCompDetails(e.column,this.params.showParentFilter);n&&((t=this.underlyingFloatingFilter)!=null&&t.refresh?this.underlyingFloatingFilter.refresh(n.params):(r=(o=this.underlyingFloatingFilter)==null?void 0:o.onParamsUpdated)==null||r.call(o,n.params))}onParentModelChanged(e,t){var o,r;this.showingUnderlyingFloatingFilter?(r=this.underlyingFloatingFilter)==null||r.onParentModelChanged((o=this.parentFilterInstance.getSelectedFilter())==null?void 0:o.getModel(),t):this.updateDisplayedValue()}updateDisplayedValue(){if(!this.parentFilterInstance||!this.eFloatingFilterText)return;const e=this.parentFilterInstance.getSelectedFilter();if(!e){this.eFloatingFilterText.setValue(""),this.eFloatingFilterText.setDisplayed(!1);return}if(this.eFloatingFilterText.setDisplayed(!0),e.getModelAsString){const t=e.getModel();this.eFloatingFilterText.setValue(t==null?"":e.getModelAsString(t))}else this.eFloatingFilterText.setValue("")}onSelectedColumnChanged(){this.showingUnderlyingFloatingFilter||this.updateDisplayedValue()}onColumnRowGroupChanged(){this.showingUnderlyingFloatingFilter||this.updateDisplayedValue()}destroy(){super.destroy()}};__decorateClass([(0,import_core13.Autowired)("columnModel")],GroupFloatingFilterComp.prototype,"columnModel",2),__decorateClass([(0,import_core13.Autowired)("filterManager")],GroupFloatingFilterComp.prototype,"filterManager",2),__decorateClass([(0,import_core13.RefSelector)("eFloatingFilter")],GroupFloatingFilterComp.prototype,"eFloatingFilter",2);var RowGroupingModule={version:VERSION,moduleName:import_core14.ModuleNames.RowGroupingModule,beans:[AggregationStage,FilterAggregatesStage,GroupStage,PivotColDefService,PivotStage,AggFuncService],agStackComponents:[{componentName:"AgGridHeaderDropZones",componentClass:GridHeaderDropZones}],userComponents:[{componentName:"agGroupColumnFilter",componentClass:GroupFilter},{componentName:"agGroupColumnFloatingFilter",componentClass:GroupFloatingFilterComp}],dependantModules:[import_core15.EnterpriseCoreModule]},import_core16=require("@ag-grid-community/core"),ValuesDropZonePanel=class extends BaseDropZonePanel{constructor(e){super(e,"aggregation")}passBeansUp(){const e=this.localeService.getLocaleTextFunc(),t=e("valueColumnsEmptyMessage","Drag here to aggregate"),o=e("values","Values");super.init({icon:import_core16._.createIconNoSpan("valuePanel",this.gos,null),emptyMessage:t,title:o}),this.addManagedListener(this.eventService,import_core16.Events.EVENT_COLUMN_VALUE_CHANGED,this.refreshGui.bind(this))}getAriaLabel(){return this.localeService.getLocaleTextFunc()("ariaValuesDropZonePanelLabel","Values")}getTooltipParams(){const e=super.getTooltipParams();return e.location="valueColumnsList",e}getIconName(){return this.isPotentialDndItems()?import_core16.DragAndDropService.ICON_AGGREGATE:import_core16.DragAndDropService.ICON_NOT_ALLOWED}isItemDroppable(e,t){return this.gos.get("functionsReadOnly")||!e.isPrimary()?!1:e.isAllowValue()&&(!e.isValueActive()||this.isSourceEventFromTarget(t))}updateItems(e){if(this.gos.get("functionsPassive")){const t={type:import_core16.Events.EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns:e};this.eventService.dispatchEvent(t)}else this.columnModel.setValueColumns(e,"toolPanelUi")}getExistingItems(){return this.columnModel.getValueColumns()}};__decorateClass([import_core16.PostConstruct],ValuesDropZonePanel.prototype,"passBeansUp",1);


# ====================================================================
# FILE: enterprise-modules/row-grouping/dist/types/src/version.d.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export declare const VERSION = "31.3.4";


# ====================================================================
# FILE: enterprise-modules/row-grouping/src/version.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export const VERSION = '31.3.4';


# ====================================================================
# FILE: enterprise-modules/server-side-row-model/dist/package/main.cjs.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 4444-4484 ---
  4444|   updateGroupsFromChildrenSelections(source, changedPath) {
  4445|     return false;
  4446|   }
  4447|   getBestCostNodeSelection() {
  4448|     console.warn("AG Grid: calling gridApi.getBestCostNodeSelection() is only possible when using rowModelType=`clientSide`.");
  4449|     return void 0;
  4450|   }
  4451|   filterFromSelection() {
  4452|     return;
  4453|   }
  4454| };
  4455| __decorateClass([
  4456|   (0, import_core17.Autowired)("rowModel")
  4457| ], ServerSideSelectionService.prototype, "rowModel", 2);
  4458| __decorateClass([
  4459|   import_core17.PostConstruct
  4460| ], ServerSideSelectionService.prototype, "init", 1);
  4461| ServerSideSelectionService = __decorateClass([
  4462|   (0, import_core17.Bean)("selectionService")
  4463| ], ServerSideSelectionService);
  4464| var VERSION = "31.3.4";
  4465| var import_core18 = require("@ag-grid-community/core");
  4466| var ServerSideExpansionService = class extends import_core18.ExpansionService {
  4467|   constructor() {
  4468|     super(...arguments);
  4469|     this.queuedRowIds = /* @__PURE__ */ new Set();
  4470|   }
  4471|   postConstruct() {
  4472|     super.postConstruct();
  4473|     this.addManagedListener(this.eventService, import_core18.Events.EVENT_COLUMN_ROW_GROUP_CHANGED, () => {
  4474|       this.queuedRowIds.clear();
  4475|     });
  4476|   }
  4477|   checkOpenByDefault(rowNode) {
  4478|     if (!rowNode.isExpandable()) {
  4479|       return;
  4480|     }
  4481|     if (this.queuedRowIds.has(rowNode.id)) {
  4482|       this.queuedRowIds.delete(rowNode.id);
  4483|       rowNode.setExpanded(true);
  4484|       return;


# ====================================================================
# FILE: enterprise-modules/server-side-row-model/dist/package/main.cjs.min.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-4 ---
     1| var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropNames=Object.getOwnPropertyNames,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,o)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,__spreadValues=(e,t)=>{for(var o in t||(t={}))__hasOwnProp.call(t,o)&&__defNormalProp(e,o,t[o]);if(__getOwnPropSymbols)for(var o of __getOwnPropSymbols(t))__propIsEnum.call(t,o)&&__defNormalProp(e,o,t[o]);return e},__spreadProps=(e,t)=>__defProps(e,__getOwnPropDescs(t)),__objRest=(e,t)=>{var o={};for(var s in e)__hasOwnProp.call(e,s)&&t.indexOf(s)<0&&(o[s]=e[s]);if(e!=null&&__getOwnPropSymbols)for(var s of __getOwnPropSymbols(e))t.indexOf(s)<0&&__propIsEnum.call(e,s)&&(o[s]=e[s]);return o},__export=(e,t)=>{for(var o in t)__defProp(e,o,{get:t[o],enumerable:!0})},__copyProps=(e,t,o,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of __getOwnPropNames(t))!__hasOwnProp.call(e,r)&&r!==o&&__defProp(e,r,{get:()=>t[r],enumerable:!(s=__getOwnPropDesc(t,r))||s.enumerable});return e},__toCommonJS=e=>__copyProps(__defProp({},"__esModule",{value:!0}),e),__decorateClass=(e,t,o,s)=>{for(var r=s>1?void 0:s?__getOwnPropDesc(t,o):t,i=e.length-1,n;i>=0;i--)(n=e[i])&&(r=(s?n(t,o,r):n(r))||r);return s&&r&&__defProp(t,o,r),r},main_exports={};__export(main_exports,{ServerSideRowModelModule:()=>ServerSideRowModelModule}),module.exports=__toCommonJS(main_exports);var import_core19=require("@ag-grid-community/core"),import_core20=require("@ag-grid-enterprise/core"),import_core5=require("@ag-grid-community/core"),import_core=require("@ag-grid-community/core"),FullStore=class extends import_core.RowNodeBlock{constructor(e,t,o){super(0),this.nodeIdSequence=new import_core.NumberSequence,this.info={},this.ssrmParams=e,this.parentRowNode=o,this.level=o.level+1,this.groupLevel=e.rowGroupCols?this.level<e.rowGroupCols.length:void 0,this.leafGroup=e.rowGroupCols?this.level===e.rowGroupCols.length-1:!1}postConstruct(){if(this.usingTreeData=this.gos.get("treeData"),this.nodeIdPrefix=this.blockUtils.createNodeIdPrefix(this.parentRowNode),!this.usingTreeData&&this.groupLevel){const s=this.ssrmParams.rowGroupCols[this.level];this.groupField=s.field,this.rowGroupColumn=this.columnModel.getRowGroupColumns()[this.level]}let e=1;const t=this.parentRowNode.level===-1,o=this.storeUtils.getServerSideInitialRowCount();t&&o!=null&&(e=o),this.initialiseRowNodes(e),this.rowNodeBlockLoader.addBlock(this),this.addDestroyFunc(()=>this.rowNodeBlockLoader.removeBlock(this)),this.postSortFunc=this.gos.getCallback("postSortRows"),o!=null&&this.eventService.dispatchEventOnce({type:import_core.Events.EVENT_ROW_COUNT_READY})}destroyRowNodes(){this.blockUtils.destroyRowNodes(this.allRowNodes),this.allRowNodes=[],this.nodesAfterSort=[],this.nodesAfterFilter=[],this.allNodesMap={}}initialiseRowNodes(e,t=!1){this.destroyRowNodes();for(let o=0;o<e;o++){const s=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});t&&(s.failedLoad=!0),this.allRowNodes.push(s),this.nodesAfterFilter.push(s),this.nodesAfterSort.push(s)}}getBlockStateJson(){return{id:this.nodeIdPrefix?this.nodeIdPrefix:"",state:this.getState()}}loadFromDatasource(){this.storeUtils.loadFromDatasource({startRow:void 0,endRow:void 0,parentBlock:this,parentNode:this.parentRowNode,storeParams:this.ssrmParams,success:this.success.bind(this,this.getVersion()),fail:this.pageLoadFailed.bind(this,this.getVersion())})}getStartRow(){return 0}getEndRow(){return this.nodesAfterSort.length}createDataNode(e,t){const o=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});t!=null?import_core._.insertIntoArray(this.allRowNodes,o,t):this.allRowNodes.push(o);const s=this.prefixId(this.nodeIdSequence.next());return this.blockUtils.setDataIntoRowNode(o,e,s,void 0),this.nodeManager.addRowNode(o),this.blockUtils.checkOpenByDefault(o),this.allNodesMap[o.id]=o,o}prefixId(e){return this.nodeIdPrefix?this.nodeIdPrefix+"-"+e:e.toString()}processServerFail(){this.initialiseRowNodes(1,!0),this.fireStoreUpdatedEvent(),this.flushAsyncTransactions()}processServerResult(e){if(!this.isAlive())return;const t=e.groupLevelInfo;t&&Object.assign(this.info,t),e.pivotResultFields&&this.serverSideRowModel.generateSecondaryColumns(e.pivotResultFields);const o=this.allRowNodes.length>0?this.allNodesMap:void 0;this.allRowNodes=[],this.nodesAfterSort=[],this.nodesAfterFilter=[],this.allNodesMap={},e.rowData||import_core._.warnOnce('"params.data" is missing from Server-Side Row Model success() callback. Please use the "data" attribute. If no data is returned, set an empty list.'),this.createOrRecycleNodes(o,e.rowData),o&&this.blockUtils.destroyRowNodes(import_core._.getAllValuesInObject(o)),this.level===0&&this.eventService.dispatchEventOnce({type:import_core.Events.EVENT_ROW_COUNT_READY}),this.filterAndSortNodes(),this.fireStoreUpdatedEvent(),this.flushAsyncTransactions()}createOrRecycleNodes(e,t){if(!t)return;const o=r=>{if(!e)return;const i=this.gos.getCallback("getRowId");if(!i)return;const n=this.parentRowNode.getGroupKeys(),d=this.level,l=i({data:r,parentKeys:n.length>0?n:void 0,level:d}),a=e[l];if(a)return delete e[l],a},s=(r,i)=>{this.allNodesMap[r.id]=r,this.blockUtils.updateDataIntoRowNode(r,i),this.allRowNodes.push(r)};t.forEach(r=>{const i=o(r);i?s(i,r):this.createDataNode(r)})}flushAsyncTransactions(){window.setTimeout(()=>this.transactionManager.flushAsyncTransactions(),0)}filterAndSortNodes(){this.filterRowNodes(),this.sortRowNodes()}sortRowNodes(){const e=this.storeUtils.isServerSideSortAllLevels()||this.storeUtils.isServerSideSortOnServer(),t=this.sortController.getSortOptions(),o=!t||t.length==0;if(e||o){this.nodesAfterSort=this.nodesAfterFilter;return}if(this.nodesAfterSort=this.rowNodeSorter.doFullSort(this.nodesAfterFilter,t),this.postSortFunc){const s={nodes:this.nodesAfterSort};this.postSortFunc(s)}}filterRowNodes(){const e=!this.storeUtils.isServerSideOnlyRefreshFilteredGroups()||this.storeUtils.isServerSideFilterOnServer(),t=this.groupLevel;if(e||t){this.nodesAfterFilter=this.allRowNodes;return}this.nodesAfterFilter=this.allRowNodes.filter(o=>this.filterManager.doesRowPassFilter({rowNode:o}))}clearDisplayIndexes(){this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.allRowNodes.forEach(e=>this.blockUtils.clearDisplayIndex(e))}getDisplayIndexEnd(){return this.displayIndexEnd}isDisplayIndexInStore(e){return this.getRowCount()===0?!1:e>=this.displayIndexStart&&e<this.displayIndexEnd}setDisplayIndexes(e,t){this.displayIndexStart=e.peek(),this.topPx=t.value;const o={};this.nodesAfterSort.forEach(s=>{this.blockUtils.setDisplayIndex(s,e,t),o[s.id]=!0}),this.allRowNodes.forEach(s=>{o[s.id]||this.blockUtils.clearDisplayIndex(s)}),this.displayIndexEnd=e.peek(),this.heightPx=t.value-this.topPx}forEachStoreDeep(e,t=new import_core.NumberSequence){e(this,t.next()),this.allRowNodes.forEach(o=>{const s=o.childStore;s&&s.forEachStoreDeep(e,t)})}forEachNodeDeep(e,t=new import_core.NumberSequence){this.allRowNodes.forEach(o=>{e(o,t.next());const s=o.childStore;s&&s.forEachNodeDeep(e,t)})}forEachNodeDeepAfterFilterAndSort(e,t=new import_core.NumberSequence,o=!1){this.nodesAfterSort.forEach(s=>{e(s,t.next());const r=s.childStore;r&&r.forEachNodeDeepAfterFilterAndSort(e,t,o)}),o&&this.parentRowNode.sibling&&e(this.parentRowNode.sibling,t.next())}getRowUsingDisplayIndex(e){return this.isDisplayIndexInStore(e)?this.blockUtils.binarySearchForDisplayIndex(e,this.nodesAfterSort):void 0}getRowBounds(e){for(let t=0;t<this.nodesAfterSort.length;t++){const o=this.nodesAfterSort[t],s=this.blockUtils.extractRowBounds(o,e);if(s)return s}return null}isPixelInRange(e){return e>=this.topPx&&e<this.topPx+this.heightPx}getRowIndexAtPixel(e){if(e<=this.topPx)return this.nodesAfterSort[0].rowIndex;if(e>=this.topPx+this.heightPx){const i=this.nodesAfterSort[this.nodesAfterSort.length-1],n=i.rowTop+i.rowHeight;if(e>=n&&i.expanded){if(i.childStore&&i.childStore.getRowCount()>0)return i.childStore.getRowIndexAtPixel(e);if(i.detailNode)return i.detailNode.rowIndex}return i.rowIndex}let s=null;return this.nodesAfterSort.forEach(i=>{const n=this.blockUtils.getIndexAtPixel(i,e);n!=null&&(s=n)}),s??this.displayIndexEnd-1}getChildStore(e){return this.storeUtils.getChildStore(e,this,t=>this.allRowNodes.find(s=>s.key==t))}forEachChildStoreShallow(e){this.allRowNodes.forEach(t=>{const o=t.childStore;o&&e(o)})}refreshAfterFilter(e){const t=this.storeUtils.isServerSideFilterOnServer(),o=this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e);if(!this.storeUtils.isServerSideOnlyRefreshFilteredGroups()||t&&o){this.refreshStore(!0),this.sortRowNodes();return}this.filterRowNodes(),this.sortRowNodes(),this.forEachChildStoreShallow(r=>r.refreshAfterFilter(e))}refreshAfterSort(e){const t=this.storeUtils.isServerSideSortOnServer(),o=this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e);if(this.storeUtils.isServerSideSortAllLevels()||t&&o){this.refreshStore(!0),this.filterRowNodes();return}this.filterRowNodes(),this.sortRowNodes(),this.forEachChildStoreShallow(r=>r.refreshAfterSort(e))}applyTransaction(e){switch(this.getState()){case import_core.RowNodeBlock.STATE_FAILED:return{status:import_core.ServerSideTransactionResultStatus.StoreLoadingFailed};case import_core.RowNodeBlock.STATE_LOADING:return{status:import_core.ServerSideTransactionResultStatus.StoreLoading};case import_core.RowNodeBlock.STATE_WAITING_TO_LOAD:return{status:import_core.ServerSideTransactionResultStatus.StoreWaitingToLoad}}const t=this.gos.getCallback("isApplyServerSideTransaction");if(t){const r={transaction:e,parentNode:this.parentRowNode,groupLevelInfo:this.info};if(!t(r))return{status:import_core.ServerSideTransactionResultStatus.Cancelled}}const o={status:import_core.ServerSideTransactionResultStatus.Applied,remove:[],update:[],add:[]},s=[];return this.executeAdd(e,o),this.executeRemove(e,o,s),this.executeUpdate(e,o,s),this.filterAndSortNodes(),this.updateSelection(s),o}updateSelection(e){if(e.length>0){this.selectionService.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,clearSelection:!1,source:"rowDataChanged"});const o={type:import_core.Events.EVENT_SELECTION_CHANGED,source:"rowDataChanged"};this.eventService.dispatchEvent(o)}}executeAdd(e,t){const{add:o,addIndex:s}=e;if(import_core._.missingOrEmpty(o))return;typeof s=="number"&&s>=0?o.reverse().forEach(i=>{const n=this.createDataNode(i,s);t.add.push(n)}):o.forEach(i=>{const n=this.createDataNode(i);t.add.push(n)})}executeRemove(e,t,o){const{remove:s}=e;if(s==null)return;const r={};s.forEach(i=>{const n=this.lookupRowNode(i);n&&(n.isSelected()&&o.push(n),n.clearRowTopAndRowIndex(),r[n.id]=!0,delete this.allNodesMap[n.id],t.remove.push(n),this.nodeManager.removeNode(n))}),this.allRowNodes=this.allRowNodes.filter(i=>!r[i.id])}executeUpdate(e,t,o){const{update:s}=e;s?.forEach(r=>{const i=this.lookupRowNode(r);i&&(this.blockUtils.updateDataIntoRowNode(i,r),!i.selectable&&i.isSelected()&&o.push(i),t.update.push(i))})}lookupRowNode(e){const t=this.gos.getCallback("getRowId");let o;if(t!=null){const s=this.level,r=this.parentRowNode.getGroupKeys(),i=t({data:e,parentKeys:r.length>0?r:void 0,level:s});if(o=this.allNodesMap[i],!o)return console.error(`AG Grid: could not find row id=${i}, data item was not found for this id`),null}else if(o=this.allRowNodes.find(s=>s.data===e),!o)return console.error("AG Grid: could not find data item as object was not found",e),null;return o}addStoreStates(e){e.push({suppressInfiniteScroll:!0,route:this.parentRowNode.getGroupKeys(),rowCount:this.allRowNodes.length,info:this.info}),this.forEachChildStoreShallow(t=>t.addStoreStates(e))}refreshStore(e){if(e){const t=this.nodesAfterSort?this.nodesAfterSort.length:1;this.initialiseRowNodes(t)}this.scheduleLoad(),this.fireStoreUpdatedEvent()}retryLoads(){this.getState()===import_core.RowNodeBlock.STATE_FAILED&&(this.initialiseRowNodes(1),this.scheduleLoad()),this.forEachChildStoreShallow(e=>e.retryLoads())}scheduleLoad(){this.setStateWaitingToLoad(),this.rowNodeBlockLoader.checkBlockToLoad()}fireStoreUpdatedEvent(){const e={type:import_core.Events.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(e)}getRowCount(){return this.nodesAfterSort.length}getTopLevelRowDisplayedIndex(e){return this.nodesAfterSort[e].rowIndex}isLastRowIndexKnown(){return this.getState()==import_core.RowNodeBlock.STATE_LOADED}getRowNodesInRange(e,t){const o=[];let s=!1;return import_core._.missing(e)&&(s=!0),this.nodesAfterSort.forEach(i=>{const n=i===e||i===t;(s||n)&&o.push(i),n&&(s=!s)}),s?[]:o}getStoreBounds(){return{topPx:this.topPx,heightPx:this.heightPx}}};__decorateClass([(0,import_core.Autowired)("ssrmStoreUtils")],FullStore.prototype,"storeUtils",2),__decorateClass([(0,import_core.Autowired)("ssrmBlockUtils")],FullStore.prototype,"blockUtils",2),__decorateClass([(0,import_core.Autowired)("columnModel")],FullStore.prototype,"columnModel",2),__decorateClass([(0,import_core.Autowired)("rowNodeBlockLoader")],FullStore.prototype,"rowNodeBlockLoader",2),__decorateClass([(0,import_core.Autowired)("rowNodeSorter")],FullStore.prototype,"rowNodeSorter",2),__decorateClass([(0,import_core.Autowired)("sortController")],FullStore.prototype,"sortController",2),__decorateClass([(0,import_core.Autowired)("selectionService")],FullStore.prototype,"selectionService",2),__decorateClass([(0,import_core.Autowired)("ssrmNodeManager")],FullStore.prototype,"nodeManager",2),__decorateClass([(0,import_core.Autowired)("filterManager")],FullStore.prototype,"filterManager",2),__decorateClass([(0,import_core.Autowired)("ssrmTransactionManager")],FullStore.prototype,"transactionManager",2),__decorateClass([(0,import_core.Autowired)("rowModel")],FullStore.prototype,"serverSideRowModel",2),__decorateClass([import_core.PostConstruct],FullStore.prototype,"postConstruct",1),__decorateClass([import_core.PreDestroy],FullStore.prototype,"destroyRowNodes",1);var import_core4=require("@ag-grid-community/core"),import_core3=require("@ag-grid-community/core"),MultiIndexMap=class{constructor(...e){if(e.length<1)throw new Error("AG Grid: At least one index must be provided.");this.indexes=e,this.maps=new Map(this.indexes.map(t=>[t,new Map]))}getSize(){return this.maps.get(this.indexes[0]).size}getBy(e,t){const o=this.maps.get(e);if(!o)throw new Error(`AG Grid: ${String(e)} not found`);return o.get(t)}set(e){this.indexes.forEach(t=>{const o=this.maps.get(t);if(!o)throw new Error(`AG Grid: ${String(t)} not found`);o.set(e[t],e)})}delete(e){this.indexes.forEach(t=>{const o=this.maps.get(t);if(!o)throw new Error(`AG Grid: ${String(t)} not found`);o.delete(e[t])})}clear(){this.maps.forEach(e=>e.clear())}getIterator(e){const t=this.maps.get(e);if(!t)throw new Error(`AG Grid: ${String(e)} not found`);return t.values()}forEach(e){const t=this.getIterator(this.indexes[0]);let o;for(;(o=t.next())&&!o.done;)e(o.value)}find(e){const t=this.getIterator(this.indexes[0]);let o;for(;(o=t.next())&&!o.done;)if(e(o.value))return o.value}filter(e){const t=this.getIterator(this.indexes[0]);let o;const s=[];for(;(o=t.next())&&!o.done;)e(o.value)&&s.push(o.value);return s}},import_core2=require("@ag-grid-community/core"),LazyBlockLoadingService=class extends import_core2.BeanStub{constructor(){super(...arguments),this.cacheLoadingNodesMap=new Map,this.isCheckQueued=!1,this.nextBlockToLoad=void 0}init(){this.addManagedListener(this.rowNodeBlockLoader,import_core2.RowNodeBlockLoader.BLOCK_LOADED_EVENT,()=>this.queueLoadCheck())}subscribe(e){this.cacheLoadingNodesMap.set(e,new Set)}unsubscribe(e){this.cacheLoadingNodesMap.delete(e)}queueLoadCheck(){this.isCheckQueued||(this.isCheckQueued=!0,window.queueMicrotask(()=>{this.queueLoadAction(),this.isCheckQueued=!1}))}queueLoadAction(){const e=this.getBlockToLoad();if(!e)return;const t=this.nextBlockToLoad&&this.nextBlockToLoad.cache===e.cache&&this.nextBlockToLoad.index===e.index;if(!t&&(!this.nextBlockToLoad||!t)){this.nextBlockToLoad=e,window.clearTimeout(this.loaderTimeout);const o=Number(this.nextBlockToLoad.index),s=this.nextBlockToLoad.cache,r=e.index+e.cache.getBlockSize();this.loaderTimeout=window.setTimeout(()=>{s.isAlive()&&(this.loaderTimeout=void 0,this.attemptLoad(s,o,r),this.nextBlockToLoad=void 0)},this.gos.get("blockLoadDebounceMillis"))}}attemptLoad(e,t,o){const s=this.rowNodeBlockLoader.getAvailableLoadingCount();s!=null&&s===0||(this.rowNodeBlockLoader.registerLoads(1),this.executeLoad(e,t,o),this.queueLoadCheck())}executeLoad(e,t,o){var s;const r=e.getSsrmParams(),i={startRow:t,endRow:o,rowGroupCols:r.rowGroupCols,valueCols:r.valueCols,pivotCols:r.pivotCols,pivotMode:r.pivotMode,groupKeys:e.store.getParentNode().getGroupKeys(),filterModel:r.filterModel,sortModel:r.sortModel},n=this.cacheLoadingNodesMap.get(e),d=()=>{for(let u=0;u<o-t;u++)n.delete(t+u)},l=()=>{for(let u=0;u<o-t;u++)n.add(t+u)},a=u=>{this.rowNodeBlockLoader.loadComplete(),e.onLoadSuccess(t,o-t,u),d()},c=()=>{this.rowNodeBlockLoader.loadComplete(),e.onLoadFailed(t,o-t),d()},h=this.gos.addGridCommonParams({request:i,success:a,fail:c,parentNode:e.store.getParentNode()});l(),(s=e.getSsrmParams().datasource)==null||s.getRows(h)}getBlockToLoad(){var e;const t=this.rowRenderer.getFirstVirtualRenderedRow(),o=this.rowRenderer.getLastVirtualRenderedRow();for(let l=t;l<=o;l++){const a=this.rowModel.getRow(l);if(!a)continue;const c=a.parent&&a.parent.childStore;if(!c||!(c instanceof LazyStore))continue;const h=c.getCache(),u=h.getNodes().getBy("node",a);if(!u)continue;const f=this.cacheLoadingNodesMap.get(h);if(!f?.has(u.index)&&(a.__needsRefreshWhenVisible||a.stub&&!a.failedLoad))return{cache:h,index:h.getBlockStartIndex(u.index)}}let s=null,r=null,i=Number.MAX_SAFE_INTEGER;for(const l of this.cacheLoadingNodesMap.keys())l.getNodesToRefresh().forEach(c=>{if(c.rowIndex==null){r=c,s=l;return}const h=l.getNodes().getBy("node",c);if(!h)return;const u=this.cacheLoadingNodesMap.get(l);if(u?.has(h.index))return;const f=Math.abs(t-c.rowIndex),g=Math.abs(c.rowIndex-o);f<i&&(r=c,i=f,s=l),g<i&&(r=c,i=g,s=l)});if(!s)return;const n=s,d=(e=n.getNodes().getBy("node",r))==null?void 0:e.index;return d==null?void 0:{cache:n,index:n.getBlockStartIndex(d)}}isRowLoading(e,t){var o,s;return(s=(o=this.cacheLoadingNodesMap.get(e))==null?void 0:o.has(t))!=null?s:!1}};LazyBlockLoadingService.DEFAULT_BLOCK_SIZE=100,__decorateClass([(0,import_core2.Autowired)("rowNodeBlockLoader")],LazyBlockLoadingService.prototype,"rowNodeBlockLoader",2),__decorateClass([(0,import_core2.Autowired)("rowRenderer")],LazyBlockLoadingService.prototype,"rowRenderer",2),__decorateClass([(0,import_core2.Autowired)("rowModel")],LazyBlockLoadingService.prototype,"rowModel",2),__decorateClass([import_core2.PostConstruct],LazyBlockLoadingService.prototype,"init",1),LazyBlockLoadingService=__decorateClass([(0,import_core2.Bean)("lazyBlockLoadingService")],LazyBlockLoadingService);var LazyCache=class extends import_core3.BeanStub{constructor(e,t,o){super(),this.live=!0,this.removedNodeCache=new Map,this.store=e,this.numberOfRows=t,this.isLastRowKnown=!1,this.storeParams=o}init(){this.lazyBlockLoadingService.subscribe(this),this.nodeMap=new MultiIndexMap("index","id","node"),this.nodeDisplayIndexMap=new Map,this.nodesToRefresh=new Set,this.defaultNodeIdPrefix=this.blockUtils.createNodeIdPrefix(this.store.getParentNode()),this.getRowIdFunc=this.gos.getCallback("getRowId"),this.isMasterDetail=this.gos.get("masterDetail")}destroyRowNodes(){this.lazyBlockLoadingService.unsubscribe(this),this.numberOfRows=0,this.nodeMap.forEach(e=>this.blockUtils.destroyRowNode(e.node)),this.nodeMap.clear(),this.nodeDisplayIndexMap.clear(),this.nodesToRefresh.clear(),this.live=!1}getRowByDisplayIndex(e){var t,o,s,r;if(!this.store.isDisplayIndexInStore(e))return;const i=this.nodeDisplayIndexMap.get(e);if(i)return(i.stub||i.__needsRefreshWhenVisible)&&this.lazyBlockLoadingService.queueLoadCheck(),i;if(e===this.store.getDisplayIndexStart())return this.createStubNode(0,e);const n=this.nodeDisplayIndexMap.get(e-1);if(n){if(this.isMasterDetail&&n.master&&n.expanded)return n.detailNode;if(n.expanded&&((t=n.childStore)!=null&&t.isDisplayIndexInStore(e)))return(o=n.childStore)==null?void 0:o.getRowUsingDisplayIndex(e);const h=this.nodeMap.getBy("node",n);return this.createStubNode(h.index+1,e)}const d=this.getSurroundingNodesByDisplayIndex(e);if(d==null){const h=this.store.getRowCount()-(this.store.getDisplayIndexEnd()-e);return this.createStubNode(h,e)}const{previousNode:l,nextNode:a}=d;if(l&&l.node.expanded&&((s=l.node.childStore)!=null&&s.isDisplayIndexInStore(e)))return(r=l.node.childStore)==null?void 0:r.getRowUsingDisplayIndex(e);if(a){const h=a.node.rowIndex-e,u=a.index-h;return this.createStubNode(u,e)}const c=this.store.getRowCount()-(this.store.getDisplayIndexEnd()-e);return this.createStubNode(c,e)}createStubNode(e,t){const o=this.store.getRowBounds(t),s=this.createRowAtIndex(e,null,r=>{r.setRowIndex(t),r.setRowTop(o.rowTop),this.nodeDisplayIndexMap.set(t,r)});return this.lazyBlockLoadingService.queueLoadCheck(),s}getRowByStoreIndex(e){var t;return(t=this.nodeMap.getBy("index",e))==null?void 0:t.node}skipDisplayIndexes(e,t,o){if(e===0)return;const s=this.gos.getRowHeightAsNumber();t.skip(e),o.value+=e*s}setDisplayIndexes(e,t){this.nodeDisplayIndexMap.clear();const o={};this.nodeMap.forEach(i=>{o[i.index]=i.node});let s=-1;for(const i in o){const n=o[i],d=Number(i),l=d-1-s;this.skipDisplayIndexes(l,e,t),this.blockUtils.setDisplayIndex(n,e,t),this.nodeDisplayIndexMap.set(n.rowIndex,n),s=d}const r=this.numberOfRows-1-s;this.skipDisplayIndexes(r,e,t),this.purgeExcessRows()}getRowCount(){return this.numberOfRows}setRowCount(e,t){if(e<0)throw new Error("AG Grid: setRowCount can only accept a positive row count.");this.numberOfRows=e,t!=null&&(this.isLastRowKnown=t,t===!1&&(this.numberOfRows+=1)),this.fireStoreUpdatedEvent()}getNodes(){return this.nodeMap}getNodeCachedByDisplayIndex(e){var t;return(t=this.nodeDisplayIndexMap.get(e))!=null?t:null}getNodesToRefresh(){return this.nodesToRefresh}getSurroundingNodesByDisplayIndex(e){let t,o;return this.nodeMap.forEach(s=>{if(e>s.node.rowIndex){(o==null||o.node.rowIndex<s.node.rowIndex)&&(o=s);return}if(t==null||t.node.rowIndex>s.node.rowIndex){t=s;return}}),!o&&!t?null:{previousNode:o,nextNode:t}}getDisplayIndexFromStoreIndex(e){var t,o;const s=this.nodeMap.getBy("index",e);if(s)return s.node.rowIndex;let r,i;if(this.nodeMap.forEach(l=>{if(e>l.index){(i==null||i.index<l.index)&&(i=l);return}if(r==null||r.index>l.index){r=l;return}}),!r)return this.store.getDisplayIndexEnd()-(this.numberOfRows-e);if(!i)return this.store.getDisplayIndexStart()+e;const n=e-i.index;return((o=(t=i.node.childStore)==null?void 0:t.getDisplayIndexEnd())!=null?o:i.node.rowIndex)+n}createRowAtIndex(e,t,o){var s,r;const i=this.nodeMap.getBy("index",e);if(i){const{node:d}=i;if(d.__needsRefreshWhenVisible=!1,this.doesNodeMatch(t,d))return this.blockUtils.updateDataIntoRowNode(d,t),this.nodesToRefresh.delete(d),d;if(this.getRowIdFunc==null&&d.hasChildren()&&d.expanded)return this.nodesToRefresh.delete(d),d;this.destroyRowAtIndex(e)}if(t&&this.getRowIdFunc!=null){const d=this.getRowId(t),l=d&&((s=this.removedNodeCache)==null?void 0:s.get(d));if(l)return(r=this.removedNodeCache)==null||r.delete(d),this.blockUtils.updateDataIntoRowNode(l,t),this.nodeMap.set({id:l.id,node:l,index:e}),l;const a=this.nodeMap.getBy("id",d);if(a){this.nodeMap.delete(a);const{node:c,index:h}=a;return this.blockUtils.updateDataIntoRowNode(c,t),this.nodeMap.set({id:c.id,node:c,index:e}),this.nodesToRefresh.delete(c),this.getBlockStartIndex(h)===this.getBlockStartIndex(e)||this.markBlockForVerify(h),c}}const n=this.blockUtils.createRowNode(this.store.getRowDetails());if(t!=null){const d=this.getPrefixedId(this.store.getIdSequence().next());this.blockUtils.setDataIntoRowNode(n,t,d,void 0),this.serverSideRowModel.setPaused(!0),this.blockUtils.checkOpenByDefault(n),this.serverSideRowModel.setPaused(!1),this.nodeManager.addRowNode(n)}return this.nodeMap.set({id:n.id,node:n,index:e}),o&&o(n),n}getBlockStates(){const e={},t={};this.nodeMap.forEach(({node:i,index:n})=>{var d;const l=this.getBlockStartIndex(n);!i.stub&&!i.failedLoad&&(e[l]=((d=e[l])!=null?d:0)+1);let a="loaded";i.failedLoad?a="failed":this.lazyBlockLoadingService.isRowLoading(this,l)?a="loading":(this.nodesToRefresh.has(i)||i.stub)&&(a="needsLoading"),t[l]||(t[l]=new Set),t[l].add(a)});const o={loading:4,failed:3,needsLoading:2,loaded:1},s=this.blockUtils.createNodeIdPrefix(this.store.getParentNode()),r={};return Object.entries(t).forEach(([i,n])=>{var d;const a=[...n].sort((u,f)=>{var g,p;return((g=o[u])!=null?g:0)-((p=o[f])!=null?p:0)})[0],c=Number(i)/this.getBlockSize(),h=s?`${s}-${c}`:String(c);r[h]={blockNumber:c,startRow:Number(i),endRow:Number(i)+this.getBlockSize(),pageStatus:a,loadedRowCount:(d=e[i])!=null?d:0}}),r}destroyRowAtIndex(e){const t=this.nodeMap.getBy("index",e);t&&(this.nodeMap.delete(t),this.nodeDisplayIndexMap.delete(t.node.rowIndex),this.nodesToRefresh.size>0?this.removedNodeCache.set(t.node.id,t.node):this.blockUtils.destroyRowNode(t.node),this.nodesToRefresh.delete(t.node))}getSsrmParams(){return this.store.getSsrmParams()}getPrefixedId(e){return this.defaultNodeIdPrefix?this.defaultNodeIdPrefix+"-"+e:e.toString()}markBlockForVerify(e){const[t,o]=this.getBlockBounds(e);this.nodeMap.filter(r=>r.index>=t&&r.index<o).forEach(({node:r})=>{r.__needsRefreshWhenVisible=!0})}doesNodeMatch(e,t){if(t.stub)return!1;if(this.getRowIdFunc!=null){const o=this.getRowId(e);return t.id===o}return t.data===e}purgeStubsOutsideOfViewport(){const e=this.api.getFirstDisplayedRowIndex(),t=this.api.getLastDisplayedRowIndex(),o=this.getBlockStartIndex(e),[s,r]=this.getBlockBounds(t);this.nodeMap.forEach(i=>{this.lazyBlockLoadingService.isRowLoading(this,i.index)||i.node.failedLoad||i.node.stub&&(i.index<o||i.index>r)&&this.destroyRowAtIndex(i.index)})}getBlocksDistanceFromRow(e,t){const o={};return e.forEach(({node:s,index:r})=>{const[i,n]=this.getBlockBounds(r);if(i in o)return;const d=Math.abs(s.rowIndex-t);let l;const a=this.nodeMap.getBy("index",[n-1]);a&&(l=Math.abs(a.node.rowIndex-t));const c=l==null||d<l?d:l;o[i]=c}),Object.entries(o)}purgeExcessRows(){var e;if(this.purgeStubsOutsideOfViewport(),this.store.getDisplayIndexEnd()==null||this.storeParams.maxBlocksInCache==null)return;const t=this.api.getFirstDisplayedRowIndex(),o=this.api.getLastDisplayedRowIndex(),s=new Set,r=new Set;this.nodeMap.forEach(({index:g,node:p})=>{const S=this.getBlockStartIndex(g);s.add(S),p.rowIndex>=t&&p.rowIndex<=o&&r.add(S)});const i=Math.max(r.size,(e=this.storeParams.maxBlocksInCache)!=null?e:0),d=s.size-i;if(d<=0)return;let l=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER;r.forEach(g=>{l>g&&(l=g),a<g&&(a=g)});const c=this.nodeMap.filter(({node:g,index:p})=>{const S=this.getBlockStartIndex(p);return!(S>=l&&S<=a)&&!this.isNodeCached(g)});if(c.length===0)return;const h=t+(o-t)/2,u=this.getBlocksDistanceFromRow(c,h),f=this.getBlockSize();u.sort((g,p)=>Math.sign(p[1]-g[1]));for(let g=0;g<Math.min(d,u.length);g++){const p=Number(u[g][0]);for(let S=p;S<p+f;S++){const w=this.nodeMap.getBy("index",S);!w||this.isNodeCached(w.node)||this.destroyRowAtIndex(S)}}}isNodeFocused(e){const t=this.focusService.getFocusCellToUseAfterRefresh();return!t||t.rowPinned!=null?!1:t.rowIndex===e.rowIndex}isNodeCached(e){return e.isExpandable()&&e.expanded||this.isNodeFocused(e)}extractDuplicateIds(e){if(this.getRowIdFunc==null)return[];const t=new Set,o=new Set;return e.forEach(s=>{const r=this.getRowId(s);if(t.has(r)){o.add(r);return}t.add(r)}),[...o]}onLoadSuccess(e,t,o){if(!this.live)return;const s=o.groupLevelInfo;if(this.store.setStoreInfo(s),this.getRowIdFunc!=null){const n=this.extractDuplicateIds(o.rowData);if(n.length>0){const d=n.join(", ");console.warn(`AG Grid: Unable to display rows as duplicate row ids (${d}) were returned by the getRowId callback. Please modify the getRowId callback to provide unique ids.`),this.onLoadFailed(e,t);return}}o.pivotResultFields&&this.serverSideRowModel.generateSecondaryColumns(o.pivotResultFields);const r=this.nodesToRefresh.size>0;if(o.rowData.forEach((n,d)=>{var l;const a=e+d,c=this.nodeMap.getBy("index",a);if((l=c?.node)!=null&&l.stub){this.createRowAtIndex(a,n);return}if(c&&this.doesNodeMatch(n,c.node)){this.blockUtils.updateDataIntoRowNode(c.node,n),this.nodesToRefresh.delete(c.node),c.node.__needsRefreshWhenVisible=!1;return}this.createRowAtIndex(a,n)}),o.rowCount!=null&&o.rowCount!==-1)this.numberOfRows=o.rowCount,this.isLastRowKnown=!0;else if(t>o.rowData.length)this.numberOfRows=e+o.rowData.length,this.isLastRowKnown=!0;else if(!this.isLastRowKnown){const n=e+o.rowData.length+1;n>this.numberOfRows&&(this.numberOfRows=n)}this.isLastRowKnown&&this.nodeMap.filter(d=>d.index>=this.numberOfRows).forEach(d=>this.destroyRowAtIndex(d.index)),this.fireStoreUpdatedEvent();const i=this.nodesToRefresh.size===0;r&&i&&this.fireRefreshFinishedEvent()}fireRefreshFinishedEvent(){this.nodesToRefresh.size===0&&(this.removedNodeCache.forEach(t=>{this.blockUtils.destroyRowNode(t)}),this.removedNodeCache=new Map,this.store.fireRefreshFinishedEvent())}isStoreFullyLoaded(){const e=this.isLastRowKnown,t=this.nodeMap.getSize()===this.numberOfRows;if(!e||!t||this.nodesToRefresh.size>0)return;let o=-1;return this.nodeMap.find(r=>(o+=1,!!(r.index!==o||r.node.__needsRefreshWhenVisible||r.node.stub)))==null}isLastRowIndexKnown(){return this.isLastRowKnown}onLoadFailed(e,t){var o;if(!this.live)return;const s=this.nodesToRefresh.size>0;for(let i=e;i<e+t&&i<this.getRowCount();i++){let{node:n}=(o=this.nodeMap.getBy("index",i))!=null?o:{};n&&this.nodesToRefresh.delete(n),(!n||!n.stub)&&(n&&!n.stub&&this.destroyRowAtIndex(i),n=this.createRowAtIndex(i)),n.__needsRefreshWhenVisible=!1,n.failedLoad=!0}const r=this.nodesToRefresh.size===0;s&&r&&this.fireRefreshFinishedEvent(),this.fireStoreUpdatedEvent()}markNodesForRefresh(){this.nodeMap.forEach(e=>{e.node.stub&&!e.node.failedLoad||this.nodesToRefresh.add(e.node)}),this.lazyBlockLoadingService.queueLoadCheck(),this.isLastRowKnown&&this.numberOfRows===0&&(this.numberOfRows=1,this.isLastRowKnown=!1,this.fireStoreUpdatedEvent())}isNodeInCache(e){return!!this.nodeMap.getBy("id",e)}fireStoreUpdatedEvent(){this.live&&this.store.fireStoreUpdatedEvent()}getRowId(e){if(this.getRowIdFunc==null)return null;const{level:t}=this.store.getRowDetails(),o=this.store.getParentNode().getGroupKeys(),s=this.getRowIdFunc({data:e,parentKeys:o.length>0?o:void 0,level:t});return String(s)}getOrderedNodeMap(){const e={};return this.nodeMap.forEach(t=>e[t.index]=t),e}clearDisplayIndexes(){this.nodeDisplayIndexMap.clear()}clientSideSortRows(){const e=this.sortController.getSortOptions();if(!e.some(r=>r.sort!=null))return;const o=new Array(this.nodeMap.getSize());this.nodeMap.forEach(r=>o[r.index]=r.node),this.nodeMap.clear(),this.rowNodeSorter.doFullSort(o,e).forEach((r,i)=>{this.nodeMap.set({id:r.id,node:r,index:i})})}updateRowNodes(e){if(this.getRowIdFunc==null)throw new Error("AG Grid: Transactions can only be applied when row ids are supplied.");const t=[];return e.forEach(o=>{const s=this.getRowId(o),r=this.nodeMap.getBy("id",s);r&&(this.blockUtils.updateDataIntoRowNode(r.node,o),t.push(r.node))}),t}insertRowNodes(e,t){const o=this.store.getRowCount()-(this.store.getParentNode().sibling?1:0),s=t==null&&this.isLastRowKnown?o:t;if(s==null||o<s)return[];if(this.getRowIdFunc==null)throw new Error("AG Grid: Transactions can only be applied when row ids are supplied.");const r={};e.forEach(l=>{const a=this.getRowId(l);a&&this.isNodeInCache(a)||(r[a]=l)});const i=Object.values(r);let n=i.length;if(n===0)return[];const d=this.nodeMap.filter(l=>l.index>=s);return d.forEach(l=>this.nodeMap.delete(l)),d.forEach(l=>{this.nodeMap.set({node:l.node,index:l.index+n,id:l.id})}),this.numberOfRows+=n,i.map((l,a)=>this.createRowAtIndex(s+a,l))}removeRowNodes(e){if(this.getRowIdFunc==null)throw new Error("AG Grid: Transactions can only be applied when row ids are supplied.");const t=[],o=[];let s=0;const r=[...e],i=this.getOrderedNodeMap();let n=-1;for(let d in i){n+=1;const l=i[d],a=r.findIndex(h=>h===l.id);if(a!==-1){r.splice(a,1),this.destroyRowAtIndex(Number(d)),t.push(l.node),s+=1;continue}if(s===0)continue;const c=Number(d);n!==c&&o.push(l.node),this.nodeMap.delete(i[d]),this.nodeMap.set({id:l.id,node:l.node,index:c-s})}return this.numberOfRows-=this.isLastRowIndexKnown()?e.length:s,r.length>0&&o.length>0&&(o.forEach(d=>d.__needsRefreshWhenVisible=!0),this.lazyBlockLoadingService.queueLoadCheck()),t}getBlockSize(){return this.storeParams.cacheBlockSize||LazyBlockLoadingService.DEFAULT_BLOCK_SIZE}getBlockStartIndex(e){const t=this.getBlockSize();return e-e%t}getBlockBounds(e){const t=this.getBlockStartIndex(e),o=this.getBlockSize();return[t,t+o]}};__decorateClass([(0,import_core3.Autowired)("gridApi")],LazyCache.prototype,"api",2),__decorateClass([(0,import_core3.Autowired)("ssrmBlockUtils")],LazyCache.prototype,"blockUtils",2),__decorateClass([(0,import_core3.Autowired)("focusService")],LazyCache.prototype,"focusService",2),__decorateClass([(0,import_core3.Autowired)("ssrmNodeManager")],LazyCache.prototype,"nodeManager",2),__decorateClass([(0,import_core3.Autowired)("rowModel")],LazyCache.prototype,"serverSideRowModel",2),__decorateClass([(0,import_core3.Autowired)("rowNodeSorter")],LazyCache.prototype,"rowNodeSorter",2),__decorateClass([(0,import_core3.Autowired)("sortController")],LazyCache.prototype,"sortController",2),__decorateClass([(0,import_core3.Autowired)("lazyBlockLoadingService")],LazyCache.prototype,"lazyBlockLoadingService",2),__decorateClass([import_core3.PostConstruct],LazyCache.prototype,"init",1),__decorateClass([import_core3.PreDestroy],LazyCache.prototype,"destroyRowNodes",1);var LazyStore=class extends import_core4.BeanStub{constructor(e,t,o){super(),this.idSequence=new import_core4.NumberSequence,this.ssrmParams=e,this.parentRowNode=o,this.storeParams=t,this.level=o.level+1,this.group=e.rowGroupCols?this.level<e.rowGroupCols.length:!1,this.leafGroup=e.rowGroupCols?this.level===e.rowGroupCols.length-1:!1,this.info={}}init(){var e;let t=1;if(this.level===0&&(t=(e=this.storeUtils.getServerSideInitialRowCount())!=null?e:1,this.eventService.dispatchEventOnce({type:import_core4.Events.EVENT_ROW_COUNT_READY})),this.cache=this.createManagedBean(new LazyCache(this,t,this.storeParams)),!this.gos.get("treeData")&&this.group){const s=this.ssrmParams.rowGroupCols[this.level];this.groupField=s.field,this.rowGroupColumn=this.columnModel.getRowGroupColumns()[this.level]}}destroyRowNodes(){this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.destroyBean(this.cache)}applyRowData(e,t,o){this.cache.onLoadSuccess(t,o,e)}applyTransaction(e){var t,o,s;const r=this.gos.getCallback("getRowId");if(!r)return console.warn("AG Grid: getRowId callback must be implemented for transactions to work. Transaction was ignored."),{status:import_core4.ServerSideTransactionResultStatus.Cancelled};const i=this.gos.getCallback("isApplyServerSideTransaction");if(i){const f={transaction:e,parentNode:this.parentRowNode,groupLevelInfo:this.info};if(!i(f))return{status:import_core4.ServerSideTransactionResultStatus.Cancelled}}const n=this.cache.isStoreFullyLoaded();let d;(t=e.update)!=null&&t.length&&(d=this.cache.updateRowNodes(e.update));let l;if((o=e.add)!=null&&o.length){let f=e.addIndex;f!=null&&f<0&&(f=void 0),l=this.cache.insertRowNodes(e.add,f)}let a;if((s=e.remove)!=null&&s.length){const f=e.remove.map(p=>r({level:this.level,parentKeys:this.parentRowNode.getGroupKeys(),data:p})),g=[...new Set(f)];a=this.cache.removeRowNodes(g)}const c=this.gos.get("serverSideEnableClientSideSort"),h=d?.length||l?.length;return n&&c&&h&&this.cache.clientSideSortRows(),this.updateSelectionAfterTransaction(d,a),{status:import_core4.ServerSideTransactionResultStatus.Applied,update:d,add:l,remove:a}}updateSelectionAfterTransaction(e,t){const o=[];e?.forEach(s=>{s.isSelected()&&!s.selectable&&o.push(s)}),t?.forEach(s=>{s.isSelected()&&o.push(s)}),o.length&&this.selectionService.setNodesSelected({newValue:!1,clearSelection:!1,nodes:o,source:"rowDataChanged"})}clearDisplayIndexes(){this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.cache.getNodes().forEach(e=>this.blockUtils.clearDisplayIndex(e.node)),this.parentRowNode.sibling&&this.blockUtils.clearDisplayIndex(this.parentRowNode.sibling),this.cache.clearDisplayIndexes()}getDisplayIndexStart(){return this.displayIndexStart}getDisplayIndexEnd(){return this.displayIndexEnd}getRowCount(){return this.parentRowNode.sibling?this.cache.getRowCount()+1:this.cache.getRowCount()}setRowCount(e,t){this.cache.setRowCount(e,t)}isDisplayIndexInStore(e){return this.cache.getRowCount()===0?!1:this.displayIndexStart<=e&&e<this.getDisplayIndexEnd()}setDisplayIndexes(e,t){this.displayIndexStart=e.peek(),this.topPx=t.value;const o=this.parentRowNode.level>-1&&this.gos.getGroupTotalRowCallback()({node:this.parentRowNode});o||this.parentRowNode.destroyFooter(),o==="top"&&(this.parentRowNode.createFooter(),this.blockUtils.setDisplayIndex(this.parentRowNode.sibling,e,t)),this.cache.setDisplayIndexes(e,t),o==="bottom"&&(this.parentRowNode.createFooter(),this.blockUtils.setDisplayIndex(this.parentRowNode.sibling,e,t)),this.displayIndexEnd=e.peek(),this.heightPx=t.value-this.topPx}forEachStoreDeep(e,t=new import_core4.NumberSequence){e(this,t.next()),this.cache.getNodes().forEach(o=>{const s=o.node.childStore;s&&s.forEachStoreDeep(e,t)})}forEachNodeDeep(e,t=new import_core4.NumberSequence){this.cache.getNodes().forEach(o=>{e(o.node,t.next());const s=o.node.childStore;s&&s.forEachNodeDeep(e,t)})}forEachNodeDeepAfterFilterAndSort(e,t=new import_core4.NumberSequence,o=!1){const s=this.parentRowNode.level>-1&&this.gos.getGroupTotalRowCallback()({node:this.parentRowNode});s==="top"&&e(this.parentRowNode.sibling,t.next());const r=this.cache.getOrderedNodeMap();for(let i in r){const n=r[i];e(n.node,t.next());const d=n.node.childStore;d&&d.forEachNodeDeepAfterFilterAndSort(e,t,o)}s==="bottom"&&e(this.parentRowNode.sibling,t.next())}retryLoads(){this.cache.getNodes().forEach(({node:e})=>{e.failedLoad&&(e.failedLoad=!1,e.__needsRefreshWhenVisible=!0,e.stub=!0)}),this.forEachChildStoreShallow(e=>e.retryLoads()),this.fireStoreUpdatedEvent()}getRowUsingDisplayIndex(e){return this.parentRowNode.sibling&&e===this.parentRowNode.sibling.rowIndex?this.parentRowNode.sibling:this.cache.getRowByDisplayIndex(e)}getRowBounds(e){var t;if(!this.isDisplayIndexInStore(e))return null;const o=this.cache.getNodeCachedByDisplayIndex(e);if(o){const l=this.blockUtils.extractRowBounds(o,e);if(l)return l}const{previousNode:s,nextNode:r}=(t=this.cache.getSurroundingNodesByDisplayIndex(e))!=null?t:{};if(s){const l=this.blockUtils.extractRowBounds(s.node,e);if(l!=null)return l}const i=this.gos.getRowHeightAsNumber();if(r){const l=(r.node.rowIndex-e)*i;return{rowTop:r.node.rowTop-l,rowHeight:i}}const n=this.topPx+this.heightPx,d=(this.getDisplayIndexEnd()-e)*i;return{rowTop:n-d,rowHeight:i}}isPixelInRange(e){return e>=this.topPx&&e<this.topPx+this.heightPx}getRowIndexAtPixel(e){if(e<this.topPx)return this.getDisplayIndexStart();if(e>=this.topPx+this.heightPx)return this.getDisplayIndexEnd()-1;if(this.parentRowNode.sibling&&e>this.parentRowNode.sibling.rowTop&&e<this.parentRowNode.sibling.rowTop+this.parentRowNode.sibling.rowHeight)return this.parentRowNode.sibling.rowIndex;let t=Number.MAX_SAFE_INTEGER,o=null,s=Number.MAX_SAFE_INTEGER,r=null;if(this.cache.getNodes().forEach(({node:l})=>{const a=Math.abs(e-l.rowTop);if(l.rowTop<e){a<t&&(t=a,o=l);return}a<s&&(s=a,r=l)}),o=o,r=r,o){const l=this.blockUtils.getIndexAtPixel(o,e);if(l!=null)return l}const i=this.gos.getRowHeightAsNumber();if(r){const l=r.rowTop,a=Math.ceil((l-e)/i);return r.rowIndex-a}const n=this.topPx+this.heightPx,d=Math.floor((n-e)/i);return this.getDisplayIndexEnd()-d}getChildStore(e){return this.storeUtils.getChildStore(e,this,t=>{const o=this.cache.getNodes().find(s=>s.node.key==t);return o?o.node:null})}forEachChildStoreShallow(e){this.cache.getNodes().forEach(({node:t})=>{t.childStore&&e(t.childStore)})}refreshAfterSort(e){if(this.storeUtils.isServerSideSortAllLevels()||this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e)){const o=this.cache.isStoreFullyLoaded(),s=this.gos.get("serverSideEnableClientSideSort");if(!(o&&s)){const i=this.cache.getRowCount();this.destroyBean(this.cache),this.cache=this.createManagedBean(new LazyCache(this,i,this.storeParams));return}this.cache.clientSideSortRows()}this.forEachChildStoreShallow(o=>o.refreshAfterSort(e))}refreshAfterFilter(e){if(!this.storeUtils.isServerSideOnlyRefreshFilteredGroups()||this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e)){this.refreshStore(!0);return}this.forEachChildStoreShallow(o=>o.refreshAfterFilter(e))}refreshStore(e){if(e){this.destroyBean(this.cache),this.cache=this.createManagedBean(new LazyCache(this,1,this.storeParams)),this.fireStoreUpdatedEvent();return}this.cache.markNodesForRefresh()}getTopLevelRowDisplayedIndex(e){const t=this.cache.getDisplayIndexFromStoreIndex(e);return t??e}isLastRowIndexKnown(){return this.cache.isLastRowIndexKnown()}getRowNodesInRange(e,t){const o=[];let s=!1;return import_core4._.missing(e)&&(s=!0),this.cache.getNodes().filter(({node:r})=>r.rowIndex>=e.rowIndex&&r.rowIndex<=t.rowIndex).map(({node:r})=>r)}addStoreStates(e){e.push({suppressInfiniteScroll:!1,route:this.parentRowNode.getGroupKeys(),rowCount:this.getRowCount(),lastRowIndexKnown:this.isLastRowIndexKnown(),info:this.info,maxBlocksInCache:this.storeParams.maxBlocksInCache,cacheBlockSize:this.storeParams.cacheBlockSize}),this.forEachChildStoreShallow(t=>t.addStoreStates(e))}getIdSequence(){return this.idSequence}getParentNode(){return this.parentRowNode}getRowDetails(){return{field:this.groupField,group:this.group,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn}}getSsrmParams(){return this.ssrmParams}setStoreInfo(e){e&&Object.assign(this.info,e)}fireStoreUpdatedEvent(){const e={type:import_core4.Events.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(e)}fireRefreshFinishedEvent(){const e={type:import_core4.Events.EVENT_STORE_REFRESHED,route:this.parentRowNode.getRoute()};this.eventService.dispatchEvent(e)}getBlockStates(){return this.cache.getBlockStates()}getStoreBounds(){return{topPx:this.topPx,heightPx:this.heightPx}}getCache(){return this.cache}};__decorateClass([(0,import_core4.Autowired)("ssrmBlockUtils")],LazyStore.prototype,"blockUtils",2),__decorateClass([(0,import_core4.Autowired)("ssrmStoreUtils")],LazyStore.prototype,"storeUtils",2),__decorateClass([(0,import_core4.Autowired)("columnModel")],LazyStore.prototype,"columnModel",2),__decorateClass([(0,import_core4.Autowired)("selectionService")],LazyStore.prototype,"selectionService",2),__decorateClass([import_core4.PostConstruct],LazyStore.prototype,"init",1),__decorateClass([import_core4.PreDestroy],LazyStore.prototype,"destroyRowNodes",1);var ServerSideRowModel=class extends import_core5.BeanStub{constructor(){super(...arguments),this.onRowHeightChanged_debounced=import_core5._.debounce(this.onRowHeightChanged.bind(this),100),this.pauseStoreUpdateListening=!1,this.started=!1,this.managingPivotResultColumns=!1}ensureRowHeightsValid(){return!1}start(){this.started=!0,this.updateDatasource()}destroyDatasource(){this.datasource&&(this.datasource.destroy&&this.datasource.destroy(),this.rowRenderer.datasourceChanged(),this.datasource=void 0)}addEventListeners(){this.addManagedListener(this.eventService,import_core5.Events.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,import_core5.Events.EVENT_STORE_UPDATED,this.onStoreUpdated.bind(this));const e=this.resetRootStore.bind(this);this.addManagedListener(this.eventService,import_core5.Events.EVENT_COLUMN_VALUE_CHANGED,e),this.addManagedListener(this.eventService,import_core5.Events.EVENT_COLUMN_PIVOT_CHANGED,e),this.addManagedListener(this.eventService,import_core5.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,e),this.addManagedListener(this.eventService,import_core5.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,e),this.addManagedPropertyListeners(["masterDetail","treeData","removePivotHeaderRowWhenSingleValueColumn","suppressServerSideInfiniteScroll","cacheBlockSize"],e),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights()),this.verifyProps(),this.addManagedPropertyListener("serverSideDatasource",()=>this.updateDatasource())}updateDatasource(){const e=this.gos.get("serverSideDatasource");e&&this.setDatasource(e)}verifyProps(){this.gos.exists("initialGroupOrderComparator")&&import_core5._.warnOnce("initialGroupOrderComparator cannot be used with Server Side Row Model."),this.gos.isRowSelection()&&!this.gos.exists("getRowId")&&import_core5._.warnOnce("getRowId callback must be provided for Server Side Row Model selection to work correctly.")}setDatasource(e){this.started&&(this.destroyDatasource(),this.datasource=e,this.resetRootStore())}applyRowData(e,t,o){const s=this.getRootStore();if(!s)return;const r=s.getChildStore(o);r&&(r instanceof LazyStore?r.applyRowData(e,t,e.rowData.length):r instanceof FullStore&&r.processServerResult(e))}isLastRowIndexKnown(){const e=this.getRootStore();return e?e.isLastRowIndexKnown():!1}onColumnEverything(){if(!this.storeParams){this.resetRootStore();return}const e=this.columnsToValueObjects(this.columnModel.getRowGroupColumns()),t=this.columnsToValueObjects(this.columnModel.getValueColumns()),o=this.columnsToValueObjects(this.columnModel.getPivotColumns()),s=a=>{const c={};a.oldCols.forEach(f=>c[f.id]=f);const h=a.newCols.every(f=>{const g=c[f.id];return g&&delete c[f.id],g&&g.field===f.field&&g.aggFunc===f.aggFunc}),u=!a.allowRemovedColumns&&!!Object.values(c).length;return h&&!u},r=!import_core5._.jsonEquals(this.storeParams.sortModel,this.sortController.getSortModel()),i=!s({oldCols:this.storeParams.rowGroupCols,newCols:e}),n=!s({oldCols:this.storeParams.pivotCols,newCols:o}),d=!!e?.length&&!s({oldCols:this.storeParams.valueCols,newCols:t,allowRemovedColumns:!0});if(r||i||n||d)this.resetRootStore();else{const a=this.createStoreParams();this.storeParams.rowGroupCols=a.rowGroupCols,this.storeParams.pivotCols=a.pivotCols,this.storeParams.valueCols=a.valueCols}}destroyRootStore(){!this.rootNode||!this.rootNode.childStore||(this.rootNode.childStore=this.destroyBean(this.rootNode.childStore),this.nodeManager.clear())}refreshAfterSort(e,t){this.storeParams&&(this.storeParams.sortModel=e);const o=this.getRootStore();o&&(o.refreshAfterSort(t),this.onStoreUpdated())}generateSecondaryColumns(e){if(!this.pivotColDefService){import_core5.ModuleRegistry.__assertRegistered(import_core5.ModuleNames.RowGroupingModule,"pivotResultFields",this.context.getGridId());return}const t=this.pivotColDefService.createColDefsFromFields(e);this.managingPivotResultColumns=!0,this.columnModel.setSecondaryColumns(t,"rowModelUpdated")}resetRowHeights(){const e=this.resetRowHeightsForAllRowNodes(),t=this.gos.getRowHeightForNode(this.rootNode);if(this.rootNode.setRowHeight(t.height,t.estimated),this.rootNode.sibling){const o=this.gos.getRowHeightForNode(this.rootNode.sibling);this.rootNode.sibling.setRowHeight(o.height,o.estimated)}e&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{const o=this.gos.getRowHeightForNode(t);t.setRowHeight(o.height,o.estimated);const s=t.detailNode;if(s){const r=this.gos.getRowHeightForNode(s);s.setRowHeight(r.height,r.estimated)}if(t.sibling){const r=this.gos.getRowHeightForNode(t.sibling);s.setRowHeight(r.height,r.estimated)}e=!0}),e}resetRootStore(){this.destroyRootStore(),this.rootNode=new import_core5.RowNode(this.beans),this.rootNode.group=!0,this.rootNode.level=-1,this.datasource&&(this.storeParams=this.createStoreParams(),this.rootNode.childStore=this.createBean(this.storeFactory.createStore(this.storeParams,this.rootNode)),this.updateRowIndexesAndBounds()),this.managingPivotResultColumns&&(this.columnModel.setSecondaryColumns(null,"api"),this.managingPivotResultColumns=!1),this.dispatchModelUpdated(!0)}columnsToValueObjects(e){return e.map(t=>({id:t.getId(),aggFunc:t.getAggFunc(),displayName:this.columnModel.getDisplayNameForColumn(t,"model"),field:t.getColDef().field}))}createStoreParams(){const e=this.columnsToValueObjects(this.columnModel.getRowGroupColumns()),t=this.columnsToValueObjects(this.columnModel.getValueColumns()),o=this.columnsToValueObjects(this.columnModel.getPivotColumns()),s=this.gos.isGetRowHeightFunction();return{valueCols:t,rowGroupCols:e,pivotCols:o,pivotMode:this.columnModel.isPivotMode(),filterModel:this.filterManager.isAdvancedFilterEnabled()?this.filterManager.getAdvancedFilterModel():this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),datasource:this.datasource,lastAccessedSequence:new import_core5.NumberSequence,dynamicRowHeight:s}}getParams(){return this.storeParams}dispatchModelUpdated(e=!1){const t={type:import_core5.Events.EVENT_MODEL_UPDATED,animate:!e,keepRenderedRows:!e,newPage:!1,newData:!1};this.eventService.dispatchEvent(t)}onStoreUpdated(){this.pauseStoreUpdateListening||(this.updateRowIndexesAndBounds(),this.dispatchModelUpdated())}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}onRowHeightChanged(){this.updateRowIndexesAndBounds(),this.dispatchModelUpdated()}updateRowIndexesAndBounds(){const e=this.getRootStore();e&&e.setDisplayIndexes(new import_core5.NumberSequence,{value:0})}retryLoads(){const e=this.getRootStore();e&&(e.retryLoads(),this.onStoreUpdated())}getRow(e){const t=this.getRootStore();if(t)return t.getRowUsingDisplayIndex(e)}setPaused(e){this.pauseStoreUpdateListening=e}expandAll(e){this.pauseStoreUpdateListening=!0,this.forEachNode(t=>{t.stub||t.hasChildren()&&t.setExpanded(e)}),this.pauseStoreUpdateListening=!1,this.onStoreUpdated()}refreshAfterFilter(e,t){this.storeParams&&(this.storeParams.filterModel=e);const o=this.getRootStore();o&&(o.refreshAfterFilter(t),this.onStoreUpdated())}getRootStore(){if(this.rootNode&&this.rootNode.childStore)return this.rootNode.childStore}getRowCount(){const e=this.getRootStore();return e?e.getDisplayIndexEnd():0}getTopLevelRowCount(){const e=this.getRootStore();return e?e.getRowCount():1}getTopLevelRowDisplayedIndex(e){const t=this.getRootStore();return t?t.getTopLevelRowDisplayedIndex(e):e}getRowBounds(e){const t=this.getRootStore();return t?t.getRowBounds(e):{rowTop:0,rowHeight:this.gos.getRowHeightAsNumber()}}getBlockStates(){const e=this.getRootStore();if(!e)return;const t={};return e.forEachStoreDeep(o=>{if(o instanceof FullStore){const{id:s,state:r}=o.getBlockStateJson();t[s]=r}else if(o instanceof LazyStore)Object.entries(o.getBlockStates()).forEach(([s,r])=>{t[s]=r});else throw new Error("AG Grid: Unsupported store type")}),t}getRowIndexAtPixel(e){const t=this.getRootStore();return e<=0||!t?0:t.getRowIndexAtPixel(e)}isEmpty(){return!1}isRowsToRender(){return this.getRootStore()!=null&&this.getRowCount()>0}getType(){return"serverSide"}forEachNode(e){const t=this.getRootStore();t&&t.forEachNodeDeep(e)}forEachNodeAfterFilterAndSort(e,t=!1){const o=this.getRootStore();o&&o.forEachNodeDeepAfterFilterAndSort(e,void 0,t)}executeOnStore(e,t){if(!this.started)return!1;const o=this.getRootStore();if(!o)return!0;const s=o.getChildStore(e);return s&&t(s),!0}refreshStore(e={}){const t=e.route?e.route:[];this.executeOnStore(t,o=>o.refreshStore(e.purge==!0))}getStoreState(){const e=[],t=this.getRootStore();return t&&t.addStoreStates(e),e}getNodesInRangeForSelection(e,t){if(!import_core5._.exists(e))return[];if(!t)return[e];const o=e.rowIndex,s=t.rowIndex;if(o===null||s===null)return[e];const r=[],[i,n]=[o,s].sort((d,l)=>d-l);return this.forEachNode(d=>{const l=d.rowIndex;l==null||d.stub||l>=i&&l<=n&&r.push(d)}),r.length!==n-i+1?[e]:r}getRowNode(e){let t;return this.forEachNode(o=>{o.id===e&&(t=o),o.detailNode&&o.detailNode.id===e&&(t=o.detailNode)}),t}isRowPresent(e){return!!this.getRowNode(e.id)}setRowCount(e,t){const o=this.getRootStore();if(o){if(o instanceof LazyStore){o.setRowCount(e,t);return}console.error("AG Grid: Infinite scrolling must be enabled in order to set the row count.")}}};__decorateClass([(0,import_core5.Autowired)("columnModel")],ServerSideRowModel.prototype,"columnModel",2),__decorateClass([(0,import_core5.Autowired)("filterManager")],ServerSideRowModel.prototype,"filterManager",2),__decorateClass([(0,import_core5.Autowired)("sortController")],ServerSideRowModel.prototype,"sortController",2),__decorateClass([(0,import_core5.Autowired)("rowRenderer")],ServerSideRowModel.prototype,"rowRenderer",2),__decorateClass([(0,import_core5.Autowired)("ssrmNodeManager")],ServerSideRowModel.prototype,"nodeManager",2),__decorateClass([(0,import_core5.Autowired)("ssrmStoreFactory")],ServerSideRowModel.prototype,"storeFactory",2),__decorateClass([(0,import_core5.Autowired)("beans")],ServerSideRowModel.prototype,"beans",2),__decorateClass([(0,import_core5.Optional)("pivotColDefService")],ServerSideRowModel.prototype,"pivotColDefService",2),__decorateClass([import_core5.PreDestroy],ServerSideRowModel.prototype,"destroyDatasource",1),__decorateClass([import_core5.PostConstruct],ServerSideRowModel.prototype,"addEventListeners",1),__decorateClass([import_core5.PreDestroy],ServerSideRowModel.prototype,"destroyRootStore",1),ServerSideRowModel=__decorateClass([(0,import_core5.Bean)("rowModel")],ServerSideRowModel);var import_core6=require("@ag-grid-community/core"),StoreUtils=class extends import_core6.BeanStub{loadFromDatasource(e){const{storeParams:t,parentBlock:o,parentNode:s}=e,r=s.getGroupKeys();if(!t.datasource)return;const i={startRow:e.startRow,endRow:e.endRow,rowGroupCols:t.rowGroupCols,valueCols:t.valueCols,pivotCols:t.pivotCols,pivotMode:t.pivotMode,groupKeys:r,filterModel:t.filterModel,sortModel:t.sortModel},n=this.gos.addGridCommonParams({success:e.success,fail:e.fail,request:i,parentNode:e.parentNode});window.setTimeout(()=>{if(!t.datasource||!o.isAlive()){e.fail();return}t.datasource.getRows(n)},0)}getChildStore(e,t,o){if(import_core6._.missingOrEmpty(e))return t;const s=e[0],r=o(s);if(r){if(e.length===1&&!r.childStore){const d=this.serverSideRowModel.getParams();r.childStore=this.createBean(this.storeFactory.createStore(d,r))}const i=e.slice(1,e.length),n=r.childStore;return n?n.getChildStore(i):null}return null}isServerRefreshNeeded(e,t,o){if(o.valueColChanged||o.secondaryColChanged)return!0;const s=e.level+1;if(!(s<t.length))return!0;const n=t[s].id;return o.changedColumns.indexOf(n)>-1?!0:this.columnModel.getAllGridColumns().filter(c=>c.getColDef().showRowGroup&&o.changedColumns.includes(c.getId())).map(c=>c.getColDef().showRowGroup).some(c=>c===!0||c===n)}getServerSideInitialRowCount(){return this.gos.get("serverSideInitialRowCount")}assertRowModelIsServerSide(e){return this.gos.isRowModelType("serverSide")?!0:(import_core6._.warnOnce(`The '${e}' property can only be used with the Server Side Row Model.`),!1)}assertNotTreeData(e){return this.gos.get("treeData")?(import_core6._.warnOnce(`The '${e}' property cannot be used while using tree data.`),!1):!0}isServerSideSortAllLevels(){return this.gos.get("serverSideSortAllLevels")&&this.assertRowModelIsServerSide("serverSideSortAllLevels")}isServerSideOnlyRefreshFilteredGroups(){return this.gos.get("serverSideOnlyRefreshFilteredGroups")&&this.assertRowModelIsServerSide("serverSideOnlyRefreshFilteredGroups")}isServerSideSortOnServer(){return this.gos.get("serverSideSortOnServer")&&this.assertRowModelIsServerSide("serverSideSortOnServer")&&this.assertNotTreeData("serverSideSortOnServer")}isServerSideFilterOnServer(){return this.gos.get("serverSideFilterOnServer")&&this.assertRowModelIsServerSide("serverSideFilterOnServer")&&this.assertNotTreeData("serverSideFilterOnServer")}};__decorateClass([(0,import_core6.Autowired)("columnModel")],StoreUtils.prototype,"columnModel",2),__decorateClass([(0,import_core6.Autowired)("rowModel")],StoreUtils.prototype,"serverSideRowModel",2),__decorateClass([(0,import_core6.Autowired)("ssrmStoreFactory")],StoreUtils.prototype,"storeFactory",2),StoreUtils=__decorateClass([(0,import_core6.Bean)("ssrmStoreUtils")],StoreUtils);var import_core7=require("@ag-grid-community/core"),GROUP_MISSING_KEY_ID="ag-Grid-MissingKey",BlockUtils=class extends import_core7.BeanStub{createRowNode(e){const t=new import_core7.RowNode(this.beans),o=e.rowHeight!=null?e.rowHeight:this.gos.getRowHeightAsNumber();return t.setRowHeight(o),t.group=e.group,t.leafGroup=e.leafGroup,t.level=e.level,t.uiLevel=e.level,t.parent=e.parent,t.stub=!0,t.__needsRefreshWhenVisible=!1,t.group&&(t.expanded=!1,t.field=e.field,t.rowGroupColumn=e.rowGroupColumn),t}destroyRowNodes(e){e&&e.forEach(t=>this.destroyRowNode(t))}destroyRowNode(e,t=!1){e.childStore&&!t&&(this.destroyBean(e.childStore),e.childStore=null),e.sibling&&!e.footer&&this.destroyRowNode(e.sibling,!1),e.clearRowTopAndRowIndex(),e.id!=null&&this.nodeManager.removeNode(e)}setTreeGroupInfo(e){e.updateHasChildren();const t=this.gos.get("getServerSideGroupKey");e.hasChildren()&&t!=null&&(e.key=t(e.data)),!e.hasChildren()&&e.childStore!=null&&(this.destroyBean(e.childStore),e.childStore=null,e.expanded=!1)}setRowGroupInfo(e){e.key=this.valueService.getValue(e.rowGroupColumn,e),(e.key===null||e.key===void 0)&&import_core7._.doOnce(()=>{console.warn("AG Grid: null and undefined values are not allowed for server side row model keys"),e.rowGroupColumn&&console.warn(`column = ${e.rowGroupColumn.getId()}`),console.warn("data is ",e.data)},"ServerSideBlock-CannotHaveNullOrUndefinedForKey"),this.beans.gos.getGroupTotalRowCallback()({node:e})&&(e.createFooter(),e.sibling&&(e.sibling.uiLevel=e.uiLevel+1))}setMasterDetailInfo(e){const t=this.gos.get("isRowMaster");t!=null?e.master=t(e.data):e.master=!0}updateDataIntoRowNode(e,t){e.updateData(t),this.gos.get("treeData")?(this.setTreeGroupInfo(e),this.setChildCountIntoRowNode(e)):e.group?(this.setChildCountIntoRowNode(e),e.footer||(this.beans.gos.getGroupTotalRowCallback()({node:e})?e.sibling?e.sibling.updateData(t):e.createFooter():e.sibling&&e.destroyFooter())):this.gos.get("masterDetail")}setDataIntoRowNode(e,t,o,s){var r;e.stub=!1;const i=this.gos.get("treeData");import_core7._.exists(t)?(e.setDataAndId(t,o),i?this.setTreeGroupInfo(e):e.group?this.setRowGroupInfo(e):this.gos.get("masterDetail")&&this.setMasterDetailInfo(e)):(e.setDataAndId(void 0,void 0),e.key=null),(i||e.group)&&(this.setGroupDataIntoRowNode(e),this.setChildCountIntoRowNode(e)),import_core7._.exists(t)&&(e.setRowHeight(this.gos.getRowHeightForNode(e,!1,s).height),(r=e.sibling)==null||r.setRowHeight(this.gos.getRowHeightForNode(e.sibling,!1,s).height))}setChildCountIntoRowNode(e){const t=this.gos.get("getChildCount");t&&e.setAllChildrenCount(t(e.data))}setGroupDataIntoRowNode(e){const t=this.columnModel.getGroupDisplayColumns(),o=this.gos.get("treeData");t.forEach(s=>{if(e.groupData==null&&(e.groupData={}),o)e.groupData[s.getColId()]=e.key;else if(s.isRowGroupDisplayed(e.rowGroupColumn.getId())){const r=this.valueService.getValue(e.rowGroupColumn,e);e.groupData[s.getColId()]=r}})}clearDisplayIndex(e){e.clearRowTopAndRowIndex(),e.hasChildren()&&import_core7._.exists(e.childStore)&&e.childStore.clearDisplayIndexes(),e.master&&e.detailNode&&e.detailNode.clearRowTopAndRowIndex()}setDisplayIndex(e,t,o){if(e.setRowIndex(t.next()),e.setRowTop(o.value),o.value+=e.rowHeight,e.footer)return;if(e.master&&(e.expanded&&e.detailNode?(e.detailNode.setRowIndex(t.next()),e.detailNode.setRowTop(o.value),o.value+=e.detailNode.rowHeight):e.detailNode&&e.detailNode.clearRowTopAndRowIndex()),e.hasChildren()&&import_core7._.exists(e.childStore)){const i=e.childStore;e.expanded?i.setDisplayIndexes(t,o):i.clearDisplayIndexes()}}binarySearchForDisplayIndex(e,t){let o=0,s=t.length-1;if(import_core7._.missing(s)||import_core7._.missing(o)){console.warn(`AG Grid: error: topPointer = ${s}, bottomPointer = ${o}`);return}for(;;){const r=Math.floor((o+s)/2),i=t[r];if(i.rowIndex===e)return i;const n=i.master&&i.expanded,d=i.detailNode;if(n&&d&&d.rowIndex===e)return i.detailNode;const l=i.childStore;if(i.expanded&&l&&l.isDisplayIndexInStore(e))return l.getRowUsingDisplayIndex(e);if(i.rowIndex<e)o=r+1;else if(i.rowIndex>e)s=r-1;else{console.warn(`AG Grid: error: unable to locate rowIndex = ${e} in cache`);return}}}extractRowBounds(e,t){const o=s=>({rowHeight:s.rowHeight,rowTop:s.rowTop});if(e.rowIndex===t)return o(e);if(e.hasChildren()&&e.expanded&&import_core7._.exists(e.childStore)){const s=e.childStore;if(s.isDisplayIndexInStore(t))return s.getRowBounds(t)}else if(e.master&&e.expanded&&import_core7._.exists(e.detailNode)&&e.detailNode.rowIndex===t)return o(e.detailNode)}getIndexAtPixel(e,t){if(e.isPixelInRange(t))return e.rowIndex;const o=e.master&&e.expanded,s=e.detailNode;if(o&&s&&s.isPixelInRange(t))return e.detailNode.rowIndex;if(e.hasChildren()&&e.expanded&&import_core7._.exists(e.childStore)){const r=e.childStore;if(r.isPixelInRange(t))return r.getRowIndexAtPixel(t)}return null}createNodeIdPrefix(e){const t=[];let o=e;for(;o&&o.level>=0;)o.key===""?t.push(GROUP_MISSING_KEY_ID):t.push(o.key),o=o.parent;if(t.length>0)return t.reverse().join("-")}checkOpenByDefault(e){return this.expansionService.checkOpenByDefault(e)}};__decorateClass([(0,import_core7.Autowired)("valueService")],BlockUtils.prototype,"valueService",2),__decorateClass([(0,import_core7.Autowired)("columnModel")],BlockUtils.prototype,"columnModel",2),__decorateClass([(0,import_core7.Autowired)("ssrmNodeManager")],BlockUtils.prototype,"nodeManager",2),__decorateClass([(0,import_core7.Autowired)("beans")],BlockUtils.prototype,"beans",2),__decorateClass([(0,import_core7.Autowired)("expansionService")],BlockUtils.prototype,"expansionService",2),BlockUtils=__decorateClass([(0,import_core7.Bean)("ssrmBlockUtils")],BlockUtils);var import_core8=require("@ag-grid-community/core"),NodeManager=class{constructor(){this.rowNodes={}}addRowNode(e){const t=e.id;this.rowNodes[t]&&(console.warn(`AG Grid: Duplicate node id ${e.id}. Row ID's are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values.`),console.warn("first instance",this.rowNodes[t].data),console.warn("second instance",e.data)),this.rowNodes[t]=e}removeNode(e){const t=e.id;this.rowNodes[t]&&(this.rowNodes[t]=void 0)}clear(){this.rowNodes={}}};__decorateClass([import_core8.PreDestroy],NodeManager.prototype,"clear",1),NodeManager=__decorateClass([(0,import_core8.Bean)("ssrmNodeManager")],NodeManager);var import_core9=require("@ag-grid-community/core"),TransactionManager=class extends import_core9.BeanStub{constructor(){super(...arguments),this.asyncTransactions=[]}postConstruct(){this.gos.isRowModelType("serverSide")}applyTransactionAsync(e,t){this.asyncTransactionsTimeout==null&&this.scheduleExecuteAsync(),this.asyncTransactions.push({transaction:e,callback:t})}scheduleExecuteAsync(){const e=this.gos.getAsyncTransactionWaitMillis();this.asyncTransactionsTimeout=window.setTimeout(()=>{this.executeAsyncTransactions()},e)}executeAsyncTransactions(){if(!this.asyncTransactions)return;const e=[],t=[],o=[];let s=!1;if(this.asyncTransactions.forEach(r=>{let i;if(this.serverSideRowModel.executeOnStore(r.transaction.route,l=>{i=l.applyTransaction(r.transaction)})?i==null&&(i={status:import_core9.ServerSideTransactionResultStatus.StoreNotFound}):i={status:import_core9.ServerSideTransactionResultStatus.StoreNotStarted},t.push(i),i.status==import_core9.ServerSideTransactionResultStatus.StoreLoading){o.push(r);return}r.callback&&e.push(()=>r.callback(i)),i.status===import_core9.ServerSideTransactionResultStatus.Applied&&(s=!0)}),e.length>0&&window.setTimeout(()=>{e.forEach(r=>r())},0),this.asyncTransactionsTimeout=void 0,this.asyncTransactions=o,s&&(this.valueCache.onDataChanged(),this.eventService.dispatchEvent({type:import_core9.Events.EVENT_STORE_UPDATED})),t.length>0){const r={type:import_core9.Events.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:t};this.eventService.dispatchEvent(r)}}flushAsyncTransactions(){this.asyncTransactionsTimeout!=null&&clearTimeout(this.asyncTransactionsTimeout),this.executeAsyncTransactions()}applyTransaction(e){let t;if(this.serverSideRowModel.executeOnStore(e.route,s=>{t=s.applyTransaction(e)}))if(t){if(this.valueCache.onDataChanged(),t.remove){const s=t.remove.map(r=>r.id);this.selectionService.deleteSelectionStateFromParent(e.route||[],s)}return this.eventService.dispatchEvent({type:import_core9.Events.EVENT_STORE_UPDATED}),t}else return{status:import_core9.ServerSideTransactionResultStatus.StoreNotFound};else return{status:import_core9.ServerSideTransactionResultStatus.StoreNotStarted}}};__decorateClass([(0,import_core9.Autowired)("rowNodeBlockLoader")],TransactionManager.prototype,"rowNodeBlockLoader",2),__decorateClass([(0,import_core9.Autowired)("valueCache")],TransactionManager.prototype,"valueCache",2),__decorateClass([(0,import_core9.Autowired)("rowModel")],TransactionManager.prototype,"serverSideRowModel",2),__decorateClass([(0,import_core9.Autowired)("rowRenderer")],TransactionManager.prototype,"rowRenderer",2),__decorateClass([(0,import_core9.Autowired)("selectionService")],TransactionManager.prototype,"selectionService",2),__decorateClass([import_core9.PostConstruct],TransactionManager.prototype,"postConstruct",1),TransactionManager=__decorateClass([(0,import_core9.Bean)("ssrmTransactionManager")],TransactionManager);var import_core10=require("@ag-grid-community/core"),ExpandListener=class extends import_core10.BeanStub{postConstruct(){this.gos.isRowModelType("serverSide")&&this.addManagedListener(this.eventService,import_core10.Events.EVENT_ROW_GROUP_OPENED,this.onRowGroupOpened.bind(this))}onRowGroupOpened(e){const t=e.node;if(t.expanded){if(t.master)this.createDetailNode(t);else if(import_core10._.missing(t.childStore)){const s=this.serverSideRowModel.getParams();t.childStore=this.createBean(this.storeFactory.createStore(s,t))}}else this.gos.get("purgeClosedRowNodes")&&import_core10._.exists(t.childStore)&&(t.childStore=this.destroyBean(t.childStore));const o={type:import_core10.Events.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(o)}createDetailNode(e){if(import_core10._.exists(e.detailNode))return e.detailNode;const t=new import_core10.RowNode(this.beans);t.detail=!0,t.selectable=!1,t.parent=e,import_core10._.exists(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1;const o=200,s=this.gos.getRowHeightForNode(t).height;return t.rowHeight=s||o,e.detailNode=t,t}};__decorateClass([(0,import_core10.Autowired)("rowModel")],ExpandListener.prototype,"serverSideRowModel",2),__decorateClass([(0,import_core10.Autowired)("ssrmStoreFactory")],ExpandListener.prototype,"storeFactory",2),__decorateClass([(0,import_core10.Autowired)("beans")],ExpandListener.prototype,"beans",2),__decorateClass([import_core10.PostConstruct],ExpandListener.prototype,"postConstruct",1),ExpandListener=__decorateClass([(0,import_core10.Bean)("ssrmExpandListener")],ExpandListener);var import_core11=require("@ag-grid-community/core"),SortListener=class extends import_core11.BeanStub{postConstruct(){this.gos.isRowModelType("serverSide")&&this.addManagedListener(this.eventService,import_core11.Events.EVENT_SORT_CHANGED,this.onSortChanged.bind(this))}onSortChanged(){const e=this.serverSideRowModel.getParams();if(!e)return;const t=this.sortController.getSortModel(),o=e.sortModel,s=this.findChangedColumnsInSort(t,o),r=this.listenerUtils.isSortingWithValueColumn(s),i=this.listenerUtils.isSortingWithSecondaryColumn(s),n={valueColChanged:r,secondaryColChanged:i,changedColumns:s};this.serverSideRowModel.refreshAfterSort(t,n)}findChangedColumnsInSort(e,t){let o=[];[e,t].forEach(i=>{if(i){const n=i.map(d=>d.colId);o=o.concat(n)}});const s=(i,n)=>{const d=i?i.sort:null,l=n?n.sort:null;return d!==l},r=(i,n)=>{const d=i?t.indexOf(i):-1,l=n?e.indexOf(n):-1;return d!==l};return o.filter(i=>{const n=t.find(l=>l.colId===i),d=e.find(l=>l.colId===i);return s(n,d)||r(n,d)})}};__decorateClass([(0,import_core11.Autowired)("sortController")],SortListener.prototype,"sortController",2),__decorateClass([(0,import_core11.Autowired)("rowModel")],SortListener.prototype,"serverSideRowModel",2),__decorateClass([(0,import_core11.Autowired)("ssrmListenerUtils")],SortListener.prototype,"listenerUtils",2),__decorateClass([import_core11.PostConstruct],SortListener.prototype,"postConstruct",1),SortListener=__decorateClass([(0,import_core11.Bean)("ssrmSortService")],SortListener);var import_core12=require("@ag-grid-community/core"),FilterListener=class extends import_core12.BeanStub{postConstruct(){this.gos.isRowModelType("serverSide")&&(this.addManagedListener(this.eventService,import_core12.Events.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,()=>this.onFilterChanged(!0)),this.addManagedListener(this.eventService,import_core12.Events.EVENT_FILTER_CHANGED,()=>this.onFilterChanged()))}onFilterChanged(e){const t=this.serverSideRowModel.getParams();if(!t)return;const o=t.filterModel;let s,r;if(this.filterManager.isAdvancedFilterEnabled()){s=this.filterManager.getAdvancedFilterModel();const l=e?Object.keys(o??{}):this.getAdvancedFilterColumns(o),a=this.getAdvancedFilterColumns(s);l.forEach(c=>a.add(c)),r=Array.from(a)}else if(s=this.filterManager.getFilterModel(),e){const l=this.getAdvancedFilterColumns(o);Object.keys(s).forEach(a=>l.add(a)),r=Array.from(l)}else r=this.findChangedColumns(o,s);const i=this.listenerUtils.isSortingWithValueColumn(r),n=this.listenerUtils.isSortingWithSecondaryColumn(r),d={valueColChanged:i,secondaryColChanged:n,changedColumns:r};this.serverSideRowModel.refreshAfterFilter(s,d)}findChangedColumns(e,t){const o={};Object.keys(e).forEach(r=>o[r]=!0),Object.keys(t).forEach(r=>o[r]=!0);const s=[];return Object.keys(o).forEach(r=>{const i=JSON.stringify(e[r]),n=JSON.stringify(t[r]);i!=n&&s.push(r)}),s}getAdvancedFilterColumns(e){const t=new Set;if(!e)return t;const o=s=>{s.filterType==="join"?s.conditions.forEach(r=>o(r)):t.add(s.colId)};return o(e),t}};__decorateClass([(0,import_core12.Autowired)("rowModel")],FilterListener.prototype,"serverSideRowModel",2),__decorateClass([(0,import_core12.Autowired)("filterManager")],FilterListener.prototype,"filterManager",2),__decorateClass([(0,import_core12.Autowired)("ssrmListenerUtils")],FilterListener.prototype,"listenerUtils",2),__decorateClass([import_core12.PostConstruct],FilterListener.prototype,"postConstruct",1),FilterListener=__decorateClass([(0,import_core12.Bean)("ssrmFilterListener")],FilterListener);var import_core13=require("@ag-grid-community/core"),StoreFactory=class{createStore(e,t){const o=this.getStoreParams(e,t),s=o.suppressInfiniteScroll?FullStore:LazyStore;return new s(e,o,t)}getStoreParams(e,t){const o=this.getLevelSpecificParams(t),s=this.isInfiniteScroll(o),r=this.getBlockSize(s,o),i=this.getMaxBlocksInCache(s,e,o);return{suppressInfiniteScroll:!s,cacheBlockSize:r,maxBlocksInCache:i}}getMaxBlocksInCache(e,t,o){if(!e)return;const s=o&&o.maxBlocksInCache!=null?o.maxBlocksInCache:this.gos.get("maxBlocksInCache");if(s!=null&&s>=0){if(t.dynamicRowHeight){import_core13._.warnOnce("Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.");return}if(this.columnModel.isAutoRowHeightActive()){import_core13._.warnOnce("Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.");return}return s}}getBlockSize(e,t){if(!e)return;const o=t&&t.cacheBlockSize!=null?t.cacheBlockSize:this.gos.get("cacheBlockSize");return o!=null&&o>0?o:100}getLevelSpecificParams(e){const t=this.gos.getCallback("getServerSideGroupLevelParams");if(!t)return;const o={level:e.level+1,parentRowNode:e.level>=0?e:void 0,rowGroupColumns:this.columnModel.getRowGroupColumns(),pivotColumns:this.columnModel.getPivotColumns(),pivotMode:this.columnModel.isPivotMode()};return t(o)}isInfiniteScroll(e){return!(e&&e.suppressInfiniteScroll!=null?e.suppressInfiniteScroll:this.isSuppressServerSideInfiniteScroll())}isSuppressServerSideInfiniteScroll(){return this.gos.get("suppressServerSideInfiniteScroll")}};__decorateClass([(0,import_core13.Autowired)("gridOptionsService")],StoreFactory.prototype,"gos",2),__decorateClass([(0,import_core13.Autowired)("columnModel")],StoreFactory.prototype,"columnModel",2),StoreFactory=__decorateClass([(0,import_core13.Bean)("ssrmStoreFactory")],StoreFactory);var import_core14=require("@ag-grid-community/core"),ListenerUtils=class{isSortingWithValueColumn(e){const t=this.columnModel.getValueColumns().map(o=>o.getColId());for(let o=0;o<e.length;o++)if(t.indexOf(e[o])>-1)return!0;return!1}isSortingWithSecondaryColumn(e){if(!this.columnModel.getSecondaryColumns())return!1;const t=this.columnModel.getSecondaryColumns().map(o=>o.getColId());for(let o=0;o<e.length;o++)if(t.indexOf(e[o])>-1)return!0;return!1}};__decorateClass([(0,import_core14.Autowired)("columnModel")],ListenerUtils.prototype,"columnModel",2),ListenerUtils=__decorateClass([(0,import_core14.Bean)("ssrmListenerUtils")],ListenerUtils);var import_core17=require("@ag-grid-community/core"),import_core15=require("@ag-grid-community/core"),DefaultStrategy=class extends import_core15.BeanStub{constructor(){super(...arguments),this.selectedState={selectAll:!1,toggledNodes:new Set},this.lastSelected=null,this.selectAllUsed=!1,this.selectedNodes={}}init(){this.rowSelection=this.gos.get("rowSelection"),this.addManagedPropertyListener("rowSelection",e=>{this.rowSelection=e.currentValue})}getSelectedState(){return{selectAll:this.selectedState.selectAll,toggledNodes:[...this.selectedState.toggledNodes]}}setSelectedState(e){const t={selectAll:!1,toggledNodes:new Set};if(typeof e!="object"){console.error("AG Grid: The provided selection state should be an object.");return}if("selectAll"in e&&typeof e.selectAll=="boolean")t.selectAll=e.selectAll;else{console.error("AG Grid: Select all status should be of boolean type.");return}if("toggledNodes"in e&&Array.isArray(e.toggledNodes))e.toggledNodes.forEach(o=>{typeof o=="string"?t.toggledNodes.add(o):console.warn(`AG Grid: Provided ids must be of string type. Invalid id provided: ${o}`)});else{console.error("AG Grid: `toggledNodes` must be an array of string ids.");return}this.selectedState=t}deleteSelectionStateFromParent(e,t){if(this.selectedState.toggledNodes.size===0)return!1;let o=!1;return t.forEach(s=>{this.selectedState.toggledNodes.delete(s)&&(o=!0)}),o}setNodesSelected(e){if(e.nodes.length===0)return 0;const t=e.clearSelection&&e.newValue&&!e.rangeSelect;if(this.rowSelection!=="multiple"||t){if(e.nodes.length>1)throw new Error("AG Grid: cannot select multiple rows when rowSelection is set to 'single'");const s=e.nodes[0];return e.newValue?(this.selectedNodes={[s.id]:s},this.selectedState={selectAll:!1,toggledNodes:new Set([s.id])}):(this.selectedNodes={},this.selectedState={selectAll:!1,toggledNodes:new Set}),this.lastSelected=s.id,1}const o=s=>{e.newValue?this.selectedNodes[s.id]=s:delete this.selectedNodes[s.id];const r=s.selectable;if(e.newValue===this.selectedState.selectAll||!r){this.selectedState.toggledNodes.delete(s.id);return}this.selectedState.toggledNodes.add(s.id)};if(e.rangeSelect&&this.lastSelected){if(e.nodes.length>1)throw new Error("AG Grid: cannot select multiple rows when using rangeSelect");const s=e.nodes[0],r=this.rowModel.getRowNode(this.lastSelected);return this.rowModel.getNodesInRangeForSelection(s,r??null).forEach(o),this.lastSelected=s.id,1}return e.nodes.forEach(o),this.lastSelected=e.nodes[e.nodes.length-1].id,1}processNewRow(e){this.selectedNodes[e.id]&&(this.selectedNodes[e.id]=e)}isNodeSelected(e){const t=this.selectedState.toggledNodes.has(e.id);return this.selectedState.selectAll?!t:t}getSelectedNodes(){return this.selectAllUsed&&console.warn("AG Grid: getSelectedNodes and getSelectedRows functions cannot be used with select all functionality with the server-side row model.\n                Use `api.getServerSideSelectionState()` instead."),Object.values(this.selectedNodes)}getSelectedRows(){return this.getSelectedNodes().map(e=>e.data)}getSelectionCount(){return this.selectedState.selectAll?-1:this.selectedState.toggledNodes.size}clearOtherNodes(e,t){const o=this.selectedState.selectAll?1:this.selectedState.toggledNodes.size-1;this.selectedState={selectAll:!1,toggledNodes:new Set([e.id])},this.rowModel.forEachNode(r=>{r!==e&&r.selectThisNode(!1,void 0,t)});const s={type:import_core15.Events.EVENT_SELECTION_CHANGED,source:t};return this.eventService.dispatchEvent(s),o}isEmpty(){var e;return!this.selectedState.selectAll&&!((e=this.selectedState.toggledNodes)!=null&&e.size)}selectAllRowNodes(e){this.selectedState={selectAll:!0,toggledNodes:new Set},this.selectedNodes={},this.selectAllUsed=!0}deselectAllRowNodes(e){this.selectedState={selectAll:!1,toggledNodes:new Set},this.selectedNodes={}}getSelectAllState(e,t){return this.selectedState.selectAll?this.selectedState.toggledNodes.size>0?null:!0:this.selectedState.toggledNodes.size>0?null:!1}};__decorateClass([(0,import_core15.Autowired)("rowModel")],DefaultStrategy.prototype,"rowModel",2),__decorateClass([import_core15.PostConstruct],DefaultStrategy.prototype,"init",1);var import_core16=require("@ag-grid-community/core"),GroupSelectsChildrenStrategy=class extends import_core16.BeanStub{constructor(){super(...arguments),this.selectedState={selectAllChildren:!1,toggledNodes:new Map},this.lastSelected=null}init(){this.addManagedListener(this.eventService,import_core16.Events.EVENT_MODEL_UPDATED,()=>this.removeRedundantState()),this.addManagedListener(this.eventService,import_core16.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.selectionService.reset("rowGroupChanged"))}getSelectedState(){const e=this.gos.get("treeData"),t=(o,s,r)=>{const i={nodeId:r};if((e||s<=this.columnModel.getRowGroupColumns().length)&&(i.selectAllChildren=o.selectAllChildren),o.toggledNodes.size){const n=[];o.toggledNodes.forEach((d,l)=>{const a=t(d,s+1,l);n.push(a)}),i.toggledNodes=n}return i};return t(this.selectedState,0)}setSelectedState(e){const t=(o,s)=>{var r,i;if(typeof o!="object")throw new Error("AG Grid: Each provided state object must be an object.");if("selectAllChildren"in o&&typeof o.selectAllChildren!="boolean")throw new Error("AG Grid: `selectAllChildren` must be a boolean value or undefined.");if("toggledNodes"in o){if(!Array.isArray(o.toggledNodes))throw new Error("AG Grid: `toggledNodes` must be an array.");if(!o.toggledNodes.every(c=>typeof c=="object"&&"nodeId"in c&&typeof c.nodeId=="string"))throw new Error("AG Grid: Every `toggledNode` requires an associated string id.")}const n=(r=o.selectAllChildren)!=null?r:!s,d=(i=o.toggledNodes)==null?void 0:i.map(a=>[a.nodeId,t(a,n)]);if(d?.some(([a,c])=>n===c.selectAllChildren&&c.toggledNodes.size===0))throw new Error(`
     2|                     AG Grid: AG Grid: Row selection state could not be parsed due to invalid data. Ensure all child state has toggledNodes or does not conform with the parent rule.
     3|                     Please rebuild the selection state and reapply it.
     4|                 `);return{selectAllChildren:n,toggledNodes:new Map(d)}};try{this.selectedState=t(e,!!e.selectAllChildren)}catch(o){console.error(o.message)}}deleteSelectionStateFromParent(e,t){let o=this.selectedState;const s=[...e];for(;o&&s.length;)o=o.toggledNodes.get(s.pop());if(!o)return!1;let r=!1;return t.forEach(i=>{o?.toggledNodes.delete(i)&&(r=!0)}),r&&this.removeRedundantState(),r}setNodesSelected(e){const t=e,{nodes:o}=t,s=__objRest(t,["nodes"]);if(o.length===0)return 0;if(e.rangeSelect){if(o.length>1)throw new Error("AG Grid: cannot select multiple rows when using rangeSelect");const r=o[0],n=this.rowModel.getNodesInRangeForSelection(r,this.lastSelected).map(this.getRouteToNode).sort((l,a)=>a.length-l.length),d=new Set;return n.forEach(l=>{d.has(l[l.length-1])||(l.forEach(a=>d.add(a)),this.recursivelySelectNode(l,this.selectedState,__spreadValues({node:r},s)))}),this.removeRedundantState(),this.lastSelected=r,1}return e.nodes.forEach(r=>{const i=this.getRouteToNode(r);this.recursivelySelectNode(i,this.selectedState,__spreadProps(__spreadValues({},s),{node:r}))}),this.removeRedundantState(),this.lastSelected=e.nodes[e.nodes.length-1],1}isNodeSelected(e){const t=this.getRouteToNode(e);return this.isNodePathSelected(t,this.selectedState)}isNodePathSelected([e,...t],o){if(t.length===0){const s=o.toggledNodes.has(e.id);if(e.hasChildren()){const r=o.toggledNodes.get(e.id);if(r&&r.toggledNodes.size)return}return o.selectAllChildren?!s:s}if(o.toggledNodes.has(e.id)){const s=o.toggledNodes.get(e.id);if(s)return this.isNodePathSelected(t,s)}return!!o.selectAllChildren}getRouteToNode(e){const t=[];let o=e;for(;o.parent;)t.push(o),o=o.parent;return t.reverse()}removeRedundantState(){if(this.filterManager.isAnyFilterPresent())return;const e=(t=this.selectedState,o,s)=>{if(t.toggledNodes.forEach((n,d)=>{e(n,d,t)}),o){const n=this.rowModel.getRowNode(o),d=n?.childStore;if(d?.isLastRowIndexKnown()&&t.toggledNodes.size>=d.getRowCount()){for(const c of t.toggledNodes.entries()){const[h,u]=c;if(u.toggledNodes.size>0||!this.rowModel.getRowNode(h))return}t.selectAllChildren=!t.selectAllChildren,t.toggledNodes.clear()}}const r=t.toggledNodes.size===0,i=s?.selectAllChildren===t.selectAllChildren;r&&i&&s?.toggledNodes.delete(o)};e()}recursivelySelectNode([e,...t],o,s){if(!e)return;if(!t.length){const d=e.selectable;if(o.selectAllChildren===s.newValue||!d){o.toggledNodes.delete(e.id);return}const a={selectAllChildren:s.newValue,toggledNodes:new Map};o.toggledNodes.set(e.id,a);return}const i=o.toggledNodes.has(e.id),n=i?o.toggledNodes.get(e.id):{selectAllChildren:o.selectAllChildren,toggledNodes:new Map};i||o.toggledNodes.set(e.id,n),this.recursivelySelectNode(t,n,s),o.selectAllChildren===n.selectAllChildren&&n.toggledNodes.size===0&&o.toggledNodes.delete(e.id)}getSelectedNodes(){console.warn("AG Grid: `getSelectedNodes` and `getSelectedRows` functions cannot be used with `groupSelectsChildren` and the server-side row model.\n            Use `api.getServerSideSelectionState()` instead.");const e=[];return this.rowModel.forEachNode(t=>{t.isSelected()&&e.push(t)}),e}processNewRow(e){}getSelectedRows(){return this.getSelectedNodes().map(e=>e.data)}getSelectionCount(){return-1}isEmpty(){var e;return!this.selectedState.selectAllChildren&&!((e=this.selectedState.toggledNodes)!=null&&e.size)}selectAllRowNodes(e){this.selectedState={selectAllChildren:!0,toggledNodes:new Map}}deselectAllRowNodes(e){this.selectedState={selectAllChildren:!1,toggledNodes:new Map}}getSelectAllState(e,t){return this.selectedState.selectAllChildren?this.selectedState.toggledNodes.size>0?null:!0:this.selectedState.toggledNodes.size>0?null:!1}};__decorateClass([(0,import_core16.Autowired)("rowModel")],GroupSelectsChildrenStrategy.prototype,"rowModel",2),__decorateClass([(0,import_core16.Autowired)("columnModel")],GroupSelectsChildrenStrategy.prototype,"columnModel",2),__decorateClass([(0,import_core16.Autowired)("filterManager")],GroupSelectsChildrenStrategy.prototype,"filterManager",2),__decorateClass([(0,import_core16.Autowired)("rowModel")],GroupSelectsChildrenStrategy.prototype,"serverSideRowModel",2),__decorateClass([(0,import_core16.Autowired)("selectionService")],GroupSelectsChildrenStrategy.prototype,"selectionService",2),__decorateClass([import_core16.PostConstruct],GroupSelectsChildrenStrategy.prototype,"init",1);var ServerSideSelectionService=class extends import_core17.BeanStub{init(){const e=this.gos.get("groupSelectsChildren");this.addManagedPropertyListener("groupSelectsChildren",o=>{this.destroyBean(this.selectionStrategy);const s=o.currentValue?GroupSelectsChildrenStrategy:DefaultStrategy;this.selectionStrategy=this.createManagedBean(new s),this.shotgunResetNodeSelectionState();const r={type:import_core17.Events.EVENT_SELECTION_CHANGED,source:"api"};this.eventService.dispatchEvent(r)}),this.addManagedPropertyListener("rowSelection",()=>this.deselectAllRowNodes({source:"api"}));const t=e?GroupSelectsChildrenStrategy:DefaultStrategy;this.selectionStrategy=this.createManagedBean(new t)}getSelectionState(){return this.selectionStrategy.getSelectedState()}setSelectionState(e,t){if(Array.isArray(e))return;this.selectionStrategy.setSelectedState(e),this.shotgunResetNodeSelectionState();const o={type:import_core17.Events.EVENT_SELECTION_CHANGED,source:t};this.eventService.dispatchEvent(o)}setNodesSelected(e){const t=e,{nodes:o}=t,s=__objRest(t,["nodes"]),r=this.gos.get("rowSelection");if(o.length>1&&r!=="multiple")return console.warn("AG Grid: cannot multi select while rowSelection='single'"),0;if(o.length>1&&e.rangeSelect)return console.warn("AG Grid: cannot use range selection when multi selecting rows"),0;const i=__spreadValues({nodes:o.filter(l=>l.selectable)},s);if(!i.nodes.length)return 0;const n=this.selectionStrategy.setNodesSelected(i);this.shotgunResetNodeSelectionState(i.source);const d={type:import_core17.Events.EVENT_SELECTION_CHANGED,source:i.source};return this.eventService.dispatchEvent(d),n}deleteSelectionStateFromParent(e,t){if(!this.selectionStrategy.deleteSelectionStateFromParent(e,t))return;this.shotgunResetNodeSelectionState();const s={type:import_core17.Events.EVENT_SELECTION_CHANGED,source:"api"};this.eventService.dispatchEvent(s)}shotgunResetNodeSelectionState(e){this.rowModel.forEachNode(t=>{if(t.stub)return;const o=this.selectionStrategy.isNodeSelected(t);o!==t.isSelected()&&t.selectThisNode(o,void 0,e)})}getSelectedNodes(){return this.selectionStrategy.getSelectedNodes()}getSelectedRows(){return this.selectionStrategy.getSelectedRows()}getSelectionCount(){return this.selectionStrategy.getSelectionCount()}syncInRowNode(e,t){this.selectionStrategy.processNewRow(e);const o=this.selectionStrategy.isNodeSelected(e);if(o!=!1&&!e.selectable){this.selectionStrategy.setNodesSelected({nodes:[e],newValue:!1,source:"api"}),this.shotgunResetNodeSelectionState();const s={type:import_core17.Events.EVENT_SELECTION_CHANGED,source:"api"};this.eventService.dispatchEvent(s);return}e.setSelectedInitialValue(o)}reset(){this.selectionStrategy.deselectAllRowNodes({source:"api"})}isEmpty(){return this.selectionStrategy.isEmpty()}hasNodesToSelect(e=!1,t=!1){return!0}selectAllRowNodes(e){(e.justCurrentPage||e.justFiltered)&&console.warn("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'"),this.selectionStrategy.selectAllRowNodes(e),this.rowModel.forEachNode(o=>{o.stub||o.selectThisNode(!0,void 0,e.source)});const t={type:import_core17.Events.EVENT_SELECTION_CHANGED,source:e.source};this.eventService.dispatchEvent(t)}deselectAllRowNodes(e){(e.justCurrentPage||e.justFiltered)&&console.warn("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'"),this.selectionStrategy.deselectAllRowNodes(e),this.rowModel.forEachNode(o=>{o.stub||o.selectThisNode(!1,void 0,e.source)});const t={type:import_core17.Events.EVENT_SELECTION_CHANGED,source:e.source};this.eventService.dispatchEvent(t)}getSelectAllState(e,t){return this.selectionStrategy.getSelectAllState(e,t)}updateGroupsFromChildrenSelections(e,t){return!1}getBestCostNodeSelection(){console.warn("AG Grid: calling gridApi.getBestCostNodeSelection() is only possible when using rowModelType=`clientSide`.")}filterFromSelection(){}};__decorateClass([(0,import_core17.Autowired)("rowModel")],ServerSideSelectionService.prototype,"rowModel",2),__decorateClass([import_core17.PostConstruct],ServerSideSelectionService.prototype,"init",1),ServerSideSelectionService=__decorateClass([(0,import_core17.Bean)("selectionService")],ServerSideSelectionService);var VERSION="31.3.4",import_core18=require("@ag-grid-community/core"),ServerSideExpansionService=class extends import_core18.ExpansionService{constructor(){super(...arguments),this.queuedRowIds=new Set}postConstruct(){super.postConstruct(),this.addManagedListener(this.eventService,import_core18.Events.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>{this.queuedRowIds.clear()})}checkOpenByDefault(e){if(!e.isExpandable())return;if(this.queuedRowIds.has(e.id)){this.queuedRowIds.delete(e.id),e.setExpanded(!0);return}const t=this.gos.getCallback("isServerSideGroupOpenByDefault");if(!t)return;const o={data:e.data,rowNode:e};t(o)&&e.setExpanded(!0)}expandRows(e){e.forEach(t=>{const o=this.serverSideRowModel.getRowNode(t);o?o.setExpanded(!0):this.queuedRowIds.add(t)})}expandAll(e){this.serverSideRowModel.expandAll(e)}onGroupExpandedOrCollapsed(){}};__decorateClass([(0,import_core18.Autowired)("rowModel")],ServerSideExpansionService.prototype,"serverSideRowModel",2),ServerSideExpansionService=__decorateClass([(0,import_core18.Bean)("expansionService")],ServerSideExpansionService);var ServerSideRowModelModule={version:VERSION,moduleName:import_core19.ModuleNames.ServerSideRowModelModule,rowModel:"serverSide",beans:[ServerSideRowModel,ExpandListener,SortListener,StoreUtils,BlockUtils,NodeManager,TransactionManager,FilterListener,StoreFactory,ListenerUtils,ServerSideSelectionService,ServerSideExpansionService,LazyBlockLoadingService],dependantModules:[import_core20.EnterpriseCoreModule]};


# ====================================================================
# FILE: enterprise-modules/server-side-row-model/dist/types/src/version.d.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export declare const VERSION = "31.3.4";


# ====================================================================
# FILE: enterprise-modules/server-side-row-model/src/version.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export const VERSION = '31.3.4';


# ====================================================================
# FILE: enterprise-modules/set-filter/dist/package/main.cjs.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 2531-2563 ---
  2531|         () => this.updateFloatingFilterText()
  2532|       );
  2533|     });
  2534|     this.availableValuesListenerAdded = true;
  2535|   }
  2536|   updateFloatingFilterText(parentModel) {
  2537|     if (!this.availableValuesListenerAdded) {
  2538|       this.addAvailableValuesListener();
  2539|     }
  2540|     this.parentSetFilterInstance((setFilter) => {
  2541|       this.eFloatingFilterText.setValue(this.filterModelFormatter.getModelAsString(parentModel, setFilter));
  2542|     });
  2543|   }
  2544| };
  2545| __decorateClass([
  2546|   (0, import_core6.RefSelector)("eFloatingFilterText")
  2547| ], SetFloatingFilterComp.prototype, "eFloatingFilterText", 2);
  2548| __decorateClass([
  2549|   (0, import_core6.Autowired)("columnModel")
  2550| ], SetFloatingFilterComp.prototype, "columnModel", 2);
  2551| var VERSION = "31.3.4";
  2552| var SetFilterModule = {
  2553|   version: VERSION,
  2554|   moduleName: import_core7.ModuleNames.SetFilterModule,
  2555|   beans: [],
  2556|   userComponents: [
  2557|     { componentName: "agSetColumnFilter", componentClass: SetFilter },
  2558|     { componentName: "agSetColumnFloatingFilter", componentClass: SetFloatingFilterComp }
  2559|   ],
  2560|   dependantModules: [
  2561|     import_core8.EnterpriseCoreModule
  2562|   ]
  2563| };


# ====================================================================
# FILE: enterprise-modules/set-filter/dist/package/main.cjs.min.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-21 ---
     1| var __defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__hasOwnProp=Object.prototype.hasOwnProperty,__export=(t,e)=>{for(var s in e)__defProp(t,s,{get:e[s],enumerable:!0})},__copyProps=(t,e,s,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of __getOwnPropNames(e))!__hasOwnProp.call(t,r)&&r!==s&&__defProp(t,r,{get:()=>e[r],enumerable:!(i=__getOwnPropDesc(e,r))||i.enumerable});return t},__toCommonJS=t=>__copyProps(__defProp({},"__esModule",{value:!0}),t),__decorateClass=(t,e,s,i)=>{for(var r=i>1?void 0:i?__getOwnPropDesc(e,s):e,l=t.length-1,a;l>=0;l--)(a=t[l])&&(r=(i?a(e,s,r):a(r))||r);return i&&r&&__defProp(e,s,r),r},main_exports={};__export(main_exports,{SetFilter:()=>SetFilter,SetFilterModule:()=>SetFilterModule}),module.exports=__toCommonJS(main_exports);var import_core7=require("@ag-grid-community/core"),import_core8=require("@ag-grid-enterprise/core"),import_core5=require("@ag-grid-community/core"),import_core3=require("@ag-grid-community/core"),import_core=require("@ag-grid-community/core"),ClientSideValuesExtractor=class{constructor(t,e,s,i,r,l,a,n,h,o,d){this.rowModel=t,this.filterParams=e,this.createKey=s,this.caseFormat=i,this.columnModel=r,this.valueService=l,this.treeDataOrGrouping=a,this.treeData=n,this.getDataPath=h,this.groupAllowUnbalanced=o,this.addManagedListener=d}extractUniqueValuesAsync(t,e){return new import_core.AgPromise(s=>{if(this.rowModel.isRowDataLoaded())s(this.extractUniqueValues(t,e));else{const i=this.addManagedListener(import_core.Events.EVENT_ROW_COUNT_READY,()=>{i?.(),s(this.extractUniqueValues(t,e))})}})}extractUniqueValues(t,e){const s=new Map,i=this.extractExistingFormattedKeys(e),r=new Set,l=this.treeData&&!!this.getDataPath,a=this.columnModel.getRowGroupColumns(),n=(h,o)=>{const d=this.caseFormat(h);if(!r.has(d)){r.add(d);let u=h,p=import_core._.makeNull(o);const c=i?.get(d);c!=null&&(u=c,p=e.get(c)),s.set(u,p)}};return this.rowModel.forEachLeafNode(h=>{if(!h.data||!t(h))return;if(this.treeDataOrGrouping){this.addValueForTreeDataOrGrouping(h,l,a,n);return}let o=this.getValue(h);if(this.filterParams.convertValuesToStrings){this.addValueForConvertValuesToString(h,o,n);return}o!=null&&Array.isArray(o)?(o.forEach(d=>{n(this.createKey(d,h),d)}),o.length===0&&n(null,null)):n(this.createKey(o,h),o)}),s}addValueForConvertValuesToString(t,e,s){const i=this.createKey(e,t);i!=null&&Array.isArray(i)?(i.forEach(r=>{const l=import_core._.toStringOrNull(import_core._.makeNull(r));s(l,l)}),i.length===0&&s(null,null)):s(i,i)}addValueForTreeDataOrGrouping(t,e,s,i){var r;let l;if(e){if((r=t.childrenAfterGroup)!=null&&r.length)return;l=this.getDataPath(t.data)}else l=s.map(a=>this.valueService.getKeyForNode(a,t)),l.push(this.getValue(t));l&&(l=l.map(a=>import_core._.toStringOrNull(import_core._.makeNull(a)))),!e&&this.groupAllowUnbalanced&&l?.some(a=>a==null)&&(l=l.filter(a=>a!=null)),i(this.createKey(l),l)}getValue(t){return this.filterParams.getValue(t)}extractExistingFormattedKeys(t){if(!t)return null;const e=new Map;return t.forEach((s,i)=>{e.set(this.caseFormat(i),i)}),e}},SetFilterDisplayValue=class{};SetFilterDisplayValue.SELECT_ALL="__AG_SELECT_ALL__",SetFilterDisplayValue.ADD_SELECTION_TO_FILTER="__AG_ADD_SELECTION_TO_FILTER__";var FlatSetDisplayValueModel=class{constructor(t,e,s,i){this.valueService=t,this.valueFormatter=e,this.formatter=s,this.column=i,this.displayedKeys=[]}updateDisplayedValuesToAllAvailable(t,e,s){this.displayedKeys=Array.from(s)}updateDisplayedValuesToMatchMiniFilter(t,e,s,i,r){this.displayedKeys=[];for(let l of s)if(l==null)r&&this.displayedKeys.push(l);else{const a=t(l),n=this.valueService.formatValue(this.column,null,a,this.valueFormatter,!1),h=this.formatter(n);i(h)&&this.displayedKeys.push(l)}}getDisplayedValueCount(){return this.displayedKeys.length}getDisplayedItem(t){return this.displayedKeys[t]}getSelectAllItem(){return SetFilterDisplayValue.SELECT_ALL}getAddSelectionToFilterItem(){return SetFilterDisplayValue.ADD_SELECTION_TO_FILTER}getDisplayedKeys(){return this.displayedKeys}forEachDisplayedKey(t){this.displayedKeys.forEach(t)}someDisplayedKey(t){return this.displayedKeys.some(t)}hasGroups(){return!1}refresh(){}},import_core2=require("@ag-grid-community/core"),_TreeSetDisplayValueModel=class L{constructor(e,s,i,r){this.formatter=e,this.treeListPathGetter=s,this.treeListFormatter=i,this.treeDataOrGrouping=r,this.allDisplayedItemsTree=[],this.activeDisplayedItemsFlat=[],this.selectAllItem={depth:0,filterPasses:!0,available:!0,treeKey:SetFilterDisplayValue.SELECT_ALL,children:this.allDisplayedItemsTree,expanded:!0,key:SetFilterDisplayValue.SELECT_ALL,parentTreeKeys:[]},this.addSelectionToFilterItem={depth:0,filterPasses:!0,available:!0,treeKey:SetFilterDisplayValue.ADD_SELECTION_TO_FILTER,expanded:!0,key:SetFilterDisplayValue.ADD_SELECTION_TO_FILTER,parentTreeKeys:[]}}updateDisplayedValuesToAllAvailable(e,s,i,r){r==="reload"?this.generateItemTree(e,s,i):r==="otherFilter"?(this.updateAvailable(i),this.updateExpandAll()):r==="miniFilter"&&(this.resetFilter(),this.updateExpandAll()),this.flattenItems()}updateDisplayedValuesToMatchMiniFilter(e,s,i,r,l,a){a==="reload"?this.generateItemTree(e,s,i):a==="otherFilter"&&this.updateAvailable(i),this.updateFilter(r,l),this.updateExpandAll(),this.flattenItems()}generateItemTree(e,s,i){var r;this.allDisplayedItemsTree=[],this.groupsExist=!1;const l=this.getTreeListPathGetter(e,i);for(let a of s){const n=e(a),h=(r=l(n))!=null?r:[null];h.length>1&&(this.groupsExist=!0);const o=i.has(a);let d=this.allDisplayedItemsTree,u,p=[];h.forEach((c,f)=>{d||(d=[],u.children=d),u=d.find(y=>{var m;return((m=y.treeKey)==null?void 0:m.toUpperCase())===c?.toUpperCase()}),u||(u={treeKey:c,depth:f,filterPasses:!0,expanded:!1,available:o,parentTreeKeys:p},f===h.length-1&&(u.key=a),d.push(u)),d=u.children,p=[...p,c]})}this.updateAvailable(i),this.selectAllItem.children=this.allDisplayedItemsTree,this.selectAllItem.expanded=!1}getTreeListPathGetter(e,s){if(this.treeListPathGetter)return this.treeListPathGetter;if(this.treeDataOrGrouping)return r=>r;let i=!1;for(const r of s){const l=e(r);if(l instanceof Date){i=!0;break}else if(l!=null)break}return i?L.DATE_TREE_LIST_PATH_GETTER:(import_core2._.warnOnce("property treeList=true for Set Filter params, but you did not provide a treeListPathGetter or values of type Date."),r=>[String(r)])}flattenItems(){this.activeDisplayedItemsFlat=[];const e=s=>{s.forEach(i=>{!i.filterPasses||!i.available||(this.activeDisplayedItemsFlat.push(i),i.children&&i.expanded&&e(i.children))})};e(this.allDisplayedItemsTree)}resetFilter(){const e=s=>{s.children&&s.children.forEach(i=>{e(i)}),s.filterPasses=!0};this.allDisplayedItemsTree.forEach(s=>e(s))}updateFilter(e,s){const i=r=>r.available?r.treeKey==null?s:e(this.formatter(this.treeListFormatter?this.treeListFormatter(r.treeKey,r.depth,r.parentTreeKeys):r.treeKey)):!1;this.allDisplayedItemsTree.forEach(r=>this.recursiveItemCheck(r,!1,i,"filterPasses"))}getDisplayedValueCount(){return this.activeDisplayedItemsFlat.length}getDisplayedItem(e){return this.activeDisplayedItemsFlat[e]}getSelectAllItem(){return this.selectAllItem}getAddSelectionToFilterItem(){return this.addSelectionToFilterItem}getDisplayedKeys(){const e=[];return this.forEachDisplayedKey(s=>e.push(s)),e}forEachDisplayedKey(e){const s=(i,r)=>{i.children?(!i.expanded||!r)&&i.children.forEach(l=>{l.filterPasses&&s(l,!1)}):e(i.key)};this.activeDisplayedItemsFlat.forEach(i=>s(i,!0))}someDisplayedKey(e){const s=(i,r)=>{if(i.children){if(!i.expanded||!r)return i.children.some(l=>l.filterPasses?s(l,!1):!1)}else return e(i.key);return!1};return this.activeDisplayedItemsFlat.some(i=>s(i,!0))}hasGroups(){return this.groupsExist}refresh(){this.updateExpandAll(),this.flattenItems()}updateExpandAll(){const e=(i,r,l)=>{for(const a of i){if(!a.filterPasses||!a.available||!a.children)continue;if(r=r||!!a.expanded,l=l||!a.expanded,r&&l)return;const n=e(a.children,r,l);if(n===void 0)return;n?r=!0:l=!0}return r&&l?void 0:r},s=this.getSelectAllItem();s.expanded=e(s.children,!1,!1)}recursiveItemCheck(e,s,i,r){let l=!1;e.children&&e.children.forEach(n=>{const h=this.recursiveItemCheck(n,s||i(e),i,r);l=l||h});const a=s||l||i(e);return e[r]=a,a}updateAvailable(e){const s=i=>e.has(i.key);this.allDisplayedItemsTree.forEach(i=>this.recursiveItemCheck(i,!1,s,"available"))}};_TreeSetDisplayValueModel.DATE_TREE_LIST_PATH_GETTER=t=>t?[String(t.getFullYear()),String(t.getMonth()+1),String(t.getDate())]:null;var TreeSetDisplayValueModel=_TreeSetDisplayValueModel,SetValueModelFilteringKeys=class{constructor({caseFormat:t}){this.filteringKeys=null,this.filteringKeysCaseFormatted=null,this.hasNoAppliedFilteringKeys=!1,this.caseFormat=t}allFilteringKeys(){return this.filteringKeys}allFilteringKeysCaseFormatted(){return this.filteringKeysCaseFormatted}noAppliedFilteringKeys(){return this.hasNoAppliedFilteringKeys}setFilteringKeys(t){this.filteringKeys=new Set(t),this.hasNoAppliedFilteringKeys=!this.filteringKeys||this.filteringKeys.size===0,this.filteringKeysCaseFormatted=new Set,this.filteringKeys.forEach(e=>this.filteringKeysCaseFormatted.add(this.caseFormat(e)))}addFilteringKey(t){this.filteringKeys==null&&(this.filteringKeys=new Set,this.filteringKeysCaseFormatted=new Set),this.filteringKeys.add(t),this.filteringKeysCaseFormatted.add(this.caseFormat(t)),this.hasNoAppliedFilteringKeys&&(this.hasNoAppliedFilteringKeys=!1)}hasCaseFormattedFilteringKey(t){return this.filteringKeysCaseFormatted.has(this.caseFormat(t))}hasFilteringKey(t){return this.filteringKeys.has(t)}reset(){this.filteringKeys=null,this.filteringKeysCaseFormatted=null,this.hasNoAppliedFilteringKeys=!1}},_SetValueModel=class w{constructor(e){this.localEventService=new import_core3.EventService,this.miniFilterText=null,this.addCurrentSelectionToFilter=!1,this.providedValues=null,this.allValues=new Map,this.availableKeys=new Set,this.selectedKeys=new Set,this.initialised=!1;const{usingComplexObjects:s,columnModel:i,valueService:r,treeDataTreeList:l,groupingTreeList:a,filterParams:n,gos:h,valueFormatter:o,addManagedListener:d}=e,{column:u,colDef:p,textFormatter:c,doesRowPassOtherFilter:f,suppressSorting:y,comparator:m,rowModel:T,values:F,caseSensitive:K,convertValuesToStrings:x,treeList:S,treeListPathGetter:A,treeListFormatter:b}=n;this.filterParams=n,this.gos=h,this.setIsLoading=e.setIsLoading,this.translate=e.translate,this.caseFormat=e.caseFormat,this.createKey=e.createKey,this.usingComplexObjects=!!e.usingComplexObjects,this.formatter=c||import_core3.TextFilter.DEFAULT_FORMATTER,this.doesRowPassOtherFilters=f,this.suppressSorting=y||!1,this.convertValuesToStrings=!!x,this.filteringKeys=new SetValueModelFilteringKeys({caseFormat:this.caseFormat});const g=m??p.comparator,M=!!l||!!a;this.compareByValue=!!(s&&g||M||S&&!A),M&&!g?this.entryComparator=this.createTreeDataOrGroupingComparator():S&&!A&&!g?this.entryComparator=([E,C],[I,V])=>import_core3._.defaultComparator(C,V):this.entryComparator=([E,C],[I,V])=>g(C,V),this.keyComparator=g??import_core3._.defaultComparator,this.caseSensitive=!!K;const _=h.get("getDataPath"),D=h.get("groupAllowUnbalanced");T.getType()==="clientSide"&&(this.clientSideValuesExtractor=new ClientSideValuesExtractor(T,this.filterParams,this.createKey,this.caseFormat,i,r,M,!!l,_,D,d)),F==null?this.valuesType=2:(this.valuesType=Array.isArray(F)?0:1,this.providedValues=F),this.displayValueModel=S?new TreeSetDisplayValueModel(this.formatter,A,b,l||a):new FlatSetDisplayValueModel(r,o,this.formatter,u),this.updateAllValues().then(E=>this.resetSelectionState(E||[]))}addEventListener(e,s,i){this.localEventService.addEventListener(e,s,i)}removeEventListener(e,s,i){this.localEventService.removeEventListener(e,s,i)}updateOnParamsChange(e){return new import_core3.AgPromise(s=>{const{values:i,textFormatter:r,suppressSorting:l}=e,a=this.providedValues,n=this.suppressSorting;if(this.filterParams=e,this.formatter=r||import_core3.TextFilter.DEFAULT_FORMATTER,this.suppressSorting=l||!1,this.providedValues=i??null,this.providedValues!==a||this.suppressSorting!==n){!i||i.length===0?(this.valuesType=2,this.providedValues=null):this.valuesType=Array.isArray(i)?0:1;const h=this.getModel();this.updateAllValues().then(o=>{this.setModel(h).then(()=>s())})}else s()})}refreshValues(){return new import_core3.AgPromise(e=>{this.allValuesPromise.then(()=>{const s=this.getModel();this.updateAllValues(),this.setModel(s).then(()=>e())})})}overrideValues(e){return new import_core3.AgPromise(s=>{this.allValuesPromise.then(()=>{this.valuesType=0,this.providedValues=e,this.refreshValues().then(()=>s())})})}refreshAfterAnyFilterChanged(){return this.showAvailableOnly()?this.allValuesPromise.then(e=>(this.updateAvailableKeys(e??[],"otherFilter"),!0)):import_core3.AgPromise.resolve(!1)}isInitialised(){return this.initialised}updateAllValues(){return this.allValuesPromise=new import_core3.AgPromise(e=>{switch(this.valuesType){case 2:this.getValuesFromRowsAsync(!1).then(s=>e(this.processAllValues(s)));break;case 0:{e(this.processAllValues(this.uniqueValues(this.validateProvidedValues(this.providedValues))));break}case 1:{this.setIsLoading(!0);const s=this.providedValues,{column:i,colDef:r}=this.filterParams,l=this.gos.addGridCommonParams({success:a=>{this.setIsLoading(!1),e(this.processAllValues(this.uniqueValues(this.validateProvidedValues(a))))},colDef:r,column:i});window.setTimeout(()=>s(l),0);break}default:throw new Error("Unrecognised valuesType")}}),this.allValuesPromise.then(e=>this.updateAvailableKeys(e||[],"reload")).then(()=>this.initialised=!0),this.allValuesPromise}processAllValues(e){const s=this.sortKeys(e);return this.allValues=e??new Map,s}validateProvidedValues(e){if(this.usingComplexObjects&&e?.length){const s=e[0];s&&typeof s!="object"&&typeof s!="function"&&(this.createKey(s)==null?import_core3._.warnOnce("Set Filter Key Creator is returning null for provided values and provided values are primitives. Please provide complex objects or set convertValuesToStrings=true in the filterParams. See https://www.ag-grid.com/javascript-data-grid/filter-set-filter-list/#filter-value-types"):import_core3._.warnOnce("Set Filter has a Key Creator, but provided values are primitives. Did you mean to provide complex objects or enable convertValuesToStrings?"))}return e}setValuesType(e){this.valuesType=e}getValuesType(){return this.valuesType}isKeyAvailable(e){return this.availableKeys.has(e)}showAvailableOnly(){return this.valuesType===2}updateAvailableKeys(e,s){const i=this.showAvailableOnly()?this.sortKeys(this.getValuesFromRows(!0)):e;this.availableKeys=new Set(i),this.localEventService.dispatchEvent({type:w.EVENT_AVAILABLE_VALUES_CHANGED}),this.updateDisplayedValues(s,e)}sortKeys(e){const s=e??new Map;if(this.suppressSorting)return Array.from(s.keys());let i;return this.compareByValue?i=Array.from(s.entries()).sort(this.entryComparator).map(([r])=>r):i=Array.from(s.keys()).sort(this.keyComparator),this.filterParams.excelMode&&s.has(null)&&(i=i.filter(r=>r!=null),i.push(null)),i}getParamsForValuesFromRows(e=!1){if(!this.clientSideValuesExtractor)return import_core3._.doOnce(()=>{console.error("AG Grid: Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values")},"setFilterValueNotCSRM"),null;const s=r=>!e||this.doesRowPassOtherFilters(r),i=e&&!this.caseSensitive?this.allValues:void 0;return{predicate:s,existingValues:i}}getValuesFromRows(e=!1){const s=this.getParamsForValuesFromRows(e);return s?this.clientSideValuesExtractor.extractUniqueValues(s.predicate,s.existingValues):null}getValuesFromRowsAsync(e=!1){const s=this.getParamsForValuesFromRows(e);return s?this.clientSideValuesExtractor.extractUniqueValuesAsync(s.predicate,s.existingValues):import_core3.AgPromise.resolve(null)}setMiniFilter(e){return e=import_core3._.makeNull(e),this.miniFilterText===e?!1:(e===null&&this.setAddCurrentSelectionToFilter(!1),this.miniFilterText=e,this.updateDisplayedValues("miniFilter"),!0)}getMiniFilter(){return this.miniFilterText}updateDisplayedValues(e,s){if(e==="expansion"){this.displayValueModel.refresh();return}if(this.miniFilterText==null){this.displayValueModel.updateDisplayedValuesToAllAvailable(a=>this.getValue(a),s,this.availableKeys,e);return}const i=this.caseFormat(this.formatter(this.miniFilterText)||""),r=a=>a!=null&&this.caseFormat(a).indexOf(i)>=0,l=!!this.filterParams.excelMode&&r(this.translate("blanks"));this.displayValueModel.updateDisplayedValuesToMatchMiniFilter(a=>this.getValue(a),s,this.availableKeys,r,l,e)}getDisplayedValueCount(){return this.displayValueModel.getDisplayedValueCount()}getDisplayedItem(e){return this.displayValueModel.getDisplayedItem(e)}getSelectAllItem(){return this.displayValueModel.getSelectAllItem()}getAddSelectionToFilterItem(){return this.displayValueModel.getAddSelectionToFilterItem()}hasSelections(){return this.filterParams.defaultToNothingSelected?this.selectedKeys.size>0:this.allValues.size!==this.selectedKeys.size}getKeys(){return Array.from(this.allValues.keys())}getValues(){return Array.from(this.allValues.values())}getValue(e){return this.allValues.get(e)}setAddCurrentSelectionToFilter(e){this.addCurrentSelectionToFilter=e}isInWindowsExcelMode(){return this.filterParams.excelMode==="windows"}isAddCurrentSelectionToFilterChecked(){return this.isInWindowsExcelMode()&&this.addCurrentSelectionToFilter}showAddCurrentSelectionToFilter(){return this.isInWindowsExcelMode()&&import_core3._.exists(this.miniFilterText)&&this.miniFilterText.length>0}selectAllMatchingMiniFilter(e=!1){this.miniFilterText==null?this.selectedKeys=new Set(this.allValues.keys()):(e&&this.selectedKeys.clear(),this.displayValueModel.forEachDisplayedKey(s=>this.selectedKeys.add(s)))}deselectAllMatchingMiniFilter(){this.miniFilterText==null?this.selectedKeys.clear():this.displayValueModel.forEachDisplayedKey(e=>this.selectedKeys.delete(e))}selectKey(e){this.selectedKeys.add(e)}deselectKey(e){this.filterParams.excelMode&&this.isEverythingVisibleSelected()&&this.resetSelectionState(this.displayValueModel.getDisplayedKeys()),this.selectedKeys.delete(e)}isKeySelected(e){return this.selectedKeys.has(e)}isEverythingVisibleSelected(){return!this.displayValueModel.someDisplayedKey(e=>!this.isKeySelected(e))}isNothingVisibleSelected(){return!this.displayValueModel.someDisplayedKey(e=>this.isKeySelected(e))}getModel(){if(!this.hasSelections())return null;const e=this.isAddCurrentSelectionToFilterChecked()?this.filteringKeys.allFilteringKeys():null;if(e&&e.size>0){if(this.selectedKeys){const s=new Set([...Array.from(e),...Array.from(this.selectedKeys).filter(i=>!e.has(i))]);return Array.from(s)}return Array.from(e)}return Array.from(this.selectedKeys)}setModel(e){return this.allValuesPromise.then(s=>{if(e==null)this.resetSelectionState(s??[]);else{this.selectedKeys.clear();const i=new Map;this.allValues.forEach((r,l)=>{i.set(this.caseFormat(l),l)}),e.forEach(r=>{const l=this.caseFormat(import_core3._.makeNull(r)),a=i.get(l);a!==void 0&&this.selectKey(a)})}})}uniqueValues(e){const s=new Map,i=new Set;return(e??[]).forEach(r=>{const l=import_core3._.makeNull(r),a=this.convertAndGetKey(l),n=this.caseFormat(a);i.has(n)||(i.add(n),s.set(a,l))}),s}convertAndGetKey(e){return this.convertValuesToStrings?e:this.createKey(e)}resetSelectionState(e){this.filterParams.defaultToNothingSelected?this.selectedKeys.clear():this.selectedKeys=new Set(e)}hasGroups(){return this.displayValueModel.hasGroups()}createTreeDataOrGroupingComparator(){return([e,s],[i,r])=>{if(s==null)return r==null?0:-1;if(r==null)return 1;for(let l=0;l<s.length;l++){if(l>=r.length)return 1;const a=import_core3._.defaultComparator(s[l],r[l]);if(a!==0)return a}return 0}}setAppliedModelKeys(e){this.filteringKeys.setFilteringKeys(e)}addToAppliedModelKeys(e){this.filteringKeys.addFilteringKey(e)}getAppliedModelKeys(){return this.filteringKeys.allFilteringKeys()}getCaseFormattedAppliedModelKeys(){return this.filteringKeys.allFilteringKeysCaseFormatted()}hasAppliedModelKey(e){return this.filteringKeys.hasCaseFormattedFilteringKey(e)}hasAnyAppliedModelKey(){return!this.filteringKeys.noAppliedFilteringKeys()}};_SetValueModel.EVENT_AVAILABLE_VALUES_CHANGED="availableValuesChanged";var SetValueModel=_SetValueModel,import_core4=require("@ag-grid-community/core"),_SetFilterListItem=class v extends import_core4.Component{constructor(e){var s;super(e.isGroup?v.GROUP_TEMPLATE:v.TEMPLATE),this.focusWrapper=e.focusWrapper,this.value=e.value,this.params=e.params,this.translate=e.translate,this.valueFormatter=e.valueFormatter,this.item=e.item,this.isSelected=e.isSelected,this.isTree=e.isTree,this.depth=(s=e.depth)!=null?s:0,this.isGroup=e.isGroup,this.groupsExist=e.groupsExist,this.isExpanded=e.isExpanded,this.hasIndeterminateExpandState=e.hasIndeterminateExpandState}init(){this.addDestroyFunc(()=>{var e;return(e=this.destroyCellRendererComponent)==null?void 0:e.call(this)}),this.render(),this.eCheckbox.setLabelEllipsis(!0).setValue(this.isSelected,!0).setDisabled(!!this.params.readOnly).getInputElement().setAttribute("tabindex","-1"),this.refreshVariableAriaLabels(),this.isTree&&(this.depth>0&&this.addCssClass("ag-set-filter-indent-"+this.depth),this.isGroup?this.setupExpansion():this.groupsExist&&this.addCssClass("ag-set-filter-add-group-indent"),import_core4._.setAriaLevel(this.getAriaElement(),this.depth+1)),this.refreshAriaChecked(),!this.params.readOnly&&this.eCheckbox.onValueChange(e=>this.onCheckboxChanged(!!e))}getFocusableElement(){return this.focusWrapper}setupExpansion(){this.eGroupClosedIcon.appendChild(import_core4._.createIcon("setFilterGroupClosed",this.gos,null)),this.eGroupOpenedIcon.appendChild(import_core4._.createIcon("setFilterGroupOpen",this.gos,null)),this.addManagedListener(this.eGroupClosedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.addManagedListener(this.eGroupOpenedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.hasIndeterminateExpandState&&(this.eGroupIndeterminateIcon.appendChild(import_core4._.createIcon("setFilterGroupIndeterminate",this.gos,null)),this.addManagedListener(this.eGroupIndeterminateIcon,"click",this.onExpandOrContractClicked.bind(this))),this.setExpandedIcons(),this.refreshAriaExpanded()}onExpandOrContractClicked(){this.setExpanded(!this.isExpanded)}setExpanded(e,s){if(this.isGroup&&e!==this.isExpanded){this.isExpanded=e;const i={type:v.EVENT_EXPANDED_CHANGED,isExpanded:!!e,item:this.item};s||this.dispatchEvent(i),this.setExpandedIcons(),this.refreshAriaExpanded()}}setExpandedIcons(){import_core4._.setDisplayed(this.eGroupClosedIcon,this.hasIndeterminateExpandState?this.isExpanded===!1:!this.isExpanded),import_core4._.setDisplayed(this.eGroupOpenedIcon,this.isExpanded===!0),this.hasIndeterminateExpandState&&import_core4._.setDisplayed(this.eGroupIndeterminateIcon,this.isExpanded===void 0)}onCheckboxChanged(e){this.isSelected=e;const s={type:v.EVENT_SELECTION_CHANGED,isSelected:e,item:this.item};this.dispatchEvent(s),this.refreshVariableAriaLabels(),this.refreshAriaChecked()}toggleSelected(){this.params.readOnly||this.setSelected(!this.isSelected)}setSelected(e,s){this.isSelected=e,this.eCheckbox.setValue(e,s),this.refreshAriaChecked()}refreshVariableAriaLabels(){if(!this.isTree)return;const e=this.localeService.getLocaleTextFunc(),s=this.eCheckbox.getValue(),i=s===void 0?e("ariaIndeterminate","indeterminate"):s?e("ariaVisible","visible"):e("ariaHidden","hidden"),r=e("ariaToggleVisibility","Press SPACE to toggle visibility");import_core4._.setAriaLabelledBy(this.eCheckbox.getInputElement(),void 0),this.eCheckbox.setInputAriaLabel(`${r} (${i})`)}setupFixedAriaLabels(e){if(!this.isTree)return;const i=this.localeService.getLocaleTextFunc()("ariaFilterValue","Filter Value"),r=this.getAriaElement();import_core4._.setAriaLabel(r,`${e} ${i}`),import_core4._.setAriaDescribedBy(r,this.eCheckbox.getInputElement().id)}refreshAriaChecked(){const e=this.getAriaElement();import_core4._.setAriaChecked(e,this.eCheckbox.getValue())}refreshAriaExpanded(){import_core4._.setAriaExpanded(this.getAriaElement(),!!this.isExpanded)}refresh(e,s,i){var r,l;if(this.item=e,s!==this.isSelected&&this.setSelected(s,!0),this.setExpanded(i,!0),this.valueFunction){const a=this.valueFunction();this.setTooltipAndCellRendererParams(a,a),this.cellRendererComponent||this.renderCellWithoutCellRenderer()}if(this.cellRendererComponent&&!((l=(r=this.cellRendererComponent).refresh)==null?void 0:l.call(r,this.cellRendererParams))){const n=this.cellRendererComponent;this.renderCell(),this.destroyBean(n)}}render(){const{params:{column:e}}=this;let{value:s}=this,i=null;typeof s=="function"?(this.valueFunction=s,i=this.valueFunction(),s=i):this.isTree?i=import_core4._.toStringOrNull(s):i=this.getFormattedValue(e,s),this.setTooltipAndCellRendererParams(s,i),this.renderCell()}setTooltipAndCellRendererParams(e,s){const i=this.gos.get("tooltipShowMode")==="whenTruncated";if(this.params.showTooltips&&(!i||!this.params.cellRenderer)){const r=s??import_core4._.toStringOrNull(e);let l;i&&(l=()=>{const a=this.eCheckbox.getGui().querySelector(".ag-label");return a?a.scrollWidth>a.clientWidth:!0}),this.setTooltip({newTooltipText:r,location:"setFilterValue",getColDef:()=>this.params.colDef,getColumn:()=>this.params.column,shouldDisplayTooltip:l})}this.cellRendererParams=this.gos.addGridCommonParams({value:e,valueFormatted:s,colDef:this.params.colDef,column:this.params.column,setTooltip:(r,l)=>{this.setTooltip({newTooltipText:r,getColDef:()=>this.params.colDef,getColumn:()=>this.params.column,location:"setFilterValue",shouldDisplayTooltip:l})}})}getTooltipParams(){const e=super.getTooltipParams();return e.location="setFilterValue",e.colDef=this.getComponentHolder(),this.isTree&&(e.level=this.depth),e}getFormattedValue(e,s){return this.valueService.formatValue(e,null,s,this.valueFormatter,!1)}renderCell(){const e=this.userComponentFactory.getSetFilterCellRendererDetails(this.params,this.cellRendererParams),s=e?e.newAgStackInstance():void 0;if(s==null){this.renderCellWithoutCellRenderer();return}s.then(i=>{i&&(this.cellRendererComponent=i,this.eCheckbox.setLabel(i.getGui()),this.destroyCellRendererComponent=()=>this.destroyBean(i))})}renderCellWithoutCellRenderer(){var e;let s=(e=this.cellRendererParams.valueFormatted==null?this.cellRendererParams.value:this.cellRendererParams.valueFormatted)!=null?e:this.translate("blanks");typeof s!="string"&&(import_core4._.warnOnce(`Set Filter Value Formatter must return string values. Please ensure the Set Filter Value Formatter returns string values for complex objects, or set convertValuesToStrings=true in the filterParams. See ${this.getFrameworkOverrides().getDocLink("filter-set-filter-list/#filter-value-types")}`),s=""),this.eCheckbox.setLabel(s),this.setupFixedAriaLabels(s)}getComponentHolder(){return this.params.column.getColDef()}};_SetFilterListItem.EVENT_SELECTION_CHANGED="selectionChanged",_SetFilterListItem.EVENT_EXPANDED_CHANGED="expandedChanged",_SetFilterListItem.GROUP_TEMPLATE=`
     2|         <div class="ag-set-filter-item" aria-hidden="true">
     3|             <span class="ag-set-filter-group-icons">
     4|                 <span class="ag-set-filter-group-closed-icon" ref="eGroupClosedIcon"></span>
     5|                 <span class="ag-set-filter-group-opened-icon" ref="eGroupOpenedIcon"></span>
     6|                 <span class="ag-set-filter-group-indeterminate-icon" ref="eGroupIndeterminateIcon"></span>
     7|             </span>
     8|             <ag-checkbox ref="eCheckbox" class="ag-set-filter-item-checkbox"></ag-checkbox>
     9|         </div>`,_SetFilterListItem.TEMPLATE=`
    10|         <div class="ag-set-filter-item">
    11|             <ag-checkbox ref="eCheckbox" class="ag-set-filter-item-checkbox"></ag-checkbox>
    12|         </div>`,__decorateClass([(0,import_core4.Autowired)("valueService")],_SetFilterListItem.prototype,"valueService",2),__decorateClass([(0,import_core4.Autowired)("userComponentFactory")],_SetFilterListItem.prototype,"userComponentFactory",2),__decorateClass([(0,import_core4.RefSelector)("eCheckbox")],_SetFilterListItem.prototype,"eCheckbox",2),__decorateClass([(0,import_core4.RefSelector)("eGroupOpenedIcon")],_SetFilterListItem.prototype,"eGroupOpenedIcon",2),__decorateClass([(0,import_core4.RefSelector)("eGroupClosedIcon")],_SetFilterListItem.prototype,"eGroupClosedIcon",2),__decorateClass([(0,import_core4.RefSelector)("eGroupIndeterminateIcon")],_SetFilterListItem.prototype,"eGroupIndeterminateIcon",2),__decorateClass([import_core4.PostConstruct],_SetFilterListItem.prototype,"init",1);var SetFilterListItem=_SetFilterListItem,DEFAULT_LOCALE_TEXT={loadingOoo:"Loading...",blanks:"(Blanks)",searchOoo:"Search...",selectAll:"(Select All)",selectAllSearchResults:"(Select All Search Results)",addCurrentSelectionToFilter:"Add current selection to filter",noMatches:"No matches."},SetFilterModelFormatter=class{getModelAsString(t,e){const{values:s}=t||e.getModel()||{},i=e.getValueModel();if(s==null||i==null)return"";const r=s.filter(n=>i.isKeyAvailable(n)),l=r.length,a=r.slice(0,10).map(n=>e.getFormattedValue(n));return`(${l}) ${a.join(",")}${l>10?",...":""}`}},SetFilter=class extends import_core5.ProvidedFilter{constructor(){super("setFilter"),this.valueModel=null,this.setFilterParams=null,this.virtualList=null,this.caseSensitive=!1,this.convertValuesToStrings=!1,this.treeDataTreeList=!1,this.groupingTreeList=!1,this.hardRefreshVirtualList=!1,this.noValueFormatterSupplied=!1,this.filterModelFormatter=new SetFilterModelFormatter,this.updateSetFilterOnParamsChange=t=>{var e;this.setFilterParams=t,this.convertValuesToStrings=!!t.convertValuesToStrings,this.caseSensitive=!!t.caseSensitive;const s=(e=t.keyCreator)!=null?e:t.colDef.keyCreator;this.setValueFormatter(t.valueFormatter,s,this.convertValuesToStrings,!!t.treeList,!!t.colDef.refData);const i=t.column.getId().startsWith(import_core5.GROUP_AUTO_COLUMN_ID);this.treeDataTreeList=this.gos.get("treeData")&&!!t.treeList&&i,this.getDataPath=this.gos.get("getDataPath"),this.groupingTreeList=!!this.columnModel.getRowGroupColumns().length&&!!t.treeList&&i,this.createKey=this.generateCreateKey(s,this.convertValuesToStrings,this.treeDataTreeList||this.groupingTreeList)}}postConstruct(){super.postConstruct()}updateUiVisibility(){}createBodyTemplate(){return`
    13|             <div class="ag-set-filter">
    14|                 <div ref="eFilterLoading" class="ag-filter-loading ag-hidden">${this.translateForSetFilter("loadingOoo")}</div>
    15|                 <ag-input-text-field class="ag-mini-filter" ref="eMiniFilter"></ag-input-text-field>
    16|                 <div ref="eFilterNoMatches" class="ag-filter-no-matches ag-hidden">${this.translateForSetFilter("noMatches")}</div>
    17|                 <div ref="eSetFilterList" class="ag-set-filter-list" role="presentation"></div>
    18|             </div>`}handleKeyDown(t){if(super.handleKeyDown(t),!t.defaultPrevented)switch(t.key){case import_core5.KeyCode.SPACE:this.handleKeySpace(t);break;case import_core5.KeyCode.ENTER:this.handleKeyEnter(t);break;case import_core5.KeyCode.LEFT:this.handleKeyLeft(t);break;case import_core5.KeyCode.RIGHT:this.handleKeyRight(t);break}}handleKeySpace(t){var e;(e=this.getComponentForKeyEvent(t))==null||e.toggleSelected()}handleKeyEnter(t){if(!this.setFilterParams)return;const{excelMode:e,readOnly:s}=this.setFilterParams||{};!e||s||(t.preventDefault(),this.onBtApply(!1,!1,t),this.setFilterParams.excelMode==="mac"&&this.eMiniFilter.getInputElement().select())}handleKeyLeft(t){var e;(e=this.getComponentForKeyEvent(t))==null||e.setExpanded(!1)}handleKeyRight(t){var e;(e=this.getComponentForKeyEvent(t))==null||e.setExpanded(!0)}getComponentForKeyEvent(t){var e;if(!this.eSetFilterList.contains(this.gos.getActiveDomElement())||!this.virtualList)return;const s=this.virtualList.getLastFocusedRow();if(s==null)return;const i=this.virtualList.getComponentAt(s);if(i==null)return;t.preventDefault();const{readOnly:r}=(e=this.setFilterParams)!=null?e:{};if(!r)return i}getCssIdentifier(){return"set-filter"}setModel(t){var e;return t==null&&((e=this.valueModel)==null?void 0:e.getModel())==null?(this.setMiniFilter(null),import_core5.AgPromise.resolve()):super.setModel(t)}refresh(t){var e,s,i;return!super.refresh(t)||["treeList","treeListFormatter","treeListPathGetter","keyCreator","convertValuesToStrings","caseSensitive","comparator","suppressSelectAll","excelMode"].some(l=>{var a;return t[l]!==((a=this.setFilterParams)==null?void 0:a[l])})||this.haveColDefParamsChanged(t.colDef)?!1:(super.updateParams(t),this.updateSetFilterOnParamsChange(t),this.updateMiniFilter(),(t.cellRenderer!==((e=this.setFilterParams)==null?void 0:e.cellRenderer)||t.valueFormatter!==((s=this.setFilterParams)==null?void 0:s.valueFormatter))&&this.checkAndRefreshVirtualList(),(i=this.valueModel)==null||i.updateOnParamsChange(t).then(()=>{var l;(l=this.valueModel)!=null&&l.hasSelections()&&this.refreshFilterValues()}),!0)}haveColDefParamsChanged(t){var e;const s=["keyCreator","filterValueGetter"],i=(e=this.setFilterParams)==null?void 0:e.colDef;return s.some(r=>t[r]!==i?.[r])}setModelAndRefresh(t){return this.valueModel?this.valueModel.setModel(t).then(()=>this.checkAndRefreshVirtualList()):import_core5.AgPromise.resolve()}resetUiToDefaults(){return this.setMiniFilter(null),this.setModelAndRefresh(null)}setModelIntoUi(t){this.setMiniFilter(null);const e=t==null?null:t.values;return this.setModelAndRefresh(e)}getModelFromUi(){if(!this.valueModel)throw new Error("Value model has not been created.");const t=this.valueModel.getModel();return t?{values:t,filterType:this.getFilterType()}:null}getFilterType(){return"set"}getValueModel(){return this.valueModel}areModelsEqual(t,e){return t==null&&e==null?!0:t!=null&&e!=null&&import_core5._.areEqual(t.values,e.values)}setParams(t){var e;this.applyExcelModeOptions(t),super.setParams(t),this.updateSetFilterOnParamsChange(t);const s=(e=t.keyCreator)!=null?e:t.colDef.keyCreator;this.valueModel=new SetValueModel({filterParams:t,setIsLoading:i=>this.setIsLoading(i),translate:i=>this.translateForSetFilter(i),caseFormat:i=>this.caseFormat(i),createKey:this.createKey,valueFormatter:this.valueFormatter,usingComplexObjects:!!s,gos:this.gos,columnModel:this.columnModel,valueService:this.valueService,treeDataTreeList:this.treeDataTreeList,groupingTreeList:this.groupingTreeList,addManagedListener:(i,r)=>this.addManagedListener(this.eventService,i,r)}),this.initialiseFilterBodyUi(),this.addEventListenersForDataChanges()}onAddCurrentSelectionToFilterChange(t){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.setAddCurrentSelectionToFilter(t)}setValueFormatter(t,e,s,i,r){let l=t;if(!l){if(e&&!s&&!i)throw new Error("AG Grid: Must supply a Value Formatter in Set Filter params when using a Key Creator unless convertValuesToStrings is enabled");this.noValueFormatterSupplied=!0,r||(l=a=>import_core5._.toStringOrNull(a.value))}this.valueFormatter=l}generateCreateKey(t,e,s){if(s&&!t)throw new Error("AG Grid: Must supply a Key Creator in Set Filter params when `treeList = true` on a group column, and Tree Data or Row Grouping is enabled.");return t?(i,r=null)=>{const l=this.getKeyCreatorParams(i,r);return import_core5._.makeNull(t(l))}:e?i=>Array.isArray(i)?i:import_core5._.makeNull(import_core5._.toStringOrNull(i)):i=>import_core5._.makeNull(import_core5._.toStringOrNull(i))}getFormattedValue(t){var e;let s=this.valueModel.getValue(t);this.noValueFormatterSupplied&&(this.treeDataTreeList||this.groupingTreeList)&&Array.isArray(s)&&(s=import_core5._.last(s));const i=this.valueService.formatValue(this.setFilterParams.column,null,s,this.valueFormatter,!1);return(e=i??import_core5._.toStringOrNull(s))!=null?e:this.translateForSetFilter("blanks")}applyExcelModeOptions(t){t.excelMode==="windows"?(t.buttons||(t.buttons=["apply","cancel"]),t.closeOnApply==null&&(t.closeOnApply=!0)):t.excelMode==="mac"&&(t.buttons||(t.buttons=["reset"]),t.applyMiniFilterWhileTyping==null&&(t.applyMiniFilterWhileTyping=!0),t.debounceMs==null&&(t.debounceMs=500)),t.excelMode&&t.defaultToNothingSelected&&(t.defaultToNothingSelected=!1,import_core5._.warnOnce('The Set Filter Parameter "defaultToNothingSelected" value was ignored because it does not work when "excelMode" is used.'))}addEventListenersForDataChanges(){this.isValuesTakenFromGrid()&&(this.addManagedListener(this.eventService,import_core5.Events.EVENT_CELL_VALUE_CHANGED,t=>{this.setFilterParams&&t.column===this.setFilterParams.column&&this.syncAfterDataChange()}),this.addManagedPropertyListeners(["treeData","getDataPath","groupAllowUnbalanced"],()=>{this.syncAfterDataChange()}))}syncAfterDataChange(){if(!this.valueModel)throw new Error("Value model has not been created.");return this.valueModel.refreshValues().then(()=>{this.checkAndRefreshVirtualList(),this.onBtApply(!1,!0)})}setIsLoading(t){import_core5._.setDisplayed(this.eFilterLoading,t),t||(this.hardRefreshVirtualList=!0)}initialiseFilterBodyUi(){this.initVirtualList(),this.initMiniFilter()}initVirtualList(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");const e=this.localeService.getLocaleTextFunc()("ariaFilterList","Filter List"),s=!!this.setFilterParams.treeList,i=this.virtualList=this.createBean(new import_core5.VirtualList({cssIdentifier:"filter",ariaRole:s?"tree":"listbox",listName:e})),r=this.getRefElement("eSetFilterList");s&&r.classList.add("ag-set-filter-tree-list"),r&&r.appendChild(i.getGui());const{cellHeight:l}=this.setFilterParams;l!=null&&i.setRowHeight(l);const a=(o,d)=>this.createSetListItem(o,s,d);i.setComponentCreator(a);const n=(o,d)=>this.updateSetListItem(o,d);i.setComponentUpdater(n);let h;this.setFilterParams.suppressSelectAll?h=new ModelWrapper(this.valueModel):h=new ModelWrapperWithSelectAll(this.valueModel,()=>this.isSelectAllSelected()),s&&(h=new TreeModelWrapper(h)),i.setModel(h)}getSelectAllLabel(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");const t=this.valueModel.getMiniFilter()==null||!this.setFilterParams.excelMode?"selectAll":"selectAllSearchResults";return this.translateForSetFilter(t)}getAddSelectionToFilterLabel(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");return this.translateForSetFilter("addCurrentSelectionToFilter")}createSetListItem(t,e,s){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");const i=this.valueModel.hasGroups(),{isSelected:r,isExpanded:l}=this.isSelectedExpanded(t),{value:a,depth:n,isGroup:h,hasIndeterminateExpandState:o,selectedListener:d,expandedListener:u}=this.newSetListItemAttributes(t,e),p={focusWrapper:s,value:a,params:this.setFilterParams,translate:f=>this.translateForSetFilter(f),valueFormatter:this.valueFormatter,item:t,isSelected:r,isTree:e,depth:n,groupsExist:i,isGroup:h,isExpanded:l,hasIndeterminateExpandState:o},c=this.createBean(new SetFilterListItem(p));return c.addEventListener(SetFilterListItem.EVENT_SELECTION_CHANGED,d),u&&c.addEventListener(SetFilterListItem.EVENT_EXPANDED_CHANGED,u),c}newSetTreeItemAttributes(t,e){var s,i,r,l,a,n;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");const h=this.valueModel.hasGroups();return t.key===SetFilterDisplayValue.SELECT_ALL?{value:()=>this.getSelectAllLabel(),isGroup:h,depth:t.depth,hasIndeterminateExpandState:!0,selectedListener:o=>this.onSelectAll(o.isSelected),expandedListener:o=>this.onExpandAll(o.item,o.isExpanded)}:t.key===SetFilterDisplayValue.ADD_SELECTION_TO_FILTER?{value:()=>this.getAddSelectionToFilterLabel(),depth:t.depth,isGroup:!1,hasIndeterminateExpandState:!1,selectedListener:o=>{this.onAddCurrentSelectionToFilterChange(o.isSelected)}}:t.children?{value:(r=(i=(s=this.setFilterParams).treeListFormatter)==null?void 0:i.call(s,t.treeKey,t.depth,t.parentTreeKeys))!=null?r:t.treeKey,depth:t.depth,isGroup:!0,selectedListener:o=>this.onGroupItemSelected(o.item,o.isSelected),expandedListener:o=>this.onExpandedChanged(o.item,o.isExpanded)}:{value:(n=(a=(l=this.setFilterParams).treeListFormatter)==null?void 0:a.call(l,t.treeKey,t.depth,t.parentTreeKeys))!=null?n:t.treeKey,depth:t.depth,selectedListener:o=>this.onItemSelected(o.item.key,o.isSelected)}}newSetListItemAttributes(t,e){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");return this.isSetFilterModelTreeItem(t)?this.newSetTreeItemAttributes(t,e):t===SetFilterDisplayValue.SELECT_ALL?{value:()=>this.getSelectAllLabel(),selectedListener:s=>this.onSelectAll(s.isSelected)}:t===SetFilterDisplayValue.ADD_SELECTION_TO_FILTER?{value:()=>this.getAddSelectionToFilterLabel(),selectedListener:s=>{this.onAddCurrentSelectionToFilterChange(s.isSelected)}}:{value:this.valueModel.getValue(t),selectedListener:s=>this.onItemSelected(s.item,s.isSelected)}}updateSetListItem(t,e){const{isSelected:s,isExpanded:i}=this.isSelectedExpanded(t);e.refresh(t,s,i)}isSelectedExpanded(t){let e,s;return this.isSetFilterModelTreeItem(t)?(s=t.expanded,t.key===SetFilterDisplayValue.SELECT_ALL?e=this.isSelectAllSelected():t.key===SetFilterDisplayValue.ADD_SELECTION_TO_FILTER?e=this.valueModel.isAddCurrentSelectionToFilterChecked():t.children?e=this.areAllChildrenSelected(t):e=this.valueModel.isKeySelected(t.key)):t===SetFilterDisplayValue.SELECT_ALL?e=this.isSelectAllSelected():t===SetFilterDisplayValue.ADD_SELECTION_TO_FILTER?e=this.valueModel.isAddCurrentSelectionToFilterChecked():e=this.valueModel.isKeySelected(t),{isSelected:e,isExpanded:s}}isSetFilterModelTreeItem(t){return t?.treeKey!==void 0}initMiniFilter(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");const{eMiniFilter:t,localeService:e}=this,s=e.getLocaleTextFunc();t.setDisplayed(!this.setFilterParams.suppressMiniFilter),t.setValue(this.valueModel.getMiniFilter()),t.onValueChange(()=>this.onMiniFilterInput()),t.setInputAriaLabel(s("ariaSearchFilterValues","Search filter values")),this.addManagedListener(t.getInputElement(),"keydown",i=>this.onMiniFilterKeyDown(i))}updateMiniFilter(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");const{eMiniFilter:t}=this;t.isDisplayed()!==!this.setFilterParams.suppressMiniFilter&&t.setDisplayed(!this.setFilterParams.suppressMiniFilter);const e=this.valueModel.getMiniFilter();t.getValue()!==e&&t.setValue(e)}afterGuiAttached(t){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");super.afterGuiAttached(t),this.resetExpansion(),this.refreshVirtualList();const{eMiniFilter:e}=this;e.setInputPlaceholder(this.translateForSetFilter("searchOoo")),(!t||!t.suppressFocus)&&e.getFocusableElement().focus()}afterGuiDetached(){var t,e;super.afterGuiDetached(),(t=this.setFilterParams)!=null&&t.excelMode&&this.resetMiniFilter();const s=this.getModel();((e=this.setFilterParams)!=null&&e.excelMode||!this.areModelsEqual(s,this.getModelFromUi()))&&(this.resetUiToActiveModel(s),this.showOrHideResults())}applyModel(t="api"){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");this.setFilterParams.excelMode&&t!=="rowDataUpdated"&&this.valueModel.isEverythingVisibleSelected()&&this.valueModel.selectAllMatchingMiniFilter();const e=this.valueModel.showAddCurrentSelectionToFilter()&&this.valueModel.isAddCurrentSelectionToFilterChecked();if(e&&!this.getModel())return!1;const s=super.applyModel(t),i=this.getModel();return i?(e||this.valueModel.setAppliedModelKeys(new Set),i.values.forEach(r=>{this.valueModel.addToAppliedModelKeys(r)})):e||this.valueModel.setAppliedModelKeys(null),s}isModelValid(t){return this.setFilterParams&&this.setFilterParams.excelMode?t==null||t.values.length>0:!0}doesFilterPass(t){if(!this.setFilterParams||!this.valueModel||!this.valueModel.getCaseFormattedAppliedModelKeys())return!0;if(!this.valueModel.hasAnyAppliedModelKey())return!1;const{node:e,data:s}=t;if(this.treeDataTreeList)return this.doesFilterPassForTreeData(e,s);if(this.groupingTreeList)return this.doesFilterPassForGrouping(e);let i=this.getValueFromNode(e);return this.convertValuesToStrings?this.doesFilterPassForConvertValuesToString(e,i):i!=null&&Array.isArray(i)?i.length===0?this.valueModel.hasAppliedModelKey(null):i.some(r=>this.isInAppliedModel(this.createKey(r,e))):this.isInAppliedModel(this.createKey(i,e))}doesFilterPassForConvertValuesToString(t,e){const s=this.createKey(e,t);return s!=null&&Array.isArray(s)?s.length===0?this.valueModel.hasAppliedModelKey(null):s.some(i=>this.isInAppliedModel(i)):this.isInAppliedModel(s)}doesFilterPassForTreeData(t,e){var s;return(s=t.childrenAfterGroup)!=null&&s.length?!1:this.isInAppliedModel(this.createKey(this.checkMakeNullDataPath(this.getDataPath(e))))}doesFilterPassForGrouping(t){const e=this.columnModel.getRowGroupColumns().map(s=>this.valueService.getKeyForNode(s,t));return e.push(this.getValueFromNode(t)),this.isInAppliedModel(this.createKey(this.checkMakeNullDataPath(e)))}checkMakeNullDataPath(t){return t&&(t=t.map(e=>import_core5._.toStringOrNull(import_core5._.makeNull(e)))),t?.some(e=>e==null)?null:t}isInAppliedModel(t){return this.valueModel.hasAppliedModelKey(t)}getValueFromNode(t){return this.setFilterParams.getValue(t)}getKeyCreatorParams(t,e=null){return{value:t,colDef:this.setFilterParams.colDef,column:this.setFilterParams.column,node:e,data:e?.data,api:this.setFilterParams.api,columnApi:this.setFilterParams.columnApi,context:this.setFilterParams.context}}onNewRowsLoaded(){this.isValuesTakenFromGrid()&&this.syncAfterDataChange()}isValuesTakenFromGrid(){return this.valueModel?this.valueModel.getValuesType()===2:!1}setFilterValues(t){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.overrideValues(t).then(()=>{this.checkAndRefreshVirtualList(),this.onUiChanged()})}resetFilterValues(){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.setValuesType(2),this.syncAfterDataChange()}refreshFilterValues(){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.isInitialised()&&this.valueModel.refreshValues().then(()=>{this.checkAndRefreshVirtualList(),this.onUiChanged()})}onAnyFilterChanged(){setTimeout(()=>{if(this.isAlive()){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.refreshAfterAnyFilterChanged().then(t=>{t&&(this.checkAndRefreshVirtualList(),this.showOrHideResults())})}},0)}onMiniFilterInput(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.valueModel.setMiniFilter(this.eMiniFilter.getValue()))return;const{applyMiniFilterWhileTyping:t,readOnly:e}=this.setFilterParams||{};!e&&t?this.filterOnAllVisibleValues(!1):this.updateUiAfterMiniFilterChange()}updateUiAfterMiniFilterChange(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");const{excelMode:t,readOnly:e}=this.setFilterParams||{};t==null||e?this.checkAndRefreshVirtualList():this.valueModel.getMiniFilter()==null?this.resetUiToActiveModel(this.getModel()):(this.valueModel.selectAllMatchingMiniFilter(!0),this.checkAndRefreshVirtualList(),this.onUiChanged()),this.showOrHideResults()}showOrHideResults(){if(!this.valueModel)throw new Error("Value model has not been created.");const t=this.valueModel.getMiniFilter()!=null&&this.valueModel.getDisplayedValueCount()<1;import_core5._.setDisplayed(this.eNoMatches,t),import_core5._.setDisplayed(this.eSetFilterList,!t)}resetMiniFilter(){var t;this.eMiniFilter.setValue(null,!0),(t=this.valueModel)==null||t.setMiniFilter(null)}resetUiToActiveModel(t,e){this.setModelAndRefresh(t==null?null:t.values).then(()=>{this.onUiChanged(!1,"prevent"),e?.()})}handleCancelEnd(t){this.setMiniFilter(null),super.handleCancelEnd(t)}onMiniFilterKeyDown(t){const{excelMode:e,readOnly:s}=this.setFilterParams||{};t.key===import_core5.KeyCode.ENTER&&!e&&!s&&this.filterOnAllVisibleValues()}filterOnAllVisibleValues(t=!0){const{readOnly:e}=this.setFilterParams||{};if(!this.valueModel)throw new Error("Value model has not been created.");if(e)throw new Error("Unable to filter in readOnly mode.");this.valueModel.selectAllMatchingMiniFilter(!0),this.checkAndRefreshVirtualList(),this.onUiChanged(!1,t?"immediately":"debounce"),this.showOrHideResults()}focusRowIfAlive(t){t!=null&&window.setTimeout(()=>{if(!this.virtualList)throw new Error("Virtual list has not been created.");this.isAlive()&&this.virtualList.focusRow(t)},0)}onSelectAll(t){if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.virtualList)throw new Error("Virtual list has not been created.");t?this.valueModel.selectAllMatchingMiniFilter():this.valueModel.deselectAllMatchingMiniFilter(),this.refreshAfterSelection()}onGroupItemSelected(t,e){const s=i=>{i.children?i.children.forEach(r=>s(r)):this.selectItem(i.key,e)};s(t),this.refreshAfterSelection()}onItemSelected(t,e){if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.virtualList)throw new Error("Virtual list has not been created.");this.selectItem(t,e),this.refreshAfterSelection()}selectItem(t,e){e?this.valueModel.selectKey(t):this.valueModel.deselectKey(t)}onExpandAll(t,e){const s=i=>{i.filterPasses&&i.available&&i.children&&(i.children.forEach(r=>s(r)),i.expanded=e)};s(t),this.refreshAfterExpansion()}onExpandedChanged(t,e){t.expanded=e,this.refreshAfterExpansion()}refreshAfterExpansion(){const t=this.virtualList.getLastFocusedRow();this.valueModel.updateDisplayedValues("expansion"),this.checkAndRefreshVirtualList(),this.focusRowIfAlive(t)}refreshAfterSelection(){const t=this.virtualList.getLastFocusedRow();this.checkAndRefreshVirtualList(),this.onUiChanged(),this.focusRowIfAlive(t)}setMiniFilter(t){this.eMiniFilter.setValue(t),this.onMiniFilterInput()}getMiniFilter(){return this.valueModel?this.valueModel.getMiniFilter():null}checkAndRefreshVirtualList(){if(!this.virtualList)throw new Error("Virtual list has not been created.");this.virtualList.refresh(!this.hardRefreshVirtualList),this.hardRefreshVirtualList&&(this.hardRefreshVirtualList=!1)}getFilterKeys(){return this.valueModel?this.valueModel.getKeys():[]}getFilterValues(){return this.valueModel?this.valueModel.getValues():[]}getValues(){return this.getFilterKeys()}refreshVirtualList(){this.setFilterParams&&this.setFilterParams.refreshValuesOnOpen?this.refreshFilterValues():this.checkAndRefreshVirtualList()}translateForSetFilter(t){return this.localeService.getLocaleTextFunc()(t,DEFAULT_LOCALE_TEXT[t])}isSelectAllSelected(){if(!this.setFilterParams||!this.valueModel)return!1;if(this.setFilterParams.defaultToNothingSelected){if(this.valueModel.hasSelections()&&this.valueModel.isEverythingVisibleSelected())return!0;if(this.valueModel.isNothingVisibleSelected())return!1}else{if(this.valueModel.hasSelections()&&this.valueModel.isNothingVisibleSelected())return!1;if(this.valueModel.isEverythingVisibleSelected())return!0}}areAllChildrenSelected(t){const e=s=>{if(s.children){let i=!1,r=!1;return s.children.some(a=>{if(!a.filterPasses||!a.available)return!1;const n=e(a);return n===void 0?!0:(n?i=!0:r=!0,i&&r)})?void 0:i}else return this.valueModel.isKeySelected(s.key)};return this.setFilterParams.defaultToNothingSelected?this.valueModel.hasSelections()&&e(t):e(t)}destroy(){this.virtualList!=null&&(this.virtualList.destroy(),this.virtualList=null),super.destroy()}caseFormat(t){return t==null||typeof t!="string"||this.caseSensitive?t:t.toUpperCase()}resetExpansion(){var t,e;if(!((t=this.setFilterParams)!=null&&t.treeList))return;const s=(e=this.valueModel)==null?void 0:e.getSelectAllItem();if(this.isSetFilterModelTreeItem(s)){const i=r=>{r.children&&(r.children.forEach(l=>i(l)),r.expanded=!1)};i(s),this.valueModel.updateDisplayedValues("expansion")}}getModelAsString(t){return this.filterModelFormatter.getModelAsString(t,this)}getPositionableElement(){return this.eSetFilterList}};__decorateClass([(0,import_core5.RefSelector)("eMiniFilter")],SetFilter.prototype,"eMiniFilter",2),__decorateClass([(0,import_core5.RefSelector)("eFilterLoading")],SetFilter.prototype,"eFilterLoading",2),__decorateClass([(0,import_core5.RefSelector)("eSetFilterList")],SetFilter.prototype,"eSetFilterList",2),__decorateClass([(0,import_core5.RefSelector)("eFilterNoMatches")],SetFilter.prototype,"eNoMatches",2),__decorateClass([(0,import_core5.Autowired)("columnModel")],SetFilter.prototype,"columnModel",2),__decorateClass([(0,import_core5.Autowired)("valueService")],SetFilter.prototype,"valueService",2);var ModelWrapper=class{constructor(t){this.model=t}getRowCount(){return this.model.getDisplayedValueCount()}getRow(t){return this.model.getDisplayedItem(t)}areRowsEqual(t,e){return t===e}},ModelWrapperWithSelectAll=class{constructor(t,e){this.model=t,this.isSelectAllSelected=e}getRowCount(){const e=this.model.showAddCurrentSelectionToFilter()?2:1;return this.model.getDisplayedValueCount()+e}getRow(t){if(t===0)return this.model.getSelectAllItem();const e=this.model.showAddCurrentSelectionToFilter(),s=e?2:1;return t===1&&e?this.model.getAddSelectionToFilterItem():this.model.getDisplayedItem(t-s)}areRowsEqual(t,e){return t===e}},TreeModelWrapper=class{constructor(t){this.model=t}getRowCount(){return this.model.getRowCount()}getRow(t){return this.model.getRow(t)}areRowsEqual(t,e){return t==null&&e==null?!0:t!=null&&e!=null&&t.treeKey===e.treeKey&&t.depth===e.depth}},import_core6=require("@ag-grid-community/core"),SetFloatingFilterComp=class extends import_core6.Component{constructor(){super(`
    19|             <div class="ag-floating-filter-input ag-set-floating-filter-input" role="presentation">
    20|                 <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>
    21|             </div>`),this.availableValuesListenerAdded=!1,this.filterModelFormatter=new SetFilterModelFormatter}destroy(){super.destroy()}init(t){this.params=t,this.eFloatingFilterText.setDisabled(!0).addGuiEventListener("click",()=>this.params.showParentFilter()),this.setParams(t)}setParams(t){const e=this.columnModel.getDisplayNameForColumn(t.column,"header",!0),s=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setInputAriaLabel(`${e} ${s("ariaFilterInput","Filter Input")}`)}onParamsUpdated(t){this.refresh(t)}refresh(t){this.params=t,this.setParams(t)}onParentModelChanged(t){this.updateFloatingFilterText(t)}parentSetFilterInstance(t){this.params.parentFilterInstance(e=>{if(!(e instanceof SetFilter))throw new Error("AG Grid - SetFloatingFilter expects SetFilter as its parent");t(e)})}addAvailableValuesListener(){this.parentSetFilterInstance(t=>{const e=t.getValueModel();e&&this.addManagedListener(e,SetValueModel.EVENT_AVAILABLE_VALUES_CHANGED,()=>this.updateFloatingFilterText())}),this.availableValuesListenerAdded=!0}updateFloatingFilterText(t){this.availableValuesListenerAdded||this.addAvailableValuesListener(),this.parentSetFilterInstance(e=>{this.eFloatingFilterText.setValue(this.filterModelFormatter.getModelAsString(t,e))})}};__decorateClass([(0,import_core6.RefSelector)("eFloatingFilterText")],SetFloatingFilterComp.prototype,"eFloatingFilterText",2),__decorateClass([(0,import_core6.Autowired)("columnModel")],SetFloatingFilterComp.prototype,"columnModel",2);var VERSION="31.3.4",SetFilterModule={version:VERSION,moduleName:import_core7.ModuleNames.SetFilterModule,beans:[],userComponents:[{componentName:"agSetColumnFilter",componentClass:SetFilter},{componentName:"agSetColumnFloatingFilter",componentClass:SetFloatingFilterComp}],dependantModules:[import_core8.EnterpriseCoreModule]};


# ====================================================================
# FILE: enterprise-modules/set-filter/dist/types/src/version.d.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export declare const VERSION = "31.3.4";


# ====================================================================
# FILE: enterprise-modules/set-filter/src/version.ts
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-1 ---
     1| export const VERSION = '31.3.4';


# ====================================================================
# FILE: enterprise-modules/side-bar/dist/package/main.cjs.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 867-907 ---
   867|       return true;
   868|     }
   869|     if (currentGroup.groupId === groupId) {
   870|       const existingChildIds = currentGroup.children.map(this.getId);
   871|       const colDefAlreadyPresent = import_core6._.includes(existingChildIds, this.getId(groupToAdd));
   872|       if (!colDefAlreadyPresent) {
   873|         currentGroup.children.push(groupToAdd);
   874|         return true;
   875|       }
   876|     }
   877|     currentGroup.children.forEach((subGroup) => this.addChildrenToGroup(subGroup, groupId, colDef));
   878|     return false;
   879|   }
   880| };
   881| __decorateClass([
   882|   (0, import_core6.Autowired)("columnModel")
   883| ], ToolPanelColDefService.prototype, "columnModel", 2);
   884| ToolPanelColDefService = __decorateClass([
   885|   (0, import_core6.Bean)("toolPanelColDefService")
   886| ], ToolPanelColDefService);
   887| var VERSION = "31.3.4";
   888| var import_core7 = require("@ag-grid-community/core");
   889| var SideBarService = class extends import_core7.BeanStub {
   890|   registerSideBarComp(sideBarComp) {
   891|     this.sideBarComp = sideBarComp;
   892|   }
   893|   getSideBarComp() {
   894|     return this.sideBarComp;
   895|   }
   896| };
   897| SideBarService = __decorateClass([
   898|   (0, import_core7.Bean)("sideBarService")
   899| ], SideBarService);
   900| var SideBarModule = {
   901|   version: VERSION,
   902|   moduleName: import_core8.ModuleNames.SideBarModule,
   903|   beans: [ToolPanelColDefService, SideBarService],
   904|   agStackComponents: [
   905|     { componentName: "AgHorizontalResize", componentClass: HorizontalResizeComp },
   906|     { componentName: "AgSideBar", componentClass: SideBarComp },
   907|     { componentName: "AgSideBarButtons", componentClass: SideBarButtonsComp }


# ====================================================================
# FILE: enterprise-modules/side-bar/dist/package/main.cjs.min.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-8 ---
     1| var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropNames=Object.getOwnPropertyNames,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(i,e,t)=>e in i?__defProp(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,__spreadValues=(i,e)=>{for(var t in e||(e={}))__hasOwnProp.call(e,t)&&__defNormalProp(i,t,e[t]);if(__getOwnPropSymbols)for(var t of __getOwnPropSymbols(e))__propIsEnum.call(e,t)&&__defNormalProp(i,t,e[t]);return i},__spreadProps=(i,e)=>__defProps(i,__getOwnPropDescs(e)),__export=(i,e)=>{for(var t in e)__defProp(i,t,{get:e[t],enumerable:!0})},__copyProps=(i,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of __getOwnPropNames(e))!__hasOwnProp.call(i,s)&&s!==t&&__defProp(i,s,{get:()=>e[s],enumerable:!(o=__getOwnPropDesc(e,s))||o.enumerable});return i},__toCommonJS=i=>__copyProps(__defProp({},"__esModule",{value:!0}),i),__decorateClass=(i,e,t,o)=>{for(var s=o>1?void 0:o?__getOwnPropDesc(e,t):e,n=i.length-1,r;n>=0;n--)(r=i[n])&&(s=(o?r(e,t,s):r(s))||s);return o&&s&&__defProp(e,t,s),s},main_exports={};__export(main_exports,{SideBarModule:()=>SideBarModule,ToolPanelColDefService:()=>ToolPanelColDefService}),module.exports=__toCommonJS(main_exports);var import_core8=require("@ag-grid-community/core"),import_core9=require("@ag-grid-enterprise/core"),import_core=require("@ag-grid-community/core"),HorizontalResizeComp=class extends import_core.Component{constructor(){super('<div class="ag-tool-panel-horizontal-resize"></div>'),this.minWidth=100,this.maxWidth=null}setElementToResize(i){this.elementToResize=i}postConstruct(){const i=this.horizontalResizeService.addResizeBar({eResizeBar:this.getGui(),dragStartPixels:1,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this),onResizeEnd:this.onResizeEnd.bind(this)});this.addDestroyFunc(i),this.setInverted(this.gos.get("enableRtl"))}dispatchResizeEvent(i,e,t){const o={type:import_core.Events.EVENT_TOOL_PANEL_SIZE_CHANGED,width:t,started:i,ended:e};this.eventService.dispatchEvent(o)}onResizeStart(){this.startingWidth=this.elementToResize.offsetWidth,this.dispatchResizeEvent(!0,!1,this.startingWidth)}onResizeEnd(i){return this.onResizing(i,!0)}onResizing(i,e=!1){const t=this.inverted?-1:1;let o=Math.max(this.minWidth,Math.floor(this.startingWidth-i*t));this.maxWidth!=null&&(o=Math.min(this.maxWidth,o)),this.elementToResize.style.width=`${o}px`,this.dispatchResizeEvent(!1,e,o)}setInverted(i){this.inverted=i}setMaxWidth(i){this.maxWidth=i}setMinWidth(i){i!=null?this.minWidth=i:this.minWidth=100}};__decorateClass([(0,import_core.Autowired)("horizontalResizeService")],HorizontalResizeComp.prototype,"horizontalResizeService",2),__decorateClass([import_core.PostConstruct],HorizontalResizeComp.prototype,"postConstruct",1);var import_core5=require("@ag-grid-community/core"),import_core3=require("@ag-grid-community/core"),import_core2=require("@ag-grid-community/core"),_SideBarButtonComp=class g extends import_core2.Component{constructor(e){super(),this.toolPanelDef=e}getToolPanelId(){return this.toolPanelDef.id}postConstruct(){const e=this.createTemplate();this.setTemplate(e),this.setLabel(),this.setIcon(),this.addManagedListener(this.eToggleButton,"click",this.onButtonPressed.bind(this)),this.eToggleButton.setAttribute("id",`ag-${this.getCompId()}-button`)}createTemplate(){return`<div class="ag-side-button" role="presentation">
     2|                 <button type="button" ref="eToggleButton" tabindex="-1" role="tab" aria-expanded="false" class="ag-button ag-side-button-button">
     3|                     <div ref="eIconWrapper" class="ag-side-button-icon-wrapper" aria-hidden="true"></div>
     4|                     <span ref ="eLabel" class="ag-side-button-label"></span>
     5|                 </button>
     6|             </div>`}setLabel(){const e=this.localeService.getLocaleTextFunc(),t=this.toolPanelDef,o=e(t.labelKey,t.labelDefault);this.eLabel.innerText=o}setIcon(){this.eIconWrapper.insertAdjacentElement("afterbegin",import_core2._.createIconNoSpan(this.toolPanelDef.iconKey,this.gos))}onButtonPressed(){this.dispatchEvent({type:g.EVENT_TOGGLE_BUTTON_CLICKED})}setSelected(e){this.addOrRemoveCssClass("ag-selected",e),import_core2._.setAriaExpanded(this.eToggleButton,e)}getButtonElement(){return this.eToggleButton}};_SideBarButtonComp.EVENT_TOGGLE_BUTTON_CLICKED="toggleButtonClicked",__decorateClass([(0,import_core2.RefSelector)("eToggleButton")],_SideBarButtonComp.prototype,"eToggleButton",2),__decorateClass([(0,import_core2.RefSelector)("eIconWrapper")],_SideBarButtonComp.prototype,"eIconWrapper",2),__decorateClass([(0,import_core2.RefSelector)("eLabel")],_SideBarButtonComp.prototype,"eLabel",2),__decorateClass([import_core2.PostConstruct],_SideBarButtonComp.prototype,"postConstruct",1);var SideBarButtonComp=_SideBarButtonComp,_SideBarButtonsComp=class f extends import_core3.Component{constructor(){super(f.TEMPLATE),this.buttonComps=[]}postConstruct(){this.addManagedListener(this.getFocusableElement(),"keydown",this.handleKeyDown.bind(this))}handleKeyDown(e){if(e.key!==import_core3.KeyCode.TAB||!e.shiftKey)return;const t=import_core3._.last(this.columnModel.getAllDisplayedColumns());this.focusService.focusGridView(t,!0)&&e.preventDefault()}setActiveButton(e){this.buttonComps.forEach(t=>{t.setSelected(e===t.getToolPanelId())})}addButtonComp(e){const t=this.createBean(new SideBarButtonComp(e));return this.buttonComps.push(t),this.appendChild(t),t.addEventListener(SideBarButtonComp.EVENT_TOGGLE_BUTTON_CLICKED,()=>{this.dispatchEvent({type:f.EVENT_SIDE_BAR_BUTTON_CLICKED,toolPanelId:e.id})}),t}clearButtons(){this.buttonComps=this.destroyBeans(this.buttonComps),import_core3._.clearElement(this.getGui())}};_SideBarButtonsComp.EVENT_SIDE_BAR_BUTTON_CLICKED="sideBarButtonClicked",_SideBarButtonsComp.TEMPLATE='<div class="ag-side-buttons" role="tablist"></div>',__decorateClass([(0,import_core3.Autowired)("focusService")],_SideBarButtonsComp.prototype,"focusService",2),__decorateClass([(0,import_core3.Autowired)("columnModel")],_SideBarButtonsComp.prototype,"columnModel",2),__decorateClass([import_core3.PostConstruct],_SideBarButtonsComp.prototype,"postConstruct",1),__decorateClass([import_core3.PreDestroy],_SideBarButtonsComp.prototype,"clearButtons",1);var SideBarButtonsComp=_SideBarButtonsComp,_SideBarDefParser=class u{static parse(e){if(!e)return;if(e===!0)return{toolPanels:[u.DEFAULT_COLUMN_COMP,u.DEFAULT_FILTER_COMP],defaultToolPanel:"columns"};if(typeof e=="string")return u.parse([e]);if(Array.isArray(e)){const o=[];return e.forEach(s=>{const n=u.DEFAULT_BY_KEY[s];if(!n){console.warn(`AG Grid: the key ${s} is not a valid key for specifying a tool panel, valid keys are: ${Object.keys(u.DEFAULT_BY_KEY).join(",")}`);return}o.push(n)}),o.length===0?void 0:{toolPanels:o,defaultToolPanel:o[0].id}}return{toolPanels:u.parseComponents(e.toolPanels),defaultToolPanel:e.defaultToolPanel,hiddenByDefault:e.hiddenByDefault,position:e.position}}static parseComponents(e){const t=[];return e&&e.forEach(o=>{let s=null;if(typeof o=="string"){const n=u.DEFAULT_BY_KEY[o];if(!n){console.warn(`AG Grid: the key ${o} is not a valid key for specifying a tool panel, valid keys are: ${Object.keys(u.DEFAULT_BY_KEY).join(",")}`);return}s=n}else s=o;t.push(s)}),t}};_SideBarDefParser.DEFAULT_COLUMN_COMP={id:"columns",labelDefault:"Columns",labelKey:"columns",iconKey:"columns",toolPanel:"agColumnsToolPanel"},_SideBarDefParser.DEFAULT_FILTER_COMP={id:"filters",labelDefault:"Filters",labelKey:"filters",iconKey:"filter",toolPanel:"agFiltersToolPanel"},_SideBarDefParser.DEFAULT_BY_KEY={columns:_SideBarDefParser.DEFAULT_COLUMN_COMP,filters:_SideBarDefParser.DEFAULT_FILTER_COMP};var SideBarDefParser=_SideBarDefParser,import_core4=require("@ag-grid-community/core"),_ToolPanelWrapper=class m extends import_core4.Component{constructor(){super(m.TEMPLATE)}setupResize(){const e=this.getGui(),t=this.resizeBar=this.createManagedBean(new HorizontalResizeComp);e.setAttribute("id",`ag-${this.getCompId()}`),t.setElementToResize(e),this.appendChild(t)}getToolPanelId(){return this.toolPanelId}setToolPanelDef(e,t){const{id:o,minWidth:s,maxWidth:n,width:r}=e;this.toolPanelId=o,this.width=r;const a=this.userComponentFactory.getToolPanelCompDetails(e,t),l=a.newAgStackInstance();if(this.params=a.params,l==null){console.warn(`AG Grid: error processing tool panel component ${o}. You need to specify 'toolPanel'`);return}l.then(this.setToolPanelComponent.bind(this)),s!=null&&this.resizeBar.setMinWidth(s),n!=null&&this.resizeBar.setMaxWidth(n)}setToolPanelComponent(e){this.toolPanelCompInstance=e,this.appendChild(e.getGui()),this.addDestroyFunc(()=>{this.destroyBean(e)}),this.width&&(this.getGui().style.width=`${this.width}px`)}getToolPanelInstance(){return this.toolPanelCompInstance}setResizerSizerSide(e){const t=this.gos.get("enableRtl"),o=e==="left",s=t?o:!o;this.resizeBar.setInverted(s)}refresh(){this.toolPanelCompInstance.refresh(this.params)}};_ToolPanelWrapper.TEMPLATE='<div class="ag-tool-panel-wrapper" role="tabpanel"/>',__decorateClass([(0,import_core4.Autowired)("userComponentFactory")],_ToolPanelWrapper.prototype,"userComponentFactory",2),__decorateClass([import_core4.PostConstruct],_ToolPanelWrapper.prototype,"setupResize",1);var ToolPanelWrapper=_ToolPanelWrapper,_SideBarComp=class P extends import_core5.Component{constructor(){super(P.TEMPLATE),this.toolPanelWrappers=[]}postConstruct(){var e;this.sideBarButtonsComp.addEventListener(SideBarButtonsComp.EVENT_SIDE_BAR_BUTTON_CLICKED,this.onToolPanelButtonClicked.bind(this));const{sideBar:t}=(e=this.gos.get("initialState"))!=null?e:{};this.setSideBarDef({sideBarDef:SideBarDefParser.parse(this.gos.get("sideBar")),sideBarState:t}),this.addManagedPropertyListener("sideBar",this.onSideBarUpdated.bind(this)),this.sideBarService.registerSideBarComp(this),this.createManagedBean(new import_core5.ManagedFocusFeature(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)}))}onTabKeyDown(e){if(e.defaultPrevented)return;const{focusService:t,sideBarButtonsComp:o}=this,s=this.getGui(),n=o.getGui(),r=this.gos.getActiveDomElement(),a=s.querySelector(".ag-tool-panel-wrapper:not(.ag-hidden)"),l=e.target;if(!a)return;if(n.contains(r)){t.focusInto(a,e.shiftKey)&&e.preventDefault();return}if(!e.shiftKey)return;let d=null;a.contains(r)?d=this.focusService.findNextFocusableElement(a,void 0,!0):t.isTargetUnderManagedComponent(a,l)&&e.shiftKey&&(d=this.focusService.findFocusableElementBeforeTabGuard(a,l)),d||(d=n.querySelector(".ag-selected button")),d&&d!==e.target&&(e.preventDefault(),d.focus())}handleKeyDown(e){const t=this.gos.getActiveDomElement();if(!this.sideBarButtonsComp.getGui().contains(t))return;const o=this.sideBarButtonsComp.getGui(),s=Array.prototype.slice.call(o.querySelectorAll(".ag-side-button")),n=s.findIndex(l=>l.contains(t));let r=null;switch(e.key){case import_core5.KeyCode.LEFT:case import_core5.KeyCode.UP:r=Math.max(0,n-1);break;case import_core5.KeyCode.RIGHT:case import_core5.KeyCode.DOWN:r=Math.min(n+1,s.length-1);break}if(r===null)return;const a=s[r].querySelector("button");a&&(a.focus(),e.preventDefault())}onToolPanelButtonClicked(e){const t=e.toolPanelId;this.openedItem()===t?this.openToolPanel(void 0,"sideBarButtonClicked"):this.openToolPanel(t,"sideBarButtonClicked")}clearDownUi(){this.sideBarButtonsComp.clearButtons(),this.destroyToolPanelWrappers()}setSideBarDef({sideBarDef:e,sideBarState:t,existingToolPanelWrappers:o}){if(this.setDisplayed(!1),this.sideBar=e,this.sideBar&&this.sideBar.toolPanels){const s=this.sideBar.toolPanels;if(this.createToolPanelsAndSideButtons(s,t,o),!this.toolPanelWrappers.length)return;const n=t?t.visible:!this.sideBar.hiddenByDefault;if(this.setDisplayed(n),this.setSideBarPosition(t?t.position:this.sideBar.position),n)if(t){const{openToolPanel:r}=t;r&&this.openToolPanel(r,"sideBarInitializing")}else this.openToolPanel(this.sideBar.defaultToolPanel,"sideBarInitializing")}}getDef(){return this.sideBar}setSideBarPosition(e){e||(e="right"),this.position=e;const t=e==="left",o=t?"right":"left";return this.addOrRemoveCssClass("ag-side-bar-left",t),this.addOrRemoveCssClass("ag-side-bar-right",!t),this.toolPanelWrappers.forEach(s=>{s.setResizerSizerSide(o)}),this.eventService.dispatchEvent({type:import_core5.Events.EVENT_SIDE_BAR_UPDATED}),this}setDisplayed(e,t){super.setDisplayed(e,t),this.eventService.dispatchEvent({type:import_core5.Events.EVENT_SIDE_BAR_UPDATED})}getState(){const e={};return this.toolPanelWrappers.forEach(t=>{var o,s;e[t.getToolPanelId()]=(s=(o=t.getToolPanelInstance())==null?void 0:o.getState)==null?void 0:s.call(o)}),{visible:this.isDisplayed(),position:this.position,openToolPanel:this.openedItem(),toolPanels:e}}createToolPanelsAndSideButtons(e,t,o){var s;for(const n of e)this.createToolPanelAndSideButton(n,(s=t?.toolPanels)==null?void 0:s[n.id],o?.[n.id])}validateDef(e){if(e.id==null)return console.warn("AG Grid: please review all your toolPanel components, it seems like at least one of them doesn't have an id"),!1;if(e.toolPanel==="agColumnsToolPanel"&&!import_core5.ModuleRegistry.__assertRegistered(import_core5.ModuleNames.ColumnsToolPanelModule,"Column Tool Panel",this.context.getGridId()))return!1;if(e.toolPanel==="agFiltersToolPanel"){if(!import_core5.ModuleRegistry.__assertRegistered(import_core5.ModuleNames.FiltersToolPanelModule,"Filters Tool Panel",this.context.getGridId()))return!1;if(this.filterManager.isAdvancedFilterEnabled())return import_core5._.warnOnce("Advanced Filter does not work with Filters Tool Panel. Filters Tool Panel has been disabled."),!1}return!0}createToolPanelAndSideButton(e,t,o){if(!this.validateDef(e))return;const s=this.sideBarButtonsComp.addButtonComp(e);let n;o?n=o:(n=this.getContext().createBean(new ToolPanelWrapper),n.setToolPanelDef(e,{initialState:t,onStateUpdated:()=>this.eventService.dispatchEvent({type:import_core5.Events.EVENT_SIDE_BAR_UPDATED})})),n.setDisplayed(!1);const r=n.getGui();this.appendChild(r),this.toolPanelWrappers.push(n),import_core5._.setAriaControls(s.getButtonElement(),r)}refresh(){this.toolPanelWrappers.forEach(e=>e.refresh())}openToolPanel(e,t="api"){const o=this.openedItem();if(o===e)return;this.toolPanelWrappers.forEach(r=>{const a=e===r.getToolPanelId();r.setDisplayed(a)});const s=this.openedItem();o!==s&&(this.sideBarButtonsComp.setActiveButton(e),this.raiseToolPanelVisibleEvent(e,o??void 0,t))}getToolPanelInstance(e){const t=this.toolPanelWrappers.filter(o=>o.getToolPanelId()===e)[0];if(!t){console.warn(`AG Grid: unable to lookup Tool Panel as invalid key supplied: ${e}`);return}return t.getToolPanelInstance()}raiseToolPanelVisibleEvent(e,t,o){const s=!!e&&!!t;if(t){const n={type:import_core5.Events.EVENT_TOOL_PANEL_VISIBLE_CHANGED,source:o,key:t,visible:!1,switchingToolPanel:s};this.eventService.dispatchEvent(n)}if(e){const n={type:import_core5.Events.EVENT_TOOL_PANEL_VISIBLE_CHANGED,source:o,key:e,visible:!0,switchingToolPanel:s};this.eventService.dispatchEvent(n)}}close(e="api"){this.openToolPanel(void 0,e)}isToolPanelShowing(){return!!this.openedItem()}openedItem(){let e=null;return this.toolPanelWrappers.forEach(t=>{t.isDisplayed()&&(e=t.getToolPanelId())}),e}onSideBarUpdated(){var e;const t=SideBarDefParser.parse(this.gos.get("sideBar"));let o={};t&&this.sideBar&&((e=t.toolPanels)==null||e.forEach(s=>{var n,r;const{id:a}=s;if(!a)return;const l=(n=this.sideBar.toolPanels)==null?void 0:n.find(h=>h.id===a);if(!l||s.toolPanel!==l.toolPanel)return;const d=this.toolPanelWrappers.find(h=>h.getToolPanelId()===a);if(!d)return;const c=this.gos.addGridCommonParams(__spreadProps(__spreadValues({},(r=s.toolPanelParams)!=null?r:{}),{onStateUpdated:()=>this.eventService.dispatchEvent({type:import_core5.Events.EVENT_SIDE_BAR_UPDATED})}));d.getToolPanelInstance().refresh(c)===!0&&(this.toolPanelWrappers=this.toolPanelWrappers.filter(h=>h!==d),import_core5._.removeFromParent(d.getGui()),o[a]=d)})),this.clearDownUi(),this.setSideBarDef({sideBarDef:t,existingToolPanelWrappers:o})}destroyToolPanelWrappers(){this.toolPanelWrappers.forEach(e=>{import_core5._.removeFromParent(e.getGui()),this.destroyBean(e)}),this.toolPanelWrappers.length=0}destroy(){this.destroyToolPanelWrappers(),super.destroy()}};_SideBarComp.TEMPLATE=`<div class="ag-side-bar ag-unselectable">
     7|             <ag-side-bar-buttons ref="sideBarButtons"></ag-side-bar-buttons>
     8|         </div>`,__decorateClass([(0,import_core5.Autowired)("focusService")],_SideBarComp.prototype,"focusService",2),__decorateClass([(0,import_core5.Autowired)("filterManager")],_SideBarComp.prototype,"filterManager",2),__decorateClass([(0,import_core5.Autowired)("sideBarService")],_SideBarComp.prototype,"sideBarService",2),__decorateClass([(0,import_core5.RefSelector)("sideBarButtons")],_SideBarComp.prototype,"sideBarButtonsComp",2),__decorateClass([import_core5.PostConstruct],_SideBarComp.prototype,"postConstruct",1);var SideBarComp=_SideBarComp,import_core6=require("@ag-grid-community/core"),ToolPanelColDefService=class extends import_core6.BeanStub{constructor(){super(...arguments),this.isColGroupDef=i=>i&&typeof i.children<"u",this.getId=i=>this.isColGroupDef(i)?i.groupId:i.colId}createColumnTree(i){const e=[],t=(s,n)=>{if(this.isColGroupDef(s)){const r=s,a=typeof r.groupId<"u"?r.groupId:r.headerName,l=new import_core6.ProvidedColumnGroup(r,a,!1,n),d=[];return r.children.forEach(c=>{const p=t(c,n+1);p&&d.push(p)}),l.setChildren(d),l}else{const r=s,a=r.colId?r.colId:r.field,l=this.columnModel.getPrimaryColumn(a);return l||e.push(r),l}},o=[];return i.forEach(s=>{const n=t(s,0);n&&o.push(n)}),e.length>0&&console.warn("AG Grid: unable to find grid columns for the supplied colDef(s):",e),o}syncLayoutWithGrid(i){const e=this.getLeafPathTrees(),t=this.mergeLeafPathTrees(e);i(t)}getLeafPathTrees(){const i=(o,s)=>{let n;if(o instanceof import_core6.ProvidedColumnGroup)if(o.isPadding())n=s;else{const a=Object.assign({},o.getColGroupDef());a.groupId=o.getGroupId(),a.children=[s],n=a}else{const a=Object.assign({},o.getColDef());a.colId=o.getColId(),n=a}const r=o.getOriginalParent();return r?i(r,n):n};return this.columnModel.getAllGridColumns().filter(o=>{const s=o.getColDef();return o.isPrimary()&&!s.showRowGroup}).map(o=>i(o,o.getColDef()))}mergeLeafPathTrees(i){const e=(s,n)=>this.isColGroupDef(s)&&this.isColGroupDef(n)&&this.getId(s)===this.getId(n),t=(s,n)=>{if(!this.isColGroupDef(n))return s;const r=s,a=n;return a.children&&a.groupId&&this.addChildrenToGroup(r,a.groupId,a.children[0])||a.children.forEach(l=>t(r,l)),r},o=[];for(let s=1;s<=i.length;s++){const n=i[s-1],r=i[s];e(n,r)?i[s]=t(n,r):o.push(n)}return o}addChildrenToGroup(i,e,t){const o=(r,a)=>{const l=r.children.map(this.getId),d=import_core6._.includes(l,this.getId(a)),c=import_core6._.last(r.children),p=c&&this.getId(c)!==this.getId(a);return d&&p};if(!this.isColGroupDef(i))return!0;const s=i,n=t;if(o(s,n))return s.children.push(n),!0;if(s.groupId===e){const r=s.children.map(this.getId);if(!import_core6._.includes(r,this.getId(n)))return s.children.push(n),!0}return s.children.forEach(r=>this.addChildrenToGroup(r,e,t)),!1}};__decorateClass([(0,import_core6.Autowired)("columnModel")],ToolPanelColDefService.prototype,"columnModel",2),ToolPanelColDefService=__decorateClass([(0,import_core6.Bean)("toolPanelColDefService")],ToolPanelColDefService);var VERSION="31.3.4",import_core7=require("@ag-grid-community/core"),SideBarService=class extends import_core7.BeanStub{registerSideBarComp(i){this.sideBarComp=i}getSideBarComp(){return this.sideBarComp}};SideBarService=__decorateClass([(0,import_core7.Bean)("sideBarService")],SideBarService);var SideBarModule={version:VERSION,moduleName:import_core8.ModuleNames.SideBarModule,beans:[ToolPanelColDefService,SideBarService],agStackComponents:[{componentName:"AgHorizontalResize",componentClass:HorizontalResizeComp},{componentName:"AgSideBar",componentClass:SideBarComp},{componentName:"AgSideBarButtons",componentClass:SideBarButtonsComp}],dependantModules:[import_core9.EnterpriseCoreModule]};

