# ====================================================================
# FILE: src/CodeFile.php
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-37 ---
     1| <?php
     2| /**
     3|  * @link http://www.yiiframework.com/
     4|  * @copyright Copyright (c) 2008 Yii Software LLC
     5|  * @license http://www.yiiframework.com/license/
     6|  */
     7| namespace yii\gii;
     8| use Yii;
     9| use yii\base\BaseObject;
    10| use yii\gii\components\DiffRendererHtmlInline;
    11| use yii\helpers\Html;
    12| /**
    13|  * CodeFile represents a code file to be generated.
    14|  *
    15|  * @property string $relativePath The code file path relative to the application base path. This property is
    16|  * read-only.
    17|  * @property string $type The code file extension (e.g. php, txt). This property is read-only.
    18|  *
    19|  * @author Qiang Xue <qiang.xue@gmail.com>
    20|  * @since 2.0
    21|  */
    22| class CodeFile extends BaseObject
    23| {
    24|     /**
    25|      * The code file is new.
    26|      */
    27|     const OP_CREATE = 'create';
    28|     /**
    29|      * The code file already exists, and the new one may need to overwrite it.
    30|      */
    31|     const OP_OVERWRITE = 'overwrite';
    32|     /**
    33|      * The new code file and the existing one are identical.
    34|      */
    35|     const OP_SKIP = 'skip';
    36|     /**
    37|      * @var string an ID that uniquely identifies this code file.


# ====================================================================
# FILE: src/Generator.php
# Total hunks: 4
# ====================================================================
# --- HUNK 1: Lines 7-50 ---
     7| namespace yii\gii;
     8| use Yii;
     9| use ReflectionClass;
    10| use yii\base\InvalidConfigException;
    11| use yii\base\Model;
    12| use yii\helpers\VarDumper;
    13| use yii\web\View;
    14| /**
    15|  * This is the base class for all generator classes.
    16|  *
    17|  * A generator instance is responsible for taking user inputs, validating them,
    18|  * and using them to generate the corresponding code based on a set of code template files.
    19|  *
    20|  * A generator class typically needs to implement the following methods:
    21|  *
    22|  * - [[getName()]]: returns the name of the generator
    23|  * - [[getDescription()]]: returns the detailed description of the generator
    24|  * - [[generate()]]: generates the code based on the current user input and the specified code template files.
    25|  *   This is the place where main code generation code resides.
    26|  *
    27|  * @property string $description The detailed description of the generator. This property is read-only.
    28|  * @property string $stickyDataFile The file path that stores the sticky attribute values. This property is
    29|  * read-only.
    30|  * @property string $templatePath The root path of the template files that are currently being used. This
    31|  * property is read-only.
    32|  *
    33|  * @author Qiang Xue <qiang.xue@gmail.com>
    34|  * @since 2.0
    35|  */
    36| abstract class Generator extends Model
    37| {
    38|     /**
    39|      * @var array a list of available code templates. The array keys are the template names,
    40|      * and the array values are the corresponding template paths or path aliases.
    41|      */
    42|     public $templates = [];
    43|     /**
    44|      * @var string the name of the code template that the user has selected.
    45|      * The value of this property is internally managed by this class.
    46|      */
    47|     public $template = 'default';
    48|     /**
    49|      * @var bool whether the strings will be generated using `Yii::t()` or normal strings.
    50|      */

# --- HUNK 2: Lines 341-382 ---
   341|     public function validateNewClass($attribute, $params)
   342|     {
   343|         $class = ltrim($this->$attribute, '\\');
   344|         if (($pos = strrpos($class, '\\')) === false) {
   345|             $this->addError($attribute, "The class name must contain fully qualified namespace name.");
   346|         } else {
   347|             $ns = substr($class, 0, $pos);
   348|             $path = Yii::getAlias('@' . str_replace('\\', '/', $ns), false);
   349|             if ($path === false) {
   350|                 $this->addError($attribute, "The class namespace is invalid: $ns");
   351|             } elseif (!is_dir($path)) {
   352|                 $this->addError($attribute, "Please make sure the directory containing this class exists: $path");
   353|             }
   354|         }
   355|     }
   356|     /**
   357|      * Checks if message category is not empty when I18N is enabled.
   358|      */
   359|     public function validateMessageCategory()
   360|     {
   361|         if ($this->enableI18N && empty($this->messageCategory)) {
   362|             $this->addError('messageCategory', "Message Category cannot be blank.");
   363|         }
   364|     }
   365|     /**
   366|      * @param string $value the attribute to be validated
   367|      * @return bool whether the value is a reserved PHP keyword.
   368|      */
   369|     public function isReservedKeyword($value)
   370|     {
   371|         static $keywords = [
   372|             '__class__',
   373|             '__dir__',
   374|             '__file__',
   375|             '__function__',
   376|             '__line__',
   377|             '__method__',
   378|             '__namespace__',
   379|             '__trait__',
   380|             'abstract',
   381|             'and',
   382|             'array',

# --- HUNK 3: Lines 396-470 ---
   396|             'do',
   397|             'echo',
   398|             'else',
   399|             'elseif',
   400|             'empty',
   401|             'enddeclare',
   402|             'endfor',
   403|             'endforeach',
   404|             'endif',
   405|             'endswitch',
   406|             'endwhile',
   407|             'eval',
   408|             'exception',
   409|             'exit',
   410|             'extends',
   411|             'final',
   412|             'finally',
   413|             'for',
   414|             'foreach',
   415|             'function',
   416|             'global',
   417|             'goto',
   418|             'if',
   419|             'implements',
   420|             'include',
   421|             'include_once',
   422|             'instanceof',
   423|             'insteadof',
   424|             'interface',
   425|             'isset',
   426|             'list',
   427|             'namespace',
   428|             'new',
   429|             'old_function',
   430|             'or',
   431|             'parent',
   432|             'php_user_filter',
   433|             'print',
   434|             'private',
   435|             'protected',
   436|             'public',
   437|             'require',
   438|             'require_once',
   439|             'return',
   440|             'static',
   441|             'switch',
   442|             'this',
   443|             'throw',
   444|             'trait',
   445|             'try',
   446|             'unset',
   447|             'use',
   448|             'var',
   449|             'while',
   450|             'xor',
   451|         ];
   452|         return in_array(strtolower($value), $keywords, true);
   453|     }
   454|     /**
   455|      * Generates a string depending on enableI18N property
   456|      *
   457|      * @param string $string the text be generated
   458|      * @param array $placeholders the placeholders to use by `Yii::t()`
   459|      * @return string
   460|      */
   461|     public function generateString($string = '', $placeholders = [])
   462|     {
   463|         $string = addslashes($string);
   464|         if ($this->enableI18N) {
   465|             if (!empty($placeholders)) {
   466|                 $ph = ', ' . VarDumper::export($placeholders);
   467|             } else {
   468|                 $ph = '';
   469|             }
   470|             $str = "Yii::t('" . $this->messageCategory . "', '" . $string . "'" . $ph . ")";


# ====================================================================
# FILE: src/assets/js/gii.js
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 169-222 ---
   169|         if (valueToCopy && (e.ctrlKey || e.metaKey) && (e.which === 67)) {
   170|             return onKeydown(e);
   171|         }
   172|     }).on("keyup", onKeyup);
   173|     return {
   174|         init: function () {
   175|             initStickyInputs();
   176|             initPreviewDiffLinks();
   177|             initConfirmationCheckboxes();
   178|             initToggleActions();
   179|             initFilterRows();
   180|             $('#model-generator #generator-tablename').change(function () {
   181|                 var show = ($(this).val().indexOf('*') === -1);
   182|                 $('.field-generator-modelclass').toggle(show);
   183|                 if ($('#generator-generatequery').is(':checked')) {
   184|                     $('.field-generator-queryclass').toggle(show);
   185|                 }
   186|                 $('.field-generator-caseinsensitive').toggle(!show);
   187|             }).change();
   188|             $('#model-generator #generator-tablename').on('blur', function () {
   189|                 var tableName = $(this).val();
   190|                 var tablePrefix = $(this).attr('table_prefix') || '';
   191|                 if (tablePrefix.length) {
   192|                     if (tableName.slice(0, tablePrefix.length) === tablePrefix) {
   193|                         tableName = tableName.slice(tablePrefix.length);
   194|                     }
   195|                 }
   196|                 if ($('#generator-modelclass').val() === '' && tableName && tableName.indexOf('*') === -1) {
   197|                     var modelClass = '';
   198|                     $.each(tableName.split(/\.|\_/), function() {
   199|                         if(this.length>0)
   200|                             modelClass+=this.substring(0,1).toUpperCase()+this.substring(1);
   201|                     });
   202|                     $('#generator-modelclass').val(modelClass).blur();
   203|                 }
   204|             });
   205|             $('#model-generator #generator-modelclass').on('blur', function () {
   206|                 var modelClass = $(this).val();
   207|                 if (modelClass !== '') {
   208|                     var queryClass = $('#generator-queryclass').val();
   209|                     if (queryClass === '') {
   210|                         queryClass = modelClass + 'Query';
   211|                         $('#generator-queryclass').val(queryClass);
   212|                     }
   213|                 }
   214|             });
   215|             $('#model-generator #generator-ns').on('blur', function () {
   216|                 var stickyValue = $('#model-generator .field-generator-queryns .sticky-value');
   217|                 var input = $('#model-generator #generator-queryns');
   218|                 if (stickyValue.is(':visible') || !input.is(':visible')) {
   219|                     var ns = $(this).val();
   220|                     stickyValue.html(ns);
   221|                     input.val(ns);
   222|                 }


# ====================================================================
# FILE: src/generators/controller/Generator.php
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-40 ---
     1| <?php
     2| /**
     3|  * @link http://www.yiiframework.com/
     4|  * @copyright Copyright (c) 2008 Yii Software LLC
     5|  * @license http://www.yiiframework.com/license/
     6|  */
     7| namespace yii\gii\generators\controller;
     8| use Yii;
     9| use yii\gii\CodeFile;
    10| use yii\helpers\Html;
    11| use yii\helpers\Inflector;
    12| use yii\helpers\StringHelper;
    13| /**
    14|  * This generator will generate a controller and one or a few action view files.
    15|  *
    16|  * @property array $actionIDs An array of action IDs entered by the user. This property is read-only.
    17|  * @property string $controllerFile The controller class file path. This property is read-only.
    18|  * @property string $controllerID The controller ID. This property is read-only.
    19|  * @property string $controllerNamespace The namespace of the controller class. This property is read-only.
    20|  * @property string $controllerSubPath The controller sub path. This property is read-only.
    21|  *
    22|  * @author Qiang Xue <qiang.xue@gmail.com>
    23|  * @since 2.0
    24|  */
    25| class Generator extends \yii\gii\Generator
    26| {
    27|     /**
    28|      * @var string the controller class name
    29|      */
    30|     public $controllerClass;
    31|     /**
    32|      * @var string the controller's view path
    33|      */
    34|     public $viewPath;
    35|     /**
    36|      * @var string the base class of the controller
    37|      */
    38|     public $baseClass = 'yii\web\Controller';
    39|     /**
    40|      * @var string list of action IDs separated by commas or spaces


# ====================================================================
# FILE: src/generators/crud/Generator.php
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-45 ---
     1| <?php
     2| /**
     3|  * @link http://www.yiiframework.com/
     4|  * @copyright Copyright (c) 2008 Yii Software LLC
     5|  * @license http://www.yiiframework.com/license/
     6|  */
     7| namespace yii\gii\generators\crud;
     8| use Yii;
     9| use yii\db\ActiveRecord;
    10| use yii\db\BaseActiveRecord;
    11| use yii\db\Schema;
    12| use yii\gii\CodeFile;
    13| use yii\helpers\Inflector;
    14| use yii\helpers\VarDumper;
    15| use yii\web\Controller;
    16| /**
    17|  * Generates CRUD
    18|  *
    19|  * @property array $columnNames Model column names. This property is read-only.
    20|  * @property string $controllerID The controller ID (without the module ID prefix). This property is
    21|  * read-only.
    22|  * @property string $nameAttribute This property is read-only.
    23|  * @property array $searchAttributes Searchable attributes. This property is read-only.
    24|  * @property bool|\yii\db\TableSchema $tableSchema This property is read-only.
    25|  * @property string $viewPath The controller view path. This property is read-only.
    26|  *
    27|  * @author Qiang Xue <qiang.xue@gmail.com>
    28|  * @since 2.0
    29|  */
    30| class Generator extends \yii\gii\Generator
    31| {
    32|     public $modelClass;
    33|     public $controllerClass;
    34|     public $viewPath;
    35|     public $baseControllerClass = 'yii\web\Controller';
    36|     public $indexWidgetType = 'grid';
    37|     public $searchModelClass = '';
    38|     /**
    39|      * @var bool whether to wrap the `GridView` or `ListView` widget with the `yii\widgets\Pjax` widget
    40|      * @since 2.0.5
    41|      */
    42|     public $enablePjax = false;
    43|     /**
    44|      * @var bool whether to use strict inflection for controller IDs (insert a separator between two consecutive uppercase chars)
    45|      * @since 2.1.0


# ====================================================================
# FILE: src/generators/crud/default/controller.php
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 4-132 ---
     4|  */
     5| use yii\db\ActiveRecordInterface;
     6| use yii\helpers\StringHelper;
     7| /* @var $this yii\web\View */
     8| /* @var $generator yii\gii\generators\crud\Generator */
     9| $controllerClass = StringHelper::basename($generator->controllerClass);
    10| $modelClass = StringHelper::basename($generator->modelClass);
    11| $searchModelClass = StringHelper::basename($generator->searchModelClass);
    12| if ($modelClass === $searchModelClass) {
    13|     $searchModelAlias = $searchModelClass . 'Search';
    14| }
    15| /* @var $class ActiveRecordInterface */
    16| $class = $generator->modelClass;
    17| $pks = $class::primaryKey();
    18| $urlParams = $generator->generateUrlParams();
    19| $actionParams = $generator->generateActionParams();
    20| $actionParamComments = $generator->generateActionParamComments();
    21| echo "<?php\n";
    22| ?>
    23| namespace <?= StringHelper::dirname(ltrim($generator->controllerClass, '\\')) ?>;
    24| use Yii;
    25| use <?= ltrim($generator->modelClass, '\\') ?>;
    26| <?php if (!empty($generator->searchModelClass)): ?>
    27| use <?= ltrim($generator->searchModelClass, '\\') . (isset($searchModelAlias) ? " as $searchModelAlias" : "") ?>;
    28| <?php else: ?>
    29| use yii\data\ActiveDataProvider;
    30| <?php endif; ?>
    31| use <?= ltrim($generator->baseControllerClass, '\\') ?>;
    32| use yii\web\NotFoundHttpException;
    33| use yii\filters\VerbFilter;
    34| /**
    35|  * <?= $controllerClass ?> implements the CRUD actions for <?= $modelClass ?> model.
    36|  */
    37| class <?= $controllerClass ?> extends <?= StringHelper::basename($generator->baseControllerClass) . "\n" ?>
    38| {
    39|     /**
    40|      * {@inheritdoc}
    41|      */
    42|     public function behaviors()
    43|     {
    44|         return [
    45|             'verbs' => [
    46|                 'class' => VerbFilter::className(),
    47|                 'actions' => [
    48|                     'delete' => ['POST'],
    49|                 ],
    50|             ],
    51|         ];
    52|     }
    53|     /**
    54|      * Lists all <?= $modelClass ?> models.
    55|      * @return mixed
    56|      */
    57|     public function actionIndex()
    58|     {
    59| <?php if (!empty($generator->searchModelClass)): ?>
    60|         $searchModel = new <?= isset($searchModelAlias) ? $searchModelAlias : $searchModelClass ?>();
    61|         $dataProvider = $searchModel->search(Yii::$app->request->queryParams);
    62|         return $this->render('index', [
    63|             'searchModel' => $searchModel,
    64|             'dataProvider' => $dataProvider,
    65|         ]);
    66| <?php else: ?>
    67|         $dataProvider = new ActiveDataProvider([
    68|             'query' => <?= $modelClass ?>::find(),
    69|         ]);
    70|         return $this->render('index', [
    71|             'dataProvider' => $dataProvider,
    72|         ]);
    73| <?php endif; ?>
    74|     }
    75|     /**
    76|      * Displays a single <?= $modelClass ?> model.
    77|      * <?= implode("\n     * ", $actionParamComments) . "\n" ?>
    78|      * @return mixed
    79|      * @throws NotFoundHttpException if the model cannot be found
    80|      */
    81|     public function actionView(<?= $actionParams ?>)
    82|     {
    83|         return $this->render('view', [
    84|             'model' => $this->findModel(<?= $actionParams ?>),
    85|         ]);
    86|     }
    87|     /**
    88|      * Creates a new <?= $modelClass ?> model.
    89|      * If creation is successful, the browser will be redirected to the 'view' page.
    90|      * @return mixed
    91|      */
    92|     public function actionCreate()
    93|     {
    94|         $model = new <?= $modelClass ?>();
    95|         if ($model->load(Yii::$app->request->post()) && $model->save()) {
    96|             return $this->redirect(['view', <?= $urlParams ?>]);
    97|         }
    98|         return $this->render('create', [
    99|             'model' => $model,
   100|         ]);
   101|     }
   102|     /**
   103|      * Updates an existing <?= $modelClass ?> model.
   104|      * If update is successful, the browser will be redirected to the 'view' page.
   105|      * <?= implode("\n     * ", $actionParamComments) . "\n" ?>
   106|      * @return mixed
   107|      * @throws NotFoundHttpException if the model cannot be found
   108|      */
   109|     public function actionUpdate(<?= $actionParams ?>)
   110|     {
   111|         $model = $this->findModel(<?= $actionParams ?>);
   112|         if ($model->load(Yii::$app->request->post()) && $model->save()) {
   113|             return $this->redirect(['view', <?= $urlParams ?>]);
   114|         }
   115|         return $this->render('update', [
   116|             'model' => $model,
   117|         ]);
   118|     }
   119|     /**
   120|      * Deletes an existing <?= $modelClass ?> model.
   121|      * If deletion is successful, the browser will be redirected to the 'index' page.
   122|      * <?= implode("\n     * ", $actionParamComments) . "\n" ?>
   123|      * @return mixed
   124|      * @throws NotFoundHttpException if the model cannot be found
   125|      */
   126|     public function actionDelete(<?= $actionParams ?>)
   127|     {
   128|         $this->findModel(<?= $actionParams ?>)->delete();
   129|         return $this->redirect(['index']);
   130|     }
   131|     /**
   132|      * Finds the <?= $modelClass ?> model based on its primary key value.


# ====================================================================
# FILE: src/generators/crud/default/views/index.php
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-27 ---
     1| <?php
     2| use yii\helpers\Inflector;
     3| use yii\helpers\StringHelper;
     4| /* @var $this yii\web\View */
     5| /* @var $generator yii\gii\generators\crud\Generator */
     6| $urlParams = $generator->generateUrlParams();
     7| $nameAttribute = $generator->getNameAttribute();
     8| echo "<?php\n";
     9| ?>
    10| use yii\helpers\Html;
    11| use <?= $generator->indexWidgetType === 'grid' ? "yii\\grid\\GridView" : "yii\\widgets\\ListView" ?>;
    12| <?= $generator->enablePjax ? 'use yii\widgets\Pjax;' : '' ?>
    13| /* @var $this yii\web\View */
    14| <?= !empty($generator->searchModelClass) ? "/* @var \$searchModel " . ltrim($generator->searchModelClass, '\\') . " */\n" : '' ?>
    15| /* @var $dataProvider yii\data\ActiveDataProvider */
    16| $this->title = <?= $generator->generateString(Inflector::pluralize(Inflector::camel2words(StringHelper::basename($generator->modelClass)))) ?>;
    17| $this->params['breadcrumbs'][] = $this->title;
    18| ?>
    19| <div class="<?= Inflector::camel2id(StringHelper::basename($generator->modelClass)) ?>-index">
    20|     <h1><?= "<?= " ?>Html::encode($this->title) ?></h1>
    21|     <p>
    22|         <?= "<?= " ?>Html::a(<?= $generator->generateString('Create ' . Inflector::camel2words(StringHelper::basename($generator->modelClass))) ?>, ['create'], ['class' => 'btn btn-success']) ?>
    23|     </p>
    24| <?= $generator->enablePjax ? "    <?php Pjax::begin(); ?>\n" : '' ?>
    25| <?php if(!empty($generator->searchModelClass)): ?>
    26| <?= "    <?php " . ($generator->indexWidgetType === 'grid' ? "// " : "") ?>echo $this->render('_search', ['model' => $searchModel]); ?>
    27| <?php endif; ?>

# --- HUNK 2: Lines 42-67 ---
    42|     }
    43| } else {
    44|     foreach ($tableSchema->columns as $column) {
    45|         $format = $generator->generateColumnFormat($column);
    46|         if (++$count < 6) {
    47|             echo "            '" . $column->name . ($format === 'text' ? "" : ":" . $format) . "',\n";
    48|         } else {
    49|             echo "            //'" . $column->name . ($format === 'text' ? "" : ":" . $format) . "',\n";
    50|         }
    51|     }
    52| }
    53| ?>
    54|             ['class' => 'yii\grid\ActionColumn'],
    55|         ],
    56|     ]); ?>
    57| <?php else: ?>
    58|     <?= "<?= " ?>ListView::widget([
    59|         'dataProvider' => $dataProvider,
    60|         'itemOptions' => ['class' => 'item'],
    61|         'itemView' => function ($model, $key, $index, $widget) {
    62|             return Html::a(Html::encode($model-><?= $nameAttribute ?>), ['view', <?= $urlParams ?>]);
    63|         },
    64|     ]) ?>
    65| <?php endif; ?>
    66| <?= $generator->enablePjax ? "    <?php Pjax::end(); ?>\n" : '' ?>
    67| </div>


# ====================================================================
# FILE: src/generators/extension/Generator.php
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-35 ---
     1| <?php
     2| /**
     3|  * @link http://www.yiiframework.com/
     4|  * @copyright Copyright (c) 2008 Yii Software LLC
     5|  * @license http://www.yiiframework.com/license/
     6|  */
     7| namespace yii\gii\generators\extension;
     8| use Yii;
     9| use yii\gii\CodeFile;
    10| /**
    11|  * This generator will generate the skeleton files needed by an extension.
    12|  *
    13|  * @property string $keywordsArrayJson A json encoded array with the given keywords. This property is
    14|  * read-only.
    15|  * @property bool $outputPath The directory that contains the module class. This property is read-only.
    16|  *
    17|  * @author Tobias Munk <schmunk@usrbin.de>
    18|  * @since 2.0
    19|  */
    20| class Generator extends \yii\gii\Generator
    21| {
    22|     public $vendorName;
    23|     public $packageName = "yii2-";
    24|     public $namespace;
    25|     public $type = "yii2-extension";
    26|     public $keywords = "yii2,extension";
    27|     public $title;
    28|     public $description;
    29|     public $outputPath = "@app/runtime/tmp-extensions";
    30|     public $license;
    31|     public $authorName;
    32|     public $authorEmail;
    33|     /**
    34|      * {@inheritdoc}
    35|      */


# ====================================================================
# FILE: src/generators/form/Generator.php
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-34 ---
     1| <?php
     2| /**
     3|  * @link http://www.yiiframework.com/
     4|  * @copyright Copyright (c) 2008 Yii Software LLC
     5|  * @license http://www.yiiframework.com/license/
     6|  */
     7| namespace yii\gii\generators\form;
     8| use Yii;
     9| use yii\base\Model;
    10| use yii\gii\CodeFile;
    11| /**
    12|  * This generator will generate an action view file based on the specified model class.
    13|  *
    14|  * @property array $modelAttributes List of safe attributes of [[modelClass]]. This property is read-only.
    15|  *
    16|  * @author Qiang Xue <qiang.xue@gmail.com>
    17|  * @since 2.0
    18|  */
    19| class Generator extends \yii\gii\Generator
    20| {
    21|     public $modelClass;
    22|     public $viewPath = '@app/views';
    23|     public $viewName;
    24|     public $scenarioName;
    25|     /**
    26|      * {@inheritdoc}
    27|      */
    28|     public function getName()
    29|     {
    30|         return 'Form Generator';
    31|     }
    32|     /**
    33|      * {@inheritdoc}
    34|      */


# ====================================================================
# FILE: src/generators/form/default/form.php
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-24 ---
     1| <?php
     2| /**
     3|  * This is the template for generating an action view file.
     4|  */
     5| /* @var $this yii\web\View */
     6| /* @var $generator yii\gii\generators\form\Generator */
     7| echo "<?php\n";
     8| ?>
     9| use yii\helpers\Html;
    10| use yii\widgets\ActiveForm;
    11| /* @var $this yii\web\View */
    12| /* @var $model <?= ltrim($generator->modelClass, '\\') ?> */
    13| /* @var $form ActiveForm */
    14| <?= "?>" ?>
    15| <div class="<?= str_replace('/', '-', trim($generator->viewName, '_')) ?>">
    16|     <?= "<?php " ?>$form = ActiveForm::begin(); ?>
    17|     <?php foreach ($generator->getModelAttributes() as $attribute): ?>
    18|     <?= "<?= " ?>$form->field($model, '<?= $attribute ?>') ?>
    19|     <?php endforeach; ?>
    20|         <div class="form-group">
    21|             <?= "<?= " ?>Html::submitButton(<?= $generator->generateString('Submit') ?>, ['class' => 'btn btn-primary']) ?>
    22|         </div>
    23|     <?= "<?php " ?>ActiveForm::end(); ?>
    24| </div><!-- <?= str_replace('/', '-', trim($generator->viewName, '-')) ?> -->


# ====================================================================
# FILE: src/generators/model/Generator.php
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 927-966 ---
   927|         $className = $tableName;
   928|         foreach ($patterns as $pattern) {
   929|             if (preg_match($pattern, $tableName, $matches)) {
   930|                 $className = $matches[1];
   931|                 break;
   932|             }
   933|         }
   934|         if ($this->standardizeCapitals) {
   935|             $schemaName = ctype_upper(preg_replace('/[_-]/', '', $schemaName)) ? strtolower($schemaName) : $schemaName;
   936|             $className = ctype_upper(preg_replace('/[_-]/', '', $className)) ? strtolower($className) : $className;
   937|             $this->classNames[$fullTableName] = Inflector::camelize(Inflector::camel2words($schemaName.$className));
   938|         } else {
   939|             $this->classNames[$fullTableName] = Inflector::id2camel($schemaName.$className, '_');
   940|         }
   941|         if ($this->singularize) {
   942|             $this->classNames[$fullTableName] = Inflector::singularize($this->classNames[$fullTableName]);
   943|         }
   944|         return $this->classNames[$fullTableName];
   945|     }
   946|     /**
   947|      * Generates a query class name from the specified model class name.
   948|      * @param string $modelClassName model class name
   949|      * @return string generated class name
   950|      */
   951|     protected function generateQueryClassName($modelClassName)
   952|     {
   953|         $queryClassName = $this->queryClass;
   954|         if (empty($queryClassName) || strpos($this->tableName, '*') !== false) {
   955|             $queryClassName = $modelClassName . 'Query';
   956|         }
   957|         return $queryClassName;
   958|     }
   959|     /**
   960|      * @return Connection the DB connection as specified by [[db]].
   961|      */
   962|     protected function getDbConnection()
   963|     {
   964|         return Yii::$app->get($this->db, false);
   965|     }
   966|     /**


# ====================================================================
# FILE: src/generators/model/form.php
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-31 ---
     1| <?php
     2| use yii\gii\generators\model\Generator;
     3| /* @var $this yii\web\View */
     4| /* @var $form yii\widgets\ActiveForm */
     5| /* @var $generator yii\gii\generators\model\Generator */
     6| echo $form->field($generator, 'tableName')->textInput(['table_prefix' => $generator->getTablePrefix()]);
     7| echo $form->field($generator, 'modelClass');
     8| echo $form->field($generator, 'standardizeCapitals')->checkbox();
     9| echo $form->field($generator, 'singularize')->checkbox();
    10| echo $form->field($generator, 'ns');
    11| echo $form->field($generator, 'baseClass');
    12| echo $form->field($generator, 'db');
    13| echo $form->field($generator, 'useTablePrefix')->checkbox();
    14| echo $form->field($generator, 'generateRelations')->dropDownList([
    15|     Generator::RELATIONS_NONE => 'No relations',
    16|     Generator::RELATIONS_ALL => 'All relations',
    17|     Generator::RELATIONS_ALL_INVERSE => 'All relations with inverse',
    18| ]);
    19| echo $form->field($generator, 'generateJunctionRelationMode')->dropDownList([
    20|     Generator::JUNCTION_RELATION_VIA_TABLE => 'Via Table',
    21|     Generator::JUNCTION_RELATION_VIA_MODEL => 'Via Model',
    22| ]);
    23| echo $form->field($generator, 'generateRelationsFromCurrentSchema')->checkbox();
    24| echo $form->field($generator, 'generateLabelsFromComments')->checkbox();
    25| echo $form->field($generator, 'generateQuery')->checkbox();
    26| echo $form->field($generator, 'queryNs');
    27| echo $form->field($generator, 'queryClass');
    28| echo $form->field($generator, 'queryBaseClass');
    29| echo $form->field($generator, 'enableI18N')->checkbox();
    30| echo $form->field($generator, 'messageCategory');
    31| echo $form->field($generator, 'useSchemaName')->checkbox();


# ====================================================================
# FILE: src/generators/module/Generator.php
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-36 ---
     1| <?php
     2| /**
     3|  * @link http://www.yiiframework.com/
     4|  * @copyright Copyright (c) 2008 Yii Software LLC
     5|  * @license http://www.yiiframework.com/license/
     6|  */
     7| namespace yii\gii\generators\module;
     8| use yii\gii\CodeFile;
     9| use yii\helpers\Html;
    10| use Yii;
    11| use yii\helpers\StringHelper;
    12| /**
    13|  * This generator will generate the skeleton code needed by a module.
    14|  *
    15|  * @property string $controllerNamespace The controller namespace of the module. This property is read-only.
    16|  * @property bool $modulePath The directory that contains the module class. This property is read-only.
    17|  *
    18|  * @author Qiang Xue <qiang.xue@gmail.com>
    19|  * @since 2.0
    20|  */
    21| class Generator extends \yii\gii\Generator
    22| {
    23|     public $moduleClass;
    24|     public $moduleID;
    25|     /**
    26|      * {@inheritdoc}
    27|      */
    28|     public function getName()
    29|     {
    30|         return 'Module Generator';
    31|     }
    32|     /**
    33|      * {@inheritdoc}
    34|      */
    35|     public function getDescription()
    36|     {


# ====================================================================
# FILE: src/views/default/view/files.php
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 62-102 ---
    62|                     <?= Html::a(Html::encode($file->getRelativePath()), ['preview', 'id' => $id, 'file' => $file->id], ['class' => 'preview-code', 'data-title' => $file->getRelativePath()]) ?>
    63|                     <?php if ($file->operation === CodeFile::OP_OVERWRITE): ?>
    64|                         <?= Html::a('diff', ['diff', 'id' => $id, 'file' => $file->id], ['class' => 'diff-code badge badge-warning', 'data-title' => $file->getRelativePath()]) ?>
    65|                     <?php endif; ?>
    66|                 </td>
    67|                 <td class="action">
    68|                     <?php
    69|                     if ($file->operation === CodeFile::OP_SKIP) {
    70|                         echo 'unchanged';
    71|                     } else {
    72|                         echo $file->operation;
    73|                     }
    74|                     ?>
    75|                 </td>
    76|                 <?php if ($fileChangeExists): ?>
    77|                 <td class="check">
    78|                     <?php
    79|                     if ($file->operation === CodeFile::OP_SKIP) {
    80|                         echo '&nbsp;';
    81|                     } else {
    82|                         echo Html::checkBox("answers[{$file->id}]", isset($answers) ? isset($answers[$file->id]) : ($file->operation === CodeFile::OP_CREATE));
    83|                     }
    84|                     ?>
    85|                 </td>
    86|                 <?php endif; ?>
    87|             </tr>
    88|             <?php endforeach; ?>
    89|         </tbody>
    90|     </table>
    91|     <div class="modal fade" id="preview-modal" tabindex="-1" role="dialog">
    92|         <div class="modal-dialog modal-lg">
    93|             <div class="modal-content">
    94|                 <div class="modal-header" style="display: flex;">
    95|                     <div class="btn-group btn-group-sm" role="group">
    96|                         <a class="modal-previous btn btn-outline-secondary" href="#" title="Previous File (Left Arrow)">
    97|                             <span class="icon"></span>
    98|                         </a>
    99|                         <a class="modal-next btn btn-outline-secondary" href="#" title="Next File (Right Arrow)">
   100|                             <span class="icon"></span>
   101|                         </a>
   102|                         <a class="modal-refresh btn btn-outline-secondary" href="#" title="Refresh File (R)">

