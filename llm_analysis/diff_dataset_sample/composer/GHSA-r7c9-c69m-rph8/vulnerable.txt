# ====================================================================
# FILE: src/Runner/Version.php
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 10-66 ---
    10| /**
    11|  * This class defines the current version of PHPUnit.
    12|  *
    13|  * @since Class available since Release 2.0.0
    14|  */
    15| class PHPUnit_Runner_Version
    16| {
    17|     private static $pharVersion;
    18|     private static $version;
    19|     /**
    20|      * Returns the current version of PHPUnit.
    21|      *
    22|      * @return string
    23|      */
    24|     public static function id()
    25|     {
    26|         if (self::$pharVersion !== null) {
    27|             return self::$pharVersion;
    28|         }
    29|         if (self::$version === null) {
    30|             $version       = new SebastianBergmann\Version('5.0.10', dirname(dirname(__DIR__)));
    31|             self::$version = $version->getVersion();
    32|         }
    33|         return self::$version;
    34|     }
    35|     /**
    36|      * @return string
    37|      *
    38|      * @since Method available since Release 4.8.13
    39|      */
    40|     public static function series()
    41|     {
    42|         return implode('.', array_slice(explode('.', self::id()), 0, 2));
    43|     }
    44|     /**
    45|      * @return string
    46|      */
    47|     public static function getVersionString()
    48|     {
    49|         return 'PHPUnit ' . self::id() . ' by Sebastian Bergmann and contributors.';
    50|     }
    51|     /**
    52|      * @return string
    53|      *
    54|      * @since  Method available since Release 4.0.0
    55|      */
    56|     public static function getReleaseChannel()
    57|     {
    58|         if (strpos(self::$pharVersion, 'alpha') !== false) {
    59|             return '-alpha';
    60|         }
    61|         if (strpos(self::$pharVersion, 'beta') !== false) {
    62|             return '-beta';
    63|         }
    64|         return '';
    65|     }
    66| }


# ====================================================================
# FILE: src/Util/PHP/Default.php
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-77 ---
     1| <?php
     2| /*
     3|  * This file is part of PHPUnit.
     4|  *
     5|  * (c) Sebastian Bergmann <sebastian@phpunit.de>
     6|  *
     7|  * For the full copyright and license information, please view the LICENSE
     8|  * file that was distributed with this source code.
     9|  */
    10| use SebastianBergmann\Environment\Runtime;
    11| /**
    12|  * Default utility for PHP sub-processes.
    13|  *
    14|  * @since Class available since Release 3.5.12
    15|  */
    16| class PHPUnit_Util_PHP_Default extends PHPUnit_Util_PHP
    17| {
    18|     /**
    19|      * Runs a single job (PHP code) using a separate PHP process.
    20|      *
    21|      * @param string $job
    22|      * @param array  $settings
    23|      *
    24|      * @return array
    25|      *
    26|      * @throws PHPUnit_Framework_Exception
    27|      */
    28|     public function runJob($job, array $settings = [])
    29|     {
    30|         $runtime = new Runtime;
    31|         $runtime = $runtime->getBinary() . $this->settingsToParameters($settings);
    32|         if ('phpdbg' === PHP_SAPI) {
    33|             $runtime .= ' -qrr ' . escapeshellarg(__DIR__ . '/eval-stdin.php');
    34|         }
    35|         $process = proc_open(
    36|             $runtime,
    37|             [
    38|                 0 => ['pipe', 'r'],
    39|                 1 => ['pipe', 'w'],
    40|                 2 => ['pipe', 'w']
    41|             ],
    42|             $pipes
    43|         );
    44|         if (!is_resource($process)) {
    45|             throw new PHPUnit_Framework_Exception(
    46|                 'Unable to spawn worker process'
    47|             );
    48|         }
    49|         $this->process($pipes[0], $job);
    50|         fclose($pipes[0]);
    51|         $stdout = stream_get_contents($pipes[1]);
    52|         fclose($pipes[1]);
    53|         $stderr = stream_get_contents($pipes[2]);
    54|         fclose($pipes[2]);
    55|         proc_close($process);
    56|         $this->cleanup();
    57|         return ['stdout' => $stdout, 'stderr' => $stderr];
    58|     }
    59|     /**
    60|      * @param resource $pipe
    61|      * @param string   $job
    62|      *
    63|      * @throws PHPUnit_Framework_Exception
    64|      *
    65|      * @since Method available since Release 3.5.12
    66|      */
    67|     protected function process($pipe, $job)
    68|     {
    69|         fwrite($pipe, $job);
    70|     }
    71|     /**
    72|      * @since Method available since Release 3.5.12
    73|      */
    74|     protected function cleanup()
    75|     {
    76|     }
    77| }


# ====================================================================
# FILE: src/Util/PHP/eval-stdin.php
# Total hunks: 1
# ====================================================================
# --- HUNK 1: Lines 1-2 ---
     1| <?php
     2| eval('?>' . file_get_contents('php://input'));

