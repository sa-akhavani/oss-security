# ====================================================================
# FILE: src/View/Helper/FormElementErrors.php
# Total hunks: 2
# ====================================================================
# --- HUNK 1: Lines 1-27 ---
     1| <?php
     2| namespace Laminas\Form\View\Helper;
     3| use Laminas\Form\ElementInterface;
     4| use Laminas\Form\Exception;
     5| use Traversable;
     6| use function array_merge;
     7| use function array_walk_recursive;
     8| use function get_class;
     9| use function gettype;
    10| use function implode;
    11| use function is_array;
    12| use function is_object;
    13| use function iterator_to_array;
    14| use function sprintf;
    15| class FormElementErrors extends AbstractHelper
    16| {
    17|     /**@+
    18|      * @var string Templates for the open/close/separators for message tags
    19|      */
    20|     protected $messageCloseString     = '</li></ul>';
    21|     protected $messageOpenFormat      = '<ul%s><li>';
    22|     protected $messageSeparatorString = '</li><li>';
    23|     /**@-*/
    24|     /**
    25|      * @var array Default attributes for the open format tag
    26|      */
    27|     protected $attributes = [];

# --- HUNK 2: Lines 64-103 ---
    64|             $messages = iterator_to_array($messages);
    65|         } elseif (! is_array($messages)) {
    66|             throw new Exception\DomainException(sprintf(
    67|                 '%s expects that $element->getMessages() will return an array or Traversable; received "%s"',
    68|                 __METHOD__,
    69|                 is_object($messages) ? get_class($messages) : gettype($messages)
    70|             ));
    71|         }
    72|         if (! $messages) {
    73|             return '';
    74|         }
    75|         $messages = $this->flattenMessages($messages);
    76|         if (! $messages) {
    77|             return '';
    78|         }
    79|         $attributes = array_merge($this->attributes, $attributes);
    80|         $attributes = $this->createAttributesString($attributes);
    81|         if (! empty($attributes)) {
    82|             $attributes = ' ' . $attributes;
    83|         }
    84|         $markup  = sprintf($this->getMessageOpenFormat(), $attributes);
    85|         $markup .= implode($this->getMessageSeparatorString(), $messages);
    86|         $markup .= $this->getMessageCloseString();
    87|         return $markup;
    88|     }
    89|     /**
    90|      * Set the attributes that will go on the message open format
    91|      *
    92|      * @param  array $attributes key value pairs of attributes
    93|      * @return $this
    94|      */
    95|     public function setAttributes(array $attributes)
    96|     {
    97|         $this->attributes = $attributes;
    98|         return $this;
    99|     }
   100|     /**
   101|      * Get the attributes that will go on the message open format
   102|      *
   103|      * @return array

